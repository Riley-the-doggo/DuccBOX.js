/*! For license information please see DuccBOX.min.js.LICENSE.txt */
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define(t)
    : ((e =
        "undefined" != typeof globalThis ? globalThis : e || self).firebase =
        t());
})(this, function () {
  "use strict";
  var r = function (e, t) {
    return (r =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function (e, t) {
          e.__proto__ = t;
        }) ||
      function (e, t) {
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      })(e, t);
  };
  var n = function () {
    return (n =
      Object.assign ||
      function (e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in (t = arguments[n]))
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e;
      }).apply(this, arguments);
  };
  function e(e, a, s, l) {
    return new (s = s || Promise)(function (n, t) {
      function r(e) {
        try {
          o(l.next(e));
        } catch (e) {
          t(e);
        }
      }
      function i(e) {
        try {
          o(l.throw(e));
        } catch (e) {
          t(e);
        }
      }
      function o(e) {
        var t;
        e.done
          ? n(e.value)
          : ((t = e.value) instanceof s
              ? t
              : new s(function (e) {
                  e(t);
                })
            ).then(r, i);
      }
      o((l = l.apply(e, a || [])).next());
    });
  }
  function i(n, r) {
    var i,
      o,
      a,
      s = {
        label: 0,
        sent: function () {
          if (1 & a[0]) throw a[1];
          return a[1];
        },
        trys: [],
        ops: [],
      },
      e = { next: t(0), throw: t(1), return: t(2) };
    return (
      "function" == typeof Symbol &&
        (e[Symbol.iterator] = function () {
          return this;
        }),
      e
    );
    function t(t) {
      return function (e) {
        return (function (t) {
          if (i) throw new TypeError("Generator is already executing.");
          for (; s; )
            try {
              if (
                ((i = 1),
                o &&
                  (a =
                    2 & t[0]
                      ? o.return
                      : t[0]
                      ? o.throw || ((a = o.return) && a.call(o), 0)
                      : o.next) &&
                  !(a = a.call(o, t[1])).done)
              )
                return a;
              switch (((o = 0), (t = a ? [2 & t[0], a.value] : t)[0])) {
                case 0:
                case 1:
                  a = t;
                  break;
                case 4:
                  return s.label++, { value: t[1], done: !1 };
                case 5:
                  s.label++, (o = t[1]), (t = [0]);
                  continue;
                case 7:
                  (t = s.ops.pop()), s.trys.pop();
                  continue;
                default:
                  if (
                    !(a = 0 < (a = s.trys).length && a[a.length - 1]) &&
                    (6 === t[0] || 2 === t[0])
                  ) {
                    s = 0;
                    continue;
                  }
                  if (3 === t[0] && (!a || (t[1] > a[0] && t[1] < a[3]))) {
                    s.label = t[1];
                    break;
                  }
                  if (6 === t[0] && s.label < a[1]) {
                    (s.label = a[1]), (a = t);
                    break;
                  }
                  if (a && s.label < a[2]) {
                    (s.label = a[2]), s.ops.push(t);
                    break;
                  }
                  a[2] && s.ops.pop(), s.trys.pop();
                  continue;
              }
              t = r.call(n, s);
            } catch (e) {
              (t = [6, e]), (o = 0);
            } finally {
              i = a = 0;
            }
          if (5 & t[0]) throw t[1];
          return { value: t[0] ? t[1] : void 0, done: !0 };
        })([t, e]);
      };
    }
  }
  function p(e) {
    var t = "function" == typeof Symbol && Symbol.iterator,
      n = t && e[t],
      r = 0;
    if (n) return n.call(e);
    if (e && "number" == typeof e.length)
      return {
        next: function () {
          return {
            value: (e = e && r >= e.length ? void 0 : e) && e[r++],
            done: !e,
          };
        },
      };
    throw new TypeError(
      t ? "Object is not iterable." : "Symbol.iterator is not defined."
    );
  }
  function f(e, t) {
    var n = "function" == typeof Symbol && e[Symbol.iterator];
    if (!n) return e;
    var r,
      i,
      o = n.call(e),
      a = [];
    try {
      for (; (void 0 === t || 0 < t--) && !(r = o.next()).done; )
        a.push(r.value);
    } catch (e) {
      i = { error: e };
    } finally {
      try {
        r && !r.done && (n = o.return) && n.call(o);
      } finally {
        if (i) throw i.error;
      }
    }
    return a;
  }
  function a(e, t) {
    for (var n = 0, r = t.length, i = e.length; n < r; n++, i++) e[i] = t[n];
    return e;
  }
  function h(e, t) {
    if (!(t instanceof Object)) return t;
    switch (t.constructor) {
      case Date:
        return new Date(t.getTime());
      case Object:
        void 0 === e && (e = {});
        break;
      case Array:
        e = [];
        break;
      default:
        return t;
    }
    for (var n in t)
      t.hasOwnProperty(n) && "__proto__" !== n && (e[n] = h(e[n], t[n]));
    return e;
  }
  var o =
    ((t.prototype.wrapCallback = function (n) {
      var r = this;
      return function (e, t) {
        e ? r.reject(e) : r.resolve(t),
          "function" == typeof n &&
            (r.promise.catch(function () {}), 1 === n.length ? n(e) : n(e, t));
      };
    }),
    t);
  function t() {
    var n = this;
    (this.reject = function () {}),
      (this.resolve = function () {}),
      (this.promise = new Promise(function (e, t) {
        (n.resolve = e), (n.reject = t);
      }));
  }
  var s,
    l = "FirebaseError",
    c =
      ((function (e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Class extends value " + String(t) + " is not a constructor or null"
          );
        function n() {
          this.constructor = e;
        }
        r(e, t),
          (e.prototype =
            null === t
              ? Object.create(t)
              : ((n.prototype = t.prototype), new n()));
      })(u, (s = Error)),
      u);
  function u(e, t, n) {
    t = s.call(this, t) || this;
    return (
      (t.code = e),
      (t.customData = n),
      (t.name = l),
      Object.setPrototypeOf(t, u.prototype),
      Error.captureStackTrace && Error.captureStackTrace(t, d.prototype.create),
      t
    );
  }
  var d =
    ((v.prototype.create = function (e) {
      for (var t = [], n = 1; n < arguments.length; n++)
        t[n - 1] = arguments[n];
      var r,
        i = t[0] || {},
        o = this.service + "/" + e,
        e = this.errors[e],
        e = e
          ? ((r = i),
            e.replace(m, function (e, t) {
              var n = r[t];
              return null != n ? String(n) : "<" + t + "?>";
            }))
          : "Error",
        e = this.serviceName + ": " + e + " (" + o + ").";
      return new c(o, e, i);
    }),
    v);
  function v(e, t, n) {
    (this.service = e), (this.serviceName = t), (this.errors = n);
  }
  var m = /\{\$([^}]+)}/g;
  function y(e, t) {
    return Object.prototype.hasOwnProperty.call(e, t);
  }
  function b(e, t) {
    t = new g(e, t);
    return t.subscribe.bind(t);
  }
  var g =
    ((I.prototype.next = function (t) {
      this.forEachObserver(function (e) {
        e.next(t);
      });
    }),
    (I.prototype.error = function (t) {
      this.forEachObserver(function (e) {
        e.error(t);
      }),
        this.close(t);
    }),
    (I.prototype.complete = function () {
      this.forEachObserver(function (e) {
        e.complete();
      }),
        this.close();
    }),
    (I.prototype.subscribe = function (e, t, n) {
      var r,
        i = this;
      if (void 0 === e && void 0 === t && void 0 === n)
        throw new Error("Missing Observer.");
      void 0 ===
        (r = (function (e, t) {
          if ("object" != typeof e || null === e) return !1;
          for (var n = 0, r = t; n < r.length; n++) {
            var i = r[n];
            if (i in e && "function" == typeof e[i]) return !0;
          }
          return !1;
        })(e, ["next", "error", "complete"])
          ? e
          : { next: e, error: t, complete: n }).next && (r.next = w),
        void 0 === r.error && (r.error = w),
        void 0 === r.complete && (r.complete = w);
      n = this.unsubscribeOne.bind(this, this.observers.length);
      return (
        this.finalized &&
          this.task.then(function () {
            try {
              i.finalError ? r.error(i.finalError) : r.complete();
            } catch (e) {}
          }),
        this.observers.push(r),
        n
      );
    }),
    (I.prototype.unsubscribeOne = function (e) {
      void 0 !== this.observers &&
        void 0 !== this.observers[e] &&
        (delete this.observers[e],
        --this.observerCount,
        0 === this.observerCount &&
          void 0 !== this.onNoObservers &&
          this.onNoObservers(this));
    }),
    (I.prototype.forEachObserver = function (e) {
      if (!this.finalized)
        for (var t = 0; t < this.observers.length; t++) this.sendOne(t, e);
    }),
    (I.prototype.sendOne = function (e, t) {
      var n = this;
      this.task.then(function () {
        if (void 0 !== n.observers && void 0 !== n.observers[e])
          try {
            t(n.observers[e]);
          } catch (e) {
            "undefined" != typeof console && console.error && console.error(e);
          }
      });
    }),
    (I.prototype.close = function (e) {
      var t = this;
      this.finalized ||
        ((this.finalized = !0),
        void 0 !== e && (this.finalError = e),
        this.task.then(function () {
          (t.observers = void 0), (t.onNoObservers = void 0);
        }));
    }),
    I);
  function I(e, t) {
    var n = this;
    (this.observers = []),
      (this.unsubscribes = []),
      (this.observerCount = 0),
      (this.task = Promise.resolve()),
      (this.finalized = !1),
      (this.onNoObservers = t),
      this.task
        .then(function () {
          e(n);
        })
        .catch(function (e) {
          n.error(e);
        });
  }
  function w() {}
  var E =
    ((O.prototype.setInstantiationMode = function (e) {
      return (this.instantiationMode = e), this;
    }),
    (O.prototype.setMultipleInstances = function (e) {
      return (this.multipleInstances = e), this;
    }),
    (O.prototype.setServiceProps = function (e) {
      return (this.serviceProps = e), this;
    }),
    (O.prototype.setInstanceCreatedCallback = function (e) {
      return (this.onInstanceCreated = e), this;
    }),
    O);
  function O(e, t, n) {
    (this.name = e),
      (this.instanceFactory = t),
      (this.type = n),
      (this.multipleInstances = !1),
      (this.serviceProps = {}),
      (this.instantiationMode = "LAZY"),
      (this.onInstanceCreated = null);
  }
  var _ = "[DEFAULT]",
    N =
      ((C.prototype.get = function (e) {
        var t = this.normalizeInstanceIdentifier(e);
        if (!this.instancesDeferred.has(t)) {
          e = new o();
          if (
            (this.instancesDeferred.set(t, e),
            this.isInitialized(t) || this.shouldAutoInitialize())
          )
            try {
              var n = this.getOrInitializeService({ instanceIdentifier: t });
              n && e.resolve(n);
            } catch (e) {}
        }
        return this.instancesDeferred.get(t).promise;
      }),
      (C.prototype.getImmediate = function (t) {
        var e = this.normalizeInstanceIdentifier(
            null == t ? void 0 : t.identifier
          ),
          t =
            null !== (t = null == t ? void 0 : t.optional) && void 0 !== t && t;
        if (!this.isInitialized(e) && !this.shouldAutoInitialize()) {
          if (t) return null;
          throw Error("Service " + this.name + " is not available");
        }
        try {
          return this.getOrInitializeService({ instanceIdentifier: e });
        } catch (e) {
          if (t) return null;
          throw e;
        }
      }),
      (C.prototype.getComponent = function () {
        return this.component;
      }),
      (C.prototype.setComponent = function (e) {
        var t, n;
        if (e.name !== this.name)
          throw Error(
            "Mismatching Component " +
              e.name +
              " for Provider " +
              this.name +
              "."
          );
        if (this.component)
          throw Error(
            "Component for " + this.name + " has already been provided"
          );
        if (((this.component = e), this.shouldAutoInitialize())) {
          if ("EAGER" === e.instantiationMode)
            try {
              this.getOrInitializeService({ instanceIdentifier: _ });
            } catch (e) {}
          try {
            for (
              var r = p(this.instancesDeferred.entries()), i = r.next();
              !i.done;
              i = r.next()
            ) {
              var o = f(i.value, 2),
                a = o[0],
                s = o[1],
                l = this.normalizeInstanceIdentifier(a);
              try {
                var c = this.getOrInitializeService({ instanceIdentifier: l });
                s.resolve(c);
              } catch (e) {}
            }
          } catch (e) {
            t = { error: e };
          } finally {
            try {
              i && !i.done && (n = r.return) && n.call(r);
            } finally {
              if (t) throw t.error;
            }
          }
        }
      }),
      (C.prototype.clearInstance = function (e) {
        this.instancesDeferred.delete((e = void 0 === e ? _ : e)),
          this.instances.delete(e);
      }),
      (C.prototype.delete = function () {
        return e(this, void 0, void 0, function () {
          var t;
          return i(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  (t = Array.from(this.instances.values())),
                  [
                    4,
                    Promise.all(
                      a(
                        a(
                          [],
                          f(
                            t
                              .filter(function (e) {
                                return "INTERNAL" in e;
                              })
                              .map(function (e) {
                                return e.INTERNAL.delete();
                              })
                          )
                        ),
                        f(
                          t
                            .filter(function (e) {
                              return "_delete" in e;
                            })
                            .map(function (e) {
                              return e._delete();
                            })
                        )
                      )
                    ),
                  ]
                );
              case 1:
                return e.sent(), [2];
            }
          });
        });
      }),
      (C.prototype.isComponentSet = function () {
        return null != this.component;
      }),
      (C.prototype.isInitialized = function (e) {
        return this.instances.has((e = void 0 === e ? _ : e));
      }),
      (C.prototype.initialize = function (e) {
        var t,
          n,
          r = (e = void 0 === e ? {} : e).options,
          r = void 0 === r ? {} : r,
          i = this.normalizeInstanceIdentifier(e.instanceIdentifier);
        if (this.isInitialized(i))
          throw Error(this.name + "(" + i + ") has already been initialized");
        if (!this.isComponentSet())
          throw Error(
            "Component " + this.name + " has not been registered yet"
          );
        var o = this.getOrInitializeService({
          instanceIdentifier: i,
          options: r,
        });
        try {
          for (
            var a = p(this.instancesDeferred.entries()), s = a.next();
            !s.done;
            s = a.next()
          ) {
            var l = f(s.value, 2),
              c = l[0],
              u = l[1];
            i === this.normalizeInstanceIdentifier(c) && u.resolve(o);
          }
        } catch (e) {
          t = { error: e };
        } finally {
          try {
            s && !s.done && (n = a.return) && n.call(a);
          } finally {
            if (t) throw t.error;
          }
        }
        return o;
      }),
      (C.prototype.onInit = function (e, t) {
        var n = this.normalizeInstanceIdentifier(t),
          r =
            null !== (t = this.onInitCallbacks.get(n)) && void 0 !== t
              ? t
              : new Set();
        r.add(e), this.onInitCallbacks.set(n, r);
        t = this.instances.get(n);
        return (
          t && e(t, n),
          function () {
            r.delete(e);
          }
        );
      }),
      (C.prototype.invokeOnInitCallbacks = function (e, t) {
        var n,
          r,
          i = this.onInitCallbacks.get(t);
        if (i)
          try {
            for (var o = p(i), a = o.next(); !a.done; a = o.next()) {
              var s = a.value;
              try {
                s(e, t);
              } catch (e) {}
            }
          } catch (e) {
            n = { error: e };
          } finally {
            try {
              a && !a.done && (r = o.return) && r.call(o);
            } finally {
              if (n) throw n.error;
            }
          }
      }),
      (C.prototype.getOrInitializeService = function (e) {
        var t = e.instanceIdentifier,
          n = e.options,
          r = void 0 === n ? {} : n,
          e = this.instances.get(t);
        if (
          !e &&
          this.component &&
          ((e = this.component.instanceFactory(this.container, {
            instanceIdentifier: (n = t) === _ ? void 0 : n,
            options: r,
          })),
          this.instances.set(t, e),
          this.invokeOnInitCallbacks(e, t),
          this.component.onInstanceCreated)
        )
          try {
            this.component.onInstanceCreated(this.container, t, e);
          } catch (e) {}
        return e || null;
      }),
      (C.prototype.normalizeInstanceIdentifier = function (e) {
        return (
          void 0 === e && (e = _),
          !this.component || this.component.multipleInstances ? e : _
        );
      }),
      (C.prototype.shouldAutoInitialize = function () {
        return (
          !!this.component && "EXPLICIT" !== this.component.instantiationMode
        );
      }),
      C);
  function C(e, t) {
    (this.name = e),
      (this.container = t),
      (this.component = null),
      (this.instances = new Map()),
      (this.instancesDeferred = new Map()),
      (this.onInitCallbacks = new Map());
  }
  var S =
    ((L.prototype.addComponent = function (e) {
      var t = this.getProvider(e.name);
      if (t.isComponentSet())
        throw new Error(
          "Component " +
            e.name +
            " has already been registered with " +
            this.name
        );
      t.setComponent(e);
    }),
    (L.prototype.addOrOverwriteComponent = function (e) {
      this.getProvider(e.name).isComponentSet() &&
        this.providers.delete(e.name),
        this.addComponent(e);
    }),
    (L.prototype.getProvider = function (e) {
      if (this.providers.has(e)) return this.providers.get(e);
      var t = new N(e, this);
      return this.providers.set(e, t), t;
    }),
    (L.prototype.getProviders = function () {
      return Array.from(this.providers.values());
    }),
    L);
  function L(e) {
    (this.name = e), (this.providers = new Map());
  }
  var R,
    A = [];
  ((z = R = R || {})[(z.DEBUG = 0)] = "DEBUG"),
    (z[(z.VERBOSE = 1)] = "VERBOSE"),
    (z[(z.INFO = 2)] = "INFO"),
    (z[(z.WARN = 3)] = "WARN"),
    (z[(z.ERROR = 4)] = "ERROR"),
    (z[(z.SILENT = 5)] = "SILENT");
  function P(e, t) {
    for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];
    if (!(t < e.logLevel)) {
      var i = new Date().toISOString(),
        o = j[t];
      if (!o)
        throw new Error(
          "Attempted to log a message with an invalid logType (value: " +
            t +
            ")"
        );
      console[o].apply(console, a(["[" + i + "]  " + e.name + ":"], n));
    }
  }
  var k = {
      debug: R.DEBUG,
      verbose: R.VERBOSE,
      info: R.INFO,
      warn: R.WARN,
      error: R.ERROR,
      silent: R.SILENT,
    },
    D = R.INFO,
    j =
      (((H = {})[R.DEBUG] = "log"),
      (H[R.VERBOSE] = "log"),
      (H[R.INFO] = "info"),
      (H[R.WARN] = "warn"),
      (H[R.ERROR] = "error"),
      H),
    z =
      (Object.defineProperty(F.prototype, "logLevel", {
        get: function () {
          return this._logLevel;
        },
        set: function (e) {
          if (!(e in R))
            throw new TypeError(
              'Invalid value "' + e + '" assigned to `logLevel`'
            );
          this._logLevel = e;
        },
        enumerable: !1,
        configurable: !0,
      }),
      (F.prototype.setLogLevel = function (e) {
        this._logLevel = "string" == typeof e ? k[e] : e;
      }),
      Object.defineProperty(F.prototype, "logHandler", {
        get: function () {
          return this._logHandler;
        },
        set: function (e) {
          if ("function" != typeof e)
            throw new TypeError(
              "Value assigned to `logHandler` must be a function"
            );
          this._logHandler = e;
        },
        enumerable: !1,
        configurable: !0,
      }),
      Object.defineProperty(F.prototype, "userLogHandler", {
        get: function () {
          return this._userLogHandler;
        },
        set: function (e) {
          this._userLogHandler = e;
        },
        enumerable: !1,
        configurable: !0,
      }),
      (F.prototype.debug = function () {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._userLogHandler &&
          this._userLogHandler.apply(this, a([this, R.DEBUG], e)),
          this._logHandler.apply(this, a([this, R.DEBUG], e));
      }),
      (F.prototype.log = function () {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._userLogHandler &&
          this._userLogHandler.apply(this, a([this, R.VERBOSE], e)),
          this._logHandler.apply(this, a([this, R.VERBOSE], e));
      }),
      (F.prototype.info = function () {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._userLogHandler &&
          this._userLogHandler.apply(this, a([this, R.INFO], e)),
          this._logHandler.apply(this, a([this, R.INFO], e));
      }),
      (F.prototype.warn = function () {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._userLogHandler &&
          this._userLogHandler.apply(this, a([this, R.WARN], e)),
          this._logHandler.apply(this, a([this, R.WARN], e));
      }),
      (F.prototype.error = function () {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._userLogHandler &&
          this._userLogHandler.apply(this, a([this, R.ERROR], e)),
          this._logHandler.apply(this, a([this, R.ERROR], e));
      }),
      F);
  function F(e) {
    (this.name = e),
      (this._logLevel = D),
      (this._logHandler = P),
      (this._userLogHandler = null),
      A.push(this);
  }
  function T(t) {
    A.forEach(function (e) {
      e.setLogLevel(t);
    });
  }
  function x(a, t) {
    for (var e = 0, n = A; e < n.length; e++)
      !(function (e) {
        var o = null;
        t && t.level && (o = k[t.level]),
          (e.userLogHandler =
            null === a
              ? null
              : function (e, t) {
                  for (var n = [], r = 2; r < arguments.length; r++)
                    n[r - 2] = arguments[r];
                  var i = n
                    .map(function (e) {
                      if (null == e) return null;
                      if ("string" == typeof e) return e;
                      if ("number" == typeof e || "boolean" == typeof e)
                        return e.toString();
                      if (e instanceof Error) return e.message;
                      try {
                        return JSON.stringify(e);
                      } catch (e) {
                        return null;
                      }
                    })
                    .filter(function (e) {
                      return e;
                    })
                    .join(" ");
                  t >= (null != o ? o : e.logLevel) &&
                    a({
                      level: R[t].toLowerCase(),
                      message: i,
                      args: n,
                      type: e.name,
                    });
                });
      })(n[e]);
  }
  var H =
      (((H = {})["no-app"] =
        "No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),
      (H["bad-app-name"] = "Illegal App name: '{$appName}"),
      (H["duplicate-app"] = "Firebase App named '{$appName}' already exists"),
      (H["app-deleted"] = "Firebase App named '{$appName}' already deleted"),
      (H["invalid-app-argument"] =
        "firebase.{$appName}() takes either no argument or a Firebase App instance."),
      (H["invalid-log-argument"] =
        "First argument to `onLog` must be null or a function."),
      H),
    V = new d("app", "Firebase", H),
    B = "@firebase/app",
    M = "[DEFAULT]",
    U =
      (((H = {})[B] = "fire-core"),
      (H["@firebase/analytics"] = "fire-analytics"),
      (H["@firebase/app-check"] = "fire-app-check"),
      (H["@firebase/auth"] = "fire-auth"),
      (H["@firebase/database"] = "fire-rtdb"),
      (H["@firebase/functions"] = "fire-fn"),
      (H["@firebase/installations"] = "fire-iid"),
      (H["@firebase/messaging"] = "fire-fcm"),
      (H["@firebase/performance"] = "fire-perf"),
      (H["@firebase/remote-config"] = "fire-rc"),
      (H["@firebase/storage"] = "fire-gcs"),
      (H["@firebase/firestore"] = "fire-fst"),
      (H["fire-js"] = "fire-js"),
      (H["firebase-wrapper"] = "fire-js-all"),
      H),
    W = new z("@firebase/app"),
    G =
      (Object.defineProperty($.prototype, "automaticDataCollectionEnabled", {
        get: function () {
          return this.checkDestroyed_(), this.automaticDataCollectionEnabled_;
        },
        set: function (e) {
          this.checkDestroyed_(), (this.automaticDataCollectionEnabled_ = e);
        },
        enumerable: !1,
        configurable: !0,
      }),
      Object.defineProperty($.prototype, "name", {
        get: function () {
          return this.checkDestroyed_(), this.name_;
        },
        enumerable: !1,
        configurable: !0,
      }),
      Object.defineProperty($.prototype, "options", {
        get: function () {
          return this.checkDestroyed_(), this.options_;
        },
        enumerable: !1,
        configurable: !0,
      }),
      ($.prototype.delete = function () {
        var t = this;
        return new Promise(function (e) {
          t.checkDestroyed_(), e();
        })
          .then(function () {
            return (
              t.firebase_.INTERNAL.removeApp(t.name_),
              Promise.all(
                t.container.getProviders().map(function (e) {
                  return e.delete();
                })
              )
            );
          })
          .then(function () {
            t.isDeleted_ = !0;
          });
      }),
      ($.prototype._getService = function (e, t) {
        void 0 === t && (t = M), this.checkDestroyed_();
        var n = this.container.getProvider(e);
        return (
          n.isInitialized() ||
            "EXPLICIT" !==
              (null === (e = n.getComponent()) || void 0 === e
                ? void 0
                : e.instantiationMode) ||
            n.initialize(),
          n.getImmediate({ identifier: t })
        );
      }),
      ($.prototype._removeServiceInstance = function (e, t) {
        void 0 === t && (t = M), this.container.getProvider(e).clearInstance(t);
      }),
      ($.prototype._addComponent = function (t) {
        try {
          this.container.addComponent(t);
        } catch (e) {
          W.debug(
            "Component " +
              t.name +
              " failed to register with FirebaseApp " +
              this.name,
            e
          );
        }
      }),
      ($.prototype._addOrOverwriteComponent = function (e) {
        this.container.addOrOverwriteComponent(e);
      }),
      ($.prototype.toJSON = function () {
        return {
          name: this.name,
          automaticDataCollectionEnabled: this.automaticDataCollectionEnabled,
          options: this.options,
        };
      }),
      ($.prototype.checkDestroyed_ = function () {
        if (this.isDeleted_)
          throw V.create("app-deleted", { appName: this.name_ });
      }),
      $);
  function $(e, t, n) {
    var r = this;
    (this.firebase_ = n),
      (this.isDeleted_ = !1),
      (this.name_ = t.name),
      (this.automaticDataCollectionEnabled_ =
        t.automaticDataCollectionEnabled || !1),
      (this.options_ = h(void 0, e)),
      (this.container = new S(t.name)),
      this._addComponent(
        new E(
          "app",
          function () {
            return r;
          },
          "PUBLIC"
        )
      ),
      this.firebase_.INTERNAL.components.forEach(function (e) {
        return r._addComponent(e);
      });
  }
  (G.prototype.name && G.prototype.options) ||
    G.prototype.delete ||
    console.log("dc");
  var K = "8.9.0";
  function Y(a) {
    var s = {},
      l = new Map(),
      c = {
        __esModule: !0,
        initializeApp: function (e, t) {
          void 0 === t && (t = {});
          ("object" == typeof t && null !== t) || (t = { name: t });
          var n = t;
          void 0 === n.name && (n.name = M);
          t = n.name;
          if ("string" != typeof t || !t)
            throw V.create("bad-app-name", { appName: String(t) });
          if (y(s, t)) throw V.create("duplicate-app", { appName: t });
          n = new a(e, n, c);
          return (s[t] = n);
        },
        app: u,
        registerVersion: function (e, t, n) {
          var r = null !== (i = U[e]) && void 0 !== i ? i : e;
          n && (r += "-" + n);
          var i = r.match(/\s|\//),
            e = t.match(/\s|\//);
          i || e
            ? ((n = [
                'Unable to register library "' +
                  r +
                  '" with version "' +
                  t +
                  '":',
              ]),
              i &&
                n.push(
                  'library name "' +
                    r +
                    '" contains illegal characters (whitespace or "/")'
                ),
              i && e && n.push("and"),
              e &&
                n.push(
                  'version name "' +
                    t +
                    '" contains illegal characters (whitespace or "/")'
                ),
              W.warn(n.join(" ")))
            : o(
                new E(
                  r + "-version",
                  function () {
                    return { library: r, version: t };
                  },
                  "VERSION"
                )
              );
        },
        setLogLevel: T,
        onLog: function (e, t) {
          if (null !== e && "function" != typeof e)
            throw V.create("invalid-log-argument");
          x(e, t);
        },
        apps: null,
        SDK_VERSION: K,
        INTERNAL: {
          registerComponent: o,
          removeApp: function (e) {
            delete s[e];
          },
          components: l,
          useAsService: function (e, t) {
            return "serverAuth" !== t ? t : null;
          },
        },
      };
    function u(e) {
      if (!y(s, (e = e || M))) throw V.create("no-app", { appName: e });
      return s[e];
    }
    function o(n) {
      var e,
        r = n.name;
      if (l.has(r))
        return (
          W.debug(
            "There were multiple attempts to register component " + r + "."
          ),
          "PUBLIC" === n.type ? c[r] : null
        );
      l.set(r, n),
        "PUBLIC" === n.type &&
          ((e = function (e) {
            if ("function" != typeof (e = void 0 === e ? u() : e)[r])
              throw V.create("invalid-app-argument", { appName: r });
            return e[r]();
          }),
          void 0 !== n.serviceProps && h(e, n.serviceProps),
          (c[r] = e),
          (a.prototype[r] = function () {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            return this._getService
              .bind(this, r)
              .apply(this, n.multipleInstances ? e : []);
          }));
      for (var t = 0, i = Object.keys(s); t < i.length; t++) {
        var o = i[t];
        s[o]._addComponent(n);
      }
      return "PUBLIC" === n.type ? c[r] : null;
    }
    return (
      (c.default = c),
      Object.defineProperty(c, "apps", {
        get: function () {
          return Object.keys(s).map(function (e) {
            return s[e];
          });
        },
      }),
      (u.App = a),
      c
    );
  }
  var H = (function e() {
      var t = Y(G);
      return (
        (t.INTERNAL = n(n({}, t.INTERNAL), {
          createFirebaseNamespace: e,
          extendNamespace: function (e) {
            h(t, e);
          },
          createSubscribe: b,
          ErrorFactory: d,
          deepExtend: h,
        })),
        t
      );
    })(),
    J =
      ((X.prototype.getPlatformInfoString = function () {
        return this.container
          .getProviders()
          .map(function (e) {
            if (
              (function (e) {
                e = e.getComponent();
                return "VERSION" === (null == e ? void 0 : e.type);
              })(e)
            ) {
              e = e.getImmediate();
              return e.library + "/" + e.version;
            }
            return null;
          })
          .filter(function (e) {
            return e;
          })
          .join(" ");
      }),
      X);
  function X(e) {
    this.container = e;
  }
  "object" == typeof self &&
    self.self === self &&
    void 0 !== self.firebase &&
    (W.warn(
      "\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "
    ),
    (z = self.firebase.SDK_VERSION) &&
      0 <= z.indexOf("LITE") &&
      W.warn(
        "\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "
      ));
  var Z = H.initializeApp;
  H.initializeApp = function () {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
    return (
      (function () {
        try {
          return (
            "[object process]" ===
            Object.prototype.toString.call(global.process)
          );
        } catch (e) {
          return;
        }
      })() &&
        W.warn(
          '\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '
        ),
      Z.apply(void 0, e)
    );
  };
  var q,
    Q,
    ee = H;
  (q = ee).INTERNAL.registerComponent(
    new E(
      "platform-logger",
      function (e) {
        return new J(e);
      },
      "PRIVATE"
    )
  ),
    q.registerVersion(B, "0.6.29", Q),
    q.registerVersion("fire-js", "");
  return (
    ee.registerVersion("firebase", "8.9.0", "app"),
    (ee.SDK_VERSION = "8.9.0"),
    ee
  );
});
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? t(require("@firebase/app"))
    : "function" == typeof define && define.amd
    ? define(["@firebase/app"], t)
    : t(
        (e = "undefined" != typeof globalThis ? globalThis : e || self).firebase
      );
})(this, function (mt) {
  "use strict";
  try {
    !function () {
      function e(e) {
        return e && "object" == typeof e && "default" in e ? e : { default: e };
      }
      var t = e(mt),
        r = function (e, t) {
          return (r =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (e, t) {
                e.__proto__ = t;
              }) ||
            function (e, t) {
              for (var n in t)
                Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
            })(e, t);
        };
      var s = function () {
        return (s =
          Object.assign ||
          function (e) {
            for (var t, n = 1, r = arguments.length; n < r; n++)
              for (var i in (t = arguments[n]))
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
            return e;
          }).apply(this, arguments);
      };
      function p(e, a, s, u) {
        return new (s = s || Promise)(function (n, t) {
          function r(e) {
            try {
              o(u.next(e));
            } catch (e) {
              t(e);
            }
          }
          function i(e) {
            try {
              o(u.throw(e));
            } catch (e) {
              t(e);
            }
          }
          function o(e) {
            var t;
            e.done
              ? n(e.value)
              : ((t = e.value) instanceof s
                  ? t
                  : new s(function (e) {
                      e(t);
                    })
                ).then(r, i);
          }
          o((u = u.apply(e, a || [])).next());
        });
      }
      function h(n, r) {
        var i,
          o,
          a,
          s = {
            label: 0,
            sent: function () {
              if (1 & a[0]) throw a[1];
              return a[1];
            },
            trys: [],
            ops: [],
          },
          e = { next: t(0), throw: t(1), return: t(2) };
        return (
          "function" == typeof Symbol &&
            (e[Symbol.iterator] = function () {
              return this;
            }),
          e
        );
        function t(t) {
          return function (e) {
            return (function (t) {
              if (i) throw new TypeError("Generator is already executing.");
              for (; s; )
                try {
                  if (
                    ((i = 1),
                    o &&
                      (a =
                        2 & t[0]
                          ? o.return
                          : t[0]
                          ? o.throw || ((a = o.return) && a.call(o), 0)
                          : o.next) &&
                      !(a = a.call(o, t[1])).done)
                  )
                    return a;
                  switch (((o = 0), (t = a ? [2 & t[0], a.value] : t)[0])) {
                    case 0:
                    case 1:
                      a = t;
                      break;
                    case 4:
                      return s.label++, { value: t[1], done: !1 };
                    case 5:
                      s.label++, (o = t[1]), (t = [0]);
                      continue;
                    case 7:
                      (t = s.ops.pop()), s.trys.pop();
                      continue;
                    default:
                      if (
                        !(a = 0 < (a = s.trys).length && a[a.length - 1]) &&
                        (6 === t[0] || 2 === t[0])
                      ) {
                        s = 0;
                        continue;
                      }
                      if (3 === t[0] && (!a || (t[1] > a[0] && t[1] < a[3]))) {
                        s.label = t[1];
                        break;
                      }
                      if (6 === t[0] && s.label < a[1]) {
                        (s.label = a[1]), (a = t);
                        break;
                      }
                      if (a && s.label < a[2]) {
                        (s.label = a[2]), s.ops.push(t);
                        break;
                      }
                      a[2] && s.ops.pop(), s.trys.pop();
                      continue;
                  }
                  t = r.call(n, s);
                } catch (e) {
                  (t = [6, e]), (o = 0);
                } finally {
                  i = a = 0;
                }
              if (5 & t[0]) throw t[1];
              return { value: t[0] ? t[1] : void 0, done: !0 };
            })([t, e]);
          };
        }
      }
      function a(e) {
        var t = "function" == typeof Symbol && Symbol.iterator,
          n = t && e[t],
          r = 0;
        if (n) return n.call(e);
        if (e && "number" == typeof e.length)
          return {
            next: function () {
              return {
                value: (e = e && r >= e.length ? void 0 : e) && e[r++],
                done: !e,
              };
            },
          };
        throw new TypeError(
          t ? "Object is not iterable." : "Symbol.iterator is not defined."
        );
      }
      function u(e, t) {
        for (var n = 0, r = t.length, i = e.length; n < r; n++, i++)
          e[i] = t[n];
        return e;
      }
      function c() {
        var e =
          "object" == typeof chrome
            ? chrome.runtime
            : "object" == typeof browser
            ? browser.runtime
            : void 0;
        return "object" == typeof e && void 0 !== e.id;
      }
      function v() {
        return "indexedDB" in self && null != indexedDB;
      }
      function g() {
        return new Promise(function (e, t) {
          try {
            var n = !0,
              r = "validate-browser-context-for-indexeddb-analytics-module",
              i = self.indexedDB.open(r);
            (i.onsuccess = function () {
              i.result.close(), n || self.indexedDB.deleteDatabase(r), e(!0);
            }),
              (i.onupgradeneeded = function () {
                n = !1;
              }),
              (i.onerror = function () {
                var e;
                t(
                  (null === (e = i.error) || void 0 === e
                    ? void 0
                    : e.message) || ""
                );
              });
          } catch (e) {
            t(e);
          }
        });
      }
      function l() {
        return !(!navigator || !navigator.cookieEnabled);
      }
      var i,
        o = "FirebaseError",
        f =
          ((function (e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Class extends value " +
                  String(t) +
                  " is not a constructor or null"
              );
            function n() {
              this.constructor = e;
            }
            r(e, t),
              (e.prototype =
                null === t
                  ? Object.create(t)
                  : ((n.prototype = t.prototype), new n()));
          })(d, (i = Error)),
          d);
      function d(e, t, n) {
        t = i.call(this, t) || this;
        return (
          (t.code = e),
          (t.customData = n),
          (t.name = o),
          Object.setPrototypeOf(t, d.prototype),
          Error.captureStackTrace &&
            Error.captureStackTrace(t, m.prototype.create),
          t
        );
      }
      var m =
        ((n.prototype.create = function (e) {
          for (var t = [], n = 1; n < arguments.length; n++)
            t[n - 1] = arguments[n];
          var r,
            i = t[0] || {},
            o = this.service + "/" + e,
            e = this.errors[e],
            e = e
              ? ((r = i),
                e.replace(y, function (e, t) {
                  var n = r[t];
                  return null != n ? String(n) : "<" + t + "?>";
                }))
              : "Error",
            e = this.serviceName + ": " + e + " (" + o + ").";
          return new f(o, e, i);
        }),
        n);
      function n(e, t, n) {
        (this.service = e), (this.serviceName = t), (this.errors = n);
      }
      var y = /\{\$([^}]+)}/g,
        b = 1e3,
        w = 2,
        I = 144e5,
        _ = 0.5;
      function E(e, t, n) {
        void 0 === n && (n = w);
        (n = (t = void 0 === t ? b : t) * Math.pow(n, e)),
          (e = Math.round(_ * n * (Math.random() - 0.5) * 2));
        return Math.min(I, n + e);
      }
      var T =
        ((S.prototype.setInstantiationMode = function (e) {
          return (this.instantiationMode = e), this;
        }),
        (S.prototype.setMultipleInstances = function (e) {
          return (this.multipleInstances = e), this;
        }),
        (S.prototype.setServiceProps = function (e) {
          return (this.serviceProps = e), this;
        }),
        (S.prototype.setInstanceCreatedCallback = function (e) {
          return (this.onInstanceCreated = e), this;
        }),
        S);
      function S(e, t, n) {
        (this.name = e),
          (this.instanceFactory = t),
          (this.type = n),
          (this.multipleInstances = !1),
          (this.serviceProps = {}),
          (this.instantiationMode = "LAZY"),
          (this.onInstanceCreated = null);
      }
      function C(n) {
        return new Promise(function (e, t) {
          (n.onsuccess = function () {
            e(n.result);
          }),
            (n.onerror = function () {
              t(n.error);
            });
        });
      }
      function O(n, r, i) {
        var o,
          e = new Promise(function (e, t) {
            C((o = n[r].apply(n, i))).then(e, t);
          });
        return (e.request = o), e;
      }
      function N(e, n, t) {
        t.forEach(function (t) {
          Object.defineProperty(e.prototype, t, {
            get: function () {
              return this[n][t];
            },
            set: function (e) {
              this[n][t] = e;
            },
          });
        });
      }
      function D(t, n, r, e) {
        e.forEach(function (e) {
          e in r.prototype &&
            (t.prototype[e] = function () {
              return O(this[n], e, arguments);
            });
        });
      }
      function P(t, n, r, e) {
        e.forEach(function (e) {
          e in r.prototype &&
            (t.prototype[e] = function () {
              return this[n][e].apply(this[n], arguments);
            });
        });
      }
      function A(e, r, t, n) {
        n.forEach(function (n) {
          n in t.prototype &&
            (e.prototype[n] = function () {
              return (
                (e = this[r]),
                (t = O(e, n, arguments)).then(function (e) {
                  if (e) return new k(e, t.request);
                })
              );
              var e, t;
            });
        });
      }
      function x(e) {
        this._index = e;
      }
      function k(e, t) {
        (this._cursor = e), (this._request = t);
      }
      function j(e) {
        this._store = e;
      }
      function L(n) {
        (this._tx = n),
          (this.complete = new Promise(function (e, t) {
            (n.oncomplete = function () {
              e();
            }),
              (n.onerror = function () {
                t(n.error);
              }),
              (n.onabort = function () {
                t(n.error);
              });
          }));
      }
      function R(e, t, n) {
        (this._db = e), (this.oldVersion = t), (this.transaction = new L(n));
      }
      function F(e) {
        this._db = e;
      }
      N(x, "_index", ["name", "keyPath", "multiEntry", "unique"]),
        D(x, "_index", IDBIndex, [
          "get",
          "getKey",
          "getAll",
          "getAllKeys",
          "count",
        ]),
        A(x, "_index", IDBIndex, ["openCursor", "openKeyCursor"]),
        N(k, "_cursor", ["direction", "key", "primaryKey", "value"]),
        D(k, "_cursor", IDBCursor, ["update", "delete"]),
        ["advance", "continue", "continuePrimaryKey"].forEach(function (n) {
          n in IDBCursor.prototype &&
            (k.prototype[n] = function () {
              var t = this,
                e = arguments;
              return Promise.resolve().then(function () {
                return (
                  t._cursor[n].apply(t._cursor, e),
                  C(t._request).then(function (e) {
                    if (e) return new k(e, t._request);
                  })
                );
              });
            });
        }),
        (j.prototype.createIndex = function () {
          return new x(this._store.createIndex.apply(this._store, arguments));
        }),
        (j.prototype.index = function () {
          return new x(this._store.index.apply(this._store, arguments));
        }),
        N(j, "_store", ["name", "keyPath", "indexNames", "autoIncrement"]),
        D(j, "_store", IDBObjectStore, [
          "put",
          "add",
          "delete",
          "clear",
          "get",
          "getAll",
          "getKey",
          "getAllKeys",
          "count",
        ]),
        A(j, "_store", IDBObjectStore, ["openCursor", "openKeyCursor"]),
        P(j, "_store", IDBObjectStore, ["deleteIndex"]),
        (L.prototype.objectStore = function () {
          return new j(this._tx.objectStore.apply(this._tx, arguments));
        }),
        N(L, "_tx", ["objectStoreNames", "mode"]),
        P(L, "_tx", IDBTransaction, ["abort"]),
        (R.prototype.createObjectStore = function () {
          return new j(this._db.createObjectStore.apply(this._db, arguments));
        }),
        N(R, "_db", ["name", "version", "objectStoreNames"]),
        P(R, "_db", IDBDatabase, ["deleteObjectStore", "close"]),
        (F.prototype.transaction = function () {
          return new L(this._db.transaction.apply(this._db, arguments));
        }),
        N(F, "_db", ["name", "version", "objectStoreNames"]),
        P(F, "_db", IDBDatabase, ["close"]),
        ["openCursor", "openKeyCursor"].forEach(function (i) {
          [j, x].forEach(function (e) {
            i in e.prototype &&
              (e.prototype[i.replace("open", "iterate")] = function () {
                var e = ((n = arguments), Array.prototype.slice.call(n)),
                  t = e[e.length - 1],
                  n = this._store || this._index,
                  r = n[i].apply(n, e.slice(0, -1));
                r.onsuccess = function () {
                  t(r.result);
                };
              });
          });
        }),
        [x, j].forEach(function (e) {
          e.prototype.getAll ||
            (e.prototype.getAll = function (e, n) {
              var r = this,
                i = [];
              return new Promise(function (t) {
                r.iterateCursor(e, function (e) {
                  e
                    ? (i.push(e.value),
                      void 0 === n || i.length != n ? e.continue() : t(i))
                    : t(i);
                });
              });
            });
        });
      var M = "0.4.31",
        B = 1e4,
        H = "w:" + M,
        q = "FIS_v2",
        V = "https://firebaseinstallations.googleapis.com/v1",
        G = 36e5,
        K =
          (((Re = {})["missing-app-config-values"] =
            'Missing App configuration value: "{$valueName}"'),
          (Re["not-registered"] = "Firebase Installation is not registered."),
          (Re["installation-not-found"] = "Firebase Installation not found."),
          (Re["request-failed"] =
            '{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),
          (Re["app-offline"] =
            "Could not process request. Application offline."),
          (Re["delete-pending-registration"] =
            "Can't delete installation while there is a pending registration request."),
          Re),
        U = new m("installations", "Installations", K);
      function W(e) {
        return e instanceof f && e.code.includes("request-failed");
      }
      function $(e) {
        e = e.projectId;
        return V + "/projects/" + e + "/installations";
      }
      function z(e) {
        return {
          token: e.token,
          requestStatus: 2,
          expiresIn: ((e = e.expiresIn), Number(e.replace("s", "000"))),
          creationTime: Date.now(),
        };
      }
      function J(n, r) {
        return p(this, void 0, void 0, function () {
          var t;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return [4, r.json()];
              case 1:
                return (
                  (t = e.sent()),
                  (t = t.error),
                  [
                    2,
                    U.create("request-failed", {
                      requestName: n,
                      serverCode: t.code,
                      serverMessage: t.message,
                      serverStatus: t.status,
                    }),
                  ]
                );
            }
          });
        });
      }
      function Y(e) {
        e = e.apiKey;
        return new Headers({
          "Content-Type": "application/json",
          Accept: "application/json",
          "x-goog-api-key": e,
        });
      }
      function X(e, t) {
        (t = t.refreshToken), (e = Y(e));
        return e.append("Authorization", q + " " + t), e;
      }
      function Z(n) {
        return p(this, void 0, void 0, function () {
          var t;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return [4, n()];
              case 1:
                return 500 <= (t = e.sent()).status && t.status < 600
                  ? [2, n()]
                  : [2, t];
            }
          });
        });
      }
      function Q(t) {
        return new Promise(function (e) {
          setTimeout(e, t);
        });
      }
      function ee(e) {
        return btoa(
          String.fromCharCode.apply(
            String,
            u(
              [],
              (function (e, t) {
                var n = "function" == typeof Symbol && e[Symbol.iterator];
                if (!n) return e;
                var r,
                  i,
                  o = n.call(e),
                  a = [];
                try {
                  for (; (void 0 === t || 0 < t--) && !(r = o.next()).done; )
                    a.push(r.value);
                } catch (e) {
                  i = { error: e };
                } finally {
                  try {
                    r && !r.done && (n = o.return) && n.call(o);
                  } finally {
                    if (i) throw i.error;
                  }
                }
                return a;
              })(e)
            )
          )
        )
          .replace(/\+/g, "-")
          .replace(/\//g, "_");
      }
      var te = /^[cdef][\w-]{21}$/,
        ne = "";
      function re() {
        try {
          var e = new Uint8Array(17);
          (self.crypto || self.msCrypto).getRandomValues(e),
            (e[0] = 112 + (e[0] % 16));
          var t = ee(e).substr(0, 22);
          return te.test(t) ? t : ne;
        } catch (e) {
          return ne;
        }
      }
      function ie(e) {
        return e.appName + "!" + e.appId;
      }
      var oe = new Map();
      function ae(e, t) {
        e = ie(e);
        se(e, t),
          (function (e, t) {
            var n = ce();
            n && n.postMessage({ key: e, fid: t });
            le();
          })(e, t);
      }
      function se(e, t) {
        var n,
          r,
          e = oe.get(e);
        if (e)
          try {
            for (var i = a(e), o = i.next(); !o.done; o = i.next())
              (0, o.value)(t);
          } catch (e) {
            n = { error: e };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
      }
      var ue = null;
      function ce() {
        return (
          !ue &&
            "BroadcastChannel" in self &&
            ((ue = new BroadcastChannel("[Firebase] FID Change")).onmessage =
              function (e) {
                se(e.data.key, e.data.fid);
              }),
          ue
        );
      }
      function le() {
        0 === oe.size && ue && (ue.close(), (ue = null));
      }
      var fe,
        de,
        pe = "firebase-installations-database",
        he = 1,
        ve = "firebase-installations-store",
        ge = null;
      function me() {
        var e, t, n;
        return (
          ge ||
            ((e = he),
            (t = function (e) {
              0 === e.oldVersion && e.createObjectStore(ve);
            }),
            (n = (e = O(indexedDB, "open", [pe, he])).request) &&
              (n.onupgradeneeded = function (e) {
                t && t(new R(n.result, e.oldVersion, n.transaction));
              }),
            (ge = e.then(function (e) {
              return new F(e);
            }))),
          ge
        );
      }
      function ye(o, a) {
        return p(this, void 0, void 0, function () {
          var t, n, r, i;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (t = ie(o)), [4, me()];
              case 1:
                return (
                  (r = e.sent()),
                  (n = r.transaction(ve, "readwrite")),
                  [4, (r = n.objectStore(ve)).get(t)]
                );
              case 2:
                return (i = e.sent()), [4, r.put(a, t)];
              case 3:
                return e.sent(), [4, n.complete];
              case 4:
                return e.sent(), (i && i.fid === a.fid) || ae(o, a.fid), [2, a];
            }
          });
        });
      }
      function be(r) {
        return p(this, void 0, void 0, function () {
          var t, n;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (t = ie(r)), [4, me()];
              case 1:
                return (
                  (n = e.sent()),
                  [
                    4,
                    (n = n.transaction(ve, "readwrite"))
                      .objectStore(ve)
                      .delete(t),
                  ]
                );
              case 2:
                return e.sent(), [4, n.complete];
              case 3:
                return e.sent(), [2];
            }
          });
        });
      }
      function we(a, s) {
        return p(this, void 0, void 0, function () {
          var t, n, r, i, o;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (t = ie(a)), [4, me()];
              case 1:
                return (
                  (r = e.sent()),
                  (n = r.transaction(ve, "readwrite")),
                  [4, (r = n.objectStore(ve)).get(t)]
                );
              case 2:
                return (
                  (i = e.sent()),
                  void 0 !== (o = s(i)) ? [3, 4] : [4, r.delete(t)]
                );
              case 3:
                return e.sent(), [3, 6];
              case 4:
                return [4, r.put(o, t)];
              case 5:
                e.sent(), (e.label = 6);
              case 6:
                return [4, n.complete];
              case 7:
                return (
                  e.sent(), !o || (i && i.fid === o.fid) || ae(a, o.fid), [2, o]
                );
            }
          });
        });
      }
      function Ie(i) {
        return p(this, void 0, void 0, function () {
          var t, n, r;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return [
                  4,
                  we(i, function (e) {
                    (e = Ee(e || { fid: re(), registrationStatus: 0 })),
                      (e = (function (e, t) {
                        {
                          if (0 !== t.registrationStatus)
                            return 1 === t.registrationStatus
                              ? {
                                  installationEntry: t,
                                  registrationPromise: (function (i) {
                                    return p(this, void 0, void 0, function () {
                                      var t, n, r;
                                      return h(this, function (e) {
                                        switch (e.label) {
                                          case 0:
                                            return [4, _e(i)];
                                          case 1:
                                            (t = e.sent()), (e.label = 2);
                                          case 2:
                                            return 1 !== t.registrationStatus
                                              ? [3, 5]
                                              : [4, Q(100)];
                                          case 3:
                                            return e.sent(), [4, _e(i)];
                                          case 4:
                                            return (t = e.sent()), [3, 2];
                                          case 5:
                                            return 0 !== t.registrationStatus
                                              ? [3, 7]
                                              : [4, Ie(i)];
                                          case 6:
                                            return (
                                              (r = e.sent()),
                                              (n = r.installationEntry),
                                              (r = r.registrationPromise)
                                                ? [2, r]
                                                : [2, n]
                                            );
                                          case 7:
                                            return [2, t];
                                        }
                                      });
                                    });
                                  })(e),
                                }
                              : { installationEntry: t };
                          if (!navigator.onLine) {
                            var n = Promise.reject(U.create("app-offline"));
                            return {
                              installationEntry: t,
                              registrationPromise: n,
                            };
                          }
                          (t = {
                            fid: t.fid,
                            registrationStatus: 1,
                            registrationTime: Date.now(),
                          }),
                            (e = (function (r, i) {
                              return p(this, void 0, void 0, function () {
                                var t, n;
                                return h(this, function (e) {
                                  switch (e.label) {
                                    case 0:
                                      return (
                                        e.trys.push([0, 2, , 7]),
                                        [
                                          4,
                                          (function (a, e) {
                                            var s = e.fid;
                                            return p(
                                              this,
                                              void 0,
                                              void 0,
                                              function () {
                                                var t, n, r, i, o;
                                                return h(this, function (e) {
                                                  switch (e.label) {
                                                    case 0:
                                                      return (
                                                        (t = $(a)),
                                                        (n = Y(a)),
                                                        (o = {
                                                          fid: s,
                                                          authVersion: q,
                                                          appId: a.appId,
                                                          sdkVersion: H,
                                                        }),
                                                        (r = {
                                                          method: "POST",
                                                          headers: n,
                                                          body: JSON.stringify(
                                                            o
                                                          ),
                                                        }),
                                                        [
                                                          4,
                                                          Z(function () {
                                                            return fetch(t, r);
                                                          }),
                                                        ]
                                                      );
                                                    case 1:
                                                      return (i = e.sent()).ok
                                                        ? [4, i.json()]
                                                        : [3, 3];
                                                    case 2:
                                                      return (
                                                        (o = e.sent()),
                                                        [
                                                          2,
                                                          {
                                                            fid: o.fid || s,
                                                            registrationStatus: 2,
                                                            refreshToken:
                                                              o.refreshToken,
                                                            authToken: z(
                                                              o.authToken
                                                            ),
                                                          },
                                                        ]
                                                      );
                                                    case 3:
                                                      return [
                                                        4,
                                                        J(
                                                          "Create Installation",
                                                          i
                                                        ),
                                                      ];
                                                    case 4:
                                                      throw e.sent();
                                                  }
                                                });
                                              }
                                            );
                                          })(r, i),
                                        ]
                                      );
                                    case 1:
                                      return (t = e.sent()), [2, ye(r, t)];
                                    case 2:
                                      return W((n = e.sent())) &&
                                        409 === n.customData.serverCode
                                        ? [4, be(r)]
                                        : [3, 4];
                                    case 3:
                                      return e.sent(), [3, 6];
                                    case 4:
                                      return [
                                        4,
                                        ye(r, {
                                          fid: i.fid,
                                          registrationStatus: 0,
                                        }),
                                      ];
                                    case 5:
                                      e.sent(), (e.label = 6);
                                    case 6:
                                      throw n;
                                    case 7:
                                      return [2];
                                  }
                                });
                              });
                            })(e, t));
                          return {
                            installationEntry: t,
                            registrationPromise: e,
                          };
                        }
                      })(i, e));
                    return (t = e.registrationPromise), e.installationEntry;
                  }),
                ];
              case 1:
                return (n = e.sent()).fid !== ne ? [3, 3] : ((r = {}), [4, t]);
              case 2:
                return [2, ((r.installationEntry = e.sent()), r)];
              case 3:
                return [2, { installationEntry: n, registrationPromise: t }];
            }
          });
        });
      }
      function _e(e) {
        return we(e, function (e) {
          if (!e) throw U.create("installation-not-found");
          return Ee(e);
        });
      }
      function Ee(e) {
        return 1 === (t = e).registrationStatus &&
          t.registrationTime + B < Date.now()
          ? { fid: e.fid, registrationStatus: 0 }
          : e;
        var t;
      }
      function Te(e, a) {
        var s = e.appConfig,
          u = e.platformLoggerProvider;
        return p(this, void 0, void 0, function () {
          var t, n, r, i, o;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  (t = (function (e, t) {
                    t = t.fid;
                    return $(e) + "/" + t + "/authTokens:generate";
                  })(s, a)),
                  (n = X(s, a)),
                  (o = u.getImmediate({ optional: !0 })) &&
                    n.append("x-firebase-client", o.getPlatformInfoString()),
                  (o = { installation: { sdkVersion: H } }),
                  (r = { method: "POST", headers: n, body: JSON.stringify(o) }),
                  [
                    4,
                    Z(function () {
                      return fetch(t, r);
                    }),
                  ]
                );
              case 1:
                return (i = e.sent()).ok ? [4, i.json()] : [3, 3];
              case 2:
                return (o = e.sent()), [2, z(o)];
              case 3:
                return [4, J("Generate Auth Token", i)];
              case 4:
                throw e.sent();
            }
          });
        });
      }
      function Se(i, o) {
        return (
          void 0 === o && (o = !1),
          p(this, void 0, void 0, function () {
            var r, t, n;
            return h(this, function (e) {
              switch (e.label) {
                case 0:
                  return [
                    4,
                    we(i.appConfig, function (e) {
                      if (!Oe(e)) throw U.create("not-registered");
                      var t,
                        n = e.authToken;
                      if (
                        o ||
                        2 !== (t = n).requestStatus ||
                        (function (e) {
                          var t = Date.now();
                          return (
                            t < e.creationTime ||
                            e.creationTime + e.expiresIn < t + G
                          );
                        })(t)
                      ) {
                        if (1 === n.requestStatus)
                          return (
                            (r = (function (n, r) {
                              return p(this, void 0, void 0, function () {
                                var t;
                                return h(this, function (e) {
                                  switch (e.label) {
                                    case 0:
                                      return [4, Ce(n.appConfig)];
                                    case 1:
                                      (t = e.sent()), (e.label = 2);
                                    case 2:
                                      return 1 !== t.authToken.requestStatus
                                        ? [3, 5]
                                        : [4, Q(100)];
                                    case 3:
                                      return e.sent(), [4, Ce(n.appConfig)];
                                    case 4:
                                      return (t = e.sent()), [3, 2];
                                    case 5:
                                      return 0 ===
                                        (t = t.authToken).requestStatus
                                        ? [2, Se(n, r)]
                                        : [2, t];
                                  }
                                });
                              });
                            })(i, o)),
                            e
                          );
                        if (!navigator.onLine) throw U.create("app-offline");
                        n =
                          ((t = e),
                          (n = { requestStatus: 1, requestTime: Date.now() }),
                          s(s({}, t), { authToken: n }));
                        return (
                          (r = (function (i, o) {
                            return p(this, void 0, void 0, function () {
                              var t, n, r;
                              return h(this, function (e) {
                                switch (e.label) {
                                  case 0:
                                    return (
                                      e.trys.push([0, 3, , 8]), [4, Te(i, o)]
                                    );
                                  case 1:
                                    return (
                                      (t = e.sent()),
                                      (r = s(s({}, o), { authToken: t })),
                                      [4, ye(i.appConfig, r)]
                                    );
                                  case 2:
                                    return e.sent(), [2, t];
                                  case 3:
                                    return !W((n = e.sent())) ||
                                      (401 !== n.customData.serverCode &&
                                        404 !== n.customData.serverCode)
                                      ? [3, 5]
                                      : [4, be(i.appConfig)];
                                  case 4:
                                    return e.sent(), [3, 7];
                                  case 5:
                                    return (
                                      (r = s(s({}, o), {
                                        authToken: { requestStatus: 0 },
                                      })),
                                      [4, ye(i.appConfig, r)]
                                    );
                                  case 6:
                                    e.sent(), (e.label = 7);
                                  case 7:
                                    throw n;
                                  case 8:
                                    return [2];
                                }
                              });
                            });
                          })(i, n)),
                          n
                        );
                      }
                      return e;
                    }),
                  ];
                case 1:
                  return (t = e.sent()), r ? [4, r] : [3, 3];
                case 2:
                  return (n = e.sent()), [3, 4];
                case 3:
                  (n = t.authToken), (e.label = 4);
                case 4:
                  return [2, n];
              }
            });
          })
        );
      }
      function Ce(e) {
        return we(e, function (e) {
          if (!Oe(e)) throw U.create("not-registered");
          var t = e.authToken;
          return 1 === (t = t).requestStatus && t.requestTime + B < Date.now()
            ? s(s({}, e), { authToken: { requestStatus: 0 } })
            : e;
        });
      }
      function Oe(e) {
        return void 0 !== e && 2 === e.registrationStatus;
      }
      function Ne(t, n) {
        return (
          void 0 === n && (n = !1),
          p(this, void 0, void 0, function () {
            return h(this, function (e) {
              switch (e.label) {
                case 0:
                  return [
                    4,
                    (function (n) {
                      return p(this, void 0, void 0, function () {
                        var t;
                        return h(this, function (e) {
                          switch (e.label) {
                            case 0:
                              return [4, Ie(n)];
                            case 1:
                              return (t = e.sent().registrationPromise)
                                ? [4, t]
                                : [3, 3];
                            case 2:
                              e.sent(), (e.label = 3);
                            case 3:
                              return [2];
                          }
                        });
                      });
                    })(t.appConfig),
                  ];
                case 1:
                  return e.sent(), [4, Se(t, n)];
                case 2:
                  return [2, e.sent().token];
              }
            });
          })
        );
      }
      function De(i, o) {
        return p(this, void 0, void 0, function () {
          var t, n, r;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  (t = (function (e, t) {
                    t = t.fid;
                    return $(e) + "/" + t;
                  })(i, o)),
                  (r = X(i, o)),
                  (n = { method: "DELETE", headers: r }),
                  [
                    4,
                    Z(function () {
                      return fetch(t, n);
                    }),
                  ]
                );
              case 1:
                return (r = e.sent()).ok
                  ? [3, 3]
                  : [4, J("Delete Installation", r)];
              case 2:
                throw e.sent();
              case 3:
                return [2];
            }
          });
        });
      }
      function Pe(e, r) {
        var i = e.appConfig;
        return (
          (function (e, t) {
            ce();
            var n = ie(e);
            (e = oe.get(n)) || ((e = new Set()), oe.set(n, e)), e.add(t);
          })(i, r),
          function () {
            var e, t, n;
            (t = r),
              (n = ie((e = i))),
              (e = oe.get(n)) &&
                (e.delete(t), 0 === e.size && oe.delete(n), le());
          }
        );
      }
      function Ae(e) {
        return U.create("missing-app-config-values", { valueName: e });
      }
      (fe = t.default).INTERNAL.registerComponent(
        new T(
          "installations",
          function (e) {
            var t = e.getProvider("app").getImmediate(),
              n = {
                appConfig: (function (e) {
                  var t, n;
                  if (!e || !e.options) throw Ae("App Configuration");
                  if (!e.name) throw Ae("App Name");
                  try {
                    for (
                      var r = a(["projectId", "apiKey", "appId"]), i = r.next();
                      !i.done;
                      i = r.next()
                    ) {
                      var o = i.value;
                      if (!e.options[o]) throw Ae(o);
                    }
                  } catch (e) {
                    t = { error: e };
                  } finally {
                    try {
                      i && !i.done && (n = r.return) && n.call(r);
                    } finally {
                      if (t) throw t.error;
                    }
                  }
                  return {
                    appName: e.name,
                    projectId: e.options.projectId,
                    apiKey: e.options.apiKey,
                    appId: e.options.appId,
                  };
                })(t),
                platformLoggerProvider: e.getProvider("platform-logger"),
              };
            return {
              app: t,
              getId: function () {
                return (function (r) {
                  return p(this, void 0, void 0, function () {
                    var t, n;
                    return h(this, function (e) {
                      switch (e.label) {
                        case 0:
                          return [4, Ie(r.appConfig)];
                        case 1:
                          return (
                            (t = e.sent()),
                            (n = t.installationEntry),
                            (t.registrationPromise || Se(r)).catch(
                              console.error
                            ),
                            [2, n.fid]
                          );
                      }
                    });
                  });
                })(n);
              },
              getToken: function (e) {
                return Ne(n, e);
              },
              delete: function () {
                return (function (r) {
                  return p(this, void 0, void 0, function () {
                    var t, n;
                    return h(this, function (e) {
                      switch (e.label) {
                        case 0:
                          return [
                            4,
                            we((t = r.appConfig), function (e) {
                              if (!e || 0 !== e.registrationStatus) return e;
                            }),
                          ];
                        case 1:
                          if (!(n = e.sent())) return [3, 6];
                          if (1 !== n.registrationStatus) return [3, 2];
                          throw U.create("delete-pending-registration");
                        case 2:
                          if (2 !== n.registrationStatus) return [3, 6];
                          if (navigator.onLine) return [3, 3];
                          throw U.create("app-offline");
                        case 3:
                          return [4, De(t, n)];
                        case 4:
                          return e.sent(), [4, be(t)];
                        case 5:
                          e.sent(), (e.label = 6);
                        case 6:
                          return [2];
                      }
                    });
                  });
                })(n);
              },
              onIdChange: function (e) {
                return Pe(n, e);
              },
            };
          },
          "PUBLIC"
        )
      ),
        fe.registerVersion("@firebase/installations", M),
        ((Re = de = de || {})[(Re.DEBUG = 0)] = "DEBUG"),
        (Re[(Re.VERBOSE = 1)] = "VERBOSE"),
        (Re[(Re.INFO = 2)] = "INFO"),
        (Re[(Re.WARN = 3)] = "WARN"),
        (Re[(Re.ERROR = 4)] = "ERROR"),
        (Re[(Re.SILENT = 5)] = "SILENT");
      function xe(e, t) {
        for (var n = [], r = 2; r < arguments.length; r++)
          n[r - 2] = arguments[r];
        if (!(t < e.logLevel)) {
          var i = new Date().toISOString(),
            o = Le[t];
          if (!o)
            throw new Error(
              "Attempted to log a message with an invalid logType (value: " +
                t +
                ")"
            );
          console[o].apply(console, u(["[" + i + "]  " + e.name + ":"], n));
        }
      }
      var ke = {
          debug: de.DEBUG,
          verbose: de.VERBOSE,
          info: de.INFO,
          warn: de.WARN,
          error: de.ERROR,
          silent: de.SILENT,
        },
        je = de.INFO,
        Le =
          (((K = {})[de.DEBUG] = "log"),
          (K[de.VERBOSE] = "log"),
          (K[de.INFO] = "info"),
          (K[de.WARN] = "warn"),
          (K[de.ERROR] = "error"),
          K),
        Re =
          (Object.defineProperty(Fe.prototype, "logLevel", {
            get: function () {
              return this._logLevel;
            },
            set: function (e) {
              if (!(e in de))
                throw new TypeError(
                  'Invalid value "' + e + '" assigned to `logLevel`'
                );
              this._logLevel = e;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Fe.prototype.setLogLevel = function (e) {
            this._logLevel = "string" == typeof e ? ke[e] : e;
          }),
          Object.defineProperty(Fe.prototype, "logHandler", {
            get: function () {
              return this._logHandler;
            },
            set: function (e) {
              if ("function" != typeof e)
                throw new TypeError(
                  "Value assigned to `logHandler` must be a function"
                );
              this._logHandler = e;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Fe.prototype, "userLogHandler", {
            get: function () {
              return this._userLogHandler;
            },
            set: function (e) {
              this._userLogHandler = e;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Fe.prototype.debug = function () {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            this._userLogHandler &&
              this._userLogHandler.apply(this, u([this, de.DEBUG], e)),
              this._logHandler.apply(this, u([this, de.DEBUG], e));
          }),
          (Fe.prototype.log = function () {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            this._userLogHandler &&
              this._userLogHandler.apply(this, u([this, de.VERBOSE], e)),
              this._logHandler.apply(this, u([this, de.VERBOSE], e));
          }),
          (Fe.prototype.info = function () {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            this._userLogHandler &&
              this._userLogHandler.apply(this, u([this, de.INFO], e)),
              this._logHandler.apply(this, u([this, de.INFO], e));
          }),
          (Fe.prototype.warn = function () {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            this._userLogHandler &&
              this._userLogHandler.apply(this, u([this, de.WARN], e)),
              this._logHandler.apply(this, u([this, de.WARN], e));
          }),
          (Fe.prototype.error = function () {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            this._userLogHandler &&
              this._userLogHandler.apply(this, u([this, de.ERROR], e)),
              this._logHandler.apply(this, u([this, de.ERROR], e));
          }),
          Fe);
      function Fe(e) {
        (this.name = e),
          (this._logLevel = je),
          (this._logHandler = xe),
          (this._userLogHandler = null);
      }
      var Me,
        Be,
        He = "firebase_id",
        qe = "origin",
        Ve = 6e4,
        Ge =
          "https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",
        Ke = "https://www.googletagmanager.com/gtag/js";
      ((K = Me = Me || {}).EVENT = "event"),
        (K.SET = "set"),
        (K.CONFIG = "config"),
        ((K = Be = Be || {}).ADD_SHIPPING_INFO = "add_shipping_info"),
        (K.ADD_PAYMENT_INFO = "add_payment_info"),
        (K.ADD_TO_CART = "add_to_cart"),
        (K.ADD_TO_WISHLIST = "add_to_wishlist"),
        (K.BEGIN_CHECKOUT = "begin_checkout"),
        (K.CHECKOUT_PROGRESS = "checkout_progress"),
        (K.EXCEPTION = "exception"),
        (K.GENERATE_LEAD = "generate_lead"),
        (K.LOGIN = "login"),
        (K.PAGE_VIEW = "page_view"),
        (K.PURCHASE = "purchase"),
        (K.REFUND = "refund"),
        (K.REMOVE_FROM_CART = "remove_from_cart"),
        (K.SCREEN_VIEW = "screen_view"),
        (K.SEARCH = "search"),
        (K.SELECT_CONTENT = "select_content"),
        (K.SELECT_ITEM = "select_item"),
        (K.SELECT_PROMOTION = "select_promotion"),
        (K.SET_CHECKOUT_OPTION = "set_checkout_option"),
        (K.SHARE = "share"),
        (K.SIGN_UP = "sign_up"),
        (K.TIMING_COMPLETE = "timing_complete"),
        (K.VIEW_CART = "view_cart"),
        (K.VIEW_ITEM = "view_item"),
        (K.VIEW_ITEM_LIST = "view_item_list"),
        (K.VIEW_PROMOTION = "view_promotion"),
        (K.VIEW_SEARCH_RESULTS = "view_search_results");
      var Ue = new Re("@firebase/analytics");
      function We(o, a, s, u) {
        return function (n, r, i) {
          return p(this, void 0, void 0, function () {
            var t;
            return h(this, function (e) {
              switch (e.label) {
                case 0:
                  return (
                    e.trys.push([0, 6, , 7]),
                    n !== Me.EVENT
                      ? [3, 2]
                      : [
                          4,
                          (function (u, c, l, f, d) {
                            return p(this, void 0, void 0, function () {
                              var n, r, t, i, o, a, s;
                              return h(this, function (e) {
                                switch (e.label) {
                                  case 0:
                                    return (e.trys.push([0, 4, , 5]),
                                    (n = []),
                                    d && d.send_to)
                                      ? ((s = d.send_to),
                                        Array.isArray(s) || (s = [s]),
                                        [4, Promise.all(l)])
                                      : [3, 2];
                                  case 1:
                                    for (
                                      r = e.sent(),
                                        t = function (t) {
                                          var e = r.find(function (e) {
                                              return e.measurementId === t;
                                            }),
                                            e = e && c[e.appId];
                                          if (!e) return (n = []), "break";
                                          n.push(e);
                                        },
                                        i = 0,
                                        o = s;
                                      i < o.length &&
                                      ((a = o[i]), "break" !== t(a));
                                      i++
                                    );
                                    e.label = 2;
                                  case 2:
                                    return (
                                      0 === n.length && (n = Object.values(c)),
                                      [4, Promise.all(n)]
                                    );
                                  case 3:
                                    return (
                                      e.sent(), u(Me.EVENT, f, d || {}), [3, 5]
                                    );
                                  case 4:
                                    return (s = e.sent()), Ue.error(s), [3, 5];
                                  case 5:
                                    return [2];
                                }
                              });
                            });
                          })(o, a, s, r, i),
                        ]
                  );
                case 1:
                  return e.sent(), [3, 5];
                case 2:
                  return n !== Me.CONFIG
                    ? [3, 4]
                    : [
                        4,
                        (function (r, i, o, a, s, u) {
                          return p(this, void 0, void 0, function () {
                            var t, n;
                            return h(this, function (e) {
                              switch (e.label) {
                                case 0:
                                  (t = a[s]), (e.label = 1);
                                case 1:
                                  return (
                                    e.trys.push([1, 7, , 8]),
                                    t ? [4, i[t]] : [3, 3]
                                  );
                                case 2:
                                  return e.sent(), [3, 6];
                                case 3:
                                  return [4, Promise.all(o)];
                                case 4:
                                  return (
                                    (n = e.sent()),
                                    (n = n.find(function (e) {
                                      return e.measurementId === s;
                                    }))
                                      ? [4, i[n.appId]]
                                      : [3, 6]
                                  );
                                case 5:
                                  e.sent(), (e.label = 6);
                                case 6:
                                  return [3, 8];
                                case 7:
                                  return (n = e.sent()), Ue.error(n), [3, 8];
                                case 8:
                                  return r(Me.CONFIG, s, u), [2];
                              }
                            });
                          });
                        })(o, a, s, u, r, i),
                      ];
                case 3:
                  return e.sent(), [3, 5];
                case 4:
                  o(Me.SET, r), (e.label = 5);
                case 5:
                  return [3, 7];
                case 6:
                  return (t = e.sent()), Ue.error(t), [3, 7];
                case 7:
                  return [2];
              }
            });
          });
        };
      }
      var Re =
          (((Re = {})["already-exists"] =
            "A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),
          (Re["already-initialized"] =
            "Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),
          (Re["interop-component-reg-failed"] =
            "Firebase Analytics Interop Component failed to instantiate: {$reason}"),
          (Re["invalid-analytics-context"] =
            "Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),
          (Re["indexeddb-unavailable"] =
            "IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),
          (Re["fetch-throttle"] =
            "The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),
          (Re["config-fetch-failed"] =
            "Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),
          (Re["no-api-key"] =
            'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),
          (Re["no-app-id"] =
            'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),
          Re),
        $e = new m("analytics", "Analytics", Re),
        ze = 30;
      function Je(e, t) {
        void 0 === t && (t = 1e3),
          (this.throttleMetadata = e = void 0 === e ? {} : e),
          (this.intervalMillis = t);
      }
      var Ye = new ((Je.prototype.getThrottleMetadata = function (e) {
        return this.throttleMetadata[e];
      }),
      (Je.prototype.setThrottleMetadata = function (e, t) {
        this.throttleMetadata[e] = t;
      }),
      (Je.prototype.deleteThrottleMetadata = function (e) {
        delete this.throttleMetadata[e];
      }),
      Je)();
      function Xe(o) {
        var a;
        return p(this, void 0, void 0, function () {
          var t, n, r, i;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  (t = o.appId),
                  (i = o.apiKey),
                  (i = {
                    method: "GET",
                    headers: new Headers({
                      Accept: "application/json",
                      "x-goog-api-key": i,
                    }),
                  }),
                  (t = Ge.replace("{app-id}", t)),
                  [4, fetch(t, i)]
                );
              case 1:
                if (200 === (n = e.sent()).status || 304 === n.status)
                  return [3, 6];
                (r = ""), (e.label = 2);
              case 2:
                return e.trys.push([2, 4, , 5]), [4, n.json()];
              case 3:
                return (
                  (i = e.sent()),
                  null !== (a = i.error) &&
                    void 0 !== a &&
                    a.message &&
                    (r = i.error.message),
                  [3, 5]
                );
              case 4:
                return e.sent(), [3, 5];
              case 5:
                throw $e.create("config-fetch-failed", {
                  httpStatus: n.status,
                  responseMessage: r,
                });
              case 6:
                return [2, n.json()];
            }
          });
        });
      }
      function Ze(s, u, c) {
        return (
          void 0 === u && (u = Ye),
          p(this, void 0, void 0, function () {
            var t,
              n,
              r,
              i,
              o,
              a = this;
            return h(this, function (e) {
              if (
                ((i = s.options),
                (t = i.appId),
                (n = i.apiKey),
                (r = i.measurementId),
                !t)
              )
                throw $e.create("no-app-id");
              if (n)
                return (
                  (i = u.getThrottleMetadata(t) || {
                    backoffCount: 0,
                    throttleEndTimeMillis: Date.now(),
                  }),
                  (o = new tt()),
                  setTimeout(
                    function () {
                      return p(a, void 0, void 0, function () {
                        return h(this, function (e) {
                          return o.abort(), [2];
                        });
                      });
                    },
                    void 0 !== c ? c : Ve
                  ),
                  [
                    2,
                    (function a(s, e, u, c) {
                      var l = e.throttleEndTimeMillis,
                        f = e.backoffCount;
                      void 0 === c && (c = Ye);
                      return p(this, void 0, void 0, function () {
                        var t, n, r, i, o;
                        return h(this, function (e) {
                          switch (e.label) {
                            case 0:
                              (t = s.appId),
                                (n = s.measurementId),
                                (e.label = 1);
                            case 1:
                              return e.trys.push([1, 3, , 4]), [4, Qe(u, l)];
                            case 2:
                              return e.sent(), [3, 4];
                            case 3:
                              if (((i = e.sent()), n))
                                return (
                                  Ue.warn(
                                    "Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID " +
                                      n +
                                      ' provided in the "measurementId" field in the local Firebase config. [' +
                                      i.message +
                                      "]"
                                  ),
                                  [2, { appId: t, measurementId: n }]
                                );
                              throw i;
                            case 4:
                              return e.trys.push([4, 6, , 7]), [4, Xe(s)];
                            case 5:
                              return (
                                (o = e.sent()),
                                c.deleteThrottleMetadata(t),
                                [2, o]
                              );
                            case 6:
                              if (et((r = e.sent())))
                                return (
                                  (i =
                                    503 === Number(r.customData.httpStatus)
                                      ? E(f, c.intervalMillis, ze)
                                      : E(f, c.intervalMillis)),
                                  (o = {
                                    throttleEndTimeMillis: Date.now() + i,
                                    backoffCount: f + 1,
                                  }),
                                  c.setThrottleMetadata(t, o),
                                  Ue.debug(
                                    "Calling attemptFetch again in " +
                                      i +
                                      " millis"
                                  ),
                                  [2, a(s, o, u, c)]
                                );
                              if ((c.deleteThrottleMetadata(t), n))
                                return (
                                  Ue.warn(
                                    "Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID " +
                                      n +
                                      ' provided in the "measurementId" field in the local Firebase config. [' +
                                      r.message +
                                      "]"
                                  ),
                                  [2, { appId: t, measurementId: n }]
                                );
                              throw r;
                            case 7:
                              return [2];
                          }
                        });
                      });
                    })({ appId: t, apiKey: n, measurementId: r }, i, o, u),
                  ]
                );
              if (r) return [2, { measurementId: r, appId: t }];
              throw $e.create("no-api-key");
            });
          })
        );
      }
      function Qe(i, o) {
        return new Promise(function (e, t) {
          var n = Math.max(o - Date.now(), 0),
            r = setTimeout(e, n);
          i.addEventListener(function () {
            clearTimeout(r),
              t($e.create("fetch-throttle", { throttleEndTimeMillis: o }));
          });
        });
      }
      function et(e) {
        if (e instanceof f && e.customData) {
          e = Number(e.customData.httpStatus);
          return 429 === e || 500 === e || 503 === e || 504 === e;
        }
      }
      var tt =
        ((nt.prototype.addEventListener = function (e) {
          this.listeners.push(e);
        }),
        (nt.prototype.abort = function () {
          this.listeners.forEach(function (e) {
            return e();
          });
        }),
        nt);
      function nt() {
        this.listeners = [];
      }
      function rt(s, u, c, l, f, d) {
        return p(this, void 0, void 0, function () {
          var i, o, a;
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                return (
                  (i = Ze(s))
                    .then(function (e) {
                      (c[e.measurementId] = e.appId),
                        s.options.measurementId &&
                          e.measurementId !== s.options.measurementId &&
                          Ue.warn(
                            "The measurement ID in the local Firebase config (" +
                              s.options.measurementId +
                              ") does not match the measurement ID fetched from the server (" +
                              e.measurementId +
                              "). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."
                          );
                    })
                    .catch(function (e) {
                      return Ue.error(e);
                    }),
                  u.push(i),
                  (o = (function () {
                    return p(this, void 0, void 0, function () {
                      var t;
                      return h(this, function (e) {
                        switch (e.label) {
                          case 0:
                            return v()
                              ? [3, 1]
                              : (Ue.warn(
                                  $e.create("indexeddb-unavailable", {
                                    errorInfo:
                                      "IndexedDB is not available in this environment.",
                                  }).message
                                ),
                                [2, !1]);
                          case 1:
                            return e.trys.push([1, 3, , 4]), [4, g()];
                          case 2:
                            return e.sent(), [3, 4];
                          case 3:
                            return (
                              (t = e.sent()),
                              Ue.warn(
                                $e.create("indexeddb-unavailable", {
                                  errorInfo: t,
                                }).message
                              ),
                              [2, !1]
                            );
                          case 4:
                            return [2, !0];
                        }
                      });
                    });
                  })().then(function (e) {
                    if (e) return l.getId();
                  })),
                  [4, Promise.all([i, o])]
                );
              case 1:
                return (
                  (a = e.sent()),
                  (i = a[0]),
                  (o = a[1]),
                  (function () {
                    for (
                      var e = window.document.getElementsByTagName("script"),
                        t = 0,
                        n = Object.values(e);
                      t < n.length;
                      t++
                    ) {
                      var r = n[t];
                      if (r.src && r.src.includes(Ke)) return r;
                    }
                  })() ||
                    ((t = d),
                    (n = i.measurementId),
                    ((r = document.createElement("script")).src =
                      Ke + "?l=" + t + "&id=" + n),
                    (r.async = !0),
                    document.head.appendChild(r)),
                  f("js", new Date()),
                  ((a = {})[qe] = "firebase"),
                  (a.update = !0),
                  (a = a),
                  null != o && (a[He] = o),
                  f(Me.CONFIG, i.measurementId, a),
                  [2, i.measurementId]
                );
            }
            var t, n, r;
          });
        });
      }
      var it,
        ot,
        at = {},
        st = [],
        ut = {},
        ct = "dataLayer",
        lt = "gtag",
        ft = !1;
      function dt(e) {
        if (ft) throw $e.create("already-initialized");
        e.dataLayerName && (ct = e.dataLayerName),
          e.gtagName && (lt = e.gtagName);
      }
      function pt(e, t) {
        (i = []),
          c() && i.push("This is a browser extension environment."),
          l() || i.push("Cookies are not available."),
          0 < i.length &&
            ((i = i
              .map(function (e, t) {
                return "(" + (t + 1) + ") " + e;
              })
              .join(" ")),
            (i = $e.create("invalid-analytics-context", { errorInfo: i })),
            Ue.warn(i.message));
        var n,
          r,
          i,
          o = e.options.appId;
        if (!o) throw $e.create("no-app-id");
        if (!e.options.apiKey) {
          if (!e.options.measurementId) throw $e.create("no-api-key");
          Ue.warn(
            'The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ' +
              e.options.measurementId +
              ' provided in the "measurementId" field in the local Firebase config.'
          );
        }
        if (null != at[o]) throw $e.create("already-exists", { id: o });
        return (
          ft ||
            ((r = ct),
            (i = []),
            Array.isArray(window[r]) ? (i = window[r]) : (window[r] = i),
            (n = ct),
            (r = lt),
            (i = function () {
              for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
              window[n].push(arguments);
            }),
            window[r] && "function" == typeof window[r] && (i = window[r]),
            (window[r] = We(i, at, st, ut)),
            (r = { gtagCore: i, wrappedGtag: window[r] }),
            (ot = r.wrappedGtag),
            (it = r.gtagCore),
            (ft = !0)),
          (at[o] = rt(e, st, ut, t, it, ct)),
          {
            app: e,
            logEvent: function (e, t, n) {
              !(function (n, r, i, o, a) {
                return p(this, void 0, void 0, function () {
                  var t;
                  return h(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return a && a.global
                          ? (n(Me.EVENT, i, o), [2])
                          : [3, 1];
                      case 1:
                        return [4, r];
                      case 2:
                        (t = e.sent()),
                          (t = s(s({}, o), { send_to: t })),
                          n(Me.EVENT, i, t),
                          (e.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ot, at[o], e, t, n).catch(function (e) {
                return Ue.error(e);
              });
            },
            setCurrentScreen: function (e, t) {
              !(function (n, r, i, o) {
                return p(this, void 0, void 0, function () {
                  var t;
                  return h(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return o && o.global
                          ? (n(Me.SET, { screen_name: i }),
                            [2, Promise.resolve()])
                          : [3, 1];
                      case 1:
                        return [4, r];
                      case 2:
                        (t = e.sent()),
                          n(Me.CONFIG, t, { update: !0, screen_name: i }),
                          (e.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ot, at[o], e, t).catch(function (e) {
                return Ue.error(e);
              });
            },
            setUserId: function (e, t) {
              !(function (n, r, i, o) {
                return p(this, void 0, void 0, function () {
                  var t;
                  return h(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return o && o.global
                          ? (n(Me.SET, { user_id: i }), [2, Promise.resolve()])
                          : [3, 1];
                      case 1:
                        return [4, r];
                      case 2:
                        (t = e.sent()),
                          n(Me.CONFIG, t, { update: !0, user_id: i }),
                          (e.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ot, at[o], e, t).catch(function (e) {
                return Ue.error(e);
              });
            },
            setUserProperties: function (e, t) {
              !(function (a, s, u, c) {
                return p(this, void 0, void 0, function () {
                  var t, n, r, i, o;
                  return h(this, function (e) {
                    switch (e.label) {
                      case 0:
                        if (!c || !c.global) return [3, 1];
                        for (
                          t = {}, n = 0, r = Object.keys(u);
                          n < r.length;
                          n++
                        )
                          (i = r[n]), (t["user_properties." + i] = u[i]);
                        return a(Me.SET, t), [2, Promise.resolve()];
                      case 1:
                        return [4, s];
                      case 2:
                        (o = e.sent()),
                          a(Me.CONFIG, o, { update: !0, user_properties: u }),
                          (e.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ot, at[o], e, t).catch(function (e) {
                return Ue.error(e);
              });
            },
            setAnalyticsCollectionEnabled: function (e) {
              !(function (n, r) {
                return p(this, void 0, void 0, function () {
                  var t;
                  return h(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return [4, n];
                      case 1:
                        return (
                          (t = e.sent()), (window["ga-disable-" + t] = !r), [2]
                        );
                    }
                  });
                });
              })(at[o], e).catch(function (e) {
                return Ue.error(e);
              });
            },
            INTERNAL: {
              delete: function () {
                return delete at[o], Promise.resolve();
              },
            },
          }
        );
      }
      var ht,
        vt = "analytics";
      function gt() {
        return p(this, void 0, void 0, function () {
          return h(this, function (e) {
            switch (e.label) {
              case 0:
                if (c()) return [2, !1];
                if (!l()) return [2, !1];
                if (!v()) return [2, !1];
                e.label = 1;
              case 1:
                return e.trys.push([1, 3, , 4]), [4, g()];
              case 2:
                return [2, e.sent()];
              case 3:
                return e.sent(), [2, !1];
              case 4:
                return [2];
            }
          });
        });
      }
      (ht = t.default).INTERNAL.registerComponent(
        new T(
          vt,
          function (e) {
            return pt(
              e.getProvider("app").getImmediate(),
              e.getProvider("installations").getImmediate()
            );
          },
          "PUBLIC"
        ).setServiceProps({ settings: dt, EventName: Be, isSupported: gt })
      ),
        ht.INTERNAL.registerComponent(
          new T(
            "analytics-internal",
            function (e) {
              try {
                return { logEvent: e.getProvider(vt).getImmediate().logEvent };
              } catch (e) {
                throw $e.create("interop-component-reg-failed", { reason: e });
              }
            },
            "PRIVATE"
          )
        ),
        ht.registerVersion("@firebase/analytics", "0.6.17");
    }.apply(this, arguments);
  } catch (e) {
    throw (
      (console.error(e),
      new Error(
        "Cannot instantiate firebase-analytics.js - be sure to load firebase-app.js first."
      ))
    );
  }
});
!(function (t, e) {
  "object" == typeof exports && "undefined" != typeof module
    ? e(require("@firebase/app"))
    : "function" == typeof define && define.amd
    ? define(["@firebase/app"], e)
    : e(
        (t = "undefined" != typeof globalThis ? globalThis : t || self).firebase
      );
})(this, function (e) {
  "use strict";
  try {
    !function () {
      function t(t) {
        return t && "object" == typeof t && "default" in t ? t : { default: t };
      }
      var Zl = t(e);
      !function () {
        var t,
          o =
            "function" == typeof Object.defineProperties
              ? Object.defineProperty
              : function (t, e, n) {
                  t != Array.prototype &&
                    t != Object.prototype &&
                    (t[e] = n.value);
                };
        var u = (function (t) {
          t = [
            "object" == typeof window && window,
            "object" == typeof self && self,
            "object" == typeof global && global,
            t,
          ];
          for (var e = 0; e < t.length; ++e) {
            var n = t[e];
            if (n && n.Math == Math) return n;
          }
          return globalThis;
        })(this);
        function c(t) {
          var e,
            n,
            i =
              "undefined" != typeof Symbol &&
              Symbol.iterator &&
              t[Symbol.iterator];
          return i
            ? i.call(t)
            : {
                next:
                  ((e = t),
                  (n = 0),
                  function () {
                    return n < e.length
                      ? { done: !1, value: e[n++] }
                      : { done: !0 };
                  }),
              };
        }
        !(function (t, e) {
          if (e) {
            var n = u;
            t = t.split(".");
            for (var i = 0; i < t.length - 1; i++) {
              var r = t[i];
              r in n || (n[r] = {}), (n = n[r]);
            }
            (e = e((i = n[(t = t[t.length - 1])]))) != i &&
              null != e &&
              o(n, t, { configurable: !0, writable: !0, value: e });
          }
        })("Promise", function (t) {
          function a(t) {
            (this.b = 0), (this.c = void 0), (this.a = []);
            var e = this.f();
            try {
              t(e.resolve, e.reject);
            } catch (t) {
              e.reject(t);
            }
          }
          function e() {
            this.a = null;
          }
          function s(e) {
            return e instanceof a
              ? e
              : new a(function (t) {
                  t(e);
                });
          }
          if (t) return t;
          e.prototype.b = function (t) {
            var e;
            null == this.a &&
              ((this.a = []),
              (e = this).c(function () {
                e.g();
              })),
              this.a.push(t);
          };
          var n = u.setTimeout;
          (e.prototype.c = function (t) {
            n(t, 0);
          }),
            (e.prototype.g = function () {
              for (; this.a && this.a.length; ) {
                var t = this.a;
                this.a = [];
                for (var e = 0; e < t.length; ++e) {
                  var n = t[e];
                  t[e] = null;
                  try {
                    n();
                  } catch (t) {
                    this.f(t);
                  }
                }
              }
              this.a = null;
            }),
            (e.prototype.f = function (t) {
              this.c(function () {
                throw t;
              });
            }),
            (a.prototype.f = function () {
              function t(e) {
                return function (t) {
                  i || ((i = !0), e.call(n, t));
                };
              }
              var n = this,
                i = !1;
              return { resolve: t(this.m), reject: t(this.g) };
            }),
            (a.prototype.m = function (t) {
              if (t === this)
                this.g(new TypeError("A Promise cannot resolve to itself"));
              else if (t instanceof a) this.s(t);
              else {
                t: switch (typeof t) {
                  case "object":
                    var e = null != t;
                    break t;
                  case "function":
                    e = !0;
                    break t;
                  default:
                    e = !1;
                }
                e ? this.v(t) : this.h(t);
              }
            }),
            (a.prototype.v = function (t) {
              var e = void 0;
              try {
                e = t.then;
              } catch (t) {
                return void this.g(t);
              }
              "function" == typeof e ? this.u(e, t) : this.h(t);
            }),
            (a.prototype.g = function (t) {
              this.i(2, t);
            }),
            (a.prototype.h = function (t) {
              this.i(1, t);
            }),
            (a.prototype.i = function (t, e) {
              if (0 != this.b)
                throw Error(
                  "Cannot settle(" +
                    t +
                    ", " +
                    e +
                    "): Promise already settled in state" +
                    this.b
                );
              (this.b = t), (this.c = e), this.l();
            }),
            (a.prototype.l = function () {
              if (null != this.a) {
                for (var t = 0; t < this.a.length; ++t) r.b(this.a[t]);
                this.a = null;
              }
            });
          var r = new e();
          return (
            (a.prototype.s = function (t) {
              var e = this.f();
              t.Ra(e.resolve, e.reject);
            }),
            (a.prototype.u = function (t, e) {
              var n = this.f();
              try {
                t.call(e, n.resolve, n.reject);
              } catch (t) {
                n.reject(t);
              }
            }),
            (a.prototype.then = function (t, e) {
              function n(e, t) {
                return "function" == typeof e
                  ? function (t) {
                      try {
                        i(e(t));
                      } catch (t) {
                        r(t);
                      }
                    }
                  : t;
              }
              var i,
                r,
                o = new a(function (t, e) {
                  (i = t), (r = e);
                });
              return this.Ra(n(t, i), n(e, r)), o;
            }),
            (a.prototype.catch = function (t) {
              return this.then(void 0, t);
            }),
            (a.prototype.Ra = function (t, e) {
              function n() {
                switch (i.b) {
                  case 1:
                    t(i.c);
                    break;
                  case 2:
                    e(i.c);
                    break;
                  default:
                    throw Error("Unexpected state: " + i.b);
                }
              }
              var i = this;
              null == this.a ? r.b(n) : this.a.push(n);
            }),
            (a.resolve = s),
            (a.reject = function (n) {
              return new a(function (t, e) {
                e(n);
              });
            }),
            (a.race = function (r) {
              return new a(function (t, e) {
                for (var n = c(r), i = n.next(); !i.done; i = n.next())
                  s(i.value).Ra(t, e);
              });
            }),
            (a.all = function (t) {
              var e = c(t),
                o = e.next();
              return o.done
                ? s([])
                : new a(function (n, t) {
                    for (
                      var i = [], r = 0;
                      i.push(void 0),
                        r++,
                        s(o.value).Ra(
                          (function (e) {
                            return function (t) {
                              (i[e] = t), 0 == --r && n(i);
                            };
                          })(i.length - 1),
                          t
                        ),
                        !(o = e.next()).done;

                    );
                  });
            }),
            a
          );
        });
        var h = h || {},
          l = this || self,
          e = /^[\w+/_-]+[=]{0,2}$/,
          s = null;
        function f(t) {
          return (t = t.querySelector && t.querySelector("script[nonce]")) &&
            (t = t.nonce || t.getAttribute("nonce")) &&
            e.test(t)
            ? t
            : "";
        }
        function a() {}
        function d(t) {
          var e = typeof t;
          return "object" != e
            ? e
            : t
            ? Array.isArray(t)
              ? "array"
              : e
            : "null";
        }
        function p(t) {
          var e = d(t);
          return "array" == e || ("object" == e && "number" == typeof t.length);
        }
        function v(t) {
          return "function" == d(t);
        }
        function m(t) {
          var e = typeof t;
          return ("object" == e && null != t) || "function" == e;
        }
        var n = "closure_uid_" + ((1e9 * Math.random()) >>> 0),
          i = 0;
        function r(t, e, n) {
          return t.call.apply(t.bind, arguments);
        }
        function g(e, n, t) {
          if (!e) throw Error();
          if (2 < arguments.length) {
            var i = Array.prototype.slice.call(arguments, 2);
            return function () {
              var t = Array.prototype.slice.call(arguments);
              return Array.prototype.unshift.apply(t, i), e.apply(n, t);
            };
          }
          return function () {
            return e.apply(n, arguments);
          };
        }
        function b(t, e, n) {
          return (b =
            Function.prototype.bind &&
            -1 != Function.prototype.bind.toString().indexOf("native code")
              ? r
              : g).apply(null, arguments);
        }
        function y(e) {
          var n = Array.prototype.slice.call(arguments, 1);
          return function () {
            var t = n.slice();
            return t.push.apply(t, arguments), e.apply(this, t);
          };
        }
        function w(t, e) {
          function n() {}
          (n.prototype = e.prototype),
            (t.bb = e.prototype),
            (t.prototype = new n()),
            (t.prototype.constructor = t);
        }
        function I(t) {
          return t;
        }
        function T(t, e, n) {
          (this.code = k + t),
            (this.message = e || S[t] || ""),
            (this.a = n || null);
        }
        function E(t) {
          var e = t && t.code;
          return e
            ? new T(e.substring(k.length), t.message, t.serverResponse)
            : null;
        }
        w(T, Error),
          (T.prototype.w = function () {
            var t = { code: this.code, message: this.message };
            return this.a && (t.serverResponse = this.a), t;
          }),
          (T.prototype.toJSON = function () {
            return this.w();
          });
        var A,
          k = "auth/",
          S = {
            "admin-restricted-operation":
              "This operation is restricted to administrators only.",
            "argument-error": "",
            "app-not-authorized":
              "This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",
            "app-not-installed":
              "The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",
            "captcha-check-failed":
              "The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",
            "code-expired":
              "The SMS code has expired. Please re-send the verification code to try again.",
            "cordova-not-ready": "Cordova framework is not ready.",
            "cors-unsupported": "This browser is not supported.",
            "credential-already-in-use":
              "This credential is already associated with a different user account.",
            "custom-token-mismatch":
              "The custom token corresponds to a different audience.",
            "requires-recent-login":
              "This operation is sensitive and requires recent authentication. Log in again before retrying this request.",
            "dynamic-link-not-activated":
              "Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",
            "email-change-needs-verification":
              "Multi-factor users must always have a verified email.",
            "email-already-in-use":
              "The email address is already in use by another account.",
            "expired-action-code": "The action code has expired. ",
            "cancelled-popup-request":
              "This operation has been cancelled due to another conflicting popup being opened.",
            "internal-error": "An internal error has occurred.",
            "invalid-app-credential":
              "The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",
            "invalid-app-id":
              "The mobile app identifier is not registed for the current project.",
            "invalid-user-token":
              "This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",
            "invalid-auth-event": "An internal error has occurred.",
            "invalid-verification-code":
              "The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",
            "invalid-continue-uri":
              "The continue URL provided in the request is invalid.",
            "invalid-cordova-configuration":
              "The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",
            "invalid-custom-token":
              "The custom token format is incorrect. Please check the documentation.",
            "invalid-dynamic-link-domain":
              "The provided dynamic link domain is not configured or authorized for the current project.",
            "invalid-email": "The email address is badly formatted.",
            "invalid-api-key":
              "Your API key is invalid, please check you have copied it correctly.",
            "invalid-cert-hash":
              "The SHA-1 certificate hash provided is invalid.",
            "invalid-credential":
              "The supplied auth credential is malformed or has expired.",
            "invalid-message-payload":
              "The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",
            "invalid-multi-factor-session":
              "The request does not contain a valid proof of first factor successful sign-in.",
            "invalid-oauth-provider":
              "EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",
            "invalid-oauth-client-id":
              "The OAuth client ID provided is either invalid or does not match the specified API key.",
            "unauthorized-domain":
              "This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",
            "invalid-action-code":
              "The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",
            "wrong-password":
              "The password is invalid or the user does not have a password.",
            "invalid-persistence-type":
              "The specified persistence type is invalid. It can only be local, session or none.",
            "invalid-phone-number":
              "The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",
            "invalid-provider-id": "The specified provider ID is invalid.",
            "invalid-recipient-email":
              "The email corresponding to this action failed to send as the provided recipient email address is invalid.",
            "invalid-sender":
              "The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",
            "invalid-verification-id":
              "The verification ID used to create the phone auth credential is invalid.",
            "invalid-tenant-id": "The Auth instance's tenant ID is invalid.",
            "multi-factor-info-not-found":
              "The user does not have a second factor matching the identifier provided.",
            "multi-factor-auth-required":
              "Proof of ownership of a second factor is required to complete sign-in.",
            "missing-android-pkg-name":
              "An Android Package Name must be provided if the Android App is required to be installed.",
            "auth-domain-config-required":
              "Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",
            "missing-app-credential":
              "The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",
            "missing-verification-code":
              "The phone auth credential was created with an empty SMS verification code.",
            "missing-continue-uri":
              "A continue URL must be provided in the request.",
            "missing-iframe-start": "An internal error has occurred.",
            "missing-ios-bundle-id":
              "An iOS Bundle ID must be provided if an App Store ID is provided.",
            "missing-multi-factor-info":
              "No second factor identifier is provided.",
            "missing-multi-factor-session":
              "The request is missing proof of first factor successful sign-in.",
            "missing-or-invalid-nonce":
              "The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",
            "missing-phone-number":
              "To send verification codes, provide a phone number for the recipient.",
            "missing-verification-id":
              "The phone auth credential was created with an empty verification ID.",
            "app-deleted": "This instance of FirebaseApp has been deleted.",
            "account-exists-with-different-credential":
              "An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",
            "network-request-failed":
              "A network error (such as timeout, interrupted connection or unreachable host) has occurred.",
            "no-auth-event": "An internal error has occurred.",
            "no-such-provider":
              "User was not linked to an account with the given provider.",
            "null-user":
              "A null user object was provided as the argument for an operation which requires a non-null user object.",
            "operation-not-allowed":
              "The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",
            "operation-not-supported-in-this-environment":
              'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',
            "popup-blocked":
              "Unable to establish a connection with the popup. It may have been blocked by the browser.",
            "popup-closed-by-user":
              "The popup has been closed by the user before finalizing the operation.",
            "provider-already-linked":
              "User can only be linked to one identity for the given provider.",
            "quota-exceeded":
              "The project's quota for this operation has been exceeded.",
            "redirect-cancelled-by-user":
              "The redirect operation has been cancelled by the user before finalizing.",
            "redirect-operation-pending":
              "A redirect sign-in operation is already pending.",
            "rejected-credential":
              "The request contains malformed or mismatching credentials.",
            "second-factor-already-in-use":
              "The second factor is already enrolled on this account.",
            "maximum-second-factor-count-exceeded":
              "The maximum allowed number of second factors on a user has been exceeded.",
            "tenant-id-mismatch":
              "The provided tenant ID does not match the Auth instance's tenant ID",
            timeout: "The operation has timed out.",
            "user-token-expired":
              "The user's credential is no longer valid. The user must sign in again.",
            "too-many-requests":
              "We have blocked all requests from this device due to unusual activity. Try again later.",
            "unauthorized-continue-uri":
              "The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",
            "unsupported-first-factor":
              "Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",
            "unsupported-persistence-type":
              "The current environment does not support the specified persistence type.",
            "unsupported-tenant-operation":
              "This operation is not supported in a multi-tenant context.",
            "unverified-email": "The operation requires a verified email.",
            "user-cancelled":
              "The user did not grant your application the permissions it requested.",
            "user-not-found":
              "There is no user record corresponding to this identifier. The user may have been deleted.",
            "user-disabled":
              "The user account has been disabled by an administrator.",
            "user-mismatch":
              "The supplied credentials do not correspond to the previously signed in user.",
            "user-signed-out": "",
            "weak-password": "The password must be 6 characters long or more.",
            "web-storage-unsupported":
              "This browser is not supported or 3rd party cookies and data may be disabled.",
          },
          N = {
            ld: {
              Ua: "https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",
              $a: "https://staging-securetoken.sandbox.googleapis.com/v1/token",
              Xa: "https://staging-identitytoolkit.sandbox.googleapis.com/v2/",
              id: "b",
            },
            sd: {
              Ua: "https://www.googleapis.com/identitytoolkit/v3/relyingparty/",
              $a: "https://securetoken.googleapis.com/v1/token",
              Xa: "https://identitytoolkit.googleapis.com/v2/",
              id: "p",
            },
            ud: {
              Ua: "https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",
              $a: "https://staging-securetoken.sandbox.googleapis.com/v1/token",
              Xa: "https://staging-identitytoolkit.sandbox.googleapis.com/v2/",
              id: "s",
            },
            vd: {
              Ua: "https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",
              $a: "https://test-securetoken.sandbox.googleapis.com/v1/token",
              Xa: "https://test-identitytoolkit.sandbox.googleapis.com/v2/",
              id: "t",
            },
          };
        function _(t) {
          for (var e in N)
            if (N[e].id === t)
              return (
                (t = N[e]),
                {
                  firebaseEndpoint: t.Ua,
                  secureTokenEndpoint: t.$a,
                  identityPlatformEndpoint: t.Xa,
                }
              );
          return null;
        }
        function O(t) {
          if (t)
            try {
              return t.$goog_Thenable;
            } catch (t) {
              return;
            }
        }
        function C(t) {
          var e;
          Error.captureStackTrace
            ? Error.captureStackTrace(this, C)
            : (e = Error().stack) && (this.stack = e),
            t && (this.message = String(t));
        }
        function R(t, e) {
          for (
            var n = "", i = (t = t.split("%s")).length - 1, r = 0;
            r < i;
            r++
          )
            n += t[r] + (r < e.length ? e[r] : "%s");
          C.call(this, n + t[i]);
        }
        function D(t) {
          throw new R(
            "Failure" + (t ? ": " + t : ""),
            Array.prototype.slice.call(arguments, 1)
          );
        }
        function P(t, e) {
          (this.c = t), (this.f = e), (this.b = 0), (this.a = null);
        }
        function L(t, e) {
          t.f(e), t.b < 100 && (t.b++, (e.next = t.a), (t.a = e));
        }
        function x() {
          this.b = this.a = null;
        }
        (A = _("__EID__") ? "__EID__" : void 0),
          w(C, Error),
          (C.prototype.name = "CustomError"),
          w(R, C),
          (R.prototype.name = "AssertionError"),
          (P.prototype.get = function () {
            var t;
            return (
              0 < this.b
                ? (this.b--, (t = this.a), (this.a = t.next), (t.next = null))
                : (t = this.c()),
              t
            );
          });
        var M = new P(
          function () {
            return new j();
          },
          function (t) {
            t.reset();
          }
        );
        function j() {
          this.next = this.b = this.a = null;
        }
        (x.prototype.add = function (t, e) {
          var n = M.get();
          n.set(t, e), this.b ? (this.b.next = n) : (this.a = n), (this.b = n);
        }),
          (j.prototype.set = function (t, e) {
            (this.a = t), (this.b = e), (this.next = null);
          }),
          (j.prototype.reset = function () {
            this.next = this.b = this.a = null;
          });
        var U = Array.prototype.indexOf
            ? function (t, e) {
                return Array.prototype.indexOf.call(t, e, void 0);
              }
            : function (t, e) {
                if ("string" == typeof t)
                  return "string" != typeof e || 1 != e.length
                    ? -1
                    : t.indexOf(e, 0);
                for (var n = 0; n < t.length; n++)
                  if (n in t && t[n] === e) return n;
                return -1;
              },
          V = Array.prototype.forEach
            ? function (t, e, n) {
                Array.prototype.forEach.call(t, e, n);
              }
            : function (t, e, n) {
                for (
                  var i = t.length,
                    r = "string" == typeof t ? t.split("") : t,
                    o = 0;
                  o < i;
                  o++
                )
                  o in r && e.call(n, r[o], o, t);
              };
        var F = Array.prototype.filter
            ? function (t, e) {
                return Array.prototype.filter.call(t, e, void 0);
              }
            : function (t, e) {
                for (
                  var n,
                    i = t.length,
                    r = [],
                    o = 0,
                    a = "string" == typeof t ? t.split("") : t,
                    s = 0;
                  s < i;
                  s++
                )
                  s in a &&
                    ((n = a[s]), e.call(void 0, n, s, t) && (r[o++] = n));
                return r;
              },
          q = Array.prototype.map
            ? function (t, e) {
                return Array.prototype.map.call(t, e, void 0);
              }
            : function (t, e) {
                for (
                  var n = t.length,
                    i = Array(n),
                    r = "string" == typeof t ? t.split("") : t,
                    o = 0;
                  o < n;
                  o++
                )
                  o in r && (i[o] = e.call(void 0, r[o], o, t));
                return i;
              },
          H = Array.prototype.some
            ? function (t, e) {
                return Array.prototype.some.call(t, e, void 0);
              }
            : function (t, e) {
                for (
                  var n = t.length,
                    i = "string" == typeof t ? t.split("") : t,
                    r = 0;
                  r < n;
                  r++
                )
                  if (r in i && e.call(void 0, i[r], r, t)) return !0;
                return !1;
              };
        function K(t, e) {
          return 0 <= U(t, e);
        }
        function G(t, e) {
          var n;
          return (
            (n = 0 <= (e = U(t, e))) && Array.prototype.splice.call(t, e, 1), n
          );
        }
        function B(n, i) {
          !(function (t, e) {
            for (
              var n = "string" == typeof t ? t.split("") : t, i = t.length - 1;
              0 <= i;
              --i
            )
              i in n && e.call(void 0, n[i], i, t);
          })(n, function (t, e) {
            i.call(void 0, t, e, n) &&
              1 == Array.prototype.splice.call(n, e, 1).length &&
              0;
          });
        }
        function W() {
          return Array.prototype.concat.apply([], arguments);
        }
        function X(t) {
          var e = t.length;
          if (0 < e) {
            for (var n = Array(e), i = 0; i < e; i++) n[i] = t[i];
            return n;
          }
          return [];
        }
        var J,
          Y = String.prototype.trim
            ? function (t) {
                return t.trim();
              }
            : function (t) {
                return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
              },
          z = /&/g,
          $ = /</g,
          Z = />/g,
          Q = /"/g,
          tt = /'/g,
          et = /\x00/g,
          nt = /[\x00&<>"']/;
        function it(t, e) {
          return -1 != t.indexOf(e);
        }
        function rt(t, e) {
          return t < e ? -1 : e < t ? 1 : 0;
        }
        t: {
          var ot = l.navigator;
          if (ot) {
            ot = ot.userAgent;
            if (ot) {
              J = ot;
              break t;
            }
          }
          J = "";
        }
        function at(t) {
          return it(J, t);
        }
        function st(t, e) {
          for (var n in t) e.call(void 0, t[n], n, t);
        }
        function ut(t) {
          for (var e in t) return;
          return 1;
        }
        function ct(t) {
          var e,
            n = {};
          for (e in t) n[e] = t[e];
          return n;
        }
        var ht =
          "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
            " "
          );
        function lt(t) {
          for (var e, n, i = 1; i < arguments.length; i++) {
            for (e in (n = arguments[i])) t[e] = n[e];
            for (var r = 0; r < ht.length; r++)
              (e = ht[r]),
                Object.prototype.hasOwnProperty.call(n, e) && (t[e] = n[e]);
          }
        }
        function ft(t, e) {
          t: {
            try {
              var n,
                i = t && t.ownerDocument;
              if (
                (n = (n = i && (i.defaultView || i.parentWindow)) || l)
                  .Element &&
                n.Location
              ) {
                var r = n;
                break t;
              }
            } catch (t) {}
            r = null;
          }
          if (
            r &&
            void 0 !== r[e] &&
            (!t ||
              (!(t instanceof r[e]) &&
                (t instanceof r.Location || t instanceof r.Element)))
          ) {
            if (m(t))
              try {
                var o =
                  t.constructor.displayName ||
                  t.constructor.name ||
                  Object.prototype.toString.call(t);
              } catch (t) {
                o = "<object could not be stringified>";
              }
            else
              o = void 0 === t ? "undefined" : null === t ? "null" : typeof t;
            D(
              "Argument is not a %s (or a non-Element, non-Location mock); got: %s",
              e,
              o
            );
          }
        }
        function dt(t, e) {
          (this.a = (t === gt && e) || ""), (this.b = mt);
        }
        function pt(t) {
          return t instanceof dt && t.constructor === dt && t.b === mt
            ? t.a
            : (D("expected object of type Const, got '" + t + "'"),
              "type_error:Const");
        }
        (dt.prototype.ta = !0),
          (dt.prototype.sa = function () {
            return this.a;
          }),
          (dt.prototype.toString = function () {
            return "Const{" + this.a + "}";
          });
        var vt,
          mt = {},
          gt = {};
        function bt() {
          if (void 0 === vt) {
            var t = null,
              e = l.trustedTypes;
            if (e && e.createPolicy) {
              try {
                t = e.createPolicy("goog#html", {
                  createHTML: I,
                  createScript: I,
                  createScriptURL: I,
                });
              } catch (t) {
                l.console && l.console.error(t.message);
              }
              vt = t;
            } else vt = t;
          }
          return vt;
        }
        function yt(t, e) {
          this.a = e === At ? t : "";
        }
        function wt(t) {
          return t instanceof yt && t.constructor === yt
            ? t.a
            : (D(
                "expected object of type TrustedResourceUrl, got '" +
                  t +
                  "' of type " +
                  d(t)
              ),
              "type_error:TrustedResourceUrl");
        }
        function It(t, n) {
          var e,
            i = pt(t);
          if (!Et.test(i))
            throw Error("Invalid TrustedResourceUrl format: " + i);
          return (
            (t = i.replace(Tt, function (t, e) {
              if (!Object.prototype.hasOwnProperty.call(n, e))
                throw Error(
                  'Found marker, "' +
                    e +
                    '", in format string, "' +
                    i +
                    '", but no valid label mapping found in args: ' +
                    JSON.stringify(n)
                );
              return (t = n[e]) instanceof dt
                ? pt(t)
                : encodeURIComponent(String(t));
            })),
            (e = t),
            (t = bt()),
            new yt((e = t ? t.createScriptURL(e) : e), At)
          );
        }
        (yt.prototype.ta = !0),
          (yt.prototype.sa = function () {
            return this.a.toString();
          }),
          (yt.prototype.toString = function () {
            return "TrustedResourceUrl{" + this.a + "}";
          });
        var Tt = /%{(\w+)}/g,
          Et =
            /^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,
          At = {};
        function kt(t, e) {
          this.a = e === Dt ? t : "";
        }
        function St(t) {
          return t instanceof kt && t.constructor === kt
            ? t.a
            : (D(
                "expected object of type SafeUrl, got '" +
                  t +
                  "' of type " +
                  d(t)
              ),
              "type_error:SafeUrl");
        }
        (kt.prototype.ta = !0),
          (kt.prototype.sa = function () {
            return this.a.toString();
          }),
          (kt.prototype.toString = function () {
            return "SafeUrl{" + this.a + "}";
          });
        var Nt =
            /^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,
          _t = /^data:(.*);base64,[a-z0-9+\/]+=*$/i,
          Ot = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;
        function Ct(t) {
          return t instanceof kt
            ? t
            : ((t = "object" == typeof t && t.ta ? t.sa() : String(t)),
              (t =
                Ot.test(t) ||
                ((e = (t = (t = String(t)).replace(/(%0A|%0D)/g, "")).match(
                  _t
                )) &&
                  Nt.test(e[1]))
                  ? new kt(t, Dt)
                  : null));
          var e;
        }
        function Rt(t) {
          return t instanceof kt
            ? t
            : ((t = "object" == typeof t && t.ta ? t.sa() : String(t)),
              new kt((t = !Ot.test(t) ? "about:invalid#zClosurez" : t), Dt));
        }
        var Dt = {},
          Pt = new kt("about:invalid#zClosurez", Dt);
        function Lt(t, e, n) {
          this.a = n === xt ? t : "";
        }
        (Lt.prototype.ta = !0),
          (Lt.prototype.sa = function () {
            return this.a.toString();
          }),
          (Lt.prototype.toString = function () {
            return "SafeHtml{" + this.a + "}";
          });
        var xt = {};
        function Mt(t, e, n, i) {
          return (
            (t = t instanceof kt ? t : Rt(t)),
            (e = e || l),
            (n = n instanceof dt ? pt(n) : n || ""),
            e.open(St(t), n, i, void 0)
          );
        }
        function jt(t) {
          for (
            var e = t.split("%s"),
              n = "",
              i = Array.prototype.slice.call(arguments, 1);
            i.length && 1 < e.length;

          )
            n += e.shift() + i.shift();
          return n + e.join("%s");
        }
        function Ut(t) {
          return (
            nt.test(t) &&
              -1 !=
                (t =
                  -1 !=
                  (t =
                    -1 !=
                    (t =
                      -1 !=
                      (t =
                        -1 !=
                        (t =
                          -1 != t.indexOf("&")
                            ? t.replace(z, "&amp;")
                            : t).indexOf("<")
                          ? t.replace($, "&lt;")
                          : t).indexOf(">")
                        ? t.replace(Z, "&gt;")
                        : t).indexOf('"')
                      ? t.replace(Q, "&quot;")
                      : t).indexOf("'")
                    ? t.replace(tt, "&#39;")
                    : t).indexOf("\0") &&
              (t = t.replace(et, "&#0;")),
            t
          );
        }
        function Vt(t) {
          return Vt[" "](t), t;
        }
        Vt[" "] = a;
        var Ft,
          qt = at("Opera"),
          Ht = at("Trident") || at("MSIE"),
          Kt = at("Edge"),
          Gt = Kt || Ht,
          Bt =
            at("Gecko") &&
            !(it(J.toLowerCase(), "webkit") && !at("Edge")) &&
            !(at("Trident") || at("MSIE")) &&
            !at("Edge"),
          Wt = it(J.toLowerCase(), "webkit") && !at("Edge");
        function Xt() {
          var t = l.document;
          return t ? t.documentMode : void 0;
        }
        t: {
          var Jt = "",
            Yt =
              ((Yt = J),
              Bt
                ? /rv:([^\);]+)(\)|;)/.exec(Yt)
                : Kt
                ? /Edge\/([\d\.]+)/.exec(Yt)
                : Ht
                ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Yt)
                : Wt
                ? /WebKit\/(\S+)/.exec(Yt)
                : qt
                ? /(?:Version)[ \/]?(\S+)/.exec(Yt)
                : void 0);
          if ((Yt && (Jt = Yt ? Yt[1] : ""), Ht)) {
            Yt = Xt();
            if (null != Yt && Yt > parseFloat(Jt)) {
              Ft = String(Yt);
              break t;
            }
          }
          Ft = Jt;
        }
        var zt = {};
        function $t(s) {
          return (
            (t = s),
            (e = function () {
              for (
                var t = 0,
                  e = Y(String(Ft)).split("."),
                  n = Y(String(s)).split("."),
                  i = Math.max(e.length, n.length),
                  r = 0;
                0 == t && r < i;
                r++
              )
                for (
                  var o = e[r] || "", a = n[r] || "";
                  (o = /(\d*)(\D*)(.*)/.exec(o) || ["", "", "", ""]),
                    (a = /(\d*)(\D*)(.*)/.exec(a) || ["", "", "", ""]),
                    (0 != o[0].length || 0 != a[0].length) &&
                      ((t =
                        rt(
                          0 == o[1].length ? 0 : parseInt(o[1], 10),
                          0 == a[1].length ? 0 : parseInt(a[1], 10)
                        ) ||
                        rt(0 == o[2].length, 0 == a[2].length) ||
                        rt(o[2], a[2])),
                      (o = o[3]),
                      (a = a[3]),
                      0 == t);

                );
              return 0 <= t;
            }),
            (n = zt),
            Object.prototype.hasOwnProperty.call(n, t) ? n[t] : (n[t] = e(t))
          );
          var t, e, n;
        }
        var Zt = (l.document && Ht && (Xt() || parseInt(Ft, 10))) || void 0;
        try {
          new self.OffscreenCanvas(0, 0).getContext("2d");
        } catch (t) {}
        var Qt = !Ht || 9 <= Number(Zt);
        function te(t) {
          var e = document;
          return "string" == typeof t ? e.getElementById(t) : t;
        }
        function ee(n, t) {
          st(t, function (t, e) {
            t && "object" == typeof t && t.ta && (t = t.sa()),
              "style" == e
                ? (n.style.cssText = t)
                : "class" == e
                ? (n.className = t)
                : "for" == e
                ? (n.htmlFor = t)
                : re.hasOwnProperty(e)
                ? n.setAttribute(re[e], t)
                : 0 == e.lastIndexOf("aria-", 0) ||
                  0 == e.lastIndexOf("data-", 0)
                ? n.setAttribute(e, t)
                : (n[e] = t);
          });
        }
        var ne,
          ie,
          re = {
            cellpadding: "cellPadding",
            cellspacing: "cellSpacing",
            colspan: "colSpan",
            frameborder: "frameBorder",
            height: "height",
            maxlength: "maxLength",
            nonce: "nonce",
            role: "role",
            rowspan: "rowSpan",
            type: "type",
            usemap: "useMap",
            valign: "vAlign",
            width: "width",
          };
        function oe() {
          var t,
            e = arguments,
            n = document,
            i = String(e[0]),
            r = e[1];
          return (
            !Qt &&
              r &&
              (r.name || r.type) &&
              ((i = ["<", i]),
              r.name && i.push(' name="', Ut(r.name), '"'),
              r.type &&
                (i.push(' type="', Ut(r.type), '"'),
                lt((t = {}), r),
                delete t.type,
                (r = t)),
              i.push(">"),
              (i = i.join(""))),
            (i = ae(n, i)),
            r &&
              ("string" == typeof r
                ? (i.className = r)
                : Array.isArray(r)
                ? (i.className = r.join(" "))
                : ee(i, r)),
            2 < e.length &&
              (function (e, n, t) {
                function i(t) {
                  t &&
                    n.appendChild(
                      "string" == typeof t ? e.createTextNode(t) : t
                    );
                }
                for (var r = 2; r < t.length; r++) {
                  var o = t[r];
                  if (!p(o) || (m(o) && 0 < o.nodeType)) i(o);
                  else {
                    t: {
                      if (o && "number" == typeof o.length) {
                        if (m(o)) {
                          var a =
                            "function" == typeof o.item ||
                            "string" == typeof o.item;
                          break t;
                        }
                        if (v(o)) {
                          a = "function" == typeof o.item;
                          break t;
                        }
                      }
                      a = !1;
                    }
                    V(a ? X(o) : o, i);
                  }
                }
              })(n, i, e),
            i
          );
        }
        function ae(t, e) {
          return (
            (e = String(e)),
            "application/xhtml+xml" === t.contentType && (e = e.toLowerCase()),
            t.createElement(e)
          );
        }
        function se(t) {
          l.setTimeout(function () {
            throw t;
          }, 0);
        }
        function ue(t, e) {
          ie ||
            (function () {
              {
                var t;
                ie =
                  l.Promise && l.Promise.resolve
                    ? ((t = l.Promise.resolve(void 0)),
                      function () {
                        t.then(le);
                      })
                    : function () {
                        var t = le;
                        !v(l.setImmediate) ||
                        (l.Window &&
                          l.Window.prototype &&
                          !at("Edge") &&
                          l.Window.prototype.setImmediate == l.setImmediate)
                          ? (ne =
                              ne ||
                              (function () {
                                var t = l.MessageChannel;
                                if (
                                  void 0 ===
                                    (t =
                                      void 0 === t &&
                                      "undefined" != typeof window &&
                                      window.postMessage &&
                                      window.addEventListener &&
                                      !at("Presto")
                                        ? function () {
                                            var t = ae(document, "IFRAME");
                                            (t.style.display = "none"),
                                              document.documentElement.appendChild(
                                                t
                                              );
                                            var e = t.contentWindow;
                                            (t = e.document).open(), t.close();
                                            var n =
                                                "callImmediate" + Math.random(),
                                              i =
                                                "file:" == e.location.protocol
                                                  ? "*"
                                                  : e.location.protocol +
                                                    "//" +
                                                    e.location.host;
                                            (t = b(function (t) {
                                              ("*" != i && t.origin != i) ||
                                                t.data != n ||
                                                this.port1.onmessage();
                                            }, this)),
                                              e.addEventListener(
                                                "message",
                                                t,
                                                !1
                                              ),
                                              (this.port1 = {}),
                                              (this.port2 = {
                                                postMessage: function () {
                                                  e.postMessage(n, i);
                                                },
                                              });
                                          }
                                        : t) ||
                                  at("Trident") ||
                                  at("MSIE")
                                )
                                  return function (t) {
                                    l.setTimeout(t, 0);
                                  };
                                var e = new t(),
                                  n = {},
                                  i = n;
                                return (
                                  (e.port1.onmessage = function () {
                                    var t;
                                    void 0 !== n.next &&
                                      ((t = (n = n.next).Hb),
                                      (n.Hb = null),
                                      t());
                                  }),
                                  function (t) {
                                    (i.next = { Hb: t }),
                                      (i = i.next),
                                      e.port2.postMessage(0);
                                  }
                                );
                              })())(t)
                          : l.setImmediate(t);
                      };
              }
            })(),
            ce || (ie(), (ce = !0)),
            he.add(t, e);
        }
        var ce = !1,
          he = new x();
        function le() {
          for (
            var t, e;
            (e = t = void 0),
              (e = null),
              (t = he).a &&
                ((e = t.a),
                (t.a = t.a.next),
                t.a || (t.b = null),
                (e.next = null)),
              (e = e);

          ) {
            try {
              e.a.call(e.b);
            } catch (t) {
              se(t);
            }
            L(M, e);
          }
          ce = !1;
        }
        function fe(t, e) {
          if (
            ((this.a = de),
            (this.i = void 0),
            (this.f = this.b = this.c = null),
            (this.g = this.h = !1),
            t != a)
          )
            try {
              var n = this;
              t.call(
                e,
                function (t) {
                  ke(n, pe, t);
                },
                function (t) {
                  if (!(t instanceof De))
                    try {
                      if (t instanceof Error) throw t;
                      throw Error("Promise rejected.");
                    } catch (t) {}
                  ke(n, ve, t);
                }
              );
            } catch (t) {
              ke(this, ve, t);
            }
        }
        var de = 0,
          pe = 2,
          ve = 3;
        function me() {
          (this.next = this.f = this.b = this.g = this.a = null), (this.c = !1);
        }
        me.prototype.reset = function () {
          (this.f = this.b = this.g = this.a = null), (this.c = !1);
        };
        var ge = new P(
          function () {
            return new me();
          },
          function (t) {
            t.reset();
          }
        );
        function be(t, e, n) {
          var i = ge.get();
          return (i.g = t), (i.b = e), (i.f = n), i;
        }
        function ye(t) {
          if (t instanceof fe) return t;
          var e = new fe(a);
          return ke(e, pe, t), e;
        }
        function we(n) {
          return new fe(function (t, e) {
            e(n);
          });
        }
        function Ie(t, e, n) {
          Se(t, e, n, null) || ue(y(e, t));
        }
        function Te(n) {
          return new fe(function (i) {
            var r = n.length,
              o = [];
            if (r)
              for (
                var t = function (t, e, n) {
                    r--,
                      (o[t] = e ? { Qb: !0, value: n } : { Qb: !1, reason: n }),
                      0 == r && i(o);
                  },
                  e = 0;
                e < n.length;
                e++
              )
                Ie(n[e], y(t, e, !0), y(t, e, !1));
            else i(o);
          });
        }
        function Ee(t, e) {
          t.b || (t.a != pe && t.a != ve) || Ne(t),
            t.f ? (t.f.next = e) : (t.b = e),
            (t.f = e);
        }
        function Ae(t, r, o, a) {
          var e = be(null, null, null);
          return (
            (e.a = new fe(function (n, i) {
              (e.g = r
                ? function (t) {
                    try {
                      var e = r.call(a, t);
                      n(e);
                    } catch (t) {
                      i(t);
                    }
                  }
                : n),
                (e.b = o
                  ? function (t) {
                      try {
                        var e = o.call(a, t);
                        void 0 === e && t instanceof De ? i(t) : n(e);
                      } catch (t) {
                        i(t);
                      }
                    }
                  : i);
            })),
            Ee((e.a.c = t), e),
            e.a
          );
        }
        function ke(t, e, n) {
          var i, r;
          t.a == de &&
            (t === n &&
              ((e = ve),
              (n = new TypeError("Promise cannot resolve to itself"))),
            (t.a = 1),
            Se(n, t.$c, t.ad, t) ||
              ((t.i = n),
              (t.a = e),
              (t.c = null),
              Ne(t),
              e != ve ||
                n instanceof De ||
                ((r = n),
                ((i = t).g = !0),
                ue(function () {
                  i.g && Re.call(null, r);
                }))));
        }
        function Se(t, e, n, i) {
          if (t instanceof fe) return Ee(t, be(e || a, n || null, i)), 1;
          if (O(t)) return t.then(e, n, i), 1;
          if (m(t))
            try {
              var r = t.then;
              if (v(r))
                return (
                  (function (t, e, n, i, r) {
                    function o(t) {
                      a || ((a = !0), i.call(r, t));
                    }
                    var a = !1;
                    try {
                      e.call(
                        t,
                        function (t) {
                          a || ((a = !0), n.call(r, t));
                        },
                        o
                      );
                    } catch (t) {
                      o(t);
                    }
                  })(t, r, e, n, i),
                  1
                );
            } catch (t) {
              return n.call(i, t), 1;
            }
        }
        function Ne(t) {
          t.h || ((t.h = !0), ue(t.gc, t));
        }
        function _e(t) {
          var e = null;
          return (
            t.b && ((e = t.b), (t.b = e.next), (e.next = null)),
            t.b || (t.f = null),
            e
          );
        }
        function Oe(t, e, n, i) {
          if (n == ve && e.b && !e.c) for (; t && t.g; t = t.c) t.g = !1;
          if (e.a) (e.a.c = null), Ce(e, n, i);
          else
            try {
              e.c ? e.g.call(e.f) : Ce(e, n, i);
            } catch (t) {
              Re.call(null, t);
            }
          L(ge, e);
        }
        function Ce(t, e, n) {
          e == pe ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);
        }
        (fe.prototype.then = function (t, e, n) {
          return Ae(this, v(t) ? t : null, v(e) ? e : null, n);
        }),
          (fe.prototype.$goog_Thenable = !0),
          ((t = fe.prototype).oa = function (t, e) {
            return ((t = be(t, t, e)).c = !0), Ee(this, t), this;
          }),
          (t.o = function (t, e) {
            return Ae(this, null, t, e);
          }),
          (t.cancel = function (t) {
            var e;
            this.a == de &&
              ((e = new De(t)),
              ue(function () {
                !(function t(e, n) {
                  if (e.a == de)
                    if (e.c) {
                      var i = e.c;
                      if (i.b) {
                        for (
                          var r = 0, o = null, a = null, s = i.b;
                          s &&
                          (s.c || (r++, !((o = s.a == e ? s : o) && 1 < r)));
                          s = s.next
                        )
                          o || (a = s);
                        o &&
                          (i.a == de && 1 == r
                            ? t(i, n)
                            : (a
                                ? ((r = a).next == i.f && (i.f = r),
                                  (r.next = r.next.next))
                                : _e(i),
                              Oe(i, o, ve, n)));
                      }
                      e.c = null;
                    } else ke(e, ve, n);
                })(this, e);
              }, this));
          }),
          (t.$c = function (t) {
            (this.a = de), ke(this, pe, t);
          }),
          (t.ad = function (t) {
            (this.a = de), ke(this, ve, t);
          }),
          (t.gc = function () {
            for (var t; (t = _e(this)); ) Oe(this, t, this.a, this.i);
            this.h = !1;
          });
        var Re = se;
        function De(t) {
          C.call(this, t);
        }
        function Pe() {
          (this.ya = this.ya), (this.pa = this.pa);
        }
        w(De, C);
        var Le = 0,
          xe = {};
        function Me(t) {
          t.ya ||
            ((t.ya = !0), t.Da(), 0 == Le) ||
            ((t = t),
            (t =
              (Object.prototype.hasOwnProperty.call(t, n) && t[n]) ||
              (t[n] = ++i)),
            delete xe[t]);
        }
        (Pe.prototype.ya = !(De.prototype.name = "cancel")),
          (Pe.prototype.Da = function () {
            if (this.pa) for (; this.pa.length; ) this.pa.shift()();
          });
        var je =
            Object.freeze ||
            function (t) {
              return t;
            },
          Ue = !Ht || 9 <= Number(Zt),
          Ve = Ht && !$t("9"),
          Fe = (function () {
            if (!l.addEventListener || !Object.defineProperty) return !1;
            var t = !1,
              e = Object.defineProperty({}, "passive", {
                get: function () {
                  t = !0;
                },
              });
            try {
              l.addEventListener("test", a, e),
                l.removeEventListener("test", a, e);
            } catch (t) {}
            return t;
          })();
        function qe(t, e) {
          (this.type = t),
            (this.b = this.target = e),
            (this.defaultPrevented = !1);
        }
        function He(t, e) {
          if (
            (qe.call(this, t ? t.type : ""),
            (this.relatedTarget = this.b = this.target = null),
            (this.button =
              this.screenY =
              this.screenX =
              this.clientY =
              this.clientX =
                0),
            (this.key = ""),
            (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
            (this.pointerId = 0),
            (this.pointerType = ""),
            (this.a = null),
            t)
          ) {
            var n = (this.type = t.type),
              i =
                t.changedTouches && t.changedTouches.length
                  ? t.changedTouches[0]
                  : null;
            if (
              ((this.target = t.target || t.srcElement),
              (this.b = e),
              (e = t.relatedTarget))
            ) {
              if (Bt) {
                t: {
                  try {
                    Vt(e.nodeName);
                    var r = !0;
                    break t;
                  } catch (t) {}
                  r = !1;
                }
                r || (e = null);
              }
            } else
              "mouseover" == n
                ? (e = t.fromElement)
                : "mouseout" == n && (e = t.toElement);
            (this.relatedTarget = e),
              i
                ? ((this.clientX = void 0 !== i.clientX ? i.clientX : i.pageX),
                  (this.clientY = void 0 !== i.clientY ? i.clientY : i.pageY),
                  (this.screenX = i.screenX || 0),
                  (this.screenY = i.screenY || 0))
                : ((this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
                  (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
                  (this.screenX = t.screenX || 0),
                  (this.screenY = t.screenY || 0)),
              (this.button = t.button),
              (this.key = t.key || ""),
              (this.ctrlKey = t.ctrlKey),
              (this.altKey = t.altKey),
              (this.shiftKey = t.shiftKey),
              (this.metaKey = t.metaKey),
              (this.pointerId = t.pointerId || 0),
              (this.pointerType =
                "string" == typeof t.pointerType
                  ? t.pointerType
                  : Ke[t.pointerType] || ""),
              (this.a = t).defaultPrevented && this.preventDefault();
          }
        }
        (qe.prototype.preventDefault = function () {
          this.defaultPrevented = !0;
        }),
          w(He, qe);
        var Ke = je({ 2: "touch", 3: "pen", 4: "mouse" });
        (He.prototype.preventDefault = function () {
          He.bb.preventDefault.call(this);
          var t = this.a;
          if (t.preventDefault) t.preventDefault();
          else if (((t.returnValue = !1), Ve))
            try {
              (t.ctrlKey || (112 <= t.keyCode && t.keyCode <= 123)) &&
                (t.keyCode = -1);
            } catch (t) {}
        }),
          (He.prototype.g = function () {
            return this.a;
          });
        var Ge = "closure_listenable_" + ((1e6 * Math.random()) | 0),
          Be = 0;
        function We(t, e, n, i, r) {
          (this.listener = t),
            (this.proxy = null),
            (this.src = e),
            (this.type = n),
            (this.capture = !!i),
            (this.Wa = r),
            (this.key = ++Be),
            (this.wa = this.Qa = !1);
        }
        function Xe(t) {
          (t.wa = !0),
            (t.listener = null),
            (t.proxy = null),
            (t.src = null),
            (t.Wa = null);
        }
        function Je(t) {
          (this.src = t), (this.a = {}), (this.b = 0);
        }
        function Ye(t, e) {
          var n = e.type;
          n in t.a &&
            G(t.a[n], e) &&
            (Xe(e), 0 == t.a[n].length && (delete t.a[n], t.b--));
        }
        function ze(t, e, n, i) {
          for (var r = 0; r < t.length; ++r) {
            var o = t[r];
            if (!o.wa && o.listener == e && o.capture == !!n && o.Wa == i)
              return r;
          }
          return -1;
        }
        Je.prototype.add = function (t, e, n, i, r) {
          var o = t.toString();
          (t = this.a[o]) || ((t = this.a[o] = []), this.b++);
          var a = ze(t, e, i, r);
          return (
            -1 < a
              ? ((e = t[a]), n || (e.Qa = !1))
              : (((e = new We(e, this.src, o, !!i, r)).Qa = n), t.push(e)),
            e
          );
        };
        var $e = "closure_lm_" + ((1e6 * Math.random()) | 0),
          Ze = {};
        function Qe(t, e, n, i, r) {
          if (i && i.once) en(t, e, n, i, r);
          else if (Array.isArray(e))
            for (var o = 0; o < e.length; o++) Qe(t, e[o], n, i, r);
          else
            (n = ln(n)),
              t && t[Ge]
                ? dn(t, e, n, m(i) ? !!i.capture : !!i, r)
                : tn(t, e, n, !1, i, r);
        }
        function tn(t, e, n, i, r, o) {
          if (!e) throw Error("Invalid event type");
          var a,
            s,
            u = m(r) ? !!r.capture : !!r,
            c = cn(t);
          if ((c || (t[$e] = c = new Je(t)), !(n = c.add(e, n, i, u, o)).proxy))
            if (
              ((a = un),
              (s = Ue
                ? function (t) {
                    return a.call(s.src, s.listener, t);
                  }
                : function (t) {
                    if (!(t = a.call(s.src, s.listener, t))) return t;
                  }),
              ((n.proxy = i = s).src = t),
              (i.listener = n),
              t.addEventListener)
            )
              void 0 === (r = !Fe ? u : r) && (r = !1),
                t.addEventListener(e.toString(), i, r);
            else if (t.attachEvent) t.attachEvent(on(e.toString()), i);
            else {
              if (!t.addListener || !t.removeListener)
                throw Error(
                  "addEventListener and attachEvent are unavailable."
                );
              t.addListener(i);
            }
        }
        function en(t, e, n, i, r) {
          if (Array.isArray(e))
            for (var o = 0; o < e.length; o++) en(t, e[o], n, i, r);
          else
            (n = ln(n)),
              t && t[Ge]
                ? pn(t, e, n, m(i) ? !!i.capture : !!i, r)
                : tn(t, e, n, !0, i, r);
        }
        function nn(t, e, n, i, r) {
          if (Array.isArray(e))
            for (var o = 0; o < e.length; o++) nn(t, e[o], n, i, r);
          else
            (i = m(i) ? !!i.capture : !!i),
              (n = ln(n)),
              t && t[Ge]
                ? ((t = t.v),
                  (e = String(e).toString()) in t.a &&
                    -1 < (n = ze((o = t.a[e]), n, i, r)) &&
                    (Xe(o[n]),
                    Array.prototype.splice.call(o, n, 1),
                    0 == o.length && (delete t.a[e], t.b--)))
                : (t = t && cn(t)) &&
                  ((e = t.a[e.toString()]),
                  (n = (t = -1) < (t = e ? ze(e, n, i, r) : t) ? e[t] : null) &&
                    rn(n));
        }
        function rn(t) {
          var e, n, i;
          "number" != typeof t &&
            t &&
            !t.wa &&
            ((e = t.src) && e[Ge]
              ? Ye(e.v, t)
              : ((n = t.type),
                (i = t.proxy),
                e.removeEventListener
                  ? e.removeEventListener(n, i, t.capture)
                  : e.detachEvent
                  ? e.detachEvent(on(n), i)
                  : e.addListener && e.removeListener && e.removeListener(i),
                (n = cn(e))
                  ? (Ye(n, t), 0 == n.b && ((n.src = null), (e[$e] = null)))
                  : Xe(t)));
        }
        function on(t) {
          return t in Ze ? Ze[t] : (Ze[t] = "on" + t);
        }
        function an(t, e, n, i) {
          var r = !0;
          if ((t = cn(t)) && (e = t.a[e.toString()]))
            for (e = e.concat(), t = 0; t < e.length; t++) {
              var o = e[t];
              o &&
                o.capture == n &&
                !o.wa &&
                ((o = sn(o, i)), (r = r && !1 !== o));
            }
          return r;
        }
        function sn(t, e) {
          var n = t.listener,
            i = t.Wa || t.src;
          return t.Qa && rn(t), n.call(i, e);
        }
        function un(t, e) {
          if (t.wa) return !0;
          if (Ue) return sn(t, new He(e, this));
          if (!e)
            t: {
              e = ["window", "event"];
              for (var n = l, i = 0; i < e.length; i++)
                if (null == (n = n[e[i]])) {
                  e = null;
                  break t;
                }
              e = n;
            }
          if (
            ((e = new He((i = e), this)),
            (n = !0),
            !(i.keyCode < 0 || null != i.returnValue))
          ) {
            t: {
              var r = !1;
              if (0 == i.keyCode)
                try {
                  i.keyCode = -1;
                  break t;
                } catch (t) {
                  r = !0;
                }
              (!r && null != i.returnValue) || (i.returnValue = !0);
            }
            for (i = [], r = e.b; r; r = r.parentNode) i.push(r);
            for (t = t.type, r = i.length - 1; 0 <= r; r--) {
              e.b = i[r];
              var o = an(i[r], t, !0, e),
                n = n && o;
            }
            for (r = 0; r < i.length; r++)
              (e.b = i[r]), (o = an(i[r], t, !1, e)), (n = n && o);
          }
          return n;
        }
        function cn(t) {
          return (t = t[$e]) instanceof Je ? t : null;
        }
        var hn = "__closure_events_fn_" + ((1e9 * Math.random()) >>> 0);
        function ln(e) {
          return v(e)
            ? e
            : (e[hn] ||
                (e[hn] = function (t) {
                  return e.handleEvent(t);
                }),
              e[hn]);
        }
        function fn() {
          Pe.call(this), (this.v = new Je(this)), ((this.bc = this).hb = null);
        }
        function dn(t, e, n, i, r) {
          t.v.add(String(e), n, !1, i, r);
        }
        function pn(t, e, n, i, r) {
          t.v.add(String(e), n, !0, i, r);
        }
        function vn(t, e, n, i) {
          if (!(e = t.v.a[String(e)])) return !0;
          e = e.concat();
          for (var r = !0, o = 0; o < e.length; ++o) {
            var a,
              s,
              u = e[o];
            u &&
              !u.wa &&
              u.capture == n &&
              ((a = u.listener),
              (s = u.Wa || u.src),
              u.Qa && Ye(t.v, u),
              (r = !1 !== a.call(s, i) && r));
          }
          return r && !i.defaultPrevented;
        }
        function mn(t, e, n) {
          if (v(t)) n && (t = b(t, n));
          else {
            if (!t || "function" != typeof t.handleEvent)
              throw Error("Invalid listener argument");
            t = b(t.handleEvent, t);
          }
          return 2147483647 < Number(e) ? -1 : l.setTimeout(t, e || 0);
        }
        function gn(n) {
          var i = null;
          return new fe(function (t, e) {
            -1 ==
              (i = mn(function () {
                t(void 0);
              }, n)) && e(Error("Failed to schedule timer."));
          }).o(function (t) {
            throw (l.clearTimeout(i), t);
          });
        }
        function bn(t) {
          if (t.X && "function" == typeof t.X) return t.X();
          if ("string" == typeof t) return t.split("");
          if (p(t)) {
            for (var e = [], n = t.length, i = 0; i < n; i++) e.push(t[i]);
            return e;
          }
          for (i in ((e = []), (n = 0), t)) e[n++] = t[i];
          return e;
        }
        function yn(t) {
          if (t.Y && "function" == typeof t.Y) return t.Y();
          if (!t.X || "function" != typeof t.X) {
            if (p(t) || "string" == typeof t) {
              var e = [];
              t = t.length;
              for (var n = 0; n < t; n++) e.push(n);
              return e;
            }
            for (var i in ((e = []), (n = 0), t)) e[n++] = i;
            return e;
          }
        }
        function wn(t, e) {
          (this.b = {}), (this.a = []), (this.c = 0);
          var n = arguments.length;
          if (1 < n) {
            if (n % 2) throw Error("Uneven number of arguments");
            for (var i = 0; i < n; i += 2)
              this.set(arguments[i], arguments[i + 1]);
          } else if (t)
            if (t instanceof wn)
              for (n = t.Y(), i = 0; i < n.length; i++)
                this.set(n[i], t.get(n[i]));
            else for (i in t) this.set(i, t[i]);
        }
        function In(t) {
          if (t.c != t.a.length) {
            for (var e = 0, n = 0; e < t.a.length; ) {
              var i = t.a[e];
              Tn(t.b, i) && (t.a[n++] = i), e++;
            }
            t.a.length = n;
          }
          if (t.c != t.a.length) {
            for (var r = {}, n = (e = 0); e < t.a.length; )
              Tn(r, (i = t.a[e])) || (r[(t.a[n++] = i)] = 1), e++;
            t.a.length = n;
          }
        }
        function Tn(t, e) {
          return Object.prototype.hasOwnProperty.call(t, e);
        }
        w(fn, Pe),
          (fn.prototype[Ge] = !0),
          (fn.prototype.addEventListener = function (t, e, n, i) {
            Qe(this, t, e, n, i);
          }),
          (fn.prototype.removeEventListener = function (t, e, n, i) {
            nn(this, t, e, n, i);
          }),
          (fn.prototype.dispatchEvent = function (t) {
            var e;
            if ((n = this.hb)) for (e = []; n; n = n.hb) e.push(n);
            var n = this.bc,
              i = t.type || t;
            if (
              ("string" == typeof t
                ? (t = new qe(t, n))
                : t instanceof qe
                ? (t.target = t.target || n)
                : ((a = t), lt((t = new qe(i, n)), a)),
              (a = !0),
              e)
            )
              for (var r = e.length - 1; 0 <= r; r--)
                var o = (t.b = e[r]), a = vn(o, i, !0, t) && a;
            if (
              ((a = vn((o = t.b = n), i, !0, t) && a),
              (a = vn(o, i, !1, t) && a),
              e)
            )
              for (r = 0; r < e.length; r++)
                a = vn((o = t.b = e[r]), i, !1, t) && a;
            return a;
          }),
          (fn.prototype.Da = function () {
            if ((fn.bb.Da.call(this), this.v)) {
              var t,
                e = this.v;
              for (t in e.a) {
                for (var n = e.a[t], i = 0; i < n.length; i++) Xe(n[i]);
                delete e.a[t], e.b--;
              }
            }
            this.hb = null;
          }),
          ((t = wn.prototype).X = function () {
            In(this);
            for (var t = [], e = 0; e < this.a.length; e++)
              t.push(this.b[this.a[e]]);
            return t;
          }),
          (t.Y = function () {
            return In(this), this.a.concat();
          }),
          (t.clear = function () {
            (this.b = {}), (this.c = this.a.length = 0);
          }),
          (t.get = function (t, e) {
            return Tn(this.b, t) ? this.b[t] : e;
          }),
          (t.set = function (t, e) {
            Tn(this.b, t) || (this.c++, this.a.push(t)), (this.b[t] = e);
          }),
          (t.forEach = function (t, e) {
            for (var n = this.Y(), i = 0; i < n.length; i++) {
              var r = n[i],
                o = this.get(r);
              t.call(e, o, r, this);
            }
          });
        var En =
          /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
        function An(t, e) {
          var n;
          (this.a = this.l = this.c = ""),
            (this.g = null),
            (this.h = this.f = ""),
            (this.i = !1),
            t instanceof An
              ? ((this.i = void 0 !== e ? e : t.i),
                kn(this, t.c),
                (this.l = t.l),
                (this.a = t.a),
                Sn(this, t.g),
                (this.f = t.f),
                Nn(this, Wn(t.b)),
                (this.h = t.h))
              : t && (n = String(t).match(En))
              ? ((this.i = !!e),
                kn(this, n[1] || "", !0),
                (this.l = Dn(n[2] || "")),
                (this.a = Dn(n[3] || "", !0)),
                Sn(this, n[4]),
                (this.f = Dn(n[5] || "", !0)),
                Nn(this, n[6] || "", !0),
                (this.h = Dn(n[7] || "")))
              : ((this.i = !!e), (this.b = new Fn(null, this.i)));
        }
        function kn(t, e, n) {
          (t.c = n ? Dn(e, !0) : e), t.c && (t.c = t.c.replace(/:$/, ""));
        }
        function Sn(t, e) {
          if (e) {
            if (((e = Number(e)), isNaN(e) || e < 0))
              throw Error("Bad port number " + e);
            t.g = e;
          } else t.g = null;
        }
        function Nn(t, e, n) {
          var i, r;
          e instanceof Fn
            ? ((t.b = e),
              (i = t.b),
              (r = t.i) &&
                !i.f &&
                (qn(i),
                (i.c = null),
                i.a.forEach(function (t, e) {
                  var n = e.toLowerCase();
                  e != n && (Kn(this, e), Bn(this, n, t));
                }, i)),
              (i.f = r))
            : (n || (e = Pn(e, Un)), (t.b = new Fn(e, t.i)));
        }
        function _n(t, e, n) {
          t.b.set(e, n);
        }
        function On(t, e) {
          return t.b.get(e);
        }
        function Cn(t) {
          return t instanceof An ? new An(t) : new An(t, void 0);
        }
        function Rn(t, e, n, i) {
          var r = new An(null, void 0);
          return (
            t && kn(r, t), e && (r.a = e), n && Sn(r, n), i && (r.f = i), r
          );
        }
        function Dn(t, e) {
          return t
            ? e
              ? decodeURI(t.replace(/%25/g, "%2525"))
              : decodeURIComponent(t)
            : "";
        }
        function Pn(t, e, n) {
          return "string" == typeof t
            ? ((t = encodeURI(t).replace(e, Ln)),
              (t = n ? t.replace(/%25([0-9a-fA-F]{2})/g, "%$1") : t))
            : null;
        }
        function Ln(t) {
          return (
            "%" +
            (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
            (15 & t).toString(16)
          );
        }
        (An.prototype.toString = function () {
          var t = [],
            e = this.c;
          e && t.push(Pn(e, xn, !0), ":");
          var n = this.a;
          return (
            (!n && "file" != e) ||
              (t.push("//"),
              (e = this.l) && t.push(Pn(e, xn, !0), "@"),
              t.push(
                encodeURIComponent(String(n)).replace(
                  /%25([0-9a-fA-F]{2})/g,
                  "%$1"
                )
              ),
              null != (n = this.g) && t.push(":", String(n))),
            (n = this.f) &&
              (this.a && "/" != n.charAt(0) && t.push("/"),
              t.push(Pn(n, "/" == n.charAt(0) ? jn : Mn, !0))),
            (n = this.b.toString()) && t.push("?", n),
            (n = this.h) && t.push("#", Pn(n, Vn)),
            t.join("")
          );
        }),
          (An.prototype.resolve = function (t) {
            var e = new An(this),
              n = !!t.c;
            n ? kn(e, t.c) : (n = !!t.l),
              n ? (e.l = t.l) : (n = !!t.a),
              n ? (e.a = t.a) : (n = null != t.g);
            var i = t.f;
            if (n) Sn(e, t.g);
            else if ((n = !!t.f))
              if (
                ("/" != i.charAt(0) &&
                  (this.a && !this.f
                    ? (i = "/" + i)
                    : -1 != (r = e.f.lastIndexOf("/")) &&
                      (i = e.f.substr(0, r + 1) + i)),
                ".." == (r = i) || "." == r)
              )
                i = "";
              else if (it(r, "./") || it(r, "/.")) {
                for (
                  var i = 0 == r.lastIndexOf("/", 0),
                    r = r.split("/"),
                    o = [],
                    a = 0;
                  a < r.length;

                ) {
                  var s = r[a++];
                  "." == s
                    ? i && a == r.length && o.push("")
                    : ".." == s
                    ? ((1 < o.length || (1 == o.length && "" != o[0])) &&
                        o.pop(),
                      i && a == r.length && o.push(""))
                    : (o.push(s), (i = !0));
                }
                i = o.join("/");
              } else i = r;
            return (
              n ? (e.f = i) : (n = "" !== t.b.toString()),
              n ? Nn(e, Wn(t.b)) : (n = !!t.h),
              n && (e.h = t.h),
              e
            );
          });
        var xn = /[#\/\?@]/g,
          Mn = /[#\?:]/g,
          jn = /[#\?]/g,
          Un = /[#\?@]/g,
          Vn = /#/g;
        function Fn(t, e) {
          (this.b = this.a = null), (this.c = t || null), (this.f = !!e);
        }
        function qn(n) {
          n.a ||
            ((n.a = new wn()),
            (n.b = 0),
            n.c &&
              (function (t, e) {
                if (t) {
                  t = t.split("&");
                  for (var n = 0; n < t.length; n++) {
                    var i,
                      r = t[n].indexOf("="),
                      o = null;
                    0 <= r
                      ? ((i = t[n].substring(0, r)),
                        (o = t[n].substring(r + 1)))
                      : (i = t[n]),
                      e(i, o ? decodeURIComponent(o.replace(/\+/g, " ")) : "");
                  }
                }
              })(n.c, function (t, e) {
                n.add(decodeURIComponent(t.replace(/\+/g, " ")), e);
              }));
        }
        function Hn(t) {
          var e = yn(t);
          if (void 0 === e) throw Error("Keys are undefined");
          var n = new Fn(null, void 0);
          t = bn(t);
          for (var i = 0; i < e.length; i++) {
            var r = e[i],
              o = t[i];
            Array.isArray(o) ? Bn(n, r, o) : n.add(r, o);
          }
          return n;
        }
        function Kn(t, e) {
          qn(t),
            (e = Xn(t, e)),
            Tn(t.a.b, e) &&
              ((t.c = null),
              (t.b -= t.a.get(e).length),
              Tn((t = t.a).b, e) &&
                (delete t.b[e], t.c--, t.a.length > 2 * t.c && In(t)));
        }
        function Gn(t, e) {
          return qn(t), (e = Xn(t, e)), Tn(t.a.b, e);
        }
        function Bn(t, e, n) {
          Kn(t, e),
            0 < n.length &&
              ((t.c = null), t.a.set(Xn(t, e), X(n)), (t.b += n.length));
        }
        function Wn(t) {
          var e = new Fn();
          return (e.c = t.c), t.a && ((e.a = new wn(t.a)), (e.b = t.b)), e;
        }
        function Xn(t, e) {
          return (e = String(e)), (e = t.f ? e.toLowerCase() : e);
        }
        function Jn(t) {
          var e = [];
          return (
            (function t(e, n, i) {
              if (null == n) i.push("null");
              else {
                if ("object" == typeof n) {
                  if (Array.isArray(n)) {
                    var r = n;
                    (n = r.length), i.push("[");
                    for (var o = "", a = 0; a < n; a++)
                      i.push(o), t(e, r[a], i), (o = ",");
                    return void i.push("]");
                  }
                  if (
                    !(
                      n instanceof String ||
                      n instanceof Number ||
                      n instanceof Boolean
                    )
                  ) {
                    for (r in (i.push("{"), (o = ""), n))
                      Object.prototype.hasOwnProperty.call(n, r) &&
                        ((a = n[r]),
                        "function" != typeof a &&
                          (i.push(o),
                          Zn(r, i),
                          i.push(":"),
                          t(e, a, i),
                          (o = ",")));
                    return void i.push("}");
                  }
                  n = n.valueOf();
                }
                switch (typeof n) {
                  case "string":
                    Zn(n, i);
                    break;
                  case "number":
                    i.push(isFinite(n) && !isNaN(n) ? String(n) : "null");
                    break;
                  case "boolean":
                    i.push(String(n));
                    break;
                  case "function":
                    i.push("null");
                    break;
                  default:
                    throw Error("Unknown type: " + typeof n);
                }
              }
            })(new Yn(), t, e),
            e.join("")
          );
        }
        function Yn() {}
        ((t = Fn.prototype).add = function (t, e) {
          qn(this), (this.c = null), (t = Xn(this, t));
          var n = this.a.get(t);
          return n || this.a.set(t, (n = [])), n.push(e), (this.b += 1), this;
        }),
          (t.clear = function () {
            (this.a = this.c = null), (this.b = 0);
          }),
          (t.forEach = function (n, i) {
            qn(this),
              this.a.forEach(function (t, e) {
                V(
                  t,
                  function (t) {
                    n.call(i, t, e, this);
                  },
                  this
                );
              }, this);
          }),
          (t.Y = function () {
            qn(this);
            for (
              var t = this.a.X(), e = this.a.Y(), n = [], i = 0;
              i < e.length;
              i++
            )
              for (var r = t[i], o = 0; o < r.length; o++) n.push(e[i]);
            return n;
          }),
          (t.X = function (t) {
            qn(this);
            var e = [];
            if ("string" == typeof t)
              Gn(this, t) && (e = W(e, this.a.get(Xn(this, t))));
            else {
              t = this.a.X();
              for (var n = 0; n < t.length; n++) e = W(e, t[n]);
            }
            return e;
          }),
          (t.set = function (t, e) {
            return (
              qn(this),
              (this.c = null),
              Gn(this, (t = Xn(this, t))) && (this.b -= this.a.get(t).length),
              this.a.set(t, [e]),
              (this.b += 1),
              this
            );
          }),
          (t.get = function (t, e) {
            return t && 0 < (t = this.X(t)).length ? String(t[0]) : e;
          }),
          (t.toString = function () {
            if (this.c) return this.c;
            if (!this.a) return "";
            for (var t = [], e = this.a.Y(), n = 0; n < e.length; n++)
              for (
                var i = e[n],
                  r = encodeURIComponent(String(i)),
                  i = this.X(i),
                  o = 0;
                o < i.length;
                o++
              ) {
                var a = r;
                "" !== i[o] && (a += "=" + encodeURIComponent(String(i[o]))),
                  t.push(a);
              }
            return (this.c = t.join("&"));
          });
        var zn = {
            '"': '\\"',
            "\\": "\\\\",
            "/": "\\/",
            "\b": "\\b",
            "\f": "\\f",
            "\n": "\\n",
            "\r": "\\r",
            "\t": "\\t",
            "\v": "\\u000b",
          },
          $n = /\uffff/.test("\uffff")
            ? /[\\"\x00-\x1f\x7f-\uffff]/g
            : /[\\"\x00-\x1f\x7f-\xff]/g;
        function Zn(t, e) {
          e.push(
            '"',
            t.replace($n, function (t) {
              var e = zn[t];
              return (
                e ||
                  ((e =
                    "\\u" + (65536 | t.charCodeAt(0)).toString(16).substr(1)),
                  (zn[t] = e)),
                e
              );
            }),
            '"'
          );
        }
        function Qn() {
          var t = bi();
          return (Ht && Zt && 11 == Zt) || /Edge\/\d+/.test(t);
        }
        function ti() {
          return (
            (l.window && l.window.location.href) ||
            (self && self.location && self.location.href) ||
            ""
          );
        }
        function ei(t, e) {
          e = e || l.window;
          var n = "about:blank";
          t && (n = St(Ct(t) || Pt)), (e.location.href = n);
        }
        function ni(t) {
          return !!(
            (t = (t || bi()).toLowerCase()).match(/android/) ||
            t.match(/webos/) ||
            t.match(/iphone|ipad|ipod/) ||
            t.match(/blackberry/) ||
            t.match(/windows phone/) ||
            t.match(/iemobile/)
          );
        }
        function ii(t) {
          t = t || l.window;
          try {
            t.close();
          } catch (t) {}
        }
        function ri(t, e, n) {
          var i = Math.floor(1e9 * Math.random()).toString();
          (e = e || 500), (n = n || 600);
          var r = (window.screen.availHeight - n) / 2,
            o = (window.screen.availWidth - e) / 2;
          for (a in ((e = {
            width: e,
            height: n,
            top: 0 < r ? r : 0,
            left: 0 < o ? o : 0,
            location: !0,
            resizable: !0,
            statusbar: !0,
            toolbar: !1,
          }),
          (n = bi().toLowerCase()),
          i && ((e.target = i), it(n, "crios/") && (e.target = "_blank")),
          vi(bi()) == di &&
            ((t = t || "http://localhost"), (e.scrollbars = !0)),
          (n = t || ""),
          (t = e) || (t = {}),
          (i = window),
          (e =
            n instanceof kt
              ? n
              : Ct(void 0 !== n.href ? n.href : String(n)) || Pt),
          (n = t.target || n.target),
          (r = []),
          t))
            switch (a) {
              case "width":
              case "height":
              case "top":
              case "left":
                r.push(a + "=" + t[a]);
                break;
              case "target":
              case "noopener":
              case "noreferrer":
                break;
              default:
                r.push(a + "=" + (t[a] ? 1 : 0));
            }
          var a = r.join(",");
          if (
            (((at("iPhone") && !at("iPod") && !at("iPad")) ||
              at("iPad") ||
              at("iPod")) &&
            i.navigator &&
            i.navigator.standalone &&
            n &&
            "_self" != n
              ? (ft((a = ae(document, "A")), "HTMLAnchorElement"),
                (e = e instanceof kt ? e : Rt(e)),
                (a.href = St(e)),
                a.setAttribute("target", n),
                t.noreferrer && a.setAttribute("rel", "noreferrer"),
                (t = document.createEvent("MouseEvent")).initMouseEvent(
                  "click",
                  !0,
                  !0,
                  i,
                  1
                ),
                a.dispatchEvent(t),
                (a = {}))
              : t.noreferrer
              ? ((a = Mt("", i, n, a)),
                (t = St(e)),
                a &&
                  (Gt && it(t, ";") && (t = "'" + t.replace(/'/g, "%27") + "'"),
                  (a.opener = null),
                  (t =
                    '<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url=' +
                    Ut(t) +
                    '">'),
                  (t = new Lt((t = (i = bt()) ? i.createHTML(t) : t), 0, xt)),
                  (i = a.document)) &&
                  (i.write(
                    (o = t) instanceof Lt && o.constructor === Lt
                      ? o.a
                      : (D(
                          "expected object of type SafeHtml, got '" +
                            o +
                            "' of type " +
                            d(o)
                        ),
                        "type_error:SafeHtml")
                  ),
                  i.close()))
              : (a = Mt(e, i, n, a)) && t.noopener && (a.opener = null),
            a)
          )
            try {
              a.focus();
            } catch (t) {}
          return a;
        }
        var oi = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,
          ai = /^[^@]+@[^@]+$/;
        function si() {
          var e = null;
          return new fe(function (t) {
            "complete" == l.document.readyState
              ? t()
              : ((e = function () {
                  t();
                }),
                en(window, "load", e));
          }).o(function (t) {
            throw (nn(window, "load", e), t);
          });
        }
        function ui(t) {
          return (
            (t = t || bi()),
            !(
              ("file:" !== Ei() && "ionic:" !== Ei()) ||
              !t.toLowerCase().match(/iphone|ipad|ipod|android/)
            )
          );
        }
        function ci() {
          var t = l.window;
          try {
            return t && t != t.top;
          } catch (t) {
            return;
          }
        }
        function hi() {
          return (
            void 0 !== l.WorkerGlobalScope &&
            "function" == typeof l.importScripts
          );
        }
        function li() {
          return Zl.default.INTERNAL.hasOwnProperty("reactNative")
            ? "ReactNative"
            : Zl.default.INTERNAL.hasOwnProperty("node")
            ? "Node"
            : hi()
            ? "Worker"
            : "Browser";
        }
        function fi() {
          var t = li();
          return "ReactNative" === t || "Node" === t;
        }
        var di = "Firefox",
          pi = "Chrome";
        function vi(t) {
          var e = t.toLowerCase();
          return it(e, "opera/") || it(e, "opr/") || it(e, "opios/")
            ? "Opera"
            : it(e, "iemobile")
            ? "IEMobile"
            : it(e, "msie") || it(e, "trident/")
            ? "IE"
            : it(e, "edge/")
            ? "Edge"
            : it(e, "firefox/")
            ? di
            : it(e, "silk/")
            ? "Silk"
            : it(e, "blackberry")
            ? "Blackberry"
            : it(e, "webos")
            ? "Webos"
            : !it(e, "safari/") ||
              it(e, "chrome/") ||
              it(e, "crios/") ||
              it(e, "android")
            ? (!it(e, "chrome/") && !it(e, "crios/")) || it(e, "edge/")
              ? it(e, "android")
                ? "Android"
                : (t = t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/)) &&
                  2 == t.length
                ? t[1]
                : "Other"
              : pi
            : "Safari";
        }
        var mi = { md: "FirebaseCore-web", od: "FirebaseUI-web" };
        function gi(t, e) {
          e = e || [];
          var n,
            i = [],
            r = {};
          for (n in mi) r[mi[n]] = !0;
          for (n = 0; n < e.length; n++)
            void 0 !== r[e[n]] && (delete r[e[n]], i.push(e[n]));
          return (
            i.sort(),
            (e = i).length || (e = ["FirebaseCore-web"]),
            "Browser" === (i = li())
              ? (i = vi((r = bi())))
              : "Worker" === i && (i = vi((r = bi())) + "-" + i),
            i + "/JsCore/" + t + "/" + e.join(",")
          );
        }
        function bi() {
          return (l.navigator && l.navigator.userAgent) || "";
        }
        function yi(t, e) {
          (t = t.split(".")), (e = e || l);
          for (
            var n = 0;
            n < t.length && "object" == typeof e && null != e;
            n++
          )
            e = e[t[n]];
          return (e = n != t.length ? void 0 : e);
        }
        function wi() {
          try {
            var t = l.localStorage,
              e = _i();
            if (t)
              return t.setItem(e, "1"), t.removeItem(e), !Qn() || !!l.indexedDB;
          } catch (t) {
            return hi() && !!l.indexedDB;
          }
          return !1;
        }
        function Ii() {
          return (
            (Ti() || "chrome-extension:" === Ei() || ui()) &&
            !fi() &&
            wi() &&
            !hi()
          );
        }
        function Ti() {
          return "http:" === Ei() || "https:" === Ei();
        }
        function Ei() {
          return (l.location && l.location.protocol) || null;
        }
        function Ai(t) {
          return !ni((t = t || bi())) && vi(t) != di;
        }
        function ki(t) {
          return void 0 === t ? null : Jn(t);
        }
        function Si(t) {
          var e,
            n = {};
          for (e in t)
            t.hasOwnProperty(e) &&
              null !== t[e] &&
              void 0 !== t[e] &&
              (n[e] = t[e]);
          return n;
        }
        function Ni(t) {
          if (null !== t) return JSON.parse(t);
        }
        function _i(t) {
          return t || Math.floor(1e9 * Math.random()).toString();
        }
        function Oi(t) {
          return (
            "Safari" != vi((t = t || bi())) &&
            !t.toLowerCase().match(/iphone|ipad|ipod/)
          );
        }
        function Ci() {
          var t = l.___jsl;
          if (t && t.H)
            for (var e in t.H)
              if (
                ((t.H[e].r = t.H[e].r || []),
                (t.H[e].L = t.H[e].L || []),
                (t.H[e].r = t.H[e].L.concat()),
                t.CP)
              )
                for (var n = 0; n < t.CP.length; n++) t.CP[n] = null;
        }
        function Ri(t, e) {
          if (e < t) throw Error("Short delay should be less than long delay!");
          (this.a = t),
            (this.c = e),
            (t = bi()),
            (e = li()),
            (this.b = ni(t) || "ReactNative" === e);
        }
        function Di() {
          var t = l.document;
          return (
            !t || void 0 === t.visibilityState || "visible" == t.visibilityState
          );
        }
        function Pi() {
          var e = l.document,
            n = null;
          return Di() || !e
            ? ye()
            : new fe(function (t) {
                (n = function () {
                  Di() &&
                    (e.removeEventListener("visibilitychange", n, !1), t());
                }),
                  e.addEventListener("visibilitychange", n, !1);
              }).o(function (t) {
                throw (e.removeEventListener("visibilitychange", n, !1), t);
              });
        }
        function Li(t) {
          try {
            var e = new Date(parseInt(t, 10));
            if (!isNaN(e.getTime()) && !/[^0-9]/.test(t))
              return e.toUTCString();
          } catch (t) {}
          return null;
        }
        function xi() {
          return yi("fireauth.oauthhelper", l) || yi("fireauth.iframe", l);
        }
        Ri.prototype.get = function () {
          var t = l.navigator;
          return !t ||
            "boolean" != typeof t.onLine ||
            (!Ti() &&
              "chrome-extension:" !== Ei() &&
              void 0 === t.connection) ||
            t.onLine
            ? this.b
              ? this.c
              : this.a
            : Math.min(5e3, this.a);
        };
        var Mi,
          ji = {};
        function Ui(t) {
          ji[t] ||
            ((ji[t] = !0),
            "undefined" != typeof console &&
              "function" == typeof console.warn &&
              console.warn(t));
        }
        try {
          var Vi = {};
          Object.defineProperty(Vi, "abcd", {
            configurable: !0,
            enumerable: !0,
            value: 1,
          }),
            Object.defineProperty(Vi, "abcd", {
              configurable: !0,
              enumerable: !0,
              value: 2,
            }),
            (Mi = 2 == Vi.abcd);
        } catch (t) {
          Mi = !1;
        }
        function Fi(t, e, n) {
          Mi
            ? Object.defineProperty(t, e, {
                configurable: !0,
                enumerable: !0,
                value: n,
              })
            : (t[e] = n);
        }
        function qi(t, e) {
          if (e) for (var n in e) e.hasOwnProperty(n) && Fi(t, n, e[n]);
        }
        function Hi(t) {
          var e = {};
          return qi(e, t), e;
        }
        function Ki(t) {
          var e = t;
          if ("object" == typeof t && null != t)
            for (var n in ((e = "length" in t ? [] : {}), t))
              Fi(e, n, Ki(t[n]));
          return e;
        }
        function Gi(t) {
          var e = t && (t[Yi] ? "phone" : null);
          if (!(e && t && t[Ji]))
            throw new T(
              "internal-error",
              "Internal assert: invalid MultiFactorInfo object"
            );
          Fi(this, "uid", t[Ji]), Fi(this, "displayName", t[Wi] || null);
          var n = null;
          Fi(
            this,
            "enrollmentTime",
            (n = t[Xi] ? new Date(t[Xi]).toUTCString() : n)
          ),
            Fi(this, "factorId", e);
        }
        function Bi(t) {
          try {
            var e = new zi(t);
          } catch (t) {
            e = null;
          }
          return e;
        }
        Gi.prototype.w = function () {
          return {
            uid: this.uid,
            displayName: this.displayName,
            factorId: this.factorId,
            enrollmentTime: this.enrollmentTime,
          };
        };
        var Wi = "displayName",
          Xi = "enrolledAt",
          Ji = "mfaEnrollmentId",
          Yi = "phoneInfo";
        function zi(t) {
          Gi.call(this, t), Fi(this, "phoneNumber", t[Yi]);
        }
        function $i(t) {
          var e = {},
            n = t[er],
            i = t[ir],
            r = t[rr];
          if (
            ((t = Bi(t[nr])),
            !r ||
              (r != Qi && r != tr && !n) ||
              (r == tr && !i) ||
              (r == Zi && !t))
          )
            throw Error("Invalid checkActionCode response!");
          r == tr
            ? ((e[ar] = n || null), (e[ur] = n || null), (e[or] = i))
            : ((e[ar] = i || null), (e[ur] = i || null), (e[or] = n || null)),
            (e[sr] = t || null),
            Fi(this, hr, r),
            Fi(this, cr, Ki(e));
        }
        w(zi, Gi),
          (zi.prototype.w = function () {
            var t = zi.bb.w.call(this);
            return (t.phoneNumber = this.phoneNumber), t;
          });
        var Zi = "REVERT_SECOND_FACTOR_ADDITION",
          Qi = "EMAIL_SIGNIN",
          tr = "VERIFY_AND_CHANGE_EMAIL",
          er = "email",
          nr = "mfaInfo",
          ir = "newEmail",
          rr = "requestType",
          or = "email",
          ar = "fromEmail",
          sr = "multiFactorInfo",
          ur = "previousEmail",
          cr = "data",
          hr = "operation";
        function lr(t) {
          var e = On((t = Cn(t)), fr) || null,
            n = On(t, dr) || null,
            i = ((i = On(t, mr) || null) && br[i]) || null;
          if (!e || !n || !i)
            throw new T(
              "argument-error",
              fr +
                ", " +
                dr +
                "and " +
                mr +
                " are required in a valid action code URL."
            );
          qi(this, {
            apiKey: e,
            operation: i,
            code: n,
            continueUrl: On(t, pr) || null,
            languageCode: On(t, vr) || null,
            tenantId: On(t, gr) || null,
          });
        }
        var fr = "apiKey",
          dr = "oobCode",
          pr = "continueUrl",
          vr = "languageCode",
          mr = "mode",
          gr = "tenantId",
          br = {
            recoverEmail: "RECOVER_EMAIL",
            resetPassword: "PASSWORD_RESET",
            revertSecondFactorAddition: Zi,
            signIn: Qi,
            verifyAndChangeEmail: tr,
            verifyEmail: "VERIFY_EMAIL",
          };
        function yr(t) {
          try {
            return new lr(t);
          } catch (t) {
            return null;
          }
        }
        function wr(t) {
          if (void 0 === (e = t[kr])) throw new T("missing-continue-uri");
          if ("string" != typeof e || ("string" == typeof e && !e.length))
            throw new T("invalid-continue-uri");
          if (
            ((this.h = e),
            (this.b = this.a = null),
            (this.g = !1),
            (i = t[Ir]) && "object" == typeof i)
          ) {
            var e = i[_r],
              n = i[Sr],
              i = i[Nr];
            if ("string" == typeof e && e.length) {
              if (((this.a = e), void 0 !== n && "boolean" != typeof n))
                throw new T(
                  "argument-error",
                  Sr + " property must be a boolean when specified."
                );
              if (
                ((this.g = !!n),
                void 0 !== i &&
                  ("string" != typeof i || ("string" == typeof i && !i.length)))
              )
                throw new T(
                  "argument-error",
                  Nr + " property must be a non empty string when specified."
                );
              this.b = i || null;
            } else {
              if (void 0 !== e)
                throw new T(
                  "argument-error",
                  _r + " property must be a non empty string when specified."
                );
              if (void 0 !== n || void 0 !== i)
                throw new T("missing-android-pkg-name");
            }
          } else if (void 0 !== i)
            throw new T(
              "argument-error",
              Ir + " property must be a non null object when specified."
            );
          if (((this.f = null), (e = t[Ar]) && "object" == typeof e)) {
            if ("string" == typeof (e = e[Or]) && e.length) this.f = e;
            else if (void 0 !== e)
              throw new T(
                "argument-error",
                Or + " property must be a non empty string when specified."
              );
          } else if (void 0 !== e)
            throw new T(
              "argument-error",
              Ar + " property must be a non null object when specified."
            );
          if (void 0 !== (e = t[Er]) && "boolean" != typeof e)
            throw new T(
              "argument-error",
              Er + " property must be a boolean when specified."
            );
          if (
            ((this.c = !!e),
            void 0 !== (t = t[Tr]) &&
              ("string" != typeof t || ("string" == typeof t && !t.length)))
          )
            throw new T(
              "argument-error",
              Tr + " property must be a non empty string when specified."
            );
          this.i = t || null;
        }
        var Ir = "android",
          Tr = "dynamicLinkDomain",
          Er = "handleCodeInApp",
          Ar = "iOS",
          kr = "url",
          Sr = "installApp",
          Nr = "minimumVersion",
          _r = "packageName",
          Or = "bundleId";
        function Cr(t) {
          var e,
            n = {};
          for (e in ((n.continueUrl = t.h),
          (n.canHandleCodeInApp = t.c),
          (n.androidPackageName = t.a) &&
            ((n.androidMinimumVersion = t.b), (n.androidInstallApp = t.g)),
          (n.iOSBundleId = t.f),
          (n.dynamicLinkDomain = t.i),
          n))
            null === n[e] && delete n[e];
          return n;
        }
        var Rr = null;
        function Dr(t) {
          var e = [];
          return (
            (function (i, t) {
              function e(t) {
                for (; r < i.length; ) {
                  var e = i.charAt(r++),
                    n = Rr[e];
                  if (null != n) return n;
                  if (!/^[\s\xa0]*$/.test(e))
                    throw Error("Unknown base64 encoding at char: " + e);
                }
                return t;
              }
              !(function () {
                if (!Rr) {
                  Rr = {};
                  for (
                    var t =
                        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(
                          ""
                        ),
                      e = ["+/=", "+/", "-_=", "-_.", "-_"],
                      n = 0;
                    n < 5;
                    n++
                  )
                    for (
                      var i = t.concat(e[n].split("")), r = 0;
                      r < i.length;
                      r++
                    ) {
                      var o = i[r];
                      void 0 === Rr[o] && (Rr[o] = r);
                    }
                }
              })();
              for (var r = 0; ; ) {
                var n = e(-1),
                  o = e(0),
                  a = e(64),
                  s = e(64);
                if (64 === s && -1 === n) break;
                t((n << 2) | (o >> 4)),
                  64 != a &&
                    (t(((o << 4) & 240) | (a >> 2)),
                    64 != s && t(((a << 6) & 192) | s));
              }
            })(t, function (t) {
              e.push(t);
            }),
            e
          );
        }
        function Pr(t) {
          var e = xr(t);
          if (!(e && e.sub && e.iss && e.aud && e.exp))
            throw Error("Invalid JWT");
          (this.h = t),
            (this.a = e.exp),
            (this.i = e.sub),
            (t = Date.now() / 1e3),
            (this.g = e.iat || (t > this.a ? this.a : t)),
            (this.b =
              e.provider_id ||
              (e.firebase && e.firebase.sign_in_provider) ||
              null),
            (this.f = (e.firebase && e.firebase.tenant) || null),
            (this.c = !!e.is_anonymous || "anonymous" == this.b);
        }
        function Lr(t) {
          try {
            return new Pr(t);
          } catch (t) {
            return null;
          }
        }
        function xr(t) {
          if (!t) return null;
          if (3 != (t = t.split(".")).length) return null;
          for (var e = (4 - ((t = t[1]).length % 4)) % 4, n = 0; n < e; n++)
            t += ".";
          try {
            var i = Dr(t);
            for (t = [], n = e = 0; e < i.length; ) {
              var r,
                o,
                a,
                s = i[e++];
              s < 128
                ? (t[n++] = String.fromCharCode(s))
                : 191 < s && s < 224
                ? ((r = i[e++]),
                  (t[n++] = String.fromCharCode(((31 & s) << 6) | (63 & r))))
                : 239 < s && s < 365
                ? ((a =
                    (((7 & s) << 18) |
                      ((63 & (r = i[e++])) << 12) |
                      ((63 & (o = i[e++])) << 6) |
                      (63 & i[e++])) -
                    65536),
                  (t[n++] = String.fromCharCode(55296 + (a >> 10))),
                  (t[n++] = String.fromCharCode(56320 + (1023 & a))))
                : ((r = i[e++]),
                  (o = i[e++]),
                  (t[n++] = String.fromCharCode(
                    ((15 & s) << 12) | ((63 & r) << 6) | (63 & o)
                  )));
            }
            return JSON.parse(t.join(""));
          } catch (t) {}
          return null;
        }
        (Pr.prototype.T = function () {
          return this.f;
        }),
          (Pr.prototype.l = function () {
            return this.c;
          }),
          (Pr.prototype.toString = function () {
            return this.h;
          });
        var Mr =
            "oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(
              " "
            ),
          jr = ["client_id", "response_type", "scope", "redirect_uri", "state"],
          Ur = {
            nd: { Ja: "locale", va: 700, ua: 600, fa: "facebook.com", Ya: jr },
            pd: { Ja: null, va: 500, ua: 750, fa: "github.com", Ya: jr },
            qd: { Ja: "hl", va: 515, ua: 680, fa: "google.com", Ya: jr },
            wd: { Ja: "lang", va: 485, ua: 705, fa: "twitter.com", Ya: Mr },
            kd: { Ja: "locale", va: 640, ua: 600, fa: "apple.com", Ya: [] },
          };
        function Vr(t) {
          for (var e in Ur) if (Ur[e].fa == t) return Ur[e];
          return null;
        }
        function Fr(t) {
          var e = {};
          (e["facebook.com"] = Br),
            (e["google.com"] = Xr),
            (e["github.com"] = Wr),
            (e["twitter.com"] = Jr);
          var n = t && t[Hr];
          try {
            if (n) return new (e[n] || Gr)(t);
            if (void 0 !== t[qr]) return new Kr(t);
          } catch (t) {}
          return null;
        }
        var qr = "idToken",
          Hr = "providerId";
        function Kr(t) {
          var e,
            n = t[Hr];
          if ((n || !t[qr] || ((e = Lr(t[qr])) && e.b && (n = e.b)), !n))
            throw Error("Invalid additional user info!");
          (e = !1),
            void 0 !== t.isNewUser
              ? (e = !!t.isNewUser)
              : "identitytoolkit#SignupNewUserResponse" === t.kind && (e = !0),
            Fi(
              this,
              "providerId",
              (n = "anonymous" == n || "custom" == n ? null : n)
            ),
            Fi(this, "isNewUser", e);
        }
        function Gr(t) {
          Kr.call(this, t),
            Fi(this, "profile", Ki((t = Ni(t.rawUserInfo || "{}")) || {}));
        }
        function Br(t) {
          if ((Gr.call(this, t), "facebook.com" != this.providerId))
            throw Error("Invalid provider ID!");
        }
        function Wr(t) {
          if ((Gr.call(this, t), "github.com" != this.providerId))
            throw Error("Invalid provider ID!");
          Fi(this, "username", (this.profile && this.profile.login) || null);
        }
        function Xr(t) {
          if ((Gr.call(this, t), "google.com" != this.providerId))
            throw Error("Invalid provider ID!");
        }
        function Jr(t) {
          if ((Gr.call(this, t), "twitter.com" != this.providerId))
            throw Error("Invalid provider ID!");
          Fi(this, "username", t.screenName || null);
        }
        function Yr(t) {
          var e = On((i = Cn(t)), "link"),
            n = On(Cn(e), "link"),
            i = On(i, "deep_link_id");
          return On(Cn(i), "link") || i || n || e || t;
        }
        function zr(t, e) {
          if (!t && !e)
            throw new T(
              "internal-error",
              "Internal assert: no raw session string available"
            );
          if (t && e)
            throw new T(
              "internal-error",
              "Internal assert: unable to determine the session type"
            );
          (this.a = t || null),
            (this.b = e || null),
            (this.type = this.a ? $r : Zr);
        }
        w(Gr, Kr), w(Br, Gr), w(Wr, Gr), w(Xr, Gr), w(Jr, Gr);
        var $r = "enroll",
          Zr = "signin";
        function Qr() {}
        function to(t, n) {
          return t
            .then(function (t) {
              if (t[Ka]) {
                var e = Lr(t[Ka]);
                if (!e || n != e.i) throw new T("user-mismatch");
                return t;
              }
              throw new T("user-mismatch");
            })
            .o(function (t) {
              throw t && t.code && t.code == k + "user-not-found"
                ? new T("user-mismatch")
                : t;
            });
        }
        function eo(t, e) {
          if (!e)
            throw new T("internal-error", "failed to construct a credential");
          (this.a = e), Fi(this, "providerId", t), Fi(this, "signInMethod", t);
        }
        function no(t) {
          return { pendingToken: t.a, requestUri: "http://localhost" };
        }
        function io(t) {
          if (
            t &&
            t.providerId &&
            t.signInMethod &&
            0 == t.providerId.indexOf("saml.") &&
            t.pendingToken
          )
            try {
              return new eo(t.providerId, t.pendingToken);
            } catch (t) {}
          return null;
        }
        function ro(t, e, n) {
          if (((this.a = null), e.idToken || e.accessToken))
            e.idToken && Fi(this, "idToken", e.idToken),
              e.accessToken && Fi(this, "accessToken", e.accessToken),
              e.nonce && !e.pendingToken && Fi(this, "nonce", e.nonce),
              e.pendingToken && (this.a = e.pendingToken);
          else {
            if (!e.oauthToken || !e.oauthTokenSecret)
              throw new T("internal-error", "failed to construct a credential");
            Fi(this, "accessToken", e.oauthToken),
              Fi(this, "secret", e.oauthTokenSecret);
          }
          Fi(this, "providerId", t), Fi(this, "signInMethod", n);
        }
        function oo(t) {
          var e = {};
          return (
            t.idToken && (e.id_token = t.idToken),
            t.accessToken && (e.access_token = t.accessToken),
            t.secret && (e.oauth_token_secret = t.secret),
            (e.providerId = t.providerId),
            t.nonce && !t.a && (e.nonce = t.nonce),
            (e = {
              postBody: Hn(e).toString(),
              requestUri: "http://localhost",
            }),
            t.a && (delete e.postBody, (e.pendingToken = t.a)),
            e
          );
        }
        function ao(t) {
          if (t && t.providerId && t.signInMethod) {
            var e = {
              idToken: t.oauthIdToken,
              accessToken: t.oauthTokenSecret ? null : t.oauthAccessToken,
              oauthTokenSecret: t.oauthTokenSecret,
              oauthToken: t.oauthTokenSecret && t.oauthAccessToken,
              nonce: t.nonce,
              pendingToken: t.pendingToken,
            };
            try {
              return new ro(t.providerId, e, t.signInMethod);
            } catch (t) {}
          }
          return null;
        }
        function so(t, e) {
          (this.Qc = e || []),
            qi(this, { providerId: t, isOAuthProvider: !0 }),
            (this.Jb = {}),
            (this.qb = (Vr(t) || {}).Ja || null),
            (this.pb = null);
        }
        function uo(t) {
          if ("string" != typeof t || 0 != t.indexOf("saml."))
            throw new T(
              "argument-error",
              'SAML provider IDs must be prefixed with "saml."'
            );
          so.call(this, t, []);
        }
        function co(t) {
          so.call(this, t, jr), (this.a = []);
        }
        function ho() {
          co.call(this, "facebook.com");
        }
        function lo(t) {
          if (!t)
            throw new T(
              "argument-error",
              "credential failed: expected 1 argument (the OAuth access token)."
            );
          var e = t;
          return (
            m(t) && (e = t.accessToken), new ho().credential({ accessToken: e })
          );
        }
        function fo() {
          co.call(this, "github.com");
        }
        function po(t) {
          if (!t)
            throw new T(
              "argument-error",
              "credential failed: expected 1 argument (the OAuth access token)."
            );
          var e = t;
          return (
            m(t) && (e = t.accessToken), new fo().credential({ accessToken: e })
          );
        }
        function vo() {
          co.call(this, "google.com"), this.Ca("profile");
        }
        function mo(t, e) {
          var n = t;
          return (
            m(t) && ((n = t.idToken), (e = t.accessToken)),
            new vo().credential({ idToken: n, accessToken: e })
          );
        }
        function go() {
          so.call(this, "twitter.com", Mr);
        }
        function bo(t, e) {
          var n = t;
          if (
            !(n = !m(n) ? { oauthToken: t, oauthTokenSecret: e } : n)
              .oauthToken ||
            !n.oauthTokenSecret
          )
            throw new T(
              "argument-error",
              "credential failed: expected 2 arguments (the OAuth access token and secret)."
            );
          return new ro("twitter.com", n, "twitter.com");
        }
        function yo(t, e, n) {
          (this.a = t),
            (this.f = e),
            Fi(this, "providerId", "password"),
            Fi(
              this,
              "signInMethod",
              n === Io.EMAIL_LINK_SIGN_IN_METHOD
                ? Io.EMAIL_LINK_SIGN_IN_METHOD
                : Io.EMAIL_PASSWORD_SIGN_IN_METHOD
            );
        }
        function wo(t) {
          return t && t.email && t.password
            ? new yo(t.email, t.password, t.signInMethod)
            : null;
        }
        function Io() {
          qi(this, { providerId: "password", isOAuthProvider: !1 });
        }
        function To(t, e) {
          if (!(e = Eo(e)))
            throw new T("argument-error", "Invalid email link!");
          return new yo(t, e.code, Io.EMAIL_LINK_SIGN_IN_METHOD);
        }
        function Eo(t) {
          return (t = yr((t = Yr(t)))) && t.operation === Qi ? t : null;
        }
        function Ao(t) {
          if (!((t.fb && t.eb) || (t.La && t.ea)))
            throw new T("internal-error");
          (this.a = t),
            Fi(this, "providerId", "phone"),
            (this.fa = "phone"),
            Fi(this, "signInMethod", "phone");
        }
        function ko(e) {
          if (
            e &&
            "phone" === e.providerId &&
            ((e.verificationId && e.verificationCode) ||
              (e.temporaryProof && e.phoneNumber))
          ) {
            var n = {};
            return (
              V(
                [
                  "verificationId",
                  "verificationCode",
                  "temporaryProof",
                  "phoneNumber",
                ],
                function (t) {
                  e[t] && (n[t] = e[t]);
                }
              ),
              new Ao(n)
            );
          }
          return null;
        }
        function So(t) {
          return t.a.La && t.a.ea
            ? { temporaryProof: t.a.La, phoneNumber: t.a.ea }
            : { sessionInfo: t.a.fb, code: t.a.eb };
        }
        function No(t) {
          try {
            this.a = t || Zl.default.auth();
          } catch (t) {
            throw new T(
              "argument-error",
              "Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp()."
            );
          }
          qi(this, { providerId: "phone", isOAuthProvider: !1 });
        }
        function _o(t, e) {
          if (!t) throw new T("missing-verification-id");
          if (!e) throw new T("missing-verification-code");
          return new Ao({ fb: t, eb: e });
        }
        function Oo(t) {
          if (t.temporaryProof && t.phoneNumber)
            return new Ao({ La: t.temporaryProof, ea: t.phoneNumber });
          var e = t && t.providerId;
          if (!e || "password" === e) return null;
          var n = t && t.oauthAccessToken,
            i = t && t.oauthTokenSecret,
            r = t && t.nonce,
            o = t && t.oauthIdToken,
            a = t && t.pendingToken;
          try {
            switch (e) {
              case "google.com":
                return mo(o, n);
              case "facebook.com":
                return lo(n);
              case "github.com":
                return po(n);
              case "twitter.com":
                return bo(n, i);
              default:
                return n || i || o || a
                  ? a
                    ? 0 == e.indexOf("saml.")
                      ? new eo(e, a)
                      : new ro(
                          e,
                          {
                            pendingToken: a,
                            idToken: t.oauthIdToken,
                            accessToken: t.oauthAccessToken,
                          },
                          e
                        )
                    : new co(e).credential({
                        idToken: o,
                        accessToken: n,
                        rawNonce: r,
                      })
                  : null;
            }
          } catch (t) {
            return null;
          }
        }
        function Co(t) {
          if (!t.isOAuthProvider) throw new T("invalid-oauth-provider");
        }
        function Ro(t, e, n, i, r, o, a) {
          if (
            ((this.c = t),
            (this.b = e || null),
            (this.g = n || null),
            (this.f = i || null),
            (this.i = o || null),
            (this.h = a || null),
            (this.a = r || null),
            !this.g && !this.a)
          )
            throw new T("invalid-auth-event");
          if (this.g && this.a) throw new T("invalid-auth-event");
          if (this.g && !this.f) throw new T("invalid-auth-event");
        }
        function Do(t) {
          return (t = t || {}).type
            ? new Ro(
                t.type,
                t.eventId,
                t.urlResponse,
                t.sessionId,
                t.error && E(t.error),
                t.postBody,
                t.tenantId
              )
            : null;
        }
        function Po() {
          (this.b = null), (this.a = []);
        }
        (zr.prototype.Ha = function () {
          return this.a ? ye(this.a) : ye(this.b);
        }),
          (zr.prototype.w = function () {
            return this.type == $r
              ? { multiFactorSession: { idToken: this.a } }
              : { multiFactorSession: { pendingCredential: this.b } };
          }),
          (Qr.prototype.ka = function () {}),
          (Qr.prototype.b = function () {}),
          (Qr.prototype.c = function () {}),
          (Qr.prototype.w = function () {}),
          (eo.prototype.ka = function (t) {
            return ls(t, no(this));
          }),
          (eo.prototype.b = function (t, e) {
            var n = no(this);
            return (n.idToken = e), fs(t, n);
          }),
          (eo.prototype.c = function (t, e) {
            return to(ds(t, no(this)), e);
          }),
          (eo.prototype.w = function () {
            return {
              providerId: this.providerId,
              signInMethod: this.signInMethod,
              pendingToken: this.a,
            };
          }),
          (ro.prototype.ka = function (t) {
            return ls(t, oo(this));
          }),
          (ro.prototype.b = function (t, e) {
            var n = oo(this);
            return (n.idToken = e), fs(t, n);
          }),
          (ro.prototype.c = function (t, e) {
            return to(ds(t, oo(this)), e);
          }),
          (ro.prototype.w = function () {
            var t = {
              providerId: this.providerId,
              signInMethod: this.signInMethod,
            };
            return (
              this.idToken && (t.oauthIdToken = this.idToken),
              this.accessToken && (t.oauthAccessToken = this.accessToken),
              this.secret && (t.oauthTokenSecret = this.secret),
              this.nonce && (t.nonce = this.nonce),
              this.a && (t.pendingToken = this.a),
              t
            );
          }),
          (so.prototype.Ka = function (t) {
            return (this.Jb = ct(t)), this;
          }),
          w(uo, so),
          w(co, so),
          (co.prototype.Ca = function (t) {
            return K(this.a, t) || this.a.push(t), this;
          }),
          (co.prototype.Rb = function () {
            return X(this.a);
          }),
          (co.prototype.credential = function (t, e) {
            e = m(t)
              ? {
                  idToken: t.idToken || null,
                  accessToken: t.accessToken || null,
                  nonce: t.rawNonce || null,
                }
              : { idToken: t || null, accessToken: e || null };
            if (!e.idToken && !e.accessToken)
              throw new T(
                "argument-error",
                "credential failed: must provide the ID token and/or the access token."
              );
            return new ro(this.providerId, e, this.providerId);
          }),
          w(ho, co),
          Fi(ho, "PROVIDER_ID", "facebook.com"),
          Fi(ho, "FACEBOOK_SIGN_IN_METHOD", "facebook.com"),
          w(fo, co),
          Fi(fo, "PROVIDER_ID", "github.com"),
          Fi(fo, "GITHUB_SIGN_IN_METHOD", "github.com"),
          w(vo, co),
          Fi(vo, "PROVIDER_ID", "google.com"),
          Fi(vo, "GOOGLE_SIGN_IN_METHOD", "google.com"),
          w(go, so),
          Fi(go, "PROVIDER_ID", "twitter.com"),
          Fi(go, "TWITTER_SIGN_IN_METHOD", "twitter.com"),
          (yo.prototype.ka = function (t) {
            return this.signInMethod == Io.EMAIL_LINK_SIGN_IN_METHOD
              ? Js(t, Is, { email: this.a, oobCode: this.f })
              : Js(t, Ks, { email: this.a, password: this.f });
          }),
          (yo.prototype.b = function (t, e) {
            return this.signInMethod == Io.EMAIL_LINK_SIGN_IN_METHOD
              ? Js(t, Ts, { idToken: e, email: this.a, oobCode: this.f })
              : Js(t, xs, { idToken: e, email: this.a, password: this.f });
          }),
          (yo.prototype.c = function (t, e) {
            return to(this.ka(t), e);
          }),
          (yo.prototype.w = function () {
            return {
              email: this.a,
              password: this.f,
              signInMethod: this.signInMethod,
            };
          }),
          qi(Io, { PROVIDER_ID: "password" }),
          qi(Io, { EMAIL_LINK_SIGN_IN_METHOD: "emailLink" }),
          qi(Io, { EMAIL_PASSWORD_SIGN_IN_METHOD: "password" }),
          (Ao.prototype.ka = function (t) {
            return t.gb(So(this));
          }),
          (Ao.prototype.b = function (t, e) {
            var n = So(this);
            return (n.idToken = e), Js(t, Bs, n);
          }),
          (Ao.prototype.c = function (t, e) {
            var n = So(this);
            return (n.operation = "REAUTH"), to((t = Js(t, Ws, n)), e);
          }),
          (Ao.prototype.w = function () {
            var t = { providerId: "phone" };
            return (
              this.a.fb && (t.verificationId = this.a.fb),
              this.a.eb && (t.verificationCode = this.a.eb),
              this.a.La && (t.temporaryProof = this.a.La),
              this.a.ea && (t.phoneNumber = this.a.ea),
              t
            );
          }),
          (No.prototype.gb = function (i, r) {
            var o = this.a.a;
            return ye(r.verify()).then(function (e) {
              if ("string" != typeof e)
                throw new T(
                  "argument-error",
                  "An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string."
                );
              if ("recaptcha" !== r.type)
                throw new T(
                  "argument-error",
                  'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.'
                );
              var t = m(i) ? i.session : null,
                n = m(i) ? i.phoneNumber : i,
                t =
                  t && t.type == $r
                    ? t.Ha().then(function (t) {
                        return Js(o, js, {
                          idToken: t,
                          phoneEnrollmentInfo: {
                            phoneNumber: n,
                            recaptchaToken: e,
                          },
                        }).then(function (t) {
                          return t.phoneSessionInfo.sessionInfo;
                        });
                      })
                    : t && t.type == Zr
                    ? t.Ha().then(function (t) {
                        return (
                          (t = {
                            mfaPendingCredential: t,
                            mfaEnrollmentId:
                              (i.multiFactorHint && i.multiFactorHint.uid) ||
                              i.multiFactorUid,
                            phoneSignInInfo: { recaptchaToken: e },
                          }),
                          Js(o, Us, t).then(function (t) {
                            return t.phoneResponseInfo.sessionInfo;
                          })
                        );
                      })
                    : Js(o, Ps, { phoneNumber: n, recaptchaToken: e });
              return t.then(
                function (t) {
                  return "function" == typeof r.reset && r.reset(), t;
                },
                function (t) {
                  throw ("function" == typeof r.reset && r.reset(), t);
                }
              );
            });
          }),
          qi(No, { PROVIDER_ID: "phone" }),
          qi(No, { PHONE_SIGN_IN_METHOD: "phone" }),
          (Ro.prototype.getUid = function () {
            var t = [];
            return (
              t.push(this.c),
              this.b && t.push(this.b),
              this.f && t.push(this.f),
              this.h && t.push(this.h),
              t.join("-")
            );
          }),
          (Ro.prototype.T = function () {
            return this.h;
          }),
          (Ro.prototype.w = function () {
            return {
              type: this.c,
              eventId: this.b,
              urlResponse: this.g,
              sessionId: this.f,
              postBody: this.i,
              tenantId: this.h,
              error: this.a && this.a.w(),
            };
          });
        var Lo,
          xo = null;
        function Mo(t) {
          var e = "unauthorized-domain",
            n = void 0,
            i = Cn(t);
          (t = i.a),
            "chrome-extension" == (i = i.c)
              ? (n = jt(
                  "This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",
                  t
                ))
              : "http" == i || "https" == i
              ? (n = jt(
                  "This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",
                  t
                ))
              : (e = "operation-not-supported-in-this-environment"),
            T.call(this, e, n);
        }
        function jo(t, e, n) {
          T.call(this, t, n),
            (t = e || {}).Kb && Fi(this, "email", t.Kb),
            t.ea && Fi(this, "phoneNumber", t.ea),
            t.credential && Fi(this, "credential", t.credential),
            t.$b && Fi(this, "tenantId", t.$b);
        }
        function Uo(t) {
          if (t.code) {
            var e = t.code || "";
            0 == e.indexOf(k) && (e = e.substring(k.length));
            var n = { credential: Oo(t), $b: t.tenantId };
            if (t.email) n.Kb = t.email;
            else if (t.phoneNumber) n.ea = t.phoneNumber;
            else if (!n.credential) return new T(e, t.message || void 0);
            return new jo(e, n, t.message);
          }
          return null;
        }
        function Vo() {}
        function Fo(t) {
          return t.c || (t.c = t.b());
        }
        function qo() {}
        function Ho(t) {
          if (
            t.f ||
            "undefined" != typeof XMLHttpRequest ||
            "undefined" == typeof ActiveXObject
          )
            return t.f;
          for (
            var e = [
                "MSXML2.XMLHTTP.6.0",
                "MSXML2.XMLHTTP.3.0",
                "MSXML2.XMLHTTP",
                "Microsoft.XMLHTTP",
              ],
              n = 0;
            n < e.length;
            n++
          ) {
            var i = e[n];
            try {
              return new ActiveXObject(i), (t.f = i);
            } catch (t) {}
          }
          throw Error(
            "Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"
          );
        }
        function Ko() {}
        function Go() {
          (this.a = new XDomainRequest()),
            (this.readyState = 0),
            (this.onreadystatechange = null),
            (this.responseType = this.responseText = this.response = ""),
            (this.status = -1),
            (this.statusText = ""),
            (this.a.onload = b(this.qc, this)),
            (this.a.onerror = b(this.Tb, this)),
            (this.a.onprogress = b(this.rc, this)),
            (this.a.ontimeout = b(this.vc, this));
        }
        function Bo(t, e) {
          (t.readyState = e), t.onreadystatechange && t.onreadystatechange();
        }
        function Wo(t, e, n) {
          this.reset(t, e, n, void 0, void 0);
        }
        function Xo(t) {
          (this.f = t), (this.b = this.c = this.a = null);
        }
        function Jo(t, e) {
          (this.name = t), (this.value = e);
        }
        w(Mo, T),
          w(jo, T),
          (jo.prototype.w = function () {
            var t = { code: this.code, message: this.message };
            this.email && (t.email = this.email),
              this.phoneNumber && (t.phoneNumber = this.phoneNumber),
              this.tenantId && (t.tenantId = this.tenantId);
            var e = this.credential && this.credential.w();
            return e && lt(t, e), t;
          }),
          (jo.prototype.toJSON = function () {
            return this.w();
          }),
          (Vo.prototype.c = null),
          w(qo, Vo),
          (qo.prototype.a = function () {
            var t = Ho(this);
            return t ? new ActiveXObject(t) : new XMLHttpRequest();
          }),
          (qo.prototype.b = function () {
            var t = {};
            return Ho(this) && ((t[0] = !0), (t[1] = !0)), t;
          }),
          (Lo = new qo()),
          w(Ko, Vo),
          (Ko.prototype.a = function () {
            var t = new XMLHttpRequest();
            if ("withCredentials" in t) return t;
            if ("undefined" != typeof XDomainRequest) return new Go();
            throw Error("Unsupported browser");
          }),
          (Ko.prototype.b = function () {
            return {};
          }),
          ((t = Go.prototype).open = function (t, e, n) {
            if (null != n && !n)
              throw Error("Only async requests are supported.");
            this.a.open(t, e);
          }),
          (t.send = function (t) {
            if (t) {
              if ("string" != typeof t)
                throw Error("Only string data is supported");
              this.a.send(t);
            } else this.a.send();
          }),
          (t.abort = function () {
            this.a.abort();
          }),
          (t.setRequestHeader = function () {}),
          (t.getResponseHeader = function (t) {
            return "content-type" == t.toLowerCase() ? this.a.contentType : "";
          }),
          (t.qc = function () {
            (this.status = 200),
              (this.response = this.responseText = this.a.responseText),
              Bo(this, 4);
          }),
          (t.Tb = function () {
            (this.status = 500),
              (this.response = this.responseText = ""),
              Bo(this, 4);
          }),
          (t.vc = function () {
            this.Tb();
          }),
          (t.rc = function () {
            (this.status = 200), Bo(this, 1);
          }),
          (t.getAllResponseHeaders = function () {
            return "content-type: " + this.a.contentType;
          }),
          (Wo.prototype.a = null),
          (Wo.prototype.reset = function (t, e, n, i, r) {
            delete this.a;
          }),
          (Jo.prototype.toString = function () {
            return this.name;
          });
        var Yo = new Jo("SEVERE", 1e3),
          zo = new Jo("WARNING", 900),
          $o = new Jo("CONFIG", 700),
          Zo = new Jo("FINE", 500);
        Xo.prototype.log = function (t, e, n) {
          if (
            t.value >=
            (function t(e) {
              return (
                e.c ||
                (e.a ? t(e.a) : (D("Root logger has no level set."), null))
              );
            })(this).value
          )
            for (
              v(e) && (e = e()),
                t = new Wo(t, String(e), this.f),
                n && (t.a = n),
                n = this;
              n;

            )
              n = n.a;
        };
        var Qo,
          ta = {},
          ea = null;
        function na(t) {
          var e, n, i;
          return (
            ea || ((ea = new Xo("")), ((ta[""] = ea).c = $o)),
            (e = ta[t]) ||
              ((e = new Xo(t)),
              (i = t.lastIndexOf(".")),
              (n = t.substr(i + 1)),
              (i = na(t.substr(0, i))).b || (i.b = {}),
              ((i.b[n] = e).a = i),
              (ta[t] = e)),
            e
          );
        }
        function ia(t, e) {
          t && t.log(Zo, e, void 0);
        }
        function ra(t) {
          this.f = t;
        }
        function oa(t) {
          fn.call(this),
            (this.u = t),
            (this.h = void 0),
            (this.readyState = aa),
            (this.status = 0),
            (this.responseType =
              this.responseText =
              this.response =
              this.statusText =
                ""),
            (this.onreadystatechange = null),
            (this.l = new Headers()),
            (this.b = null),
            (this.s = "GET"),
            (this.f = ""),
            (this.a = !1),
            (this.i = na("goog.net.FetchXmlHttp")),
            (this.m = this.c = this.g = null);
        }
        w(ra, Vo),
          (ra.prototype.a = function () {
            return new oa(this.f);
          }),
          (ra.prototype.b =
            ((Qo = {}),
            function () {
              return Qo;
            })),
          w(oa, fn);
        var aa = 0;
        function sa(t) {
          t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t));
        }
        function ua(t) {
          (t.readyState = 4), (t.g = null), (t.c = null), (t.m = null), ca(t);
        }
        function ca(t) {
          t.onreadystatechange && t.onreadystatechange.call(t);
        }
        function ha(t) {
          fn.call(this),
            (this.headers = new wn()),
            (this.D = t || null),
            (this.c = !1),
            (this.C = this.a = null),
            (this.h = this.P = this.l = ""),
            (this.f = this.N = this.i = this.J = !1),
            (this.g = 0),
            (this.s = null),
            (this.m = la),
            (this.u = this.S = !1);
        }
        ((t = oa.prototype).open = function (t, e) {
          if (this.readyState != aa)
            throw (this.abort(), Error("Error reopening a connection"));
          (this.s = t), (this.f = e), (this.readyState = 1), ca(this);
        }),
          (t.send = function (t) {
            if (1 != this.readyState)
              throw (this.abort(), Error("need to call open() first. "));
            this.a = !0;
            var e = {
              headers: this.l,
              method: this.s,
              credentials: this.h,
              cache: void 0,
            };
            t && (e.body = t),
              this.u
                .fetch(new Request(this.f, e))
                .then(this.uc.bind(this), this.Va.bind(this));
          }),
          (t.abort = function () {
            (this.response = this.responseText = ""),
              (this.l = new Headers()),
              (this.status = 0),
              this.c && this.c.cancel("Request was aborted."),
              1 <= this.readyState &&
                this.a &&
                4 != this.readyState &&
                ((this.a = !1), ua(this)),
              (this.readyState = aa);
          }),
          (t.uc = function (t) {
            this.a &&
              ((this.g = t),
              this.b ||
                ((this.status = this.g.status),
                (this.statusText = this.g.statusText),
                (this.b = t.headers),
                (this.readyState = 2),
                ca(this)),
              this.a &&
                ((this.readyState = 3),
                ca(this),
                this.a &&
                  ("arraybuffer" === this.responseType
                    ? t
                        .arrayBuffer()
                        .then(this.sc.bind(this), this.Va.bind(this))
                    : void 0 !== l.ReadableStream && "body" in t
                    ? ((this.response = this.responseText = ""),
                      (this.c = t.body.getReader()),
                      (this.m = new TextDecoder()),
                      sa(this))
                    : t.text().then(this.tc.bind(this), this.Va.bind(this)))));
          }),
          (t.pc = function (t) {
            var e;
            this.a &&
              ((e = this.m.decode(t.value || new Uint8Array(0), {
                stream: !t.done,
              })) && (this.response = this.responseText += e),
              (t.done ? ua : ca)(this),
              3 == this.readyState && sa(this));
          }),
          (t.tc = function (t) {
            this.a && ((this.response = this.responseText = t), ua(this));
          }),
          (t.sc = function (t) {
            this.a && ((this.response = t), ua(this));
          }),
          (t.Va = function (t) {
            var e = this.i;
            e &&
              e.log(
                zo,
                "Failed to fetch url " + this.f,
                t instanceof Error ? t : Error(t)
              ),
              this.a && ua(this);
          }),
          (t.setRequestHeader = function (t, e) {
            this.l.append(t, e);
          }),
          (t.getResponseHeader = function (t) {
            return this.b
              ? this.b.get(t.toLowerCase()) || ""
              : ((t = this.i) &&
                  t.log(
                    zo,
                    "Attempting to get response header but no headers have been received for url: " +
                      this.f,
                    void 0
                  ),
                "");
          }),
          (t.getAllResponseHeaders = function () {
            if (!this.b) {
              var t = this.i;
              return (
                t &&
                  t.log(
                    zo,
                    "Attempting to get all response headers but no headers have been received for url: " +
                      this.f,
                    void 0
                  ),
                ""
              );
            }
            for (var t = [], e = this.b.entries(), n = e.next(); !n.done; )
              (n = n.value), t.push(n[0] + ": " + n[1]), (n = e.next());
            return t.join("\r\n");
          }),
          Object.defineProperty(oa.prototype, "withCredentials", {
            get: function () {
              return "include" === this.h;
            },
            set: function (t) {
              this.h = t ? "include" : "same-origin";
            },
          }),
          w(ha, fn);
        var la = "";
        ha.prototype.b = na("goog.net.XhrIo");
        var fa = /^https?$/i,
          da = ["POST", "PUT"];
        function pa(e, t, n, i, r) {
          if (e.a)
            throw Error(
              "[goog.net.XhrIo] Object is active with another request=" +
                e.l +
                "; newUri=" +
                t
            );
          (n = n ? n.toUpperCase() : "GET"),
            (e.l = t),
            (e.h = ""),
            (e.P = n),
            (e.J = !1),
            (e.c = !0),
            (e.a = (e.D || Lo).a()),
            (e.C = e.D ? Fo(e.D) : Fo(Lo)),
            (e.a.onreadystatechange = b(e.Wb, e));
          try {
            ia(e.b, Ea(e, "Opening Xhr")),
              (e.N = !0),
              e.a.open(n, String(t), !0),
              (e.N = !1);
          } catch (t) {
            return (
              ia(e.b, Ea(e, "Error opening Xhr: " + t.message)), void ma(e, t)
            );
          }
          t = i || "";
          var o,
            a = new wn(e.headers);
          r &&
            (function (t, e) {
              if (t.forEach && "function" == typeof t.forEach)
                t.forEach(e, void 0);
              else if (p(t) || "string" == typeof t) V(t, e, void 0);
              else
                for (var n = yn(t), i = bn(t), r = i.length, o = 0; o < r; o++)
                  e.call(void 0, i[o], n && n[o], t);
            })(r, function (t, e) {
              a.set(e, t);
            }),
            (r = (function (t) {
              t: {
                for (
                  var e = va,
                    n = t.length,
                    i = "string" == typeof t ? t.split("") : t,
                    r = 0;
                  r < n;
                  r++
                )
                  if (r in i && e.call(void 0, i[r], r, t)) {
                    e = r;
                    break t;
                  }
                e = -1;
              }
              return e < 0 ? null : "string" == typeof t ? t.charAt(e) : t[e];
            })(a.Y())),
            (i = l.FormData && t instanceof l.FormData),
            !K(da, n) ||
              r ||
              i ||
              a.set(
                "Content-Type",
                "application/x-www-form-urlencoded;charset=utf-8"
              ),
            a.forEach(function (t, e) {
              this.a.setRequestHeader(e, t);
            }, e),
            e.m && (e.a.responseType = e.m),
            "withCredentials" in e.a &&
              e.a.withCredentials !== e.S &&
              (e.a.withCredentials = e.S);
          try {
            wa(e),
              0 < e.g &&
                ((e.u =
                  ((o = e.a),
                  Ht &&
                    $t(9) &&
                    "number" == typeof o.timeout &&
                    void 0 !== o.ontimeout)),
                ia(
                  e.b,
                  Ea(
                    e,
                    "Will abort after " + e.g + "ms if incomplete, xhr2 " + e.u
                  )
                ),
                e.u
                  ? ((e.a.timeout = e.g), (e.a.ontimeout = b(e.Ma, e)))
                  : (e.s = mn(e.Ma, e.g, e))),
              ia(e.b, Ea(e, "Sending request")),
              (e.i = !0),
              e.a.send(t),
              (e.i = !1);
          } catch (t) {
            ia(e.b, Ea(e, "Send error: " + t.message)), ma(e, t);
          }
        }
        function va(t) {
          return "content-type" == t.toLowerCase();
        }
        function ma(t, e) {
          (t.c = !1),
            t.a && ((t.f = !0), t.a.abort(), (t.f = !1)),
            (t.h = e),
            ga(t),
            ya(t);
        }
        function ga(t) {
          t.J ||
            ((t.J = !0), t.dispatchEvent("complete"), t.dispatchEvent("error"));
        }
        function ba(e) {
          if (e.c && void 0 !== h)
            if (e.C[1] && 4 == Ia(e) && 2 == Ta(e))
              ia(e.b, Ea(e, "Local request error detected and ignored"));
            else if (e.i && 4 == Ia(e)) mn(e.Wb, 0, e);
            else if ((e.dispatchEvent("readystatechange"), 4 == Ia(e))) {
              ia(e.b, Ea(e, "Request complete")), (e.c = !1);
              try {
                var t,
                  n,
                  i,
                  r,
                  o = Ta(e);
                t: switch (o) {
                  case 200:
                  case 201:
                  case 202:
                  case 204:
                  case 206:
                  case 304:
                  case 1223:
                    var a = !0;
                    break t;
                  default:
                    a = !1;
                }
                if (
                  ((t = a) ||
                    ((n = 0 === o) &&
                      (!(r = String(e.l).match(En)[1] || null) &&
                        l.self &&
                        l.self.location &&
                        (r = (i = l.self.location.protocol).substr(
                          0,
                          i.length - 1
                        )),
                      (n = !fa.test(r ? r.toLowerCase() : ""))),
                    (t = n)),
                  t)
                )
                  e.dispatchEvent("complete"), e.dispatchEvent("success");
                else {
                  try {
                    var s = 2 < Ia(e) ? e.a.statusText : "";
                  } catch (t) {
                    ia(e.b, "Can not get status: " + t.message), (s = "");
                  }
                  (e.h = s + " [" + Ta(e) + "]"), ga(e);
                }
              } finally {
                ya(e);
              }
            }
        }
        function ya(e, t) {
          if (e.a) {
            wa(e);
            var n = e.a,
              i = e.C[0] ? a : null;
            (e.a = null), (e.C = null), t || e.dispatchEvent("ready");
            try {
              n.onreadystatechange = i;
            } catch (t) {
              (e = e.b) &&
                e.log(
                  Yo,
                  "Problem encountered resetting onreadystatechange: " +
                    t.message,
                  void 0
                );
            }
          }
        }
        function wa(t) {
          t.a && t.u && (t.a.ontimeout = null),
            t.s && (l.clearTimeout(t.s), (t.s = null));
        }
        function Ia(t) {
          return t.a ? t.a.readyState : 0;
        }
        function Ta(t) {
          try {
            return 2 < Ia(t) ? t.a.status : -1;
          } catch (t) {
            return -1;
          }
        }
        function Ea(t, e) {
          return e + " [" + t.P + " " + t.l + " " + Ta(t) + "]";
        }
        function Aa(t) {
          var e = xa;
          (this.g = []),
            (this.u = e),
            (this.s = t || null),
            (this.f = this.a = !1),
            (this.c = void 0),
            (this.v = this.C = this.i = !1),
            (this.h = 0),
            (this.b = null),
            (this.l = 0);
        }
        function ka(t, e, n) {
          (t.a = !0), (t.c = n), (t.f = !e), Oa(t);
        }
        function Sa(t) {
          if (t.a) {
            if (!t.v) throw new Ca();
            t.v = !1;
          }
        }
        function Na(t, e, n, i) {
          t.g.push([e, n, i]), t.a && Oa(t);
        }
        function _a(t) {
          return H(t.g, function (t) {
            return v(t[1]);
          });
        }
        function Oa(e) {
          var n;
          e.h &&
            e.a &&
            _a(e) &&
            ((i = e.h),
            (n = Pa[i]) && (l.clearTimeout(n.a), delete Pa[i]),
            (e.h = 0)),
            e.b && (e.b.l--, delete e.b);
          for (var i = e.c, t = (n = !1); e.g.length && !e.i; ) {
            var r = (a = e.g.shift())[0],
              o = a[1],
              a = a[2];
            if ((r = e.f ? o : r))
              try {
                var s = r.call(a || e.s, i);
                void 0 !== s &&
                  ((e.f = e.f && (s == i || s instanceof Error)),
                  (e.c = i = s)),
                  (O(i) ||
                    ("function" == typeof l.Promise &&
                      i instanceof l.Promise)) &&
                    ((t = !0), (e.i = !0));
              } catch (t) {
                (i = t), (e.f = !0), _a(e) || (n = !0);
              }
          }
          (e.c = i),
            t &&
              ((s = b(e.m, e, !0)),
              (t = b(e.m, e, !1)),
              i instanceof Aa ? (Na(i, s, t), (i.C = !0)) : i.then(s, t)),
            n && ((i = new Da(i)), (Pa[i.a] = i), (e.h = i.a));
        }
        function Ca() {
          C.call(this);
        }
        function Ra() {
          C.call(this);
        }
        function Da(t) {
          (this.a = l.setTimeout(b(this.c, this), 0)), (this.b = t);
        }
        ((t = ha.prototype).Ma = function () {
          void 0 !== h &&
            this.a &&
            ((this.h = "Timed out after " + this.g + "ms, aborting"),
            ia(this.b, Ea(this, this.h)),
            this.dispatchEvent("timeout"),
            this.abort(8));
        }),
          (t.abort = function () {
            this.a &&
              this.c &&
              (ia(this.b, Ea(this, "Aborting")),
              (this.c = !1),
              (this.f = !0),
              this.a.abort(),
              (this.f = !1),
              this.dispatchEvent("complete"),
              this.dispatchEvent("abort"),
              ya(this));
          }),
          (t.Da = function () {
            this.a &&
              (this.c &&
                ((this.c = !1), (this.f = !0), this.a.abort(), (this.f = !1)),
              ya(this, !0)),
              ha.bb.Da.call(this);
          }),
          (t.Wb = function () {
            this.ya || (this.N || this.i || this.f ? ba(this) : this.Jc());
          }),
          (t.Jc = function () {
            ba(this);
          }),
          (t.getResponse = function () {
            try {
              if (!this.a) return null;
              if ("response" in this.a) return this.a.response;
              switch (this.m) {
                case la:
                case "text":
                  return this.a.responseText;
                case "arraybuffer":
                  if ("mozResponseArrayBuffer" in this.a)
                    return this.a.mozResponseArrayBuffer;
              }
              var t = this.b;
              return (
                t &&
                  t.log(
                    Yo,
                    "Response type " +
                      this.m +
                      " is not supported on this browser",
                    void 0
                  ),
                null
              );
            } catch (t) {
              return ia(this.b, "Can not get response: " + t.message), null;
            }
          }),
          (Aa.prototype.cancel = function (t) {
            var e;
            this.a
              ? this.c instanceof Aa && this.c.cancel()
              : (this.b &&
                  ((e = this.b),
                  delete this.b,
                  t ? e.cancel(t) : (e.l--, e.l <= 0 && e.cancel())),
                this.u ? this.u.call(this.s, this) : (this.v = !0),
                this.a || ((t = new Ra()), Sa(this), ka(this, !1, t)));
          }),
          (Aa.prototype.m = function (t, e) {
            (this.i = !1), ka(this, t, e);
          }),
          (Aa.prototype.then = function (t, e, n) {
            var i,
              r,
              o = new fe(function (t, e) {
                (i = t), (r = e);
              });
            return (
              Na(this, i, function (t) {
                t instanceof Ra ? o.cancel() : r(t);
              }),
              o.then(t, e, n)
            );
          }),
          (Aa.prototype.$goog_Thenable = !0),
          w(Ca, C),
          (Ca.prototype.message = "Deferred has already fired"),
          (Ca.prototype.name = "AlreadyCalledError"),
          w(Ra, C),
          (Ra.prototype.message = "Deferred was canceled"),
          (Ra.prototype.name = "CanceledError"),
          (Da.prototype.c = function () {
            throw (delete Pa[this.a], this.b);
          });
        var Pa = {};
        function La(t) {
          var e = document,
            n = wt(t).toString(),
            i = ae(document, "SCRIPT"),
            r = { Xb: i, Ma: void 0 },
            o = new Aa(r),
            a = window.setTimeout(function () {
              Ma(i, !0);
              var t = new Va(Ua, "Timeout reached for loading script " + n);
              Sa(o), ka(o, !1, t);
            }, 5e3);
          return (
            (r.Ma = a),
            (i.onload = i.onreadystatechange =
              function () {
                (i.readyState &&
                  "loaded" != i.readyState &&
                  "complete" != i.readyState) ||
                  (Ma(i, !1, a), Sa(o), ka(o, !0, null));
              }),
            (i.onerror = function () {
              Ma(i, !0, a);
              var t = new Va(ja, "Error while loading script " + n);
              Sa(o), ka(o, !1, t);
            }),
            lt((r = {}), { type: "text/javascript", charset: "UTF-8" }),
            ee(i, r),
            (r = t),
            ft((t = i), "HTMLScriptElement"),
            (t.src = wt(r)),
            (r =
              (r = t.ownerDocument && t.ownerDocument.defaultView) && r != l
                ? f(r.document)
                : (s = null === s ? f(l.document) : s)) &&
              t.setAttribute("nonce", r),
            ((e = ((r = e) || document).getElementsByTagName("HEAD")) &&
            0 != e.length
              ? e[0]
              : r.documentElement
            ).appendChild(i),
            o
          );
        }
        function xa() {
          var t;
          this &&
            this.Xb &&
            (t = this.Xb) &&
            "SCRIPT" == t.tagName &&
            Ma(t, !0, this.Ma);
        }
        function Ma(t, e, n) {
          null != n && l.clearTimeout(n),
            (t.onload = a),
            (t.onerror = a),
            (t.onreadystatechange = a),
            e &&
              window.setTimeout(function () {
                t && t.parentNode && t.parentNode.removeChild(t);
              }, 0);
        }
        var ja = 0,
          Ua = 1;
        function Va(t, e) {
          var n = "Jsloader error (code #" + t + ")";
          e && (n += ": " + e), C.call(this, n), (this.code = t);
        }
        function Fa(t) {
          this.f = t;
        }
        function qa(t, e, n) {
          if (
            ((this.c = t),
            (this.l =
              (t = e || {}).secureTokenEndpoint ||
              "https://securetoken.googleapis.com/v1/token"),
            (this.m = t.secureTokenTimeout || Ga),
            (this.g = ct(t.secureTokenHeaders || Ba)),
            (this.h =
              t.firebaseEndpoint ||
              "https://www.googleapis.com/identitytoolkit/v3/relyingparty/"),
            (this.i =
              t.identityPlatformEndpoint ||
              "https://identitytoolkit.googleapis.com/v2/"),
            (this.v = t.firebaseTimeout || Wa),
            (this.a = ct(t.firebaseHeaders || Xa)),
            n &&
              ((this.a["X-Client-Version"] = n),
              (this.g["X-Client-Version"] = n)),
            (n = "Node" == li()),
            !(n =
              l.XMLHttpRequest ||
              (n &&
                Zl.default.INTERNAL.node &&
                Zl.default.INTERNAL.node.XMLHttpRequest)) && !hi())
          )
            throw new T(
              "internal-error",
              "The XMLHttpRequest compatibility library was not found."
            );
          (this.f = void 0),
            hi()
              ? (this.f = new ra(self))
              : fi()
              ? (this.f = new Fa(n))
              : (this.f = new Ko()),
            (this.b = null);
        }
        w(Va, C),
          w(Fa, Vo),
          (Fa.prototype.a = function () {
            return new this.f();
          }),
          (Fa.prototype.b = function () {
            return {};
          });
        var Ha,
          Ka = "idToken",
          Ga = new Ri(3e4, 6e4),
          Ba = { "Content-Type": "application/x-www-form-urlencoded" },
          Wa = new Ri(3e4, 6e4),
          Xa = { "Content-Type": "application/json" };
        function Ja(t, e) {
          e ? (t.a["X-Firebase-Locale"] = e) : delete t.a["X-Firebase-Locale"];
        }
        function Ya(t, e) {
          e &&
            ((t.l = za("https://securetoken.googleapis.com/v1/token", e)),
            (t.h = za(
              "https://www.googleapis.com/identitytoolkit/v3/relyingparty/",
              e
            )),
            (t.i = za("https://identitytoolkit.googleapis.com/v2/", e)));
        }
        function za(t, e) {
          return (
            (t = Cn(t)),
            (e = Cn(e.url)),
            (t.f = t.a + t.f),
            kn(t, e.c),
            (t.a = e.a),
            Sn(t, e.g),
            t.toString()
          );
        }
        function $a(t, e) {
          e
            ? ((t.a["X-Client-Version"] = e), (t.g["X-Client-Version"] = e))
            : (delete t.a["X-Client-Version"], delete t.g["X-Client-Version"]);
        }
        function Za(t, e, n, i, r, o, a) {
          var s;
          (t =
            (((s =
              vi((s = bi())) == pi &&
              (s = s.match(/\sChrome\/(\d+)/i)) &&
              2 == s.length
                ? parseInt(s[1], 10)
                : null) &&
              s < 30) ||
              (Ht && Zt && !(9 < Zt))) &&
            !hi()
              ? ((Ha =
                  Ha ||
                  new fe(function (t, e) {
                    var n, i;
                    (n = t),
                      (i = e),
                      ((window.gapi || {}).client || {}).request
                        ? n()
                        : ((l[ts] = function () {
                            ((window.gapi || {}).client || {}).request
                              ? n()
                              : i(Error("CORS_UNSUPPORTED"));
                          }),
                          (function (t, e) {
                            Na(t, null, e, void 0);
                          })(La(It(Qa, { onload: ts })), function () {
                            i(Error("CORS_UNSUPPORTED"));
                          }));
                  })),
                b(t.s, t))
              : b(t.u, t))(e, n, i, r, o, a);
        }
        (qa.prototype.T = function () {
          return this.b;
        }),
          (qa.prototype.u = function (t, n, e, i, r, o) {
            if (
              hi() &&
              (void 0 === l.fetch ||
                void 0 === l.Headers ||
                void 0 === l.Request)
            )
              throw new T(
                "operation-not-supported-in-this-environment",
                "fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment."
              );
            var a,
              s = new ha(this.f);
            o &&
              ((s.g = Math.max(0, o)),
              (a = setTimeout(function () {
                s.dispatchEvent("timeout");
              }, o))),
              dn(s, "complete", function () {
                a && clearTimeout(a);
                var e = null;
                try {
                  e =
                    JSON.parse(
                      (function (e) {
                        try {
                          return e.a ? e.a.responseText : "";
                        } catch (t) {
                          return (
                            ia(e.b, "Can not get responseText: " + t.message),
                            ""
                          );
                        }
                      })(this)
                    ) || null;
                } catch (t) {
                  e = null;
                }
                n && n(e);
              }),
              pn(s, "ready", function () {
                a && clearTimeout(a), Me(this);
              }),
              pn(s, "timeout", function () {
                a && clearTimeout(a), Me(this), n && n(null);
              }),
              pa(s, t, e, i, r);
          });
        var Qa = new dt(
            gt,
            "https://apis.google.com/js/client.js?onload=%{onload}"
          ),
          ts = "__fcb" + Math.floor(1e6 * Math.random()).toString();
        function es(t, e, n, i, r, o, a) {
          var s = Cn(e + n);
          _n(s, "key", t.c), a && _n(s, "cb", Date.now().toString());
          var u = "GET" == i;
          if (u) for (var c in r) r.hasOwnProperty(c) && _n(s, c, r[c]);
          return new fe(function (e, n) {
            Za(
              t,
              s.toString(),
              function (t) {
                t
                  ? t.error
                    ? n(zs(t, o || {}))
                    : e(t)
                  : n(new T("network-request-failed"));
              },
              i,
              u ? void 0 : Jn(Si(r)),
              t.a,
              t.v.get()
            );
          });
        }
        function ns(t) {
          if ("string" != typeof (t = t.email) || !ai.test(t))
            throw new T("invalid-email");
        }
        function is(t) {
          "email" in t && ns(t);
        }
        function rs(t) {
          if (!t[Ka]) {
            if (t.mfaPendingCredential)
              throw new T("multi-factor-auth-required", null, ct(t));
            throw new T("internal-error");
          }
        }
        function os(t) {
          if (t.phoneNumber || t.temporaryProof) {
            if (!t.phoneNumber || !t.temporaryProof)
              throw new T("internal-error");
          } else {
            if (!t.sessionInfo) throw new T("missing-verification-id");
            if (!t.code) throw new T("missing-verification-code");
          }
        }
        (qa.prototype.s = function (t, n, i, r, o) {
          var a = this;
          Ha.then(function () {
            window.gapi.client.setApiKey(a.c);
            var e = window.gapi.auth.getToken();
            window.gapi.auth.setToken(null),
              window.gapi.client.request({
                path: t,
                method: i,
                body: r,
                headers: o,
                authType: "none",
                callback: function (t) {
                  window.gapi.auth.setToken(e), n && n(t);
                },
              });
          }).o(function (t) {
            n &&
              n({ error: { message: (t && t.message) || "CORS_UNSUPPORTED" } });
          });
        }),
          (qa.prototype.Ab = function () {
            return Js(this, Ms, {});
          }),
          (qa.prototype.Cb = function (t, e) {
            return Js(this, Ls, { idToken: t, email: e });
          }),
          (qa.prototype.Db = function (t, e) {
            return Js(this, xs, { idToken: t, password: e });
          });
        var as = { displayName: "DISPLAY_NAME", photoUrl: "PHOTO_URL" };
        function ss(t) {
          if (!t.phoneVerificationInfo) throw new T("internal-error");
          if (!t.phoneVerificationInfo.sessionInfo)
            throw new T("missing-verification-id");
          if (!t.phoneVerificationInfo.code)
            throw new T("missing-verification-code");
        }
        function us(t) {
          if (!t.requestUri || (!t.sessionId && !t.postBody && !t.pendingToken))
            throw new T("internal-error");
        }
        function cs(t, e) {
          return (
            e.oauthIdToken &&
              e.providerId &&
              0 == e.providerId.indexOf("oidc.") &&
              !e.pendingToken &&
              (t.sessionId
                ? (e.nonce = t.sessionId)
                : t.postBody &&
                  Gn((t = new Fn(t.postBody)), "nonce") &&
                  (e.nonce = t.get("nonce"))),
            e
          );
        }
        function hs(t) {
          var e = null;
          if (
            (t.needConfirmation
              ? ((t.code = "account-exists-with-different-credential"),
                (e = Uo(t)))
              : "FEDERATED_USER_ID_ALREADY_LINKED" == t.errorMessage
              ? ((t.code = "credential-already-in-use"), (e = Uo(t)))
              : "EMAIL_EXISTS" == t.errorMessage
              ? ((t.code = "email-already-in-use"), (e = Uo(t)))
              : t.errorMessage && (e = Ys(t.errorMessage)),
            e)
          )
            throw e;
          rs(t);
        }
        function ls(t, e) {
          return (e.returnIdpCredential = !0), Js(t, Vs, e);
        }
        function fs(t, e) {
          return (e.returnIdpCredential = !0), Js(t, qs, e);
        }
        function ds(t, e) {
          return (
            (e.returnIdpCredential = !0), (e.autoCreate = !1), Js(t, Fs, e)
          );
        }
        function ps(t) {
          if (!t.oobCode) throw new T("invalid-action-code");
        }
        ((t = qa.prototype).Eb = function (t, i) {
          var r = { idToken: t },
            o = [];
          return (
            st(as, function (t, e) {
              var n = i[e];
              null === n ? o.push(t) : e in i && (r[e] = n);
            }),
            o.length && (r.deleteAttribute = o),
            Js(this, Ls, r)
          );
        }),
          (t.wb = function (t, e) {
            return (
              lt((t = { requestType: "PASSWORD_RESET", email: t }), e),
              Js(this, Os, t)
            );
          }),
          (t.xb = function (t, e) {
            return (
              lt((t = { requestType: "EMAIL_SIGNIN", email: t }), e),
              Js(this, Ss, t)
            );
          }),
          (t.vb = function (t, e) {
            return (
              lt((t = { requestType: "VERIFY_EMAIL", idToken: t }), e),
              Js(this, Ns, t)
            );
          }),
          (t.Fb = function (t, e, n) {
            return (
              lt(
                (t = {
                  requestType: "VERIFY_AND_CHANGE_EMAIL",
                  idToken: t,
                  newEmail: e,
                }),
                n
              ),
              Js(this, _s, t)
            );
          }),
          (t.gb = function (t) {
            return Js(this, Gs, t);
          }),
          (t.ob = function (t, e) {
            return Js(this, Ds, { oobCode: t, newPassword: e });
          }),
          (t.Sa = function (t) {
            return Js(this, ms, { oobCode: t });
          }),
          (t.kb = function (t) {
            return Js(this, vs, { oobCode: t });
          });
        var vs = { endpoint: "setAccountInfo", A: ps, Z: "email", B: !0 },
          ms = {
            endpoint: "resetPassword",
            A: ps,
            G: function (t) {
              var e = t.requestType;
              if (
                !e ||
                (!t.email &&
                  "EMAIL_SIGNIN" != e &&
                  "VERIFY_AND_CHANGE_EMAIL" != e)
              )
                throw new T("internal-error");
            },
            B: !0,
          },
          gs = {
            endpoint: "signupNewUser",
            A: function (t) {
              if ((ns(t), !t.password)) throw new T("weak-password");
            },
            G: rs,
            V: !0,
            B: !0,
          },
          bs = { endpoint: "createAuthUri", B: !0 },
          ys = { endpoint: "deleteAccount", O: ["idToken"] },
          ws = {
            endpoint: "setAccountInfo",
            O: ["idToken", "deleteProvider"],
            A: function (t) {
              if (!Array.isArray(t.deleteProvider))
                throw new T("internal-error");
            },
          },
          Is = {
            endpoint: "emailLinkSignin",
            O: ["email", "oobCode"],
            A: ns,
            G: rs,
            V: !0,
            B: !0,
          },
          Ts = {
            endpoint: "emailLinkSignin",
            O: ["idToken", "email", "oobCode"],
            A: ns,
            G: rs,
            V: !0,
          },
          Es = {
            endpoint: "accounts/mfaEnrollment:finalize",
            O: ["idToken", "phoneVerificationInfo"],
            A: ss,
            G: rs,
            B: !0,
            Na: !0,
          },
          As = {
            endpoint: "accounts/mfaSignIn:finalize",
            O: ["mfaPendingCredential", "phoneVerificationInfo"],
            A: ss,
            G: rs,
            B: !0,
            Na: !0,
          },
          ks = { endpoint: "getAccountInfo" },
          Ss = {
            endpoint: "getOobConfirmationCode",
            O: ["requestType"],
            A: function (t) {
              if ("EMAIL_SIGNIN" != t.requestType)
                throw new T("internal-error");
              ns(t);
            },
            Z: "email",
            B: !0,
          },
          Ns = {
            endpoint: "getOobConfirmationCode",
            O: ["idToken", "requestType"],
            A: function (t) {
              if ("VERIFY_EMAIL" != t.requestType)
                throw new T("internal-error");
            },
            Z: "email",
            B: !0,
          },
          _s = {
            endpoint: "getOobConfirmationCode",
            O: ["idToken", "newEmail", "requestType"],
            A: function (t) {
              if ("VERIFY_AND_CHANGE_EMAIL" != t.requestType)
                throw new T("internal-error");
            },
            Z: "email",
            B: !0,
          },
          Os = {
            endpoint: "getOobConfirmationCode",
            O: ["requestType"],
            A: function (t) {
              if ("PASSWORD_RESET" != t.requestType)
                throw new T("internal-error");
              ns(t);
            },
            Z: "email",
            B: !0,
          },
          Cs = { mb: !0, endpoint: "getProjectConfig", Vb: "GET" },
          Rs = {
            mb: !0,
            endpoint: "getRecaptchaParam",
            Vb: "GET",
            G: function (t) {
              if (!t.recaptchaSiteKey) throw new T("internal-error");
            },
          },
          Ds = { endpoint: "resetPassword", A: ps, Z: "email", B: !0 },
          Ps = {
            endpoint: "sendVerificationCode",
            O: ["phoneNumber", "recaptchaToken"],
            Z: "sessionInfo",
            B: !0,
          },
          Ls = { endpoint: "setAccountInfo", O: ["idToken"], A: is, V: !0 },
          xs = {
            endpoint: "setAccountInfo",
            O: ["idToken"],
            A: function (t) {
              if ((is(t), !t.password)) throw new T("weak-password");
            },
            G: rs,
            V: !0,
          },
          Ms = { endpoint: "signupNewUser", G: rs, V: !0, B: !0 },
          js = {
            endpoint: "accounts/mfaEnrollment:start",
            O: ["idToken", "phoneEnrollmentInfo"],
            A: function (t) {
              if (!t.phoneEnrollmentInfo) throw new T("internal-error");
              if (!t.phoneEnrollmentInfo.phoneNumber)
                throw new T("missing-phone-number");
              if (!t.phoneEnrollmentInfo.recaptchaToken)
                throw new T("missing-app-credential");
            },
            G: function (t) {
              if (!t.phoneSessionInfo || !t.phoneSessionInfo.sessionInfo)
                throw new T("internal-error");
            },
            B: !0,
            Na: !0,
          },
          Us = {
            endpoint: "accounts/mfaSignIn:start",
            O: ["mfaPendingCredential", "mfaEnrollmentId", "phoneSignInInfo"],
            A: function (t) {
              if (!t.phoneSignInInfo || !t.phoneSignInInfo.recaptchaToken)
                throw new T("missing-app-credential");
            },
            G: function (t) {
              if (!t.phoneResponseInfo || !t.phoneResponseInfo.sessionInfo)
                throw new T("internal-error");
            },
            B: !0,
            Na: !0,
          },
          Vs = {
            endpoint: "verifyAssertion",
            A: us,
            Za: cs,
            G: hs,
            V: !0,
            B: !0,
          },
          Fs = {
            endpoint: "verifyAssertion",
            A: us,
            Za: cs,
            G: function (t) {
              if (t.errorMessage && "USER_NOT_FOUND" == t.errorMessage)
                throw new T("user-not-found");
              if (t.errorMessage) throw Ys(t.errorMessage);
              rs(t);
            },
            V: !0,
            B: !0,
          },
          qs = {
            endpoint: "verifyAssertion",
            A: function (t) {
              if ((us(t), !t.idToken)) throw new T("internal-error");
            },
            Za: cs,
            G: hs,
            V: !0,
          },
          Hs = {
            endpoint: "verifyCustomToken",
            A: function (t) {
              if (!t.token) throw new T("invalid-custom-token");
            },
            G: rs,
            V: !0,
            B: !0,
          },
          Ks = {
            endpoint: "verifyPassword",
            A: function (t) {
              if ((ns(t), !t.password)) throw new T("wrong-password");
            },
            G: rs,
            V: !0,
            B: !0,
          },
          Gs = { endpoint: "verifyPhoneNumber", A: os, G: rs, B: !0 },
          Bs = {
            endpoint: "verifyPhoneNumber",
            A: function (t) {
              if (!t.idToken) throw new T("internal-error");
              os(t);
            },
            G: function (t) {
              if (t.temporaryProof)
                throw ((t.code = "credential-already-in-use"), Uo(t));
              rs(t);
            },
          },
          Ws = {
            Ib: { USER_NOT_FOUND: "user-not-found" },
            endpoint: "verifyPhoneNumber",
            A: os,
            G: rs,
            B: !0,
          },
          Xs = {
            endpoint: "accounts/mfaEnrollment:withdraw",
            O: ["idToken", "mfaEnrollmentId"],
            G: function (t) {
              if (!!t[Ka] ^ !!t.refreshToken) throw new T("internal-error");
            },
            B: !0,
            Na: !0,
          };
        function Js(t, e, n) {
          if (
            !(function (t, e) {
              if (!e || !e.length) return 1;
              if (t) {
                for (var n = 0; n < e.length; n++) {
                  var i = t[e[n]];
                  if (null == i || "" === i) return;
                }
                return 1;
              }
            })(n, e.O)
          )
            return we(new T("internal-error"));
          var i,
            r = !!e.Na,
            o = e.Vb || "POST";
          return ye(n)
            .then(e.A)
            .then(function () {
              return (
                e.V && (n.returnSecureToken = !0),
                e.B && t.b && void 0 === n.tenantId && (n.tenantId = t.b),
                es(t, r ? t.i : t.h, e.endpoint, o, n, e.Ib, e.mb || !1)
              );
            })
            .then(function (t) {
              return (i = t), e.Za ? e.Za(n, i) : i;
            })
            .then(e.G)
            .then(function () {
              if (!e.Z) return i;
              if (!(e.Z in i)) throw new T("internal-error");
              return i[e.Z];
            });
        }
        function Ys(t) {
          return zs({
            error: { errors: [{ message: t }], code: 400, message: t },
          });
        }
        function zs(t, e) {
          var n,
            i =
              ((t.error && t.error.errors && t.error.errors[0]) || {}).reason ||
              "",
            r = {
              keyInvalid: "invalid-api-key",
              ipRefererBlocked: "app-not-authorized",
            };
          if ((i = r[i] ? new T(r[i]) : null)) return i;
          for (n in ((i = (t.error && t.error.message) || ""),
          lt(
            (r = {
              INVALID_CUSTOM_TOKEN: "invalid-custom-token",
              CREDENTIAL_MISMATCH: "custom-token-mismatch",
              MISSING_CUSTOM_TOKEN: "internal-error",
              INVALID_IDENTIFIER: "invalid-email",
              MISSING_CONTINUE_URI: "internal-error",
              INVALID_EMAIL: "invalid-email",
              INVALID_PASSWORD: "wrong-password",
              USER_DISABLED: "user-disabled",
              MISSING_PASSWORD: "internal-error",
              EMAIL_EXISTS: "email-already-in-use",
              PASSWORD_LOGIN_DISABLED: "operation-not-allowed",
              INVALID_IDP_RESPONSE: "invalid-credential",
              INVALID_PENDING_TOKEN: "invalid-credential",
              FEDERATED_USER_ID_ALREADY_LINKED: "credential-already-in-use",
              MISSING_OR_INVALID_NONCE: "missing-or-invalid-nonce",
              INVALID_MESSAGE_PAYLOAD: "invalid-message-payload",
              INVALID_RECIPIENT_EMAIL: "invalid-recipient-email",
              INVALID_SENDER: "invalid-sender",
              EMAIL_NOT_FOUND: "user-not-found",
              RESET_PASSWORD_EXCEED_LIMIT: "too-many-requests",
              EXPIRED_OOB_CODE: "expired-action-code",
              INVALID_OOB_CODE: "invalid-action-code",
              MISSING_OOB_CODE: "internal-error",
              INVALID_PROVIDER_ID: "invalid-provider-id",
              CREDENTIAL_TOO_OLD_LOGIN_AGAIN: "requires-recent-login",
              INVALID_ID_TOKEN: "invalid-user-token",
              TOKEN_EXPIRED: "user-token-expired",
              USER_NOT_FOUND: "user-token-expired",
              CORS_UNSUPPORTED: "cors-unsupported",
              DYNAMIC_LINK_NOT_ACTIVATED: "dynamic-link-not-activated",
              INVALID_APP_ID: "invalid-app-id",
              TOO_MANY_ATTEMPTS_TRY_LATER: "too-many-requests",
              WEAK_PASSWORD: "weak-password",
              OPERATION_NOT_ALLOWED: "operation-not-allowed",
              USER_CANCELLED: "user-cancelled",
              CAPTCHA_CHECK_FAILED: "captcha-check-failed",
              INVALID_APP_CREDENTIAL: "invalid-app-credential",
              INVALID_CODE: "invalid-verification-code",
              INVALID_PHONE_NUMBER: "invalid-phone-number",
              INVALID_SESSION_INFO: "invalid-verification-id",
              INVALID_TEMPORARY_PROOF: "invalid-credential",
              MISSING_APP_CREDENTIAL: "missing-app-credential",
              MISSING_CODE: "missing-verification-code",
              MISSING_PHONE_NUMBER: "missing-phone-number",
              MISSING_SESSION_INFO: "missing-verification-id",
              QUOTA_EXCEEDED: "quota-exceeded",
              SESSION_EXPIRED: "code-expired",
              REJECTED_CREDENTIAL: "rejected-credential",
              INVALID_CONTINUE_URI: "invalid-continue-uri",
              MISSING_ANDROID_PACKAGE_NAME: "missing-android-pkg-name",
              MISSING_IOS_BUNDLE_ID: "missing-ios-bundle-id",
              UNAUTHORIZED_DOMAIN: "unauthorized-continue-uri",
              INVALID_DYNAMIC_LINK_DOMAIN: "invalid-dynamic-link-domain",
              INVALID_OAUTH_CLIENT_ID: "invalid-oauth-client-id",
              INVALID_CERT_HASH: "invalid-cert-hash",
              UNSUPPORTED_TENANT_OPERATION: "unsupported-tenant-operation",
              INVALID_TENANT_ID: "invalid-tenant-id",
              TENANT_ID_MISMATCH: "tenant-id-mismatch",
              ADMIN_ONLY_OPERATION: "admin-restricted-operation",
              INVALID_MFA_PENDING_CREDENTIAL: "invalid-multi-factor-session",
              MFA_ENROLLMENT_NOT_FOUND: "multi-factor-info-not-found",
              MISSING_MFA_PENDING_CREDENTIAL: "missing-multi-factor-session",
              MISSING_MFA_ENROLLMENT_ID: "missing-multi-factor-info",
              EMAIL_CHANGE_NEEDS_VERIFICATION:
                "email-change-needs-verification",
              SECOND_FACTOR_EXISTS: "second-factor-already-in-use",
              SECOND_FACTOR_LIMIT_EXCEEDED:
                "maximum-second-factor-count-exceeded",
              UNSUPPORTED_FIRST_FACTOR: "unsupported-first-factor",
              UNVERIFIED_EMAIL: "unverified-email",
            }),
            e || {}
          ),
          (e =
            (e = i.match(/^[^\s]+\s*:\s*([\s\S]*)$/)) && 1 < e.length
              ? e[1]
              : void 0),
          r))
            if (0 === i.indexOf(n)) return new T(r[n], e);
          return new T("internal-error", (e = !e && t ? ki(t) : e));
        }
        function $s(t) {
          var o;
          (this.b = t),
            (this.a = null),
            (this.sb =
              ((o = this),
              (eu =
                eu ||
                new fe(function (t, e) {
                  function n() {
                    Ci(),
                      yi("gapi.load")("gapi.iframes", {
                        callback: t,
                        ontimeout: function () {
                          Ci(), e(Error("Network Error"));
                        },
                        timeout: Qs.get(),
                      });
                  }
                  var i;
                  yi("gapi.iframes.Iframe")
                    ? t()
                    : yi("gapi.load")
                    ? n()
                    : ((i =
                        "__iframefcb" +
                        Math.floor(1e6 * Math.random()).toString()),
                      (l[i] = function () {
                        yi("gapi.load") ? n() : e(Error("Network Error"));
                      }),
                      ye(La((i = It(Zs, { onload: i })))).o(function () {
                        e(Error("Network Error"));
                      }));
                }).o(function (t) {
                  throw ((eu = null), t);
                })).then(function () {
                return new fe(function (i, r) {
                  yi("gapi.iframes.getContext")().open(
                    {
                      where: document.body,
                      url: o.b,
                      messageHandlersFilter: yi(
                        "gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"
                      ),
                      attributes: {
                        style: {
                          position: "absolute",
                          top: "-100px",
                          width: "1px",
                          height: "1px",
                        },
                      },
                      dontclear: !0,
                    },
                    function (t) {
                      function e() {
                        clearTimeout(n), i();
                      }
                      (o.a = t), o.a.restyle({ setHideOnLeave: !1 });
                      var n = setTimeout(function () {
                        r(Error("Network Error"));
                      }, tu.get());
                      t.ping(e).then(e, function () {
                        r(Error("Network Error"));
                      });
                    }
                  );
                });
              })));
        }
        var Zs = new dt(
            gt,
            "https://apis.google.com/js/api.js?onload=%{onload}"
          ),
          Qs = new Ri(3e4, 6e4),
          tu = new Ri(5e3, 15e3),
          eu = null;
        function nu(t, e, n, i) {
          (this.l = t),
            (this.h = e),
            (this.i = n),
            (this.g = i),
            (this.f = null),
            (t = this.g
              ? Rn((t = Cn(this.g.url)).c, t.a, t.g, "/emulator/auth/iframe")
              : Rn("https", this.l, null, "/__/auth/iframe")),
            (this.a = t),
            _n(this.a, "apiKey", this.h),
            _n(this.a, "appName", this.i),
            (this.b = null),
            (this.c = []);
        }
        function iu(t, e, n, i, r, o) {
          (this.u = t),
            (this.s = e),
            (this.c = n),
            (this.m = i),
            (this.v = o),
            (this.i = this.g = this.l = null),
            (this.a = r),
            (this.h = this.f = null);
        }
        function ru(t) {
          try {
            return Zl.default.app(t).auth().Ga();
          } catch (t) {
            return [];
          }
        }
        function ou(t, e, n, i, r, o) {
          (this.s = t),
            (this.g = e),
            (this.b = n),
            (this.f = o),
            (this.c = i || null),
            (this.i = r || null),
            (this.l = this.u = this.C = null),
            (this.h = []),
            (this.m = this.a = null);
        }
        function au(t) {
          var s = ti();
          return Js(t, Cs, {})
            .then(function (t) {
              return t.authorizedDomains || [];
            })
            .then(function (t) {
              t: {
                for (var e = (n = Cn(s)).c, n = n.a, i = 0; i < t.length; i++) {
                  var r = t[i],
                    o = n,
                    a = e;
                  if (
                    (o =
                      0 == r.indexOf("chrome-extension://")
                        ? Cn(r).a == o && "chrome-extension" == a
                        : ("http" == a || "https" == a) &&
                          (oi.test(r)
                            ? o == r
                            : ((r = r.split(".").join("\\.")),
                              new RegExp(
                                "^(.+\\." + r + "|" + r + ")$",
                                "i"
                              ).test(o))))
                  ) {
                    t = !0;
                    break t;
                  }
                }
                t = !1;
              }
              if (!t) throw new Mo(ti());
            });
        }
        function su(r) {
          return (
            r.m ||
            ((r.m = si().then(function () {
              var t, e, n, i;
              r.u ||
                ((t = r.c),
                (e = r.i),
                (n = ru(r.b)),
                ((i = new nu(r.s, r.g, r.b, r.f)).f = t),
                (i.b = e),
                (i.c = X(n || [])),
                (r.u = i.toString())),
                (r.v = new $s(r.u)),
                (function (i) {
                  if (!i.v) throw Error("IfcHandler must be initialized!");
                  !(function (t, e) {
                    t.sb.then(function () {
                      t.a.register(
                        "authEvent",
                        e,
                        yi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER")
                      );
                    });
                  })(i.v, function (t) {
                    var e = {};
                    if (t && t.authEvent) {
                      var n = !1;
                      for (t = Do(t.authEvent), e = 0; e < i.h.length; e++)
                        n = i.h[e](t) || n;
                      return ((e = {}).status = n ? "ACK" : "ERROR"), ye(e);
                    }
                    return (e.status = "ERROR"), ye(e);
                  });
                })(r);
            })),
            r.m)
          );
        }
        function uu(t) {
          return (
            t.l ||
              ((t.C = t.c ? gi(t.c, ru(t.b)) : null),
              (t.l = new qa(t.g, _(t.i), t.C)),
              t.f && Ya(t.l, t.f)),
            t.l
          );
        }
        function cu(t, e, n, i, r, o, a, s, u, c, h, l) {
          return (
            ((t = new iu(t, e, n, i, r, l)).l = o),
            (t.g = a),
            (t.i = s),
            (t.b = ct(u || null)),
            (t.f = c),
            t.zb(h).toString()
          );
        }
        function hu(t) {
          if (
            ((this.a =
              t ||
              (Zl.default.INTERNAL.reactNative &&
                Zl.default.INTERNAL.reactNative.AsyncStorage)),
            !this.a)
          )
            throw new T(
              "internal-error",
              "The React Native compatibility library was not found."
            );
          this.type = "asyncStorage";
        }
        function lu(t) {
          (this.b = t), (this.a = {}), (this.f = b(this.c, this));
        }
        (nu.prototype.toString = function () {
          return (
            this.f ? _n(this.a, "v", this.f) : Kn(this.a.b, "v"),
            this.b ? _n(this.a, "eid", this.b) : Kn(this.a.b, "eid"),
            this.c.length
              ? _n(this.a, "fw", this.c.join(","))
              : Kn(this.a.b, "fw"),
            this.a.toString()
          );
        }),
          (iu.prototype.zb = function (t) {
            return (this.h = t), this;
          }),
          (iu.prototype.toString = function () {
            var t;
            if (
              (_n(
                (t = this.v
                  ? Rn(
                      (t = Cn(this.v.url)).c,
                      t.a,
                      t.g,
                      "/emulator/auth/handler"
                    )
                  : Rn("https", this.u, null, "/__/auth/handler")),
                "apiKey",
                this.s
              ),
              _n(t, "appName", this.c),
              _n(t, "authType", this.m),
              this.a.isOAuthProvider)
            ) {
              var e = this.a;
              try {
                var n = Zl.default.app(this.c).auth().la();
              } catch (t) {
                n = null;
              }
              for (i in ((e.pb = n),
              _n(t, "providerId", this.a.providerId),
              (e = Si((n = this.a).Jb))))
                e[i] = e[i].toString();
              for (var i = n.Qc, e = ct(e), r = 0; r < i.length; r++) {
                var o = i[r];
                o in e && delete e[o];
              }
              n.qb && n.pb && !e[n.qb] && (e[n.qb] = n.pb),
                ut(e) || _n(t, "customParameters", ki(e));
            }
            if (
              ("function" == typeof this.a.Rb &&
                (n = this.a.Rb()).length &&
                _n(t, "scopes", n.join(",")),
              this.l ? _n(t, "redirectUrl", this.l) : Kn(t.b, "redirectUrl"),
              this.g ? _n(t, "eventId", this.g) : Kn(t.b, "eventId"),
              this.i ? _n(t, "v", this.i) : Kn(t.b, "v"),
              this.b)
            )
              for (var a in this.b)
                this.b.hasOwnProperty(a) && !On(t, a) && _n(t, a, this.b[a]);
            return (
              this.h ? _n(t, "tid", this.h) : Kn(t.b, "tid"),
              this.f ? _n(t, "eid", this.f) : Kn(t.b, "eid"),
              (a = ru(this.c)).length && _n(t, "fw", a.join(",")),
              t.toString()
            );
          }),
          ((t = ou.prototype).Pb = function (e, n, t) {
            var i = new T("popup-closed-by-user"),
              r = new T("web-storage-unsupported"),
              o = this,
              a = !1;
            return this.ma()
              .then(function () {
                var t, i;
                (i = { type: "webStorageSupport" }),
                  su((t = o))
                    .then(function () {
                      return (
                        (e = t.v),
                        (n = i),
                        e.sb.then(function () {
                          return new fe(function (t) {
                            e.a.send(
                              n.type,
                              n,
                              t,
                              yi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER")
                            );
                          });
                        })
                      );
                      var e, n;
                    })
                    .then(function (t) {
                      if (t && t.length && void 0 !== t[0].webStorageSupport)
                        return t[0].webStorageSupport;
                      throw Error();
                    })
                    .then(function (t) {
                      t || (e && ii(e), n(r), (a = !0));
                    });
              })
              .o(function () {})
              .then(function () {
                if (!a)
                  return (
                    (n = e),
                    new fe(function (e) {
                      return (function t() {
                        gn(2e3).then(function () {
                          return n && !n.closed ? t() : void e();
                        });
                      })();
                    })
                  );
                var n;
              })
              .then(function () {
                if (!a)
                  return gn(t).then(function () {
                    n(i);
                  });
              });
          }),
          (t.Yb = function () {
            var t = bi();
            return !Ai(t) && !Oi(t);
          }),
          (t.Ub = function () {
            return !1;
          }),
          (t.Nb = function (e, t, n, i, r, o, a, s) {
            if (!e) return we(new T("popup-blocked"));
            if (a && !Ai())
              return (
                this.ma().o(function (t) {
                  ii(e), r(t);
                }),
                i(),
                ye()
              );
            this.a || (this.a = au(uu(this)));
            var u = this;
            return this.a
              .then(function () {
                var t = u.ma().o(function (t) {
                  throw (ii(e), r(t), t);
                });
                return i(), t;
              })
              .then(function () {
                Co(n),
                  a ||
                    ei(
                      cu(
                        u.s,
                        u.g,
                        u.b,
                        t,
                        n,
                        null,
                        o,
                        u.c,
                        void 0,
                        u.i,
                        s,
                        u.f
                      ),
                      e
                    );
              })
              .o(function (t) {
                throw (
                  ("auth/network-request-failed" == t.code && (u.a = null), t)
                );
              });
          }),
          (t.Ob = function (t, e, n, i) {
            this.a || (this.a = au(uu(this)));
            var r = this;
            return this.a
              .then(function () {
                Co(e),
                  ei(
                    cu(r.s, r.g, r.b, t, e, ti(), n, r.c, void 0, r.i, i, r.f)
                  );
              })
              .o(function (t) {
                throw (
                  ("auth/network-request-failed" == t.code && (r.a = null), t)
                );
              });
          }),
          (t.ma = function () {
            var t = this;
            return su(this)
              .then(function () {
                return t.v.sb;
              })
              .o(function () {
                throw ((t.a = null), new T("network-request-failed"));
              });
          }),
          (t.ac = function () {
            return !0;
          }),
          (t.Ea = function (t) {
            this.h.push(t);
          }),
          (t.Ta = function (e) {
            B(this.h, function (t) {
              return t == e;
            });
          }),
          ((t = hu.prototype).get = function (t) {
            return ye(this.a.getItem(t)).then(function (t) {
              return t && Ni(t);
            });
          }),
          (t.set = function (t, e) {
            return ye(this.a.setItem(t, ki(e)));
          }),
          (t.U = function (t) {
            return ye(this.a.removeItem(t));
          }),
          (t.ca = function () {}),
          (t.ia = function () {});
        var fu,
          du = [];
        function pu(t, e, n) {
          ut(t.a) && t.b.addEventListener("message", t.f),
            void 0 === t.a[e] && (t.a[e] = []),
            t.a[e].push(n);
        }
        function vu(t) {
          this.a = t;
        }
        function mu(t) {
          (this.c = t), (this.b = !1), (this.a = []);
        }
        function gu(i, t, e, n) {
          var r,
            o,
            a,
            s,
            u = e || {},
            c = null;
          if (i.b) return we(Error("connection_unavailable"));
          var h = n ? 800 : 50,
            l =
              "undefined" != typeof MessageChannel
                ? new MessageChannel()
                : null;
          return new fe(function (e, n) {
            l
              ? ((r = Math.floor(Math.random() * Math.pow(10, 20)).toString()),
                l.port1.start(),
                (a = setTimeout(function () {
                  n(Error("unsupported_event"));
                }, h)),
                (c = {
                  messageChannel: l,
                  onMessage: (o = function (t) {
                    t.data.eventId === r &&
                      ("ack" === t.data.status
                        ? (clearTimeout(a),
                          (s = setTimeout(function () {
                            n(Error("timeout"));
                          }, 3e3)))
                        : "done" === t.data.status
                        ? (clearTimeout(s),
                          void 0 !== t.data.response
                            ? e(t.data.response)
                            : n(Error("unknown_error")))
                        : (clearTimeout(a),
                          clearTimeout(s),
                          n(Error("invalid_response"))));
                  }),
                }),
                i.a.push(c),
                l.port1.addEventListener("message", o),
                i.c.postMessage({ eventType: t, eventId: r, data: u }, [
                  l.port2,
                ]))
              : n(Error("connection_unavailable"));
          })
            .then(function (t) {
              return bu(i, c), t;
            })
            .o(function (t) {
              throw (bu(i, c), t);
            });
        }
        function bu(t, e) {
          var n, i;
          e &&
            ((n = e.messageChannel),
            (i = e.onMessage),
            n && (n.port1.removeEventListener("message", i), n.port1.close()),
            B(t.a, function (t) {
              return t == e;
            }));
        }
        function yu() {
          if (!Eu()) throw new T("web-storage-unsupported");
          (this.c = {}),
            (this.a = []),
            (this.b = 0),
            (this.m = l.indexedDB),
            (this.type = "indexedDB"),
            (this.g = this.v = this.f = this.l = null),
            (this.s = !1),
            (this.h = null);
          var t,
            e,
            n,
            i = this;
          hi() && self
            ? ((this.v =
                ((n = hi() ? self : null),
                V(du, function (t) {
                  t.b == n && (e = t);
                }),
                e || ((e = new lu(n)), du.push(e)),
                e)),
              pu(this.v, "keyChanged", function (t, n) {
                return _u(i).then(function (e) {
                  return (
                    0 < e.length &&
                      V(i.a, function (t) {
                        t(e);
                      }),
                    { keyProcessed: K(e, n.key) }
                  );
                });
              }),
              pu(this.v, "ping", function () {
                return ye(["keyChanged"]);
              }))
            : ((t = l.navigator) && t.serviceWorker
                ? ye()
                    .then(function () {
                      return t.serviceWorker.ready;
                    })
                    .then(function (t) {
                      return t.active || null;
                    })
                    .o(function () {
                      return null;
                    })
                : ye(null)
              ).then(function (t) {
                (i.h = t) &&
                  ((i.g = new mu(new vu(t))),
                  gu(i.g, "ping", null, !0)
                    .then(function (t) {
                      t[0].fulfilled &&
                        K(t[0].value, "keyChanged") &&
                        (i.s = !0);
                    })
                    .o(function () {}));
              });
        }
        function wu(r) {
          return new fe(function (e, n) {
            var t = r.m.open("firebaseLocalStorageDb", 1);
            (t.onerror = function (t) {
              try {
                t.preventDefault();
              } catch (t) {}
              n(Error(t.target.error));
            }),
              (t.onupgradeneeded = function (t) {
                t = t.target.result;
                try {
                  t.createObjectStore("firebaseLocalStorage", {
                    keyPath: "fbase_key",
                  });
                } catch (t) {
                  n(t);
                }
              }),
              (t.onsuccess = function (t) {
                var i;
                (t = t.target.result).objectStoreNames.contains(
                  "firebaseLocalStorage"
                )
                  ? e(t)
                  : ((i = r),
                    new fe(function (t, e) {
                      var n = i.m.deleteDatabase("firebaseLocalStorageDb");
                      (n.onsuccess = function () {
                        t();
                      }),
                        (n.onerror = function (t) {
                          e(Error(t.target.error));
                        });
                    })
                      .then(function () {
                        return wu(r);
                      })
                      .then(function (t) {
                        e(t);
                      })
                      .o(function (t) {
                        n(t);
                      }));
              });
          });
        }
        function Iu(t) {
          return t.i || (t.i = wu(t)), t.i;
        }
        function Tu(r, t) {
          var o = 0;
          return new fe(function e(n, i) {
            Iu(r)
              .then(t)
              .then(n)
              .o(function (t) {
                return 3 < ++o
                  ? void i(t)
                  : Iu(r)
                      .then(function (t) {
                        return t.close(), (r.i = void 0), e(n, i);
                      })
                      .o(function (t) {
                        i(t);
                      });
              });
          });
        }
        function Eu() {
          try {
            return l.indexedDB;
          } catch (t) {
            return;
          }
        }
        function Au(t) {
          return t.objectStore("firebaseLocalStorage");
        }
        function ku(t, e) {
          return t.transaction(
            ["firebaseLocalStorage"],
            e ? "readwrite" : "readonly"
          );
        }
        function Su(t) {
          return new fe(function (e, n) {
            (t.onsuccess = function (t) {
              t && t.target ? e(t.target.result) : e();
            }),
              (t.onerror = function (t) {
                n(t.target.error);
              });
          });
        }
        function Nu(t, e) {
          return t.g &&
            t.h &&
            (((n = l.navigator) &&
              n.serviceWorker &&
              n.serviceWorker.controller) ||
              null) === t.h
            ? gu(t.g, "keyChanged", { key: e }, t.s)
                .then(function () {})
                .o(function () {})
            : ye();
          var n;
        }
        function _u(i) {
          return Iu(i)
            .then(function (t) {
              var r = Au(ku(t, !1));
              return r.getAll
                ? Su(r.getAll())
                : new fe(function (e, n) {
                    var i = [],
                      t = r.openCursor();
                    (t.onsuccess = function (t) {
                      (t = t.target.result)
                        ? (i.push(t.value), t.continue())
                        : e(i);
                    }),
                      (t.onerror = function (t) {
                        n(t.target.error);
                      });
                  });
            })
            .then(function (t) {
              var e = {},
                n = [];
              if (0 == i.b) {
                for (n = 0; n < t.length; n++) e[t[n].fbase_key] = t[n].value;
                (n = (function t(e, n) {
                  var i,
                    r = [];
                  for (i in e)
                    i in n && typeof e[i] == typeof n[i]
                      ? "object" == typeof e[i] && null != e[i] && null != n[i]
                        ? 0 < t(e[i], n[i]).length && r.push(i)
                        : e[i] !== n[i] && r.push(i)
                      : r.push(i);
                  for (i in n) i in e || r.push(i);
                  return r;
                })(i.c, e)),
                  (i.c = e);
              }
              return n;
            });
        }
        function Ou(t) {
          t.l && t.l.cancel("STOP_EVENT"),
            t.f && (clearTimeout(t.f), (t.f = null));
        }
        function Cu(t) {
          var i = this,
            r = null;
          (this.a = []),
            (this.type = "indexedDB"),
            (this.c = t),
            (this.b = ye()
              .then(function () {
                if (Eu()) {
                  var e = _i(),
                    n = "__sak" + e;
                  return (
                    (fu = fu || new yu()),
                    (r = fu)
                      .set(n, e)
                      .then(function () {
                        return r.get(n);
                      })
                      .then(function (t) {
                        if (t !== e) throw Error("indexedDB not supported!");
                        return r.U(n);
                      })
                      .then(function () {
                        return r;
                      })
                      .o(function () {
                        return i.c;
                      })
                  );
                }
                return i.c;
              })
              .then(function (t) {
                return (
                  (i.type = t.type),
                  t.ca(function (e) {
                    V(i.a, function (t) {
                      t(e);
                    });
                  }),
                  t
                );
              }));
        }
        function Ru() {
          (this.a = {}), (this.type = "inMemory");
        }
        function Du() {
          if (
            !(function () {
              var t = "Node" == li();
              if (
                !(t =
                  Pu() ||
                  (t &&
                    Zl.default.INTERNAL.node &&
                    Zl.default.INTERNAL.node.localStorage))
              )
                return !1;
              try {
                return t.setItem("__sak", "1"), t.removeItem("__sak"), !0;
              } catch (t) {
                return !1;
              }
            })()
          ) {
            if ("Node" == li())
              throw new T(
                "internal-error",
                "The LocalStorage compatibility library was not found."
              );
            throw new T("web-storage-unsupported");
          }
          (this.a = Pu() || Zl.default.INTERNAL.node.localStorage),
            (this.type = "localStorage");
        }
        function Pu() {
          try {
            var t = l.localStorage,
              e = _i();
            return t && (t.setItem(e, "1"), t.removeItem(e)), t;
          } catch (t) {
            return null;
          }
        }
        function Lu() {
          this.type = "nullStorage";
        }
        function xu() {
          if (
            !(function () {
              var t = "Node" == li();
              if (
                !(t =
                  Mu() ||
                  (t &&
                    Zl.default.INTERNAL.node &&
                    Zl.default.INTERNAL.node.sessionStorage))
              )
                return !1;
              try {
                return t.setItem("__sak", "1"), t.removeItem("__sak"), !0;
              } catch (t) {
                return !1;
              }
            })()
          ) {
            if ("Node" == li())
              throw new T(
                "internal-error",
                "The SessionStorage compatibility library was not found."
              );
            throw new T("web-storage-unsupported");
          }
          (this.a = Mu() || Zl.default.INTERNAL.node.sessionStorage),
            (this.type = "sessionStorage");
        }
        function Mu() {
          try {
            var t = l.sessionStorage,
              e = _i();
            return t && (t.setItem(e, "1"), t.removeItem(e)), t;
          } catch (t) {
            return null;
          }
        }
        function ju() {
          var t = {};
          (t.Browser = Fu),
            (t.Node = qu),
            (t.ReactNative = Hu),
            (t.Worker = Ku),
            (this.a = t[li()]);
        }
        (lu.prototype.c = function (n) {
          var e,
            i = n.data.eventType,
            r = n.data.eventId,
            t = this.a[i];
          t &&
            0 < t.length &&
            (n.ports[0].postMessage({
              status: "ack",
              eventId: r,
              eventType: i,
              response: null,
            }),
            (e = []),
            V(t, function (t) {
              e.push(
                ye().then(function () {
                  return t(n.origin, n.data.data);
                })
              );
            }),
            Te(e).then(function (t) {
              var e = [];
              V(t, function (t) {
                e.push({
                  fulfilled: t.Qb,
                  value: t.value,
                  reason: t.reason ? t.reason.message : void 0,
                });
              }),
                V(e, function (t) {
                  for (var e in t) void 0 === t[e] && delete t[e];
                }),
                n.ports[0].postMessage({
                  status: "done",
                  eventId: r,
                  eventType: i,
                  response: e,
                });
            }));
        }),
          (vu.prototype.postMessage = function (t, e) {
            this.a.postMessage(t, e);
          }),
          (mu.prototype.close = function () {
            for (; 0 < this.a.length; ) bu(this, this.a[0]);
            this.b = !0;
          }),
          ((t = yu.prototype).set = function (i, r) {
            var o = this,
              a = !1;
            return Tu(this, function (t) {
              return Su((t = Au(ku(t, !0))).get(i));
            })
              .then(function (n) {
                return Tu(o, function (t) {
                  if (((t = Au(ku(t, !0))), n))
                    return (n.value = r), Su(t.put(n));
                  o.b++, (a = !0);
                  var e = {};
                  return (e.fbase_key = i), (e.value = r), Su(t.add(e));
                });
              })
              .then(function () {
                return (o.c[i] = r), Nu(o, i);
              })
              .oa(function () {
                a && o.b--;
              });
          }),
          (t.get = function (e) {
            return Tu(this, function (t) {
              return Su(Au(ku(t, !1)).get(e));
            }).then(function (t) {
              return t && t.value;
            });
          }),
          (t.U = function (e) {
            var n = this,
              i = !1;
            return Tu(this, function (t) {
              return (i = !0), n.b++, Su(Au(ku(t, !0)).delete(e));
            })
              .then(function () {
                return delete n.c[e], Nu(n, e);
              })
              .oa(function () {
                i && n.b--;
              });
          }),
          (t.ca = function (t) {
            var n;
            0 == this.a.length &&
              (Ou((n = this)),
              (function e() {
                n.f = setTimeout(function () {
                  n.l = _u(n)
                    .then(function (e) {
                      0 < e.length &&
                        V(n.a, function (t) {
                          t(e);
                        });
                    })
                    .then(function () {
                      e();
                    })
                    .o(function (t) {
                      "STOP_EVENT" != t.message && e();
                    });
                }, 800);
              })()),
              this.a.push(t);
          }),
          (t.ia = function (e) {
            B(this.a, function (t) {
              return t == e;
            }),
              0 == this.a.length && Ou(this);
          }),
          ((t = Cu.prototype).get = function (e) {
            return this.b.then(function (t) {
              return t.get(e);
            });
          }),
          (t.set = function (e, n) {
            return this.b.then(function (t) {
              return t.set(e, n);
            });
          }),
          (t.U = function (e) {
            return this.b.then(function (t) {
              return t.U(e);
            });
          }),
          (t.ca = function (t) {
            this.a.push(t);
          }),
          (t.ia = function (e) {
            B(this.a, function (t) {
              return t == e;
            });
          }),
          ((t = Ru.prototype).get = function (t) {
            return ye(this.a[t]);
          }),
          (t.set = function (t, e) {
            return (this.a[t] = e), ye();
          }),
          (t.U = function (t) {
            return delete this.a[t], ye();
          }),
          (t.ca = function () {}),
          (t.ia = function () {}),
          ((t = Du.prototype).get = function (t) {
            var e = this;
            return ye().then(function () {
              return Ni(e.a.getItem(t));
            });
          }),
          (t.set = function (e, n) {
            var i = this;
            return ye().then(function () {
              var t = ki(n);
              null === t ? i.U(e) : i.a.setItem(e, t);
            });
          }),
          (t.U = function (t) {
            var e = this;
            return ye().then(function () {
              e.a.removeItem(t);
            });
          }),
          (t.ca = function (t) {
            l.window && Qe(l.window, "storage", t);
          }),
          (t.ia = function (t) {
            l.window && nn(l.window, "storage", t);
          }),
          ((t = Lu.prototype).get = function () {
            return ye(null);
          }),
          (t.set = function () {
            return ye();
          }),
          (t.U = function () {
            return ye();
          }),
          (t.ca = function () {}),
          (t.ia = function () {}),
          ((t = xu.prototype).get = function (t) {
            var e = this;
            return ye().then(function () {
              return Ni(e.a.getItem(t));
            });
          }),
          (t.set = function (e, n) {
            var i = this;
            return ye().then(function () {
              var t = ki(n);
              null === t ? i.U(e) : i.a.setItem(e, t);
            });
          }),
          (t.U = function (t) {
            var e = this;
            return ye().then(function () {
              e.a.removeItem(t);
            });
          }),
          (t.ca = function () {}),
          (t.ia = function () {});
        var Uu,
          Vu,
          Fu = { F: Du, cb: xu },
          qu = { F: Du, cb: xu },
          Hu = { F: hu, cb: Lu },
          Ku = { F: Du, cb: Lu },
          Gu = { rd: "local", NONE: "none", td: "session" };
        function Bu() {
          var t = !(Oi(bi()) || !ci()),
            e = Ai(),
            n = wi();
          (this.m = t),
            (this.h = e),
            (this.l = n),
            (this.a = {}),
            (t = Uu = Uu || new ju());
          try {
            this.g =
              (!Qn() && xi()) || !l.indexedDB
                ? new t.a.F()
                : new Cu(new (hi() ? Ru : t.a.F)());
          } catch (t) {
            (this.g = new Ru()), (this.h = !0);
          }
          try {
            this.i = new t.a.cb();
          } catch (t) {
            this.i = new Ru();
          }
          (this.v = new Ru()), (this.f = b(this.Zb, this)), (this.b = {});
        }
        function Wu() {
          return (Vu = Vu || new Bu());
        }
        function Xu(t, e) {
          switch (e) {
            case "session":
              return t.i;
            case "none":
              return t.v;
            default:
              return t.g;
          }
        }
        function Ju(t, e) {
          return "firebase:" + t.name + (e ? ":" + e : "");
        }
        function Yu(t, e, n) {
          return (
            (n = Ju(e, n)), "local" == e.F && (t.b[n] = null), Xu(t, e.F).U(n)
          );
        }
        function zu(t) {
          t.c && (clearInterval(t.c), (t.c = null));
        }
        function $u(t) {
          (this.a = t), (this.b = Wu());
        }
        ((t = Bu.prototype).get = function (t, e) {
          return Xu(this, t.F).get(Ju(t, e));
        }),
          (t.set = function (e, t, n) {
            var i = Ju(e, n),
              r = this,
              o = Xu(this, e.F);
            return o
              .set(i, t)
              .then(function () {
                return o.get(i);
              })
              .then(function (t) {
                "local" == e.F && (r.b[i] = t);
              });
          }),
          (t.addListener = function (t, e, n) {
            var i;
            (t = Ju(t, e)),
              this.l && (this.b[t] = l.localStorage.getItem(t)),
              ut(this.a) &&
                (Xu(this, "local").ca(this.f),
                this.h ||
                  ((Qn() || !xi()) && l.indexedDB) ||
                  !this.l ||
                  (zu((i = this)),
                  (i.c = setInterval(function () {
                    for (var t in i.a) {
                      var e = l.localStorage.getItem(t),
                        n = i.b[t];
                      e != n &&
                        ((i.b[t] = e),
                        (e = new He({
                          type: "storage",
                          key: t,
                          target: window,
                          oldValue: n,
                          newValue: e,
                          a: !0,
                        })),
                        i.Zb(e));
                    }
                  }, 1e3)))),
              this.a[t] || (this.a[t] = []),
              this.a[t].push(n);
          }),
          (t.removeListener = function (t, e, n) {
            (t = Ju(t, e)),
              this.a[t] &&
                (B(this.a[t], function (t) {
                  return t == n;
                }),
                0 == this.a[t].length && delete this.a[t]),
              ut(this.a) && (Xu(this, "local").ia(this.f), zu(this));
          }),
          (t.Zb = function (t) {
            if (t && t.g) {
              var e = t.a.key;
              if (null == e)
                for (var n in this.a) {
                  var i = this.b[n];
                  void 0 === i && (i = null);
                  var r = l.localStorage.getItem(n);
                  r !== i && ((this.b[n] = r), this.nb(n));
                }
              else if (0 == e.indexOf("firebase:") && this.a[e]) {
                if (
                  (void 0 !== t.a.a ? Xu(this, "local").ia(this.f) : zu(this),
                  this.m)
                )
                  if (
                    ((n = l.localStorage.getItem(e)), (i = t.a.newValue) !== n)
                  )
                    null !== i
                      ? l.localStorage.setItem(e, i)
                      : l.localStorage.removeItem(e);
                  else if (this.b[e] === i && void 0 === t.a.a) return;
                var o = this,
                  n = function () {
                    (void 0 === t.a.a &&
                      o.b[e] === l.localStorage.getItem(e)) ||
                      ((o.b[e] = l.localStorage.getItem(e)), o.nb(e));
                  };
                Ht &&
                Zt &&
                10 == Zt &&
                l.localStorage.getItem(e) !== t.a.newValue &&
                t.a.newValue !== t.a.oldValue
                  ? setTimeout(n, 10)
                  : n();
              }
            } else V(t, b(this.nb, this));
          }),
          (t.nb = function (t) {
            this.a[t] &&
              V(this.a[t], function (t) {
                t();
              });
          });
        var Zu,
          Qu = { name: "authEvent", F: "local" };
        function tc() {
          this.a = Wu();
        }
        function ec(t, e) {
          (this.b = nc),
            (this.f = l.Uint8Array ? new Uint8Array(this.b) : Array(this.b)),
            (this.g = this.c = 0),
            (this.a = []),
            (this.i = t),
            (this.h = e),
            (this.l = l.Int32Array ? new Int32Array(64) : Array(64)),
            void 0 === Zu && (Zu = l.Int32Array ? new Int32Array(cc) : cc),
            this.reset();
        }
        w(ec, function () {
          this.b = -1;
        });
        for (var nc = 64, ic = nc - 1, rc = [], oc = 0; oc < ic; oc++)
          rc[oc] = 0;
        var ac = W(128, rc);
        function sc(t) {
          for (var e = t.f, n = t.l, i = 0, r = 0; r < e.length; )
            (n[i++] =
              (e[r] << 24) | (e[r + 1] << 16) | (e[r + 2] << 8) | e[r + 3]),
              (r = 4 * i);
          for (e = 16; e < 64; e++) {
            var r = 0 | n[e - 15],
              i = 0 | n[e - 2],
              o =
                ((0 | n[e - 16]) +
                  (((r >>> 7) | (r << 25)) ^
                    ((r >>> 18) | (r << 14)) ^
                    (r >>> 3))) |
                0,
              a =
                ((0 | n[e - 7]) +
                  (((i >>> 17) | (i << 15)) ^
                    ((i >>> 19) | (i << 13)) ^
                    (i >>> 10))) |
                0;
            n[e] = (o + a) | 0;
          }
          (i = 0 | t.a[0]), (r = 0 | t.a[1]);
          var s = 0 | t.a[2],
            u = 0 | t.a[3],
            c = 0 | t.a[4],
            h = 0 | t.a[5],
            l = 0 | t.a[6];
          for (o = 0 | t.a[7], e = 0; e < 64; e++) {
            var f =
              ((((i >>> 2) | (i << 30)) ^
                ((i >>> 13) | (i << 19)) ^
                ((i >>> 22) | (i << 10))) +
                ((i & r) ^ (i & s) ^ (r & s))) |
              0;
            (a =
              ((o =
                (o +
                  (((c >>> 6) | (c << 26)) ^
                    ((c >>> 11) | (c << 21)) ^
                    ((c >>> 25) | (c << 7)))) |
                0) +
                (((a = ((a = (c & h) ^ (~c & l)) + (0 | Zu[e])) | 0) +
                  (0 | n[e])) |
                  0)) |
              0),
              (o = l),
              (l = h),
              (h = c),
              (c = (u + a) | 0),
              (u = s),
              (s = r),
              (r = i),
              (i = (a + f) | 0);
          }
          (t.a[0] = (t.a[0] + i) | 0),
            (t.a[1] = (t.a[1] + r) | 0),
            (t.a[2] = (t.a[2] + s) | 0),
            (t.a[3] = (t.a[3] + u) | 0),
            (t.a[4] = (t.a[4] + c) | 0),
            (t.a[5] = (t.a[5] + h) | 0),
            (t.a[6] = (t.a[6] + l) | 0),
            (t.a[7] = (t.a[7] + o) | 0);
        }
        function uc(t, e, n) {
          void 0 === n && (n = e.length);
          var i = 0,
            r = t.c;
          if ("string" == typeof e)
            for (; i < n; )
              (t.f[r++] = e.charCodeAt(i++)), r == t.b && (sc(t), (r = 0));
          else {
            if (!p(e)) throw Error("message must be string or array");
            for (; i < n; ) {
              var o = e[i++];
              if (!("number" == typeof o && 0 <= o && o <= 255 && o == (0 | o)))
                throw Error("message must be a byte array");
              (t.f[r++] = o), r == t.b && (sc(t), (r = 0));
            }
          }
          (t.c = r), (t.g += n);
        }
        ec.prototype.reset = function () {
          (this.g = this.c = 0),
            (this.a = l.Int32Array ? new Int32Array(this.h) : X(this.h));
        };
        var cc = [
          1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993,
          2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987,
          1925078388, 2162078206, 2614888103, 3248222580, 3835390401,
          4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692,
          1996064986, 2554220882, 2821834349, 2952996808, 3210313671,
          3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912,
          1294757372, 1396182291, 1695183700, 1986661051, 2177026350,
          2456956037, 2730485921, 2820302411, 3259730800, 3345764771,
          3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616,
          659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779,
          1955562222, 2024104815, 2227730452, 2361852424, 2428436474,
          2756734187, 3204031479, 3329325298,
        ];
        function hc() {
          ec.call(this, 8, lc);
        }
        w(hc, ec);
        var lc = [
          1779033703, 3144134277, 1013904242, 2773480762, 1359893119,
          2600822924, 528734635, 1541459225,
        ];
        function fc(t, e, n, i, r, o) {
          (this.v = t),
            (this.i = e),
            (this.l = n),
            (this.m = i || null),
            (this.u = r || null),
            (this.s = o),
            (this.h = e + ":" + n),
            (this.C = new tc()),
            (this.g = new $u(this.h)),
            (this.f = null),
            (this.b = []),
            (this.a = this.c = null);
        }
        function dc(t) {
          return new T("invalid-cordova-configuration", t);
        }
        function pc(t) {
          var e = new hc();
          uc(e, t), (t = []);
          var n = 8 * e.g;
          e.c < 56 ? uc(e, ac, 56 - e.c) : uc(e, ac, e.b - (e.c - 56));
          for (var i = 63; 56 <= i; i--) (e.f[i] = 255 & n), (n /= 256);
          for (sc(e), i = n = 0; i < e.i; i++)
            for (var r = 24; 0 <= r; r -= 8) t[n++] = (e.a[i] >> r) & 255;
          return q(t, function (t) {
            return 1 < (t = t.toString(16)).length ? t : "0" + t;
          }).join("");
        }
        function vc(t, e) {
          for (var n = 0; n < t.b.length; n++)
            try {
              t.b[n](e);
            } catch (t) {}
        }
        function mc(s) {
          return (
            s.f ||
              (s.f = s.ma().then(function () {
                return new fe(function (n) {
                  function e(i) {
                    (t = !0),
                      a && a.cancel(),
                      gc(r).then(function (t) {
                        var e,
                          n = o;
                        t &&
                          i &&
                          i.url &&
                          ((e = null),
                          (n =
                            (e =
                              -1 != (n = Yr(i.url)).indexOf("/__/auth/callback")
                                ? (e =
                                    "object" ==
                                    typeof (e = Ni(
                                      On((e = Cn(n)), "firebaseError") || null
                                    ))
                                      ? E(e)
                                      : null)
                                  ? new Ro(t.c, t.b, null, null, e, null, t.T())
                                  : new Ro(t.c, t.b, n, t.f, null, null, t.T())
                                : e) || o)),
                          vc(r, n);
                      });
                  }
                  var r, o, t, a, i;
                  s.Ea(function t(e) {
                    return n(e), s.Ta(t), !1;
                  }),
                    (r = s),
                    (o = new Ro(
                      "unknown",
                      null,
                      null,
                      null,
                      new T("no-auth-event")
                    )),
                    (t = !1),
                    (a = gn(500).then(function () {
                      return gc(r).then(function () {
                        t || vc(r, o);
                      });
                    })),
                    (i = l.handleOpenURL),
                    (l.handleOpenURL = function (t) {
                      if (
                        (0 ==
                          t
                            .toLowerCase()
                            .indexOf(
                              yi("BuildInfo.packageName", l).toLowerCase() +
                                "://"
                            ) && e({ url: t }),
                        "function" == typeof i)
                      )
                        try {
                          i(t);
                        } catch (t) {
                          console.error(t);
                        }
                    }),
                    (xo = xo || new Po()),
                    (function (t) {
                      var n = xo;
                      n.a.push(t),
                        n.b ||
                          ((n.b = function (t) {
                            for (var e = 0; e < n.a.length; e++) n.a[e](t);
                          }),
                          "function" ==
                            typeof (t = yi("universalLinks.subscribe", l)) &&
                            t(null, n.b));
                    })(e);
                });
              })),
            s.f
          );
        }
        function gc(e) {
          var t,
            n = null;
          return (t = e.g).b
            .get(Qu, t.a)
            .then(Do)
            .then(function (t) {
              return (n = t), Yu((t = e.g).b, Qu, t.a);
            })
            .then(function () {
              return n;
            });
        }
        function bc(t) {
          (this.a = t), (this.b = Wu());
        }
        ((t = fc.prototype).ma = function () {
          return (
            this.Ia ||
            (this.Ia = (
              ui(void 0)
                ? si().then(function () {
                    return new fe(function (t, e) {
                      var n = l.document,
                        i = setTimeout(function () {
                          e(Error("Cordova framework is not ready."));
                        }, 1e3);
                      n.addEventListener(
                        "deviceready",
                        function () {
                          clearTimeout(i), t();
                        },
                        !1
                      );
                    });
                  })
                : we(
                    Error("Cordova must run in an Android or iOS file scheme.")
                  )
            ).then(
              function () {
                if ("function" != typeof yi("universalLinks.subscribe", l))
                  throw dc(
                    "cordova-universal-links-plugin-fix is not installed"
                  );
                if (void 0 === yi("BuildInfo.packageName", l))
                  throw dc("cordova-plugin-buildinfo is not installed");
                if (
                  "function" !=
                  typeof yi("cordova.plugins.browsertab.openUrl", l)
                )
                  throw dc("cordova-plugin-browsertab is not installed");
                if ("function" != typeof yi("cordova.InAppBrowser.open", l))
                  throw dc("cordova-plugin-inappbrowser is not installed");
              },
              function () {
                throw new T("cordova-not-ready");
              }
            ))
          );
        }),
          (t.Pb = function (t, e) {
            return (
              e(new T("operation-not-supported-in-this-environment")), ye()
            );
          }),
          (t.Nb = function () {
            return we(new T("operation-not-supported-in-this-environment"));
          }),
          (t.ac = function () {
            return !1;
          }),
          (t.Yb = function () {
            return !0;
          }),
          (t.Ub = function () {
            return !0;
          }),
          (t.Ob = function (t, e, n, i) {
            if (this.c) return we(new T("redirect-operation-pending"));
            var r = this,
              o = l.document,
              a = null,
              s = null,
              u = null,
              c = null;
            return (this.c = ye()
              .then(function () {
                return Co(e), mc(r);
              })
              .then(function () {
                return (function (n, t, e, i, r) {
                  var o = (function () {
                      for (var t = 20, e = []; 0 < t; )
                        e.push(
                          "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(
                            Math.floor(62 * Math.random())
                          )
                        ),
                          t--;
                      return e.join("");
                    })(),
                    a = new Ro(t, i, null, o, new T("no-auth-event"), null, r),
                    s = yi("BuildInfo.packageName", l);
                  if ("string" != typeof s)
                    throw new T("invalid-cordova-configuration");
                  var u = yi("BuildInfo.displayName", l),
                    c = {};
                  if (
                    bi()
                      .toLowerCase()
                      .match(/iphone|ipad|ipod/)
                  )
                    c.ibi = s;
                  else {
                    if (
                      !bi()
                        .toLowerCase()
                        .match(/android/)
                    )
                      return we(
                        new T("operation-not-supported-in-this-environment")
                      );
                    c.apn = s;
                  }
                  u && (c.appDisplayName = u), (o = pc(o)), (c.sessionId = o);
                  var h = cu(n.v, n.i, n.l, t, e, null, i, n.m, c, n.u, r, n.s);
                  return n
                    .ma()
                    .then(function () {
                      var t = n.h;
                      return n.C.a.set(Qu, a.w(), t);
                    })
                    .then(function () {
                      var t = yi("cordova.plugins.browsertab.isAvailable", l);
                      if ("function" != typeof t)
                        throw new T("invalid-cordova-configuration");
                      var e = null;
                      t(function (t) {
                        if (t) {
                          if (
                            "function" !=
                            typeof (e = yi(
                              "cordova.plugins.browsertab.openUrl",
                              l
                            ))
                          )
                            throw new T("invalid-cordova-configuration");
                          e(h);
                        } else {
                          if (
                            "function" !=
                            typeof (e = yi("cordova.InAppBrowser.open", l))
                          )
                            throw new T("invalid-cordova-configuration");
                          (t = bi()),
                            (n.a = e(
                              h,
                              t.match(/(iPad|iPhone|iPod).*OS 7_\d/i) ||
                                t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)
                                ? "_blank"
                                : "_system",
                              "location=yes"
                            ));
                        }
                      });
                    });
                })(r, t, e, n, i);
              })
              .then(function () {
                return new fe(function (e, t) {
                  (s = function () {
                    var t = yi("cordova.plugins.browsertab.close", l);
                    return (
                      e(),
                      "function" == typeof t && t(),
                      r.a &&
                        "function" == typeof r.a.close &&
                        (r.a.close(), (r.a = null)),
                      !1
                    );
                  }),
                    r.Ea(s),
                    (u = function () {
                      a =
                        a ||
                        gn(2e3).then(function () {
                          t(new T("redirect-cancelled-by-user"));
                        });
                    }),
                    (c = function () {
                      Di() && u();
                    }),
                    o.addEventListener("resume", u, !1),
                    bi()
                      .toLowerCase()
                      .match(/android/) ||
                      o.addEventListener("visibilitychange", c, !1);
                }).o(function (t) {
                  return gc(r).then(function () {
                    throw t;
                  });
                });
              })
              .oa(function () {
                u && o.removeEventListener("resume", u, !1),
                  c && o.removeEventListener("visibilitychange", c, !1),
                  a && a.cancel(),
                  s && r.Ta(s),
                  (r.c = null);
              }));
          }),
          (t.Ea = function (e) {
            this.b.push(e),
              mc(this).o(function (t) {
                "auth/invalid-cordova-configuration" === t.code &&
                  ((t = new Ro(
                    "unknown",
                    null,
                    null,
                    null,
                    new T("no-auth-event")
                  )),
                  e(t));
              });
          }),
          (t.Ta = function (e) {
            B(this.b, function (t) {
              return t == e;
            });
          });
        var yc = { name: "pendingRedirect", F: "session" };
        function wc(t) {
          return Yu(t.b, yc, t.a);
        }
        function Ic(t, e, n, i) {
          (this.i = {}),
            (this.u = 0),
            (this.D = t),
            (this.v = e),
            (this.m = n),
            (this.J = i),
            (this.h = []),
            (this.f = !1),
            (this.l = b(this.s, this)),
            (this.b = new Mc()),
            (this.C = new qc()),
            (this.g = new bc(Lc(this.v, this.m))),
            (this.c = {}),
            (this.c.unknown = this.b),
            (this.c.signInViaRedirect = this.b),
            (this.c.linkViaRedirect = this.b),
            (this.c.reauthViaRedirect = this.b),
            (this.c.signInViaPopup = this.C),
            (this.c.linkViaPopup = this.C),
            (this.c.reauthViaPopup = this.C),
            (this.a = Tc(this.D, this.v, this.m, A, this.J));
        }
        function Tc(t, e, n, i, r) {
          var o = Zl.default.SDK_VERSION || null;
          return new (ui() ? fc : ou)(t, e, n, o, i, r);
        }
        function Ec(e) {
          e.f || ((e.f = !0), e.a.Ea(e.l));
          var n = e.a;
          return e.a.ma().o(function (t) {
            throw (e.a == n && e.reset(), t);
          });
        }
        function Ac(n) {
          n.a.Yb() &&
            Ec(n).o(function (t) {
              var e = new Ro(
                "unknown",
                null,
                null,
                null,
                new T("operation-not-supported-in-this-environment")
              );
              Cc(t) && n.s(e);
            }),
            n.a.Ub() || jc(n.b);
        }
        function kc(n, t) {
          K(n.h, t) || n.h.push(t),
            n.f ||
              (t = n.g).b
                .get(yc, t.a)
                .then(function (t) {
                  return "pending" == t;
                })
                .then(function (t) {
                  t
                    ? wc(n.g).then(function () {
                        Ec(n).o(function (t) {
                          var e = new Ro(
                            "unknown",
                            null,
                            null,
                            null,
                            new T("operation-not-supported-in-this-environment")
                          );
                          Cc(t) && n.s(e);
                        });
                      })
                    : Ac(n);
                })
                .o(function () {
                  Ac(n);
                });
        }
        function Sc(t, e) {
          B(t.h, function (t) {
            return t == e;
          });
        }
        (Ic.prototype.reset = function () {
          (this.f = !1),
            this.a.Ta(this.l),
            (this.a = Tc(this.D, this.v, this.m, null, this.J)),
            (this.i = {});
        }),
          (Ic.prototype.s = function (t) {
            if (!t) throw new T("invalid-auth-event");
            if (
              (6e5 <= Date.now() - this.u && ((this.i = {}), (this.u = 0)),
              t && t.getUid() && this.i.hasOwnProperty(t.getUid()))
            )
              return !1;
            for (var e = !1, n = 0; n < this.h.length; n++) {
              var i = this.h[n];
              if (i.Gb(t.c, t.b)) {
                (e = this.c[t.c]) &&
                  (e.h(t, i),
                  t &&
                    (t.f || t.b) &&
                    ((this.i[t.getUid()] = !0), (this.u = Date.now()))),
                  (e = !0);
                break;
              }
            }
            return jc(this.b), e;
          });
        var Nc = new Ri(2e3, 1e4),
          _c = new Ri(3e4, 6e4);
        function Oc(t, e, n, i, r, o, a) {
          return t.a.Nb(
            e,
            n,
            i,
            function () {
              t.f || ((t.f = !0), t.a.Ea(t.l));
            },
            function () {
              t.reset();
            },
            r,
            o,
            a
          );
        }
        function Cc(t) {
          return !(!t || "auth/cordova-not-ready" != t.code);
        }
        function Rc(e, t, n, i, r) {
          var o, a;
          return (a = e.g).b.set(yc, "pending", a.a).then(function () {
            return e.a
              .Ob(t, n, i, r)
              .o(function (t) {
                if (Cc(t))
                  throw new T("operation-not-supported-in-this-environment");
                return (
                  (o = t),
                  wc(e.g).then(function () {
                    throw o;
                  })
                );
              })
              .then(function () {
                return e.a.ac()
                  ? new fe(function () {})
                  : wc(e.g)
                      .then(function () {
                        return e.ra();
                      })
                      .then(function () {})
                      .o(function () {});
              });
          });
        }
        function Dc(t, e, n, i, r) {
          return t.a.Pb(
            i,
            function (t) {
              e.na(n, null, t, r);
            },
            Nc.get()
          );
        }
        Ic.prototype.ra = function () {
          return this.b.ra();
        };
        var Pc = {};
        function Lc(t, e, n) {
          return (t = t + ":" + e), (t = n ? t + ":" + n.url : t);
        }
        function xc(t, e, n, i) {
          var r = Lc(e, n, i);
          return Pc[r] || (Pc[r] = new Ic(t, e, n, i)), Pc[r];
        }
        function Mc() {
          (this.b = null),
            (this.f = []),
            (this.c = []),
            (this.a = null),
            (this.i = this.g = !1);
        }
        function jc(t) {
          t.g || ((t.g = !0), Fc(t, !1, null, null));
        }
        function Uc(t) {
          t.g && !t.i && Fc(t, !1, null, null);
        }
        function Vc(t, e) {
          if (
            ((t.b = function () {
              return ye(e);
            }),
            t.f.length)
          )
            for (var n = 0; n < t.f.length; n++) t.f[n](e);
        }
        function Fc(t, e, n, i) {
          e
            ? i
              ? (function (t, e) {
                  if (
                    ((t.b = function () {
                      return we(e);
                    }),
                    t.c.length)
                  )
                    for (var n = 0; n < t.c.length; n++) t.c[n](e);
                })(t, i)
              : Vc(t, n)
            : Vc(t, { user: null }),
            (t.f = []),
            (t.c = []);
        }
        function qc() {}
        function Hc() {
          (this.jb = !1),
            Object.defineProperty(this, "appVerificationDisabled", {
              get: function () {
                return this.jb;
              },
              set: function (t) {
                this.jb = t;
              },
              enumerable: !1,
            });
        }
        function Kc(t, e) {
          (this.a = e), Fi(this, "verificationId", t);
        }
        function Gc(t, e, n, i) {
          return new No(t).gb(e, n).then(function (t) {
            return new Kc(t, i);
          });
        }
        function Bc(t) {
          var e = xr(t);
          if (!(e && e.exp && e.auth_time && e.iat))
            throw new T(
              "internal-error",
              "An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation."
            );
          qi(this, {
            token: t,
            expirationTime: Li(1e3 * e.exp),
            authTime: Li(1e3 * e.auth_time),
            issuedAtTime: Li(1e3 * e.iat),
            signInProvider:
              e.firebase && e.firebase.sign_in_provider
                ? e.firebase.sign_in_provider
                : null,
            signInSecondFactor:
              e.firebase && e.firebase.sign_in_second_factor
                ? e.firebase.sign_in_second_factor
                : null,
            claims: e,
          });
        }
        function Wc(t, e, n) {
          var i = e && e[Jc];
          if (!i)
            throw new T(
              "argument-error",
              "Internal assert: Invalid MultiFactorResolver"
            );
          (this.a = t),
            (this.f = ct(e)),
            (this.g = n),
            (this.c = new zr(null, i)),
            (this.b = []);
          var r = this;
          V(e[Xc] || [], function (t) {
            (t = Bi(t)) && r.b.push(t);
          }),
            Fi(this, "auth", this.a),
            Fi(this, "session", this.c),
            Fi(this, "hints", this.b);
        }
        (Mc.prototype.reset = function () {
          (this.b = null), this.a && (this.a.cancel(), (this.a = null));
        }),
          (Mc.prototype.h = function (t, e) {
            var n, i, r, o;
            t
              ? (this.reset(),
                (this.g = !0),
                (n = t.c),
                (i = t.b),
                (r = t.a && "auth/web-storage-unsupported" == t.a.code),
                (o =
                  t.a &&
                  "auth/operation-not-supported-in-this-environment" ==
                    t.a.code),
                (this.i = !(!r && !o)),
                "unknown" != n || r || o
                  ? t.a
                    ? (Fc(this, !0, null, t.a), ye())
                    : e.Fa(n, i)
                    ? (function (e, t, n) {
                        n = n.Fa(t.c, t.b);
                        var i = t.g,
                          r = t.f,
                          o = t.i,
                          a = t.T(),
                          s = !!t.c.match(/Redirect$/);
                        n(i, r, a, o)
                          .then(function (t) {
                            Fc(e, s, t, null);
                          })
                          .o(function (t) {
                            Fc(e, s, null, t);
                          });
                      })(this, t, e)
                    : we(new T("invalid-auth-event"))
                  : (Fc(this, !1, null, null), ye()))
              : we(new T("invalid-auth-event"));
          }),
          (Mc.prototype.ra = function () {
            var r = this;
            return new fe(function (t, e) {
              var n, i;
              r.b
                ? r.b().then(t, e)
                : (r.f.push(t),
                  r.c.push(e),
                  (n = r),
                  (i = new T("timeout")),
                  n.a && n.a.cancel(),
                  (n.a = gn(_c.get()).then(function () {
                    n.b || ((n.g = !0), Fc(n, !0, null, i));
                  })));
            });
          }),
          (qc.prototype.h = function (t, e) {
            var n, i, r, o, a;
            t
              ? ((n = t.c),
                (i = t.b),
                t.a
                  ? (e.na(t.c, null, t.a, t.b), ye())
                  : e.Fa(n, i)
                  ? ((r = e),
                    (o = (t = t).b),
                    (a = t.c),
                    r
                      .Fa(a, o)(t.g, t.f, t.T(), t.i)
                      .then(function (t) {
                        r.na(a, t, null, o);
                      })
                      .o(function (t) {
                        r.na(a, null, t, o);
                      }))
                  : we(new T("invalid-auth-event")))
              : we(new T("invalid-auth-event"));
          }),
          (Kc.prototype.confirm = function (t) {
            return (t = _o(this.verificationId, t)), this.a(t);
          });
        var Xc = "mfaInfo",
          Jc = "mfaPendingCredential";
        function Yc(t, e, n, i) {
          T.call(this, "multi-factor-auth-required", i, e),
            (this.b = new Wc(t, e, n)),
            Fi(this, "resolver", this.b);
        }
        function zc(t, e, n) {
          if (
            t &&
            m(t.serverResponse) &&
            "auth/multi-factor-auth-required" === t.code
          )
            try {
              return new Yc(e, t.serverResponse, n, t.message);
            } catch (t) {}
          return null;
        }
        function $c() {}
        function Zc(t) {
          Fi(this, "factorId", t.fa), (this.a = t);
        }
        function Qc(t) {
          if ((Zc.call(this, t), this.a.fa != No.PROVIDER_ID))
            throw new T(
              "argument-error",
              "firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential"
            );
        }
        function th(t, e) {
          for (var n in (qe.call(this, t), e)) this[n] = e[n];
        }
        function eh(t, e) {
          (this.a = t),
            (this.b = []),
            (this.c = b(this.yc, this)),
            Qe(this.a, "userReloaded", this.c);
          var i = [];
          e &&
            e.multiFactor &&
            e.multiFactor.enrolledFactors &&
            V(e.multiFactor.enrolledFactors, function (t) {
              var e = null,
                n = {};
              if (t) {
                t.uid && (n[Ji] = t.uid),
                  t.displayName && (n[Wi] = t.displayName),
                  t.enrollmentTime &&
                    (n[Xi] = new Date(t.enrollmentTime).toISOString()),
                  t.phoneNumber && (n[Yi] = t.phoneNumber);
                try {
                  e = new zi(n);
                } catch (t) {}
                t = e;
              } else t = null;
              t && i.push(t);
            }),
            nh(this, i);
        }
        function nh(t, e) {
          (t.b = e), Fi(t, "enrolledFactors", e);
        }
        function ih(t, e, n) {
          if (
            ((this.h = t),
            (this.i = e),
            (this.g = n),
            (this.c = 3e4),
            (this.f = 96e4),
            (this.b = null),
            (this.a = this.c),
            this.f < this.c)
          )
            throw Error(
              "Proactive refresh lower bound greater than upper bound!"
            );
        }
        function rh(t, e) {
          return e
            ? ((t.a = t.c), t.g())
            : ((e = t.a), (t.a *= 2), t.a > t.f && (t.a = t.f), e);
        }
        function oh(t) {
          (this.f = t), (this.b = this.a = null), (this.c = Date.now());
        }
        function ah(t, e) {
          void 0 === e && (e = t.b ? (e = t.b).a - e.g : 0),
            (t.c = Date.now() + 1e3 * e);
        }
        function sh(t, e) {
          (t.b = Lr(e[Ka] || "")),
            (t.a = e.refreshToken),
            ah(t, void 0 !== (e = e.expiresIn) ? Number(e) : void 0);
        }
        function uh(e, t) {
          return (
            (i = e.f),
            (r = t),
            new fe(function (e, n) {
              ("refresh_token" == r.grant_type && r.refresh_token) ||
              ("authorization_code" == r.grant_type && r.code)
                ? Za(
                    i,
                    i.l + "?key=" + encodeURIComponent(i.c),
                    function (t) {
                      t
                        ? t.error
                          ? n(zs(t))
                          : t.access_token && t.refresh_token
                          ? e(t)
                          : n(new T("internal-error"))
                        : n(new T("network-request-failed"));
                    },
                    "POST",
                    Hn(r).toString(),
                    i.g,
                    i.m.get()
                  )
                : n(new T("internal-error"));
            })
              .then(function (t) {
                return (
                  (e.b = Lr(t.access_token)),
                  (e.a = t.refresh_token),
                  ah(e, t.expires_in),
                  { accessToken: e.b.toString(), refreshToken: e.a }
                );
              })
              .o(function (t) {
                throw ("auth/user-token-expired" == t.code && (e.a = null), t);
              })
          );
          var i, r;
        }
        function ch(t, e) {
          (this.a = t || null),
            (this.b = e || null),
            qi(this, {
              lastSignInTime: Li(e || null),
              creationTime: Li(t || null),
            });
        }
        function hh(t, e, n, i, r, o) {
          qi(this, {
            uid: t,
            displayName: i || null,
            photoURL: r || null,
            email: n || null,
            phoneNumber: o || null,
            providerId: e,
          });
        }
        function lh(t, e, n) {
          (this.N = []),
            (this.l = t.apiKey),
            (this.m = t.appName),
            (this.s = t.authDomain || null);
          var i,
            r = Zl.default.SDK_VERSION ? gi(Zl.default.SDK_VERSION) : null;
          (this.a = new qa(this.l, _(A), r)),
            (this.u = t.emulatorConfig || null) && Ya(this.a, this.u),
            (this.h = new oh(this.a)),
            wh(this, e[Ka]),
            sh(this.h, e),
            Fi(this, "refreshToken", this.h.a),
            Eh(this, n || {}),
            fn.call(this),
            (this.P = !1),
            this.s && Ii() && (this.b = xc(this.s, this.l, this.m, this.u)),
            (this.W = []),
            (this.i = null),
            (this.D =
              ((i = this),
              new ih(
                function () {
                  return i.I(!0);
                },
                function (t) {
                  return !(!t || "auth/network-request-failed" != t.code);
                },
                function () {
                  var t = i.h.c - Date.now() - 3e5;
                  return 0 < t ? t : 0;
                }
              ))),
            (this.ba = b(this.ib, this));
          var o = this;
          (this.za = null),
            (this.Pa = function (t) {
              o.xa(t.h);
            }),
            (this.qa = null),
            (this.Ba = function (t) {
              fh(o, t.c);
            }),
            (this.$ = null),
            (this.aa = []),
            (this.Oa = function (t) {
              vh(o, t.f);
            }),
            (this.ja = null),
            (this.S = new eh(this, n)),
            Fi(this, "multiFactor", this.S);
        }
        function fh(t, e) {
          (t.u = e),
            Ya(t.a, e),
            t.b &&
              ((e = t.b),
              (t.b = xc(t.s, t.l, t.m, t.u)),
              t.P && (Sc(e, t), kc(t.b, t)));
        }
        function dh(t, e) {
          t.qa && nn(t.qa, "languageCodeChanged", t.Pa),
            (t.qa = e) && Qe(e, "languageCodeChanged", t.Pa);
        }
        function ph(t, e) {
          t.$ && nn(t.$, "emulatorConfigChanged", t.Ba),
            (t.$ = e) && Qe(e, "emulatorConfigChanged", t.Ba);
        }
        function vh(t, e) {
          (t.aa = e),
            $a(
              t.a,
              Zl.default.SDK_VERSION ? gi(Zl.default.SDK_VERSION, t.aa) : null
            );
        }
        function mh(t, e) {
          t.ja && nn(t.ja, "frameworkChanged", t.Oa),
            (t.ja = e) && Qe(e, "frameworkChanged", t.Oa);
        }
        function gh(e) {
          try {
            return Zl.default.app(e.m).auth();
          } catch (t) {
            throw new T(
              "internal-error",
              "No firebase.auth.Auth instance is available for the Firebase App '" +
                e.m +
                "'!"
            );
          }
        }
        function bh(t) {
          t.J ||
            t.D.b ||
            (t.D.start(),
            nn(t, "tokenChanged", t.ba),
            Qe(t, "tokenChanged", t.ba));
        }
        function yh(t) {
          nn(t, "tokenChanged", t.ba), t.D.stop();
        }
        function wh(t, e) {
          (t.Aa = e), Fi(t, "_lat", e);
        }
        function Ih(t) {
          for (var e = [], n = 0; n < t.W.length; n++) e.push(t.W[n](t));
          return Te(e).then(function () {
            return t;
          });
        }
        function Th(t) {
          t.b && !t.P && ((t.P = !0), kc(t.b, t));
        }
        function Eh(t, e) {
          qi(t, {
            uid: e.uid,
            displayName: e.displayName || null,
            photoURL: e.photoURL || null,
            email: e.email || null,
            emailVerified: e.emailVerified || !1,
            phoneNumber: e.phoneNumber || null,
            isAnonymous: e.isAnonymous || !1,
            tenantId: e.tenantId || null,
            metadata: new ch(e.createdAt, e.lastLoginAt),
            providerData: [],
          }),
            (t.a.b = t.tenantId);
        }
        function Ah() {}
        function kh(t) {
          return ye().then(function () {
            if (t.J) throw new T("app-deleted");
          });
        }
        function Sh(t) {
          return q(t.providerData, function (t) {
            return t.providerId;
          });
        }
        function Nh(t, e) {
          e && (_h(t, e.providerId), t.providerData.push(e));
        }
        function _h(t, e) {
          B(t.providerData, function (t) {
            return t.providerId == e;
          });
        }
        function Oh(t, e, n) {
          ("uid" != e || n) && t.hasOwnProperty(e) && Fi(t, e, n);
        }
        function Ch(e, t) {
          var n, i;
          e != t &&
            (qi(e, {
              uid: t.uid,
              displayName: t.displayName,
              photoURL: t.photoURL,
              email: t.email,
              emailVerified: t.emailVerified,
              phoneNumber: t.phoneNumber,
              isAnonymous: t.isAnonymous,
              tenantId: t.tenantId,
              providerData: [],
            }),
            t.metadata
              ? Fi(e, "metadata", new ch((i = t.metadata).a, i.b))
              : Fi(e, "metadata", new ch()),
            V(t.providerData, function (t) {
              Nh(e, t);
            }),
            (n = e.h),
            (i = t.h),
            (n.b = i.b),
            (n.a = i.a),
            (n.c = i.c),
            Fi(e, "refreshToken", e.h.a),
            nh(e.S, t.S.b));
        }
        function Rh(i) {
          return i.I().then(function (t) {
            var e,
              n = i.isAnonymous;
            return Js((e = i).a, ks, { idToken: t })
              .then(b(e.Kc, e))
              .then(function () {
                return n || Oh(i, "isAnonymous", !1), t;
              });
          });
        }
        function Dh(t, e) {
          e[Ka] &&
            t.Aa != e[Ka] &&
            (sh(t.h, e),
            t.dispatchEvent(new th("tokenChanged")),
            wh(t, e[Ka]),
            Oh(t, "refreshToken", t.h.a));
        }
        function Ph(t, e) {
          return Rh(t).then(function () {
            if (K(Sh(t), e))
              return Ih(t).then(function () {
                throw new T("provider-already-linked");
              });
          });
        }
        function Lh(t, e, n) {
          return Hi({
            user: t,
            credential: Oo(e),
            additionalUserInfo: (e = Fr(e)),
            operationType: n,
          });
        }
        function xh(t, e) {
          return (
            Dh(t, e),
            t.reload().then(function () {
              return t;
            })
          );
        }
        function Mh(n, i, t, e, r) {
          if (!Ii())
            return we(new T("operation-not-supported-in-this-environment"));
          if (n.i && !r) return we(n.i);
          var o = Vr(t.providerId),
            a = _i(n.uid + ":::"),
            s = null,
            u = ri(
              (s =
                (!Ai() || ci()) && n.s && t.isOAuthProvider
                  ? cu(
                      n.s,
                      n.l,
                      n.m,
                      i,
                      t,
                      null,
                      a,
                      Zl.default.SDK_VERSION || null,
                      null,
                      null,
                      n.tenantId,
                      n.u
                    )
                  : s),
              o && o.va,
              o && o.ua
            );
          return (
            (e = e()
              .then(function () {
                if ((Uh(n), !r)) return n.I().then(function () {});
              })
              .then(function () {
                return Oc(n.b, u, i, t, a, !!s, n.tenantId);
              })
              .then(function () {
                return new fe(function (t, e) {
                  n.na(i, null, new T("cancelled-popup-request"), n.g || null),
                    (n.f = t),
                    (n.C = e),
                    (n.g = a),
                    (n.c = Dc(n.b, n, i, u, a));
                });
              })
              .then(function (t) {
                return u && ii(u), t ? Hi(t) : null;
              })
              .o(function (t) {
                throw (u && ii(u), t);
              })),
            Vh(n, e, r)
          );
        }
        function jh(e, t, n, i, r) {
          if (!Ii())
            return we(new T("operation-not-supported-in-this-environment"));
          if (e.i && !r) return we(e.i);
          var o = null,
            a = _i(e.uid + ":::");
          return (
            (i = i()
              .then(function () {
                if ((Uh(e), !r)) return e.I().then(function () {});
              })
              .then(function () {
                return (e.ga = a), Ih(e);
              })
              .then(function (t) {
                return (t = e.ha ? (t = e.ha).b.set(Hh, e.w(), t.a) : t);
              })
              .then(function () {
                return Rc(e.b, t, n, a, e.tenantId);
              })
              .o(function (t) {
                if (((o = t), e.ha)) return Kh(e.ha);
                throw o;
              })
              .then(function () {
                if (o) throw o;
              })),
            Vh(e, i, r)
          );
        }
        function Uh(t) {
          if (!t.b || !t.P) {
            if (t.b && !t.P) throw new T("internal-error");
            throw new T("auth-domain-config-required");
          }
        }
        function Vh(n, t, e) {
          var i,
            r =
              ((t = t),
              (e = e),
              (i = n).i && !e
                ? (t.cancel(), we(i.i))
                : t.o(function (t) {
                    throw (
                      (!t ||
                        ("auth/user-disabled" != t.code &&
                          "auth/user-token-expired" != t.code) ||
                        (i.i || i.dispatchEvent(new th("userInvalidated")),
                        (i.i = t)),
                      t)
                    );
                  }));
          return (
            n.N.push(r),
            r.oa(function () {
              G(n.N, r);
            }),
            r.o(function (t) {
              var e = null;
              throw (
                (e =
                  t && "auth/multi-factor-auth-required" === t.code
                    ? zc(t.w(), gh(n), b(n.jc, n))
                    : e) || t
              );
            })
          );
        }
        function Fh(t) {
          if (!t.apiKey) return null;
          var e = {
              apiKey: t.apiKey,
              authDomain: t.authDomain,
              appName: t.appName,
              emulatorConfig: t.emulatorConfig,
            },
            n = {};
          if (!t.stsTokenManager || !t.stsTokenManager.accessToken) return null;
          (n[Ka] = t.stsTokenManager.accessToken),
            (n.refreshToken = t.stsTokenManager.refreshToken || null);
          var i = t.stsTokenManager.expirationTime;
          i && (n.expiresIn = (i - Date.now()) / 1e3);
          var r = new lh(e, n, t);
          return (
            t.providerData &&
              V(t.providerData, function (t) {
                t && Nh(r, Hi(t));
              }),
            t.redirectEventId && (r.ga = t.redirectEventId),
            r
          );
        }
        function qh(t) {
          (this.a = t), (this.b = Wu());
        }
        (Wc.prototype.Rc = function (t) {
          var n = this;
          return t.tb(this.a.a, this.c).then(function (t) {
            var e = ct(n.f);
            return delete e[Xc], delete e[Jc], lt(e, t), n.g(e);
          });
        }),
          w(Yc, T),
          ($c.prototype.tb = function (t, e, n) {
            return e.type == $r
              ? ((o = this),
                (a = t),
                (s = n),
                e.Ha().then(function (t) {
                  return (
                    (t = { idToken: t }),
                    void 0 !== s && (t.displayName = s),
                    lt(t, { phoneVerificationInfo: So(o.a) }),
                    Js(a, Es, t)
                  );
                }))
              : ((i = this),
                (r = t),
                e.Ha().then(function (t) {
                  return (
                    lt((t = { mfaPendingCredential: t }), {
                      phoneVerificationInfo: So(i.a),
                    }),
                    Js(r, As, t)
                  );
                }));
            var i, r, o, a, s;
          }),
          w(Zc, $c),
          w(Qc, Zc),
          w(th, qe),
          ((t = eh.prototype).yc = function (t) {
            var e;
            nh(
              this,
              ((t = t.hd),
              (e = []),
              V(t.mfaInfo || [], function (t) {
                (t = Bi(t)) && e.push(t);
              }),
              e)
            );
          }),
          (t.Sb = function () {
            return this.a.I().then(function (t) {
              return new zr(t, null);
            });
          }),
          (t.fc = function (e, n) {
            var i = this,
              r = this.a.a;
            return this.Sb()
              .then(function (t) {
                return e.tb(r, t, n);
              })
              .then(function (t) {
                return Dh(i.a, t), i.a.reload();
              });
          }),
          (t.bd = function (t) {
            var n = this,
              i = "string" == typeof t ? t : t.uid,
              e = this.a.a;
            return this.a
              .I()
              .then(function (t) {
                return Js(e, Xs, { idToken: t, mfaEnrollmentId: i });
              })
              .then(function (t) {
                var e = F(n.b, function (t) {
                  return t.uid != i;
                });
                return (
                  nh(n, e),
                  Dh(n.a, t),
                  n.a.reload().o(function (t) {
                    if ("auth/user-token-expired" != t.code) throw t;
                  })
                );
              });
          }),
          (t.w = function () {
            return {
              multiFactor: {
                enrolledFactors: q(this.b, function (t) {
                  return t.w();
                }),
              },
            };
          }),
          (ih.prototype.start = function () {
            (this.a = this.c),
              (function e(n, t) {
                n.stop();
                n.b = gn(rh(n, t))
                  .then(Pi)
                  .then(function () {
                    return n.h();
                  })
                  .then(function () {
                    e(n, !0);
                  })
                  .o(function (t) {
                    n.i(t) && e(n, !1);
                  });
              })(this, !0);
          }),
          (ih.prototype.stop = function () {
            this.b && (this.b.cancel(), (this.b = null));
          }),
          (oh.prototype.w = function () {
            return {
              apiKey: this.f.c,
              refreshToken: this.a,
              accessToken: this.b && this.b.toString(),
              expirationTime: this.c,
            };
          }),
          (oh.prototype.getToken = function (t) {
            return (
              (t = !!t),
              this.b && !this.a
                ? we(new T("user-token-expired"))
                : t || !this.b || Date.now() > this.c - 3e4
                ? this.a
                  ? uh(this, {
                      grant_type: "refresh_token",
                      refresh_token: this.a,
                    })
                  : ye(null)
                : ye({ accessToken: this.b.toString(), refreshToken: this.a })
            );
          }),
          (ch.prototype.w = function () {
            return { lastLoginAt: this.b, createdAt: this.a };
          }),
          w(lh, fn),
          (lh.prototype.xa = function (t) {
            (this.za = t), Ja(this.a, t);
          }),
          (lh.prototype.la = function () {
            return this.za;
          }),
          (lh.prototype.Ga = function () {
            return X(this.aa);
          }),
          (lh.prototype.ib = function () {
            this.D.b && (this.D.stop(), this.D.start());
          }),
          Fi(lh.prototype, "providerId", "firebase"),
          ((t = lh.prototype).reload = function () {
            var t = this;
            return Vh(
              this,
              kh(this).then(function () {
                return Rh(t)
                  .then(function () {
                    return Ih(t);
                  })
                  .then(Ah);
              })
            );
          }),
          (t.oc = function (t) {
            return this.I(t).then(function (t) {
              return new Bc(t);
            });
          }),
          (t.I = function (t) {
            var e = this;
            return Vh(
              this,
              kh(this)
                .then(function () {
                  return e.h.getToken(t);
                })
                .then(function (t) {
                  if (!t) throw new T("internal-error");
                  return (
                    t.accessToken != e.Aa &&
                      (wh(e, t.accessToken),
                      e.dispatchEvent(new th("tokenChanged"))),
                    Oh(e, "refreshToken", t.refreshToken),
                    t.accessToken
                  );
                })
            );
          }),
          (t.Kc = function (t) {
            if (!(t = t.users) || !t.length) throw new T("internal-error");
            Eh(this, {
              uid: (t = t[0]).localId,
              displayName: t.displayName,
              photoURL: t.photoUrl,
              email: t.email,
              emailVerified: !!t.emailVerified,
              phoneNumber: t.phoneNumber,
              lastLoginAt: t.lastLoginAt,
              createdAt: t.createdAt,
              tenantId: t.tenantId,
            });
            for (
              var e,
                n =
                  (e = (e = t).providerUserInfo) && e.length
                    ? q(e, function (t) {
                        return new hh(
                          t.rawId,
                          t.providerId,
                          t.email,
                          t.displayName,
                          t.photoUrl,
                          t.phoneNumber
                        );
                      })
                    : [],
                i = 0;
              i < n.length;
              i++
            )
              Nh(this, n[i]);
            Oh(
              this,
              "isAnonymous",
              !(
                (this.email && t.passwordHash) ||
                (this.providerData && this.providerData.length)
              )
            ),
              this.dispatchEvent(new th("userReloaded", { hd: t }));
          }),
          (t.Lc = function (t) {
            return (
              Ui(
                "firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."
              ),
              this.ub(t)
            );
          }),
          (t.ub = function (t) {
            var e = this,
              n = null;
            return Vh(
              this,
              t
                .c(this.a, this.uid)
                .then(function (t) {
                  return (
                    Dh(e, t),
                    (n = Lh(e, t, "reauthenticate")),
                    (e.i = null),
                    e.reload()
                  );
                })
                .then(function () {
                  return n;
                }),
              !0
            );
          }),
          (t.Cc = function (t) {
            return (
              Ui(
                "firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."
              ),
              this.rb(t)
            );
          }),
          (t.rb = function (e) {
            var n = this,
              i = null;
            return Vh(
              this,
              Ph(this, e.providerId)
                .then(function () {
                  return n.I();
                })
                .then(function (t) {
                  return e.b(n.a, t);
                })
                .then(function (t) {
                  return (i = Lh(n, t, "link")), xh(n, t);
                })
                .then(function () {
                  return i;
                })
            );
          }),
          (t.Dc = function (t, e) {
            var n = this;
            return Vh(
              this,
              Ph(this, "phone").then(function () {
                return Gc(gh(n), t, e, b(n.rb, n));
              })
            );
          }),
          (t.Mc = function (t, e) {
            var n = this;
            return Vh(
              this,
              ye().then(function () {
                return Gc(gh(n), t, e, b(n.ub, n));
              }),
              !0
            );
          }),
          (t.Cb = function (e) {
            var n = this;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return n.a.Cb(t, e);
                })
                .then(function (t) {
                  return Dh(n, t), n.reload();
                })
            );
          }),
          (t.ed = function (e) {
            var n = this;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return e.b(n.a, t);
                })
                .then(function (t) {
                  return Dh(n, t), n.reload();
                })
            );
          }),
          (t.Db = function (e) {
            var n = this;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return n.a.Db(t, e);
                })
                .then(function (t) {
                  return Dh(n, t), n.reload();
                })
            );
          }),
          (t.Eb = function (e) {
            if (void 0 === e.displayName && void 0 === e.photoURL)
              return kh(this);
            var n = this;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return n.a.Eb(t, {
                    displayName: e.displayName,
                    photoUrl: e.photoURL,
                  });
                })
                .then(function (t) {
                  return (
                    Dh(n, t),
                    Oh(n, "displayName", t.displayName || null),
                    Oh(n, "photoURL", t.photoUrl || null),
                    V(n.providerData, function (t) {
                      "password" === t.providerId &&
                        (Fi(t, "displayName", n.displayName),
                        Fi(t, "photoURL", n.photoURL));
                    }),
                    Ih(n)
                  );
                })
                .then(Ah)
            );
          }),
          (t.cd = function (e) {
            var n = this;
            return Vh(
              this,
              Rh(this).then(function (t) {
                return K(Sh(n), e)
                  ? Js(n.a, ws, { idToken: t, deleteProvider: [e] }).then(
                      function (t) {
                        var e = {};
                        return (
                          V(t.providerUserInfo || [], function (t) {
                            e[t.providerId] = !0;
                          }),
                          V(Sh(n), function (t) {
                            e[t] || _h(n, t);
                          }),
                          e[No.PROVIDER_ID] || Fi(n, "phoneNumber", null),
                          Ih(n)
                        );
                      }
                    )
                  : Ih(n).then(function () {
                      throw new T("no-such-provider");
                    });
              })
            );
          }),
          (t.delete = function () {
            var e = this;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return Js(e.a, ys, { idToken: t });
                })
                .then(function () {
                  e.dispatchEvent(new th("userDeleted"));
                })
            ).then(function () {
              for (var t = 0; t < e.N.length; t++) e.N[t].cancel("app-deleted");
              dh(e, null),
                ph(e, null),
                mh(e, null),
                (e.N = []),
                (e.J = !0),
                yh(e),
                Fi(e, "refreshToken", null),
                e.b && Sc(e.b, e);
            });
          }),
          (t.Gb = function (t, e) {
            return !!(
              ("linkViaPopup" == t && (this.g || null) == e && this.f) ||
              ("reauthViaPopup" == t && (this.g || null) == e && this.f) ||
              ("linkViaRedirect" == t && (this.ga || null) == e) ||
              ("reauthViaRedirect" == t && (this.ga || null) == e)
            );
          }),
          (t.na = function (t, e, n, i) {
            ("linkViaPopup" != t && "reauthViaPopup" != t) ||
              i != (this.g || null) ||
              (n && this.C ? this.C(n) : e && !n && this.f && this.f(e),
              this.c && (this.c.cancel(), (this.c = null)),
              delete this.f,
              delete this.C);
          }),
          (t.Fa = function (t, e) {
            return "linkViaPopup" == t && e == (this.g || null)
              ? b(this.Lb, this)
              : "reauthViaPopup" == t && e == (this.g || null)
              ? b(this.Mb, this)
              : "linkViaRedirect" == t && (this.ga || null) == e
              ? b(this.Lb, this)
              : "reauthViaRedirect" == t && (this.ga || null) == e
              ? b(this.Mb, this)
              : null;
          }),
          (t.Ec = function (t) {
            var e = this;
            return Mh(
              this,
              "linkViaPopup",
              t,
              function () {
                return Ph(e, t.providerId).then(function () {
                  return Ih(e);
                });
              },
              !1
            );
          }),
          (t.Nc = function (t) {
            return Mh(
              this,
              "reauthViaPopup",
              t,
              function () {
                return ye();
              },
              !0
            );
          }),
          (t.Fc = function (t) {
            var e = this;
            return jh(
              this,
              "linkViaRedirect",
              t,
              function () {
                return Ph(e, t.providerId);
              },
              !1
            );
          }),
          (t.Oc = function (t) {
            return jh(
              this,
              "reauthViaRedirect",
              t,
              function () {
                return ye();
              },
              !0
            );
          }),
          (t.Lb = function (e, n, t, i) {
            var r = this;
            this.c && (this.c.cancel(), (this.c = null));
            var o = null;
            return (
              (t = this.I()
                .then(function (t) {
                  return fs(r.a, {
                    requestUri: e,
                    postBody: i,
                    sessionId: n,
                    idToken: t,
                  });
                })
                .then(function (t) {
                  return (o = Lh(r, t, "link")), xh(r, t);
                })
                .then(function () {
                  return o;
                })),
              Vh(this, t)
            );
          }),
          (t.Mb = function (t, e, n, i) {
            var r = this;
            this.c && (this.c.cancel(), (this.c = null));
            var o = null;
            return Vh(
              this,
              ye()
                .then(function () {
                  return to(
                    ds(r.a, {
                      requestUri: t,
                      sessionId: e,
                      postBody: i,
                      tenantId: n,
                    }),
                    r.uid
                  );
                })
                .then(function (t) {
                  return (
                    (o = Lh(r, t, "reauthenticate")),
                    Dh(r, t),
                    (r.i = null),
                    r.reload()
                  );
                })
                .then(function () {
                  return o;
                }),
              !0
            );
          }),
          (t.vb = function (e) {
            var n = this,
              i = null;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return (i = t), void 0 === e || ut(e) ? {} : Cr(new wr(e));
                })
                .then(function (t) {
                  return n.a.vb(i, t);
                })
                .then(function (t) {
                  if (n.email != t) return n.reload();
                })
                .then(function () {})
            );
          }),
          (t.Fb = function (e, n) {
            var i = this,
              r = null;
            return Vh(
              this,
              this.I()
                .then(function (t) {
                  return (r = t), void 0 === n || ut(n) ? {} : Cr(new wr(n));
                })
                .then(function (t) {
                  return i.a.Fb(r, e, t);
                })
                .then(function (t) {
                  if (i.email != t) return i.reload();
                })
                .then(function () {})
            );
          }),
          (t.jc = function (t) {
            var e = null,
              n = this;
            return Vh(
              this,
              (t = to(ye(t), n.uid)
                .then(function (t) {
                  return (
                    (e = Lh(n, t, "reauthenticate")),
                    Dh(n, t),
                    (n.i = null),
                    n.reload()
                  );
                })
                .then(function () {
                  return e;
                })),
              !0
            );
          }),
          (t.toJSON = function () {
            return this.w();
          }),
          (t.w = function () {
            var e = {
              uid: this.uid,
              displayName: this.displayName,
              photoURL: this.photoURL,
              email: this.email,
              emailVerified: this.emailVerified,
              phoneNumber: this.phoneNumber,
              isAnonymous: this.isAnonymous,
              tenantId: this.tenantId,
              providerData: [],
              apiKey: this.l,
              appName: this.m,
              authDomain: this.s,
              stsTokenManager: this.h.w(),
              redirectEventId: this.ga || null,
            };
            return (
              this.metadata && lt(e, this.metadata.w()),
              V(this.providerData, function (t) {
                e.providerData.push(
                  (function (t) {
                    var e,
                      n = {};
                    for (e in t) t.hasOwnProperty(e) && (n[e] = t[e]);
                    return n;
                  })(t)
                );
              }),
              lt(e, this.S.w()),
              e
            );
          });
        var Hh = { name: "redirectUser", F: "session" };
        function Kh(t) {
          return Yu(t.b, Hh, t.a);
        }
        function Gh(t) {
          var e, n, i, r;
          (this.a = t),
            (this.b = Wu()),
            (this.c = null),
            (this.f =
              ((n = Xh("local")),
              (i = Xh("session")),
              (r = Xh("none")),
              (function (n, i, r) {
                var o = Ju(i, r),
                  a = Xu(n, i.F);
                return n.get(i, r).then(function (t) {
                  var e = null;
                  try {
                    e = Ni(l.localStorage.getItem(o));
                  } catch (t) {}
                  if (e && !t)
                    return l.localStorage.removeItem(o), n.set(i, e, r);
                  e &&
                    t &&
                    "localStorage" != a.type &&
                    l.localStorage.removeItem(o);
                });
              })((e = this).b, n, e.a)
                .then(function () {
                  return e.b.get(i, e.a);
                })
                .then(function (t) {
                  return t
                    ? i
                    : e.b.get(r, e.a).then(function (t) {
                        return t
                          ? r
                          : e.b.get(n, e.a).then(function (t) {
                              return t
                                ? n
                                : e.b.get(Wh, e.a).then(function (t) {
                                    return t ? Xh(t) : n;
                                  });
                            });
                      });
                })
                .then(function (t) {
                  return (e.c = t), Bh(e, t.F);
                })
                .o(function () {
                  e.c || (e.c = n);
                }))),
            this.b.addListener(Xh("local"), this.a, b(this.g, this));
        }
        function Bh(t, e) {
          var n,
            s,
            i = [];
          for (n in Gu) Gu[n] !== e && i.push(Yu(t.b, Xh(Gu[n]), t.a));
          return (
            i.push(Yu(t.b, Wh, t.a)),
            (s = i),
            new fe(function (n, e) {
              var i = s.length,
                r = [];
              if (i)
                for (
                  var t = function (t, e) {
                      i--, (r[t] = e), 0 == i && n(r);
                    },
                    o = function (t) {
                      e(t);
                    },
                    a = 0;
                  a < s.length;
                  a++
                )
                  Ie(s[a], y(t, a), o);
              else n(r);
            })
          );
        }
        Gh.prototype.g = function () {
          var e = this,
            n = Xh("local");
          $h(this, function () {
            return ye()
              .then(function () {
                return e.c && "local" != e.c.F ? e.b.get(n, e.a) : null;
              })
              .then(function (t) {
                if (t)
                  return Bh(e, "local").then(function () {
                    e.c = n;
                  });
              });
          });
        };
        var Wh = { name: "persistence", F: "session" };
        function Xh(t) {
          return { name: "authUser", F: t };
        }
        function Jh(t, e) {
          return $h(t, function () {
            return t.b.set(t.c, e.w(), t.a);
          });
        }
        function Yh(t) {
          return $h(t, function () {
            return Yu(t.b, t.c, t.a);
          });
        }
        function zh(t, e, n) {
          return $h(t, function () {
            return t.b.get(t.c, t.a).then(function (t) {
              return (
                t && e && (t.authDomain = e),
                t && n && (t.emulatorConfig = n),
                Fh(t || {})
              );
            });
          });
        }
        function $h(t, e) {
          return (t.f = t.f.then(e, e)), t.f;
        }
        function Zh(t) {
          if (
            ((this.l = !1),
            Fi(this, "settings", new Hc()),
            Fi(this, "app", t),
            !this.app.options || !this.app.options.apiKey)
          )
            throw new T("invalid-api-key");
          var n, e, i, r, o, a;
          (t = Zl.default.SDK_VERSION ? gi(Zl.default.SDK_VERSION) : null),
            (this.a = new qa(
              this.app.options && this.app.options.apiKey,
              _(A),
              t
            )),
            (this.P = []),
            (this.s = []),
            (this.N = []),
            (this.Pa = Zl.default.INTERNAL.createSubscribe(b(this.zc, this))),
            (this.W = void 0),
            (this.ib = Zl.default.INTERNAL.createSubscribe(b(this.Ac, this))),
            ol(this, null),
            (this.i = new Gh(this.app.options.apiKey + ":" + this.app.name)),
            (this.D = new qh(this.app.options.apiKey + ":" + this.app.name)),
            (this.$ = hl(
              this,
              ((e = (n = this).app.options.authDomain),
              (t = (function (e) {
                var t = (function (t, e) {
                  return t.b.get(Hh, t.a).then(function (t) {
                    return t && e && (t.authDomain = e), Fh(t || {});
                  });
                })(e.D, e.app.options.authDomain).then(function (t) {
                  return (e.m = t) && (t.ha = e.D), Kh(e.D);
                });
                return hl(e, t);
              })(n)
                .then(function () {
                  return zh(n.i, e, n.R);
                })
                .then(function (e) {
                  return e
                    ? ((e.ha = n.D),
                      n.m && (n.m.ga || null) == (e.ga || null)
                        ? e
                        : e
                            .reload()
                            .then(function () {
                              return Jh(n.i, e).then(function () {
                                return e;
                              });
                            })
                            .o(function (t) {
                              return "auth/network-request-failed" == t.code
                                ? e
                                : Yh(n.i);
                            }))
                    : null;
                })
                .then(function (t) {
                  ol(n, t || null);
                })),
              hl(n, t))
            )),
            (this.h = hl(
              this,
              (i = this).$.then(function () {
                return il(i);
              })
                .o(function () {})
                .then(function () {
                  if (!i.l) return i.ja();
                })
                .o(function () {})
                .then(function () {
                  var t;
                  i.l ||
                    ((i.ba = !0),
                    (t = i.i).b.addListener(Xh("local"), t.a, i.ja));
                })
            )),
            (this.ba = !1),
            (this.ja = b(this.Zc, this)),
            (this.Ba = b(this.da, this)),
            (this.qa = b(this.mc, this)),
            (this.za = b(this.wc, this)),
            (this.Aa = b(this.xc, this)),
            (this.b = null),
            (o = (r = this).app.options.authDomain),
            (a = r.app.options.apiKey),
            o &&
              Ii() &&
              (r.Oa = r.$.then(function () {
                var t;
                if (!r.l)
                  return (
                    (r.b = xc(o, a, r.app.name, r.R)),
                    kc(r.b, r),
                    sl(r) && Th(sl(r)),
                    r.m &&
                      (Th(r.m),
                      (t = r.m).xa(r.la()),
                      dh(t, r),
                      vh((t = r.m), r.J),
                      mh(t, r),
                      fh((t = r.m), r.R),
                      ph(t, r),
                      (r.m = null)),
                    r.b
                  );
              })),
            (this.INTERNAL = {}),
            (this.INTERNAL.delete = b(this.delete, this)),
            (this.INTERNAL.logFramework = b(this.Gc, this)),
            (this.u = 0),
            fn.call(this),
            (t = this),
            Object.defineProperty(t, "lc", {
              get: function () {
                return this.la();
              },
              set: function (t) {
                this.xa(t);
              },
              enumerable: !1,
            }),
            (t.aa = null),
            Object.defineProperty(t, "ti", {
              get: function () {
                return this.T();
              },
              set: function (t) {
                this.zb(t);
              },
              enumerable: !1,
            }),
            (t.S = null),
            Object.defineProperty(t, "emulatorConfig", {
              get: function () {
                var t;
                return (t = this.R
                  ? Hi({
                      protocol: (t = Cn(this.R.url)).c,
                      host: t.a,
                      port: t.g,
                      options: Hi({ disableWarnings: this.R.ec }),
                    })
                  : null);
              },
              enumerable: !1,
            }),
            (this.J = []),
            (this.R = null);
        }
        function Qh(t) {
          qe.call(this, "languageCodeChanged"), (this.h = t);
        }
        function tl(t) {
          qe.call(this, "emulatorConfigChanged"), (this.c = t);
        }
        function el(t) {
          qe.call(this, "frameworkChanged"), (this.f = t);
        }
        function nl(t) {
          return t.Oa || we(new T("auth-domain-config-required"));
        }
        function il(t) {
          if (!Ii())
            return we(new T("operation-not-supported-in-this-environment"));
          var e = nl(t)
            .then(function () {
              return t.b.ra();
            })
            .then(function (t) {
              return t ? Hi(t) : null;
            });
          return hl(t, e);
        }
        function rl(o, a) {
          var s = {};
          return (
            (s.apiKey = o.app.options.apiKey),
            (s.authDomain = o.app.options.authDomain),
            (s.appName = o.app.name),
            o.R && (s.emulatorConfig = o.R),
            o.$.then(function () {
              return (
                (t = s),
                (e = a),
                (n = o.D),
                (i = o.Ga()),
                (r = new lh(t, e)),
                n && (r.ha = n),
                i && vh(r, i),
                r.reload().then(function () {
                  return r;
                })
              );
              var t, e, n, i, r;
            })
              .then(function (t) {
                return (
                  sl(o) && t.uid == sl(o).uid
                    ? Ch(sl(o), t)
                    : (ol(o, t), Th(t)),
                  o.da(t)
                );
              })
              .then(function () {
                cl(o);
              })
          );
        }
        function ol(t, e) {
          var n, i;
          sl(t) &&
            ((n = sl(t)),
            (i = t.Ba),
            B(n.W, function (t) {
              return t == i;
            }),
            nn(sl(t), "tokenChanged", t.qa),
            nn(sl(t), "userDeleted", t.za),
            nn(sl(t), "userInvalidated", t.Aa),
            yh(sl(t))),
            e &&
              (e.W.push(t.Ba),
              Qe(e, "tokenChanged", t.qa),
              Qe(e, "userDeleted", t.za),
              Qe(e, "userInvalidated", t.Aa),
              0 < t.u && bh(e)),
            Fi(t, "currentUser", e),
            e &&
              (e.xa(t.la()),
              dh(e, t),
              vh(e, t.J),
              mh(e, t),
              fh(e, t.R),
              ph(e, t));
        }
        function al(n, t) {
          var e = null,
            i = null;
          return hl(
            n,
            t
              .then(
                function (t) {
                  return (e = Oo(t)), (i = Fr(t)), rl(n, t);
                },
                function (t) {
                  var e = null;
                  throw (
                    (e =
                      t && "auth/multi-factor-auth-required" === t.code
                        ? zc(t.w(), n, b(n.kc, n))
                        : e) || t
                  );
                }
              )
              .then(function () {
                return Hi({
                  user: sl(n),
                  credential: e,
                  additionalUserInfo: i,
                  operationType: "signIn",
                });
              })
          );
        }
        function sl(t) {
          return t.currentUser;
        }
        function ul(t) {
          return (sl(t) && sl(t)._lat) || null;
        }
        function cl(t) {
          if (t.ba) {
            for (var e = 0; e < t.s.length; e++) t.s[e] && t.s[e](ul(t));
            if (t.W !== t.getUid() && t.N.length)
              for (t.W = t.getUid(), e = 0; e < t.N.length; e++)
                t.N[e] && t.N[e](ul(t));
          }
        }
        function hl(t, e) {
          return (
            t.P.push(e),
            e.oa(function () {
              G(t.P, e);
            }),
            e
          );
        }
        function ll() {}
        function fl() {
          (this.a = {}), (this.b = 1e12);
        }
        (Gh.prototype.yb = function (e) {
          var n = null,
            i = this;
          return (
            (function (t) {
              var e = new T("invalid-persistence-type"),
                n = new T("unsupported-persistence-type");
              t: {
                for (i in Gu)
                  if (Gu[i] == t) {
                    var i = !0;
                    break t;
                  }
                i = !1;
              }
              if (!i || "string" != typeof t) throw e;
              switch (li()) {
                case "ReactNative":
                  if ("session" === t) throw n;
                  break;
                case "Node":
                  if ("none" !== t) throw n;
                  break;
                case "Worker":
                  if ("session" === t || (!Eu() && "none" !== t)) throw n;
                  break;
                default:
                  if (!wi() && "none" !== t) throw n;
              }
            })(e),
            $h(this, function () {
              return e != i.c.F
                ? i.b
                    .get(i.c, i.a)
                    .then(function (t) {
                      return (n = t), Bh(i, e);
                    })
                    .then(function () {
                      if (((i.c = Xh(e)), n)) return i.b.set(i.c, n, i.a);
                    })
                : ye();
            })
          );
        }),
          w(Zh, fn),
          w(Qh, qe),
          w(tl, qe),
          w(el, qe),
          ((t = Zh.prototype).yb = function (t) {
            return (t = this.i.yb(t)), hl(this, t);
          }),
          (t.xa = function (t) {
            this.aa === t ||
              this.l ||
              ((this.aa = t),
              Ja(this.a, this.aa),
              this.dispatchEvent(new Qh(this.la())));
          }),
          (t.la = function () {
            return this.aa;
          }),
          (t.fd = function () {
            var t = l.navigator;
            this.xa(
              (t &&
                ((t.languages && t.languages[0]) ||
                  t.language ||
                  t.userLanguage)) ||
                null
            );
          }),
          (t.gd = function (t, e) {
            if (!this.R) {
              if (!/^https?:\/\//.test(t))
                throw new T(
                  "argument-error",
                  "Emulator URL must start with a valid scheme (http:// or https://)."
                );
              (e = !!e && !!e.disableWarnings),
                (n = e),
                "undefined" != typeof console &&
                  "function" == typeof console.info &&
                  console.info(
                    "WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."
                  ),
                l.document &&
                  !n &&
                  si().then(function () {
                    var t = l.document.createElement("div");
                    (t.innerText =
                      "Running in emulator mode. Do not use with production credentials."),
                      (t.style.position = "fixed"),
                      (t.style.width = "100%"),
                      (t.style.backgroundColor = "#ffffff"),
                      (t.style.border = ".1em solid #000000"),
                      (t.style.color = "#b50000"),
                      (t.style.bottom = "0px"),
                      (t.style.left = "0px"),
                      (t.style.margin = "0px"),
                      (t.style.zIndex = 1e4),
                      (t.style.textAlign = "center"),
                      t.classList.add("firebase-emulator-warning"),
                      l.document.body.appendChild(t);
                  }),
                (this.R = { url: t, ec: e }),
                (this.settings.jb = !0),
                Ya(this.a, this.R),
                this.dispatchEvent(new tl(this.R));
            }
            var n;
          }),
          (t.Gc = function (t) {
            this.J.push(t),
              $a(
                this.a,
                Zl.default.SDK_VERSION
                  ? gi(Zl.default.SDK_VERSION, this.J)
                  : null
              ),
              this.dispatchEvent(new el(this.J));
          }),
          (t.Ga = function () {
            return X(this.J);
          }),
          (t.zb = function (t) {
            this.S === t || this.l || ((this.S = t), (this.a.b = this.S));
          }),
          (t.T = function () {
            return this.S;
          }),
          (t.toJSON = function () {
            return {
              apiKey: this.app.options.apiKey,
              authDomain: this.app.options.authDomain,
              appName: this.app.name,
              currentUser: sl(this) && sl(this).w(),
            };
          }),
          (t.Gb = function (t, e) {
            switch (t) {
              case "unknown":
              case "signInViaRedirect":
                return !0;
              case "signInViaPopup":
                return this.g == e && !!this.f;
              default:
                return !1;
            }
          }),
          (t.na = function (t, e, n, i) {
            "signInViaPopup" == t &&
              this.g == i &&
              (n && this.C ? this.C(n) : e && !n && this.f && this.f(e),
              this.c && (this.c.cancel(), (this.c = null)),
              delete this.f,
              delete this.C);
          }),
          (t.Fa = function (t, e) {
            return "signInViaRedirect" == t ||
              ("signInViaPopup" == t && this.g == e && this.f)
              ? b(this.ic, this)
              : null;
          }),
          (t.ic = function (t, e, n, i) {
            var r = this,
              o = { requestUri: t, postBody: i, sessionId: e, tenantId: n };
            return (
              this.c && (this.c.cancel(), (this.c = null)),
              r.$.then(function () {
                return al(r, ls(r.a, o));
              })
            );
          }),
          (t.Xc = function (e) {
            if (!Ii())
              return we(new T("operation-not-supported-in-this-environment"));
            var n = this,
              t = Vr(e.providerId),
              i = _i(),
              r = null,
              o = ri(
                (r =
                  (!Ai() || ci()) &&
                  this.app.options.authDomain &&
                  e.isOAuthProvider
                    ? cu(
                        this.app.options.authDomain,
                        this.app.options.apiKey,
                        this.app.name,
                        "signInViaPopup",
                        e,
                        null,
                        i,
                        Zl.default.SDK_VERSION || null,
                        null,
                        null,
                        this.T(),
                        this.R
                      )
                    : r),
                t && t.va,
                t && t.ua
              );
            return hl(
              this,
              (t = nl(this)
                .then(function (t) {
                  return Oc(t, o, "signInViaPopup", e, i, !!r, n.T());
                })
                .then(function () {
                  return new fe(function (t, e) {
                    n.na(
                      "signInViaPopup",
                      null,
                      new T("cancelled-popup-request"),
                      n.g
                    ),
                      (n.f = t),
                      (n.C = e),
                      (n.g = i),
                      (n.c = Dc(n.b, n, "signInViaPopup", o, i));
                  });
                })
                .then(function (t) {
                  return o && ii(o), t ? Hi(t) : null;
                })
                .o(function (t) {
                  throw (o && ii(o), t);
                }))
            );
          }),
          (t.Yc = function (t) {
            if (!Ii())
              return we(new T("operation-not-supported-in-this-environment"));
            var e = this;
            return hl(
              this,
              nl(this)
                .then(function () {
                  return $h((t = e.i), function () {
                    return t.b.set(Wh, t.c.F, t.a);
                  });
                  var t;
                })
                .then(function () {
                  return Rc(e.b, "signInViaRedirect", t, void 0, e.T());
                })
            );
          }),
          (t.ra = function () {
            var e = this;
            return il(this)
              .then(function (t) {
                return e.b && Uc(e.b.b), t;
              })
              .o(function (t) {
                throw (e.b && Uc(e.b.b), t);
              });
          }),
          (t.dd = function (t) {
            if (!t) return we(new T("null-user"));
            if (this.S != t.tenantId) return we(new T("tenant-id-mismatch"));
            var e = this,
              n = {};
            (n.apiKey = this.app.options.apiKey),
              (n.authDomain = this.app.options.authDomain),
              (n.appName = this.app.name);
            var i,
              r,
              o,
              a,
              s,
              u =
                ((i = t),
                (r = n),
                (o = e.D),
                (a = e.Ga()),
                (s = i.h),
                ((n = {})[Ka] = s.b && s.b.toString()),
                (n.refreshToken = s.a),
                (r = new lh(
                  r || { apiKey: i.l, authDomain: i.s, appName: i.m },
                  n
                )),
                o && (r.ha = o),
                a && vh(r, a),
                Ch(r, i),
                r);
            return hl(
              this,
              this.h
                .then(function () {
                  if (e.app.options.apiKey != t.l) return u.reload();
                })
                .then(function () {
                  return sl(e) && t.uid == sl(e).uid
                    ? (Ch(sl(e), t), e.da(t))
                    : (ol(e, u), Th(u), e.da(u));
                })
                .then(function () {
                  cl(e);
                })
            );
          }),
          (t.Bb = function () {
            var t = this,
              e = this.h.then(function () {
                return (
                  t.b && Uc(t.b.b),
                  sl(t)
                    ? (ol(t, null),
                      Yh(t.i).then(function () {
                        cl(t);
                      }))
                    : ye()
                );
              });
            return hl(this, e);
          }),
          (t.Zc = function () {
            var i = this;
            return zh(this.i, this.app.options.authDomain).then(function (t) {
              if (!i.l) {
                var e, n;
                if (
                  ((e = sl(i) && t) &&
                    ((e = sl(i).uid),
                    (n = t.uid),
                    (e =
                      null != e &&
                      "" !== e &&
                      null != n &&
                      "" !== n &&
                      e == n)),
                  e)
                )
                  return Ch(sl(i), t), sl(i).I();
                (sl(i) || t) &&
                  (ol(i, t),
                  t && (Th(t), (t.ha = i.D)),
                  i.b && kc(i.b, i),
                  cl(i));
              }
            });
          }),
          (t.da = function (t) {
            return Jh(this.i, t);
          }),
          (t.mc = function () {
            cl(this), this.da(sl(this));
          }),
          (t.wc = function () {
            this.Bb();
          }),
          (t.xc = function () {
            this.Bb();
          }),
          (t.kc = function (t) {
            var e = this;
            return this.h.then(function () {
              return al(e, ye(t));
            });
          }),
          (t.zc = function (t) {
            var e = this;
            this.addAuthTokenListener(function () {
              t.next(sl(e));
            });
          }),
          (t.Ac = function (t) {
            var e,
              n,
              i = this;
            (n = function () {
              t.next(sl(i));
            }),
              (e = this).N.push(n),
              hl(
                e,
                e.h.then(function () {
                  !e.l &&
                    K(e.N, n) &&
                    e.W !== e.getUid() &&
                    ((e.W = e.getUid()), n(ul(e)));
                })
              );
          }),
          (t.Ic = function (t, e, n) {
            var i = this;
            return (
              this.ba &&
                Promise.resolve().then(function () {
                  "function" == typeof t
                    ? t(sl(i))
                    : "function" == typeof t.next && t.next(sl(i));
                }),
              this.Pa(t, e, n)
            );
          }),
          (t.Hc = function (t, e, n) {
            var i = this;
            return (
              this.ba &&
                Promise.resolve().then(function () {
                  (i.W = i.getUid()),
                    "function" == typeof t
                      ? t(sl(i))
                      : "function" == typeof t.next && t.next(sl(i));
                }),
              this.ib(t, e, n)
            );
          }),
          (t.nc = function (t) {
            var e = this,
              n = this.h.then(function () {
                return sl(e)
                  ? sl(e)
                      .I(t)
                      .then(function (t) {
                        return { accessToken: t };
                      })
                  : null;
              });
            return hl(this, n);
          }),
          (t.Tc = function (t) {
            var n = this;
            return this.h
              .then(function () {
                return al(n, Js(n.a, Hs, { token: t }));
              })
              .then(function (t) {
                var e = t.user;
                return Oh(e, "isAnonymous", !1), n.da(e), t;
              });
          }),
          (t.Uc = function (t, e) {
            var n = this;
            return this.h.then(function () {
              return al(n, Js(n.a, Ks, { email: t, password: e }));
            });
          }),
          (t.dc = function (t, e) {
            var n = this;
            return this.h.then(function () {
              return al(n, Js(n.a, gs, { email: t, password: e }));
            });
          }),
          (t.ab = function (t) {
            var e = this;
            return this.h.then(function () {
              return al(e, t.ka(e.a));
            });
          }),
          (t.Sc = function (t) {
            return (
              Ui(
                "firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."
              ),
              this.ab(t)
            );
          }),
          (t.Ab = function () {
            var n = this;
            return this.h.then(function () {
              var t = sl(n);
              if (t && t.isAnonymous) {
                var e = Hi({ providerId: null, isNewUser: !1 });
                return Hi({
                  user: t,
                  credential: null,
                  additionalUserInfo: e,
                  operationType: "signIn",
                });
              }
              return al(n, n.a.Ab()).then(function (t) {
                var e = t.user;
                return Oh(e, "isAnonymous", !0), n.da(e), t;
              });
            });
          }),
          (t.getUid = function () {
            return (sl(this) && sl(this).uid) || null;
          }),
          (t.cc = function (t) {
            this.addAuthTokenListener(t),
              this.u++,
              0 < this.u && sl(this) && bh(sl(this));
          }),
          (t.Pc = function (e) {
            var n = this;
            V(this.s, function (t) {
              t == e && n.u--;
            }),
              this.u < 0 && (this.u = 0),
              0 == this.u && sl(this) && yh(sl(this)),
              this.removeAuthTokenListener(e);
          }),
          (t.addAuthTokenListener = function (t) {
            var e = this;
            this.s.push(t),
              hl(
                this,
                this.h.then(function () {
                  e.l || (K(e.s, t) && t(ul(e)));
                })
              );
          }),
          (t.removeAuthTokenListener = function (e) {
            B(this.s, function (t) {
              return t == e;
            });
          }),
          (t.delete = function () {
            this.l = !0;
            for (var t = 0; t < this.P.length; t++)
              this.P[t].cancel("app-deleted");
            return (
              (this.P = []),
              this.i &&
                (t = this.i).b.removeListener(Xh("local"), t.a, this.ja),
              this.b && (Sc(this.b, this), Uc(this.b.b)),
              Promise.resolve()
            );
          }),
          (t.hc = function (t) {
            return hl(
              this,
              Js(this.a, bs, {
                identifier: t,
                continueUri: Ti() ? ti() : "http://localhost",
              }).then(function (t) {
                return t.signinMethods || [];
              })
            );
          }),
          (t.Bc = function (t) {
            return !!Eo(t);
          }),
          (t.xb = function (e, n) {
            var i = this;
            return hl(
              this,
              ye()
                .then(function () {
                  var t = new wr(n);
                  if (!t.c)
                    throw new T(
                      "argument-error",
                      Er + " must be true when sending sign in link to email"
                    );
                  return Cr(t);
                })
                .then(function (t) {
                  return i.a.xb(e, t);
                })
                .then(function () {})
            );
          }),
          (t.jd = function (t) {
            return this.Sa(t).then(function (t) {
              return t.data.email;
            });
          }),
          (t.ob = function (t, e) {
            return hl(
              this,
              this.a.ob(t, e).then(function () {})
            );
          }),
          (t.Sa = function (t) {
            return hl(
              this,
              this.a.Sa(t).then(function (t) {
                return new $i(t);
              })
            );
          }),
          (t.kb = function (t) {
            return hl(
              this,
              this.a.kb(t).then(function () {})
            );
          }),
          (t.wb = function (e, t) {
            var n = this;
            return hl(
              this,
              ye()
                .then(function () {
                  return void 0 === t || ut(t) ? {} : Cr(new wr(t));
                })
                .then(function (t) {
                  return n.a.wb(e, t);
                })
                .then(function () {})
            );
          }),
          (t.Wc = function (t, e) {
            return hl(this, Gc(this, t, e, b(this.ab, this)));
          }),
          (t.Vc = function (n, i) {
            var r = this;
            return hl(
              this,
              ye().then(function () {
                var t = i || ti(),
                  e = To(n, t);
                if (!(t = Eo(t)))
                  throw new T("argument-error", "Invalid email link!");
                if (t.tenantId !== r.T()) throw new T("tenant-id-mismatch");
                return r.ab(e);
              })
            );
          }),
          (ll.prototype.render = function () {}),
          (ll.prototype.reset = function () {}),
          (ll.prototype.getResponse = function () {}),
          (ll.prototype.execute = function () {});
        var dl = null;
        function pl(t, e) {
          return ((e = vl(e)) && t.a[e]) || null;
        }
        function vl(t) {
          return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;
        }
        function ml(t, e) {
          (this.g = !1),
            (this.c = e),
            (this.a = this.b = null),
            (this.h = "invisible" !== this.c.size),
            (this.f = te(t));
          var n = this;
          (this.i = function () {
            n.execute();
          }),
            this.h ? this.execute() : Qe(this.f, "click", this.i);
        }
        function gl(t) {
          if (t.g) throw Error("reCAPTCHA mock was already deleted!");
        }
        function bl() {}
        function yl() {}
        (fl.prototype.render = function (t, e) {
          return (this.a[this.b.toString()] = new ml(t, e)), this.b++;
        }),
          (fl.prototype.reset = function (t) {
            var e = pl(this, t);
            (t = vl(t)), e && t && (e.delete(), delete this.a[t]);
          }),
          (fl.prototype.getResponse = function (t) {
            return (t = pl(this, t)) ? t.getResponse() : null;
          }),
          (fl.prototype.execute = function (t) {
            (t = pl(this, t)) && t.execute();
          }),
          (ml.prototype.getResponse = function () {
            return gl(this), this.b;
          }),
          (ml.prototype.execute = function () {
            gl(this);
            var n = this;
            this.a ||
              (this.a = setTimeout(function () {
                n.b = (function () {
                  for (var t = 50, e = []; 0 < t; )
                    e.push(
                      "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(
                        Math.floor(62 * Math.random())
                      )
                    ),
                      t--;
                  return e.join("");
                })();
                var t = n.c.callback,
                  e = n.c["expired-callback"];
                if (t)
                  try {
                    t(n.b);
                  } catch (t) {}
                n.a = setTimeout(function () {
                  if (((n.a = null), (n.b = null), e))
                    try {
                      e();
                    } catch (t) {}
                  n.h && n.execute();
                }, 6e4);
              }, 500));
          }),
          (ml.prototype.delete = function () {
            gl(this),
              (this.g = !0),
              clearTimeout(this.a),
              (this.a = null),
              nn(this.f, "click", this.i);
          }),
          Fi(bl, "FACTOR_ID", "phone"),
          (yl.prototype.g = function () {
            return ye((dl = dl || new fl()));
          }),
          (yl.prototype.c = function () {});
        var wl = null;
        function Il() {
          (this.b = l.grecaptcha ? 1 / 0 : 0),
            (this.f = null),
            (this.a = "__rcb" + Math.floor(1e6 * Math.random()).toString());
        }
        var Tl = new dt(
            gt,
            "https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"
          ),
          El = new Ri(3e4, 6e4);
        (Il.prototype.g = function (r) {
          var o = this;
          return new fe(function (t, e) {
            var i = setTimeout(function () {
              e(new T("network-request-failed"));
            }, El.get());
            !l.grecaptcha || (r !== o.f && !o.b)
              ? ((l[o.a] = function () {
                  var n;
                  l.grecaptcha
                    ? ((o.f = r),
                      (n = l.grecaptcha.render),
                      (l.grecaptcha.render = function (t, e) {
                        return (t = n(t, e)), o.b++, t;
                      }),
                      clearTimeout(i),
                      t(l.grecaptcha))
                    : (clearTimeout(i), e(new T("internal-error"))),
                    delete l[o.a];
                }),
                ye(La(It(Tl, { onload: o.a, hl: r || "" }))).o(function () {
                  clearTimeout(i),
                    e(
                      new T(
                        "internal-error",
                        "Unable to load external reCAPTCHA dependencies!"
                      )
                    );
                }))
              : (clearTimeout(i), t(l.grecaptcha));
          });
        }),
          (Il.prototype.c = function () {
            this.b--;
          });
        var Al = null;
        function kl(t, e, n, i, r, o, a) {
          if (
            (Fi(this, "type", "recaptcha"),
            (this.c = this.f = null),
            (this.J = !1),
            (this.v = e),
            (this.g = null),
            (a = a ? (wl = wl || new yl()) : (Al = Al || new Il())),
            (this.m = a),
            (this.a = n || { theme: "light", type: "image" }),
            (this.h = []),
            this.a[_l])
          )
            throw new T(
              "argument-error",
              "sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project."
            );
          if (((this.i = "invisible" === this.a[Ol]), !l.document))
            throw new T(
              "operation-not-supported-in-this-environment",
              "RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support."
            );
          if (!te(e) || (!this.i && te(e).hasChildNodes()))
            throw new T(
              "argument-error",
              "reCAPTCHA container is either not found or already contains inner elements!"
            );
          (this.s = new qa(t, o || null, r || null)),
            (this.u =
              i ||
              function () {
                return null;
              });
          var s = this;
          this.l = [];
          var u = this.a[Sl];
          this.a[Sl] = function (t) {
            var e;
            Cl(s, t),
              "function" == typeof u
                ? u(t)
                : "string" != typeof u ||
                  ("function" == typeof (e = yi(u, l)) && e(t));
          };
          var c = this.a[Nl];
          this.a[Nl] = function () {
            var t;
            Cl(s, null),
              "function" == typeof c
                ? c()
                : "string" != typeof c ||
                  ("function" == typeof (t = yi(c, l)) && t());
          };
        }
        var Sl = "callback",
          Nl = "expired-callback",
          _l = "sitekey",
          Ol = "size";
        function Cl(t, e) {
          for (var n = 0; n < t.l.length; n++)
            try {
              t.l[n](e);
            } catch (t) {}
        }
        function Rl(t, e) {
          return (
            t.h.push(e),
            e.oa(function () {
              G(t.h, e);
            }),
            e
          );
        }
        function Dl(t) {
          if (t.J)
            throw new T(
              "internal-error",
              "RecaptchaVerifier instance has been destroyed."
            );
        }
        function Pl(t, e, n) {
          var i = !1;
          try {
            this.b = n || Zl.default.app();
          } catch (t) {
            throw new T(
              "argument-error",
              "No firebase.app.App instance is currently initialized."
            );
          }
          if (!this.b.options || !this.b.options.apiKey)
            throw new T("invalid-api-key");
          n = this.b.options.apiKey;
          var r = this,
            o = null;
          try {
            o = this.b.auth().Ga();
          } catch (t) {}
          try {
            i = this.b.auth().settings.appVerificationDisabledForTesting;
          } catch (t) {}
          (o = Zl.default.SDK_VERSION ? gi(Zl.default.SDK_VERSION, o) : null),
            kl.call(
              this,
              n,
              t,
              e,
              function () {
                try {
                  var e = r.b.auth().la();
                } catch (t) {
                  e = null;
                }
                return e;
              },
              o,
              _(A),
              i
            );
        }
        function Ll(t, e, n, i) {
          t: {
            n = Array.prototype.slice.call(n);
            for (var r = 0, o = !1, a = 0; a < e.length; a++)
              if (e[a].optional) o = !0;
              else {
                if (o)
                  throw new T(
                    "internal-error",
                    "Argument validator encountered a required argument after an optional argument."
                  );
                r++;
              }
            if (((o = e.length), n.length < r || o < n.length))
              i =
                "Expected " +
                (r == o
                  ? 1 == r
                    ? "1 argument"
                    : r + " arguments"
                  : r + "-" + o + " arguments") +
                " but got " +
                n.length +
                ".";
            else {
              for (r = 0; r < n.length; r++)
                if (
                  ((o = e[r].optional && void 0 === n[r]), !e[r].M(n[r]) && !o)
                ) {
                  if (((e = e[r]), r < 0 || r >= xl.length))
                    throw new T(
                      "internal-error",
                      "Argument validator received an unsupported number of arguments."
                    );
                  (n = xl[r]),
                    (i =
                      (i ? "" : n + " argument ") +
                      (e.name ? '"' + e.name + '" ' : "") +
                      "must be " +
                      e.K +
                      ".");
                  break t;
                }
              i = null;
            }
          }
          if (i) throw new T("argument-error", t + " failed: " + i);
        }
        ((t = kl.prototype).Ia = function () {
          var e = this;
          return (
            this.f ||
            (this.f = Rl(
              this,
              ye()
                .then(function () {
                  if (Ti() && !hi()) return si();
                  throw new T(
                    "operation-not-supported-in-this-environment",
                    "RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment."
                  );
                })
                .then(function () {
                  return e.m.g(e.u());
                })
                .then(function (t) {
                  return (e.g = t), Js(e.s, Rs, {});
                })
                .then(function (t) {
                  e.a[_l] = t.recaptchaSiteKey;
                })
                .o(function (t) {
                  throw ((e.f = null), t);
                })
            ))
          );
        }),
          (t.render = function () {
            Dl(this);
            var n = this;
            return Rl(
              this,
              this.Ia().then(function () {
                var t, e;
                return (
                  null === n.c &&
                    ((e = n.v),
                    n.i || ((t = te(e)), (e = oe("DIV")), t.appendChild(e)),
                    (n.c = n.g.render(e, n.a))),
                  n.c
                );
              })
            );
          }),
          (t.verify = function () {
            Dl(this);
            var r = this;
            return Rl(
              this,
              this.render().then(function (e) {
                return new fe(function (n) {
                  var i,
                    t = r.g.getResponse(e);
                  t
                    ? n(t)
                    : (r.l.push(
                        (i = function (t) {
                          var e;
                          t &&
                            ((e = i),
                            B(r.l, function (t) {
                              return t == e;
                            }),
                            n(t));
                        })
                      ),
                      r.i && r.g.execute(r.c));
                });
              })
            );
          }),
          (t.reset = function () {
            Dl(this), null !== this.c && this.g.reset(this.c);
          }),
          (t.clear = function () {
            Dl(this), (this.J = !0), this.m.c();
            for (var t, e = 0; e < this.h.length; e++)
              this.h[e].cancel(
                "RecaptchaVerifier instance has been destroyed."
              );
            if (!this.i) {
              e = te(this.v);
              for (; (t = e.firstChild); ) e.removeChild(t);
            }
          }),
          w(Pl, kl);
        var xl =
          "First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(
            " "
          );
        function Ml(t, e) {
          return {
            name: t || "",
            K: "a valid string",
            optional: !!e,
            M: function (t) {
              return "string" == typeof t;
            },
          };
        }
        function jl(t, e) {
          return {
            name: t || "",
            K: "a boolean",
            optional: !!e,
            M: function (t) {
              return "boolean" == typeof t;
            },
          };
        }
        function Ul(t, e) {
          return { name: t || "", K: "a valid object", optional: !!e, M: m };
        }
        function Vl(t, e) {
          return {
            name: t || "",
            K: "a function",
            optional: !!e,
            M: function (t) {
              return "function" == typeof t;
            },
          };
        }
        function Fl(t, e) {
          return {
            name: t || "",
            K: "null",
            optional: !!e,
            M: function (t) {
              return null === t;
            },
          };
        }
        function ql(n) {
          return {
            name: n ? n + "Credential" : "credential",
            K: n ? "a valid " + n + " credential" : "a valid credential",
            optional: !1,
            M: function (t) {
              if (!t) return !1;
              var e = !n || t.providerId === n;
              return !(!t.ka || !e);
            },
          };
        }
        function Hl() {
          return {
            name: "multiFactorAssertion",
            K: "a valid multiFactorAssertion",
            optional: !1,
            M: function (t) {
              return !!t && !!t.tb;
            },
          };
        }
        function Kl() {
          return {
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function (t) {
              return !!(
                t &&
                t.providerId &&
                t.hasOwnProperty &&
                t.hasOwnProperty("isOAuthProvider")
              );
            },
          };
        }
        function Gl(t, e) {
          return (
            m(t) &&
            "string" == typeof t.type &&
            t.type === e &&
            "function" == typeof t.Ha
          );
        }
        function Bl(t) {
          return m(t) && "string" == typeof t.uid;
        }
        function Wl() {
          return {
            name: "applicationVerifier",
            K: "an implementation of firebase.auth.ApplicationVerifier",
            optional: !1,
            M: function (t) {
              return !(
                !t ||
                "string" != typeof t.type ||
                "function" != typeof t.verify
              );
            },
          };
        }
        function Xl(e, n, t, i) {
          return {
            name: t || "",
            K: e.K + " or " + n.K,
            optional: !!i,
            M: function (t) {
              return e.M(t) || n.M(t);
            },
          };
        }
        function Jl(t, e) {
          for (var n in e) {
            var i = e[n].name;
            t[i] = $l(i, t[n], e[n].j);
          }
        }
        function Yl(t, e) {
          for (var n in e) {
            var i = e[n].name;
            i !== n &&
              Object.defineProperty(t, i, {
                get: y(function (t) {
                  return this[t];
                }, n),
                set: y(
                  function (t, e, n, i) {
                    Ll(t, [n], [i], !0), (this[e] = i);
                  },
                  i,
                  n,
                  e[n].lb
                ),
                enumerable: !0,
              });
          }
        }
        function zl(t, e, n, i) {
          t[e] = $l(e, n, i);
        }
        function $l(t, e, n) {
          function i() {
            var t = Array.prototype.slice.call(arguments);
            return Ll(o, n, t), e.apply(this, t);
          }
          if (!n) return e;
          var r,
            o = (t = (t = t).split("."))[t.length - 1];
          for (r in e) i[r] = e[r];
          for (r in e.prototype) i.prototype[r] = e.prototype[r];
          return i;
        }
        Jl(Zh.prototype, {
          kb: { name: "applyActionCode", j: [Ml("code")] },
          Sa: { name: "checkActionCode", j: [Ml("code")] },
          ob: {
            name: "confirmPasswordReset",
            j: [Ml("code"), Ml("newPassword")],
          },
          dc: {
            name: "createUserWithEmailAndPassword",
            j: [Ml("email"), Ml("password")],
          },
          hc: { name: "fetchSignInMethodsForEmail", j: [Ml("email")] },
          ra: { name: "getRedirectResult", j: [] },
          Bc: { name: "isSignInWithEmailLink", j: [Ml("emailLink")] },
          Hc: {
            name: "onAuthStateChanged",
            j: [
              Xl(Ul(), Vl(), "nextOrObserver"),
              Vl("opt_error", !0),
              Vl("opt_completed", !0),
            ],
          },
          Ic: {
            name: "onIdTokenChanged",
            j: [
              Xl(Ul(), Vl(), "nextOrObserver"),
              Vl("opt_error", !0),
              Vl("opt_completed", !0),
            ],
          },
          wb: {
            name: "sendPasswordResetEmail",
            j: [
              Ml("email"),
              Xl(
                Ul("opt_actionCodeSettings", !0),
                Fl(null, !0),
                "opt_actionCodeSettings",
                !0
              ),
            ],
          },
          xb: {
            name: "sendSignInLinkToEmail",
            j: [Ml("email"), Ul("actionCodeSettings")],
          },
          yb: { name: "setPersistence", j: [Ml("persistence")] },
          Sc: { name: "signInAndRetrieveDataWithCredential", j: [ql()] },
          Ab: { name: "signInAnonymously", j: [] },
          ab: { name: "signInWithCredential", j: [ql()] },
          Tc: { name: "signInWithCustomToken", j: [Ml("token")] },
          Uc: {
            name: "signInWithEmailAndPassword",
            j: [Ml("email"), Ml("password")],
          },
          Vc: {
            name: "signInWithEmailLink",
            j: [Ml("email"), Ml("emailLink", !0)],
          },
          Wc: { name: "signInWithPhoneNumber", j: [Ml("phoneNumber"), Wl()] },
          Xc: { name: "signInWithPopup", j: [Kl()] },
          Yc: { name: "signInWithRedirect", j: [Kl()] },
          dd: {
            name: "updateCurrentUser",
            j: [
              Xl(
                {
                  name: "user",
                  K: "an instance of Firebase User",
                  optional: !1,
                  M: function (t) {
                    return !!(t && t instanceof lh);
                  },
                },
                Fl(),
                "user"
              ),
            ],
          },
          Bb: { name: "signOut", j: [] },
          toJSON: { name: "toJSON", j: [Ml(null, !0)] },
          fd: { name: "useDeviceLanguage", j: [] },
          gd: { name: "useEmulator", j: [Ml("url"), Ul("options", !0)] },
          jd: { name: "verifyPasswordResetCode", j: [Ml("code")] },
        }),
          Yl(Zh.prototype, {
            lc: { name: "languageCode", lb: Xl(Ml(), Fl(), "languageCode") },
            ti: { name: "tenantId", lb: Xl(Ml(), Fl(), "tenantId") },
          }),
          ((Zh.Persistence = Gu).LOCAL = "local"),
          (Zh.Persistence.SESSION = "session"),
          (Zh.Persistence.NONE = "none"),
          Jl(lh.prototype, {
            delete: { name: "delete", j: [] },
            oc: { name: "getIdTokenResult", j: [jl("opt_forceRefresh", !0)] },
            I: { name: "getIdToken", j: [jl("opt_forceRefresh", !0)] },
            Cc: { name: "linkAndRetrieveDataWithCredential", j: [ql()] },
            rb: { name: "linkWithCredential", j: [ql()] },
            Dc: { name: "linkWithPhoneNumber", j: [Ml("phoneNumber"), Wl()] },
            Ec: { name: "linkWithPopup", j: [Kl()] },
            Fc: { name: "linkWithRedirect", j: [Kl()] },
            Lc: {
              name: "reauthenticateAndRetrieveDataWithCredential",
              j: [ql()],
            },
            ub: { name: "reauthenticateWithCredential", j: [ql()] },
            Mc: {
              name: "reauthenticateWithPhoneNumber",
              j: [Ml("phoneNumber"), Wl()],
            },
            Nc: { name: "reauthenticateWithPopup", j: [Kl()] },
            Oc: { name: "reauthenticateWithRedirect", j: [Kl()] },
            reload: { name: "reload", j: [] },
            vb: {
              name: "sendEmailVerification",
              j: [
                Xl(
                  Ul("opt_actionCodeSettings", !0),
                  Fl(null, !0),
                  "opt_actionCodeSettings",
                  !0
                ),
              ],
            },
            toJSON: { name: "toJSON", j: [Ml(null, !0)] },
            cd: { name: "unlink", j: [Ml("provider")] },
            Cb: { name: "updateEmail", j: [Ml("email")] },
            Db: { name: "updatePassword", j: [Ml("password")] },
            ed: { name: "updatePhoneNumber", j: [ql("phone")] },
            Eb: { name: "updateProfile", j: [Ul("profile")] },
            Fb: {
              name: "verifyBeforeUpdateEmail",
              j: [
                Ml("email"),
                Xl(
                  Ul("opt_actionCodeSettings", !0),
                  Fl(null, !0),
                  "opt_actionCodeSettings",
                  !0
                ),
              ],
            },
          }),
          Jl(fl.prototype, {
            execute: { name: "execute" },
            render: { name: "render" },
            reset: { name: "reset" },
            getResponse: { name: "getResponse" },
          }),
          Jl(ll.prototype, {
            execute: { name: "execute" },
            render: { name: "render" },
            reset: { name: "reset" },
            getResponse: { name: "getResponse" },
          }),
          Jl(fe.prototype, {
            oa: { name: "finally" },
            o: { name: "catch" },
            then: { name: "then" },
          }),
          Yl(Hc.prototype, {
            appVerificationDisabled: {
              name: "appVerificationDisabledForTesting",
              lb: jl("appVerificationDisabledForTesting"),
            },
          }),
          Jl(Kc.prototype, {
            confirm: { name: "confirm", j: [Ml("verificationCode")] },
          }),
          zl(
            Qr,
            "fromJSON",
            function (t) {
              t = "string" == typeof t ? JSON.parse(t) : t;
              for (var e, n = [ao, wo, ko, io], i = 0; i < n.length; i++)
                if ((e = n[i](t))) return e;
              return null;
            },
            [Xl(Ml(), Ul(), "json")]
          ),
          zl(
            Io,
            "credential",
            function (t, e) {
              return new yo(t, e);
            },
            [Ml("email"), Ml("password")]
          ),
          Jl(yo.prototype, { w: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(ho.prototype, {
            Ca: { name: "addScope", j: [Ml("scope")] },
            Ka: {
              name: "setCustomParameters",
              j: [Ul("customOAuthParameters")],
            },
          }),
          zl(ho, "credential", lo, [Xl(Ml(), Ul(), "token")]),
          zl(Io, "credentialWithLink", To, [Ml("email"), Ml("emailLink")]),
          Jl(fo.prototype, {
            Ca: { name: "addScope", j: [Ml("scope")] },
            Ka: {
              name: "setCustomParameters",
              j: [Ul("customOAuthParameters")],
            },
          }),
          zl(fo, "credential", po, [Xl(Ml(), Ul(), "token")]),
          Jl(vo.prototype, {
            Ca: { name: "addScope", j: [Ml("scope")] },
            Ka: {
              name: "setCustomParameters",
              j: [Ul("customOAuthParameters")],
            },
          }),
          zl(vo, "credential", mo, [
            Xl(Ml(), Xl(Ul(), Fl()), "idToken"),
            Xl(Ml(), Fl(), "accessToken", !0),
          ]),
          Jl(go.prototype, {
            Ka: {
              name: "setCustomParameters",
              j: [Ul("customOAuthParameters")],
            },
          }),
          zl(go, "credential", bo, [Xl(Ml(), Ul(), "token"), Ml("secret", !0)]),
          Jl(co.prototype, {
            Ca: { name: "addScope", j: [Ml("scope")] },
            credential: {
              name: "credential",
              j: [
                Xl(Ml(), Xl(Ul(), Fl()), "optionsOrIdToken"),
                Xl(Ml(), Fl(), "accessToken", !0),
              ],
            },
            Ka: {
              name: "setCustomParameters",
              j: [Ul("customOAuthParameters")],
            },
          }),
          Jl(ro.prototype, { w: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(eo.prototype, { w: { name: "toJSON", j: [Ml(null, !0)] } }),
          zl(No, "credential", _o, [
            Ml("verificationId"),
            Ml("verificationCode"),
          ]),
          Jl(No.prototype, {
            gb: {
              name: "verifyPhoneNumber",
              j: [
                Xl(
                  Ml(),
                  {
                    name: "phoneInfoOptions",
                    K: "valid phone info options",
                    optional: !1,
                    M: function (t) {
                      return (
                        !!t &&
                        (t.session && t.phoneNumber
                          ? Gl(t.session, $r) &&
                            "string" == typeof t.phoneNumber
                          : t.session && t.multiFactorHint
                          ? Gl(t.session, Zr) && Bl(t.multiFactorHint)
                          : t.session && t.multiFactorUid
                          ? Gl(t.session, Zr) &&
                            "string" == typeof t.multiFactorUid
                          : !!t.phoneNumber && "string" == typeof t.phoneNumber)
                      );
                    },
                  },
                  "phoneInfoOptions"
                ),
                Wl(),
              ],
            },
          }),
          Jl(Ao.prototype, { w: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(T.prototype, { toJSON: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(jo.prototype, { toJSON: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(Mo.prototype, { toJSON: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(Yc.prototype, { toJSON: { name: "toJSON", j: [Ml(null, !0)] } }),
          Jl(Wc.prototype, { Rc: { name: "resolveSignIn", j: [Hl()] } }),
          Jl(eh.prototype, {
            Sb: { name: "getSession", j: [] },
            fc: { name: "enroll", j: [Hl(), Ml("displayName", !0)] },
            bd: {
              name: "unenroll",
              j: [
                Xl(
                  {
                    name: "multiFactorInfo",
                    K: "a valid multiFactorInfo",
                    optional: !1,
                    M: Bl,
                  },
                  Ml(),
                  "multiFactorInfoIdentifier"
                ),
              ],
            },
          }),
          Jl(Pl.prototype, {
            clear: { name: "clear", j: [] },
            render: { name: "render", j: [] },
            verify: { name: "verify", j: [] },
          }),
          zl(lr, "parseLink", yr, [Ml("link")]),
          zl(
            bl,
            "assertion",
            function (t) {
              return new Qc(t);
            },
            [ql("phone")]
          ),
          (function () {
            if (
              void 0 === Zl.default ||
              !Zl.default.INTERNAL ||
              !Zl.default.INTERNAL.registerComponent
            )
              throw Error(
                "Cannot find the firebase namespace; be sure to include firebase-app.js before this library."
              );
            var t = {
              ActionCodeInfo: {
                Operation: {
                  EMAIL_SIGNIN: Qi,
                  PASSWORD_RESET: "PASSWORD_RESET",
                  RECOVER_EMAIL: "RECOVER_EMAIL",
                  REVERT_SECOND_FACTOR_ADDITION: Zi,
                  VERIFY_AND_CHANGE_EMAIL: tr,
                  VERIFY_EMAIL: "VERIFY_EMAIL",
                },
              },
              Auth: Zh,
              AuthCredential: Qr,
              Error: T,
            };
            zl(t, "EmailAuthProvider", Io, []),
              zl(t, "FacebookAuthProvider", ho, []),
              zl(t, "GithubAuthProvider", fo, []),
              zl(t, "GoogleAuthProvider", vo, []),
              zl(t, "TwitterAuthProvider", go, []),
              zl(t, "OAuthProvider", co, [Ml("providerId")]),
              zl(t, "SAMLAuthProvider", uo, [Ml("providerId")]),
              zl(t, "PhoneAuthProvider", No, [
                {
                  name: "auth",
                  K: "an instance of Firebase Auth",
                  optional: !0,
                  M: function (t) {
                    return !!(t && t instanceof Zh);
                  },
                },
              ]),
              zl(t, "RecaptchaVerifier", Pl, [
                Xl(
                  Ml(),
                  {
                    name: "",
                    K: "an HTML element",
                    optional: !1,
                    M: function (t) {
                      return !!(t && t instanceof Element);
                    },
                  },
                  "recaptchaContainer"
                ),
                Ul("recaptchaParameters", !0),
                {
                  name: "app",
                  K: "an instance of Firebase App",
                  optional: !0,
                  M: function (t) {
                    return !!(t && t instanceof Zl.default.app.App);
                  },
                },
              ]),
              zl(t, "ActionCodeURL", lr, []),
              zl(t, "PhoneMultiFactorGenerator", bl, []),
              Zl.default.INTERNAL.registerComponent({
                name: "auth",
                instanceFactory: function (t) {
                  return new Zh((t = t.getProvider("app").getImmediate()));
                },
                multipleInstances: !1,
                serviceProps: t,
                instantiationMode: "LAZY",
                type: "PUBLIC",
                onInstanceCreated: function (t) {
                  t.getProvider("auth-internal").initialize();
                },
              }),
              Zl.default.INTERNAL.registerComponent({
                name: "auth-internal",
                instanceFactory: function (t) {
                  return {
                    getUid: b(
                      (t = t.getProvider("auth").getImmediate()).getUid,
                      t
                    ),
                    getToken: b(t.nc, t),
                    addAuthTokenListener: b(t.cc, t),
                    removeAuthTokenListener: b(t.Pc, t),
                  };
                },
                multipleInstances: !1,
                instantiationMode: "LAZY",
                type: "PRIVATE",
              }),
              Zl.default.registerVersion("@firebase/auth", "0.16.8"),
              Zl.default.INTERNAL.extendNamespace({ User: lh });
          })();
      }.apply(
        "undefined" != typeof global
          ? global
          : "undefined" != typeof self
          ? self
          : "undefined" != typeof window
          ? window
          : {}
      );
    }.apply(this, arguments);
  } catch (t) {
    throw (
      (console.error(t),
      new Error(
        "Cannot instantiate firebase-auth.js - be sure to load firebase-app.js first."
      ))
    );
  }
});
!(function (t, e) {
  "object" == typeof exports && "undefined" != typeof module
    ? e(require("@firebase/app"))
    : "function" == typeof define && define.amd
    ? define(["@firebase/app"], e)
    : e(
        (t = "undefined" != typeof globalThis ? globalThis : t || self).firebase
      );
})(this, function (mm) {
  "use strict";
  try {
    !function () {
      function t(t) {
        return t && "object" == typeof t && "default" in t ? t : { default: t };
      }
      var e = t(mm),
        r = function (t, e) {
          return (r =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            })(t, e);
        };
      function n(t, e) {
        if ("function" != typeof e && null !== e)
          throw new TypeError(
            "Class extends value " + String(e) + " is not a constructor or null"
          );
        function n() {
          this.constructor = t;
        }
        r(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((n.prototype = e.prototype), new n()));
      }
      var o = function () {
        return (o =
          Object.assign ||
          function (t) {
            for (var e, n = 1, r = arguments.length; n < r; n++)
              for (var i in (e = arguments[n]))
                Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
            return t;
          }).apply(this, arguments);
      };
      function y(t, s, a, u) {
        return new (a = a || Promise)(function (n, e) {
          function r(t) {
            try {
              o(u.next(t));
            } catch (t) {
              e(t);
            }
          }
          function i(t) {
            try {
              o(u.throw(t));
            } catch (t) {
              e(t);
            }
          }
          function o(t) {
            var e;
            t.done
              ? n(t.value)
              : ((e = t.value) instanceof a
                  ? e
                  : new a(function (t) {
                      t(e);
                    })
                ).then(r, i);
          }
          o((u = u.apply(t, s || [])).next());
        });
      }
      function g(n, r) {
        var i,
          o,
          s,
          a = {
            label: 0,
            sent: function () {
              if (1 & s[0]) throw s[1];
              return s[1];
            },
            trys: [],
            ops: [],
          },
          t = { next: e(0), throw: e(1), return: e(2) };
        return (
          "function" == typeof Symbol &&
            (t[Symbol.iterator] = function () {
              return this;
            }),
          t
        );
        function e(e) {
          return function (t) {
            return (function (e) {
              if (i) throw new TypeError("Generator is already executing.");
              for (; a; )
                try {
                  if (
                    ((i = 1),
                    o &&
                      (s =
                        2 & e[0]
                          ? o.return
                          : e[0]
                          ? o.throw || ((s = o.return) && s.call(o), 0)
                          : o.next) &&
                      !(s = s.call(o, e[1])).done)
                  )
                    return s;
                  switch (((o = 0), (e = s ? [2 & e[0], s.value] : e)[0])) {
                    case 0:
                    case 1:
                      s = e;
                      break;
                    case 4:
                      return a.label++, { value: e[1], done: !1 };
                    case 5:
                      a.label++, (o = e[1]), (e = [0]);
                      continue;
                    case 7:
                      (e = a.ops.pop()), a.trys.pop();
                      continue;
                    default:
                      if (
                        !(s = 0 < (s = a.trys).length && s[s.length - 1]) &&
                        (6 === e[0] || 2 === e[0])
                      ) {
                        a = 0;
                        continue;
                      }
                      if (3 === e[0] && (!s || (e[1] > s[0] && e[1] < s[3]))) {
                        a.label = e[1];
                        break;
                      }
                      if (6 === e[0] && a.label < s[1]) {
                        (a.label = s[1]), (s = e);
                        break;
                      }
                      if (s && a.label < s[2]) {
                        (a.label = s[2]), a.ops.push(e);
                        break;
                      }
                      s[2] && a.ops.pop(), a.trys.pop();
                      continue;
                  }
                  e = r.call(n, a);
                } catch (t) {
                  (e = [6, t]), (o = 0);
                } finally {
                  i = s = 0;
                }
              if (5 & e[0]) throw e[1];
              return { value: e[0] ? e[1] : void 0, done: !0 };
            })([e, t]);
          };
        }
      }
      function s(t, e) {
        for (var n = 0, r = e.length, i = t.length; n < r; n++, i++)
          t[i] = e[n];
        return t;
      }
      var a = {
        byteToCharMap_: null,
        charToByteMap_: null,
        byteToCharMapWebSafe_: null,
        charToByteMapWebSafe_: null,
        ENCODED_VALS_BASE:
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
        get ENCODED_VALS() {
          return this.ENCODED_VALS_BASE + "+/=";
        },
        get ENCODED_VALS_WEBSAFE() {
          return this.ENCODED_VALS_BASE + "-_.";
        },
        HAS_NATIVE_SUPPORT: "function" == typeof atob,
        encodeByteArray: function (t, e) {
          if (!Array.isArray(t))
            throw Error("encodeByteArray takes an array as a parameter");
          this.init_();
          for (
            var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_,
              r = [],
              i = 0;
            i < t.length;
            i += 3
          ) {
            var o = t[i],
              s = i + 1 < t.length,
              a = s ? t[i + 1] : 0,
              u = i + 2 < t.length,
              c = u ? t[i + 2] : 0,
              h = ((15 & a) << 2) | (c >> 6),
              c = 63 & c;
            u || ((c = 64), s || (h = 64)),
              r.push(n[o >> 2], n[((3 & o) << 4) | (a >> 4)], n[h], n[c]);
          }
          return r.join("");
        },
        encodeString: function (t, e) {
          return this.HAS_NATIVE_SUPPORT && !e
            ? btoa(t)
            : this.encodeByteArray(
                (function (t) {
                  for (var e = [], n = 0, r = 0; r < t.length; r++) {
                    var i = t.charCodeAt(r);
                    i < 128
                      ? (e[n++] = i)
                      : (i < 2048
                          ? (e[n++] = (i >> 6) | 192)
                          : (55296 == (64512 & i) &&
                            r + 1 < t.length &&
                            56320 == (64512 & t.charCodeAt(r + 1))
                              ? ((i =
                                  65536 +
                                  ((1023 & i) << 10) +
                                  (1023 & t.charCodeAt(++r))),
                                (e[n++] = (i >> 18) | 240),
                                (e[n++] = ((i >> 12) & 63) | 128))
                              : (e[n++] = (i >> 12) | 224),
                            (e[n++] = ((i >> 6) & 63) | 128)),
                        (e[n++] = (63 & i) | 128));
                  }
                  return e;
                })(t),
                e
              );
        },
        decodeString: function (t, e) {
          return this.HAS_NATIVE_SUPPORT && !e
            ? atob(t)
            : (function (t) {
                for (var e = [], n = 0, r = 0; n < t.length; ) {
                  var i,
                    o,
                    s,
                    a = t[n++];
                  a < 128
                    ? (e[r++] = String.fromCharCode(a))
                    : 191 < a && a < 224
                    ? ((o = t[n++]),
                      (e[r++] = String.fromCharCode(
                        ((31 & a) << 6) | (63 & o)
                      )))
                    : 239 < a && a < 365
                    ? ((i =
                        (((7 & a) << 18) |
                          ((63 & (o = t[n++])) << 12) |
                          ((63 & (s = t[n++])) << 6) |
                          (63 & t[n++])) -
                        65536),
                      (e[r++] = String.fromCharCode(55296 + (i >> 10))),
                      (e[r++] = String.fromCharCode(56320 + (1023 & i))))
                    : ((o = t[n++]),
                      (s = t[n++]),
                      (e[r++] = String.fromCharCode(
                        ((15 & a) << 12) | ((63 & o) << 6) | (63 & s)
                      )));
                }
                return e.join("");
              })(this.decodeStringToByteArray(t, e));
        },
        decodeStringToByteArray: function (t, e) {
          this.init_();
          for (
            var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_,
              r = [],
              i = 0;
            i < t.length;

          ) {
            var o = n[t.charAt(i++)],
              s = i < t.length ? n[t.charAt(i)] : 0,
              a = ++i < t.length ? n[t.charAt(i)] : 64,
              u = ++i < t.length ? n[t.charAt(i)] : 64;
            if ((++i, null == o || null == s || null == a || null == u))
              throw Error();
            r.push((o << 2) | (s >> 4)),
              64 !== a &&
                (r.push(((s << 4) & 240) | (a >> 2)),
                64 !== u && r.push(((a << 6) & 192) | u));
          }
          return r;
        },
        init_: function () {
          if (!this.byteToCharMap_) {
            (this.byteToCharMap_ = {}),
              (this.charToByteMap_ = {}),
              (this.byteToCharMapWebSafe_ = {}),
              (this.charToByteMapWebSafe_ = {});
            for (var t = 0; t < this.ENCODED_VALS.length; t++)
              (this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t)),
                (this.charToByteMap_[this.byteToCharMap_[t]] = t),
                (this.byteToCharMapWebSafe_[t] =
                  this.ENCODED_VALS_WEBSAFE.charAt(t)),
                (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] =
                  t) >= this.ENCODED_VALS_BASE.length &&
                  ((this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)] =
                    t),
                  (this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] =
                    t));
          }
        },
      };
      function h() {
        return "undefined" != typeof navigator &&
          "string" == typeof navigator.userAgent
          ? navigator.userAgent
          : "";
      }
      function i() {
        return (
          !(function () {
            try {
              return (
                "[object process]" ===
                Object.prototype.toString.call(global.process)
              );
            } catch (t) {
              return;
            }
          })() &&
          navigator.userAgent.includes("Safari") &&
          !navigator.userAgent.includes("Chrome")
        );
      }
      var u,
        c = "FirebaseError",
        l = (n(f, (u = Error)), f);
      function f(t, e, n) {
        e = u.call(this, e) || this;
        return (
          (e.code = t),
          (e.customData = n),
          (e.name = c),
          Object.setPrototypeOf(e, f.prototype),
          Error.captureStackTrace &&
            Error.captureStackTrace(e, d.prototype.create),
          e
        );
      }
      var d =
        ((p.prototype.create = function (t) {
          for (var e = [], n = 1; n < arguments.length; n++)
            e[n - 1] = arguments[n];
          var r,
            i = e[0] || {},
            o = this.service + "/" + t,
            t = this.errors[t],
            t = t
              ? ((r = i),
                t.replace(v, function (t, e) {
                  var n = r[e];
                  return null != n ? String(n) : "<" + e + "?>";
                }))
              : "Error",
            t = this.serviceName + ": " + t + " (" + o + ").";
          return new l(o, t, i);
        }),
        p);
      function p(t, e, n) {
        (this.service = t), (this.serviceName = e), (this.errors = n);
      }
      var m,
        v = /\{\$([^}]+)}/g;
      function w(t) {
        return t && t._delegate ? t._delegate : t;
      }
      ((N = m = m || {})[(N.DEBUG = 0)] = "DEBUG"),
        (N[(N.VERBOSE = 1)] = "VERBOSE"),
        (N[(N.INFO = 2)] = "INFO"),
        (N[(N.WARN = 3)] = "WARN"),
        (N[(N.ERROR = 4)] = "ERROR"),
        (N[(N.SILENT = 5)] = "SILENT");
      function b(t, e) {
        for (var n = [], r = 2; r < arguments.length; r++)
          n[r - 2] = arguments[r];
        if (!(e < t.logLevel)) {
          var i = new Date().toISOString(),
            o = I[e];
          if (!o)
            throw new Error(
              "Attempted to log a message with an invalid logType (value: " +
                e +
                ")"
            );
          console[o].apply(console, s(["[" + i + "]  " + t.name + ":"], n));
        }
      }
      var E = {
          debug: m.DEBUG,
          verbose: m.VERBOSE,
          info: m.INFO,
          warn: m.WARN,
          error: m.ERROR,
          silent: m.SILENT,
        },
        T = m.INFO,
        I =
          (((Ee = {})[m.DEBUG] = "log"),
          (Ee[m.VERBOSE] = "log"),
          (Ee[m.INFO] = "info"),
          (Ee[m.WARN] = "warn"),
          (Ee[m.ERROR] = "error"),
          Ee),
        _ =
          (Object.defineProperty(S.prototype, "logLevel", {
            get: function () {
              return this._logLevel;
            },
            set: function (t) {
              if (!(t in m))
                throw new TypeError(
                  'Invalid value "' + t + '" assigned to `logLevel`'
                );
              this._logLevel = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (S.prototype.setLogLevel = function (t) {
            this._logLevel = "string" == typeof t ? E[t] : t;
          }),
          Object.defineProperty(S.prototype, "logHandler", {
            get: function () {
              return this._logHandler;
            },
            set: function (t) {
              if ("function" != typeof t)
                throw new TypeError(
                  "Value assigned to `logHandler` must be a function"
                );
              this._logHandler = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(S.prototype, "userLogHandler", {
            get: function () {
              return this._userLogHandler;
            },
            set: function (t) {
              this._userLogHandler = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (S.prototype.debug = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._userLogHandler &&
              this._userLogHandler.apply(this, s([this, m.DEBUG], t)),
              this._logHandler.apply(this, s([this, m.DEBUG], t));
          }),
          (S.prototype.log = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._userLogHandler &&
              this._userLogHandler.apply(this, s([this, m.VERBOSE], t)),
              this._logHandler.apply(this, s([this, m.VERBOSE], t));
          }),
          (S.prototype.info = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._userLogHandler &&
              this._userLogHandler.apply(this, s([this, m.INFO], t)),
              this._logHandler.apply(this, s([this, m.INFO], t));
          }),
          (S.prototype.warn = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._userLogHandler &&
              this._userLogHandler.apply(this, s([this, m.WARN], t)),
              this._logHandler.apply(this, s([this, m.WARN], t));
          }),
          (S.prototype.error = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._userLogHandler &&
              this._userLogHandler.apply(this, s([this, m.ERROR], t)),
              this._logHandler.apply(this, s([this, m.ERROR], t));
          }),
          S);
      function S(t) {
        (this.name = t),
          (this._logLevel = T),
          (this._logHandler = b),
          (this._userLogHandler = null);
      }
      var A = function (t, e) {
        return (A =
          Object.setPrototypeOf ||
          ({ __proto__: [] } instanceof Array &&
            function (t, e) {
              t.__proto__ = e;
            }) ||
          function (t, e) {
            for (var n in e)
              Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
          })(t, e);
      };
      function D(t) {
        var e = "function" == typeof Symbol && Symbol.iterator,
          n = e && t[e],
          r = 0;
        if (n) return n.call(t);
        if (t && "number" == typeof t.length)
          return {
            next: function () {
              return {
                value: (t = t && r >= t.length ? void 0 : t) && t[r++],
                done: !t,
              };
            },
          };
        throw new TypeError(
          e ? "Object is not iterable." : "Symbol.iterator is not defined."
        );
      }
      var N,
        C =
          "undefined" != typeof globalThis
            ? globalThis
            : "undefined" != typeof window
            ? window
            : "undefined" != typeof global
            ? global
            : "undefined" != typeof self
            ? self
            : {},
        k = {},
        R = C || self;
      function x() {}
      function O(t) {
        var e = typeof t;
        return (
          "array" ==
            (e =
              "object" != e
                ? e
                : t
                ? Array.isArray(t)
                  ? "array"
                  : e
                : "null") ||
          ("object" == e && "number" == typeof t.length)
        );
      }
      function L(t) {
        var e = typeof t;
        return ("object" == e && null != t) || "function" == e;
      }
      var P = "closure_uid_" + ((1e9 * Math.random()) >>> 0),
        M = 0;
      function F(t, e, n) {
        return t.call.apply(t.bind, arguments);
      }
      function V(e, n, t) {
        if (!e) throw Error();
        if (2 < arguments.length) {
          var r = Array.prototype.slice.call(arguments, 2);
          return function () {
            var t = Array.prototype.slice.call(arguments);
            return Array.prototype.unshift.apply(t, r), e.apply(n, t);
          };
        }
        return function () {
          return e.apply(n, arguments);
        };
      }
      function U(t, e, n) {
        return (U =
          Function.prototype.bind &&
          -1 != Function.prototype.bind.toString().indexOf("native code")
            ? F
            : V).apply(null, arguments);
      }
      function q(e) {
        var n = Array.prototype.slice.call(arguments, 1);
        return function () {
          var t = n.slice();
          return t.push.apply(t, arguments), e.apply(this, t);
        };
      }
      function B(t, o) {
        function e() {}
        (e.prototype = o.prototype),
          (t.Z = o.prototype),
          (t.prototype = new e()),
          ((t.prototype.constructor = t).Vb = function (t, e, n) {
            for (
              var r = Array(arguments.length - 2), i = 2;
              i < arguments.length;
              i++
            )
              r[i - 2] = arguments[i];
            return o.prototype[e].apply(t, r);
          });
      }
      function j() {
        (this.s = this.s), (this.o = this.o);
      }
      var K = {};
      (j.prototype.s = !1),
        (j.prototype.na = function () {
          var t;
          !this.s &&
            ((this.s = !0), this.M(), 0) &&
            ((t = this),
            (t =
              (Object.prototype.hasOwnProperty.call(t, P) && t[P]) ||
              (t[P] = ++M)),
            delete K[t]);
        }),
        (j.prototype.M = function () {
          if (this.o) for (; this.o.length; ) this.o.shift()();
        });
      var G = Array.prototype.indexOf
          ? function (t, e) {
              return Array.prototype.indexOf.call(t, e, void 0);
            }
          : function (t, e) {
              if ("string" == typeof t)
                return "string" != typeof e || 1 != e.length
                  ? -1
                  : t.indexOf(e, 0);
              for (var n = 0; n < t.length; n++)
                if (n in t && t[n] === e) return n;
              return -1;
            },
        Q = Array.prototype.forEach
          ? function (t, e, n) {
              Array.prototype.forEach.call(t, e, n);
            }
          : function (t, e, n) {
              for (
                var r = t.length,
                  i = "string" == typeof t ? t.split("") : t,
                  o = 0;
                o < r;
                o++
              )
                o in i && e.call(n, i[o], o, t);
            };
      function H() {
        return Array.prototype.concat.apply([], arguments);
      }
      function z(t) {
        var e = t.length;
        if (0 < e) {
          for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
          return n;
        }
        return [];
      }
      function W(t) {
        return /^[\s\xa0]*$/.test(t);
      }
      var Y,
        X = String.prototype.trim
          ? function (t) {
              return t.trim();
            }
          : function (t) {
              return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
            };
      function $(t, e) {
        return -1 != t.indexOf(e);
      }
      function J(t, e) {
        return t < e ? -1 : e < t ? 1 : 0;
      }
      t: {
        var Z = R.navigator;
        if (Z) {
          Z = Z.userAgent;
          if (Z) {
            Y = Z;
            break t;
          }
        }
        Y = "";
      }
      function tt(t, e, n) {
        for (var r in t) e.call(n, t[r], r, t);
      }
      function et(t) {
        var e,
          n = {};
        for (e in t) n[e] = t[e];
        return n;
      }
      var nt =
        "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
          " "
        );
      function rt(t) {
        for (var e, n, r = 1; r < arguments.length; r++) {
          for (e in (n = arguments[r])) t[e] = n[e];
          for (var i = 0; i < nt.length; i++)
            (e = nt[i]),
              Object.prototype.hasOwnProperty.call(n, e) && (t[e] = n[e]);
        }
      }
      function it(t) {
        return it[" "](t), t;
      }
      it[" "] = x;
      var ot,
        st = $(Y, "Opera"),
        at = $(Y, "Trident") || $(Y, "MSIE"),
        ut = $(Y, "Edge"),
        ct = ut || at,
        ht =
          $(Y, "Gecko") &&
          !($(Y.toLowerCase(), "webkit") && !$(Y, "Edge")) &&
          !($(Y, "Trident") || $(Y, "MSIE")) &&
          !$(Y, "Edge"),
        lt = $(Y.toLowerCase(), "webkit") && !$(Y, "Edge");
      function ft() {
        var t = R.document;
        return t ? t.documentMode : void 0;
      }
      t: {
        var dt = "",
          pt =
            ((pt = Y),
            ht
              ? /rv:([^\);]+)(\)|;)/.exec(pt)
              : ut
              ? /Edge\/([\d\.]+)/.exec(pt)
              : at
              ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pt)
              : lt
              ? /WebKit\/(\S+)/.exec(pt)
              : st
              ? /(?:Version)[ \/]?(\S+)/.exec(pt)
              : void 0);
        if ((pt && (dt = pt ? pt[1] : ""), at)) {
          pt = ft();
          if (null != pt && pt > parseFloat(dt)) {
            ot = String(pt);
            break t;
          }
        }
        ot = dt;
      }
      var yt = {};
      function gt() {
        return (
          (t = function () {
            for (
              var t = 0,
                e = X(String(ot)).split("."),
                n = X("9").split("."),
                r = Math.max(e.length, n.length),
                i = 0;
              0 == t && i < r;
              i++
            )
              for (
                var o = e[i] || "", s = n[i] || "";
                (o = /(\d*)(\D*)(.*)/.exec(o) || ["", "", "", ""]),
                  (s = /(\d*)(\D*)(.*)/.exec(s) || ["", "", "", ""]),
                  (0 != o[0].length || 0 != s[0].length) &&
                    ((t =
                      J(
                        0 == o[1].length ? 0 : parseInt(o[1], 10),
                        0 == s[1].length ? 0 : parseInt(s[1], 10)
                      ) ||
                      J(0 == o[2].length, 0 == s[2].length) ||
                      J(o[2], s[2])),
                    (o = o[3]),
                    (s = s[3]),
                    0 == t);

              );
            return 0 <= t;
          }),
          (e = yt),
          Object.prototype.hasOwnProperty.call(e, 9) ? e[9] : (e[9] = t(9))
        );
        var t, e;
      }
      var mt = (R.document && at && (ft() || parseInt(ot, 10))) || void 0,
        vt = (function () {
          if (!R.addEventListener || !Object.defineProperty) return !1;
          var t = !1,
            e = Object.defineProperty({}, "passive", {
              get: function () {
                t = !0;
              },
            });
          try {
            R.addEventListener("test", x, e),
              R.removeEventListener("test", x, e);
          } catch (t) {}
          return t;
        })();
      function wt(t, e) {
        (this.type = t),
          (this.g = this.target = e),
          (this.defaultPrevented = !1);
      }
      function bt(t, e) {
        if (
          (wt.call(this, t ? t.type : ""),
          (this.relatedTarget = this.g = this.target = null),
          (this.button =
            this.screenY =
            this.screenX =
            this.clientY =
            this.clientX =
              0),
          (this.key = ""),
          (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
          (this.state = null),
          (this.pointerId = 0),
          (this.pointerType = ""),
          (this.i = null),
          t)
        ) {
          var n = (this.type = t.type),
            r =
              t.changedTouches && t.changedTouches.length
                ? t.changedTouches[0]
                : null;
          if (
            ((this.target = t.target || t.srcElement),
            (this.g = e),
            (e = t.relatedTarget))
          ) {
            if (ht) {
              t: {
                try {
                  it(e.nodeName);
                  var i = !0;
                  break t;
                } catch (t) {}
                i = !1;
              }
              i || (e = null);
            }
          } else
            "mouseover" == n
              ? (e = t.fromElement)
              : "mouseout" == n && (e = t.toElement);
          (this.relatedTarget = e),
            r
              ? ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
                (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
                (this.screenX = r.screenX || 0),
                (this.screenY = r.screenY || 0))
              : ((this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
                (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
                (this.screenX = t.screenX || 0),
                (this.screenY = t.screenY || 0)),
            (this.button = t.button),
            (this.key = t.key || ""),
            (this.ctrlKey = t.ctrlKey),
            (this.altKey = t.altKey),
            (this.shiftKey = t.shiftKey),
            (this.metaKey = t.metaKey),
            (this.pointerId = t.pointerId || 0),
            (this.pointerType =
              "string" == typeof t.pointerType
                ? t.pointerType
                : Et[t.pointerType] || ""),
            (this.state = t.state),
            (this.i = t).defaultPrevented && bt.Z.h.call(this);
        }
      }
      (wt.prototype.h = function () {
        this.defaultPrevented = !0;
      }),
        B(bt, wt);
      var Et = { 2: "touch", 3: "pen", 4: "mouse" };
      bt.prototype.h = function () {
        bt.Z.h.call(this);
        var t = this.i;
        t.preventDefault ? t.preventDefault() : (t.returnValue = !1);
      };
      var Tt = "closure_listenable_" + ((1e6 * Math.random()) | 0),
        It = 0;
      function _t(t, e, n, r, i) {
        (this.listener = t),
          (this.proxy = null),
          (this.src = e),
          (this.type = n),
          (this.capture = !!r),
          (this.ia = i),
          (this.key = ++It),
          (this.ca = this.fa = !1);
      }
      function St(t) {
        (t.ca = !0),
          (t.listener = null),
          (t.proxy = null),
          (t.src = null),
          (t.ia = null);
      }
      function At(t) {
        (this.src = t), (this.g = {}), (this.h = 0);
      }
      function Dt(t, e) {
        var n,
          r,
          i,
          o = e.type;
        o in t.g &&
          ((n = t.g[o]),
          (i = 0 <= (r = G(n, e))) && Array.prototype.splice.call(n, r, 1),
          i && (St(e), 0 == t.g[o].length && (delete t.g[o], t.h--)));
      }
      function Nt(t, e, n, r) {
        for (var i = 0; i < t.length; ++i) {
          var o = t[i];
          if (!o.ca && o.listener == e && o.capture == !!n && o.ia == r)
            return i;
        }
        return -1;
      }
      At.prototype.add = function (t, e, n, r, i) {
        var o = t.toString();
        (t = this.g[o]) || ((t = this.g[o] = []), this.h++);
        var s = Nt(t, e, r, i);
        return (
          -1 < s
            ? ((e = t[s]), n || (e.fa = !1))
            : (((e = new _t(e, this.src, o, !!r, i)).fa = n), t.push(e)),
          e
        );
      };
      var Ct = "closure_lm_" + ((1e6 * Math.random()) | 0),
        kt = {};
      function Rt(t, e, n, r, i) {
        if (r && r.once)
          return (function t(e, n, r, i, o) {
            if (Array.isArray(n)) {
              for (var s = 0; s < n.length; s++) t(e, n[s], r, i, o);
              return null;
            }
            r = Vt(r);
            return e && e[Tt]
              ? e.O(n, r, L(i) ? !!i.capture : !!i, o)
              : xt(e, n, r, !0, i, o);
          })(t, e, n, r, i);
        if (Array.isArray(e)) {
          for (var o = 0; o < e.length; o++) Rt(t, e[o], n, r, i);
          return null;
        }
        return (
          (n = Vt(n)),
          t && t[Tt]
            ? t.N(e, n, L(r) ? !!r.capture : !!r, i)
            : xt(t, e, n, !1, r, i)
        );
      }
      function xt(t, e, n, r, i, o) {
        if (!e) throw Error("Invalid event type");
        var s,
          a = L(i) ? !!i.capture : !!i,
          u = Mt(t);
        if ((u || (t[Ct] = u = new At(t)), (n = u.add(e, n, r, a, o)).proxy))
          return n;
        if (
          ((s = Pt),
          ((n.proxy = r =
            function t(e) {
              return s.call(t.src, t.listener, e);
            }).src = t),
          (r.listener = n),
          t.addEventListener)
        )
          void 0 === (i = !vt ? a : i) && (i = !1),
            t.addEventListener(e.toString(), r, i);
        else if (t.attachEvent) t.attachEvent(Lt(e.toString()), r);
        else {
          if (!t.addListener || !t.removeListener)
            throw Error("addEventListener and attachEvent are unavailable.");
          t.addListener(r);
        }
        return n;
      }
      function Ot(t) {
        var e, n, r;
        "number" != typeof t &&
          t &&
          !t.ca &&
          ((e = t.src) && e[Tt]
            ? Dt(e.i, t)
            : ((n = t.type),
              (r = t.proxy),
              e.removeEventListener
                ? e.removeEventListener(n, r, t.capture)
                : e.detachEvent
                ? e.detachEvent(Lt(n), r)
                : e.addListener && e.removeListener && e.removeListener(r),
              (n = Mt(e))
                ? (Dt(n, t), 0 == n.h && ((n.src = null), (e[Ct] = null)))
                : St(t)));
      }
      function Lt(t) {
        return t in kt ? kt[t] : (kt[t] = "on" + t);
      }
      function Pt(t, e) {
        var n, r;
        return (t =
          !!t.ca ||
          ((e = new bt(e, this)),
          (n = t.listener),
          (r = t.ia || t.src),
          t.fa && Ot(t),
          n.call(r, e)));
      }
      function Mt(t) {
        return (t = t[Ct]) instanceof At ? t : null;
      }
      var Ft = "__closure_events_fn_" + ((1e9 * Math.random()) >>> 0);
      function Vt(e) {
        return "function" == typeof e
          ? e
          : (e[Ft] ||
              (e[Ft] = function (t) {
                return e.handleEvent(t);
              }),
            e[Ft]);
      }
      function Ut() {
        j.call(this), (this.i = new At(this)), ((this.P = this).I = null);
      }
      function qt(t, e) {
        var n,
          r = t.I;
        if (r) for (n = []; r; r = r.I) n.push(r);
        if (
          ((t = t.P),
          (r = e.type || e),
          "string" == typeof e
            ? (e = new wt(e, t))
            : e instanceof wt
            ? (e.target = e.target || t)
            : ((s = e), rt((e = new wt(r, t)), s)),
          (s = !0),
          n)
        )
          for (var i = n.length - 1; 0 <= i; i--)
            var o = (e.g = n[i]), s = Bt(o, r, !0, e) && s;
        if (
          ((s = Bt((o = e.g = t), r, !0, e) && s),
          (s = Bt(o, r, !1, e) && s),
          n)
        )
          for (i = 0; i < n.length; i++)
            s = Bt((o = e.g = n[i]), r, !1, e) && s;
      }
      function Bt(t, e, n, r) {
        if (!(e = t.i.g[String(e)])) return !0;
        e = e.concat();
        for (var i = !0, o = 0; o < e.length; ++o) {
          var s,
            a,
            u = e[o];
          u &&
            !u.ca &&
            u.capture == n &&
            ((s = u.listener),
            (a = u.ia || u.src),
            u.fa && Dt(t.i, u),
            (i = !1 !== s.call(a, r) && i));
        }
        return i && !r.defaultPrevented;
      }
      B(Ut, j),
        (Ut.prototype[Tt] = !0),
        (Ut.prototype.removeEventListener = function (t, e, n, r) {
          !(function t(e, n, r, i, o) {
            if (Array.isArray(n))
              for (var s = 0; s < n.length; s++) t(e, n[s], r, i, o);
            else
              (i = L(i) ? !!i.capture : !!i),
                (r = Vt(r)),
                e && e[Tt]
                  ? ((e = e.i),
                    (n = String(n).toString()) in e.g &&
                      -1 < (r = Nt((s = e.g[n]), r, i, o)) &&
                      (St(s[r]),
                      Array.prototype.splice.call(s, r, 1),
                      0 == s.length && (delete e.g[n], e.h--)))
                  : (e = e && Mt(e)) &&
                    ((n = e.g[n.toString()]),
                    (r =
                      (e = -1) < (e = n ? Nt(n, r, i, o) : e) ? n[e] : null) &&
                      Ot(r));
          })(this, t, e, n, r);
        }),
        (Ut.prototype.M = function () {
          if ((Ut.Z.M.call(this), this.i)) {
            var t,
              e = this.i;
            for (t in e.g) {
              for (var n = e.g[t], r = 0; r < n.length; r++) St(n[r]);
              delete e.g[t], e.h--;
            }
          }
          this.I = null;
        }),
        (Ut.prototype.N = function (t, e, n, r) {
          return this.i.add(String(t), e, !1, n, r);
        }),
        (Ut.prototype.O = function (t, e, n, r) {
          return this.i.add(String(t), e, !0, n, r);
        });
      var jt = R.JSON.stringify;
      var Kt =
        ((Gt.prototype.add = function (t, e) {
          var n = Qt.get();
          n.set(t, e), this.h ? (this.h.next = n) : (this.g = n), (this.h = n);
        }),
        Gt);
      function Gt() {
        this.h = this.g = null;
      }
      var Qt =
        ((Ht.prototype.get = function () {
          var t;
          return (
            0 < this.h
              ? (this.h--, (t = this.g), (this.g = t.next), (t.next = null))
              : (t = this.i()),
            t
          );
        }),
        new Ht(
          function () {
            return new Wt();
          },
          function (t) {
            return t.reset();
          }
        ));
      function Ht(t, e) {
        (this.i = t), (this.j = e), (this.h = 0), (this.g = null);
      }
      var zt,
        Wt =
          ((Yt.prototype.set = function (t, e) {
            (this.h = t), (this.g = e), (this.next = null);
          }),
          (Yt.prototype.reset = function () {
            this.next = this.g = this.h = null;
          }),
          Yt);
      function Yt() {
        this.next = this.g = this.h = null;
      }
      function Xt(t, e) {
        var n;
        zt ||
          ((n = R.Promise.resolve(void 0)),
          (zt = function () {
            n.then(Zt);
          })),
          $t || (zt(), ($t = !0)),
          Jt.add(t, e);
      }
      var $t = !1,
        Jt = new Kt();
      function Zt() {
        for (
          var t;
          (e = t = void 0),
            (e = null),
            (t = Jt).g &&
              ((e = t.g),
              (t.g = t.g.next),
              t.g || (t.h = null),
              (e.next = null)),
            (t = e);

        ) {
          try {
            t.h.call(t.g);
          } catch (t) {
            !(function (t) {
              R.setTimeout(function () {
                throw t;
              }, 0);
            })(t);
          }
          var e = Qt;
          e.j(t), e.h < 100 && (e.h++, (t.next = e.g), (e.g = t));
        }
        $t = !1;
      }
      function te(t, e) {
        Ut.call(this),
          (this.h = t || 1),
          (this.g = e || R),
          (this.j = U(this.kb, this)),
          (this.l = Date.now());
      }
      function ee(t) {
        (t.da = !1), t.S && (t.g.clearTimeout(t.S), (t.S = null));
      }
      function ne(t, e, n) {
        if ("function" == typeof t) n && (t = U(t, n));
        else {
          if (!t || "function" != typeof t.handleEvent)
            throw Error("Invalid listener argument");
          t = U(t.handleEvent, t);
        }
        return 2147483647 < Number(e) ? -1 : R.setTimeout(t, e || 0);
      }
      B(te, Ut),
        ((N = te.prototype).da = !1),
        (N.S = null),
        (N.kb = function () {
          var t;
          this.da &&
            (0 < (t = Date.now() - this.l) && t < 0.8 * this.h
              ? (this.S = this.g.setTimeout(this.j, this.h - t))
              : (this.S && (this.g.clearTimeout(this.S), (this.S = null)),
                qt(this, "tick"),
                this.da && (ee(this), this.start())));
        }),
        (N.start = function () {
          (this.da = !0),
            this.S ||
              ((this.S = this.g.setTimeout(this.j, this.h)),
              (this.l = Date.now()));
        }),
        (N.M = function () {
          te.Z.M.call(this), ee(this), delete this.g;
        });
      var re,
        ie =
          ((function (t, e) {
            if ("function" != typeof e && null !== e)
              throw new TypeError(
                "Class extends value " +
                  String(e) +
                  " is not a constructor or null"
              );
            function n() {
              this.constructor = t;
            }
            A(t, e),
              (t.prototype =
                null === e
                  ? Object.create(e)
                  : ((n.prototype = e.prototype), new n()));
          })(oe, (re = j)),
          (oe.prototype.l = function (t) {
            (this.h = arguments),
              this.g
                ? (this.i = !0)
                : (function t(e) {
                    e.g = ne(function () {
                      (e.g = null), e.i && ((e.i = !1), t(e));
                    }, e.j);
                    var n = e.h;
                    (e.h = null), e.m.apply(null, n);
                  })(this);
          }),
          (oe.prototype.M = function () {
            re.prototype.M.call(this),
              this.g &&
                (R.clearTimeout(this.g),
                (this.g = null),
                (this.i = !1),
                (this.h = null));
          }),
          oe);
      function oe(t, e) {
        var n = re.call(this) || this;
        return (n.m = t), (n.j = e), (n.h = null), (n.i = !1), (n.g = null), n;
      }
      function se(t) {
        j.call(this), (this.h = t), (this.g = {});
      }
      B(se, j);
      var ae = [];
      function ue(t, e, n, r) {
        Array.isArray(n) || (n && (ae[0] = n.toString()), (n = ae));
        for (var i = 0; i < n.length; i++) {
          var o = Rt(e, n[i], r || t.handleEvent, !1, t.h || t);
          if (!o) break;
          t.g[o.key] = o;
        }
      }
      function ce(t) {
        tt(
          t.g,
          function (t, e) {
            this.g.hasOwnProperty(e) && Ot(t);
          },
          t
        ),
          (t.g = {});
      }
      function he() {
        this.g = !0;
      }
      function le(t, e, n, r) {
        t.info(function () {
          return (
            "XMLHTTP TEXT (" +
            e +
            "): " +
            (function (t, e) {
              if (!t.g) return e;
              if (!e) return null;
              try {
                var n = JSON.parse(e);
                if (n)
                  for (t = 0; t < n.length; t++)
                    if (Array.isArray(n[t])) {
                      var r = n[t];
                      if (!(r.length < 2)) {
                        var i = r[1];
                        if (Array.isArray(i) && !(i.length < 1)) {
                          var o = i[0];
                          if ("noop" != o && "stop" != o && "close" != o)
                            for (var s = 1; s < i.length; s++) i[s] = "";
                        }
                      }
                    }
                return jt(n);
              } catch (t) {
                return e;
              }
            })(t, n) +
            (r ? " " + r : "")
          );
        });
      }
      (se.prototype.M = function () {
        se.Z.M.call(this), ce(this);
      }),
        (se.prototype.handleEvent = function () {
          throw Error("EventHandler.handleEvent not implemented");
        }),
        (he.prototype.Aa = function () {
          this.g = !1;
        }),
        (he.prototype.info = function () {});
      var fe = {},
        de = null;
      function pe() {
        return (de = de || new Ut());
      }
      function ye(t) {
        wt.call(this, fe.Ma, t);
      }
      function ge() {
        var t = pe();
        qt(t, new ye(t));
      }
      function me(t, e) {
        wt.call(this, fe.STAT_EVENT, t), (this.stat = e);
      }
      function ve(t) {
        var e = pe();
        qt(e, new me(e, t));
      }
      function we(t, e) {
        wt.call(this, fe.Na, t), (this.size = e);
      }
      function be(t, e) {
        if ("function" != typeof t)
          throw Error("Fn must not be null and must be a function");
        return R.setTimeout(function () {
          t();
        }, e);
      }
      (fe.Ma = "serverreachability"),
        B(ye, wt),
        (fe.STAT_EVENT = "statevent"),
        B(me, wt),
        (fe.Na = "timingevent"),
        B(we, wt);
      var Ee = {
          NO_ERROR: 0,
          lb: 1,
          yb: 2,
          xb: 3,
          sb: 4,
          wb: 5,
          zb: 6,
          Ja: 7,
          TIMEOUT: 8,
          Cb: 9,
        },
        C = {
          qb: "complete",
          Mb: "success",
          Ka: "error",
          Ja: "abort",
          Eb: "ready",
          Fb: "readystatechange",
          TIMEOUT: "timeout",
          Ab: "incrementaldata",
          Db: "progress",
          tb: "downloadprogress",
          Ub: "uploadprogress",
        };
      function Te() {}
      function Ie(t) {
        return t.h || (t.h = t.i());
      }
      function _e() {}
      Te.prototype.h = null;
      Kt = { OPEN: "a", pb: "b", Ka: "c", Bb: "d" };
      function Se() {
        wt.call(this, "d");
      }
      function Ae() {
        wt.call(this, "c");
      }
      function De() {}
      function Ne(t, e, n, r) {
        (this.l = t),
          (this.j = e),
          (this.m = n),
          (this.X = r || 1),
          (this.V = new se(this)),
          (this.P = Re),
          (this.W = new te((t = ct ? 125 : void 0))),
          (this.H = null),
          (this.i = !1),
          (this.s = this.A = this.v = this.K = this.F = this.Y = this.B = null),
          (this.D = []),
          (this.g = null),
          (this.C = 0),
          (this.o = this.u = null),
          (this.N = -1),
          (this.I = !1),
          (this.O = 0),
          (this.L = null),
          (this.aa = this.J = this.$ = this.U = !1),
          (this.h = new Ce());
      }
      function Ce() {
        (this.i = null), (this.g = ""), (this.h = !1);
      }
      B(Se, wt),
        B(Ae, wt),
        B(De, Te),
        (De.prototype.g = function () {
          return new XMLHttpRequest();
        }),
        (De.prototype.i = function () {
          return {};
        });
      var ke = new De(),
        Re = 45e3,
        xe = {},
        Oe = {};
      function Le(t, e, n) {
        (t.K = 1), (t.v = nn(Xe(e))), (t.s = n), (t.U = !0), Pe(t, null);
      }
      function Pe(t, e) {
        (t.F = Date.now()), Ve(t), (t.A = Xe(t.v));
        var s,
          a,
          u,
          c,
          h,
          l,
          n = t.A,
          r = t.X;
        Array.isArray(r) || (r = [String(r)]),
          gn(n.h, "t", r),
          (t.C = 0),
          (n = t.l.H),
          (t.h = new Ce()),
          (t.g = mr(t.l, n ? e : null, !t.s)),
          0 < t.O && (t.L = new ie(U(t.Ia, t, t.g), t.O)),
          ue(t.V, t.g, "readystatechange", t.gb),
          (e = t.H ? et(t.H) : {}),
          t.s
            ? (t.u || (t.u = "POST"),
              (e["Content-Type"] = "application/x-www-form-urlencoded"),
              t.g.ea(t.A, t.u, t.s, e))
            : ((t.u = "GET"), t.g.ea(t.A, t.u, null, e)),
          ge(),
          (s = t.j),
          (a = t.u),
          (u = t.A),
          (c = t.m),
          (h = t.X),
          (l = t.s),
          s.info(function () {
            if (s.g)
              if (l)
                for (var t = "", e = l.split("&"), n = 0; n < e.length; n++) {
                  var r,
                    i,
                    o = e[n].split("=");
                  1 < o.length &&
                    ((r = o[0]),
                    (o = o[1]),
                    (t =
                      2 <= (i = r.split("_")).length && "type" == i[1]
                        ? t + (r + "=") + o + "&"
                        : t + (r + "=redacted&")));
                }
              else t = null;
            else t = l;
            return (
              "XMLHTTP REQ (" +
              c +
              ") [attempt " +
              h +
              "]: " +
              a +
              "\n" +
              u +
              "\n" +
              t
            );
          });
      }
      function Me(t) {
        return t.g && "GET" == t.u && 2 != t.K && t.l.Ba;
      }
      function Fe(t, e, n) {
        for (var r, i, o, s, a, u = !0; !t.I && t.C < n.length; ) {
          if (
            ((o = n),
            (a = s = void 0),
            (s = (i = t).C),
            (r =
              -1 == (a = o.indexOf("\n", s))
                ? Oe
                : ((s = Number(o.substring(s, a))),
                  isNaN(s)
                    ? xe
                    : (a += 1) + s > o.length
                    ? Oe
                    : ((o = o.substr(a, s)), (i.C = a + s), o))) == Oe)
          ) {
            4 == e && ((t.o = 4), ve(14), (u = !1)),
              le(t.j, t.m, null, "[Incomplete Response]");
            break;
          }
          if (r == xe) {
            (t.o = 4), ve(15), le(t.j, t.m, n, "[Invalid Chunk]"), (u = !1);
            break;
          }
          le(t.j, t.m, r, null), Ke(t, r);
        }
        Me(t) && r != Oe && r != xe && ((t.h.g = ""), (t.C = 0)),
          4 != e || 0 != n.length || t.h.h || ((t.o = 1), ve(16), (u = !1)),
          (t.i = t.i && u),
          u
            ? 0 < n.length &&
              !t.aa &&
              ((t.aa = !0),
              (e = t.l).g == t &&
                e.$ &&
                !e.L &&
                (e.h.info(
                  "Great, no buffering proxy detected. Bytes received: " +
                    n.length
                ),
                cr(e),
                (e.L = !0),
                ve(11)))
            : (le(t.j, t.m, n, "[Invalid Chunked Response]"), je(t), Be(t));
      }
      function Ve(t) {
        (t.Y = Date.now() + t.P), Ue(t, t.P);
      }
      function Ue(t, e) {
        if (null != t.B) throw Error("WatchDog timer not null");
        t.B = be(U(t.eb, t), e);
      }
      function qe(t) {
        t.B && (R.clearTimeout(t.B), (t.B = null));
      }
      function Be(t) {
        0 == t.l.G || t.I || fr(t.l, t);
      }
      function je(t) {
        qe(t);
        var e = t.L;
        e && "function" == typeof e.na && e.na(),
          (t.L = null),
          ee(t.W),
          ce(t.V),
          t.g && ((e = t.g), (t.g = null), e.abort(), e.na());
      }
      function Ke(t, e) {
        try {
          var n = t.l;
          if (0 != n.G && (n.g == t || _n(n.i, t)))
            if (((n.I = t.N), !t.J && _n(n.i, t) && 3 == n.G)) {
              try {
                var r = n.Ca.g.parse(e);
              } catch (y) {
                r = null;
              }
              if (Array.isArray(r) && 3 == r.length) {
                var i = r;
                if (0 == i[0]) {
                  t: if (!n.u) {
                    if (n.g) {
                      if (!(n.g.F + 3e3 < t.F)) break t;
                      lr(n), tr(n);
                    }
                    ur(n), ve(18);
                  }
                } else
                  (n.ta = i[1]),
                    0 < n.ta - n.U &&
                      i[2] < 37500 &&
                      n.N &&
                      0 == n.A &&
                      !n.v &&
                      (n.v = be(U(n.ab, n), 6e3));
                if (In(n.i) <= 1 && n.ka) {
                  try {
                    n.ka();
                  } catch (y) {}
                  n.ka = void 0;
                }
              } else pr(n, 11);
            } else if (((!t.J && n.g != t) || lr(n), !W(e)))
              for (i = n.Ca.g.parse(e), e = 0; e < i.length; e++) {
                var o,
                  s,
                  a,
                  u,
                  c,
                  h,
                  l,
                  f,
                  d,
                  p,
                  y = i[e];
                (n.U = y[0]),
                  (y = y[1]),
                  2 == n.G
                    ? "c" == y[0]
                      ? ((n.J = y[1]),
                        (n.la = y[2]),
                        null != (o = y[3]) &&
                          ((n.ma = o), n.h.info("VER=" + n.ma)),
                        null != (s = y[4]) &&
                          ((n.za = s), n.h.info("SVER=" + n.za)),
                        null != (a = y[5]) &&
                          "number" == typeof a &&
                          0 < a &&
                          ((r = 1.5 * a),
                          (n.K = r),
                          n.h.info("backChannelRequestTimeoutMs_=" + r)),
                        (r = n),
                        (u = t.g) &&
                          (!(c = u.g
                            ? u.g.getResponseHeader("X-Client-Wire-Protocol")
                            : null) ||
                            (!(h = r.i).g &&
                              ($(c, "spdy") || $(c, "quic") || $(c, "h2")) &&
                              ((h.j = h.l),
                              (h.g = new Set()),
                              h.h && (Sn(h, h.h), (h.h = null)))),
                          !r.D ||
                            ((l = u.g
                              ? u.g.getResponseHeader("X-HTTP-Session-Id")
                              : null) &&
                              ((r.sa = l), en(r.F, r.D, l)))),
                        (n.G = 3),
                        n.j && n.j.xa(),
                        n.$ &&
                          ((n.O = Date.now() - t.F),
                          n.h.info("Handshake RTT: " + n.O + "ms")),
                        (f = t),
                        ((r = n).oa = gr(r, r.H ? r.la : null, r.W)),
                        f.J
                          ? (An(r.i, f),
                            (d = f),
                            (p = r.K) && d.setTimeout(p),
                            d.B && (qe(d), Ve(d)),
                            (r.g = f))
                          : ar(r),
                        0 < n.l.length && rr(n))
                      : ("stop" != y[0] && "close" != y[0]) || pr(n, 7)
                    : 3 == n.G &&
                      ("stop" == y[0] || "close" == y[0]
                        ? "stop" == y[0]
                          ? pr(n, 7)
                          : Zn(n)
                        : "noop" != y[0] && n.j && n.j.wa(y),
                      (n.A = 0));
              }
          ge();
        } catch (y) {}
      }
      function Ge(t, e) {
        if (t.forEach && "function" == typeof t.forEach) t.forEach(e, void 0);
        else if (O(t) || "string" == typeof t) Q(t, e, void 0);
        else {
          if (t.T && "function" == typeof t.T) var n = t.T();
          else if (t.R && "function" == typeof t.R) n = void 0;
          else if (O(t) || "string" == typeof t)
            for (var n = [], r = t.length, i = 0; i < r; i++) n.push(i);
          else for (i in ((n = []), (r = 0), t)) n[r++] = i;
          for (
            var i = (r = (function (t) {
                if (t.R && "function" == typeof t.R) return t.R();
                if ("string" == typeof t) return t.split("");
                if (O(t)) {
                  for (var e = [], n = t.length, r = 0; r < n; r++)
                    e.push(t[r]);
                  return e;
                }
                for (r in ((e = []), (n = 0), t)) e[n++] = t[r];
                return e;
              })(t)).length,
              o = 0;
            o < i;
            o++
          )
            e.call(void 0, r[o], n && n[o], t);
        }
      }
      function Qe(t, e) {
        (this.h = {}), (this.g = []), (this.i = 0);
        var n = arguments.length;
        if (1 < n) {
          if (n % 2) throw Error("Uneven number of arguments");
          for (var r = 0; r < n; r += 2)
            this.set(arguments[r], arguments[r + 1]);
        } else if (t)
          if (t instanceof Qe)
            for (n = t.T(), r = 0; r < n.length; r++)
              this.set(n[r], t.get(n[r]));
          else for (r in t) this.set(r, t[r]);
      }
      function He(t) {
        if (t.i != t.g.length) {
          for (var e = 0, n = 0; e < t.g.length; ) {
            var r = t.g[e];
            ze(t.h, r) && (t.g[n++] = r), e++;
          }
          t.g.length = n;
        }
        if (t.i != t.g.length) {
          for (var i = {}, n = (e = 0); e < t.g.length; )
            ze(i, (r = t.g[e])) || (i[(t.g[n++] = r)] = 1), e++;
          t.g.length = n;
        }
      }
      function ze(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
      }
      ((N = Ne.prototype).setTimeout = function (t) {
        this.P = t;
      }),
        (N.gb = function (t) {
          t = t.target;
          var e = this.L;
          e && 3 == Wn(t) ? e.l() : this.Ia(t);
        }),
        (N.Ia = function (t) {
          try {
            if (t == this.g)
              t: {
                var e = Wn(this.g),
                  n = this.g.Da();
                this.g.ba();
                if (
                  !(e < 3) &&
                  (3 != e ||
                    ct ||
                    (this.g && (this.h.h || this.g.ga() || Yn(this.g))))
                ) {
                  this.I || 4 != e || 7 == n || ge(), qe(this);
                  var r = this.g.ba();
                  this.N = r;
                  e: if (Me(this)) {
                    var i = Yn(this.g);
                    t = "";
                    var o = i.length,
                      s = 4 == Wn(this.g);
                    if (!this.h.i) {
                      if ("undefined" == typeof TextDecoder) {
                        je(this), Be(this);
                        var a = "";
                        break e;
                      }
                      this.h.i = new R.TextDecoder();
                    }
                    for (n = 0; n < o; n++)
                      (this.h.h = !0),
                        (t += this.h.i.decode(i[n], {
                          stream: s && n == o - 1,
                        }));
                    i.splice(0, o),
                      (this.h.g += t),
                      (this.C = 0),
                      (a = this.h.g);
                  } else a = this.g.ga();
                  if (
                    ((this.i = 200 == r),
                    (l = this.j),
                    (f = this.u),
                    (d = this.A),
                    (p = this.m),
                    (y = this.X),
                    (g = e),
                    (m = r),
                    l.info(function () {
                      return (
                        "XMLHTTP RESP (" +
                        p +
                        ") [ attempt " +
                        y +
                        "]: " +
                        f +
                        "\n" +
                        d +
                        "\n" +
                        g +
                        " " +
                        m
                      );
                    }),
                    this.i)
                  ) {
                    if (this.$ && !this.J) {
                      e: {
                        if (this.g) {
                          var u,
                            c = this.g;
                          if (
                            (u = c.g
                              ? c.g.getResponseHeader("X-HTTP-Initial-Response")
                              : null) &&
                            !W(u)
                          ) {
                            var h = u;
                            break e;
                          }
                        }
                        h = null;
                      }
                      if (!(r = h)) {
                        (this.i = !1), (this.o = 3), ve(12), je(this), Be(this);
                        break t;
                      }
                      le(
                        this.j,
                        this.m,
                        r,
                        "Initial handshake response via X-HTTP-Initial-Response"
                      ),
                        (this.J = !0),
                        Ke(this, r);
                    }
                    this.U
                      ? (Fe(this, e, a),
                        ct &&
                          this.i &&
                          3 == e &&
                          (ue(this.V, this.W, "tick", this.fb), this.W.start()))
                      : (le(this.j, this.m, a, null), Ke(this, a)),
                      4 == e && je(this),
                      this.i &&
                        !this.I &&
                        (4 == e ? fr(this.l, this) : ((this.i = !1), Ve(this)));
                  } else
                    400 == r && 0 < a.indexOf("Unknown SID")
                      ? ((this.o = 3), ve(12))
                      : ((this.o = 0), ve(13)),
                      je(this),
                      Be(this);
                }
              }
          } catch (e) {}
          var l, f, d, p, y, g, m;
        }),
        (N.fb = function () {
          var t, e;
          this.g &&
            ((t = Wn(this.g)),
            (e = this.g.ga()),
            this.C < e.length &&
              (qe(this), Fe(this, t, e), this.i && 4 != t && Ve(this)));
        }),
        (N.cancel = function () {
          (this.I = !0), je(this);
        }),
        (N.eb = function () {
          this.B = null;
          var t,
            e,
            n = Date.now();
          0 <= n - this.Y
            ? ((t = this.j),
              (e = this.A),
              t.info(function () {
                return "TIMEOUT: " + e;
              }),
              2 != this.K && (ge(), ve(17)),
              je(this),
              (this.o = 2),
              Be(this))
            : Ue(this, this.Y - n);
        }),
        ((N = Qe.prototype).R = function () {
          He(this);
          for (var t = [], e = 0; e < this.g.length; e++)
            t.push(this.h[this.g[e]]);
          return t;
        }),
        (N.T = function () {
          return He(this), this.g.concat();
        }),
        (N.get = function (t, e) {
          return ze(this.h, t) ? this.h[t] : e;
        }),
        (N.set = function (t, e) {
          ze(this.h, t) || (this.i++, this.g.push(t)), (this.h[t] = e);
        }),
        (N.forEach = function (t, e) {
          for (var n = this.T(), r = 0; r < n.length; r++) {
            var i = n[r],
              o = this.get(i);
            t.call(e, o, i, this);
          }
        });
      var We =
        /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
      function Ye(t, e) {
        var n;
        (this.i = this.s = this.j = ""),
          (this.m = null),
          (this.o = this.l = ""),
          (this.g = !1),
          t instanceof Ye
            ? ((this.g = void 0 !== e ? e : t.g),
              $e(this, t.j),
              (this.s = t.s),
              Je(this, t.i),
              Ze(this, t.m),
              (this.l = t.l),
              (e = t.h),
              ((n = new fn()).i = e.i),
              e.g && ((n.g = new Qe(e.g)), (n.h = e.h)),
              tn(this, n),
              (this.o = t.o))
            : t && (n = String(t).match(We))
            ? ((this.g = !!e),
              $e(this, n[1] || "", !0),
              (this.s = rn(n[2] || "")),
              Je(this, n[3] || "", !0),
              Ze(this, n[4]),
              (this.l = rn(n[5] || "", !0)),
              tn(this, n[6] || "", !0),
              (this.o = rn(n[7] || "")))
            : ((this.g = !!e), (this.h = new fn(null, this.g)));
      }
      function Xe(t) {
        return new Ye(t);
      }
      function $e(t, e, n) {
        (t.j = n ? rn(e, !0) : e), t.j && (t.j = t.j.replace(/:$/, ""));
      }
      function Je(t, e, n) {
        t.i = n ? rn(e, !0) : e;
      }
      function Ze(t, e) {
        if (e) {
          if (((e = Number(e)), isNaN(e) || e < 0))
            throw Error("Bad port number " + e);
          t.m = e;
        } else t.m = null;
      }
      function tn(t, e, n) {
        var r, i;
        e instanceof fn
          ? ((t.h = e),
            (r = t.h),
            (i = t.g) &&
              !r.j &&
              (dn(r),
              (r.i = null),
              r.g.forEach(function (t, e) {
                var n = e.toLowerCase();
                e != n && (pn(this, e), gn(this, n, t));
              }, r)),
            (r.j = i))
          : (n || (e = on(e, hn)), (t.h = new fn(e, t.g)));
      }
      function en(t, e, n) {
        t.h.set(e, n);
      }
      function nn(t) {
        return (
          en(
            t,
            "zx",
            Math.floor(2147483648 * Math.random()).toString(36) +
              Math.abs(
                Math.floor(2147483648 * Math.random()) ^ Date.now()
              ).toString(36)
          ),
          t
        );
      }
      function rn(t, e) {
        return t
          ? e
            ? decodeURI(t.replace(/%25/g, "%2525"))
            : decodeURIComponent(t)
          : "";
      }
      function on(t, e, n) {
        return "string" == typeof t
          ? ((t = encodeURI(t).replace(e, sn)),
            (t = n ? t.replace(/%25([0-9a-fA-F]{2})/g, "%$1") : t))
          : null;
      }
      function sn(t) {
        return (
          "%" +
          (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
          (15 & t).toString(16)
        );
      }
      Ye.prototype.toString = function () {
        var t = [],
          e = this.j;
        e && t.push(on(e, an, !0), ":");
        var n = this.i;
        return (
          (!n && "file" != e) ||
            (t.push("//"),
            (e = this.s) && t.push(on(e, an, !0), "@"),
            t.push(
              encodeURIComponent(String(n)).replace(
                /%25([0-9a-fA-F]{2})/g,
                "%$1"
              )
            ),
            null != (n = this.m) && t.push(":", String(n))),
          (n = this.l) &&
            (this.i && "/" != n.charAt(0) && t.push("/"),
            t.push(on(n, "/" == n.charAt(0) ? cn : un, !0))),
          (n = this.h.toString()) && t.push("?", n),
          (n = this.o) && t.push("#", on(n, ln)),
          t.join("")
        );
      };
      var an = /[#\/\?@]/g,
        un = /[#\?:]/g,
        cn = /[#\?]/g,
        hn = /[#\?@]/g,
        ln = /#/g;
      function fn(t, e) {
        (this.h = this.g = null), (this.i = t || null), (this.j = !!e);
      }
      function dn(n) {
        n.g ||
          ((n.g = new Qe()),
          (n.h = 0),
          n.i &&
            (function (t, e) {
              if (t) {
                t = t.split("&");
                for (var n = 0; n < t.length; n++) {
                  var r,
                    i = t[n].indexOf("="),
                    o = null;
                  0 <= i
                    ? ((r = t[n].substring(0, i)), (o = t[n].substring(i + 1)))
                    : (r = t[n]),
                    e(r, o ? decodeURIComponent(o.replace(/\+/g, " ")) : "");
                }
              }
            })(n.i, function (t, e) {
              n.add(decodeURIComponent(t.replace(/\+/g, " ")), e);
            }));
      }
      function pn(t, e) {
        dn(t),
          (e = mn(t, e)),
          ze(t.g.h, e) &&
            ((t.i = null),
            (t.h -= t.g.get(e).length),
            ze((t = t.g).h, e) &&
              (delete t.h[e], t.i--, t.g.length > 2 * t.i && He(t)));
      }
      function yn(t, e) {
        return dn(t), (e = mn(t, e)), ze(t.g.h, e);
      }
      function gn(t, e, n) {
        pn(t, e),
          0 < n.length &&
            ((t.i = null), t.g.set(mn(t, e), z(n)), (t.h += n.length));
      }
      function mn(t, e) {
        return (e = String(e)), (e = t.j ? e.toLowerCase() : e);
      }
      ((N = fn.prototype).add = function (t, e) {
        dn(this), (this.i = null), (t = mn(this, t));
        var n = this.g.get(t);
        return n || this.g.set(t, (n = [])), n.push(e), (this.h += 1), this;
      }),
        (N.forEach = function (n, r) {
          dn(this),
            this.g.forEach(function (t, e) {
              Q(
                t,
                function (t) {
                  n.call(r, t, e, this);
                },
                this
              );
            }, this);
        }),
        (N.T = function () {
          dn(this);
          for (
            var t = this.g.R(), e = this.g.T(), n = [], r = 0;
            r < e.length;
            r++
          )
            for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
          return n;
        }),
        (N.R = function (t) {
          dn(this);
          var e = [];
          if ("string" == typeof t)
            yn(this, t) && (e = H(e, this.g.get(mn(this, t))));
          else {
            t = this.g.R();
            for (var n = 0; n < t.length; n++) e = H(e, t[n]);
          }
          return e;
        }),
        (N.set = function (t, e) {
          return (
            dn(this),
            (this.i = null),
            yn(this, (t = mn(this, t))) && (this.h -= this.g.get(t).length),
            this.g.set(t, [e]),
            (this.h += 1),
            this
          );
        }),
        (N.get = function (t, e) {
          return t && 0 < (t = this.R(t)).length ? String(t[0]) : e;
        }),
        (N.toString = function () {
          if (this.i) return this.i;
          if (!this.g) return "";
          for (var t = [], e = this.g.T(), n = 0; n < e.length; n++)
            for (
              var r = e[n],
                i = encodeURIComponent(String(r)),
                r = this.R(r),
                o = 0;
              o < r.length;
              o++
            ) {
              var s = i;
              "" !== r[o] && (s += "=" + encodeURIComponent(String(r[o]))),
                t.push(s);
            }
          return (this.i = t.join("&"));
        });
      var vn = function (t, e) {
        (this.h = t), (this.g = e);
      };
      function wn(t) {
        (this.l = t || En),
          (t = R.PerformanceNavigationTiming
            ? 0 < (t = R.performance.getEntriesByType("navigation")).length &&
              ("hq" == t[0].nextHopProtocol || "h2" == t[0].nextHopProtocol)
            : !!(R.g && R.g.Ea && R.g.Ea() && R.g.Ea().Zb)),
          (this.j = t ? this.l : 1),
          (this.g = null),
          1 < this.j && (this.g = new Set()),
          (this.h = null),
          (this.i = []);
      }
      var bn,
        En = 10;
      function Tn(t) {
        return t.h || (t.g && t.g.size >= t.j);
      }
      function In(t) {
        return t.h ? 1 : t.g ? t.g.size : 0;
      }
      function _n(t, e) {
        return t.h ? t.h == e : t.g && t.g.has(e);
      }
      function Sn(t, e) {
        t.g ? t.g.add(e) : (t.h = e);
      }
      function An(t, e) {
        t.h && t.h == e ? (t.h = null) : t.g && t.g.has(e) && t.g.delete(e);
      }
      function Dn(t) {
        var e, n;
        if (null != t.h) return t.i.concat(t.h.D);
        if (null == t.g || 0 === t.g.size) return z(t.i);
        var r = t.i;
        try {
          for (var i = D(t.g.values()), o = i.next(); !o.done; o = i.next())
            var s = o.value, r = r.concat(s.D);
        } catch (t) {
          e = { error: t };
        } finally {
          try {
            o && !o.done && (n = i.return) && n.call(i);
          } finally {
            if (e) throw e.error;
          }
        }
        return r;
      }
      function Nn() {}
      function Cn() {
        this.g = new Nn();
      }
      function kn(t, e, n, r, i) {
        try {
          (e.onload = null),
            (e.onerror = null),
            (e.onabort = null),
            (e.ontimeout = null),
            i(r);
        } catch (t) {}
      }
      function Rn(t) {
        (this.l = t.$b || null), (this.j = t.ib || !1);
      }
      function xn(t, e) {
        Ut.call(this),
          (this.D = t),
          (this.u = e),
          (this.m = void 0),
          (this.readyState = On),
          (this.status = 0),
          (this.responseType =
            this.responseText =
            this.response =
            this.statusText =
              ""),
          (this.onreadystatechange = null),
          (this.v = new Headers()),
          (this.h = null),
          (this.C = "GET"),
          (this.B = ""),
          (this.g = !1),
          (this.A = this.j = this.l = null);
      }
      (wn.prototype.cancel = function () {
        var e, t;
        if (((this.i = Dn(this)), this.h)) this.h.cancel(), (this.h = null);
        else if (this.g && 0 !== this.g.size) {
          try {
            for (
              var n = D(this.g.values()), r = n.next();
              !r.done;
              r = n.next()
            )
              r.value.cancel();
          } catch (t) {
            e = { error: t };
          } finally {
            try {
              r && !r.done && (t = n.return) && t.call(n);
            } finally {
              if (e) throw e.error;
            }
          }
          this.g.clear();
        }
      }),
        (Nn.prototype.stringify = function (t) {
          return R.JSON.stringify(t, void 0);
        }),
        (Nn.prototype.parse = function (t) {
          return R.JSON.parse(t, void 0);
        }),
        B(Rn, Te),
        (Rn.prototype.g = function () {
          return new xn(this.l, this.j);
        }),
        (Rn.prototype.i =
          ((bn = {}),
          function () {
            return bn;
          })),
        B(xn, Ut);
      var On = 0;
      function Ln(t) {
        t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t));
      }
      function Pn(t) {
        (t.readyState = 4), (t.l = null), (t.j = null), (t.A = null), Mn(t);
      }
      function Mn(t) {
        t.onreadystatechange && t.onreadystatechange.call(t);
      }
      ((N = xn.prototype).open = function (t, e) {
        if (this.readyState != On)
          throw (this.abort(), Error("Error reopening a connection"));
        (this.C = t), (this.B = e), (this.readyState = 1), Mn(this);
      }),
        (N.send = function (t) {
          if (1 != this.readyState)
            throw (this.abort(), Error("need to call open() first. "));
          this.g = !0;
          var e = {
            headers: this.v,
            method: this.C,
            credentials: this.m,
            cache: void 0,
          };
          t && (e.body = t),
            (this.D || R)
              .fetch(new Request(this.B, e))
              .then(this.Va.bind(this), this.ha.bind(this));
        }),
        (N.abort = function () {
          (this.response = this.responseText = ""),
            (this.v = new Headers()),
            (this.status = 0),
            this.j && this.j.cancel("Request was aborted."),
            1 <= this.readyState &&
              this.g &&
              4 != this.readyState &&
              ((this.g = !1), Pn(this)),
            (this.readyState = On);
        }),
        (N.Va = function (t) {
          if (
            this.g &&
            ((this.l = t),
            this.h ||
              ((this.status = this.l.status),
              (this.statusText = this.l.statusText),
              (this.h = t.headers),
              (this.readyState = 2),
              Mn(this)),
            this.g && ((this.readyState = 3), Mn(this), this.g))
          )
            if ("arraybuffer" === this.responseType)
              t.arrayBuffer().then(this.Ta.bind(this), this.ha.bind(this));
            else if (void 0 !== R.ReadableStream && "body" in t) {
              if (((this.j = t.body.getReader()), this.u)) {
                if (this.responseType)
                  throw Error(
                    'responseType must be empty for "streamBinaryChunks" mode responses.'
                  );
                this.response = [];
              } else
                (this.response = this.responseText = ""),
                  (this.A = new TextDecoder());
              Ln(this);
            } else t.text().then(this.Ua.bind(this), this.ha.bind(this));
        }),
        (N.Sa = function (t) {
          var e;
          this.g &&
            (this.u && t.value
              ? this.response.push(t.value)
              : this.u ||
                ((e = t.value || new Uint8Array(0)),
                (e = this.A.decode(e, { stream: !t.done })) &&
                  (this.response = this.responseText += e)),
            (t.done ? Pn : Mn)(this),
            3 == this.readyState && Ln(this));
        }),
        (N.Ua = function (t) {
          this.g && ((this.response = this.responseText = t), Pn(this));
        }),
        (N.Ta = function (t) {
          this.g && ((this.response = t), Pn(this));
        }),
        (N.ha = function () {
          this.g && Pn(this);
        }),
        (N.setRequestHeader = function (t, e) {
          this.v.append(t, e);
        }),
        (N.getResponseHeader = function (t) {
          return (this.h && this.h.get(t.toLowerCase())) || "";
        }),
        (N.getAllResponseHeaders = function () {
          if (!this.h) return "";
          for (var t = [], e = this.h.entries(), n = e.next(); !n.done; )
            (n = n.value), t.push(n[0] + ": " + n[1]), (n = e.next());
          return t.join("\r\n");
        }),
        Object.defineProperty(xn.prototype, "withCredentials", {
          get: function () {
            return "include" === this.m;
          },
          set: function (t) {
            this.m = t ? "include" : "same-origin";
          },
        });
      var Fn = R.JSON.parse;
      function Vn(t) {
        Ut.call(this),
          (this.headers = new Qe()),
          (this.u = t || null),
          (this.h = !1),
          (this.C = this.g = null),
          (this.H = ""),
          (this.m = 0),
          (this.j = ""),
          (this.l = this.F = this.v = this.D = !1),
          (this.B = 0),
          (this.A = null),
          (this.J = Un),
          (this.K = this.L = !1);
      }
      B(Vn, Ut);
      var Un = "",
        qn = /^https?$/i,
        Bn = ["POST", "PUT"];
      function jn(t) {
        return "content-type" == t.toLowerCase();
      }
      function Kn(t, e) {
        (t.h = !1),
          t.g && ((t.l = !0), t.g.abort(), (t.l = !1)),
          (t.j = e),
          (t.m = 5),
          Gn(t),
          Hn(t);
      }
      function Gn(t) {
        t.D || ((t.D = !0), qt(t, "complete"), qt(t, "error"));
      }
      function Qn(t) {
        if (t.h && void 0 !== k && (!t.C[1] || 4 != Wn(t) || 2 != t.ba()))
          if (t.v && 4 == Wn(t)) ne(t.Fa, 0, t);
          else if ((qt(t, "readystatechange"), 4 == Wn(t))) {
            t.h = !1;
            try {
              var e,
                n,
                r,
                i,
                o = t.ba();
              t: switch (o) {
                case 200:
                case 201:
                case 202:
                case 204:
                case 206:
                case 304:
                case 1223:
                  var s = !0;
                  break t;
                default:
                  s = !1;
              }
              if (
                ((e = s) ||
                  ((n = 0 === o) &&
                    (!(i = String(t.H).match(We)[1] || null) &&
                      R.self &&
                      R.self.location &&
                      (i = (r = R.self.location.protocol).substr(
                        0,
                        r.length - 1
                      )),
                    (n = !qn.test(i ? i.toLowerCase() : ""))),
                  (e = n)),
                e)
              )
                qt(t, "complete"), qt(t, "success");
              else {
                t.m = 6;
                try {
                  var a = 2 < Wn(t) ? t.g.statusText : "";
                } catch (t) {
                  a = "";
                }
                (t.j = a + " [" + t.ba() + "]"), Gn(t);
              }
            } finally {
              Hn(t);
            }
          }
      }
      function Hn(t, e) {
        if (t.g) {
          zn(t);
          var n = t.g,
            r = t.C[0] ? x : null;
          (t.g = null), (t.C = null), e || qt(t, "ready");
          try {
            n.onreadystatechange = r;
          } catch (t) {}
        }
      }
      function zn(t) {
        t.g && t.K && (t.g.ontimeout = null),
          t.A && (R.clearTimeout(t.A), (t.A = null));
      }
      function Wn(t) {
        return t.g ? t.g.readyState : 0;
      }
      function Yn(t) {
        try {
          if (!t.g) return null;
          if ("response" in t.g) return t.g.response;
          switch (t.J) {
            case Un:
            case "text":
              return t.g.responseText;
            case "arraybuffer":
              if ("mozResponseArrayBuffer" in t.g)
                return t.g.mozResponseArrayBuffer;
          }
          return null;
        } catch (t) {
          return null;
        }
      }
      function Xn(t, e, n) {
        t: {
          for (r in n) {
            var r = !1;
            break t;
          }
          r = !0;
        }
        var i;
        r ||
          ((i = ""),
          tt(n, function (t, e) {
            (i += e), (i += ":"), (i += t), (i += "\r\n");
          }),
          (n = i),
          "string" == typeof t
            ? null != n && encodeURIComponent(String(n))
            : en(t, e, n));
      }
      function $n(t, e, n) {
        return (
          (n && n.internalChannelParams && n.internalChannelParams[t]) || e
        );
      }
      function Jn(t) {
        (this.za = 0),
          (this.l = []),
          (this.h = new he()),
          (this.la =
            this.oa =
            this.F =
            this.W =
            this.g =
            this.sa =
            this.D =
            this.aa =
            this.o =
            this.P =
            this.s =
              null),
          (this.Za = this.V = 0),
          (this.Xa = $n("failFast", !1, t)),
          (this.N = this.v = this.u = this.m = this.j = null),
          (this.X = !0),
          (this.I = this.ta = this.U = -1),
          (this.Y = this.A = this.C = 0),
          (this.Pa = $n("baseRetryDelayMs", 5e3, t)),
          (this.$a = $n("retryDelaySeedMs", 1e4, t)),
          (this.Ya = $n("forwardChannelMaxRetries", 2, t)),
          (this.ra = $n("forwardChannelRequestTimeoutMs", 2e4, t)),
          (this.qa = (t && t.xmlHttpFactory) || void 0),
          (this.Ba = (t && t.Yb) || !1),
          (this.K = void 0),
          (this.H = (t && t.supportsCrossDomainXhr) || !1),
          (this.J = ""),
          (this.i = new wn(t && t.concurrentRequestLimit)),
          (this.Ca = new Cn()),
          (this.ja = (t && t.fastHandshake) || !1),
          (this.Ra = (t && t.Wb) || !1),
          t && t.Aa && this.h.Aa(),
          t && t.forceLongPolling && (this.X = !1),
          (this.$ = (!this.ja && this.X && t && t.detectBufferingProxy) || !1),
          (this.ka = void 0),
          (this.O = 0),
          (this.L = !1),
          (this.B = null),
          (this.Wa = !t || !1 !== t.Xb);
      }
      function Zn(t) {
        var e, n;
        er(t),
          3 == t.G &&
            ((e = t.V++),
            en((n = Xe(t.F)), "SID", t.J),
            en(n, "RID", e),
            en(n, "TYPE", "terminate"),
            or(t, n),
            ((e = new Ne(t, t.h, e, void 0)).K = 2),
            (e.v = nn(Xe(n))),
            (n = !1),
            !(n =
              R.navigator && R.navigator.sendBeacon
                ? R.navigator.sendBeacon(e.v.toString(), "")
                : n) &&
              R.Image &&
              ((new Image().src = e.v), (n = !0)),
            n || ((e.g = mr(e.l, null)), e.g.ea(e.v)),
            (e.F = Date.now()),
            Ve(e)),
          yr(t);
      }
      function tr(t) {
        t.g && (cr(t), t.g.cancel(), (t.g = null));
      }
      function er(t) {
        tr(t),
          t.u && (R.clearTimeout(t.u), (t.u = null)),
          lr(t),
          t.i.cancel(),
          t.m && ("number" == typeof t.m && R.clearTimeout(t.m), (t.m = null));
      }
      function nr(t, e) {
        t.l.push(new vn(t.Za++, e)), 3 == t.G && rr(t);
      }
      function rr(t) {
        Tn(t.i) || t.m || ((t.m = !0), Xt(t.Ha, t), (t.C = 0));
      }
      function ir(t, e) {
        var n = e ? e.m : t.V++,
          r = Xe(t.F);
        en(r, "SID", t.J),
          en(r, "RID", n),
          en(r, "AID", t.U),
          or(t, r),
          t.o && t.s && Xn(r, t.o, t.s),
          (n = new Ne(t, t.h, n, t.C + 1)),
          null === t.o && (n.H = t.s),
          e && (t.l = e.D.concat(t.l)),
          (e = sr(t, n, 1e3)),
          n.setTimeout(
            Math.round(0.5 * t.ra) + Math.round(0.5 * t.ra * Math.random())
          ),
          Sn(t.i, n),
          Le(n, r, e);
      }
      function or(t, n) {
        t.j &&
          Ge({}, function (t, e) {
            en(n, e, t);
          });
      }
      function sr(t, e, n) {
        n = Math.min(t.l.length, n);
        var r = t.j ? U(t.j.Oa, t.j, t) : null;
        t: for (var i = t.l, o = -1; ; ) {
          var s = ["count=" + n];
          -1 == o
            ? 0 < n
              ? ((o = i[0].h), s.push("ofs=" + o))
              : (o = 0)
            : s.push("ofs=" + o);
          for (var a = !0, u = 0; u < n; u++) {
            var c = i[u].h,
              h = i[u].g;
            if ((c -= o) < 0) (o = Math.max(0, i[u].h - 100)), (a = !1);
            else
              try {
                !(function (t, r, e) {
                  var i = e || "";
                  try {
                    Ge(t, function (t, e) {
                      var n = t;
                      L(t) && (n = jt(t)),
                        r.push(i + e + "=" + encodeURIComponent(n));
                    });
                  } catch (t) {
                    throw (
                      (r.push(i + "type=" + encodeURIComponent("_badmap")), t)
                    );
                  }
                })(h, s, "req" + c + "_");
              } catch (t) {
                r && r(h);
              }
          }
          if (a) {
            r = s.join("&");
            break t;
          }
        }
        return (t = t.l.splice(0, n)), (e.D = t), r;
      }
      function ar(t) {
        t.g || t.u || ((t.Y = 1), Xt(t.Ga, t), (t.A = 0));
      }
      function ur(t) {
        return (
          !(t.g || t.u || 3 <= t.A) &&
          (t.Y++, (t.u = be(U(t.Ga, t), dr(t, t.A))), t.A++, 1)
        );
      }
      function cr(t) {
        null != t.B && (R.clearTimeout(t.B), (t.B = null));
      }
      function hr(t) {
        (t.g = new Ne(t, t.h, "rpc", t.Y)),
          null === t.o && (t.g.H = t.s),
          (t.g.O = 0);
        var e = Xe(t.oa);
        en(e, "RID", "rpc"),
          en(e, "SID", t.J),
          en(e, "CI", t.N ? "0" : "1"),
          en(e, "AID", t.U),
          or(t, e),
          en(e, "TYPE", "xmlhttp"),
          t.o && t.s && Xn(e, t.o, t.s),
          t.K && t.g.setTimeout(t.K);
        var n = t.g;
        (t = t.la),
          (n.K = 1),
          (n.v = nn(Xe(e))),
          (n.s = null),
          (n.U = !0),
          Pe(n, t);
      }
      function lr(t) {
        null != t.v && (R.clearTimeout(t.v), (t.v = null));
      }
      function fr(t, e) {
        var n,
          r,
          i,
          o = null;
        if (t.g == e) {
          lr(t), cr(t), (t.g = null);
          var s = 2;
        } else {
          if (!_n(t.i, e)) return;
          (o = e.D), An(t.i, e), (s = 1);
        }
        if (((t.I = e.N), 0 != t.G))
          if (e.i)
            1 == s
              ? ((o = e.s ? e.s.length : 0),
                (e = Date.now() - e.F),
                (n = t.C),
                qt((s = pe()), new we(s, o)),
                rr(t))
              : ar(t);
          else if (
            3 == (n = e.o) ||
            (0 == n && 0 < t.I) ||
            ((1 != s ||
              ((i = e),
              In((r = t).i) >= r.i.j - (r.m ? 1 : 0) ||
                (r.m
                  ? ((r.l = i.D.concat(r.l)), 0)
                  : 1 == r.G ||
                    2 == r.G ||
                    r.C >= (r.Xa ? 0 : r.Ya) ||
                    ((r.m = be(U(r.Ha, r, i), dr(r, r.C))), r.C++, 0)))) &&
              (2 != s || !ur(t)))
          )
            switch (
              (o && 0 < o.length && ((e = t.i), (e.i = e.i.concat(o))), n)
            ) {
              case 1:
                pr(t, 5);
                break;
              case 4:
                pr(t, 10);
                break;
              case 3:
                pr(t, 6);
                break;
              default:
                pr(t, 2);
            }
      }
      function dr(t, e) {
        var n = t.Pa + Math.floor(Math.random() * t.$a);
        return t.j || (n *= 2), n * e;
      }
      function pr(t, e) {
        var n, r, i, o;
        t.h.info("Error code " + e),
          2 == e
            ? ((r = null),
              t.j && (r = null),
              (o = U(t.jb, t)),
              r ||
                ((r = new Ye("//www.google.com/images/cleardot.gif")),
                (R.location && "http" == R.location.protocol) || $e(r, "https"),
                nn(r)),
              (n = r.toString()),
              (r = o),
              (o = new he()),
              R.Image
                ? (((i = new Image()).onload = q(
                    kn,
                    o,
                    i,
                    "TestLoadImage: loaded",
                    !0,
                    r
                  )),
                  (i.onerror = q(kn, o, i, "TestLoadImage: error", !1, r)),
                  (i.onabort = q(kn, o, i, "TestLoadImage: abort", !1, r)),
                  (i.ontimeout = q(kn, o, i, "TestLoadImage: timeout", !1, r)),
                  R.setTimeout(function () {
                    i.ontimeout && i.ontimeout();
                  }, 1e4),
                  (i.src = n))
                : r(!1))
            : ve(2),
          (t.G = 0),
          t.j && t.j.va(e),
          yr(t),
          er(t);
      }
      function yr(t) {
        (t.G = 0),
          (t.I = -1),
          t.j &&
            ((0 == Dn(t.i).length && 0 == t.l.length) ||
              ((t.i.i.length = 0), z(t.l), (t.l.length = 0)),
            t.j.ua());
      }
      function gr(t, e, n) {
        var r,
          i,
          o,
          s,
          a,
          u = (s = n) instanceof Ye ? Xe(s) : new Ye(s, void 0);
        return (
          "" != u.i
            ? (e && Je(u, e + "." + u.i), Ze(u, u.m))
            : ((a = R.location),
              (r = a.protocol),
              (i = e ? e + "." + a.hostname : a.hostname),
              (o = +a.port),
              (s = n),
              (a = new Ye(null, void 0)),
              r && $e(a, r),
              i && Je(a, i),
              o && Ze(a, o),
              s && (a.l = s),
              (u = a)),
          t.aa &&
            tt(t.aa, function (t, e) {
              en(u, e, t);
            }),
          (e = t.D),
          (n = t.sa),
          e && n && en(u, e, n),
          en(u, "VER", t.ma),
          or(t, u),
          u
        );
      }
      function mr(t, e, n) {
        if (e && !t.H)
          throw Error("Can't create secondary domain capable XhrIo object.");
        return (
          ((e =
            n && t.Ba && !t.qa ? new Vn(new Rn({ ib: !0 })) : new Vn(t.qa)).L =
            t.H),
          e
        );
      }
      function vr() {}
      function wr() {
        if (at && !(10 <= Number(mt)))
          throw Error("Environmental error: no available transport.");
      }
      function br(t, e) {
        Ut.call(this),
          (this.g = new Jn(e)),
          (this.l = t),
          (this.h = (e && e.messageUrlParams) || null),
          (t = (e && e.messageHeaders) || null),
          e &&
            e.clientProtocolHeaderRequired &&
            (t
              ? (t["X-Client-Protocol"] = "webchannel")
              : (t = { "X-Client-Protocol": "webchannel" })),
          (this.g.s = t),
          (t = (e && e.initMessageHeaders) || null),
          e &&
            e.messageContentType &&
            (t
              ? (t["X-WebChannel-Content-Type"] = e.messageContentType)
              : (t = { "X-WebChannel-Content-Type": e.messageContentType })),
          e &&
            e.ya &&
            (t
              ? (t["X-WebChannel-Client-Profile"] = e.ya)
              : (t = { "X-WebChannel-Client-Profile": e.ya })),
          (this.g.P = t),
          (t = e && e.httpHeadersOverwriteParam) && !W(t) && (this.g.o = t),
          (this.A = (e && e.supportsCrossDomainXhr) || !1),
          (this.v = (e && e.sendRawJson) || !1),
          (e = e && e.httpSessionIdParam) &&
            !W(e) &&
            ((this.g.D = e),
            null !== (t = this.h) &&
              e in t &&
              e in (t = this.h) &&
              delete t[e]),
          (this.j = new Ir(this));
      }
      function Er(t) {
        Se.call(this);
        var e = t.__sm__;
        if (e) {
          t: {
            for (var n in e) {
              t = n;
              break t;
            }
            t = void 0;
          }
          (this.i = t) &&
            ((t = this.i), (e = null !== e && t in e ? e[t] : void 0)),
            (this.data = e);
        } else this.data = t;
      }
      function Tr() {
        Ae.call(this), (this.status = 1);
      }
      function Ir(t) {
        this.g = t;
      }
      ((N = Vn.prototype).ea = function (t, e, n, r) {
        if (this.g)
          throw Error(
            "[goog.net.XhrIo] Object is active with another request=" +
              this.H +
              "; newUri=" +
              t
          );
        (e = e ? e.toUpperCase() : "GET"),
          (this.H = t),
          (this.j = ""),
          (this.m = 0),
          (this.D = !1),
          (this.h = !0),
          (this.g = (this.u || ke).g()),
          (this.C = this.u ? Ie(this.u) : Ie(ke)),
          (this.g.onreadystatechange = U(this.Fa, this));
        try {
          (this.F = !0), this.g.open(e, String(t), !0), (this.F = !1);
        } catch (t) {
          return void Kn(this, t);
        }
        t = n || "";
        var i,
          o = new Qe(this.headers);
        r &&
          Ge(r, function (t, e) {
            o.set(e, t);
          }),
          (r = (function (t) {
            t: {
              for (
                var e = jn,
                  n = t.length,
                  r = "string" == typeof t ? t.split("") : t,
                  i = 0;
                i < n;
                i++
              )
                if (i in r && e.call(void 0, r[i], i, t)) {
                  e = i;
                  break t;
                }
              e = -1;
            }
            return e < 0 ? null : "string" == typeof t ? t.charAt(e) : t[e];
          })(o.T())),
          (n = R.FormData && t instanceof R.FormData),
          0 <= G(Bn, e) &&
            !r &&
            !n &&
            o.set(
              "Content-Type",
              "application/x-www-form-urlencoded;charset=utf-8"
            ),
          o.forEach(function (t, e) {
            this.g.setRequestHeader(e, t);
          }, this),
          this.J && (this.g.responseType = this.J),
          "withCredentials" in this.g &&
            this.g.withCredentials !== this.L &&
            (this.g.withCredentials = this.L);
        try {
          zn(this),
            0 < this.B &&
              ((this.K =
                ((i = this.g),
                at &&
                  gt() &&
                  "number" == typeof i.timeout &&
                  void 0 !== i.ontimeout))
                ? ((this.g.timeout = this.B),
                  (this.g.ontimeout = U(this.pa, this)))
                : (this.A = ne(this.pa, this.B, this))),
            (this.v = !0),
            this.g.send(t),
            (this.v = !1);
        } catch (t) {
          Kn(this, t);
        }
      }),
        (N.pa = function () {
          void 0 !== k &&
            this.g &&
            ((this.j = "Timed out after " + this.B + "ms, aborting"),
            (this.m = 8),
            qt(this, "timeout"),
            this.abort(8));
        }),
        (N.abort = function (t) {
          this.g &&
            this.h &&
            ((this.h = !1),
            (this.l = !0),
            this.g.abort(),
            (this.l = !1),
            (this.m = t || 7),
            qt(this, "complete"),
            qt(this, "abort"),
            Hn(this));
        }),
        (N.M = function () {
          this.g &&
            (this.h &&
              ((this.h = !1), (this.l = !0), this.g.abort(), (this.l = !1)),
            Hn(this, !0)),
            Vn.Z.M.call(this);
        }),
        (N.Fa = function () {
          this.s || (this.F || this.v || this.l ? Qn(this) : this.cb());
        }),
        (N.cb = function () {
          Qn(this);
        }),
        (N.ba = function () {
          try {
            return 2 < Wn(this) ? this.g.status : -1;
          } catch (t) {
            return -1;
          }
        }),
        (N.ga = function () {
          try {
            return this.g ? this.g.responseText : "";
          } catch (t) {
            return "";
          }
        }),
        (N.Qa = function (t) {
          if (this.g) {
            var e = this.g.responseText;
            return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), Fn(e);
          }
        }),
        (N.Da = function () {
          return this.m;
        }),
        (N.La = function () {
          return "string" == typeof this.j ? this.j : String(this.j);
        }),
        ((N = Jn.prototype).ma = 8),
        (N.G = 1),
        (N.hb = function (t) {
          try {
            this.h.info("Origin Trials invoked: " + t);
          } catch (t) {}
        }),
        (N.Ha = function (t) {
          if (this.m)
            if (((this.m = null), 1 == this.G)) {
              if (!t) {
                (this.V = Math.floor(1e5 * Math.random())), (t = this.V++);
                var e = new Ne(this, this.h, t, void 0),
                  n = this.s;
                if (
                  (this.P && (n ? rt((n = et(n)), this.P) : (n = this.P)),
                  null === this.o && (e.H = n),
                  this.ja)
                )
                  t: {
                    for (var r = 0, i = 0; i < this.l.length; i++) {
                      var o = this.l[i];
                      if (
                        ("__data__" in o.g &&
                        "string" == typeof (o = o.g.__data__)
                          ? (o = o.length)
                          : (o = void 0),
                        void 0 === o)
                      )
                        break;
                      if (4096 < (r += o)) {
                        r = i;
                        break t;
                      }
                      if (4096 === r || i === this.l.length - 1) {
                        r = i + 1;
                        break t;
                      }
                    }
                    r = 1e3;
                  }
                else r = 1e3;
                (r = sr(this, e, r)),
                  en((i = Xe(this.F)), "RID", t),
                  en(i, "CVER", 22),
                  this.D && en(i, "X-HTTP-Session-Id", this.D),
                  or(this, i),
                  this.o && n && Xn(i, this.o, n),
                  Sn(this.i, e),
                  this.Ra && en(i, "TYPE", "init"),
                  this.ja
                    ? (en(i, "$req", r),
                      en(i, "SID", "null"),
                      (e.$ = !0),
                      Le(e, i, null))
                    : Le(e, i, r),
                  (this.G = 2);
              }
            } else
              3 == this.G &&
                (t
                  ? ir(this, t)
                  : 0 == this.l.length || Tn(this.i) || ir(this));
        }),
        (N.Ga = function () {
          var t;
          (this.u = null),
            hr(this),
            this.$ &&
              !(this.L || null == this.g || this.O <= 0) &&
              ((t = 2 * this.O),
              this.h.info("BP detection timer enabled: " + t),
              (this.B = be(U(this.bb, this), t)));
        }),
        (N.bb = function () {
          this.B &&
            ((this.B = null),
            this.h.info("BP detection timeout reached."),
            this.h.info("Buffering proxy detected and switch to long-polling!"),
            (this.N = !1),
            (this.L = !0),
            ve(10),
            tr(this),
            hr(this));
        }),
        (N.ab = function () {
          null != this.v && ((this.v = null), tr(this), ur(this), ve(19));
        }),
        (N.jb = function (t) {
          t
            ? (this.h.info("Successfully pinged google.com"), ve(2))
            : (this.h.info("Failed to ping google.com"), ve(1));
        }),
        ((N = vr.prototype).xa = function () {}),
        (N.wa = function () {}),
        (N.va = function () {}),
        (N.ua = function () {}),
        (N.Oa = function () {}),
        (wr.prototype.g = function (t, e) {
          return new br(t, e);
        }),
        B(br, Ut),
        (br.prototype.m = function () {
          (this.g.j = this.j), this.A && (this.g.H = !0);
          var t = this.g,
            e = this.l,
            n = this.h || void 0;
          t.Wa && (t.h.info("Origin Trials enabled."), Xt(U(t.hb, t, e))),
            ve(0),
            (t.W = e),
            (t.aa = n || {}),
            (t.N = t.X),
            (t.F = gr(t, null, t.W)),
            rr(t);
        }),
        (br.prototype.close = function () {
          Zn(this.g);
        }),
        (br.prototype.u = function (t) {
          var e;
          "string" == typeof t
            ? (((e = {}).__data__ = t), nr(this.g, e))
            : this.v
            ? (((e = {}).__data__ = jt(t)), nr(this.g, e))
            : nr(this.g, t);
        }),
        (br.prototype.M = function () {
          (this.g.j = null),
            delete this.j,
            Zn(this.g),
            delete this.g,
            br.Z.M.call(this);
        }),
        B(Er, Se),
        B(Tr, Ae),
        B(Ir, vr),
        (Ir.prototype.xa = function () {
          qt(this.g, "a");
        }),
        (Ir.prototype.wa = function (t) {
          qt(this.g, new Er(t));
        }),
        (Ir.prototype.va = function (t) {
          qt(this.g, new Tr());
        }),
        (Ir.prototype.ua = function () {
          qt(this.g, "b");
        }),
        (wr.prototype.createWebChannel = wr.prototype.g),
        (br.prototype.send = br.prototype.u),
        (br.prototype.open = br.prototype.m),
        (Ee.NO_ERROR = 0),
        (Ee.TIMEOUT = 8),
        (Ee.HTTP_ERROR = 6),
        (C.COMPLETE = "complete"),
        ((_e.EventType = Kt).OPEN = "a"),
        (Kt.CLOSE = "b"),
        (Kt.ERROR = "c"),
        (Kt.MESSAGE = "d"),
        (Ut.prototype.listen = Ut.prototype.N),
        (Vn.prototype.listenOnce = Vn.prototype.O),
        (Vn.prototype.getLastError = Vn.prototype.La),
        (Vn.prototype.getLastErrorCode = Vn.prototype.Da),
        (Vn.prototype.getStatus = Vn.prototype.ba),
        (Vn.prototype.getResponseJson = Vn.prototype.Qa),
        (Vn.prototype.getResponseText = Vn.prototype.ga),
        (Vn.prototype.send = Vn.prototype.ea);
      var _r = pe,
        Sr = Ee,
        Ar = C,
        Dr = fe,
        Nr = 10,
        Cr = 11,
        kr = Rn,
        Rr = _e,
        xr = Vn,
        Or =
          ((Lr.prototype.t = function (t) {
            return (
              (this.previousValue = Math.max(t, this.previousValue)),
              this.previousValue
            );
          }),
          (Lr.prototype.next = function () {
            var t = ++this.previousValue;
            return this.i && this.i(t), t;
          }),
          Lr);
      function Lr(t, e) {
        var n = this;
        (this.previousValue = t),
          e &&
            ((e.sequenceNumberHandler = function (t) {
              return n.t(t);
            }),
            (this.i = function (t) {
              return e.writeSequenceNumber(t);
            }));
      }
      Or.o = -1;
      var Pr,
        Mr = {
          OK: "ok",
          CANCELLED: "cancelled",
          UNKNOWN: "unknown",
          INVALID_ARGUMENT: "invalid-argument",
          DEADLINE_EXCEEDED: "deadline-exceeded",
          NOT_FOUND: "not-found",
          ALREADY_EXISTS: "already-exists",
          PERMISSION_DENIED: "permission-denied",
          UNAUTHENTICATED: "unauthenticated",
          RESOURCE_EXHAUSTED: "resource-exhausted",
          FAILED_PRECONDITION: "failed-precondition",
          ABORTED: "aborted",
          OUT_OF_RANGE: "out-of-range",
          UNIMPLEMENTED: "unimplemented",
          INTERNAL: "internal",
          UNAVAILABLE: "unavailable",
          DATA_LOSS: "data-loss",
        },
        Fr = (n(Ur, (Pr = Error)), Ur),
        Vr = new _("@firebase/firestore");
      function Ur(t, e) {
        var n = this;
        return (
          ((n = Pr.call(this, e) || this).code = t),
          (n.message = e),
          (n.name = "FirebaseError"),
          (n.toString = function () {
            return n.name + ": [code=" + n.code + "]: " + n.message;
          }),
          n
        );
      }
      function qr() {
        return Vr.logLevel;
      }
      function Br(t) {
        for (var e, n = [], r = 1; r < arguments.length; r++)
          n[r - 1] = arguments[r];
        Vr.logLevel <= m.DEBUG &&
          ((e = n.map(Gr)),
          Vr.debug.apply(Vr, s(["Firestore (8.9.0): " + t], e)));
      }
      function jr(t) {
        for (var e, n = [], r = 1; r < arguments.length; r++)
          n[r - 1] = arguments[r];
        Vr.logLevel <= m.ERROR &&
          ((e = n.map(Gr)),
          Vr.error.apply(Vr, s(["Firestore (8.9.0): " + t], e)));
      }
      function Kr(t) {
        for (var e, n = [], r = 1; r < arguments.length; r++)
          n[r - 1] = arguments[r];
        Vr.logLevel <= m.WARN &&
          ((e = n.map(Gr)),
          Vr.warn.apply(Vr, s(["Firestore (8.9.0): " + t], e)));
      }
      function Gr(e) {
        if ("string" == typeof e) return e;
        try {
          return JSON.stringify(e);
        } catch (t) {
          return e;
        }
      }
      function Qr(t) {
        t =
          "FIRESTORE (8.9.0) INTERNAL ASSERTION FAILED: " +
          (t = void 0 === t ? "Unexpected state" : t);
        throw (jr(t), new Error(t));
      }
      function Hr(t) {
        t || Qr();
      }
      var zr =
        ((Wr.u = function () {
          for (
            var t =
                "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
              e = Math.floor(256 / t.length) * t.length,
              n = "";
            n.length < 20;

          )
            for (
              var r = (function (t) {
                  var e =
                      "undefined" != typeof self &&
                      (self.crypto || self.msCrypto),
                    n = new Uint8Array(t);
                  if (e && "function" == typeof e.getRandomValues)
                    e.getRandomValues(n);
                  else
                    for (var r = 0; r < t; r++)
                      n[r] = Math.floor(256 * Math.random());
                  return n;
                })(40),
                i = 0;
              i < r.length;
              ++i
            )
              n.length < 20 && r[i] < e && (n += t.charAt(r[i] % t.length));
          return n;
        }),
        Wr);
      function Wr() {}
      function Yr(t, e) {
        return t < e ? -1 : e < t ? 1 : 0;
      }
      function Xr(t, n, r) {
        return (
          t.length === n.length &&
          t.every(function (t, e) {
            return r(t, n[e]);
          })
        );
      }
      function $r(t) {
        return t + "\0";
      }
      var Jr =
          ((ei.now = function () {
            return ei.fromMillis(Date.now());
          }),
          (ei.fromDate = function (t) {
            return ei.fromMillis(t.getTime());
          }),
          (ei.fromMillis = function (t) {
            var e = Math.floor(t / 1e3);
            return new ei(e, Math.floor(1e6 * (t - 1e3 * e)));
          }),
          (ei.prototype.toDate = function () {
            return new Date(this.toMillis());
          }),
          (ei.prototype.toMillis = function () {
            return 1e3 * this.seconds + this.nanoseconds / 1e6;
          }),
          (ei.prototype._compareTo = function (t) {
            return this.seconds === t.seconds
              ? Yr(this.nanoseconds, t.nanoseconds)
              : Yr(this.seconds, t.seconds);
          }),
          (ei.prototype.isEqual = function (t) {
            return (
              t.seconds === this.seconds && t.nanoseconds === this.nanoseconds
            );
          }),
          (ei.prototype.toString = function () {
            return (
              "Timestamp(seconds=" +
              this.seconds +
              ", nanoseconds=" +
              this.nanoseconds +
              ")"
            );
          }),
          (ei.prototype.toJSON = function () {
            return { seconds: this.seconds, nanoseconds: this.nanoseconds };
          }),
          (ei.prototype.valueOf = function () {
            var t = this.seconds - -62135596800;
            return (
              String(t).padStart(12, "0") +
              "." +
              String(this.nanoseconds).padStart(9, "0")
            );
          }),
          ei),
        Zr =
          ((ti.fromTimestamp = function (t) {
            return new ti(t);
          }),
          (ti.min = function () {
            return new ti(new Jr(0, 0));
          }),
          (ti.prototype.compareTo = function (t) {
            return this.timestamp._compareTo(t.timestamp);
          }),
          (ti.prototype.isEqual = function (t) {
            return this.timestamp.isEqual(t.timestamp);
          }),
          (ti.prototype.toMicroseconds = function () {
            return (
              1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3
            );
          }),
          (ti.prototype.toString = function () {
            return "SnapshotVersion(" + this.timestamp.toString() + ")";
          }),
          (ti.prototype.toTimestamp = function () {
            return this.timestamp;
          }),
          ti);
      function ti(t) {
        this.timestamp = t;
      }
      function ei(t, e) {
        if (((this.seconds = t), (this.nanoseconds = e) < 0))
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Timestamp nanoseconds out of range: " + e
          );
        if (1e9 <= e)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Timestamp nanoseconds out of range: " + e
          );
        if (t < -62135596800)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Timestamp seconds out of range: " + t
          );
        if (253402300800 <= t)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Timestamp seconds out of range: " + t
          );
      }
      function ni(t) {
        var e,
          n = 0;
        for (e in t) Object.prototype.hasOwnProperty.call(t, e) && n++;
        return n;
      }
      function ri(t, e) {
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);
      }
      function ii(t) {
        for (var e in t)
          if (Object.prototype.hasOwnProperty.call(t, e)) return !1;
        return !0;
      }
      var oi,
        si,
        C =
          (Object.defineProperty(gi.prototype, "length", {
            get: function () {
              return this.len;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (gi.prototype.isEqual = function (t) {
            return 0 === gi.comparator(this, t);
          }),
          (gi.prototype.child = function (t) {
            var e = this.segments.slice(this.offset, this.limit());
            return (
              t instanceof gi
                ? t.forEach(function (t) {
                    e.push(t);
                  })
                : e.push(t),
              this.construct(e)
            );
          }),
          (gi.prototype.limit = function () {
            return this.offset + this.length;
          }),
          (gi.prototype.popFirst = function (t) {
            return this.construct(
              this.segments,
              this.offset + (t = void 0 === t ? 1 : t),
              this.length - t
            );
          }),
          (gi.prototype.popLast = function () {
            return this.construct(this.segments, this.offset, this.length - 1);
          }),
          (gi.prototype.firstSegment = function () {
            return this.segments[this.offset];
          }),
          (gi.prototype.lastSegment = function () {
            return this.get(this.length - 1);
          }),
          (gi.prototype.get = function (t) {
            return this.segments[this.offset + t];
          }),
          (gi.prototype.isEmpty = function () {
            return 0 === this.length;
          }),
          (gi.prototype.isPrefixOf = function (t) {
            if (t.length < this.length) return !1;
            for (var e = 0; e < this.length; e++)
              if (this.get(e) !== t.get(e)) return !1;
            return !0;
          }),
          (gi.prototype.isImmediateParentOf = function (t) {
            if (this.length + 1 !== t.length) return !1;
            for (var e = 0; e < this.length; e++)
              if (this.get(e) !== t.get(e)) return !1;
            return !0;
          }),
          (gi.prototype.forEach = function (t) {
            for (var e = this.offset, n = this.limit(); e < n; e++)
              t(this.segments[e]);
          }),
          (gi.prototype.toArray = function () {
            return this.segments.slice(this.offset, this.limit());
          }),
          (gi.comparator = function (t, e) {
            for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {
              var i = t.get(r),
                o = e.get(r);
              if (i < o) return -1;
              if (o < i) return 1;
            }
            return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;
          }),
          gi),
        ai =
          (n(yi, (si = C)),
          (yi.prototype.construct = function (t, e, n) {
            return new yi(t, e, n);
          }),
          (yi.prototype.canonicalString = function () {
            return this.toArray().join("/");
          }),
          (yi.prototype.toString = function () {
            return this.canonicalString();
          }),
          (yi.fromString = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            for (var n = [], r = 0, i = t; r < i.length; r++) {
              var o = i[r];
              if (0 <= o.indexOf("//"))
                throw new Fr(
                  Mr.INVALID_ARGUMENT,
                  "Invalid segment (" +
                    o +
                    "). Paths must not contain // in them."
                );
              n.push.apply(
                n,
                o.split("/").filter(function (t) {
                  return 0 < t.length;
                })
              );
            }
            return new yi(n);
          }),
          (yi.emptyPath = function () {
            return new yi([]);
          }),
          yi),
        ui = /^[_a-zA-Z][_a-zA-Z0-9]*$/,
        ci =
          (n(pi, (oi = C)),
          (pi.prototype.construct = function (t, e, n) {
            return new pi(t, e, n);
          }),
          (pi.isValidIdentifier = function (t) {
            return ui.test(t);
          }),
          (pi.prototype.canonicalString = function () {
            return this.toArray()
              .map(function (t) {
                return (
                  (t = t.replace(/\\/g, "\\\\").replace(/`/g, "\\`")),
                  (t = !pi.isValidIdentifier(t) ? "`" + t + "`" : t)
                );
              })
              .join(".");
          }),
          (pi.prototype.toString = function () {
            return this.canonicalString();
          }),
          (pi.prototype.isKeyField = function () {
            return 1 === this.length && "__name__" === this.get(0);
          }),
          (pi.keyField = function () {
            return new pi(["__name__"]);
          }),
          (pi.fromServerFormat = function (t) {
            for (
              var e = [],
                n = "",
                r = 0,
                i = function () {
                  if (0 === n.length)
                    throw new Fr(
                      Mr.INVALID_ARGUMENT,
                      "Invalid field path (" +
                        t +
                        "). Paths must not be empty, begin with '.', end with '.', or contain '..'"
                    );
                  e.push(n), (n = "");
                },
                o = !1;
              r < t.length;

            ) {
              var s = t[r];
              if ("\\" === s) {
                if (r + 1 === t.length)
                  throw new Fr(
                    Mr.INVALID_ARGUMENT,
                    "Path has trailing escape character: " + t
                  );
                var a = t[r + 1];
                if ("\\" !== a && "." !== a && "`" !== a)
                  throw new Fr(
                    Mr.INVALID_ARGUMENT,
                    "Path has invalid escape sequence: " + t
                  );
                (n += a), (r += 2);
              } else
                "`" === s ? (o = !o) : "." !== s || o ? (n += s) : i(), r++;
            }
            if ((i(), o))
              throw new Fr(Mr.INVALID_ARGUMENT, "Unterminated ` in path: " + t);
            return new pi(e);
          }),
          (pi.emptyPath = function () {
            return new pi([]);
          }),
          pi),
        hi =
          ((di.prototype.covers = function (t) {
            for (var e = 0, n = this.fields; e < n.length; e++)
              if (n[e].isPrefixOf(t)) return !0;
            return !1;
          }),
          (di.prototype.isEqual = function (t) {
            return Xr(this.fields, t.fields, function (t, e) {
              return t.isEqual(e);
            });
          }),
          di),
        li =
          ((fi.fromBase64String = function (t) {
            return new fi(atob(t));
          }),
          (fi.fromUint8Array = function (t) {
            return new fi(
              (function (t) {
                for (var e = "", n = 0; n < t.length; ++n)
                  e += String.fromCharCode(t[n]);
                return e;
              })(t)
            );
          }),
          (fi.prototype.toBase64 = function () {
            return (t = this.binaryString), btoa(t);
            var t;
          }),
          (fi.prototype.toUint8Array = function () {
            return (function (t) {
              for (var e = new Uint8Array(t.length), n = 0; n < t.length; n++)
                e[n] = t.charCodeAt(n);
              return e;
            })(this.binaryString);
          }),
          (fi.prototype.approximateByteSize = function () {
            return 2 * this.binaryString.length;
          }),
          (fi.prototype.compareTo = function (t) {
            return Yr(this.binaryString, t.binaryString);
          }),
          (fi.prototype.isEqual = function (t) {
            return this.binaryString === t.binaryString;
          }),
          fi);
      function fi(t) {
        this.binaryString = t;
      }
      function di(t) {
        (this.fields = t).sort(ci.comparator);
      }
      function pi() {
        return (null !== oi && oi.apply(this, arguments)) || this;
      }
      function yi() {
        return (null !== si && si.apply(this, arguments)) || this;
      }
      function gi(t, e, n) {
        void 0 === e ? (e = 0) : e > t.length && Qr(),
          void 0 === n ? (n = t.length - e) : n > t.length - e && Qr(),
          (this.segments = t),
          (this.offset = e),
          (this.len = n);
      }
      li.EMPTY_BYTE_STRING = new li("");
      var mi = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
      function vi(t) {
        if ((Hr(!!t), "string" != typeof t))
          return { seconds: wi(t.seconds), nanos: wi(t.nanos) };
        var e = 0,
          n = mi.exec(t);
        Hr(!!n),
          n[1] &&
            ((n = ((n = n[1]) + "000000000").substr(0, 9)), (e = Number(n)));
        t = new Date(t);
        return { seconds: Math.floor(t.getTime() / 1e3), nanos: e };
      }
      function wi(t) {
        return "number" == typeof t ? t : "string" == typeof t ? Number(t) : 0;
      }
      function bi(t) {
        return "string" == typeof t
          ? li.fromBase64String(t)
          : li.fromUint8Array(t);
      }
      function Ei(t) {
        return (
          "server_timestamp" ===
          (null ===
            (t = (
              (null === (t = null == t ? void 0 : t.mapValue) || void 0 === t
                ? void 0
                : t.fields) || {}
            ).__type__) || void 0 === t
            ? void 0
            : t.stringValue)
        );
      }
      function Ti(t) {
        t = vi(t.mapValue.fields.__local_write_time__.timestampValue);
        return new Jr(t.seconds, t.nanos);
      }
      function Ii(t) {
        return null == t;
      }
      function _i(t) {
        return 0 === t && 1 / t == -1 / 0;
      }
      function Si(t) {
        return (
          "number" == typeof t &&
          Number.isInteger(t) &&
          !_i(t) &&
          t <= Number.MAX_SAFE_INTEGER &&
          t >= Number.MIN_SAFE_INTEGER
        );
      }
      var Ai =
        ((Di.fromPath = function (t) {
          return new Di(ai.fromString(t));
        }),
        (Di.fromName = function (t) {
          return new Di(ai.fromString(t).popFirst(5));
        }),
        (Di.prototype.hasCollectionId = function (t) {
          return (
            2 <= this.path.length && this.path.get(this.path.length - 2) === t
          );
        }),
        (Di.prototype.isEqual = function (t) {
          return null !== t && 0 === ai.comparator(this.path, t.path);
        }),
        (Di.prototype.toString = function () {
          return this.path.toString();
        }),
        (Di.comparator = function (t, e) {
          return ai.comparator(t.path, e.path);
        }),
        (Di.isDocumentKey = function (t) {
          return t.length % 2 == 0;
        }),
        (Di.fromSegments = function (t) {
          return new Di(new ai(t.slice()));
        }),
        Di);
      function Di(t) {
        this.path = t;
      }
      function Ni(t) {
        return "nullValue" in t
          ? 0
          : "booleanValue" in t
          ? 1
          : "integerValue" in t || "doubleValue" in t
          ? 2
          : "timestampValue" in t
          ? 3
          : "stringValue" in t
          ? 5
          : "bytesValue" in t
          ? 6
          : "referenceValue" in t
          ? 7
          : "geoPointValue" in t
          ? 8
          : "arrayValue" in t
          ? 9
          : "mapValue" in t
          ? Ei(t)
            ? 4
            : 10
          : Qr();
      }
      function Ci(r, i) {
        var t,
          e,
          n = Ni(r);
        if (n !== Ni(i)) return !1;
        switch (n) {
          case 0:
            return !0;
          case 1:
            return r.booleanValue === i.booleanValue;
          case 4:
            return Ti(r).isEqual(Ti(i));
          case 3:
            return (function (t) {
              if (
                "string" == typeof r.timestampValue &&
                "string" == typeof t.timestampValue &&
                r.timestampValue.length === t.timestampValue.length
              )
                return r.timestampValue === t.timestampValue;
              var e = vi(r.timestampValue),
                t = vi(t.timestampValue);
              return e.seconds === t.seconds && e.nanos === t.nanos;
            })(i);
          case 5:
            return r.stringValue === i.stringValue;
          case 6:
            return (e = i), bi(r.bytesValue).isEqual(bi(e.bytesValue));
          case 7:
            return r.referenceValue === i.referenceValue;
          case 8:
            return (
              (t = i),
              wi((e = r).geoPointValue.latitude) ===
                wi(t.geoPointValue.latitude) &&
                wi(e.geoPointValue.longitude) === wi(t.geoPointValue.longitude)
            );
          case 2:
            return (function (t, e) {
              if ("integerValue" in t && "integerValue" in e)
                return wi(t.integerValue) === wi(e.integerValue);
              if ("doubleValue" in t && "doubleValue" in e) {
                (t = wi(t.doubleValue)), (e = wi(e.doubleValue));
                return t === e ? _i(t) === _i(e) : isNaN(t) && isNaN(e);
              }
              return !1;
            })(r, i);
          case 9:
            return Xr(r.arrayValue.values || [], i.arrayValue.values || [], Ci);
          case 10:
            return (function () {
              var t,
                e = r.mapValue.fields || {},
                n = i.mapValue.fields || {};
              if (ni(e) !== ni(n)) return !1;
              for (t in e)
                if (e.hasOwnProperty(t) && (void 0 === n[t] || !Ci(e[t], n[t])))
                  return !1;
              return !0;
            })();
          default:
            return Qr();
        }
      }
      function ki(t, e) {
        return (
          void 0 !==
          (t.values || []).find(function (t) {
            return Ci(t, e);
          })
        );
      }
      function Ri(t, e) {
        var n,
          r,
          i,
          o = Ni(t),
          s = Ni(e);
        if (o !== s) return Yr(o, s);
        switch (o) {
          case 0:
            return 0;
          case 1:
            return Yr(t.booleanValue, e.booleanValue);
          case 2:
            return (
              (r = e),
              (i = wi(t.integerValue || t.doubleValue)),
              (r = wi(r.integerValue || r.doubleValue)),
              i < r
                ? -1
                : r < i
                ? 1
                : i === r
                ? 0
                : isNaN(i)
                ? isNaN(r)
                  ? 0
                  : -1
                : 1
            );
          case 3:
            return xi(t.timestampValue, e.timestampValue);
          case 4:
            return xi(Ti(t), Ti(e));
          case 5:
            return Yr(t.stringValue, e.stringValue);
          case 6:
            return (function (t, e) {
              (t = bi(t)), (e = bi(e));
              return t.compareTo(e);
            })(t.bytesValue, e.bytesValue);
          case 7:
            return (function (t, e) {
              for (
                var n = t.split("/"), r = e.split("/"), i = 0;
                i < n.length && i < r.length;
                i++
              ) {
                var o = Yr(n[i], r[i]);
                if (0 !== o) return o;
              }
              return Yr(n.length, r.length);
            })(t.referenceValue, e.referenceValue);
          case 8:
            return (
              (n = t.geoPointValue),
              (i = e.geoPointValue),
              0 !== (r = Yr(wi(n.latitude), wi(i.latitude)))
                ? r
                : Yr(wi(n.longitude), wi(i.longitude))
            );
          case 9:
            return (function (t, e) {
              for (
                var n = t.values || [], r = e.values || [], i = 0;
                i < n.length && i < r.length;
                ++i
              ) {
                var o = Ri(n[i], r[i]);
                if (o) return o;
              }
              return Yr(n.length, r.length);
            })(t.arrayValue, e.arrayValue);
          case 10:
            return (function (t, e) {
              var n = t.fields || {},
                r = Object.keys(n),
                i = e.fields || {},
                o = Object.keys(i);
              r.sort(), o.sort();
              for (var s = 0; s < r.length && s < o.length; ++s) {
                var a = Yr(r[s], o[s]);
                if (0 !== a) return a;
                a = Ri(n[r[s]], i[o[s]]);
                if (0 !== a) return a;
              }
              return Yr(r.length, o.length);
            })(t.mapValue, e.mapValue);
          default:
            throw Qr();
        }
      }
      function xi(t, e) {
        if (
          "string" == typeof t &&
          "string" == typeof e &&
          t.length === e.length
        )
          return Yr(t, e);
        var n = vi(t),
          t = vi(e),
          e = Yr(n.seconds, t.seconds);
        return 0 !== e ? e : Yr(n.nanos, t.nanos);
      }
      function Oi(t) {
        return (function s(t) {
          return "nullValue" in t
            ? "null"
            : "booleanValue" in t
            ? "" + t.booleanValue
            : "integerValue" in t
            ? "" + t.integerValue
            : "doubleValue" in t
            ? "" + t.doubleValue
            : "timestampValue" in t
            ? (function (t) {
                t = vi(t);
                return "time(" + t.seconds + "," + t.nanos + ")";
              })(t.timestampValue)
            : "stringValue" in t
            ? t.stringValue
            : "bytesValue" in t
            ? bi(t.bytesValue).toBase64()
            : "referenceValue" in t
            ? ((e = t.referenceValue), Ai.fromName(e).toString())
            : "geoPointValue" in t
            ? "geo(" + (e = t.geoPointValue).latitude + "," + e.longitude + ")"
            : "arrayValue" in t
            ? (function (t) {
                for (
                  var e = "[", n = !0, r = 0, i = t.values || [];
                  r < i.length;
                  r++
                )
                  n ? (n = !1) : (e += ","), (e += s(i[r]));
                return e + "]";
              })(t.arrayValue)
            : "mapValue" in t
            ? (function (t) {
                for (
                  var e = "{",
                    n = !0,
                    r = 0,
                    i = Object.keys(t.fields || {}).sort();
                  r < i.length;
                  r++
                ) {
                  var o = i[r];
                  n ? (n = !1) : (e += ","), (e += o + ":" + s(t.fields[o]));
                }
                return e + "}";
              })(t.mapValue)
            : Qr();
          var e;
        })(t);
      }
      function Li(t, e) {
        return {
          referenceValue:
            "projects/" +
            t.projectId +
            "/databases/" +
            t.database +
            "/documents/" +
            e.path.canonicalString(),
        };
      }
      function Pi(t) {
        return t && "integerValue" in t;
      }
      function Mi(t) {
        return !!t && "arrayValue" in t;
      }
      function Fi(t) {
        return t && "nullValue" in t;
      }
      function Vi(t) {
        return t && "doubleValue" in t && isNaN(Number(t.doubleValue));
      }
      function Ui(t) {
        return t && "mapValue" in t;
      }
      function qi(t) {
        if (t.geoPointValue)
          return { geoPointValue: Object.assign({}, t.geoPointValue) };
        if (t.timestampValue && "object" == typeof t.timestampValue)
          return { timestampValue: Object.assign({}, t.timestampValue) };
        if (t.mapValue) {
          var n = { mapValue: { fields: {} } };
          return (
            ri(t.mapValue.fields, function (t, e) {
              return (n.mapValue.fields[t] = qi(e));
            }),
            n
          );
        }
        if (t.arrayValue) {
          for (
            var e = { arrayValue: { values: [] } }, r = 0;
            r < (t.arrayValue.values || []).length;
            ++r
          )
            e.arrayValue.values[r] = qi(t.arrayValue.values[r]);
          return e;
        }
        return Object.assign({}, t);
      }
      var Bi =
        ((ji.empty = function () {
          return new ji({ mapValue: {} });
        }),
        (ji.prototype.field = function (t) {
          if (t.isEmpty()) return this.value;
          for (var e = this.value, n = 0; n < t.length - 1; ++n)
            if (!Ui((e = (e.mapValue.fields || {})[t.get(n)]))) return null;
          return (e = (e.mapValue.fields || {})[t.lastSegment()]) || null;
        }),
        (ji.prototype.set = function (t, e) {
          this.getFieldsMap(t.popLast())[t.lastSegment()] = qi(e);
        }),
        (ji.prototype.setAll = function (t) {
          var r = this,
            i = ci.emptyPath(),
            o = {},
            s = [];
          t.forEach(function (t, e) {
            var n;
            i.isImmediateParentOf(e) ||
              ((n = r.getFieldsMap(i)),
              r.applyChanges(n, o, s),
              (o = {}),
              (s = []),
              (i = e.popLast())),
              t ? (o[e.lastSegment()] = qi(t)) : s.push(e.lastSegment());
          });
          t = this.getFieldsMap(i);
          this.applyChanges(t, o, s);
        }),
        (ji.prototype.delete = function (t) {
          var e = this.field(t.popLast());
          Ui(e) &&
            e.mapValue.fields &&
            delete e.mapValue.fields[t.lastSegment()];
        }),
        (ji.prototype.isEqual = function (t) {
          return Ci(this.value, t.value);
        }),
        (ji.prototype.getFieldsMap = function (t) {
          var e = this.value;
          e.mapValue.fields || (e.mapValue = { fields: {} });
          for (var n = 0; n < t.length; ++n) {
            var r = e.mapValue.fields[t.get(n)];
            (Ui(r) && r.mapValue.fields) ||
              ((r = { mapValue: { fields: {} } }),
              (e.mapValue.fields[t.get(n)] = r)),
              (e = r);
          }
          return e.mapValue.fields;
        }),
        (ji.prototype.applyChanges = function (n, t, e) {
          ri(t, function (t, e) {
            return (n[t] = e);
          });
          for (var r = 0, i = e; r < i.length; r++) {
            var o = i[r];
            delete n[o];
          }
        }),
        (ji.prototype.clone = function () {
          return new ji(qi(this.value));
        }),
        ji);
      function ji(t) {
        this.value = t;
      }
      var Ki =
          ((Qi.newInvalidDocument = function (t) {
            return new Qi(t, 0, Zr.min(), Bi.empty(), 0);
          }),
          (Qi.newFoundDocument = function (t, e, n) {
            return new Qi(t, 1, e, n, 0);
          }),
          (Qi.newNoDocument = function (t, e) {
            return new Qi(t, 2, e, Bi.empty(), 0);
          }),
          (Qi.newUnknownDocument = function (t, e) {
            return new Qi(t, 3, e, Bi.empty(), 2);
          }),
          (Qi.prototype.convertToFoundDocument = function (t, e) {
            return (
              (this.version = t),
              (this.documentType = 1),
              (this.data = e),
              (this.documentState = 0),
              this
            );
          }),
          (Qi.prototype.convertToNoDocument = function (t) {
            return (
              (this.version = t),
              (this.documentType = 2),
              (this.data = Bi.empty()),
              (this.documentState = 0),
              this
            );
          }),
          (Qi.prototype.convertToUnknownDocument = function (t) {
            return (
              (this.version = t),
              (this.documentType = 3),
              (this.data = Bi.empty()),
              (this.documentState = 2),
              this
            );
          }),
          (Qi.prototype.setHasCommittedMutations = function () {
            return (this.documentState = 2), this;
          }),
          (Qi.prototype.setHasLocalMutations = function () {
            return (this.documentState = 1), this;
          }),
          Object.defineProperty(Qi.prototype, "hasLocalMutations", {
            get: function () {
              return 1 === this.documentState;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Qi.prototype, "hasCommittedMutations", {
            get: function () {
              return 2 === this.documentState;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Qi.prototype, "hasPendingWrites", {
            get: function () {
              return this.hasLocalMutations || this.hasCommittedMutations;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Qi.prototype.isValidDocument = function () {
            return 0 !== this.documentType;
          }),
          (Qi.prototype.isFoundDocument = function () {
            return 1 === this.documentType;
          }),
          (Qi.prototype.isNoDocument = function () {
            return 2 === this.documentType;
          }),
          (Qi.prototype.isUnknownDocument = function () {
            return 3 === this.documentType;
          }),
          (Qi.prototype.isEqual = function (t) {
            return (
              t instanceof Qi &&
              this.key.isEqual(t.key) &&
              this.version.isEqual(t.version) &&
              this.documentType === t.documentType &&
              this.documentState === t.documentState &&
              this.data.isEqual(t.data)
            );
          }),
          (Qi.prototype.clone = function () {
            return new Qi(
              this.key,
              this.documentType,
              this.version,
              this.data.clone(),
              this.documentState
            );
          }),
          (Qi.prototype.toString = function () {
            return (
              "Document(" +
              this.key +
              ", " +
              this.version +
              ", " +
              JSON.stringify(this.data.value) +
              ", {documentType: " +
              this.documentType +
              "}), {documentState: " +
              this.documentState +
              "})"
            );
          }),
          Qi),
        Gi = function (t, e, n, r, i, o, s) {
          void 0 === e && (e = null),
            void 0 === n && (n = []),
            void 0 === r && (r = []),
            void 0 === i && (i = null),
            void 0 === o && (o = null),
            void 0 === s && (s = null),
            (this.path = t),
            (this.collectionGroup = e),
            (this.orderBy = n),
            (this.filters = r),
            (this.limit = i),
            (this.startAt = o),
            (this.endAt = s),
            (this.h = null);
        };
      function Qi(t, e, n, r, i) {
        (this.key = t),
          (this.documentType = e),
          (this.version = n),
          (this.data = r),
          (this.documentState = i);
      }
      function Hi(t, e, n, r, i, o, s) {
        return new Gi(
          t,
          (e = void 0 === e ? null : e),
          (n = void 0 === n ? [] : n),
          (r = void 0 === r ? [] : r),
          (i = void 0 === i ? null : i),
          (o = void 0 === o ? null : o),
          (s = void 0 === s ? null : s)
        );
      }
      function zi(t) {
        var e = t;
        return (
          null === e.h &&
            ((t = e.path.canonicalString()),
            null !== e.collectionGroup && (t += "|cg:" + e.collectionGroup),
            (t += "|f:"),
            (t += e.filters
              .map(function (t) {
                return (
                  (t = t).field.canonicalString() +
                  t.op.toString() +
                  Oi(t.value)
                );
              })
              .join(",")),
            (t += "|ob:"),
            (t += e.orderBy
              .map(function (t) {
                return (t = t).field.canonicalString() + t.dir;
              })
              .join(",")),
            Ii(e.limit) || ((t += "|l:"), (t += e.limit)),
            e.startAt && ((t += "|lb:"), (t += Io(e.startAt))),
            e.endAt && ((t += "|ub:"), (t += Io(e.endAt))),
            (e.h = t)),
          e.h
        );
      }
      function Wi(t, e) {
        if (t.limit !== e.limit) return !1;
        if (t.orderBy.length !== e.orderBy.length) return !1;
        for (var n, r, i = 0; i < t.orderBy.length; i++)
          if (
            ((n = t.orderBy[i]),
            (r = e.orderBy[i]),
            n.dir !== r.dir || !n.field.isEqual(r.field))
          )
            return !1;
        if (t.filters.length !== e.filters.length) return !1;
        for (var o, s, a = 0; a < t.filters.length; a++)
          if (
            ((o = t.filters[a]),
            (s = e.filters[a]),
            o.op !== s.op || !o.field.isEqual(s.field) || !Ci(o.value, s.value))
          )
            return !1;
        return (
          t.collectionGroup === e.collectionGroup &&
          !!t.path.isEqual(e.path) &&
          !!Ao(t.startAt, e.startAt) &&
          Ao(t.endAt, e.endAt)
        );
      }
      function Yi(t) {
        return (
          Ai.isDocumentKey(t.path) &&
          null === t.collectionGroup &&
          0 === t.filters.length
        );
      }
      var Xi,
        $i =
          (n(Ji, (Xi = function () {})),
          (Ji.create = function (t, e, n) {
            return t.isKeyField()
              ? "in" === e || "not-in" === e
                ? this.l(t, e, n)
                : new no(t, e, n)
              : "array-contains" === e
              ? new po(t, n)
              : "in" === e
              ? new yo(t, n)
              : "not-in" === e
              ? new go(t, n)
              : "array-contains-any" === e
              ? new mo(t, n)
              : new Ji(t, e, n);
          }),
          (Ji.l = function (t, e, n) {
            return new ("in" === e ? ro : io)(t, n);
          }),
          (Ji.prototype.matches = function (t) {
            t = t.data.field(this.field);
            return "!=" === this.op
              ? null !== t && this.m(Ri(t, this.value))
              : null !== t &&
                  Ni(this.value) === Ni(t) &&
                  this.m(Ri(t, this.value));
          }),
          (Ji.prototype.m = function (t) {
            switch (this.op) {
              case "<":
                return t < 0;
              case "<=":
                return t <= 0;
              case "==":
                return 0 === t;
              case "!=":
                return 0 !== t;
              case ">":
                return 0 < t;
              case ">=":
                return 0 <= t;
              default:
                return Qr();
            }
          }),
          (Ji.prototype.g = function () {
            return 0 <= ["<", "<=", ">", ">=", "!=", "not-in"].indexOf(this.op);
          }),
          Ji);
      function Ji(t, e, n) {
        var r = this;
        return (
          ((r = Xi.call(this) || this).field = t), (r.op = e), (r.value = n), r
        );
      }
      var Zi,
        to,
        eo,
        no =
          (n(ao, (eo = $i)),
          (ao.prototype.matches = function (t) {
            t = Ai.comparator(t.key, this.key);
            return this.m(t);
          }),
          ao),
        ro =
          (n(so, (to = $i)),
          (so.prototype.matches = function (e) {
            return this.keys.some(function (t) {
              return t.isEqual(e.key);
            });
          }),
          so),
        io =
          (n(oo, (Zi = $i)),
          (oo.prototype.matches = function (e) {
            return !this.keys.some(function (t) {
              return t.isEqual(e.key);
            });
          }),
          oo);
      function oo(t, e) {
        var n = this;
        return ((n = Zi.call(this, t, "not-in", e) || this).keys = uo(0, e)), n;
      }
      function so(t, e) {
        var n = this;
        return ((n = to.call(this, t, "in", e) || this).keys = uo(0, e)), n;
      }
      function ao(t, e, n) {
        var r = this;
        return (
          ((r = eo.call(this, t, e, n) || this).key = Ai.fromName(
            n.referenceValue
          )),
          r
        );
      }
      function uo(t, e) {
        return (
          (null === (e = e.arrayValue) || void 0 === e ? void 0 : e.values) ||
          []
        ).map(function (t) {
          return Ai.fromName(t.referenceValue);
        });
      }
      var co,
        ho,
        lo,
        fo,
        po =
          (n(To, (fo = $i)),
          (To.prototype.matches = function (t) {
            t = t.data.field(this.field);
            return Mi(t) && ki(t.arrayValue, this.value);
          }),
          To),
        yo =
          (n(Eo, (lo = $i)),
          (Eo.prototype.matches = function (t) {
            t = t.data.field(this.field);
            return null !== t && ki(this.value.arrayValue, t);
          }),
          Eo),
        go =
          (n(bo, (ho = $i)),
          (bo.prototype.matches = function (t) {
            if (ki(this.value.arrayValue, { nullValue: "NULL_VALUE" }))
              return !1;
            t = t.data.field(this.field);
            return null !== t && !ki(this.value.arrayValue, t);
          }),
          bo),
        mo =
          (n(wo, (co = $i)),
          (wo.prototype.matches = function (t) {
            var e = this,
              t = t.data.field(this.field);
            return (
              !(!Mi(t) || !t.arrayValue.values) &&
              t.arrayValue.values.some(function (t) {
                return ki(e.value.arrayValue, t);
              })
            );
          }),
          wo),
        vo = function (t, e) {
          (this.position = t), (this.before = e);
        };
      function wo(t, e) {
        return co.call(this, t, "array-contains-any", e) || this;
      }
      function bo(t, e) {
        return ho.call(this, t, "not-in", e) || this;
      }
      function Eo(t, e) {
        return lo.call(this, t, "in", e) || this;
      }
      function To(t, e) {
        return fo.call(this, t, "array-contains", e) || this;
      }
      function Io(t) {
        return (t.before ? "b" : "a") + ":" + t.position.map(Oi).join(",");
      }
      var _o = function (t, e) {
        void 0 === e && (e = "asc"), (this.field = t), (this.dir = e);
      };
      function So(t, e, n) {
        for (var r = 0, i = 0; i < t.position.length; i++) {
          var o = e[i],
            s = t.position[i],
            r = o.field.isKeyField()
              ? Ai.comparator(Ai.fromName(s.referenceValue), n.key)
              : Ri(s, n.data.field(o.field));
          if (("desc" === o.dir && (r *= -1), 0 !== r)) break;
        }
        return t.before ? r <= 0 : r < 0;
      }
      function Ao(t, e) {
        if (null === t) return null === e;
        if (null === e) return !1;
        if (t.before !== e.before || t.position.length !== e.position.length)
          return !1;
        for (var n = 0; n < t.position.length; n++)
          if (!Ci(t.position[n], e.position[n])) return !1;
        return !0;
      }
      var Do = function (t, e, n, r, i, o, s, a) {
        void 0 === e && (e = null),
          void 0 === n && (n = []),
          void 0 === r && (r = []),
          void 0 === i && (i = null),
          void 0 === o && (o = "F"),
          void 0 === s && (s = null),
          void 0 === a && (a = null),
          (this.path = t),
          (this.collectionGroup = e),
          (this.explicitOrderBy = n),
          (this.filters = r),
          (this.limit = i),
          (this.limitType = o),
          (this.startAt = s),
          (this.endAt = a),
          (this.p = null),
          (this.T = null),
          this.startAt,
          this.endAt;
      };
      function No(t, e, n, r, i, o, s, a) {
        return new Do(t, e, n, r, i, o, s, a);
      }
      function Co(t) {
        return new Do(t);
      }
      function ko(t) {
        return !Ii(t.limit) && "F" === t.limitType;
      }
      function Ro(t) {
        return !Ii(t.limit) && "L" === t.limitType;
      }
      function xo(t) {
        return 0 < t.explicitOrderBy.length ? t.explicitOrderBy[0].field : null;
      }
      function Oo(t) {
        for (var e = 0, n = t.filters; e < n.length; e++) {
          var r = n[e];
          if (r.g()) return r.field;
        }
        return null;
      }
      function Lo(t) {
        return null !== t.collectionGroup;
      }
      function Po(t) {
        var e = t;
        if (null === e.p) {
          e.p = [];
          var n = Oo(e),
            t = xo(e);
          if (null !== n && null === t)
            n.isKeyField() || e.p.push(new _o(n)),
              e.p.push(new _o(ci.keyField(), "asc"));
          else {
            for (var r = !1, i = 0, o = e.explicitOrderBy; i < o.length; i++) {
              var s = o[i];
              e.p.push(s), s.field.isKeyField() && (r = !0);
            }
            r ||
              ((n =
                0 < e.explicitOrderBy.length
                  ? e.explicitOrderBy[e.explicitOrderBy.length - 1].dir
                  : "asc"),
              e.p.push(new _o(ci.keyField(), n)));
          }
        }
        return e.p;
      }
      function Mo(t) {
        var e = t;
        if (!e.T)
          if ("F" === e.limitType)
            e.T = Hi(
              e.path,
              e.collectionGroup,
              Po(e),
              e.filters,
              e.limit,
              e.startAt,
              e.endAt
            );
          else {
            for (var n = [], r = 0, i = Po(e); r < i.length; r++) {
              var o = i[r],
                s = "desc" === o.dir ? "asc" : "desc";
              n.push(new _o(o.field, s));
            }
            var a = e.endAt ? new vo(e.endAt.position, !e.endAt.before) : null,
              t = e.startAt
                ? new vo(e.startAt.position, !e.startAt.before)
                : null;
            e.T = Hi(e.path, e.collectionGroup, n, e.filters, e.limit, a, t);
          }
        return e.T;
      }
      function Fo(t, e, n) {
        return new Do(
          t.path,
          t.collectionGroup,
          t.explicitOrderBy.slice(),
          t.filters.slice(),
          e,
          n,
          t.startAt,
          t.endAt
        );
      }
      function Vo(t, e) {
        return Wi(Mo(t), Mo(e)) && t.limitType === e.limitType;
      }
      function Uo(t) {
        return zi(Mo(t)) + "|lt:" + t.limitType;
      }
      function qo(t) {
        return (
          "Query(target=" +
          ((e = Mo(t)),
          (n = e.path.canonicalString()),
          null !== e.collectionGroup &&
            (n += " collectionGroup=" + e.collectionGroup),
          0 < e.filters.length &&
            (n +=
              ", filters: [" +
              e.filters
                .map(function (t) {
                  return (
                    (t = t).field.canonicalString() +
                    " " +
                    t.op +
                    " " +
                    Oi(t.value)
                  );
                })
                .join(", ") +
              "]"),
          Ii(e.limit) || (n += ", limit: " + e.limit),
          0 < e.orderBy.length &&
            (n +=
              ", orderBy: [" +
              e.orderBy
                .map(function (t) {
                  return (t = t).field.canonicalString() + " (" + t.dir + ")";
                })
                .join(", ") +
              "]"),
          e.startAt && (n += ", startAt: " + Io(e.startAt)),
          e.endAt && (n += ", endAt: " + Io(e.endAt)),
          "Target(" + n + ")") +
          "; limitType=" +
          t.limitType +
          ")"
        );
        var e, n;
      }
      function Bo(i, t) {
        return (
          t.isFoundDocument() &&
          ((e = i),
          (n = t.key.path),
          null !== e.collectionGroup
            ? t.key.hasCollectionId(e.collectionGroup) && e.path.isPrefixOf(n)
            : Ai.isDocumentKey(e.path)
            ? e.path.isEqual(n)
            : e.path.isImmediateParentOf(n)) &&
          (function (t) {
            for (var e = 0, n = i.explicitOrderBy; e < n.length; e++) {
              var r = n[e];
              if (!r.field.isKeyField() && null === t.data.field(r.field))
                return;
            }
            return 1;
          })(t) &&
          (function (t) {
            for (var e = 0, n = i.filters; e < n.length; e++)
              if (!n[e].matches(t)) return;
            return 1;
          })(t) &&
          ((n = t),
          (!(t = i).startAt || So(t.startAt, Po(t), n)) &&
            (!t.endAt || !So(t.endAt, Po(t), n)))
        );
        var e, n;
      }
      function jo(a) {
        return function (t, e) {
          for (var n = !1, r = 0, i = Po(a); r < i.length; r++) {
            var o = i[r],
              s = (function (t, r, e) {
                var n = t.field.isKeyField()
                  ? Ai.comparator(r.key, e.key)
                  : (function (t, e) {
                      var n = r.data.field(t),
                        t = e.data.field(t);
                      return null !== n && null !== t ? Ri(n, t) : Qr();
                    })(t.field, e);
                switch (t.dir) {
                  case "asc":
                    return n;
                  case "desc":
                    return -1 * n;
                  default:
                    return Qr();
                }
              })(o, t, e);
            if (0 !== s) return s;
            n = n || o.field.isKeyField();
          }
          return 0;
        };
      }
      function Ko(t, e) {
        if (t.I) {
          if (isNaN(e)) return { doubleValue: "NaN" };
          if (e === 1 / 0) return { doubleValue: "Infinity" };
          if (e === -1 / 0) return { doubleValue: "-Infinity" };
        }
        return { doubleValue: _i(e) ? "-0" : e };
      }
      function Go(t) {
        return { integerValue: "" + t };
      }
      function Qo(t, e) {
        return Si(e) ? Go(e) : Ko(t, e);
      }
      _ = function () {
        this._ = void 0;
      };
      function Ho(t, e) {
        return t instanceof os
          ? Pi((t = e)) || (t && "doubleValue" in t)
            ? e
            : { integerValue: 0 }
          : null;
      }
      var zo,
        Wo,
        Yo = (n(Jo, (Wo = _)), Jo),
        Xo = (n($o, (zo = _)), $o);
      function $o(t) {
        var e = this;
        return ((e = zo.call(this) || this).elements = t), e;
      }
      function Jo() {
        return (null !== Wo && Wo.apply(this, arguments)) || this;
      }
      function Zo(t, e) {
        for (var n = us(e), r = 0, i = t.elements; r < i.length; r++)
          !(function (e) {
            n.some(function (t) {
              return Ci(t, e);
            }) || n.push(e);
          })(i[r]);
        return { arrayValue: { values: n } };
      }
      var ts,
        es = (n(ns, (ts = _)), ns);
      function ns(t) {
        var e = this;
        return ((e = ts.call(this) || this).elements = t), e;
      }
      function rs(t, e) {
        for (var n = us(e), r = 0, i = t.elements; r < i.length; r++)
          !(function (e) {
            n = n.filter(function (t) {
              return !Ci(t, e);
            });
          })(i[r]);
        return { arrayValue: { values: n } };
      }
      var is,
        os = (n(ss, (is = _)), ss);
      function ss(t, e) {
        var n = this;
        return ((n = is.call(this) || this).R = t), (n.A = e), n;
      }
      function as(t) {
        return wi(t.integerValue || t.doubleValue);
      }
      function us(t) {
        return Mi(t) && t.arrayValue.values ? t.arrayValue.values.slice() : [];
      }
      function cs(t, e) {
        (this.version = t), (this.transformResults = e);
      }
      var hs = function (t, e) {
          (this.field = t), (this.transform = e);
        },
        ls =
          ((fs.none = function () {
            return new fs();
          }),
          (fs.exists = function (t) {
            return new fs(void 0, t);
          }),
          (fs.updateTime = function (t) {
            return new fs(t);
          }),
          Object.defineProperty(fs.prototype, "isNone", {
            get: function () {
              return void 0 === this.updateTime && void 0 === this.exists;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (fs.prototype.isEqual = function (t) {
            return (
              this.exists === t.exists &&
              (this.updateTime
                ? !!t.updateTime && this.updateTime.isEqual(t.updateTime)
                : !t.updateTime)
            );
          }),
          fs);
      function fs(t, e) {
        (this.updateTime = t), (this.exists = e);
      }
      function ds(t, e) {
        return void 0 !== t.updateTime
          ? e.isFoundDocument() && e.version.isEqual(t.updateTime)
          : void 0 === t.exists || t.exists === e.isFoundDocument();
      }
      C = function () {};
      function ps(t, e, n) {
        var r, i, o, s;
        t instanceof ws
          ? ((i = e),
            (o = n),
            ds((r = t).precondition, i) &&
              ((s = r.value.clone()),
              (o = Ss(r.fieldTransforms, o, i)),
              s.setAll(o),
              i.convertToFoundDocument(gs(i), s).setHasLocalMutations()))
          : t instanceof bs
          ? ((o = e),
            (i = n),
            ds((s = t).precondition, o) &&
              ((n = Ss(s.fieldTransforms, i, o)),
              (i = o.data).setAll(Is(s)),
              i.setAll(n),
              o.convertToFoundDocument(gs(o), i).setHasLocalMutations()))
          : ((e = e), ds(t.precondition, e) && e.convertToNoDocument(Zr.min()));
      }
      function ys(t, e) {
        return (
          t.type === e.type &&
          !!t.key.isEqual(e.key) &&
          !!t.precondition.isEqual(e.precondition) &&
          ((n = t.fieldTransforms),
          (r = e.fieldTransforms),
          !!(
            (void 0 === n && void 0 === r) ||
            (n &&
              r &&
              Xr(n, r, function (t, e) {
                return (
                  (e = e),
                  (t = t).field.isEqual(e.field) &&
                    ((t = t.transform),
                    (e = e.transform),
                    (t instanceof Xo && e instanceof Xo) ||
                    (t instanceof es && e instanceof es)
                      ? Xr(t.elements, e.elements, Ci)
                      : t instanceof os && e instanceof os
                      ? Ci(t.A, e.A)
                      : t instanceof Yo && e instanceof Yo)
                );
              }))
          )) &&
          (0 === t.type
            ? t.value.isEqual(e.value)
            : 1 !== t.type ||
              (t.data.isEqual(e.data) && t.fieldMask.isEqual(e.fieldMask)))
        );
        var n, r;
      }
      function gs(t) {
        return t.isFoundDocument() ? t.version : Zr.min();
      }
      var ms,
        vs,
        ws = (n(Ts, (vs = C)), Ts),
        bs = (n(Es, (ms = C)), Es);
      function Es(t, e, n, r, i) {
        void 0 === i && (i = []);
        var o = this;
        return (
          ((o = ms.call(this) || this).key = t),
          (o.data = e),
          (o.fieldMask = n),
          (o.precondition = r),
          (o.fieldTransforms = i),
          (o.type = 1),
          o
        );
      }
      function Ts(t, e, n, r) {
        void 0 === r && (r = []);
        var i = this;
        return (
          ((i = vs.call(this) || this).key = t),
          (i.value = e),
          (i.precondition = n),
          (i.fieldTransforms = r),
          (i.type = 0),
          i
        );
      }
      function Is(n) {
        var r = new Map();
        return (
          n.fieldMask.fields.forEach(function (t) {
            var e;
            t.isEmpty() || ((e = n.data.field(t)), r.set(t, e));
          }),
          r
        );
      }
      function _s(t, e, n) {
        var r = new Map();
        Hr(t.length === n.length);
        for (var i = 0; i < n.length; i++) {
          var o = t[i],
            s = o.transform,
            a = e.data.field(o.field);
          r.set(
            o.field,
            ((o = s),
            (s = a),
            (a = n[i]),
            o instanceof Xo ? Zo(o, s) : o instanceof es ? rs(o, s) : a)
          );
        }
        return r;
      }
      function Ss(t, e, n) {
        for (var r, i = new Map(), o = 0, s = t; o < s.length; o++) {
          var a = s[o],
            u = a.transform,
            c = n.data.field(a.field);
          i.set(
            a.field,
            ((r = c),
            (a = e),
            (c = void 0),
            (u = u) instanceof Yo
              ? ((c = {
                  fields: {
                    __type__: { stringValue: "server_timestamp" },
                    __local_write_time__: {
                      timestampValue: {
                        seconds: a.seconds,
                        nanos: a.nanoseconds,
                      },
                    },
                  },
                }),
                r && (c.fields.__previous_value__ = r),
                { mapValue: c })
              : u instanceof Xo
              ? Zo(u, r)
              : u instanceof es
              ? rs(u, r)
              : ((u = Ho((c = u), r)),
                (r = as(u) + as(c.A)),
                Pi(u) && Pi(c.A) ? Go(r) : Ko(c.R, r)))
          );
        }
        return i;
      }
      function As(t) {
        this.count = t;
      }
      var Ds,
        Ns,
        Cs,
        ks = (n(Os, (Cs = C)), Os),
        Rs = (n(xs, (Ns = C)), xs);
      function xs(t, e) {
        var n = this;
        return (
          ((n = Ns.call(this) || this).key = t),
          (n.precondition = e),
          (n.type = 3),
          (n.fieldTransforms = []),
          n
        );
      }
      function Os(t, e) {
        var n = this;
        return (
          ((n = Cs.call(this) || this).key = t),
          (n.precondition = e),
          (n.type = 2),
          (n.fieldTransforms = []),
          n
        );
      }
      function Ls(t) {
        switch (t) {
          case Mr.OK:
            return Qr(), 0;
          case Mr.CANCELLED:
          case Mr.UNKNOWN:
          case Mr.DEADLINE_EXCEEDED:
          case Mr.RESOURCE_EXHAUSTED:
          case Mr.INTERNAL:
          case Mr.UNAVAILABLE:
          case Mr.UNAUTHENTICATED:
            return;
          case Mr.INVALID_ARGUMENT:
          case Mr.NOT_FOUND:
          case Mr.ALREADY_EXISTS:
          case Mr.PERMISSION_DENIED:
          case Mr.FAILED_PRECONDITION:
          case Mr.ABORTED:
          case Mr.OUT_OF_RANGE:
          case Mr.UNIMPLEMENTED:
          case Mr.DATA_LOSS:
            return 1;
          default:
            return Qr(), 0;
        }
      }
      function Ps(t) {
        if (void 0 === t) return jr("GRPC error has no .code"), Mr.UNKNOWN;
        switch (t) {
          case Ds.OK:
            return Mr.OK;
          case Ds.CANCELLED:
            return Mr.CANCELLED;
          case Ds.UNKNOWN:
            return Mr.UNKNOWN;
          case Ds.DEADLINE_EXCEEDED:
            return Mr.DEADLINE_EXCEEDED;
          case Ds.RESOURCE_EXHAUSTED:
            return Mr.RESOURCE_EXHAUSTED;
          case Ds.INTERNAL:
            return Mr.INTERNAL;
          case Ds.UNAVAILABLE:
            return Mr.UNAVAILABLE;
          case Ds.UNAUTHENTICATED:
            return Mr.UNAUTHENTICATED;
          case Ds.INVALID_ARGUMENT:
            return Mr.INVALID_ARGUMENT;
          case Ds.NOT_FOUND:
            return Mr.NOT_FOUND;
          case Ds.ALREADY_EXISTS:
            return Mr.ALREADY_EXISTS;
          case Ds.PERMISSION_DENIED:
            return Mr.PERMISSION_DENIED;
          case Ds.FAILED_PRECONDITION:
            return Mr.FAILED_PRECONDITION;
          case Ds.ABORTED:
            return Mr.ABORTED;
          case Ds.OUT_OF_RANGE:
            return Mr.OUT_OF_RANGE;
          case Ds.UNIMPLEMENTED:
            return Mr.UNIMPLEMENTED;
          case Ds.DATA_LOSS:
            return Mr.DATA_LOSS;
          default:
            return Qr();
        }
      }
      ((_ = Ds = Ds || {})[(_.OK = 0)] = "OK"),
        (_[(_.CANCELLED = 1)] = "CANCELLED"),
        (_[(_.UNKNOWN = 2)] = "UNKNOWN"),
        (_[(_.INVALID_ARGUMENT = 3)] = "INVALID_ARGUMENT"),
        (_[(_.DEADLINE_EXCEEDED = 4)] = "DEADLINE_EXCEEDED"),
        (_[(_.NOT_FOUND = 5)] = "NOT_FOUND"),
        (_[(_.ALREADY_EXISTS = 6)] = "ALREADY_EXISTS"),
        (_[(_.PERMISSION_DENIED = 7)] = "PERMISSION_DENIED"),
        (_[(_.UNAUTHENTICATED = 16)] = "UNAUTHENTICATED"),
        (_[(_.RESOURCE_EXHAUSTED = 8)] = "RESOURCE_EXHAUSTED"),
        (_[(_.FAILED_PRECONDITION = 9)] = "FAILED_PRECONDITION"),
        (_[(_.ABORTED = 10)] = "ABORTED"),
        (_[(_.OUT_OF_RANGE = 11)] = "OUT_OF_RANGE"),
        (_[(_.UNIMPLEMENTED = 12)] = "UNIMPLEMENTED"),
        (_[(_.INTERNAL = 13)] = "INTERNAL"),
        (_[(_.UNAVAILABLE = 14)] = "UNAVAILABLE"),
        (_[(_.DATA_LOSS = 15)] = "DATA_LOSS");
      var Ms =
          ((Bs.prototype.insert = function (t, e) {
            return new Bs(
              this.comparator,
              this.root
                .insert(t, e, this.comparator)
                .copy(null, null, Vs.BLACK, null, null)
            );
          }),
          (Bs.prototype.remove = function (t) {
            return new Bs(
              this.comparator,
              this.root
                .remove(t, this.comparator)
                .copy(null, null, Vs.BLACK, null, null)
            );
          }),
          (Bs.prototype.get = function (t) {
            for (var e = this.root; !e.isEmpty(); ) {
              var n = this.comparator(t, e.key);
              if (0 === n) return e.value;
              n < 0 ? (e = e.left) : 0 < n && (e = e.right);
            }
            return null;
          }),
          (Bs.prototype.indexOf = function (t) {
            for (var e = 0, n = this.root; !n.isEmpty(); ) {
              var r = this.comparator(t, n.key);
              if (0 === r) return e + n.left.size;
              n = r < 0 ? n.left : ((e += n.left.size + 1), n.right);
            }
            return -1;
          }),
          (Bs.prototype.isEmpty = function () {
            return this.root.isEmpty();
          }),
          Object.defineProperty(Bs.prototype, "size", {
            get: function () {
              return this.root.size;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Bs.prototype.minKey = function () {
            return this.root.minKey();
          }),
          (Bs.prototype.maxKey = function () {
            return this.root.maxKey();
          }),
          (Bs.prototype.inorderTraversal = function (t) {
            return this.root.inorderTraversal(t);
          }),
          (Bs.prototype.forEach = function (n) {
            this.inorderTraversal(function (t, e) {
              return n(t, e), !1;
            });
          }),
          (Bs.prototype.toString = function () {
            var n = [];
            return (
              this.inorderTraversal(function (t, e) {
                return n.push(t + ":" + e), !1;
              }),
              "{" + n.join(", ") + "}"
            );
          }),
          (Bs.prototype.reverseTraversal = function (t) {
            return this.root.reverseTraversal(t);
          }),
          (Bs.prototype.getIterator = function () {
            return new Fs(this.root, null, this.comparator, !1);
          }),
          (Bs.prototype.getIteratorFrom = function (t) {
            return new Fs(this.root, t, this.comparator, !1);
          }),
          (Bs.prototype.getReverseIterator = function () {
            return new Fs(this.root, null, this.comparator, !0);
          }),
          (Bs.prototype.getReverseIteratorFrom = function (t) {
            return new Fs(this.root, t, this.comparator, !0);
          }),
          Bs),
        Fs =
          ((qs.prototype.getNext = function () {
            var t = this.nodeStack.pop(),
              e = { key: t.key, value: t.value };
            if (this.isReverse)
              for (t = t.left; !t.isEmpty(); )
                this.nodeStack.push(t), (t = t.right);
            else
              for (t = t.right; !t.isEmpty(); )
                this.nodeStack.push(t), (t = t.left);
            return e;
          }),
          (qs.prototype.hasNext = function () {
            return 0 < this.nodeStack.length;
          }),
          (qs.prototype.peek = function () {
            if (0 === this.nodeStack.length) return null;
            var t = this.nodeStack[this.nodeStack.length - 1];
            return { key: t.key, value: t.value };
          }),
          qs),
        Vs =
          ((Us.prototype.copy = function (t, e, n, r, i) {
            return new Us(
              null != t ? t : this.key,
              null != e ? e : this.value,
              null != n ? n : this.color,
              null != r ? r : this.left,
              null != i ? i : this.right
            );
          }),
          (Us.prototype.isEmpty = function () {
            return !1;
          }),
          (Us.prototype.inorderTraversal = function (t) {
            return (
              this.left.inorderTraversal(t) ||
              t(this.key, this.value) ||
              this.right.inorderTraversal(t)
            );
          }),
          (Us.prototype.reverseTraversal = function (t) {
            return (
              this.right.reverseTraversal(t) ||
              t(this.key, this.value) ||
              this.left.reverseTraversal(t)
            );
          }),
          (Us.prototype.min = function () {
            return this.left.isEmpty() ? this : this.left.min();
          }),
          (Us.prototype.minKey = function () {
            return this.min().key;
          }),
          (Us.prototype.maxKey = function () {
            return this.right.isEmpty() ? this.key : this.right.maxKey();
          }),
          (Us.prototype.insert = function (t, e, n) {
            var r = this,
              i = n(t, r.key);
            return (r =
              i < 0
                ? r.copy(null, null, null, r.left.insert(t, e, n), null)
                : 0 === i
                ? r.copy(null, e, null, null, null)
                : r.copy(
                    null,
                    null,
                    null,
                    null,
                    r.right.insert(t, e, n)
                  )).fixUp();
          }),
          (Us.prototype.removeMin = function () {
            if (this.left.isEmpty()) return Us.EMPTY;
            var t = this;
            return (t = (t =
              !t.left.isRed() && !t.left.left.isRed()
                ? t.moveRedLeft()
                : t).copy(null, null, null, t.left.removeMin(), null)).fixUp();
          }),
          (Us.prototype.remove = function (t, e) {
            var n,
              r = this;
            if (e(t, r.key) < 0)
              r = (r = !(
                r.left.isEmpty() ||
                r.left.isRed() ||
                r.left.left.isRed()
              )
                ? r.moveRedLeft()
                : r).copy(null, null, null, r.left.remove(t, e), null);
            else {
              if (
                0 ===
                e(
                  t,
                  (r = !(
                    (r = r.left.isRed()
                      ? r.rotateRight()
                      : r).right.isEmpty() ||
                    r.right.isRed() ||
                    r.right.left.isRed()
                  )
                    ? r.moveRedRight()
                    : r).key
                )
              ) {
                if (r.right.isEmpty()) return Us.EMPTY;
                (n = r.right.min()),
                  (r = r.copy(n.key, n.value, null, null, r.right.removeMin()));
              }
              r = r.copy(null, null, null, null, r.right.remove(t, e));
            }
            return r.fixUp();
          }),
          (Us.prototype.isRed = function () {
            return this.color;
          }),
          (Us.prototype.fixUp = function () {
            var t = this;
            return (t =
              (t =
                (t =
                  t.right.isRed() && !t.left.isRed()
                    ? t.rotateLeft()
                    : t).left.isRed() && t.left.left.isRed()
                  ? t.rotateRight()
                  : t).left.isRed() && t.right.isRed()
                ? t.colorFlip()
                : t);
          }),
          (Us.prototype.moveRedLeft = function () {
            var t = this.colorFlip();
            return (t = t.right.left.isRed()
              ? (t = (t = t.copy(
                  null,
                  null,
                  null,
                  null,
                  t.right.rotateRight()
                )).rotateLeft()).colorFlip()
              : t);
          }),
          (Us.prototype.moveRedRight = function () {
            var t = this.colorFlip();
            return (t = t.left.left.isRed()
              ? (t = t.rotateRight()).colorFlip()
              : t);
          }),
          (Us.prototype.rotateLeft = function () {
            var t = this.copy(null, null, Us.RED, null, this.right.left);
            return this.right.copy(null, null, this.color, t, null);
          }),
          (Us.prototype.rotateRight = function () {
            var t = this.copy(null, null, Us.RED, this.left.right, null);
            return this.left.copy(null, null, this.color, null, t);
          }),
          (Us.prototype.colorFlip = function () {
            var t = this.left.copy(null, null, !this.left.color, null, null),
              e = this.right.copy(null, null, !this.right.color, null, null);
            return this.copy(null, null, !this.color, t, e);
          }),
          (Us.prototype.checkMaxDepth = function () {
            var t = this.check();
            return Math.pow(2, t) <= this.size + 1;
          }),
          (Us.prototype.check = function () {
            if (this.isRed() && this.left.isRed()) throw Qr();
            if (this.right.isRed()) throw Qr();
            var t = this.left.check();
            if (t !== this.right.check()) throw Qr();
            return t + (this.isRed() ? 0 : 1);
          }),
          Us);
      function Us(t, e, n, r, i) {
        (this.key = t),
          (this.value = e),
          (this.color = null != n ? n : Us.RED),
          (this.left = null != r ? r : Us.EMPTY),
          (this.right = null != i ? i : Us.EMPTY),
          (this.size = this.left.size + 1 + this.right.size);
      }
      function qs(t, e, n, r) {
        (this.isReverse = r), (this.nodeStack = []);
        for (var i = 1; !t.isEmpty(); )
          if (((i = e ? n(t.key, e) : 1), r && (i *= -1), i < 0))
            t = this.isReverse ? t.left : t.right;
          else {
            if (0 === i) {
              this.nodeStack.push(t);
              break;
            }
            this.nodeStack.push(t), (t = this.isReverse ? t.right : t.left);
          }
      }
      function Bs(t, e) {
        (this.comparator = t), (this.root = e || Vs.EMPTY);
      }
      function js() {
        this.size = 0;
      }
      (Vs.EMPTY = null),
        (Vs.RED = !0),
        (Vs.BLACK = !1),
        (Vs.EMPTY =
          (Object.defineProperty(js.prototype, "key", {
            get: function () {
              throw Qr();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(js.prototype, "value", {
            get: function () {
              throw Qr();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(js.prototype, "color", {
            get: function () {
              throw Qr();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(js.prototype, "left", {
            get: function () {
              throw Qr();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(js.prototype, "right", {
            get: function () {
              throw Qr();
            },
            enumerable: !1,
            configurable: !0,
          }),
          (js.prototype.copy = function (t, e, n, r, i) {
            return this;
          }),
          (js.prototype.insert = function (t, e, n) {
            return new Vs(t, e);
          }),
          (js.prototype.remove = function (t, e) {
            return this;
          }),
          (js.prototype.isEmpty = function () {
            return !0;
          }),
          (js.prototype.inorderTraversal = function (t) {
            return !1;
          }),
          (js.prototype.reverseTraversal = function (t) {
            return !1;
          }),
          (js.prototype.minKey = function () {
            return null;
          }),
          (js.prototype.maxKey = function () {
            return null;
          }),
          (js.prototype.isRed = function () {
            return !1;
          }),
          (js.prototype.checkMaxDepth = function () {
            return !0;
          }),
          (js.prototype.check = function () {
            return 0;
          }),
          new js()));
      var Ks =
          ((zs.prototype.has = function (t) {
            return null !== this.data.get(t);
          }),
          (zs.prototype.first = function () {
            return this.data.minKey();
          }),
          (zs.prototype.last = function () {
            return this.data.maxKey();
          }),
          Object.defineProperty(zs.prototype, "size", {
            get: function () {
              return this.data.size;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (zs.prototype.indexOf = function (t) {
            return this.data.indexOf(t);
          }),
          (zs.prototype.forEach = function (n) {
            this.data.inorderTraversal(function (t, e) {
              return n(t), !1;
            });
          }),
          (zs.prototype.forEachInRange = function (t, e) {
            for (var n = this.data.getIteratorFrom(t[0]); n.hasNext(); ) {
              var r = n.getNext();
              if (0 <= this.comparator(r.key, t[1])) return;
              e(r.key);
            }
          }),
          (zs.prototype.forEachWhile = function (t, e) {
            for (
              var n =
                void 0 !== e
                  ? this.data.getIteratorFrom(e)
                  : this.data.getIterator();
              n.hasNext();

            )
              if (!t(n.getNext().key)) return;
          }),
          (zs.prototype.firstAfterOrEqual = function (t) {
            t = this.data.getIteratorFrom(t);
            return t.hasNext() ? t.getNext().key : null;
          }),
          (zs.prototype.getIterator = function () {
            return new Gs(this.data.getIterator());
          }),
          (zs.prototype.getIteratorFrom = function (t) {
            return new Gs(this.data.getIteratorFrom(t));
          }),
          (zs.prototype.add = function (t) {
            return this.copy(this.data.remove(t).insert(t, !0));
          }),
          (zs.prototype.delete = function (t) {
            return this.has(t) ? this.copy(this.data.remove(t)) : this;
          }),
          (zs.prototype.isEmpty = function () {
            return this.data.isEmpty();
          }),
          (zs.prototype.unionWith = function (t) {
            var e = this;
            return (
              e.size < t.size && ((e = t), (t = this)),
              t.forEach(function (t) {
                e = e.add(t);
              }),
              e
            );
          }),
          (zs.prototype.isEqual = function (t) {
            if (!(t instanceof zs)) return !1;
            if (this.size !== t.size) return !1;
            for (
              var e = this.data.getIterator(), n = t.data.getIterator();
              e.hasNext();

            ) {
              var r = e.getNext().key,
                i = n.getNext().key;
              if (0 !== this.comparator(r, i)) return !1;
            }
            return !0;
          }),
          (zs.prototype.toArray = function () {
            var e = [];
            return (
              this.forEach(function (t) {
                e.push(t);
              }),
              e
            );
          }),
          (zs.prototype.toString = function () {
            var e = [];
            return (
              this.forEach(function (t) {
                return e.push(t);
              }),
              "SortedSet(" + e.toString() + ")"
            );
          }),
          (zs.prototype.copy = function (t) {
            var e = new zs(this.comparator);
            return (e.data = t), e;
          }),
          zs),
        Gs =
          ((Hs.prototype.getNext = function () {
            return this.iter.getNext().key;
          }),
          (Hs.prototype.hasNext = function () {
            return this.iter.hasNext();
          }),
          Hs),
        Qs = new Ms(Ai.comparator);
      function Hs(t) {
        this.iter = t;
      }
      function zs(t) {
        (this.comparator = t), (this.data = new Ms(this.comparator));
      }
      var Ws = new Ms(Ai.comparator);
      var Ys = new Ms(Ai.comparator);
      var Xs = new Ks(Ai.comparator);
      function $s() {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        for (var n = Xs, r = 0, i = t; r < i.length; r++)
          var o = i[r], n = n.add(o);
        return n;
      }
      var Js = new Ks(Yr);
      var Zs =
          ((ca.createSynthesizedRemoteEventForCurrentChange = function (t, e) {
            var n = new Map();
            return (
              n.set(t, ta.createSynthesizedTargetChangeForCurrentChange(t, e)),
              new ca(Zr.min(), n, Js, Qs, $s())
            );
          }),
          ca),
        ta =
          ((ua.createSynthesizedTargetChangeForCurrentChange = function (t, e) {
            return new ua(li.EMPTY_BYTE_STRING, e, $s(), $s(), $s());
          }),
          ua),
        ea = function (t, e, n, r) {
          (this.v = t),
            (this.removedTargetIds = e),
            (this.key = n),
            (this.P = r);
        },
        na = function (t, e) {
          (this.targetId = t), (this.V = e);
        },
        ra = function (t, e, n, r) {
          void 0 === n && (n = li.EMPTY_BYTE_STRING),
            void 0 === r && (r = null),
            (this.state = t),
            (this.targetIds = e),
            (this.resumeToken = n),
            (this.cause = r);
        },
        ia =
          (Object.defineProperty(aa.prototype, "current", {
            get: function () {
              return this.N;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(aa.prototype, "resumeToken", {
            get: function () {
              return this.C;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(aa.prototype, "k", {
            get: function () {
              return 0 !== this.S;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(aa.prototype, "$", {
            get: function () {
              return this.F;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (aa.prototype.O = function (t) {
            0 < t.approximateByteSize() && ((this.F = !0), (this.C = t));
          }),
          (aa.prototype.M = function () {
            var n = $s(),
              r = $s(),
              i = $s();
            return (
              this.D.forEach(function (t, e) {
                switch (e) {
                  case 0:
                    n = n.add(t);
                    break;
                  case 2:
                    r = r.add(t);
                    break;
                  case 1:
                    i = i.add(t);
                    break;
                  default:
                    Qr();
                }
              }),
              new ta(this.C, this.N, n, r, i)
            );
          }),
          (aa.prototype.L = function () {
            (this.F = !1), (this.D = la());
          }),
          (aa.prototype.B = function (t, e) {
            (this.F = !0), (this.D = this.D.insert(t, e));
          }),
          (aa.prototype.q = function (t) {
            (this.F = !0), (this.D = this.D.remove(t));
          }),
          (aa.prototype.U = function () {
            this.S += 1;
          }),
          (aa.prototype.K = function () {
            --this.S;
          }),
          (aa.prototype.j = function () {
            (this.F = !0), (this.N = !0);
          }),
          aa),
        oa =
          ((sa.prototype.X = function (t) {
            for (var e = 0, n = t.v; e < n.length; e++) {
              var r = n[e];
              t.P && t.P.isFoundDocument()
                ? this.Z(r, t.P)
                : this.tt(r, t.key, t.P);
            }
            for (var i = 0, o = t.removedTargetIds; i < o.length; i++)
              (r = o[i]), this.tt(r, t.key, t.P);
          }),
          (sa.prototype.et = function (n) {
            var r = this;
            this.forEachTarget(n, function (t) {
              var e = r.nt(t);
              switch (n.state) {
                case 0:
                  r.st(t) && e.O(n.resumeToken);
                  break;
                case 1:
                  e.K(), e.k || e.L(), e.O(n.resumeToken);
                  break;
                case 2:
                  e.K(), e.k || r.removeTarget(t);
                  break;
                case 3:
                  r.st(t) && (e.j(), e.O(n.resumeToken));
                  break;
                case 4:
                  r.st(t) && (r.it(t), e.O(n.resumeToken));
                  break;
                default:
                  Qr();
              }
            });
          }),
          (sa.prototype.forEachTarget = function (t, n) {
            var r = this;
            0 < t.targetIds.length
              ? t.targetIds.forEach(n)
              : this.G.forEach(function (t, e) {
                  r.st(e) && n(e);
                });
          }),
          (sa.prototype.rt = function (t) {
            var e = t.targetId,
              n = t.V.count,
              t = this.ot(e);
            t &&
              (Yi((t = t.target))
                ? 0 === n
                  ? ((t = new Ai(t.path)),
                    this.tt(e, t, Ki.newNoDocument(t, Zr.min())))
                  : Hr(1 === n)
                : this.ct(e) !== n && (this.it(e), (this.Y = this.Y.add(e))));
          }),
          (sa.prototype.ut = function (r) {
            var i = this,
              o = new Map();
            this.G.forEach(function (t, e) {
              var n = i.ot(e);
              n &&
                (t.current &&
                  Yi(n.target) &&
                  ((n = new Ai(n.target.path)),
                  null !== i.H.get(n) ||
                    i.at(e, n) ||
                    i.tt(e, n, Ki.newNoDocument(n, r))),
                t.$ && (o.set(e, t.M()), t.L()));
            });
            var s = $s();
            this.J.forEach(function (t, e) {
              var n = !0;
              e.forEachWhile(function (t) {
                t = i.ot(t);
                return !t || 2 === t.purpose || (n = !1);
              }),
                n && (s = s.add(t));
            });
            var t = new Zs(r, o, this.Y, this.H, s);
            return (this.H = Qs), (this.J = ha()), (this.Y = new Ks(Yr)), t;
          }),
          (sa.prototype.Z = function (t, e) {
            var n;
            this.st(t) &&
              ((n = this.at(t, e.key) ? 2 : 0),
              this.nt(t).B(e.key, n),
              (this.H = this.H.insert(e.key, e)),
              (this.J = this.J.insert(e.key, this.ht(e.key).add(t))));
          }),
          (sa.prototype.tt = function (t, e, n) {
            var r;
            this.st(t) &&
              ((r = this.nt(t)),
              this.at(t, e) ? r.B(e, 1) : r.q(e),
              (this.J = this.J.insert(e, this.ht(e).delete(t))),
              n && (this.H = this.H.insert(e, n)));
          }),
          (sa.prototype.removeTarget = function (t) {
            this.G.delete(t);
          }),
          (sa.prototype.ct = function (t) {
            var e = this.nt(t).M();
            return (
              this.W.getRemoteKeysForTarget(t).size +
              e.addedDocuments.size -
              e.removedDocuments.size
            );
          }),
          (sa.prototype.U = function (t) {
            this.nt(t).U();
          }),
          (sa.prototype.nt = function (t) {
            var e = this.G.get(t);
            return e || ((e = new ia()), this.G.set(t, e)), e;
          }),
          (sa.prototype.ht = function (t) {
            var e = this.J.get(t);
            return e || ((e = new Ks(Yr)), (this.J = this.J.insert(t, e))), e;
          }),
          (sa.prototype.st = function (t) {
            var e = null !== this.ot(t);
            return (
              e || Br("WatchChangeAggregator", "Detected inactive target", t), e
            );
          }),
          (sa.prototype.ot = function (t) {
            var e = this.G.get(t);
            return e && e.k ? null : this.W.lt(t);
          }),
          (sa.prototype.it = function (e) {
            var n = this;
            this.G.set(e, new ia()),
              this.W.getRemoteKeysForTarget(e).forEach(function (t) {
                n.tt(e, t, null);
              });
          }),
          (sa.prototype.at = function (t, e) {
            return this.W.getRemoteKeysForTarget(t).has(e);
          }),
          sa);
      function sa(t) {
        (this.W = t),
          (this.G = new Map()),
          (this.H = Qs),
          (this.J = ha()),
          (this.Y = new Ks(Yr));
      }
      function aa() {
        (this.S = 0),
          (this.D = la()),
          (this.C = li.EMPTY_BYTE_STRING),
          (this.N = !1),
          (this.F = !0);
      }
      function ua(t, e, n, r, i) {
        (this.resumeToken = t),
          (this.current = e),
          (this.addedDocuments = n),
          (this.modifiedDocuments = r),
          (this.removedDocuments = i);
      }
      function ca(t, e, n, r, i) {
        (this.snapshotVersion = t),
          (this.targetChanges = e),
          (this.targetMismatches = n),
          (this.documentUpdates = r),
          (this.resolvedLimboDocuments = i);
      }
      function ha() {
        return new Ms(Ai.comparator);
      }
      function la() {
        return new Ms(Ai.comparator);
      }
      var fa = { asc: "ASCENDING", desc: "DESCENDING" },
        da = {
          "<": "LESS_THAN",
          "<=": "LESS_THAN_OR_EQUAL",
          ">": "GREATER_THAN",
          ">=": "GREATER_THAN_OR_EQUAL",
          "==": "EQUAL",
          "!=": "NOT_EQUAL",
          "array-contains": "ARRAY_CONTAINS",
          in: "IN",
          "not-in": "NOT_IN",
          "array-contains-any": "ARRAY_CONTAINS_ANY",
        },
        pa = function (t, e) {
          (this.databaseId = t), (this.I = e);
        };
      function ya(t, e) {
        return t.I
          ? new Date(1e3 * e.seconds)
              .toISOString()
              .replace(/\.\d*/, "")
              .replace("Z", "") +
              "." +
              ("000000000" + e.nanoseconds).slice(-9) +
              "Z"
          : { seconds: "" + e.seconds, nanos: e.nanoseconds };
      }
      function ga(t, e) {
        return t.I ? e.toBase64() : e.toUint8Array();
      }
      function ma(t) {
        return (
          Hr(!!t), Zr.fromTimestamp(((t = vi(t)), new Jr(t.seconds, t.nanos)))
        );
      }
      function va(t, e) {
        return new ai(["projects", t.projectId, "databases", t.database])
          .child("documents")
          .child(e)
          .canonicalString();
      }
      function wa(t) {
        t = ai.fromString(t);
        return Hr(Ua(t)), t;
      }
      function ba(t, e) {
        return va(t.databaseId, e.path);
      }
      function Ea(t, e) {
        e = wa(e);
        if (e.get(1) !== t.databaseId.projectId)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Tried to deserialize key from different project: " +
              e.get(1) +
              " vs " +
              t.databaseId.projectId
          );
        if (e.get(3) !== t.databaseId.database)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Tried to deserialize key from different database: " +
              e.get(3) +
              " vs " +
              t.databaseId.database
          );
        return new Ai(Sa(e));
      }
      function Ta(t, e) {
        return va(t.databaseId, e);
      }
      function Ia(t) {
        t = wa(t);
        return 4 === t.length ? ai.emptyPath() : Sa(t);
      }
      function _a(t) {
        return new ai([
          "projects",
          t.databaseId.projectId,
          "databases",
          t.databaseId.database,
        ]).canonicalString();
      }
      function Sa(t) {
        return Hr(4 < t.length && "documents" === t.get(4)), t.popFirst(5);
      }
      function Aa(t, e, n) {
        return { name: ba(t, e), fields: n.value.mapValue.fields };
      }
      function Da(t, e, n) {
        var r = Ea(t, e.name),
          t = ma(e.updateTime),
          e = new Bi({ mapValue: { fields: e.fields } }),
          e = Ki.newFoundDocument(r, t, e);
        return (
          n && e.setHasCommittedMutations(),
          n ? e.setHasCommittedMutations() : e
        );
      }
      function Na(t, e) {
        var n, r, i;
        if (e instanceof ws) n = { update: Aa(t, e.key, e.value) };
        else if (e instanceof ks) n = { delete: ba(t, e.key) };
        else if (e instanceof bs)
          n = {
            update: Aa(t, e.key, e.data),
            updateMask:
              ((r = e.fieldMask),
              (i = []),
              r.fields.forEach(function (t) {
                return i.push(t.canonicalString());
              }),
              { fieldPaths: i }),
          };
        else {
          if (!(e instanceof Rs)) return Qr();
          n = { verify: ba(t, e.key) };
        }
        return (
          0 < e.fieldTransforms.length &&
            (n.updateTransforms = e.fieldTransforms.map(function (t) {
              var e = t.transform;
              if (e instanceof Yo)
                return {
                  fieldPath: t.field.canonicalString(),
                  setToServerValue: "REQUEST_TIME",
                };
              if (e instanceof Xo)
                return {
                  fieldPath: t.field.canonicalString(),
                  appendMissingElements: { values: e.elements },
                };
              if (e instanceof es)
                return {
                  fieldPath: t.field.canonicalString(),
                  removeAllFromArray: { values: e.elements },
                };
              if (e instanceof os)
                return { fieldPath: t.field.canonicalString(), increment: e.A };
              throw Qr();
            })),
          e.precondition.isNone ||
            (n.currentDocument =
              void 0 !== (e = e.precondition).updateTime
                ? { updateTime: ya(t, e.updateTime.toTimestamp()) }
                : void 0 !== e.exists
                ? { exists: e.exists }
                : Qr()),
          n
        );
      }
      function Ca(e, t) {
        var n = t.currentDocument
            ? void 0 !== (s = t.currentDocument).updateTime
              ? ls.updateTime(ma(s.updateTime))
              : void 0 !== s.exists
              ? ls.exists(s.exists)
              : ls.none()
            : ls.none(),
          r = t.updateTransforms
            ? t.updateTransforms.map(function (t) {
                return (function (t, e) {
                  var n,
                    r = null;
                  "setToServerValue" in e
                    ? (Hr("REQUEST_TIME" === e.setToServerValue),
                      (r = new Yo()))
                    : "appendMissingElements" in e
                    ? ((n = e.appendMissingElements.values || []),
                      (r = new Xo(n)))
                    : "removeAllFromArray" in e
                    ? ((n = e.removeAllFromArray.values || []), (r = new es(n)))
                    : "increment" in e
                    ? (r = new os(t, e.increment))
                    : Qr();
                  e = ci.fromServerFormat(e.fieldPath);
                  return new hs(e, r);
                })(e, t);
              })
            : [];
        if (t.update) {
          t.update.name;
          var i = Ea(e, t.update.name),
            o = new Bi({ mapValue: { fields: t.update.fields } });
          if (t.updateMask) {
            var s =
              ((s = t.updateMask.fieldPaths || []),
              new hi(
                s.map(function (t) {
                  return ci.fromServerFormat(t);
                })
              ));
            return new bs(i, o, s, n, r);
          }
          return new ws(i, o, n, r);
        }
        if (t.delete) {
          r = Ea(e, t.delete);
          return new ks(r, n);
        }
        if (t.verify) {
          t = Ea(e, t.verify);
          return new Rs(t, n);
        }
        return Qr();
      }
      function ka(t, e) {
        return { documents: [Ta(t, e.path)] };
      }
      function Ra(t, e) {
        var n = { structuredQuery: {} },
          r = e.path;
        null !== e.collectionGroup
          ? ((n.parent = Ta(t, r)),
            (n.structuredQuery.from = [
              { collectionId: e.collectionGroup, allDescendants: !0 },
            ]))
          : ((n.parent = Ta(t, r.popLast())),
            (n.structuredQuery.from = [{ collectionId: r.lastSegment() }]));
        r = (function (t) {
          if (0 !== t.length) {
            t = t.map(function (t) {
              if ("==" === t.op) {
                if (Vi(t.value))
                  return { unaryFilter: { field: Pa(t.field), op: "IS_NAN" } };
                if (Fi(t.value))
                  return { unaryFilter: { field: Pa(t.field), op: "IS_NULL" } };
              } else if ("!=" === t.op) {
                if (Vi(t.value))
                  return {
                    unaryFilter: { field: Pa(t.field), op: "IS_NOT_NAN" },
                  };
                if (Fi(t.value))
                  return {
                    unaryFilter: { field: Pa(t.field), op: "IS_NOT_NULL" },
                  };
              }
              return {
                fieldFilter: {
                  field: Pa(t.field),
                  op: ((e = t.op), da[e]),
                  value: t.value,
                },
              };
              var e;
            });
            return 1 === t.length
              ? t[0]
              : { compositeFilter: { op: "AND", filters: t } };
          }
        })(e.filters);
        r && (n.structuredQuery.where = r);
        r = (function (t) {
          if (0 !== t.length)
            return t.map(function (t) {
              return {
                field: Pa((t = t).field),
                direction: ((t = t.dir), fa[t]),
              };
            });
        })(e.orderBy);
        r && (n.structuredQuery.orderBy = r);
        (r = e.limit), (r = t.I || Ii(r) ? r : { value: r });
        return (
          null !== r && (n.structuredQuery.limit = r),
          e.startAt && (n.structuredQuery.startAt = Oa(e.startAt)),
          e.endAt && (n.structuredQuery.endAt = Oa(e.endAt)),
          n
        );
      }
      function xa(t) {
        var e = Ia(t.parent),
          n = t.structuredQuery,
          r = n.from ? n.from.length : 0,
          i = null;
        0 < r &&
          (Hr(1 === r),
          (a = n.from[0]).allDescendants
            ? (i = a.collectionId)
            : (e = e.child(a.collectionId)));
        var o = [];
        n.where &&
          (o = (function e(t) {
            return t
              ? void 0 !== t.unaryFilter
                ? [Va(t)]
                : void 0 !== t.fieldFilter
                ? [Fa(t)]
                : void 0 !== t.compositeFilter
                ? t.compositeFilter.filters
                    .map(function (t) {
                      return e(t);
                    })
                    .reduce(function (t, e) {
                      return t.concat(e);
                    })
                : Qr()
              : [];
          })(n.where));
        var s = [],
          t = null,
          r = null,
          a = null;
        return No(
          e,
          i,
          (s = n.orderBy
            ? n.orderBy.map(function (t) {
                return new _o(
                  Ma((e = t).field),
                  (function () {
                    switch (e.direction) {
                      case "ASCENDING":
                        return "asc";
                      case "DESCENDING":
                        return "desc";
                      default:
                        return;
                    }
                  })()
                );
                var e;
              })
            : s),
          o,
          (t = n.limit
            ? Ii((o = "object" == typeof (o = n.limit) ? o.value : o))
              ? null
              : o
            : t),
          "F",
          (r = n.startAt ? La(n.startAt) : r),
          (a = n.endAt ? La(n.endAt) : a)
        );
      }
      function Oa(t) {
        return { before: t.before, values: t.position };
      }
      function La(t) {
        var e = !!t.before,
          t = t.values || [];
        return new vo(t, e);
      }
      function Pa(t) {
        return { fieldPath: t.canonicalString() };
      }
      function Ma(t) {
        return ci.fromServerFormat(t.fieldPath);
      }
      function Fa(t) {
        return $i.create(
          Ma(t.fieldFilter.field),
          (function () {
            switch (t.fieldFilter.op) {
              case "EQUAL":
                return "==";
              case "NOT_EQUAL":
                return "!=";
              case "GREATER_THAN":
                return ">";
              case "GREATER_THAN_OR_EQUAL":
                return ">=";
              case "LESS_THAN":
                return "<";
              case "LESS_THAN_OR_EQUAL":
                return "<=";
              case "ARRAY_CONTAINS":
                return "array-contains";
              case "IN":
                return "in";
              case "NOT_IN":
                return "not-in";
              case "ARRAY_CONTAINS_ANY":
                return "array-contains-any";
              case "OPERATOR_UNSPECIFIED":
              default:
                return Qr();
            }
          })(),
          t.fieldFilter.value
        );
      }
      function Va(t) {
        switch (t.unaryFilter.op) {
          case "IS_NAN":
            var e = Ma(t.unaryFilter.field);
            return $i.create(e, "==", { doubleValue: NaN });
          case "IS_NULL":
            e = Ma(t.unaryFilter.field);
            return $i.create(e, "==", { nullValue: "NULL_VALUE" });
          case "IS_NOT_NAN":
            var n = Ma(t.unaryFilter.field);
            return $i.create(n, "!=", { doubleValue: NaN });
          case "IS_NOT_NULL":
            n = Ma(t.unaryFilter.field);
            return $i.create(n, "!=", { nullValue: "NULL_VALUE" });
          case "OPERATOR_UNSPECIFIED":
          default:
            return Qr();
        }
      }
      function Ua(t) {
        return (
          4 <= t.length && "projects" === t.get(0) && "databases" === t.get(2)
        );
      }
      function qa(t) {
        for (var e = "", n = 0; n < t.length; n++)
          0 < e.length && (e = Ba(e)),
            (e = (function (t, e) {
              for (var n = e, r = t.length, i = 0; i < r; i++) {
                var o = t.charAt(i);
                switch (o) {
                  case "\0":
                    n += "\x01\x10";
                    break;
                  case "\x01":
                    n += "\x01\x11";
                    break;
                  default:
                    n += o;
                }
              }
              return n;
            })(t.get(n), e));
        return Ba(e);
      }
      function Ba(t) {
        return t + "\x01\x01";
      }
      function ja(t) {
        var e = t.length;
        if ((Hr(2 <= e), 2 === e))
          return (
            Hr("\x01" === t.charAt(0) && "\x01" === t.charAt(1)), ai.emptyPath()
          );
        for (var n = e - 2, r = [], i = "", o = 0; o < e; ) {
          var s = t.indexOf("\x01", o);
          switch (((s < 0 || n < s) && Qr(), t.charAt(s + 1))) {
            case "\x01":
              var a = t.substring(o, s),
                u = void 0;
              0 === i.length ? (u = a) : ((u = i += a), (i = "")), r.push(u);
              break;
            case "\x10":
              (i += t.substring(o, s)), (i += "\0");
              break;
            case "\x11":
              i += t.substring(o, s + 1);
              break;
            default:
              Qr();
          }
          o = s + 2;
        }
        return new ai(r);
      }
      function Ka(t, e, n) {
        (this.ownerId = t),
          (this.allowTabSynchronization = e),
          (this.leaseTimestampMs = n);
      }
      var Ga = function (t, e) {
        (this.seconds = t), (this.nanoseconds = e);
      };
      (Ka.store = "owner"), (Ka.key = "owner");
      function Qa(t, e, n) {
        (this.userId = t),
          (this.lastAcknowledgedBatchId = e),
          (this.lastStreamToken = n);
      }
      (Qa.store = "mutationQueues"), (Qa.keyPath = "userId");
      function Ha(t, e, n, r, i) {
        (this.userId = t),
          (this.batchId = e),
          (this.localWriteTimeMs = n),
          (this.baseMutations = r),
          (this.mutations = i);
      }
      (Ha.store = "mutations"),
        (Ha.keyPath = "batchId"),
        (Ha.userMutationsIndex = "userMutationsIndex"),
        (Ha.userMutationsKeyPath = ["userId", "batchId"]);
      var za =
        ((Wa.prefixForUser = function (t) {
          return [t];
        }),
        (Wa.prefixForPath = function (t, e) {
          return [t, qa(e)];
        }),
        (Wa.key = function (t, e, n) {
          return [t, qa(e), n];
        }),
        Wa);
      function Wa() {}
      (za.store = "documentMutations"), (za.PLACEHOLDER = new za());
      function Ya(t, e) {
        (this.path = t), (this.readTime = e);
      }
      function Xa(t, e) {
        (this.path = t), (this.version = e);
      }
      var $a = function (t, e, n, r, i, o) {
        (this.unknownDocument = t),
          (this.noDocument = e),
          (this.document = n),
          (this.hasCommittedMutations = r),
          (this.readTime = i),
          (this.parentPath = o);
      };
      ($a.store = "remoteDocuments"),
        ($a.readTimeIndex = "readTimeIndex"),
        ($a.readTimeIndexPath = "readTime"),
        ($a.collectionReadTimeIndex = "collectionReadTimeIndex"),
        ($a.collectionReadTimeIndexPath = ["parentPath", "readTime"]);
      function Ja(t) {
        this.byteSize = t;
      }
      (Ja.store = "remoteDocumentGlobal"), (Ja.key = "remoteDocumentGlobalKey");
      function Za(t, e, n, r, i, o, s) {
        (this.targetId = t),
          (this.canonicalId = e),
          (this.readTime = n),
          (this.resumeToken = r),
          (this.lastListenSequenceNumber = i),
          (this.lastLimboFreeSnapshotVersion = o),
          (this.query = s);
      }
      (Za.store = "targets"),
        (Za.keyPath = "targetId"),
        (Za.queryTargetsIndexName = "queryTargetsIndex"),
        (Za.queryTargetsKeyPath = ["canonicalId", "targetId"]);
      var tu = function (t, e, n) {
        (this.targetId = t), (this.path = e), (this.sequenceNumber = n);
      };
      (tu.store = "targetDocuments"),
        (tu.keyPath = ["targetId", "path"]),
        (tu.documentTargetsIndex = "documentTargetsIndex"),
        (tu.documentTargetsKeyPath = ["path", "targetId"]);
      function eu(t, e, n, r) {
        (this.highestTargetId = t),
          (this.highestListenSequenceNumber = e),
          (this.lastRemoteSnapshotVersion = n),
          (this.targetCount = r);
      }
      (eu.key = "targetGlobalKey"), (eu.store = "targetGlobal");
      function nu(t, e) {
        (this.collectionId = t), (this.parent = e);
      }
      (nu.store = "collectionParents"),
        (nu.keyPath = ["collectionId", "parent"]);
      function ru(t, e, n, r) {
        (this.clientId = t),
          (this.updateTimeMs = e),
          (this.networkEnabled = n),
          (this.inForeground = r);
      }
      (ru.store = "clientMetadata"), (ru.keyPath = "clientId");
      function iu(t, e, n) {
        (this.bundleId = t), (this.createTime = e), (this.version = n);
      }
      (iu.store = "bundles"), (iu.keyPath = "bundleId");
      function ou(t, e, n) {
        (this.name = t), (this.readTime = e), (this.bundledQuery = n);
      }
      (ou.store = "namedQueries"), (ou.keyPath = "name");
      var su,
        au = s(
          s(
            [],
            s(
              s(
                [],
                s(
                  s(
                    [],
                    s(
                      s(
                        [],
                        [
                          Qa.store,
                          Ha.store,
                          za.store,
                          $a.store,
                          Za.store,
                          Ka.store,
                          eu.store,
                          tu.store,
                        ]
                      ),
                      [ru.store]
                    )
                  ),
                  [Ja.store]
                )
              ),
              [nu.store]
            )
          ),
          [iu.store, ou.store]
        ),
        uu =
          "The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",
        C =
          ((bu.prototype.addOnCommittedListener = function (t) {
            this.onCommittedListeners.push(t);
          }),
          (bu.prototype.raiseOnCommittedEvent = function () {
            this.onCommittedListeners.forEach(function (t) {
              return t();
            });
          }),
          bu),
        cu = function () {
          var n = this;
          this.promise = new Promise(function (t, e) {
            (n.resolve = t), (n.reject = e);
          });
        },
        hu =
          ((wu.prototype.catch = function (t) {
            return this.next(void 0, t);
          }),
          (wu.prototype.next = function (r, i) {
            var o = this;
            return (
              this.callbackAttached && Qr(),
              (this.callbackAttached = !0),
              this.isDone
                ? this.error
                  ? this.wrapFailure(i, this.error)
                  : this.wrapSuccess(r, this.result)
                : new wu(function (e, n) {
                    (o.nextCallback = function (t) {
                      o.wrapSuccess(r, t).next(e, n);
                    }),
                      (o.catchCallback = function (t) {
                        o.wrapFailure(i, t).next(e, n);
                      });
                  })
            );
          }),
          (wu.prototype.toPromise = function () {
            var n = this;
            return new Promise(function (t, e) {
              n.next(t, e);
            });
          }),
          (wu.prototype.wrapUserFunction = function (t) {
            try {
              var e = t();
              return e instanceof wu ? e : wu.resolve(e);
            } catch (t) {
              return wu.reject(t);
            }
          }),
          (wu.prototype.wrapSuccess = function (t, e) {
            return t
              ? this.wrapUserFunction(function () {
                  return t(e);
                })
              : wu.resolve(e);
          }),
          (wu.prototype.wrapFailure = function (t, e) {
            return t
              ? this.wrapUserFunction(function () {
                  return t(e);
                })
              : wu.reject(e);
          }),
          (wu.resolve = function (n) {
            return new wu(function (t, e) {
              t(n);
            });
          }),
          (wu.reject = function (n) {
            return new wu(function (t, e) {
              e(n);
            });
          }),
          (wu.waitFor = function (t) {
            return new wu(function (e, n) {
              var r = 0,
                i = 0,
                o = !1;
              t.forEach(function (t) {
                ++r,
                  t.next(
                    function () {
                      ++i, o && i === r && e();
                    },
                    function (t) {
                      return n(t);
                    }
                  );
              }),
                (o = !0),
                i === r && e();
            });
          }),
          (wu.or = function (t) {
            for (var n = wu.resolve(!1), e = 0, r = t; e < r.length; e++)
              !(function (e) {
                n = n.next(function (t) {
                  return t ? wu.resolve(t) : e();
                });
              })(r[e]);
            return n;
          }),
          (wu.forEach = function (t, n) {
            var r = this,
              i = [];
            return (
              t.forEach(function (t, e) {
                i.push(n.call(r, t, e));
              }),
              this.waitFor(i)
            );
          }),
          wu),
        lu =
          ((vu.open = function (t, e, n, r) {
            try {
              return new vu(e, t.transaction(r, n));
            } catch (t) {
              throw new pu(e, t);
            }
          }),
          Object.defineProperty(vu.prototype, "dt", {
            get: function () {
              return this.ft.promise;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (vu.prototype.abort = function (t) {
            t && this.ft.reject(t),
              this.aborted ||
                (Br(
                  "SimpleDb",
                  "Aborting transaction:",
                  t ? t.message : "Client-initiated abort"
                ),
                (this.aborted = !0),
                this.transaction.abort());
          }),
          (vu.prototype.store = function (t) {
            t = this.transaction.objectStore(t);
            return new Tu(t);
          }),
          vu),
        fu =
          ((mu.delete = function (t) {
            return (
              Br("SimpleDb", "Removing database:", t),
              _u(window.indexedDB.deleteDatabase(t)).toPromise()
            );
          }),
          (mu.yt = function () {
            if ("undefined" == typeof indexedDB) return !1;
            if (mu.gt()) return !0;
            var t = h(),
              e = mu._t(t),
              n = 0 < e && e < 10,
              e = mu.Et(t),
              e = 0 < e && e < 4.5;
            return !(
              0 < t.indexOf("MSIE ") ||
              0 < t.indexOf("Trident/") ||
              0 < t.indexOf("Edge/") ||
              n ||
              e
            );
          }),
          (mu.gt = function () {
            var t;
            return (
              "undefined" != typeof process &&
              "YES" ===
                (null === (t = process.env) || void 0 === t ? void 0 : t.Tt)
            );
          }),
          (mu.It = function (t, e) {
            return t.store(e);
          }),
          (mu._t = function (t) {
            (t = t.match(/i(?:phone|pad|pod) os ([\d_]+)/i)),
              (t = t ? t[1].split("_").slice(0, 2).join(".") : "-1");
            return Number(t);
          }),
          (mu.Et = function (t) {
            (t = t.match(/Android ([\d.]+)/i)),
              (t = t ? t[1].split(".").slice(0, 2).join(".") : "-1");
            return Number(t);
          }),
          (mu.prototype.At = function (o) {
            return y(this, void 0, void 0, function () {
              var e,
                i = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.db
                      ? [3, 2]
                      : (Br("SimpleDb", "Opening database:", this.name),
                        (e = this),
                        [
                          4,
                          new Promise(function (e, n) {
                            var r = indexedDB.open(i.name, i.version);
                            (r.onsuccess = function (t) {
                              t = t.target.result;
                              e(t);
                            }),
                              (r.onblocked = function () {
                                n(
                                  new pu(
                                    o,
                                    "Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."
                                  )
                                );
                              }),
                              (r.onerror = function (t) {
                                t = t.target.error;
                                "VersionError" === t.name
                                  ? n(
                                      new Fr(
                                        Mr.FAILED_PRECONDITION,
                                        "A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."
                                      )
                                    )
                                  : n(new pu(o, t));
                              }),
                              (r.onupgradeneeded = function (t) {
                                Br(
                                  "SimpleDb",
                                  'Database "' +
                                    i.name +
                                    '" requires upgrade from version:',
                                  t.oldVersion
                                );
                                var e = t.target.result;
                                i.wt
                                  .Rt(e, r.transaction, t.oldVersion, i.version)
                                  .next(function () {
                                    Br(
                                      "SimpleDb",
                                      "Database upgrade to version " +
                                        i.version +
                                        " complete"
                                    );
                                  });
                              });
                          }),
                        ]);
                  case 1:
                    (e.db = t.sent()), (t.label = 2);
                  case 2:
                    return [
                      2,
                      (this.bt &&
                        (this.db.onversionchange = function (t) {
                          return i.bt(t);
                        }),
                      this.db),
                    ];
                }
              });
            });
          }),
          (mu.prototype.vt = function (e) {
            (this.bt = e),
              this.db &&
                (this.db.onversionchange = function (t) {
                  return e(t);
                });
          }),
          (mu.prototype.runTransaction = function (a, n, u, c) {
            return y(this, void 0, void 0, function () {
              var i, o, s, e;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    (i = "readonly" === n),
                      (o = 0),
                      (e = function () {
                        var e, n, r;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              ++o, (t.label = 1);
                            case 1:
                              return t.trys.push([1, 4, , 5]), [4, s.At(a)];
                            case 2:
                              return (
                                (s.db = t.sent()),
                                (e = lu.open(
                                  s.db,
                                  a,
                                  i ? "readonly" : "readwrite",
                                  u
                                )),
                                (n = c(e)
                                  .catch(function (t) {
                                    return e.abort(t), hu.reject(t);
                                  })
                                  .toPromise()),
                                (r = {}),
                                n.catch(function () {}),
                                [4, e.dt]
                              );
                            case 3:
                              return [2, ((r.value = (t.sent(), n)), r)];
                            case 4:
                              return (
                                (n = t.sent()),
                                (r = "FirebaseError" !== n.name && o < 3),
                                Br(
                                  "SimpleDb",
                                  "Transaction failed with error:",
                                  n.message,
                                  "Retrying:",
                                  r
                                ),
                                s.close(),
                                r ? [3, 5] : [2, { value: Promise.reject(n) }]
                              );
                            case 5:
                              return [2];
                          }
                        });
                      }),
                      (s = this),
                      (t.label = 1);
                  case 1:
                    return [5, e()];
                  case 2:
                    if ("object" == typeof (e = t.sent())) return [2, e.value];
                    t.label = 3;
                  case 3:
                    return [3, 1];
                  case 4:
                    return [2];
                }
              });
            });
          }),
          (mu.prototype.close = function () {
            this.db && this.db.close(), (this.db = void 0);
          }),
          mu),
        du =
          (Object.defineProperty(gu.prototype, "isDone", {
            get: function () {
              return this.Vt;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(gu.prototype, "Dt", {
            get: function () {
              return this.St;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(gu.prototype, "cursor", {
            set: function (t) {
              this.Pt = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (gu.prototype.done = function () {
            this.Vt = !0;
          }),
          (gu.prototype.Ct = function (t) {
            this.St = t;
          }),
          (gu.prototype.delete = function () {
            return _u(this.Pt.delete());
          }),
          gu),
        pu = (n(yu, (su = Fr)), yu);
      function yu(t, e) {
        var n = this;
        return (
          ((n =
            su.call(
              this,
              Mr.UNAVAILABLE,
              "IndexedDB transaction '" + t + "' failed: " + e
            ) || this).name = "IndexedDbTransactionError"),
          n
        );
      }
      function gu(t) {
        (this.Pt = t), (this.Vt = !1), (this.St = null);
      }
      function mu(t, e, n) {
        (this.name = t),
          (this.version = e),
          (this.wt = n),
          12.2 === mu._t(h()) &&
            jr(
              "Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."
            );
      }
      function vu(e, t) {
        var n = this;
        (this.action = e),
          (this.transaction = t),
          (this.aborted = !1),
          (this.ft = new cu()),
          (this.transaction.oncomplete = function () {
            n.ft.resolve();
          }),
          (this.transaction.onabort = function () {
            t.error ? n.ft.reject(new pu(e, t.error)) : n.ft.resolve();
          }),
          (this.transaction.onerror = function (t) {
            t = Au(t.target.error);
            n.ft.reject(new pu(e, t));
          });
      }
      function wu(t) {
        var e = this;
        (this.nextCallback = null),
          (this.catchCallback = null),
          (this.result = void 0),
          (this.error = void 0),
          (this.isDone = !1),
          (this.callbackAttached = !1),
          t(
            function (t) {
              (e.isDone = !0),
                (e.result = t),
                e.nextCallback && e.nextCallback(t);
            },
            function (t) {
              (e.isDone = !0),
                (e.error = t),
                e.catchCallback && e.catchCallback(t);
            }
          );
      }
      function bu() {
        this.onCommittedListeners = [];
      }
      function Eu(t) {
        return "IndexedDbTransactionError" === t.name;
      }
      var Tu =
        ((Iu.prototype.put = function (t, e) {
          t =
            void 0 !== e
              ? (Br("SimpleDb", "PUT", this.store.name, t, e),
                this.store.put(e, t))
              : (Br("SimpleDb", "PUT", this.store.name, "<auto-key>", t),
                this.store.put(t));
          return _u(t);
        }),
        (Iu.prototype.add = function (t) {
          return (
            Br("SimpleDb", "ADD", this.store.name, t, t), _u(this.store.add(t))
          );
        }),
        (Iu.prototype.get = function (e) {
          var n = this;
          return _u(this.store.get(e)).next(function (t) {
            return (
              Br(
                "SimpleDb",
                "GET",
                n.store.name,
                e,
                (t = void 0 === t ? null : t)
              ),
              t
            );
          });
        }),
        (Iu.prototype.delete = function (t) {
          return (
            Br("SimpleDb", "DELETE", this.store.name, t),
            _u(this.store.delete(t))
          );
        }),
        (Iu.prototype.count = function () {
          return (
            Br("SimpleDb", "COUNT", this.store.name), _u(this.store.count())
          );
        }),
        (Iu.prototype.Nt = function (t, e) {
          var e = this.cursor(this.options(t, e)),
            n = [];
          return this.xt(e, function (t, e) {
            n.push(e);
          }).next(function () {
            return n;
          });
        }),
        (Iu.prototype.Ft = function (t, e) {
          Br("SimpleDb", "DELETE ALL", this.store.name);
          e = this.options(t, e);
          e.kt = !1;
          e = this.cursor(e);
          return this.xt(e, function (t, e, n) {
            return n.delete();
          });
        }),
        (Iu.prototype.$t = function (t, e) {
          e ? (n = t) : ((n = {}), (e = t));
          var n = this.cursor(n);
          return this.xt(n, e);
        }),
        (Iu.prototype.Ot = function (r) {
          var t = this.cursor({});
          return new hu(function (n, e) {
            (t.onerror = function (t) {
              t = Au(t.target.error);
              e(t);
            }),
              (t.onsuccess = function (t) {
                var e = t.target.result;
                e
                  ? r(e.primaryKey, e.value).next(function (t) {
                      t ? e.continue() : n();
                    })
                  : n();
              });
          });
        }),
        (Iu.prototype.xt = function (t, i) {
          var o = [];
          return new hu(function (r, e) {
            (t.onerror = function (t) {
              e(t.target.error);
            }),
              (t.onsuccess = function (t) {
                var e,
                  n = t.target.result;
                n
                  ? ((e = new du(n)),
                    (t = i(n.primaryKey, n.value, e)) instanceof hu &&
                      ((t = t.catch(function (t) {
                        return e.done(), hu.reject(t);
                      })),
                      o.push(t)),
                    e.isDone
                      ? r()
                      : null === e.Dt
                      ? n.continue()
                      : n.continue(e.Dt))
                  : r();
              });
          }).next(function () {
            return hu.waitFor(o);
          });
        }),
        (Iu.prototype.options = function (t, e) {
          var n;
          return (
            void 0 !== t && ("string" == typeof t ? (n = t) : (e = t)),
            { index: n, range: e }
          );
        }),
        (Iu.prototype.cursor = function (t) {
          var e = "next";
          if ((t.reverse && (e = "prev"), t.index)) {
            var n = this.store.index(t.index);
            return t.kt
              ? n.openKeyCursor(t.range, e)
              : n.openCursor(t.range, e);
          }
          return this.store.openCursor(t.range, e);
        }),
        Iu);
      function Iu(t) {
        this.store = t;
      }
      function _u(t) {
        return new hu(function (e, n) {
          (t.onsuccess = function (t) {
            t = t.target.result;
            e(t);
          }),
            (t.onerror = function (t) {
              t = Au(t.target.error);
              n(t);
            });
        });
      }
      var Su = !1;
      function Au(t) {
        var e = fu._t(h());
        if (12.2 <= e && e < 13) {
          e =
            "An internal error was encountered in the Indexed Database server";
          if (0 <= t.message.indexOf(e)) {
            var n = new Fr(
              "internal",
              "IOS_INDEXEDDB_BUG1: IndexedDb has thrown '" +
                e +
                "'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."
            );
            return (
              Su ||
                ((Su = !0),
                setTimeout(function () {
                  throw n;
                }, 0)),
              n
            );
          }
        }
        return t;
      }
      var Du,
        Nu = (n(Cu, (Du = C)), Cu);
      function Cu(t, e) {
        var n = this;
        return (
          ((n = Du.call(this) || this).Mt = t), (n.currentSequenceNumber = e), n
        );
      }
      function ku(t, e) {
        return fu.It(t.Mt, e);
      }
      var Ru =
          ((Fu.prototype.applyToRemoteDocument = function (t, e) {
            for (
              var n, r, i, o, s, a, u = e.mutationResults, c = 0;
              c < this.mutations.length;
              c++
            ) {
              var h = this.mutations[c];
              h.key.isEqual(t.key) &&
                ((n = h),
                (r = t),
                (i = u[c]),
                (h = a = s = o = void 0),
                n instanceof ws
                  ? ((s = r),
                    (a = i),
                    (h = (o = n).value.clone()),
                    (o = _s(o.fieldTransforms, s, a.transformResults)),
                    h.setAll(o),
                    s
                      .convertToFoundDocument(a.version, h)
                      .setHasCommittedMutations())
                  : n instanceof bs
                  ? ((o = r),
                    (s = i),
                    ds((a = n).precondition, o)
                      ? ((h = _s(a.fieldTransforms, o, s.transformResults)),
                        (n = o.data).setAll(Is(a)),
                        n.setAll(h),
                        o
                          .convertToFoundDocument(s.version, n)
                          .setHasCommittedMutations())
                      : o.convertToUnknownDocument(s.version))
                  : r
                      .convertToNoDocument(i.version)
                      .setHasCommittedMutations());
            }
          }),
          (Fu.prototype.applyToLocalView = function (t) {
            for (var e = 0, n = this.baseMutations; e < n.length; e++)
              (r = n[e]).key.isEqual(t.key) && ps(r, t, this.localWriteTime);
            for (var r, i = 0, o = this.mutations; i < o.length; i++)
              (r = o[i]).key.isEqual(t.key) && ps(r, t, this.localWriteTime);
          }),
          (Fu.prototype.applyToLocalDocumentSet = function (n) {
            var r = this;
            this.mutations.forEach(function (t) {
              var e = n.get(t.key),
                t = e;
              r.applyToLocalView(t),
                e.isValidDocument() || t.convertToNoDocument(Zr.min());
            });
          }),
          (Fu.prototype.keys = function () {
            return this.mutations.reduce(function (t, e) {
              return t.add(e.key);
            }, $s());
          }),
          (Fu.prototype.isEqual = function (t) {
            return (
              this.batchId === t.batchId &&
              Xr(this.mutations, t.mutations, ys) &&
              Xr(this.baseMutations, t.baseMutations, ys)
            );
          }),
          Fu),
        xu =
          ((Mu.from = function (t, e, n) {
            Hr(t.mutations.length === n.length);
            for (var r = Ys, i = t.mutations, o = 0; o < i.length; o++)
              r = r.insert(i[o].key, n[o].version);
            return new Mu(t, e, n, r);
          }),
          Mu),
        Ou =
          ((Pu.prototype.withSequenceNumber = function (t) {
            return new Pu(
              this.target,
              this.targetId,
              this.purpose,
              t,
              this.snapshotVersion,
              this.lastLimboFreeSnapshotVersion,
              this.resumeToken
            );
          }),
          (Pu.prototype.withResumeToken = function (t, e) {
            return new Pu(
              this.target,
              this.targetId,
              this.purpose,
              this.sequenceNumber,
              e,
              this.lastLimboFreeSnapshotVersion,
              t
            );
          }),
          (Pu.prototype.withLastLimboFreeSnapshotVersion = function (t) {
            return new Pu(
              this.target,
              this.targetId,
              this.purpose,
              this.sequenceNumber,
              this.snapshotVersion,
              t,
              this.resumeToken
            );
          }),
          Pu),
        Lu = function (t) {
          this.Lt = t;
        };
      function Pu(t, e, n, r, i, o, s) {
        void 0 === i && (i = Zr.min()),
          void 0 === o && (o = Zr.min()),
          void 0 === s && (s = li.EMPTY_BYTE_STRING),
          (this.target = t),
          (this.targetId = e),
          (this.purpose = n),
          (this.sequenceNumber = r),
          (this.snapshotVersion = i),
          (this.lastLimboFreeSnapshotVersion = o),
          (this.resumeToken = s);
      }
      function Mu(t, e, n, r) {
        (this.batch = t),
          (this.commitVersion = e),
          (this.mutationResults = n),
          (this.docVersions = r);
      }
      function Fu(t, e, n, r) {
        (this.batchId = t),
          (this.localWriteTime = e),
          (this.baseMutations = n),
          (this.mutations = r);
      }
      function Vu(t, e) {
        if (e.document) return Da(t.Lt, e.document, !!e.hasCommittedMutations);
        if (e.noDocument) {
          var n = Ai.fromSegments(e.noDocument.path),
            r = Ku(e.noDocument.readTime),
            n = Ki.newNoDocument(n, r);
          return e.hasCommittedMutations ? n.setHasCommittedMutations() : n;
        }
        if (e.unknownDocument) {
          (n = Ai.fromSegments(e.unknownDocument.path)),
            (r = Ku(e.unknownDocument.version));
          return Ki.newUnknownDocument(n, r);
        }
        return Qr();
      }
      function Uu(t, e, n) {
        var r = qu(n),
          n = e.key.path.popLast().toArray();
        if (e.isFoundDocument()) {
          var i = {
              name: ba((o = t.Lt), (s = e).key),
              fields: s.data.value.mapValue.fields,
              updateTime: ya(o, s.version.toTimestamp()),
            },
            o = e.hasCommittedMutations;
          return new $a(null, null, i, o, r, n);
        }
        if (e.isNoDocument()) {
          var s = e.key.path.toArray(),
            i = ju(e.version),
            o = e.hasCommittedMutations;
          return new $a(null, new Ya(s, i), null, o, r, n);
        }
        if (e.isUnknownDocument()) {
          (o = e.key.path.toArray()), (e = ju(e.version));
          return new $a(new Xa(o, e), null, null, !0, r, n);
        }
        return Qr();
      }
      function qu(t) {
        t = t.toTimestamp();
        return [t.seconds, t.nanoseconds];
      }
      function Bu(t) {
        t = new Jr(t[0], t[1]);
        return Zr.fromTimestamp(t);
      }
      function ju(t) {
        t = t.toTimestamp();
        return new Ga(t.seconds, t.nanoseconds);
      }
      function Ku(t) {
        t = new Jr(t.seconds, t.nanoseconds);
        return Zr.fromTimestamp(t);
      }
      function Gu(e, t) {
        for (
          var n = (t.baseMutations || []).map(function (t) {
              return Ca(e.Lt, t);
            }),
            r = 0;
          r < t.mutations.length - 1;
          ++r
        ) {
          var i,
            o = t.mutations[r];
          r + 1 < t.mutations.length &&
            void 0 !== t.mutations[r + 1].transform &&
            ((i = t.mutations[r + 1]),
            (o.updateTransforms = i.transform.fieldTransforms),
            t.mutations.splice(r + 1, 1),
            ++r);
        }
        var s = t.mutations.map(function (t) {
            return Ca(e.Lt, t);
          }),
          a = Jr.fromMillis(t.localWriteTimeMs);
        return new Ru(t.batchId, a, n, s);
      }
      function Qu(t) {
        var e = Ku(t.readTime),
          n =
            void 0 !== t.lastLimboFreeSnapshotVersion
              ? Ku(t.lastLimboFreeSnapshotVersion)
              : Zr.min(),
          r =
            void 0 !== t.query.documents
              ? (Hr(1 === (r = t.query).documents.length),
                Mo(Co(Ia(r.documents[0]))))
              : Mo(xa(t.query));
        return new Ou(
          r,
          t.targetId,
          0,
          t.lastListenSequenceNumber,
          e,
          n,
          li.fromBase64String(t.resumeToken)
        );
      }
      function Hu(t, e) {
        var n = ju(e.snapshotVersion),
          r = ju(e.lastLimboFreeSnapshotVersion),
          i = (Yi(e.target) ? ka : Ra)(t.Lt, e.target),
          t = e.resumeToken.toBase64();
        return new Za(e.targetId, zi(e.target), n, t, e.sequenceNumber, r, i);
      }
      function zu(t) {
        var e = xa({ parent: t.parent, structuredQuery: t.structuredQuery });
        return "LAST" === t.limitType ? Fo(e, e.limit, "L") : e;
      }
      var Wu =
        ((Yu.prototype.getBundleMetadata = function (t, e) {
          return Xu(t)
            .get(e)
            .next(function (t) {
              if (t)
                return {
                  id: (t = t).bundleId,
                  createTime: Ku(t.createTime),
                  version: t.version,
                };
            });
        }),
        (Yu.prototype.saveBundleMetadata = function (t, e) {
          return Xu(t).put({
            bundleId: (e = e).id,
            createTime: ju(ma(e.createTime)),
            version: e.version,
          });
        }),
        (Yu.prototype.getNamedQuery = function (t, e) {
          return $u(t)
            .get(e)
            .next(function (t) {
              if (t)
                return {
                  name: (t = t).name,
                  query: zu(t.bundledQuery),
                  readTime: Ku(t.readTime),
                };
            });
        }),
        (Yu.prototype.saveNamedQuery = function (t, e) {
          return $u(t).put({
            name: (e = e).name,
            readTime: ju(ma(e.readTime)),
            bundledQuery: e.bundledQuery,
          });
        }),
        Yu);
      function Yu() {}
      function Xu(t) {
        return ku(t, iu.store);
      }
      function $u(t) {
        return ku(t, ou.store);
      }
      var Ju =
          ((rc.prototype.addToCollectionParentIndex = function (t, e) {
            return this.Bt.add(e), hu.resolve();
          }),
          (rc.prototype.getCollectionParents = function (t, e) {
            return hu.resolve(this.Bt.getEntries(e));
          }),
          rc),
        Zu =
          ((nc.prototype.add = function (t) {
            var e = t.lastSegment(),
              n = t.popLast(),
              r = this.index[e] || new Ks(ai.comparator),
              t = !r.has(n);
            return (this.index[e] = r.add(n)), t;
          }),
          (nc.prototype.has = function (t) {
            var e = t.lastSegment(),
              t = t.popLast(),
              e = this.index[e];
            return e && e.has(t);
          }),
          (nc.prototype.getEntries = function (t) {
            return (this.index[t] || new Ks(ai.comparator)).toArray();
          }),
          nc),
        tc =
          ((ec.prototype.addToCollectionParentIndex = function (t, e) {
            var n = this;
            if (this.qt.has(e)) return hu.resolve();
            var r = e.lastSegment(),
              i = e.popLast();
            t.addOnCommittedListener(function () {
              n.qt.add(e);
            });
            i = { collectionId: r, parent: qa(i) };
            return ic(t).put(i);
          }),
          (ec.prototype.getCollectionParents = function (t, i) {
            var o = [],
              e = IDBKeyRange.bound([i, ""], [$r(i), ""], !1, !0);
            return ic(t)
              .Nt(e)
              .next(function (t) {
                for (var e = 0, n = t; e < n.length; e++) {
                  var r = n[e];
                  if (r.collectionId !== i) break;
                  o.push(ja(r.parent));
                }
                return o;
              });
          }),
          ec);
      function ec() {
        this.qt = new Zu();
      }
      function nc() {
        this.index = {};
      }
      function rc() {
        this.Bt = new Zu();
      }
      function ic(t) {
        return ku(t, nu.store);
      }
      var oc = {
          didRun: !1,
          sequenceNumbersCollected: 0,
          targetsRemoved: 0,
          documentsRemoved: 0,
        },
        sc =
          ((ac.withCacheSize = function (t) {
            return new ac(
              t,
              ac.DEFAULT_COLLECTION_PERCENTILE,
              ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
            );
          }),
          ac);
      function ac(t, e, n) {
        (this.cacheSizeCollectionThreshold = t),
          (this.percentileToCollect = e),
          (this.maximumSequenceNumbersToCollect = n);
      }
      function uc(t, e, n) {
        var r = t.store(Ha.store),
          i = t.store(za.store),
          o = [],
          t = IDBKeyRange.only(n.batchId),
          s = 0,
          t = r.$t({ range: t }, function (t, e, n) {
            return s++, n.delete();
          });
        o.push(
          t.next(function () {
            Hr(1 === s);
          })
        );
        for (var a = [], u = 0, c = n.mutations; u < c.length; u++) {
          var h = c[u],
            l = za.key(e, h.key.path, n.batchId);
          o.push(i.delete(l)), a.push(h.key);
        }
        return hu.waitFor(o).next(function () {
          return a;
        });
      }
      function cc(t) {
        if (!t) return 0;
        var e;
        if (t.document) e = t.document;
        else if (t.unknownDocument) e = t.unknownDocument;
        else {
          if (!t.noDocument) throw Qr();
          e = t.noDocument;
        }
        return JSON.stringify(e).length;
      }
      (sc.DEFAULT_COLLECTION_PERCENTILE = 10),
        (sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3),
        (sc.DEFAULT = new sc(
          41943040,
          sc.DEFAULT_COLLECTION_PERCENTILE,
          sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
        )),
        (sc.DISABLED = new sc(-1, 0, 0));
      var hc =
        ((lc.Qt = function (t, e, n, r) {
          return (
            Hr("" !== t.uid), new lc(t.isAuthenticated() ? t.uid : "", e, n, r)
          );
        }),
        (lc.prototype.checkEmpty = function (t) {
          var r = !0,
            e = IDBKeyRange.bound(
              [this.userId, Number.NEGATIVE_INFINITY],
              [this.userId, Number.POSITIVE_INFINITY]
            );
          return dc(t)
            .$t({ index: Ha.userMutationsIndex, range: e }, function (t, e, n) {
              (r = !1), n.done();
            })
            .next(function () {
              return r;
            });
        }),
        (lc.prototype.addMutationBatch = function (p, y, g, m) {
          var v = this,
            w = pc(p),
            b = dc(p);
          return b.add({}).next(function (t) {
            Hr("number" == typeof t);
            for (
              var e,
                n,
                r,
                i,
                o,
                s = new Ru(t, y, g, m),
                a =
                  ((e = v.R),
                  (n = v.userId),
                  (i = (r = s).baseMutations.map(function (t) {
                    return Na(e.Lt, t);
                  })),
                  (o = r.mutations.map(function (t) {
                    return Na(e.Lt, t);
                  })),
                  new Ha(n, r.batchId, r.localWriteTime.toMillis(), i, o)),
                u = [],
                c = new Ks(function (t, e) {
                  return Yr(t.canonicalString(), e.canonicalString());
                }),
                h = 0,
                l = m;
              h < l.length;
              h++
            ) {
              var f = l[h],
                d = za.key(v.userId, f.key.path, t),
                c = c.add(f.key.path.popLast());
              u.push(b.put(a)), u.push(w.put(d, za.PLACEHOLDER));
            }
            return (
              c.forEach(function (t) {
                u.push(v.Ut.addToCollectionParentIndex(p, t));
              }),
              p.addOnCommittedListener(function () {
                v.Kt[t] = s.keys();
              }),
              hu.waitFor(u).next(function () {
                return s;
              })
            );
          });
        }),
        (lc.prototype.lookupMutationBatch = function (t, e) {
          var n = this;
          return dc(t)
            .get(e)
            .next(function (t) {
              return t ? (Hr(t.userId === n.userId), Gu(n.R, t)) : null;
            });
        }),
        (lc.prototype.jt = function (t, e) {
          var n = this;
          return this.Kt[e]
            ? hu.resolve(this.Kt[e])
            : this.lookupMutationBatch(t, e).next(function (t) {
                if (t) {
                  t = t.keys();
                  return (n.Kt[e] = t);
                }
                return null;
              });
        }),
        (lc.prototype.getNextMutationBatchAfterBatchId = function (t, e) {
          var r = this,
            i = e + 1,
            e = IDBKeyRange.lowerBound([this.userId, i]),
            o = null;
          return dc(t)
            .$t({ index: Ha.userMutationsIndex, range: e }, function (t, e, n) {
              e.userId === r.userId && (Hr(e.batchId >= i), (o = Gu(r.R, e))),
                n.done();
            })
            .next(function () {
              return o;
            });
        }),
        (lc.prototype.getHighestUnacknowledgedBatchId = function (t) {
          var e = IDBKeyRange.upperBound([
              this.userId,
              Number.POSITIVE_INFINITY,
            ]),
            r = -1;
          return dc(t)
            .$t(
              { index: Ha.userMutationsIndex, range: e, reverse: !0 },
              function (t, e, n) {
                (r = e.batchId), n.done();
              }
            )
            .next(function () {
              return r;
            });
        }),
        (lc.prototype.getAllMutationBatches = function (t) {
          var e = this,
            n = IDBKeyRange.bound(
              [this.userId, -1],
              [this.userId, Number.POSITIVE_INFINITY]
            );
          return dc(t)
            .Nt(Ha.userMutationsIndex, n)
            .next(function (t) {
              return t.map(function (t) {
                return Gu(e.R, t);
              });
            });
        }),
        (lc.prototype.getAllMutationBatchesAffectingDocumentKey = function (
          o,
          s
        ) {
          var a = this,
            t = za.prefixForPath(this.userId, s.path),
            t = IDBKeyRange.lowerBound(t),
            u = [];
          return pc(o)
            .$t({ range: t }, function (t, e, n) {
              var r = t[0],
                i = t[1],
                t = t[2],
                i = ja(i);
              if (r === a.userId && s.path.isEqual(i))
                return dc(o)
                  .get(t)
                  .next(function (t) {
                    if (!t) throw Qr();
                    Hr(t.userId === a.userId), u.push(Gu(a.R, t));
                  });
              n.done();
            })
            .next(function () {
              return u;
            });
        }),
        (lc.prototype.getAllMutationBatchesAffectingDocumentKeys = function (
          e,
          t
        ) {
          var s = this,
            a = new Ks(Yr),
            n = [];
          return (
            t.forEach(function (o) {
              var t = za.prefixForPath(s.userId, o.path),
                t = IDBKeyRange.lowerBound(t),
                t = pc(e).$t({ range: t }, function (t, e, n) {
                  var r = t[0],
                    i = t[1],
                    t = t[2],
                    i = ja(i);
                  r === s.userId && o.path.isEqual(i)
                    ? (a = a.add(t))
                    : n.done();
                });
              n.push(t);
            }),
            hu.waitFor(n).next(function () {
              return s.Wt(e, a);
            })
          );
        }),
        (lc.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {
          var o = this,
            s = e.path,
            a = s.length + 1,
            e = za.prefixForPath(this.userId, s),
            e = IDBKeyRange.lowerBound(e),
            u = new Ks(Yr);
          return pc(t)
            .$t({ range: e }, function (t, e, n) {
              var r = t[0],
                i = t[1],
                t = t[2],
                i = ja(i);
              r === o.userId && s.isPrefixOf(i)
                ? i.length === a && (u = u.add(t))
                : n.done();
            })
            .next(function () {
              return o.Wt(t, u);
            });
        }),
        (lc.prototype.Wt = function (e, t) {
          var n = this,
            r = [],
            i = [];
          return (
            t.forEach(function (t) {
              i.push(
                dc(e)
                  .get(t)
                  .next(function (t) {
                    if (null === t) throw Qr();
                    Hr(t.userId === n.userId), r.push(Gu(n.R, t));
                  })
              );
            }),
            hu.waitFor(i).next(function () {
              return r;
            })
          );
        }),
        (lc.prototype.removeMutationBatch = function (e, n) {
          var r = this;
          return uc(e.Mt, this.userId, n).next(function (t) {
            return (
              e.addOnCommittedListener(function () {
                r.Gt(n.batchId);
              }),
              hu.forEach(t, function (t) {
                return r.referenceDelegate.markPotentiallyOrphaned(e, t);
              })
            );
          });
        }),
        (lc.prototype.Gt = function (t) {
          delete this.Kt[t];
        }),
        (lc.prototype.performConsistencyCheck = function (e) {
          var i = this;
          return this.checkEmpty(e).next(function (t) {
            if (!t) return hu.resolve();
            var t = IDBKeyRange.lowerBound(za.prefixForUser(i.userId)),
              r = [];
            return pc(e)
              .$t({ range: t }, function (t, e, n) {
                t[0] === i.userId ? ((t = ja(t[1])), r.push(t)) : n.done();
              })
              .next(function () {
                Hr(0 === r.length);
              });
          });
        }),
        (lc.prototype.containsKey = function (t, e) {
          return fc(t, this.userId, e);
        }),
        (lc.prototype.zt = function (t) {
          var e = this;
          return yc(t)
            .get(this.userId)
            .next(function (t) {
              return t || new Qa(e.userId, -1, "");
            });
        }),
        lc);
      function lc(t, e, n, r) {
        (this.userId = t),
          (this.R = e),
          (this.Ut = n),
          (this.referenceDelegate = r),
          (this.Kt = {});
      }
      function fc(t, o, e) {
        var e = za.prefixForPath(o, e.path),
          s = e[1],
          e = IDBKeyRange.lowerBound(e),
          a = !1;
        return pc(t)
          .$t({ range: e, kt: !0 }, function (t, e, n) {
            var r = t[0],
              i = t[1];
            t[2], r === o && i === s && (a = !0), n.done();
          })
          .next(function () {
            return a;
          });
      }
      function dc(t) {
        return ku(t, Ha.store);
      }
      function pc(t) {
        return ku(t, za.store);
      }
      function yc(t) {
        return ku(t, Qa.store);
      }
      var gc =
          ((wc.prototype.next = function () {
            return (this.Ht += 2), this.Ht;
          }),
          (wc.Jt = function () {
            return new wc(0);
          }),
          (wc.Yt = function () {
            return new wc(-1);
          }),
          wc),
        mc =
          ((vc.prototype.allocateTargetId = function (n) {
            var r = this;
            return this.Xt(n).next(function (t) {
              var e = new gc(t.highestTargetId);
              return (
                (t.highestTargetId = e.next()),
                r.Zt(n, t).next(function () {
                  return t.highestTargetId;
                })
              );
            });
          }),
          (vc.prototype.getLastRemoteSnapshotVersion = function (t) {
            return this.Xt(t).next(function (t) {
              return Zr.fromTimestamp(
                new Jr(
                  t.lastRemoteSnapshotVersion.seconds,
                  t.lastRemoteSnapshotVersion.nanoseconds
                )
              );
            });
          }),
          (vc.prototype.getHighestSequenceNumber = function (t) {
            return this.Xt(t).next(function (t) {
              return t.highestListenSequenceNumber;
            });
          }),
          (vc.prototype.setTargetsMetadata = function (e, n, r) {
            var i = this;
            return this.Xt(e).next(function (t) {
              return (
                (t.highestListenSequenceNumber = n),
                r && (t.lastRemoteSnapshotVersion = r.toTimestamp()),
                n > t.highestListenSequenceNumber &&
                  (t.highestListenSequenceNumber = n),
                i.Zt(e, t)
              );
            });
          }),
          (vc.prototype.addTargetData = function (e, n) {
            var r = this;
            return this.te(e, n).next(function () {
              return r.Xt(e).next(function (t) {
                return (t.targetCount += 1), r.ee(n, t), r.Zt(e, t);
              });
            });
          }),
          (vc.prototype.updateTargetData = function (t, e) {
            return this.te(t, e);
          }),
          (vc.prototype.removeTargetData = function (e, t) {
            var n = this;
            return this.removeMatchingKeysForTargetId(e, t.targetId)
              .next(function () {
                return bc(e).delete(t.targetId);
              })
              .next(function () {
                return n.Xt(e);
              })
              .next(function (t) {
                return Hr(0 < t.targetCount), --t.targetCount, n.Zt(e, t);
              });
          }),
          (vc.prototype.removeTargets = function (n, r, i) {
            var o = this,
              s = 0,
              a = [];
            return bc(n)
              .$t(function (t, e) {
                e = Qu(e);
                e.sequenceNumber <= r &&
                  null === i.get(e.targetId) &&
                  (s++, a.push(o.removeTargetData(n, e)));
              })
              .next(function () {
                return hu.waitFor(a);
              })
              .next(function () {
                return s;
              });
          }),
          (vc.prototype.forEachTarget = function (t, n) {
            return bc(t).$t(function (t, e) {
              e = Qu(e);
              n(e);
            });
          }),
          (vc.prototype.Xt = function (t) {
            return Ec(t)
              .get(eu.key)
              .next(function (t) {
                return Hr(null !== t), t;
              });
          }),
          (vc.prototype.Zt = function (t, e) {
            return Ec(t).put(eu.key, e);
          }),
          (vc.prototype.te = function (t, e) {
            return bc(t).put(Hu(this.R, e));
          }),
          (vc.prototype.ee = function (t, e) {
            var n = !1;
            return (
              t.targetId > e.highestTargetId &&
                ((e.highestTargetId = t.targetId), (n = !0)),
              t.sequenceNumber > e.highestListenSequenceNumber &&
                ((e.highestListenSequenceNumber = t.sequenceNumber), (n = !0)),
              n
            );
          }),
          (vc.prototype.getTargetCount = function (t) {
            return this.Xt(t).next(function (t) {
              return t.targetCount;
            });
          }),
          (vc.prototype.getTargetData = function (t, r) {
            var e = zi(r),
              e = IDBKeyRange.bound(
                [e, Number.NEGATIVE_INFINITY],
                [e, Number.POSITIVE_INFINITY]
              ),
              i = null;
            return bc(t)
              .$t(
                { range: e, index: Za.queryTargetsIndexName },
                function (t, e, n) {
                  e = Qu(e);
                  Wi(r, e.target) && ((i = e), n.done());
                }
              )
              .next(function () {
                return i;
              });
          }),
          (vc.prototype.addMatchingKeys = function (n, t, r) {
            var i = this,
              o = [],
              s = Tc(n);
            return (
              t.forEach(function (t) {
                var e = qa(t.path);
                o.push(s.put(new tu(r, e))),
                  o.push(i.referenceDelegate.addReference(n, r, t));
              }),
              hu.waitFor(o)
            );
          }),
          (vc.prototype.removeMatchingKeys = function (n, t, r) {
            var i = this,
              o = Tc(n);
            return hu.forEach(t, function (t) {
              var e = qa(t.path);
              return hu.waitFor([
                o.delete([r, e]),
                i.referenceDelegate.removeReference(n, r, t),
              ]);
            });
          }),
          (vc.prototype.removeMatchingKeysForTargetId = function (t, e) {
            (t = Tc(t)), (e = IDBKeyRange.bound([e], [e + 1], !1, !0));
            return t.delete(e);
          }),
          (vc.prototype.getMatchingKeysForTargetId = function (t, e) {
            var e = IDBKeyRange.bound([e], [e + 1], !1, !0),
              t = Tc(t),
              r = $s();
            return t
              .$t({ range: e, kt: !0 }, function (t, e, n) {
                (t = ja(t[1])), (t = new Ai(t));
                r = r.add(t);
              })
              .next(function () {
                return r;
              });
          }),
          (vc.prototype.containsKey = function (t, e) {
            var e = qa(e.path),
              e = IDBKeyRange.bound([e], [$r(e)], !1, !0),
              i = 0;
            return Tc(t)
              .$t(
                { index: tu.documentTargetsIndex, kt: !0, range: e },
                function (t, e, n) {
                  var r = t[0];
                  t[1], 0 !== r && (i++, n.done());
                }
              )
              .next(function () {
                return 0 < i;
              });
          }),
          (vc.prototype.lt = function (t, e) {
            return bc(t)
              .get(e)
              .next(function (t) {
                return t ? Qu(t) : null;
              });
          }),
          vc);
      function vc(t, e) {
        (this.referenceDelegate = t), (this.R = e);
      }
      function wc(t) {
        this.Ht = t;
      }
      function bc(t) {
        return ku(t, Za.store);
      }
      function Ec(t) {
        return ku(t, eu.store);
      }
      function Tc(t) {
        return ku(t, tu.store);
      }
      function Ic(e) {
        return y(this, void 0, void 0, function () {
          return g(this, function (t) {
            if (e.code !== Mr.FAILED_PRECONDITION || e.message !== uu) throw e;
            return Br("LocalStore", "Unexpectedly lost primary lease"), [2];
          });
        });
      }
      function _c(t, e) {
        var n = t[0],
          r = t[1],
          t = e[0],
          e = e[1],
          t = Yr(n, t);
        return 0 === t ? Yr(r, e) : t;
      }
      var Sc =
          ((xc.prototype.ie = function () {
            return ++this.se;
          }),
          (xc.prototype.re = function (t) {
            var e = [t, this.ie()];
            this.buffer.size < this.ne
              ? (this.buffer = this.buffer.add(e))
              : _c(e, (t = this.buffer.last())) < 0 &&
                (this.buffer = this.buffer.delete(t).add(e));
          }),
          Object.defineProperty(xc.prototype, "maxValue", {
            get: function () {
              return this.buffer.last()[0];
            },
            enumerable: !1,
            configurable: !0,
          }),
          xc),
        Ac =
          ((Rc.prototype.start = function (t) {
            -1 !== this.garbageCollector.params.cacheSizeCollectionThreshold &&
              this.ue(t);
          }),
          (Rc.prototype.stop = function () {
            this.ce && (this.ce.cancel(), (this.ce = null));
          }),
          Object.defineProperty(Rc.prototype, "started", {
            get: function () {
              return null !== this.ce;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Rc.prototype.ue = function (n) {
            var t = this,
              e = this.oe ? 3e5 : 6e4;
            Br(
              "LruGarbageCollector",
              "Garbage collection scheduled in " + e + "ms"
            ),
              (this.ce = this.asyncQueue.enqueueAfterDelay(
                "lru_garbage_collection",
                e,
                function () {
                  return y(t, void 0, void 0, function () {
                    var e;
                    return g(this, function (t) {
                      switch (t.label) {
                        case 0:
                          (this.ce = null), (this.oe = !0), (t.label = 1);
                        case 1:
                          return (
                            t.trys.push([1, 3, , 7]),
                            [4, n.collectGarbage(this.garbageCollector)]
                          );
                        case 2:
                          return t.sent(), [3, 7];
                        case 3:
                          return Eu((e = t.sent()))
                            ? (Br(
                                "LruGarbageCollector",
                                "Ignoring IndexedDB error during garbage collection: ",
                                e
                              ),
                              [3, 6])
                            : [3, 4];
                        case 4:
                          return [4, Ic(e)];
                        case 5:
                          t.sent(), (t.label = 6);
                        case 6:
                          return [3, 7];
                        case 7:
                          return [4, this.ue(n)];
                        case 8:
                          return t.sent(), [2];
                      }
                    });
                  });
                }
              ));
          }),
          Rc),
        Dc =
          ((kc.prototype.calculateTargetCount = function (t, e) {
            return this.ae.he(t).next(function (t) {
              return Math.floor((e / 100) * t);
            });
          }),
          (kc.prototype.nthSequenceNumber = function (t, e) {
            var n = this;
            if (0 === e) return hu.resolve(Or.o);
            var r = new Sc(e);
            return this.ae
              .forEachTarget(t, function (t) {
                return r.re(t.sequenceNumber);
              })
              .next(function () {
                return n.ae.le(t, function (t) {
                  return r.re(t);
                });
              })
              .next(function () {
                return r.maxValue;
              });
          }),
          (kc.prototype.removeTargets = function (t, e, n) {
            return this.ae.removeTargets(t, e, n);
          }),
          (kc.prototype.removeOrphanedDocuments = function (t, e) {
            return this.ae.removeOrphanedDocuments(t, e);
          }),
          (kc.prototype.collect = function (e, n) {
            var r = this;
            return -1 === this.params.cacheSizeCollectionThreshold
              ? (Br(
                  "LruGarbageCollector",
                  "Garbage collection skipped; disabled"
                ),
                hu.resolve(oc))
              : this.getCacheSize(e).next(function (t) {
                  return t < r.params.cacheSizeCollectionThreshold
                    ? (Br(
                        "LruGarbageCollector",
                        "Garbage collection skipped; Cache size " +
                          t +
                          " is lower than threshold " +
                          r.params.cacheSizeCollectionThreshold
                      ),
                      oc)
                    : r.fe(e, n);
                });
          }),
          (kc.prototype.getCacheSize = function (t) {
            return this.ae.getCacheSize(t);
          }),
          (kc.prototype.fe = function (e, n) {
            var r,
              i,
              o,
              s,
              a,
              u,
              c,
              h = this,
              l = Date.now();
            return this.calculateTargetCount(e, this.params.percentileToCollect)
              .next(function (t) {
                return (
                  (i =
                    t > h.params.maximumSequenceNumbersToCollect
                      ? (Br(
                          "LruGarbageCollector",
                          "Capping sequence numbers to collect down to the maximum of " +
                            h.params.maximumSequenceNumbersToCollect +
                            " from " +
                            t
                        ),
                        h.params.maximumSequenceNumbersToCollect)
                      : t),
                  (s = Date.now()),
                  h.nthSequenceNumber(e, i)
                );
              })
              .next(function (t) {
                return (r = t), (a = Date.now()), h.removeTargets(e, r, n);
              })
              .next(function (t) {
                return (
                  (o = t), (u = Date.now()), h.removeOrphanedDocuments(e, r)
                );
              })
              .next(function (t) {
                return (
                  (c = Date.now()),
                  qr() <= m.DEBUG &&
                    Br(
                      "LruGarbageCollector",
                      "LRU Garbage Collection\n\tCounted targets in " +
                        (s - l) +
                        "ms\n\tDetermined least recently used " +
                        i +
                        " in " +
                        (a - s) +
                        "ms\n\tRemoved " +
                        o +
                        " targets in " +
                        (u - a) +
                        "ms\n\tRemoved " +
                        t +
                        " documents in " +
                        (c - u) +
                        "ms\nTotal Duration: " +
                        (c - l) +
                        "ms"
                    ),
                  hu.resolve({
                    didRun: !0,
                    sequenceNumbersCollected: i,
                    targetsRemoved: o,
                    documentsRemoved: t,
                  })
                );
              });
          }),
          kc),
        Nc =
          ((Cc.prototype.he = function (t) {
            var n = this.de(t);
            return this.db
              .getTargetCache()
              .getTargetCount(t)
              .next(function (e) {
                return n.next(function (t) {
                  return e + t;
                });
              });
          }),
          (Cc.prototype.de = function (t) {
            var e = 0;
            return this.le(t, function (t) {
              e++;
            }).next(function () {
              return e;
            });
          }),
          (Cc.prototype.forEachTarget = function (t, e) {
            return this.db.getTargetCache().forEachTarget(t, e);
          }),
          (Cc.prototype.le = function (t, n) {
            return this.we(t, function (t, e) {
              return n(e);
            });
          }),
          (Cc.prototype.addReference = function (t, e, n) {
            return Oc(t, n);
          }),
          (Cc.prototype.removeReference = function (t, e, n) {
            return Oc(t, n);
          }),
          (Cc.prototype.removeTargets = function (t, e, n) {
            return this.db.getTargetCache().removeTargets(t, e, n);
          }),
          (Cc.prototype.markPotentiallyOrphaned = Oc),
          (Cc.prototype._e = function (t, e) {
            return (
              (r = e),
              (i = !1),
              yc((n = t))
                .Ot(function (t) {
                  return fc(n, t, r).next(function (t) {
                    return t && (i = !0), hu.resolve(!t);
                  });
                })
                .next(function () {
                  return i;
                })
            );
            var n, r, i;
          }),
          (Cc.prototype.removeOrphanedDocuments = function (n, r) {
            var i = this,
              o = this.db.getRemoteDocumentCache().newChangeBuffer(),
              s = [],
              a = 0;
            return this.we(n, function (e, t) {
              t <= r &&
                ((t = i._e(n, e).next(function (t) {
                  if (!t)
                    return (
                      a++,
                      o.getEntry(n, e).next(function () {
                        return o.removeEntry(e), Tc(n).delete([0, qa(e.path)]);
                      })
                    );
                })),
                s.push(t));
            })
              .next(function () {
                return hu.waitFor(s);
              })
              .next(function () {
                return o.apply(n);
              })
              .next(function () {
                return a;
              });
          }),
          (Cc.prototype.removeTarget = function (t, e) {
            e = e.withSequenceNumber(t.currentSequenceNumber);
            return this.db.getTargetCache().updateTargetData(t, e);
          }),
          (Cc.prototype.updateLimboDocument = Oc),
          (Cc.prototype.we = function (t, r) {
            var i,
              t = Tc(t),
              o = Or.o;
            return t
              .$t({ index: tu.documentTargetsIndex }, function (t, e) {
                var n = t[0];
                t[1];
                (t = e.path), (e = e.sequenceNumber);
                0 === n
                  ? (o !== Or.o && r(new Ai(ja(i)), o), (o = e), (i = t))
                  : (o = Or.o);
              })
              .next(function () {
                o !== Or.o && r(new Ai(ja(i)), o);
              });
          }),
          (Cc.prototype.getCacheSize = function (t) {
            return this.db.getRemoteDocumentCache().getSize(t);
          }),
          Cc);
      function Cc(t, e) {
        (this.db = t), (this.garbageCollector = new Dc(this, e));
      }
      function kc(t, e) {
        (this.ae = t), (this.params = e);
      }
      function Rc(t, e) {
        (this.garbageCollector = t),
          (this.asyncQueue = e),
          (this.oe = !1),
          (this.ce = null);
      }
      function xc(t) {
        (this.ne = t), (this.buffer = new Ks(_c)), (this.se = 0);
      }
      function Oc(t, e) {
        return Tc(t).put(
          ((t = t.currentSequenceNumber), new tu(0, qa(e.path), t))
        );
      }
      var Lc,
        Pc =
          ((Bc.prototype.get = function (t) {
            var e = this.mapKeyFn(t),
              e = this.inner[e];
            if (void 0 !== e)
              for (var n = 0, r = e; n < r.length; n++) {
                var i = r[n],
                  o = i[0],
                  i = i[1];
                if (this.equalsFn(o, t)) return i;
              }
          }),
          (Bc.prototype.has = function (t) {
            return void 0 !== this.get(t);
          }),
          (Bc.prototype.set = function (t, e) {
            var n = this.mapKeyFn(t),
              r = this.inner[n];
            if (void 0 !== r) {
              for (var i = 0; i < r.length; i++)
                if (this.equalsFn(r[i][0], t)) return void (r[i] = [t, e]);
              r.push([t, e]);
            } else this.inner[n] = [[t, e]];
          }),
          (Bc.prototype.delete = function (t) {
            var e = this.mapKeyFn(t),
              n = this.inner[e];
            if (void 0 === n) return !1;
            for (var r = 0; r < n.length; r++)
              if (this.equalsFn(n[r][0], t))
                return (
                  1 === n.length ? delete this.inner[e] : n.splice(r, 1), !0
                );
            return !1;
          }),
          (Bc.prototype.forEach = function (s) {
            ri(this.inner, function (t, e) {
              for (var n = 0, r = e; n < r.length; n++) {
                var i = r[n],
                  o = i[0],
                  i = i[1];
                s(o, i);
              }
            });
          }),
          (Bc.prototype.isEmpty = function () {
            return ii(this.inner);
          }),
          Bc),
        _ =
          ((qc.prototype.getReadTime = function (t) {
            t = this.changes.get(t);
            return t ? t.readTime : Zr.min();
          }),
          (qc.prototype.addEntry = function (t, e) {
            this.assertNotApplied(),
              this.changes.set(t.key, { document: t, readTime: e });
          }),
          (qc.prototype.removeEntry = function (t, e) {
            void 0 === e && (e = null),
              this.assertNotApplied(),
              this.changes.set(t, {
                document: Ki.newInvalidDocument(t),
                readTime: e,
              });
          }),
          (qc.prototype.getEntry = function (t, e) {
            this.assertNotApplied();
            var n = this.changes.get(e);
            return void 0 !== n
              ? hu.resolve(n.document)
              : this.getFromCache(t, e);
          }),
          (qc.prototype.getEntries = function (t, e) {
            return this.getAllFromCache(t, e);
          }),
          (qc.prototype.apply = function (t) {
            return (
              this.assertNotApplied(),
              (this.changesApplied = !0),
              this.applyChanges(t)
            );
          }),
          (qc.prototype.assertNotApplied = function () {}),
          qc),
        Mc =
          ((Uc.prototype.addEntry = function (t, e, n) {
            return Kc(t).put(Gc(e), n);
          }),
          (Uc.prototype.removeEntry = function (t, e) {
            (t = Kc(t)), (e = Gc(e));
            return t.delete(e);
          }),
          (Uc.prototype.updateMetadata = function (e, n) {
            var r = this;
            return this.getMetadata(e).next(function (t) {
              return (t.byteSize += n), r.me(e, t);
            });
          }),
          (Uc.prototype.getEntry = function (t, e) {
            var n = this;
            return Kc(t)
              .get(Gc(e))
              .next(function (t) {
                return n.ye(e, t);
              });
          }),
          (Uc.prototype.ge = function (t, e) {
            var n = this;
            return Kc(t)
              .get(Gc(e))
              .next(function (t) {
                return { document: n.ye(e, t), size: cc(t) };
              });
          }),
          (Uc.prototype.getEntries = function (t, e) {
            var n = this,
              r = Qs;
            return this.pe(t, e, function (t, e) {
              e = n.ye(t, e);
              r = r.insert(t, e);
            }).next(function () {
              return r;
            });
          }),
          (Uc.prototype.Ee = function (t, e) {
            var r = this,
              i = Qs,
              o = new Ms(Ai.comparator);
            return this.pe(t, e, function (t, e) {
              var n = r.ye(t, e);
              (i = i.insert(t, n)), (o = o.insert(t, cc(e)));
            }).next(function () {
              return { documents: i, Te: o };
            });
          }),
          (Uc.prototype.pe = function (t, e, i) {
            if (e.isEmpty()) return hu.resolve();
            var n = IDBKeyRange.bound(
                e.first().path.toArray(),
                e.last().path.toArray()
              ),
              o = e.getIterator(),
              s = o.getNext();
            return Kc(t)
              .$t({ range: n }, function (t, e, n) {
                for (var r = Ai.fromSegments(t); s && Ai.comparator(s, r) < 0; )
                  i(s, null), (s = o.getNext());
                s &&
                  s.isEqual(r) &&
                  (i(s, e), (s = o.hasNext() ? o.getNext() : null)),
                  s ? n.Ct(s.path.toArray()) : n.done();
              })
              .next(function () {
                for (; s; ) i(s, null), (s = o.hasNext() ? o.getNext() : null);
              });
          }),
          (Uc.prototype.getDocumentsMatchingQuery = function (t, r, e) {
            var n,
              i = this,
              o = Qs,
              s = r.path.length + 1,
              a = {};
            return (
              e.isEqual(Zr.min())
                ? ((n = r.path.toArray()),
                  (a.range = IDBKeyRange.lowerBound(n)))
                : ((n = r.path.toArray()),
                  (e = qu(e)),
                  (a.range = IDBKeyRange.lowerBound([n, e], !0)),
                  (a.index = $a.collectionReadTimeIndex)),
              Kc(t)
                .$t(a, function (t, e, n) {
                  t.length === s &&
                    ((e = Vu(i.R, e)),
                    r.path.isPrefixOf(e.key.path)
                      ? Bo(r, e) && (o = o.insert(e.key, e))
                      : n.done());
                })
                .next(function () {
                  return o;
                })
            );
          }),
          (Uc.prototype.newChangeBuffer = function (t) {
            return new Fc(this, !!t && t.trackRemovals);
          }),
          (Uc.prototype.getSize = function (t) {
            return this.getMetadata(t).next(function (t) {
              return t.byteSize;
            });
          }),
          (Uc.prototype.getMetadata = function (t) {
            return jc(t)
              .get(Ja.key)
              .next(function (t) {
                return Hr(!!t), t;
              });
          }),
          (Uc.prototype.me = function (t, e) {
            return jc(t).put(Ja.key, e);
          }),
          (Uc.prototype.ye = function (t, e) {
            if (e) {
              e = Vu(this.R, e);
              if (!e.isNoDocument() || !e.version.isEqual(Zr.min())) return e;
            }
            return Ki.newInvalidDocument(t);
          }),
          Uc),
        Fc =
          (n(Vc, (Lc = _)),
          (Vc.prototype.applyChanges = function (i) {
            var o = this,
              s = [],
              a = 0,
              u = new Ks(function (t, e) {
                return Yr(t.canonicalString(), e.canonicalString());
              });
            return (
              this.changes.forEach(function (t, e) {
                var n,
                  r = o.Ae.get(t);
                e.document.isValidDocument()
                  ? ((n = Uu(o.Ie.R, e.document, o.getReadTime(t))),
                    (u = u.add(t.path.popLast())),
                    (e = cc(n)),
                    (a += e - r),
                    s.push(o.Ie.addEntry(i, t, n)))
                  : ((a -= r),
                    o.trackRemovals
                      ? ((r = Uu(
                          o.Ie.R,
                          Ki.newNoDocument(t, Zr.min()),
                          o.getReadTime(t)
                        )),
                        s.push(o.Ie.addEntry(i, t, r)))
                      : s.push(o.Ie.removeEntry(i, t)));
              }),
              u.forEach(function (t) {
                s.push(o.Ie.Ut.addToCollectionParentIndex(i, t));
              }),
              s.push(this.Ie.updateMetadata(i, a)),
              hu.waitFor(s)
            );
          }),
          (Vc.prototype.getFromCache = function (t, e) {
            var n = this;
            return this.Ie.ge(t, e).next(function (t) {
              return n.Ae.set(e, t.size), t.document;
            });
          }),
          (Vc.prototype.getAllFromCache = function (t, e) {
            var n = this;
            return this.Ie.Ee(t, e).next(function (t) {
              var e = t.documents;
              return (
                t.Te.forEach(function (t, e) {
                  n.Ae.set(t, e);
                }),
                e
              );
            });
          }),
          Vc);
      function Vc(t, e) {
        var n = this;
        return (
          ((n = Lc.call(this) || this).Ie = t),
          (n.trackRemovals = e),
          (n.Ae = new Pc(
            function (t) {
              return t.toString();
            },
            function (t, e) {
              return t.isEqual(e);
            }
          )),
          n
        );
      }
      function Uc(t, e) {
        (this.R = t), (this.Ut = e);
      }
      function qc() {
        (this.changes = new Pc(
          function (t) {
            return t.toString();
          },
          function (t, e) {
            return t.isEqual(e);
          }
        )),
          (this.changesApplied = !1);
      }
      function Bc(t, e) {
        (this.mapKeyFn = t), (this.equalsFn = e), (this.inner = {});
      }
      function jc(t) {
        return ku(t, Ja.store);
      }
      function Kc(t) {
        return ku(t, $a.store);
      }
      function Gc(t) {
        return t.path.toArray();
      }
      var Qc =
        ((Hc.prototype.Rt = function (e, n, t, r) {
          var i = this;
          Hr(t < r && 0 <= t && r <= 11);
          var o = new lu("createOrUpgrade", n);
          t < 1 &&
            1 <= r &&
            (e.createObjectStore(Ka.store),
            (s = e).createObjectStore(Qa.store, { keyPath: Qa.keyPath }),
            s
              .createObjectStore(Ha.store, {
                keyPath: Ha.keyPath,
                autoIncrement: !0,
              })
              .createIndex(Ha.userMutationsIndex, Ha.userMutationsKeyPath, {
                unique: !0,
              }),
            s.createObjectStore(za.store),
            zc(e),
            e.createObjectStore($a.store));
          var s,
            a = hu.resolve();
          return (
            t < 3 &&
              3 <= r &&
              (0 !== t &&
                ((s = e).deleteObjectStore(tu.store),
                s.deleteObjectStore(Za.store),
                s.deleteObjectStore(eu.store),
                zc(e)),
              (a = a.next(function () {
                return (
                  (t = o.store(eu.store)),
                  (e = new eu(0, 0, Zr.min().toTimestamp(), 0)),
                  t.put(eu.key, e)
                );
                var t, e;
              }))),
            t < 4 &&
              4 <= r &&
              (a = (a =
                0 !== t
                  ? a.next(function () {
                      return (
                        (n = e),
                        (r = o)
                          .store(Ha.store)
                          .Nt()
                          .next(function (t) {
                            n.deleteObjectStore(Ha.store),
                              n
                                .createObjectStore(Ha.store, {
                                  keyPath: Ha.keyPath,
                                  autoIncrement: !0,
                                })
                                .createIndex(
                                  Ha.userMutationsIndex,
                                  Ha.userMutationsKeyPath,
                                  { unique: !0 }
                                );
                            var e = r.store(Ha.store),
                              t = t.map(function (t) {
                                return e.put(t);
                              });
                            return hu.waitFor(t);
                          })
                      );
                      var n, r;
                    })
                  : a).next(function () {
                e.createObjectStore(ru.store, { keyPath: ru.keyPath });
              })),
            t < 5 &&
              5 <= r &&
              (a = a.next(function () {
                return i.Re(o);
              })),
            t < 6 &&
              6 <= r &&
              (a = a.next(function () {
                return e.createObjectStore(Ja.store), i.be(o);
              })),
            t < 7 &&
              7 <= r &&
              (a = a.next(function () {
                return i.ve(o);
              })),
            t < 8 &&
              8 <= r &&
              (a = a.next(function () {
                return i.Pe(e, o);
              })),
            t < 9 &&
              9 <= r &&
              (a = a.next(function () {
                var t;
                (t = e).objectStoreNames.contains("remoteDocumentChanges") &&
                  t.deleteObjectStore("remoteDocumentChanges"),
                  (t = n.objectStore($a.store)).createIndex(
                    $a.readTimeIndex,
                    $a.readTimeIndexPath,
                    { unique: !1 }
                  ),
                  t.createIndex(
                    $a.collectionReadTimeIndex,
                    $a.collectionReadTimeIndexPath,
                    { unique: !1 }
                  );
              })),
            t < 10 &&
              10 <= r &&
              (a = a.next(function () {
                return i.Ve(o);
              })),
            (a =
              t < 11 && 11 <= r
                ? a.next(function () {
                    e.createObjectStore(iu.store, { keyPath: iu.keyPath }),
                      e.createObjectStore(ou.store, { keyPath: ou.keyPath });
                  })
                : a)
          );
        }),
        (Hc.prototype.be = function (e) {
          var n = 0;
          return e
            .store($a.store)
            .$t(function (t, e) {
              n += cc(e);
            })
            .next(function () {
              var t = new Ja(n);
              return e.store(Ja.store).put(Ja.key, t);
            });
        }),
        (Hc.prototype.Re = function (n) {
          var r = this,
            t = n.store(Qa.store),
            i = n.store(Ha.store);
          return t.Nt().next(function (t) {
            return hu.forEach(t, function (e) {
              var t = IDBKeyRange.bound(
                [e.userId, -1],
                [e.userId, e.lastAcknowledgedBatchId]
              );
              return i.Nt(Ha.userMutationsIndex, t).next(function (t) {
                return hu.forEach(t, function (t) {
                  Hr(t.userId === e.userId);
                  t = Gu(r.R, t);
                  return uc(n, e.userId, t).next(function () {});
                });
              });
            });
          });
        }),
        (Hc.prototype.ve = function (t) {
          var o = t.store(tu.store),
            e = t.store($a.store);
          return t
            .store(eu.store)
            .get(eu.key)
            .next(function (r) {
              var i = [];
              return e
                .$t(function (t, e) {
                  var n = new ai(t),
                    t = [0, qa(n)];
                  i.push(
                    o.get(t).next(function (t) {
                      return t
                        ? hu.resolve()
                        : o.put(
                            new tu(0, qa(n), r.highestListenSequenceNumber)
                          );
                    })
                  );
                })
                .next(function () {
                  return hu.waitFor(i);
                });
            });
        }),
        (Hc.prototype.Pe = function (t, e) {
          t.createObjectStore(nu.store, { keyPath: nu.keyPath });
          function r(t) {
            if (i.add(t)) {
              var e = t.lastSegment(),
                t = t.popLast();
              return n.put({ collectionId: e, parent: qa(t) });
            }
          }
          var n = e.store(nu.store),
            i = new Zu();
          return e
            .store($a.store)
            .$t({ kt: !0 }, function (t, e) {
              t = new ai(t);
              return r(t.popLast());
            })
            .next(function () {
              return e.store(za.store).$t({ kt: !0 }, function (t, e) {
                t[0];
                var n = t[1];
                t[2];
                n = ja(n);
                return r(n.popLast());
              });
            });
        }),
        (Hc.prototype.Ve = function (t) {
          var n = this,
            r = t.store(Za.store);
          return r.$t(function (t, e) {
            (e = Qu(e)), (e = Hu(n.R, e));
            return r.put(e);
          });
        }),
        Hc);
      function Hc(t) {
        this.R = t;
      }
      function zc(t) {
        t
          .createObjectStore(tu.store, { keyPath: tu.keyPath })
          .createIndex(tu.documentTargetsIndex, tu.documentTargetsKeyPath, {
            unique: !0,
          }),
          t
            .createObjectStore(Za.store, { keyPath: Za.keyPath })
            .createIndex(Za.queryTargetsIndexName, Za.queryTargetsKeyPath, {
              unique: !0,
            }),
          t.createObjectStore(eu.store);
      }
      var Wc =
          "Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",
        Yc =
          ((Xc.prototype.start = function () {
            var e = this;
            return this.je()
              .then(function () {
                if (!e.isPrimary && !e.allowTabSynchronization)
                  throw new Fr(Mr.FAILED_PRECONDITION, Wc);
                return (
                  e.We(),
                  e.Ge(),
                  e.ze(),
                  e.runTransaction(
                    "getHighestListenSequenceNumber",
                    "readonly",
                    function (t) {
                      return e.qe.getHighestSequenceNumber(t);
                    }
                  )
                );
              })
              .then(function (t) {
                e.Ne = new Or(t, e.De);
              })
              .then(function () {
                e.xe = !0;
              })
              .catch(function (t) {
                return e.Be && e.Be.close(), Promise.reject(t);
              });
          }),
          (Xc.prototype.He = function (n) {
            var t = this;
            return (
              (this.Me = function (e) {
                return y(t, void 0, void 0, function () {
                  return g(this, function (t) {
                    return this.started ? [2, n(e)] : [2];
                  });
                });
              }),
              n(this.isPrimary)
            );
          }),
          (Xc.prototype.setDatabaseDeletedListener = function (n) {
            var t = this;
            this.Be.vt(function (e) {
              return y(t, void 0, void 0, function () {
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return null === e.newVersion ? [4, n()] : [3, 2];
                    case 1:
                      t.sent(), (t.label = 2);
                    case 2:
                      return [2];
                  }
                });
              });
            });
          }),
          (Xc.prototype.setNetworkEnabled = function (t) {
            var e = this;
            this.networkEnabled !== t &&
              ((this.networkEnabled = t),
              this.Se.enqueueAndForget(function () {
                return y(e, void 0, void 0, function () {
                  return g(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return this.started ? [4, this.je()] : [3, 2];
                      case 1:
                        t.sent(), (t.label = 2);
                      case 2:
                        return [2];
                    }
                  });
                });
              }));
          }),
          (Xc.prototype.je = function () {
            var n = this;
            return this.runTransaction(
              "updateClientMetadataAndTryBecomePrimary",
              "readwrite",
              function (e) {
                return Jc(e)
                  .put(
                    new ru(
                      n.clientId,
                      Date.now(),
                      n.networkEnabled,
                      n.inForeground
                    )
                  )
                  .next(function () {
                    if (n.isPrimary)
                      return n.Je(e).next(function (t) {
                        t ||
                          ((n.isPrimary = !1),
                          n.Se.enqueueRetryable(function () {
                            return n.Me(!1);
                          }));
                      });
                  })
                  .next(function () {
                    return n.Ye(e);
                  })
                  .next(function (t) {
                    return n.isPrimary && !t
                      ? n.Xe(e).next(function () {
                          return !1;
                        })
                      : !!t &&
                          n.Ze(e).next(function () {
                            return !0;
                          });
                  });
              }
            )
              .catch(function (t) {
                if (Eu(t))
                  return (
                    Br(
                      "IndexedDbPersistence",
                      "Failed to extend owner lease: ",
                      t
                    ),
                    n.isPrimary
                  );
                if (!n.allowTabSynchronization) throw t;
                return (
                  Br(
                    "IndexedDbPersistence",
                    "Releasing owner lease after error during lease refresh",
                    t
                  ),
                  !1
                );
              })
              .then(function (t) {
                n.isPrimary !== t &&
                  n.Se.enqueueRetryable(function () {
                    return n.Me(t);
                  }),
                  (n.isPrimary = t);
              });
          }),
          (Xc.prototype.Je = function (t) {
            var e = this;
            return $c(t)
              .get(Ka.key)
              .next(function (t) {
                return hu.resolve(e.tn(t));
              });
          }),
          (Xc.prototype.en = function (t) {
            return Jc(t).delete(this.clientId);
          }),
          (Xc.prototype.nn = function () {
            return y(this, void 0, void 0, function () {
              var e,
                n,
                r,
                i,
                o = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return !this.isPrimary || this.sn(this.Oe, 18e5)
                      ? [3, 2]
                      : ((this.Oe = Date.now()),
                        [
                          4,
                          this.runTransaction(
                            "maybeGarbageCollectMultiClientState",
                            "readwrite-primary",
                            function (t) {
                              var r = ku(t, ru.store);
                              return r.Nt().next(function (t) {
                                var e = o.rn(t, 18e5),
                                  n = t.filter(function (t) {
                                    return -1 === e.indexOf(t);
                                  });
                                return hu
                                  .forEach(n, function (t) {
                                    return r.delete(t.clientId);
                                  })
                                  .next(function () {
                                    return n;
                                  });
                              });
                            }
                          ).catch(function () {
                            return [];
                          }),
                        ]);
                  case 1:
                    if (((e = t.sent()), this.Qe))
                      for (n = 0, r = e; n < r.length; n++)
                        (i = r[n]), this.Qe.removeItem(this.on(i.clientId));
                    t.label = 2;
                  case 2:
                    return [2];
                }
              });
            });
          }),
          (Xc.prototype.ze = function () {
            var t = this;
            this.$e = this.Se.enqueueAfterDelay(
              "client_metadata_refresh",
              4e3,
              function () {
                return t
                  .je()
                  .then(function () {
                    return t.nn();
                  })
                  .then(function () {
                    return t.ze();
                  });
              }
            );
          }),
          (Xc.prototype.tn = function (t) {
            return !!t && t.ownerId === this.clientId;
          }),
          (Xc.prototype.Ye = function (e) {
            var r = this;
            return this.Ce
              ? hu.resolve(!0)
              : $c(e)
                  .get(Ka.key)
                  .next(function (t) {
                    if (
                      null !== t &&
                      r.sn(t.leaseTimestampMs, 5e3) &&
                      !r.cn(t.ownerId)
                    ) {
                      if (r.tn(t) && r.networkEnabled) return !0;
                      if (!r.tn(t)) {
                        if (!t.allowTabSynchronization)
                          throw new Fr(Mr.FAILED_PRECONDITION, Wc);
                        return !1;
                      }
                    }
                    return (
                      !(!r.networkEnabled || !r.inForeground) ||
                      Jc(e)
                        .Nt()
                        .next(function (t) {
                          return (
                            void 0 ===
                            r.rn(t, 5e3).find(function (t) {
                              if (r.clientId !== t.clientId) {
                                var e = !r.networkEnabled && t.networkEnabled,
                                  n = !r.inForeground && t.inForeground,
                                  t = r.networkEnabled === t.networkEnabled;
                                if (e || (n && t)) return !0;
                              }
                              return !1;
                            })
                          );
                        })
                    );
                  })
                  .next(function (t) {
                    return (
                      r.isPrimary !== t &&
                        Br(
                          "IndexedDbPersistence",
                          "Client " +
                            (t ? "is" : "is not") +
                            " eligible for a primary lease."
                        ),
                      t
                    );
                  });
          }),
          (Xc.prototype.shutdown = function () {
            return y(this, void 0, void 0, function () {
              var n = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (this.xe = !1),
                      this.un(),
                      this.$e && (this.$e.cancel(), (this.$e = null)),
                      this.an(),
                      this.hn(),
                      [
                        4,
                        this.Be.runTransaction(
                          "shutdown",
                          "readwrite",
                          [Ka.store, ru.store],
                          function (t) {
                            var e = new Nu(t, Or.o);
                            return n.Xe(e).next(function () {
                              return n.en(e);
                            });
                          }
                        ),
                      ]
                    );
                  case 1:
                    return t.sent(), this.Be.close(), this.ln(), [2];
                }
              });
            });
          }),
          (Xc.prototype.rn = function (t, e) {
            var n = this;
            return t.filter(function (t) {
              return n.sn(t.updateTimeMs, e) && !n.cn(t.clientId);
            });
          }),
          (Xc.prototype.fn = function () {
            var e = this;
            return this.runTransaction(
              "getActiveClients",
              "readonly",
              function (t) {
                return Jc(t)
                  .Nt()
                  .next(function (t) {
                    return e.rn(t, 18e5).map(function (t) {
                      return t.clientId;
                    });
                  });
              }
            );
          }),
          Object.defineProperty(Xc.prototype, "started", {
            get: function () {
              return this.xe;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Xc.prototype.getMutationQueue = function (t) {
            return hc.Qt(t, this.R, this.Ut, this.referenceDelegate);
          }),
          (Xc.prototype.getTargetCache = function () {
            return this.qe;
          }),
          (Xc.prototype.getRemoteDocumentCache = function () {
            return this.Ue;
          }),
          (Xc.prototype.getIndexManager = function () {
            return this.Ut;
          }),
          (Xc.prototype.getBundleCache = function () {
            return this.Ke;
          }),
          (Xc.prototype.runTransaction = function (e, n, r) {
            var i,
              o = this;
            return (
              Br("IndexedDbPersistence", "Starting transaction:", e),
              this.Be.runTransaction(
                e,
                "readonly" === n ? "readonly" : "readwrite",
                au,
                function (t) {
                  return (
                    (i = new Nu(t, o.Ne ? o.Ne.next() : Or.o)),
                    "readwrite-primary" === n
                      ? o
                          .Je(i)
                          .next(function (t) {
                            return !!t || o.Ye(i);
                          })
                          .next(function (t) {
                            if (!t)
                              throw (
                                (jr(
                                  "Failed to obtain primary lease for action '" +
                                    e +
                                    "'."
                                ),
                                (o.isPrimary = !1),
                                o.Se.enqueueRetryable(function () {
                                  return o.Me(!1);
                                }),
                                new Fr(Mr.FAILED_PRECONDITION, uu))
                              );
                            return r(i);
                          })
                          .next(function (t) {
                            return o.Ze(i).next(function () {
                              return t;
                            });
                          })
                      : o.dn(i).next(function () {
                          return r(i);
                        })
                  );
                }
              ).then(function (t) {
                return i.raiseOnCommittedEvent(), t;
              })
            );
          }),
          (Xc.prototype.dn = function (t) {
            var e = this;
            return $c(t)
              .get(Ka.key)
              .next(function (t) {
                if (
                  null !== t &&
                  e.sn(t.leaseTimestampMs, 5e3) &&
                  !e.cn(t.ownerId) &&
                  !e.tn(t) &&
                  !(
                    e.Ce ||
                    (e.allowTabSynchronization && t.allowTabSynchronization)
                  )
                )
                  throw new Fr(Mr.FAILED_PRECONDITION, Wc);
              });
          }),
          (Xc.prototype.Ze = function (t) {
            var e = new Ka(
              this.clientId,
              this.allowTabSynchronization,
              Date.now()
            );
            return $c(t).put(Ka.key, e);
          }),
          (Xc.yt = function () {
            return fu.yt();
          }),
          (Xc.prototype.Xe = function (t) {
            var e = this,
              n = $c(t);
            return n.get(Ka.key).next(function (t) {
              return e.tn(t)
                ? (Br("IndexedDbPersistence", "Releasing primary lease."),
                  n.delete(Ka.key))
                : hu.resolve();
            });
          }),
          (Xc.prototype.sn = function (t, e) {
            var n = Date.now();
            return !(
              t < n - e ||
              (n < t &&
                (jr(
                  "Detected an update time that is in the future: " +
                    t +
                    " > " +
                    n
                ),
                1))
            );
          }),
          (Xc.prototype.We = function () {
            var t = this;
            null !== this.document &&
              "function" == typeof this.document.addEventListener &&
              ((this.ke = function () {
                t.Se.enqueueAndForget(function () {
                  return (
                    (t.inForeground = "visible" === t.document.visibilityState),
                    t.je()
                  );
                });
              }),
              this.document.addEventListener("visibilitychange", this.ke),
              (this.inForeground =
                "visible" === this.document.visibilityState));
          }),
          (Xc.prototype.an = function () {
            this.ke &&
              (this.document.removeEventListener("visibilitychange", this.ke),
              (this.ke = null));
          }),
          (Xc.prototype.Ge = function () {
            var t,
              e = this;
            "function" ==
              typeof (null === (t = this.window) || void 0 === t
                ? void 0
                : t.addEventListener) &&
              ((this.Fe = function () {
                e.un(),
                  i() &&
                    navigator.appVersion.match("Version/14") &&
                    e.Se.enterRestrictedMode(!0),
                  e.Se.enqueueAndForget(function () {
                    return e.shutdown();
                  });
              }),
              this.window.addEventListener("pagehide", this.Fe));
          }),
          (Xc.prototype.hn = function () {
            this.Fe &&
              (this.window.removeEventListener("pagehide", this.Fe),
              (this.Fe = null));
          }),
          (Xc.prototype.cn = function (t) {
            var e;
            try {
              var n =
                null !==
                (null === (e = this.Qe) || void 0 === e
                  ? void 0
                  : e.getItem(this.on(t)));
              return (
                Br(
                  "IndexedDbPersistence",
                  "Client '" +
                    t +
                    "' " +
                    (n ? "is" : "is not") +
                    " zombied in LocalStorage"
                ),
                n
              );
            } catch (t) {
              return (
                jr(
                  "IndexedDbPersistence",
                  "Failed to get zombied client id.",
                  t
                ),
                !1
              );
            }
          }),
          (Xc.prototype.un = function () {
            if (this.Qe)
              try {
                this.Qe.setItem(this.on(this.clientId), String(Date.now()));
              } catch (t) {
                jr("Failed to set zombie client id.", t);
              }
          }),
          (Xc.prototype.ln = function () {
            if (this.Qe)
              try {
                this.Qe.removeItem(this.on(this.clientId));
              } catch (t) {}
          }),
          (Xc.prototype.on = function (t) {
            return "firestore_zombie_" + this.persistenceKey + "_" + t;
          }),
          Xc);
      function Xc(t, e, n, r, i, o, s, a, u, c) {
        if (
          ((this.allowTabSynchronization = t),
          (this.persistenceKey = e),
          (this.clientId = n),
          (this.Se = i),
          (this.window = o),
          (this.document = s),
          (this.De = u),
          (this.Ce = c),
          (this.Ne = null),
          (this.xe = !1),
          (this.isPrimary = !1),
          (this.networkEnabled = !0),
          (this.Fe = null),
          (this.inForeground = !1),
          (this.ke = null),
          (this.$e = null),
          (this.Oe = Number.NEGATIVE_INFINITY),
          (this.Me = function (t) {
            return Promise.resolve();
          }),
          !Xc.yt())
        )
          throw new Fr(
            Mr.UNIMPLEMENTED,
            "This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled."
          );
        (this.referenceDelegate = new Nc(this, r)),
          (this.Le = e + "main"),
          (this.R = new Lu(a)),
          (this.Be = new fu(this.Le, 11, new Qc(this.R))),
          (this.qe = new mc(this.referenceDelegate, this.R)),
          (this.Ut = new tc()),
          (this.Ue = ((e = this.R), (a = this.Ut), new Mc(e, a))),
          (this.Ke = new Wu()),
          this.window && this.window.localStorage
            ? (this.Qe = this.window.localStorage)
            : ((this.Qe = null),
              !1 === c &&
                jr(
                  "IndexedDbPersistence",
                  "LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."
                ));
      }
      function $c(t) {
        return ku(t, Ka.store);
      }
      function Jc(t) {
        return ku(t, ru.store);
      }
      function Zc(t, e) {
        var n = t.projectId;
        return (
          t.isDefaultDatabase || (n += "." + t.database),
          "firestore/" + e + "/" + n + "/"
        );
      }
      function th(t, e) {
        (this.progress = t), (this.wn = e);
      }
      var eh =
          ((uh.prototype.mn = function (e, n) {
            var r = this;
            return this._n
              .getAllMutationBatchesAffectingDocumentKey(e, n)
              .next(function (t) {
                return r.yn(e, n, t);
              });
          }),
          (uh.prototype.yn = function (t, e, r) {
            return this.Ue.getEntry(t, e).next(function (t) {
              for (var e = 0, n = r; e < n.length; e++)
                n[e].applyToLocalView(t);
              return t;
            });
          }),
          (uh.prototype.gn = function (t, i) {
            t.forEach(function (t, e) {
              for (var n = 0, r = i; n < r.length; n++)
                r[n].applyToLocalView(e);
            });
          }),
          (uh.prototype.pn = function (e, t) {
            var n = this;
            return this.Ue.getEntries(e, t).next(function (t) {
              return n.En(e, t).next(function () {
                return t;
              });
            });
          }),
          (uh.prototype.En = function (t, e) {
            var n = this;
            return this._n
              .getAllMutationBatchesAffectingDocumentKeys(t, e)
              .next(function (t) {
                return n.gn(e, t);
              });
          }),
          (uh.prototype.getDocumentsMatchingQuery = function (t, e, n) {
            return (
              (r = e),
              Ai.isDocumentKey(r.path) &&
              null === r.collectionGroup &&
              0 === r.filters.length
                ? this.Tn(t, e.path)
                : Lo(e)
                ? this.In(t, e, n)
                : this.An(t, e, n)
            );
            var r;
          }),
          (uh.prototype.Tn = function (t, e) {
            return this.mn(t, new Ai(e)).next(function (t) {
              var e = Ws;
              return (e = t.isFoundDocument() ? e.insert(t.key, t) : e);
            });
          }),
          (uh.prototype.In = function (n, r, i) {
            var o = this,
              s = r.collectionGroup,
              a = Ws;
            return this.Ut.getCollectionParents(n, s).next(function (t) {
              return hu
                .forEach(t, function (t) {
                  var e,
                    e =
                      ((e = r),
                      (t = t.child(s)),
                      new Do(
                        t,
                        null,
                        e.explicitOrderBy.slice(),
                        e.filters.slice(),
                        e.limit,
                        e.limitType,
                        e.startAt,
                        e.endAt
                      ));
                  return o.An(n, e, i).next(function (t) {
                    t.forEach(function (t, e) {
                      a = a.insert(t, e);
                    });
                  });
                })
                .next(function () {
                  return a;
                });
            });
          }),
          (uh.prototype.An = function (e, n, t) {
            var c,
              h,
              r = this;
            return this.Ue.getDocumentsMatchingQuery(e, n, t)
              .next(function (t) {
                return (c = t), r._n.getAllMutationBatchesAffectingQuery(e, n);
              })
              .next(function (t) {
                return (
                  (h = t),
                  r.Rn(e, h, c).next(function (t) {
                    c = t;
                    for (var e = 0, n = h; e < n.length; e++)
                      for (
                        var r = n[e], i = 0, o = r.mutations;
                        i < o.length;
                        i++
                      ) {
                        var s = o[i],
                          a = s.key,
                          u = c.get(a);
                        null == u &&
                          ((u = Ki.newInvalidDocument(a)),
                          (c = c.insert(a, u))),
                          ps(s, u, r.localWriteTime),
                          u.isFoundDocument() || (c = c.remove(a));
                      }
                  })
                );
              })
              .next(function () {
                return (
                  c.forEach(function (t, e) {
                    Bo(n, e) || (c = c.remove(t));
                  }),
                  c
                );
              });
          }),
          (uh.prototype.Rn = function (t, e, n) {
            for (var r = $s(), i = 0, o = e; i < o.length; i++)
              for (var s = 0, a = o[i].mutations; s < a.length; s++) {
                var u = a[s];
                u instanceof bs && null === n.get(u.key) && (r = r.add(u.key));
              }
            var c = n;
            return this.Ue.getEntries(t, r).next(function (t) {
              return (
                t.forEach(function (t, e) {
                  e.isFoundDocument() && (c = c.insert(t, e));
                }),
                c
              );
            });
          }),
          uh),
        nh =
          ((ah.Pn = function (t, e) {
            for (
              var n = $s(), r = $s(), i = 0, o = e.docChanges;
              i < o.length;
              i++
            ) {
              var s = o[i];
              switch (s.type) {
                case 0:
                  n = n.add(s.doc.key);
                  break;
                case 1:
                  r = r.add(s.doc.key);
              }
            }
            return new ah(t, e.fromCache, n, r);
          }),
          ah),
        rh =
          ((sh.prototype.Vn = function (t) {
            this.Sn = t;
          }),
          (sh.prototype.getDocumentsMatchingQuery = function (e, r, i, o) {
            var s = this;
            return (0 === r.filters.length &&
              null === r.limit &&
              null == r.startAt &&
              null == r.endAt &&
              (0 === r.explicitOrderBy.length ||
                (1 === r.explicitOrderBy.length &&
                  r.explicitOrderBy[0].field.isKeyField()))) ||
              i.isEqual(Zr.min())
              ? this.Dn(e, r)
              : this.Sn.pn(e, o).next(function (t) {
                  var n = s.Cn(r, t);
                  return (ko(r) || Ro(r)) && s.Nn(r.limitType, n, o, i)
                    ? s.Dn(e, r)
                    : (qr() <= m.DEBUG &&
                        Br(
                          "QueryEngine",
                          "Re-using previous result from %s to execute query: %s",
                          i.toString(),
                          qo(r)
                        ),
                      s.Sn.getDocumentsMatchingQuery(e, r, i).next(function (
                        e
                      ) {
                        return (
                          n.forEach(function (t) {
                            e = e.insert(t.key, t);
                          }),
                          e
                        );
                      }));
                });
          }),
          (sh.prototype.Cn = function (n, t) {
            var r = new Ks(jo(n));
            return (
              t.forEach(function (t, e) {
                Bo(n, e) && (r = r.add(e));
              }),
              r
            );
          }),
          (sh.prototype.Nn = function (t, e, n, r) {
            if (n.size !== e.size) return !0;
            e = "F" === t ? e.last() : e.first();
            return !!e && (e.hasPendingWrites || 0 < e.version.compareTo(r));
          }),
          (sh.prototype.Dn = function (t, e) {
            return (
              qr() <= m.DEBUG &&
                Br(
                  "QueryEngine",
                  "Using full collection scan to execute query:",
                  qo(e)
                ),
              this.Sn.getDocumentsMatchingQuery(t, e, Zr.min())
            );
          }),
          sh),
        ih =
          ((oh.prototype.collectGarbage = function (e) {
            var n = this;
            return this.persistence.runTransaction(
              "Collect garbage",
              "readwrite-primary",
              function (t) {
                return e.collect(t, n.Fn);
              }
            );
          }),
          oh);
      function oh(t, e, n, r) {
        (this.persistence = t),
          (this.xn = e),
          (this.R = r),
          (this.Fn = new Ms(Yr)),
          (this.kn = new Pc(zi, Wi)),
          (this.$n = Zr.min()),
          (this._n = t.getMutationQueue(n)),
          (this.On = t.getRemoteDocumentCache()),
          (this.qe = t.getTargetCache()),
          (this.Mn = new eh(
            this.On,
            this._n,
            this.persistence.getIndexManager()
          )),
          (this.Ke = t.getBundleCache()),
          this.xn.Vn(this.Mn);
      }
      function sh() {}
      function ah(t, e, n, r) {
        (this.targetId = t), (this.fromCache = e), (this.bn = n), (this.vn = r);
      }
      function uh(t, e, n) {
        (this.Ue = t), (this._n = e), (this.Ut = n);
      }
      function ch(t, e, n, r) {
        return new ih(t, e, n, r);
      }
      function hh(i, o) {
        return y(this, void 0, void 0, function () {
          var e, n, v, r;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (n = (e = i)._n),
                  (v = e.Mn),
                  [
                    4,
                    e.persistence.runTransaction(
                      "Handle user change",
                      "readonly",
                      function (g) {
                        var m;
                        return e._n
                          .getAllMutationBatches(g)
                          .next(function (t) {
                            return (
                              (m = t),
                              (n = e.persistence.getMutationQueue(o)),
                              (v = new eh(
                                e.On,
                                n,
                                e.persistence.getIndexManager()
                              )),
                              n.getAllMutationBatches(g)
                            );
                          })
                          .next(function (t) {
                            for (
                              var e = [], n = [], r = $s(), i = 0, o = m;
                              i < o.length;
                              i++
                            ) {
                              var s = o[i];
                              e.push(s.batchId);
                              for (
                                var a = 0, u = s.mutations;
                                a < u.length;
                                a++
                              )
                                var c = u[a], r = r.add(c.key);
                            }
                            for (var h = 0, l = t; h < l.length; h++) {
                              var f = l[h];
                              n.push(f.batchId);
                              for (
                                var d = 0, p = f.mutations;
                                d < p.length;
                                d++
                              ) {
                                var y = p[d];
                                r = r.add(y.key);
                              }
                            }
                            return v.pn(g, r).next(function (t) {
                              return {
                                Ln: t,
                                removedBatchIds: e,
                                addedBatchIds: n,
                              };
                            });
                          });
                      }
                    ),
                  ]
                );
              case 1:
                return (
                  (r = t.sent()),
                  [2, ((e._n = n), (e.Mn = v), e.xn.Vn(e.Mn), r)]
                );
            }
          });
        });
      }
      function lh(t, h) {
        var l = t;
        return l.persistence.runTransaction(
          "Acknowledge batch",
          "readwrite-primary",
          function (t) {
            var e,
              r,
              i,
              o,
              s,
              n,
              a,
              u = h.batch.keys(),
              c = l.On.newChangeBuffer({ trackRemovals: !0 });
            return (
              (e = l),
              (r = t),
              (o = c),
              (s = (i = h).batch),
              (n = s.keys()),
              (a = hu.resolve()),
              n.forEach(function (n) {
                a = a
                  .next(function () {
                    return o.getEntry(r, n);
                  })
                  .next(function (t) {
                    var e = i.docVersions.get(n);
                    Hr(null !== e),
                      t.version.compareTo(e) < 0 &&
                        (s.applyToRemoteDocument(t, i),
                        t.isValidDocument() && o.addEntry(t, i.commitVersion));
                  });
              }),
              a
                .next(function () {
                  return e._n.removeMutationBatch(r, s);
                })
                .next(function () {
                  return c.apply(t);
                })
                .next(function () {
                  return l._n.performConsistencyCheck(t);
                })
                .next(function () {
                  return l.Mn.pn(t, u);
                })
            );
          }
        );
      }
      function fh(t) {
        var e = t;
        return e.persistence.runTransaction(
          "Get last remote snapshot version",
          "readonly",
          function (t) {
            return e.qe.getLastRemoteSnapshotVersion(t);
          }
        );
      }
      function dh(t, r) {
        var u = t,
          c = r.snapshotVersion,
          h = u.Fn;
        return u.persistence
          .runTransaction(
            "Apply remote event",
            "readwrite-primary",
            function (s) {
              var t = u.On.newChangeBuffer({ trackRemovals: !0 });
              h = u.Fn;
              var a = [];
              r.targetChanges.forEach(function (t, e) {
                var n,
                  r,
                  i,
                  o = h.get(e);
                o &&
                  (a.push(
                    u.qe
                      .removeMatchingKeys(s, t.removedDocuments, e)
                      .next(function () {
                        return u.qe.addMatchingKeys(s, t.addedDocuments, e);
                      })
                  ),
                  0 < (i = t.resumeToken).approximateByteSize() &&
                    ((n = o
                      .withResumeToken(i, c)
                      .withSequenceNumber(s.currentSequenceNumber)),
                    (h = h.insert(e, n)),
                    (r = o),
                    (i = t),
                    Hr(0 < (o = n).resumeToken.approximateByteSize()),
                    (0 === r.resumeToken.approximateByteSize() ||
                      3e8 <=
                        o.snapshotVersion.toMicroseconds() -
                          r.snapshotVersion.toMicroseconds() ||
                      0 <
                        i.addedDocuments.size +
                          i.modifiedDocuments.size +
                          i.removedDocuments.size) &&
                      a.push(u.qe.updateTargetData(s, n))));
              });
              var e,
                n = Qs;
              return (
                r.documentUpdates.forEach(function (t, e) {
                  r.resolvedLimboDocuments.has(t) &&
                    a.push(
                      u.persistence.referenceDelegate.updateLimboDocument(s, t)
                    );
                }),
                a.push(
                  ph(s, t, r.documentUpdates, c, void 0).next(function (t) {
                    n = t;
                  })
                ),
                c.isEqual(Zr.min()) ||
                  ((e = u.qe.getLastRemoteSnapshotVersion(s).next(function (t) {
                    return u.qe.setTargetsMetadata(
                      s,
                      s.currentSequenceNumber,
                      c
                    );
                  })),
                  a.push(e)),
                hu
                  .waitFor(a)
                  .next(function () {
                    return t.apply(s);
                  })
                  .next(function () {
                    return u.Mn.En(s, n);
                  })
                  .next(function () {
                    return n;
                  })
              );
            }
          )
          .then(function (t) {
            return (u.Fn = h), t;
          });
      }
      function ph(t, s, e, a, u) {
        var n = $s();
        return (
          e.forEach(function (t) {
            return (n = n.add(t));
          }),
          s.getEntries(t, n).next(function (i) {
            var o = Qs;
            return (
              e.forEach(function (t, e) {
                var n = i.get(t),
                  r = (null == u ? void 0 : u.get(t)) || a;
                e.isNoDocument() && e.version.isEqual(Zr.min())
                  ? (s.removeEntry(t, r), (o = o.insert(t, e)))
                  : !n.isValidDocument() ||
                    0 < e.version.compareTo(n.version) ||
                    (0 === e.version.compareTo(n.version) && n.hasPendingWrites)
                  ? (s.addEntry(e, r), (o = o.insert(t, e)))
                  : Br(
                      "LocalStore",
                      "Ignoring outdated watch update for ",
                      t,
                      ". Current version:",
                      n.version,
                      " Watch version:",
                      e.version
                    );
              }),
              o
            );
          })
        );
      }
      function yh(t, r) {
        var i = t;
        return i.persistence
          .runTransaction("Allocate target", "readwrite", function (e) {
            var n;
            return i.qe.getTargetData(e, r).next(function (t) {
              return t
                ? ((n = t), hu.resolve(n))
                : i.qe.allocateTargetId(e).next(function (t) {
                    return (
                      (n = new Ou(r, t, 0, e.currentSequenceNumber)),
                      i.qe.addTargetData(e, n).next(function () {
                        return n;
                      })
                    );
                  });
            });
          })
          .then(function (t) {
            var e = i.Fn.get(t.targetId);
            return (
              (null === e ||
                0 < t.snapshotVersion.compareTo(e.snapshotVersion)) &&
                ((i.Fn = i.Fn.insert(t.targetId, t)), i.kn.set(r, t.targetId)),
              t
            );
          });
      }
      function gh(i, o, s) {
        return y(this, void 0, void 0, function () {
          var e, n, r;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (n = (e = i).Fn.get(o)),
                  (r = s ? "readwrite" : "readwrite-primary"),
                  (t.label = 1);
              case 1:
                return (
                  t.trys.push([1, 4, , 5]),
                  s
                    ? [3, 3]
                    : [
                        4,
                        e.persistence.runTransaction(
                          "Release target",
                          r,
                          function (t) {
                            return e.persistence.referenceDelegate.removeTarget(
                              t,
                              n
                            );
                          }
                        ),
                      ]
                );
              case 2:
                t.sent(), (t.label = 3);
              case 3:
                return [3, 5];
              case 4:
                if (!Eu((r = t.sent()))) throw r;
                return (
                  Br(
                    "LocalStore",
                    "Failed to update sequence numbers for target " +
                      o +
                      ": " +
                      r
                  ),
                  [3, 5]
                );
              case 5:
                return (e.Fn = e.Fn.remove(o)), e.kn.delete(n.target), [2];
            }
          });
        });
      }
      function mh(t, o, s) {
        var a = t,
          u = Zr.min(),
          c = $s();
        return a.persistence.runTransaction(
          "Execute query",
          "readonly",
          function (e) {
            return (
              (t = a),
              (n = e),
              (r = Mo(o)),
              (void 0 !== (t = (i = t).kn.get(r))
                ? hu.resolve(i.Fn.get(t))
                : i.qe.getTargetData(n, r)
              )
                .next(function (t) {
                  if (t)
                    return (
                      (u = t.lastLimboFreeSnapshotVersion),
                      a.qe
                        .getMatchingKeysForTargetId(e, t.targetId)
                        .next(function (t) {
                          c = t;
                        })
                    );
                })
                .next(function () {
                  return a.xn.getDocumentsMatchingQuery(
                    e,
                    o,
                    s ? u : Zr.min(),
                    s ? c : $s()
                  );
                })
                .next(function (t) {
                  return { documents: t, Bn: c };
                })
            );
            var t, n, r, i;
          }
        );
      }
      function vh(t, e) {
        var n = t,
          r = n.qe,
          t = n.Fn.get(e);
        return t
          ? Promise.resolve(t.target)
          : n.persistence.runTransaction(
              "Get target data",
              "readonly",
              function (t) {
                return r.lt(t, e).next(function (t) {
                  return t ? t.target : null;
                });
              }
            );
      }
      function wh(t) {
        var s = t;
        return s.persistence
          .runTransaction("Get new document changes", "readonly", function (t) {
            return (
              (e = s.On),
              (n = t),
              (t = s.$n),
              (r = e),
              (i = Qs),
              (o = qu(t)),
              (t = Kc(n)),
              (n = IDBKeyRange.lowerBound(o, !0)),
              t
                .$t({ index: $a.readTimeIndex, range: n }, function (t, e) {
                  var n = Vu(r.R, e);
                  (i = i.insert(n.key, n)), (o = e.readTime);
                })
                .next(function () {
                  return { wn: i, readTime: Bu(o) };
                })
            );
            var e, n, r, i, o;
          })
          .then(function (t) {
            var e = t.wn,
              t = t.readTime;
            return (s.$n = t), e;
          });
      }
      function bh(n) {
        return y(this, void 0, void 0, function () {
          var e;
          return g(this, function (t) {
            return [
              2,
              (e = n).persistence
                .runTransaction(
                  "Synchronize last document change read time",
                  "readonly",
                  function (t) {
                    return (
                      (t = Kc(t)),
                      (r = Zr.min()),
                      t
                        .$t(
                          { index: $a.readTimeIndex, reverse: !0 },
                          function (t, e, n) {
                            e.readTime && (r = Bu(e.readTime)), n.done();
                          }
                        )
                        .next(function () {
                          return r;
                        })
                    );
                    var r;
                  }
                )
                .then(function (t) {
                  e.$n = t;
                }),
            ];
          });
        });
      }
      var Eh,
        Th,
        Ih =
          ((Gh.prototype.getBundleMetadata = function (t, e) {
            return hu.resolve(this.Qn.get(e));
          }),
          (Gh.prototype.saveBundleMetadata = function (t, e) {
            return (
              this.Qn.set(e.id, {
                id: e.id,
                version: e.version,
                createTime: ma(e.createTime),
              }),
              hu.resolve()
            );
          }),
          (Gh.prototype.getNamedQuery = function (t, e) {
            return hu.resolve(this.jn.get(e));
          }),
          (Gh.prototype.saveNamedQuery = function (t, e) {
            return (
              this.jn.set(e.name, {
                name: (e = e).name,
                query: zu(e.bundledQuery),
                readTime: ma(e.readTime),
              }),
              hu.resolve()
            );
          }),
          Gh),
        _h =
          ((Kh.prototype.isEmpty = function () {
            return this.Wn.isEmpty();
          }),
          (Kh.prototype.addReference = function (t, e) {
            e = new Sh(t, e);
            (this.Wn = this.Wn.add(e)), (this.zn = this.zn.add(e));
          }),
          (Kh.prototype.Jn = function (t, e) {
            var n = this;
            t.forEach(function (t) {
              return n.addReference(t, e);
            });
          }),
          (Kh.prototype.removeReference = function (t, e) {
            this.Yn(new Sh(t, e));
          }),
          (Kh.prototype.Xn = function (t, e) {
            var n = this;
            t.forEach(function (t) {
              return n.removeReference(t, e);
            });
          }),
          (Kh.prototype.Zn = function (t) {
            var e = this,
              n = new Ai(new ai([])),
              r = new Sh(n, t),
              t = new Sh(n, t + 1),
              i = [];
            return (
              this.zn.forEachInRange([r, t], function (t) {
                e.Yn(t), i.push(t.key);
              }),
              i
            );
          }),
          (Kh.prototype.ts = function () {
            var e = this;
            this.Wn.forEach(function (t) {
              return e.Yn(t);
            });
          }),
          (Kh.prototype.Yn = function (t) {
            (this.Wn = this.Wn.delete(t)), (this.zn = this.zn.delete(t));
          }),
          (Kh.prototype.es = function (t) {
            var e = new Ai(new ai([])),
              n = new Sh(e, t),
              t = new Sh(e, t + 1),
              r = $s();
            return (
              this.zn.forEachInRange([n, t], function (t) {
                r = r.add(t.key);
              }),
              r
            );
          }),
          (Kh.prototype.containsKey = function (t) {
            var e = new Sh(t, 0),
              e = this.Wn.firstAfterOrEqual(e);
            return null !== e && t.isEqual(e.key);
          }),
          Kh),
        Sh =
          ((jh.Gn = function (t, e) {
            return Ai.comparator(t.key, e.key) || Yr(t.ns, e.ns);
          }),
          (jh.Hn = function (t, e) {
            return Yr(t.ns, e.ns) || Ai.comparator(t.key, e.key);
          }),
          jh),
        Ah =
          ((Bh.prototype.checkEmpty = function (t) {
            return hu.resolve(0 === this._n.length);
          }),
          (Bh.prototype.addMutationBatch = function (t, e, n, r) {
            var i = this.ss;
            this.ss++, 0 < this._n.length && this._n[this._n.length - 1];
            n = new Ru(i, e, n, r);
            this._n.push(n);
            for (var o = 0, s = r; o < s.length; o++) {
              var a = s[o];
              (this.rs = this.rs.add(new Sh(a.key, i))),
                this.Ut.addToCollectionParentIndex(t, a.key.path.popLast());
            }
            return hu.resolve(n);
          }),
          (Bh.prototype.lookupMutationBatch = function (t, e) {
            return hu.resolve(this.os(e));
          }),
          (Bh.prototype.getNextMutationBatchAfterBatchId = function (t, e) {
            (e = this.cs(e + 1)), (e = e < 0 ? 0 : e);
            return hu.resolve(this._n.length > e ? this._n[e] : null);
          }),
          (Bh.prototype.getHighestUnacknowledgedBatchId = function () {
            return hu.resolve(0 === this._n.length ? -1 : this.ss - 1);
          }),
          (Bh.prototype.getAllMutationBatches = function (t) {
            return hu.resolve(this._n.slice());
          }),
          (Bh.prototype.getAllMutationBatchesAffectingDocumentKey = function (
            t,
            e
          ) {
            var n = this,
              r = new Sh(e, 0),
              e = new Sh(e, Number.POSITIVE_INFINITY),
              i = [];
            return (
              this.rs.forEachInRange([r, e], function (t) {
                t = n.os(t.ns);
                i.push(t);
              }),
              hu.resolve(i)
            );
          }),
          (Bh.prototype.getAllMutationBatchesAffectingDocumentKeys = function (
            t,
            e
          ) {
            var n = this,
              r = new Ks(Yr);
            return (
              e.forEach(function (t) {
                var e = new Sh(t, 0),
                  t = new Sh(t, Number.POSITIVE_INFINITY);
                n.rs.forEachInRange([e, t], function (t) {
                  r = r.add(t.ns);
                });
              }),
              hu.resolve(this.us(r))
            );
          }),
          (Bh.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {
            var n = e.path,
              r = n.length + 1,
              e = n;
            Ai.isDocumentKey(e) || (e = e.child(""));
            var e = new Sh(new Ai(e), 0),
              i = new Ks(Yr);
            return (
              this.rs.forEachWhile(function (t) {
                var e = t.key.path;
                return (
                  !!n.isPrefixOf(e) && (e.length === r && (i = i.add(t.ns)), !0)
                );
              }, e),
              hu.resolve(this.us(i))
            );
          }),
          (Bh.prototype.us = function (t) {
            var e = this,
              n = [];
            return (
              t.forEach(function (t) {
                t = e.os(t);
                null !== t && n.push(t);
              }),
              n
            );
          }),
          (Bh.prototype.removeMutationBatch = function (n, r) {
            var i = this;
            Hr(0 === this.hs(r.batchId, "removed")), this._n.shift();
            var o = this.rs;
            return hu
              .forEach(r.mutations, function (t) {
                var e = new Sh(t.key, r.batchId);
                return (
                  (o = o.delete(e)),
                  i.referenceDelegate.markPotentiallyOrphaned(n, t.key)
                );
              })
              .next(function () {
                i.rs = o;
              });
          }),
          (Bh.prototype.Gt = function (t) {}),
          (Bh.prototype.containsKey = function (t, e) {
            var n = new Sh(e, 0),
              n = this.rs.firstAfterOrEqual(n);
            return hu.resolve(e.isEqual(n && n.key));
          }),
          (Bh.prototype.performConsistencyCheck = function (t) {
            return this._n.length, hu.resolve();
          }),
          (Bh.prototype.hs = function (t, e) {
            return this.cs(t);
          }),
          (Bh.prototype.cs = function (t) {
            return 0 === this._n.length ? 0 : t - this._n[0].batchId;
          }),
          (Bh.prototype.os = function (t) {
            t = this.cs(t);
            return t < 0 || t >= this._n.length ? null : this._n[t];
          }),
          Bh),
        Dh =
          ((qh.prototype.addEntry = function (t, e, n) {
            var r = e.key,
              i = this.docs.get(r),
              o = i ? i.size : 0,
              i = this.ls(e);
            return (
              (this.docs = this.docs.insert(r, {
                document: e.clone(),
                size: i,
                readTime: n,
              })),
              (this.size += i - o),
              this.Ut.addToCollectionParentIndex(t, r.path.popLast())
            );
          }),
          (qh.prototype.removeEntry = function (t) {
            var e = this.docs.get(t);
            e && ((this.docs = this.docs.remove(t)), (this.size -= e.size));
          }),
          (qh.prototype.getEntry = function (t, e) {
            var n = this.docs.get(e);
            return hu.resolve(
              n ? n.document.clone() : Ki.newInvalidDocument(e)
            );
          }),
          (qh.prototype.getEntries = function (t, e) {
            var n = this,
              r = Qs;
            return (
              e.forEach(function (t) {
                var e = n.docs.get(t);
                r = r.insert(
                  t,
                  e ? e.document.clone() : Ki.newInvalidDocument(t)
                );
              }),
              hu.resolve(r)
            );
          }),
          (qh.prototype.getDocumentsMatchingQuery = function (t, e, n) {
            for (
              var r = Qs,
                i = new Ai(e.path.child("")),
                o = this.docs.getIteratorFrom(i);
              o.hasNext();

            ) {
              var s = o.getNext(),
                a = s.key,
                u = s.value,
                s = u.document,
                u = u.readTime;
              if (!e.path.isPrefixOf(a.path)) break;
              u.compareTo(n) <= 0 ||
                (Bo(e, s) && (r = r.insert(s.key, s.clone())));
            }
            return hu.resolve(r);
          }),
          (qh.prototype.fs = function (t, e) {
            return hu.forEach(this.docs, function (t) {
              return e(t);
            });
          }),
          (qh.prototype.newChangeBuffer = function (t) {
            return new Nh(this);
          }),
          (qh.prototype.getSize = function (t) {
            return hu.resolve(this.size);
          }),
          qh),
        Nh =
          (n(Uh, (Th = _)),
          (Uh.prototype.applyChanges = function (n) {
            var r = this,
              i = [];
            return (
              this.changes.forEach(function (t, e) {
                e.document.isValidDocument()
                  ? i.push(r.Ie.addEntry(n, e.document, r.getReadTime(t)))
                  : r.Ie.removeEntry(t);
              }),
              hu.waitFor(i)
            );
          }),
          (Uh.prototype.getFromCache = function (t, e) {
            return this.Ie.getEntry(t, e);
          }),
          (Uh.prototype.getAllFromCache = function (t, e) {
            return this.Ie.getEntries(t, e);
          }),
          Uh),
        Ch =
          ((Vh.prototype.forEachTarget = function (t, n) {
            return (
              this.ds.forEach(function (t, e) {
                return n(e);
              }),
              hu.resolve()
            );
          }),
          (Vh.prototype.getLastRemoteSnapshotVersion = function (t) {
            return hu.resolve(this.lastRemoteSnapshotVersion);
          }),
          (Vh.prototype.getHighestSequenceNumber = function (t) {
            return hu.resolve(this.ws);
          }),
          (Vh.prototype.allocateTargetId = function (t) {
            return (
              (this.highestTargetId = this.ys.next()),
              hu.resolve(this.highestTargetId)
            );
          }),
          (Vh.prototype.setTargetsMetadata = function (t, e, n) {
            return (
              n && (this.lastRemoteSnapshotVersion = n),
              e > this.ws && (this.ws = e),
              hu.resolve()
            );
          }),
          (Vh.prototype.te = function (t) {
            this.ds.set(t.target, t);
            var e = t.targetId;
            e > this.highestTargetId &&
              ((this.ys = new gc(e)), (this.highestTargetId = e)),
              t.sequenceNumber > this.ws && (this.ws = t.sequenceNumber);
          }),
          (Vh.prototype.addTargetData = function (t, e) {
            return this.te(e), (this.targetCount += 1), hu.resolve();
          }),
          (Vh.prototype.updateTargetData = function (t, e) {
            return this.te(e), hu.resolve();
          }),
          (Vh.prototype.removeTargetData = function (t, e) {
            return (
              this.ds.delete(e.target),
              this._s.Zn(e.targetId),
              --this.targetCount,
              hu.resolve()
            );
          }),
          (Vh.prototype.removeTargets = function (n, r, i) {
            var o = this,
              s = 0,
              a = [];
            return (
              this.ds.forEach(function (t, e) {
                e.sequenceNumber <= r &&
                  null === i.get(e.targetId) &&
                  (o.ds.delete(t),
                  a.push(o.removeMatchingKeysForTargetId(n, e.targetId)),
                  s++);
              }),
              hu.waitFor(a).next(function () {
                return s;
              })
            );
          }),
          (Vh.prototype.getTargetCount = function (t) {
            return hu.resolve(this.targetCount);
          }),
          (Vh.prototype.getTargetData = function (t, e) {
            e = this.ds.get(e) || null;
            return hu.resolve(e);
          }),
          (Vh.prototype.addMatchingKeys = function (t, e, n) {
            return this._s.Jn(e, n), hu.resolve();
          }),
          (Vh.prototype.removeMatchingKeys = function (e, t, n) {
            this._s.Xn(t, n);
            var r = this.persistence.referenceDelegate,
              i = [];
            return (
              r &&
                t.forEach(function (t) {
                  i.push(r.markPotentiallyOrphaned(e, t));
                }),
              hu.waitFor(i)
            );
          }),
          (Vh.prototype.removeMatchingKeysForTargetId = function (t, e) {
            return this._s.Zn(e), hu.resolve();
          }),
          (Vh.prototype.getMatchingKeysForTargetId = function (t, e) {
            e = this._s.es(e);
            return hu.resolve(e);
          }),
          (Vh.prototype.containsKey = function (t, e) {
            return hu.resolve(this._s.containsKey(e));
          }),
          Vh),
        kh =
          ((Fh.prototype.start = function () {
            return Promise.resolve();
          }),
          (Fh.prototype.shutdown = function () {
            return (this.xe = !1), Promise.resolve();
          }),
          Object.defineProperty(Fh.prototype, "started", {
            get: function () {
              return this.xe;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Fh.prototype.setDatabaseDeletedListener = function () {}),
          (Fh.prototype.setNetworkEnabled = function () {}),
          (Fh.prototype.getIndexManager = function () {
            return this.Ut;
          }),
          (Fh.prototype.getMutationQueue = function (t) {
            var e = this.gs[t.toKey()];
            return (
              e ||
                ((e = new Ah(this.Ut, this.referenceDelegate)),
                (this.gs[t.toKey()] = e)),
              e
            );
          }),
          (Fh.prototype.getTargetCache = function () {
            return this.qe;
          }),
          (Fh.prototype.getRemoteDocumentCache = function () {
            return this.Ue;
          }),
          (Fh.prototype.getBundleCache = function () {
            return this.Ke;
          }),
          (Fh.prototype.runTransaction = function (t, e, n) {
            var r = this;
            Br("MemoryPersistence", "Starting transaction:", t);
            var i = new Rh(this.Ne.next());
            return (
              this.referenceDelegate.Es(),
              n(i)
                .next(function (t) {
                  return r.referenceDelegate.Ts(i).next(function () {
                    return t;
                  });
                })
                .toPromise()
                .then(function (t) {
                  return i.raiseOnCommittedEvent(), t;
                })
            );
          }),
          (Fh.prototype.Is = function (e, n) {
            return hu.or(
              Object.values(this.gs).map(function (t) {
                return function () {
                  return t.containsKey(e, n);
                };
              })
            );
          }),
          Fh),
        Rh = (n(Mh, (Eh = C)), Mh),
        xh =
          ((Ph.bs = function (t) {
            return new Ph(t);
          }),
          Object.defineProperty(Ph.prototype, "vs", {
            get: function () {
              if (this.Rs) return this.Rs;
              throw Qr();
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Ph.prototype.addReference = function (t, e, n) {
            return (
              this.As.addReference(n, e),
              this.vs.delete(n.toString()),
              hu.resolve()
            );
          }),
          (Ph.prototype.removeReference = function (t, e, n) {
            return (
              this.As.removeReference(n, e),
              this.vs.add(n.toString()),
              hu.resolve()
            );
          }),
          (Ph.prototype.markPotentiallyOrphaned = function (t, e) {
            return this.vs.add(e.toString()), hu.resolve();
          }),
          (Ph.prototype.removeTarget = function (t, e) {
            var n = this;
            this.As.Zn(e.targetId).forEach(function (t) {
              return n.vs.add(t.toString());
            });
            var r = this.persistence.getTargetCache();
            return r
              .getMatchingKeysForTargetId(t, e.targetId)
              .next(function (t) {
                t.forEach(function (t) {
                  return n.vs.add(t.toString());
                });
              })
              .next(function () {
                return r.removeTargetData(t, e);
              });
          }),
          (Ph.prototype.Es = function () {
            this.Rs = new Set();
          }),
          (Ph.prototype.Ts = function (n) {
            var r = this,
              i = this.persistence.getRemoteDocumentCache().newChangeBuffer();
            return hu
              .forEach(this.vs, function (t) {
                var e = Ai.fromPath(t);
                return r.Ps(n, e).next(function (t) {
                  t || i.removeEntry(e);
                });
              })
              .next(function () {
                return (r.Rs = null), i.apply(n);
              });
          }),
          (Ph.prototype.updateLimboDocument = function (t, e) {
            var n = this;
            return this.Ps(t, e).next(function (t) {
              t ? n.vs.delete(e.toString()) : n.vs.add(e.toString());
            });
          }),
          (Ph.prototype.ps = function (t) {
            return 0;
          }),
          (Ph.prototype.Ps = function (t, e) {
            var n = this;
            return hu.or([
              function () {
                return hu.resolve(n.As.containsKey(e));
              },
              function () {
                return n.persistence.getTargetCache().containsKey(t, e);
              },
              function () {
                return n.persistence.Is(t, e);
              },
            ]);
          }),
          Ph),
        Oh =
          ((Lh.prototype.isAuthenticated = function () {
            return null != this.uid;
          }),
          (Lh.prototype.toKey = function () {
            return this.isAuthenticated()
              ? "uid:" + this.uid
              : "anonymous-user";
          }),
          (Lh.prototype.isEqual = function (t) {
            return t.uid === this.uid;
          }),
          Lh);
      function Lh(t) {
        this.uid = t;
      }
      function Ph(t) {
        (this.persistence = t), (this.As = new _h()), (this.Rs = null);
      }
      function Mh(t) {
        var e = this;
        return ((e = Eh.call(this) || this).currentSequenceNumber = t), e;
      }
      function Fh(t, e) {
        var n = this;
        (this.gs = {}),
          (this.Ne = new Or(0)),
          (this.xe = !1),
          (this.xe = !0),
          (this.referenceDelegate = t(this)),
          (this.qe = new Ch(this)),
          (this.Ut = new Ju()),
          (this.Ue =
            ((t = this.Ut),
            new Dh(t, function (t) {
              return n.referenceDelegate.ps(t);
            }))),
          (this.R = new Lu(e)),
          (this.Ke = new Ih(this.R));
      }
      function Vh(t) {
        (this.persistence = t),
          (this.ds = new Pc(zi, Wi)),
          (this.lastRemoteSnapshotVersion = Zr.min()),
          (this.highestTargetId = 0),
          (this.ws = 0),
          (this._s = new _h()),
          (this.targetCount = 0),
          (this.ys = gc.Jt());
      }
      function Uh(t) {
        var e = this;
        return ((e = Th.call(this) || this).Ie = t), e;
      }
      function qh(t, e) {
        (this.Ut = t),
          (this.ls = e),
          (this.docs = new Ms(Ai.comparator)),
          (this.size = 0);
      }
      function Bh(t, e) {
        (this.Ut = t),
          (this.referenceDelegate = e),
          (this._n = []),
          (this.ss = 1),
          (this.rs = new Ks(Sh.Gn));
      }
      function jh(t, e) {
        (this.key = t), (this.ns = e);
      }
      function Kh() {
        (this.Wn = new Ks(Sh.Gn)), (this.zn = new Ks(Sh.Hn));
      }
      function Gh(t) {
        (this.R = t), (this.Qn = new Map()), (this.jn = new Map());
      }
      function Qh(t, e) {
        return "firestore_clients_" + t + "_" + e;
      }
      function Hh(t, e, n) {
        n = "firestore_mutations_" + t + "_" + n;
        return e.isAuthenticated() && (n += "_" + e.uid), n;
      }
      function zh(t, e) {
        return "firestore_targets_" + t + "_" + e;
      }
      (Oh.UNAUTHENTICATED = new Oh(null)),
        (Oh.GOOGLE_CREDENTIALS = new Oh("google-credentials-uid")),
        (Oh.FIRST_PARTY = new Oh("first-party-uid"));
      var Wh,
        Yh =
          ((vl.Vs = function (t, e, n) {
            var r,
              i = JSON.parse(n),
              o =
                "object" == typeof i &&
                -1 !==
                  ["pending", "acknowledged", "rejected"].indexOf(i.state) &&
                (void 0 === i.error || "object" == typeof i.error);
            return (
              o &&
                i.error &&
                (o =
                  "string" == typeof i.error.message &&
                  "string" == typeof i.error.code) &&
                (r = new Fr(i.error.code, i.error.message)),
              o
                ? new vl(t, e, i.state, r)
                : (jr(
                    "SharedClientState",
                    "Failed to parse mutation state for ID '" + e + "': " + n
                  ),
                  null)
            );
          }),
          (vl.prototype.Ss = function () {
            var t = { state: this.state, updateTimeMs: Date.now() };
            return (
              this.error &&
                (t.error = {
                  code: this.error.code,
                  message: this.error.message,
                }),
              JSON.stringify(t)
            );
          }),
          vl),
        Xh =
          ((ml.Vs = function (t, e) {
            var n,
              r = JSON.parse(e),
              i =
                "object" == typeof r &&
                -1 !==
                  ["not-current", "current", "rejected"].indexOf(r.state) &&
                (void 0 === r.error || "object" == typeof r.error);
            return (
              i &&
                r.error &&
                (i =
                  "string" == typeof r.error.message &&
                  "string" == typeof r.error.code) &&
                (n = new Fr(r.error.code, r.error.message)),
              i
                ? new ml(t, r.state, n)
                : (jr(
                    "SharedClientState",
                    "Failed to parse target state for ID '" + t + "': " + e
                  ),
                  null)
            );
          }),
          (ml.prototype.Ss = function () {
            var t = { state: this.state, updateTimeMs: Date.now() };
            return (
              this.error &&
                (t.error = {
                  code: this.error.code,
                  message: this.error.message,
                }),
              JSON.stringify(t)
            );
          }),
          ml),
        $h =
          ((gl.Vs = function (t, e) {
            for (
              var n = JSON.parse(e),
                r = "object" == typeof n && n.activeTargetIds instanceof Array,
                i = Js,
                o = 0;
              r && o < n.activeTargetIds.length;
              ++o
            )
              (r = Si(n.activeTargetIds[o])), (i = i.add(n.activeTargetIds[o]));
            return r
              ? new gl(t, i)
              : (jr(
                  "SharedClientState",
                  "Failed to parse client data for instance '" + t + "': " + e
                ),
                null);
          }),
          gl),
        Jh =
          ((yl.Vs = function (t) {
            var e = JSON.parse(t);
            return "object" == typeof e &&
              -1 !== ["Unknown", "Online", "Offline"].indexOf(e.onlineState) &&
              "string" == typeof e.clientId
              ? new yl(e.clientId, e.onlineState)
              : (jr("SharedClientState", "Failed to parse online state: " + t),
                null);
          }),
          yl),
        Zh =
          ((pl.prototype.Ds = function (t) {
            this.activeTargetIds = this.activeTargetIds.add(t);
          }),
          (pl.prototype.Cs = function (t) {
            this.activeTargetIds = this.activeTargetIds.delete(t);
          }),
          (pl.prototype.Ss = function () {
            var t = {
              activeTargetIds: this.activeTargetIds.toArray(),
              updateTimeMs: Date.now(),
            };
            return JSON.stringify(t);
          }),
          pl),
        tl =
          ((dl.yt = function (t) {
            return !(!t || !t.localStorage);
          }),
          (dl.prototype.start = function () {
            return y(this, void 0, void 0, function () {
              var e,
                n,
                r,
                i,
                o,
                s,
                a,
                u,
                c,
                h,
                l = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, this.syncEngine.fn()];
                  case 1:
                    for (s = t.sent(), e = 0, n = s; e < n.length; e++)
                      (r = n[e]) !== this.Ns &&
                        (i = this.getItem(Qh(this.persistenceKey, r))) &&
                        (o = $h.Vs(r, i)) &&
                        (this.ks = this.ks.insert(o.clientId, o));
                    for (
                      this.Qs(),
                        (s = this.storage.getItem(this.Us)) &&
                          (a = this.js(s)) &&
                          this.Ws(a),
                        u = 0,
                        c = this.$s;
                      u < c.length;
                      u++
                    )
                      (h = c[u]), this.Fs(h);
                    return (
                      (this.$s = []),
                      this.window.addEventListener("pagehide", function () {
                        return l.shutdown();
                      }),
                      (this.started = !0),
                      [2]
                    );
                }
              });
            });
          }),
          (dl.prototype.writeSequenceNumber = function (t) {
            this.setItem(this.Ms, JSON.stringify(t));
          }),
          (dl.prototype.getAllActiveQueryTargets = function () {
            return this.Gs(this.ks);
          }),
          (dl.prototype.isActiveQueryTarget = function (n) {
            var r = !1;
            return (
              this.ks.forEach(function (t, e) {
                e.activeTargetIds.has(n) && (r = !0);
              }),
              r
            );
          }),
          (dl.prototype.addPendingMutation = function (t) {
            this.zs(t, "pending");
          }),
          (dl.prototype.updateMutationState = function (t, e, n) {
            this.zs(t, e, n), this.Hs(t);
          }),
          (dl.prototype.addLocalQueryTarget = function (t) {
            var e,
              n = "not-current";
            return (
              this.isActiveQueryTarget(t) &&
                (!(e = this.storage.getItem(zh(this.persistenceKey, t))) ||
                  ((e = Xh.Vs(t, e)) && (n = e.state))),
              this.Js.Ds(t),
              this.Qs(),
              n
            );
          }),
          (dl.prototype.removeLocalQueryTarget = function (t) {
            this.Js.Cs(t), this.Qs();
          }),
          (dl.prototype.isLocalQueryTarget = function (t) {
            return this.Js.activeTargetIds.has(t);
          }),
          (dl.prototype.clearQueryState = function (t) {
            this.removeItem(zh(this.persistenceKey, t));
          }),
          (dl.prototype.updateQueryState = function (t, e, n) {
            this.Ys(t, e, n);
          }),
          (dl.prototype.handleUserChange = function (t, e, n) {
            var r = this;
            e.forEach(function (t) {
              r.Hs(t);
            }),
              (this.currentUser = t),
              n.forEach(function (t) {
                r.addPendingMutation(t);
              });
          }),
          (dl.prototype.setOnlineState = function (t) {
            this.Xs(t);
          }),
          (dl.prototype.notifyBundleLoaded = function () {
            this.Zs();
          }),
          (dl.prototype.shutdown = function () {
            this.started &&
              (this.window.removeEventListener("storage", this.xs),
              this.removeItem(this.Os),
              (this.started = !1));
          }),
          (dl.prototype.getItem = function (t) {
            var e = this.storage.getItem(t);
            return Br("SharedClientState", "READ", t, e), e;
          }),
          (dl.prototype.setItem = function (t, e) {
            Br("SharedClientState", "SET", t, e), this.storage.setItem(t, e);
          }),
          (dl.prototype.removeItem = function (t) {
            Br("SharedClientState", "REMOVE", t), this.storage.removeItem(t);
          }),
          (dl.prototype.Fs = function (t) {
            var e = this,
              o = t;
            o.storageArea === this.storage &&
              (Br("SharedClientState", "EVENT", o.key, o.newValue),
              o.key !== this.Os
                ? this.Se.enqueueRetryable(function () {
                    return y(e, void 0, void 0, function () {
                      var e, n, r, i;
                      return g(this, function (t) {
                        if (this.started) {
                          if (null !== o.key)
                            if (this.Ls.test(o.key)) {
                              if (null == o.newValue)
                                return (
                                  (e = this.ti(o.key)), [2, this.ei(e, null)]
                                );
                              if ((e = this.ni(o.key, o.newValue)))
                                return [2, this.ei(e.clientId, e)];
                            } else if (this.Bs.test(o.key)) {
                              if (
                                null !== o.newValue &&
                                (n = this.si(o.key, o.newValue))
                              )
                                return [2, this.ii(n)];
                            } else if (this.qs.test(o.key)) {
                              if (
                                null !== o.newValue &&
                                (r = this.ri(o.key, o.newValue))
                              )
                                return [2, this.oi(r)];
                            } else if (o.key === this.Us) {
                              if (
                                null !== o.newValue &&
                                (i = this.js(o.newValue))
                              )
                                return [2, this.Ws(i)];
                            } else if (o.key === this.Ms)
                              (i = (function (t) {
                                var e = Or.o;
                                if (null != t)
                                  try {
                                    var n = JSON.parse(t);
                                    Hr("number" == typeof n), (e = n);
                                  } catch (t) {
                                    jr(
                                      "SharedClientState",
                                      "Failed to read sequence number from WebStorage",
                                      t
                                    );
                                  }
                                return e;
                              })(o.newValue)) !== Or.o &&
                                this.sequenceNumberHandler(i);
                            else if (o.key === this.Ks)
                              return [2, this.syncEngine.ci()];
                        } else this.$s.push(o);
                        return [2];
                      });
                    });
                  })
                : jr(
                    "Received WebStorage notification for local change. Another client might have garbage-collected our state"
                  ));
          }),
          Object.defineProperty(dl.prototype, "Js", {
            get: function () {
              return this.ks.get(this.Ns);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (dl.prototype.Qs = function () {
            this.setItem(this.Os, this.Js.Ss());
          }),
          (dl.prototype.zs = function (t, e, n) {
            (n = new Yh(this.currentUser, t, e, n)),
              (t = Hh(this.persistenceKey, this.currentUser, t));
            this.setItem(t, n.Ss());
          }),
          (dl.prototype.Hs = function (t) {
            t = Hh(this.persistenceKey, this.currentUser, t);
            this.removeItem(t);
          }),
          (dl.prototype.Xs = function (t) {
            t = { clientId: this.Ns, onlineState: t };
            this.storage.setItem(this.Us, JSON.stringify(t));
          }),
          (dl.prototype.Ys = function (t, e, n) {
            var r = zh(this.persistenceKey, t),
              n = new Xh(t, e, n);
            this.setItem(r, n.Ss());
          }),
          (dl.prototype.Zs = function () {
            this.setItem(this.Ks, "value-not-used");
          }),
          (dl.prototype.ti = function (t) {
            t = this.Ls.exec(t);
            return t ? t[1] : null;
          }),
          (dl.prototype.ni = function (t, e) {
            t = this.ti(t);
            return $h.Vs(t, e);
          }),
          (dl.prototype.si = function (t, e) {
            var n = this.Bs.exec(t),
              t = Number(n[1]),
              n = void 0 !== n[2] ? n[2] : null;
            return Yh.Vs(new Oh(n), t, e);
          }),
          (dl.prototype.ri = function (t, e) {
            (t = this.qs.exec(t)), (t = Number(t[1]));
            return Xh.Vs(t, e);
          }),
          (dl.prototype.js = function (t) {
            return Jh.Vs(t);
          }),
          (dl.prototype.ii = function (e) {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                return e.user.uid === this.currentUser.uid
                  ? [2, this.syncEngine.ui(e.batchId, e.state, e.error)]
                  : (Br(
                      "SharedClientState",
                      "Ignoring mutation for non-active user " + e.user.uid
                    ),
                    [2]);
              });
            });
          }),
          (dl.prototype.oi = function (t) {
            return this.syncEngine.ai(t.targetId, t.state, t.error);
          }),
          (dl.prototype.ei = function (t, e) {
            var n = this,
              r = e ? this.ks.insert(t, e) : this.ks.remove(t),
              i = this.Gs(this.ks),
              o = this.Gs(r),
              s = [],
              a = [];
            return (
              o.forEach(function (t) {
                i.has(t) || s.push(t);
              }),
              i.forEach(function (t) {
                o.has(t) || a.push(t);
              }),
              this.syncEngine.hi(s, a).then(function () {
                n.ks = r;
              })
            );
          }),
          (dl.prototype.Ws = function (t) {
            this.ks.get(t.clientId) && this.onlineStateHandler(t.onlineState);
          }),
          (dl.prototype.Gs = function (t) {
            var n = Js;
            return (
              t.forEach(function (t, e) {
                n = n.unionWith(e.activeTargetIds);
              }),
              n
            );
          }),
          dl),
        el =
          ((fl.prototype.addPendingMutation = function (t) {}),
          (fl.prototype.updateMutationState = function (t, e, n) {}),
          (fl.prototype.addLocalQueryTarget = function (t) {
            return this.li.Ds(t), this.fi[t] || "not-current";
          }),
          (fl.prototype.updateQueryState = function (t, e, n) {
            this.fi[t] = e;
          }),
          (fl.prototype.removeLocalQueryTarget = function (t) {
            this.li.Cs(t);
          }),
          (fl.prototype.isLocalQueryTarget = function (t) {
            return this.li.activeTargetIds.has(t);
          }),
          (fl.prototype.clearQueryState = function (t) {
            delete this.fi[t];
          }),
          (fl.prototype.getAllActiveQueryTargets = function () {
            return this.li.activeTargetIds;
          }),
          (fl.prototype.isActiveQueryTarget = function (t) {
            return this.li.activeTargetIds.has(t);
          }),
          (fl.prototype.start = function () {
            return (this.li = new Zh()), Promise.resolve();
          }),
          (fl.prototype.handleUserChange = function (t, e, n) {}),
          (fl.prototype.setOnlineState = function (t) {}),
          (fl.prototype.shutdown = function () {}),
          (fl.prototype.writeSequenceNumber = function (t) {}),
          (fl.prototype.notifyBundleLoaded = function () {}),
          fl),
        nl =
          ((ll.prototype.di = function (t) {}),
          (ll.prototype.shutdown = function () {}),
          ll),
        rl =
          ((hl.prototype.di = function (t) {
            this.gi.push(t);
          }),
          (hl.prototype.shutdown = function () {
            window.removeEventListener("online", this.wi),
              window.removeEventListener("offline", this.mi);
          }),
          (hl.prototype.pi = function () {
            window.addEventListener("online", this.wi),
              window.addEventListener("offline", this.mi);
          }),
          (hl.prototype._i = function () {
            Br(
              "ConnectivityMonitor",
              "Network connectivity changed: AVAILABLE"
            );
            for (var t = 0, e = this.gi; t < e.length; t++) (0, e[t])(0);
          }),
          (hl.prototype.yi = function () {
            Br(
              "ConnectivityMonitor",
              "Network connectivity changed: UNAVAILABLE"
            );
            for (var t = 0, e = this.gi; t < e.length; t++) (0, e[t])(1);
          }),
          (hl.yt = function () {
            return (
              "undefined" != typeof window &&
              void 0 !== window.addEventListener &&
              void 0 !== window.removeEventListener
            );
          }),
          hl),
        il = {
          BatchGetDocuments: "batchGet",
          Commit: "commit",
          RunQuery: "runQuery",
        },
        ol =
          ((cl.prototype.Ii = function (t) {
            this.Ai = t;
          }),
          (cl.prototype.Ri = function (t) {
            this.bi = t;
          }),
          (cl.prototype.onMessage = function (t) {
            this.vi = t;
          }),
          (cl.prototype.close = function () {
            this.Ti();
          }),
          (cl.prototype.send = function (t) {
            this.Ei(t);
          }),
          (cl.prototype.Pi = function () {
            this.Ai();
          }),
          (cl.prototype.Vi = function (t) {
            this.bi(t);
          }),
          (cl.prototype.Si = function (t) {
            this.vi(t);
          }),
          cl),
        sl =
          ((ul.prototype.Ni = function (e, t, n, r) {
            var i = this.xi(e, t);
            Br("RestConnection", "Sending: ", i, n);
            t = {};
            return (
              this.Fi(t, r),
              this.ki(e, i, t, n).then(
                function (t) {
                  return Br("RestConnection", "Received: ", t), t;
                },
                function (t) {
                  throw (
                    (Kr(
                      "RestConnection",
                      e + " failed with error: ",
                      t,
                      "url: ",
                      i,
                      "request:",
                      n
                    ),
                    t)
                  );
                }
              )
            );
          }),
          (ul.prototype.$i = function (t, e, n, r) {
            return this.Ni(t, e, n, r);
          }),
          (ul.prototype.Fi = function (t, e) {
            if (
              ((t["X-Goog-Api-Client"] = "gl-js/ fire/8.9.0"),
              (t["Content-Type"] = "text/plain"),
              this.databaseInfo.appId &&
                (t["X-Firebase-GMPID"] = this.databaseInfo.appId),
              e)
            )
              for (var n in e.authHeaders)
                e.authHeaders.hasOwnProperty(n) && (t[n] = e.authHeaders[n]);
          }),
          (ul.prototype.xi = function (t, e) {
            return this.Di + "/v1/" + e + ":" + il[t];
          }),
          n(al, (Wh = ul)),
          (al.prototype.ki = function (u, e, n, r) {
            return new Promise(function (o, s) {
              var a = new xr();
              a.listenOnce(Ar.COMPLETE, function () {
                try {
                  switch (a.getLastErrorCode()) {
                    case Sr.NO_ERROR:
                      var t = a.getResponseJson();
                      Br("Connection", "XHR received:", JSON.stringify(t)),
                        o(t);
                      break;
                    case Sr.TIMEOUT:
                      Br("Connection", 'RPC "' + u + '" timed out'),
                        s(new Fr(Mr.DEADLINE_EXCEEDED, "Request time out"));
                      break;
                    case Sr.HTTP_ERROR:
                      var e,
                        n,
                        r = a.getStatus();
                      Br(
                        "Connection",
                        'RPC "' + u + '" failed with status:',
                        r,
                        "response text:",
                        a.getResponseText()
                      ),
                        0 < r
                          ? (e = a.getResponseJson().error) &&
                            e.status &&
                            e.message
                            ? ((i = e.status.toLowerCase().replace(/_/g, "-")),
                              (n =
                                0 <= Object.values(Mr).indexOf(i)
                                  ? i
                                  : Mr.UNKNOWN),
                              s(new Fr(n, e.message)))
                            : s(
                                new Fr(
                                  Mr.UNKNOWN,
                                  "Server responded with status " +
                                    a.getStatus()
                                )
                              )
                          : s(new Fr(Mr.UNAVAILABLE, "Connection failed."));
                      break;
                    default:
                      Qr();
                  }
                } finally {
                  Br("Connection", 'RPC "' + u + '" completed.');
                }
                var i;
              });
              var t = JSON.stringify(r);
              a.send(e, "POST", t, n, 15);
            });
          }),
          (al.prototype.Oi = function (t, e) {
            var n,
              r = [
                this.Di,
                "/",
                "google.firestore.v1.Firestore",
                "/",
                t,
                "/channel",
              ],
              i = new wr(),
              o = _r(),
              t = {
                httpSessionIdParam: "gsessionid",
                initMessageHeaders: {},
                messageUrlParams: {
                  database:
                    "projects/" +
                    this.databaseId.projectId +
                    "/databases/" +
                    this.databaseId.database,
                },
                sendRawJson: !0,
                supportsCrossDomainXhr: !0,
                internalChannelParams: { forwardChannelRequestTimeoutMs: 6e5 },
                forceLongPolling: this.forceLongPolling,
                detectBufferingProxy: this.autoDetectLongPolling,
              };
            this.useFetchStreams && (t.xmlHttpFactory = new kr({})),
              this.Fi(t.initMessageHeaders, e),
              ("undefined" != typeof window &&
                (window.cordova || window.phonegap || window.PhoneGap) &&
                /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(
                  h()
                )) ||
                ("object" == typeof navigator &&
                  "ReactNative" === navigator.product) ||
                0 <= h().indexOf("Electron/") ||
                0 <= (n = h()).indexOf("MSIE ") ||
                0 <= n.indexOf("Trident/") ||
                0 <= h().indexOf("MSAppHost/") ||
                ("object" ==
                  typeof (n =
                    "object" == typeof chrome
                      ? chrome.runtime
                      : "object" == typeof browser
                      ? browser.runtime
                      : void 0) &&
                  void 0 !== n.id) ||
                (t.httpHeadersOverwriteParam = "$httpHeaders");
            r = r.join("");
            Br("Connection", "Creating WebChannel: " + r, t);
            var s = i.createWebChannel(r, t),
              a = !1,
              u = !1,
              c = new ol({
                Ei: function (t) {
                  u
                    ? Br(
                        "Connection",
                        "Not sending because WebChannel is closed:",
                        t
                      )
                    : (a ||
                        (Br("Connection", "Opening WebChannel transport."),
                        s.open(),
                        (a = !0)),
                      Br("Connection", "WebChannel sending:", t),
                      s.send(t));
                },
                Ti: function () {
                  return s.close();
                },
              }),
              t = function (t, e, n) {
                t.listen(e, function (t) {
                  try {
                    n(t);
                  } catch (t) {
                    setTimeout(function () {
                      throw t;
                    }, 0);
                  }
                });
              };
            return (
              t(s, Rr.EventType.OPEN, function () {
                u || Br("Connection", "WebChannel transport opened.");
              }),
              t(s, Rr.EventType.CLOSE, function () {
                u ||
                  ((u = !0),
                  Br("Connection", "WebChannel transport closed"),
                  c.Vi());
              }),
              t(s, Rr.EventType.ERROR, function (t) {
                u ||
                  ((u = !0),
                  Kr("Connection", "WebChannel transport errored:", t),
                  c.Vi(
                    new Fr(
                      Mr.UNAVAILABLE,
                      "The operation could not be completed"
                    )
                  ));
              }),
              t(s, Rr.EventType.MESSAGE, function (t) {
                var e, n, r, i;
                u ||
                  (Hr(!!(e = t.data[0])),
                  (n =
                    e.error ||
                    (null === (i = e[0]) || void 0 === i ? void 0 : i.error))
                    ? (Br("Connection", "WebChannel received error:", n),
                      (r = n.status),
                      (t = (function () {
                        var t = Ds[r];
                        if (void 0 !== t) return Ps(t);
                      })()),
                      (i = n.message),
                      void 0 === t &&
                        ((t = Mr.INTERNAL),
                        (i =
                          "Unknown error status: " +
                          r +
                          " with message " +
                          n.message)),
                      (u = !0),
                      c.Vi(new Fr(t, i)),
                      s.close())
                    : (Br("Connection", "WebChannel received:", e), c.Si(e)));
              }),
              t(o, Dr.STAT_EVENT, function (t) {
                t.stat === Nr
                  ? Br("Connection", "Detected buffering proxy")
                  : t.stat === Cr &&
                    Br("Connection", "Detected no buffering proxy");
              }),
              setTimeout(function () {
                c.Pi();
              }, 0),
              c
            );
          }),
          al);
      function al(t) {
        var e = this;
        return (
          ((e = Wh.call(this, t) || this).forceLongPolling =
            t.forceLongPolling),
          (e.autoDetectLongPolling = t.autoDetectLongPolling),
          (e.useFetchStreams = t.useFetchStreams),
          e
        );
      }
      function ul(t) {
        (this.databaseInfo = t), (this.databaseId = t.databaseId);
        var e = t.ssl ? "https" : "http";
        (this.Di = e + "://" + t.host),
          (this.Ci =
            "projects/" +
            this.databaseId.projectId +
            "/databases/" +
            this.databaseId.database +
            "/documents");
      }
      function cl(t) {
        (this.Ei = t.Ei), (this.Ti = t.Ti);
      }
      function hl() {
        var t = this;
        (this.wi = function () {
          return t._i();
        }),
          (this.mi = function () {
            return t.yi();
          }),
          (this.gi = []),
          this.pi();
      }
      function ll() {}
      function fl() {
        (this.li = new Zh()),
          (this.fi = {}),
          (this.onlineStateHandler = null),
          (this.sequenceNumberHandler = null);
      }
      function dl(t, e, n, r, i) {
        (this.window = t),
          (this.Se = e),
          (this.persistenceKey = n),
          (this.Ns = r),
          (this.syncEngine = null),
          (this.onlineStateHandler = null),
          (this.sequenceNumberHandler = null),
          (this.xs = this.Fs.bind(this)),
          (this.ks = new Ms(Yr)),
          (this.started = !1),
          (this.$s = []);
        n = n.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        (this.storage = this.window.localStorage),
          (this.currentUser = i),
          (this.Os = Qh(this.persistenceKey, this.Ns)),
          (this.Ms = "firestore_sequence_number_" + this.persistenceKey),
          (this.ks = this.ks.insert(this.Ns, new Zh())),
          (this.Ls = new RegExp("^firestore_clients_" + n + "_([^_]*)$")),
          (this.Bs = new RegExp(
            "^firestore_mutations_" + n + "_(\\d+)(?:_(.*))?$"
          )),
          (this.qs = new RegExp("^firestore_targets_" + n + "_(\\d+)$")),
          (this.Us = "firestore_online_state_" + this.persistenceKey),
          (this.Ks = "firestore_bundle_loaded_" + this.persistenceKey),
          this.window.addEventListener("storage", this.xs);
      }
      function pl() {
        this.activeTargetIds = Js;
      }
      function yl(t, e) {
        (this.clientId = t), (this.onlineState = e);
      }
      function gl(t, e) {
        (this.clientId = t), (this.activeTargetIds = e);
      }
      function ml(t, e, n) {
        (this.targetId = t), (this.state = e), (this.error = n);
      }
      function vl(t, e, n, r) {
        (this.user = t), (this.batchId = e), (this.state = n), (this.error = r);
      }
      function wl() {
        return "undefined" != typeof window ? window : null;
      }
      function bl() {
        return "undefined" != typeof document ? document : null;
      }
      function El(t) {
        return new pa(t, !0);
      }
      function Tl(t, e, n, r, i) {
        var o = this;
        (this.localStore = t),
          (this.datastore = e),
          (this.asyncQueue = n),
          (this.remoteSyncer = {}),
          (this.kr = []),
          (this.$r = new Map()),
          (this.Or = new Set()),
          (this.Mr = []),
          (this.Lr = i),
          this.Lr.di(function (t) {
            n.enqueueAndForget(function () {
              return y(o, void 0, void 0, function () {
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return Ql(this)
                        ? (Br(
                            "RemoteStore",
                            "Restarting streams for network reachability change."
                          ),
                          [
                            4,
                            (function (n) {
                              return y(this, void 0, void 0, function () {
                                var e;
                                return g(this, function (t) {
                                  switch (t.label) {
                                    case 0:
                                      return (e = n).Or.add(4), [4, Vl(e)];
                                    case 1:
                                      return (
                                        t.sent(),
                                        e.Br.set("Unknown"),
                                        e.Or.delete(4),
                                        [4, Fl(e)]
                                      );
                                    case 2:
                                      return t.sent(), [2];
                                  }
                                });
                              });
                            })(this),
                          ])
                        : [3, 2];
                    case 1:
                      t.sent(), (t.label = 2);
                    case 2:
                      return [2];
                  }
                });
              });
            });
          }),
          (this.Br = new kl(n, r));
      }
      var Il,
        _l,
        Sl,
        Al =
          ((Ml.prototype.reset = function () {
            this.qi = 0;
          }),
          (Ml.prototype.Qi = function () {
            this.qi = this.Bi;
          }),
          (Ml.prototype.ji = function (t) {
            var e = this;
            this.cancel();
            var n = Math.floor(this.qi + this.Wi()),
              r = Math.max(0, Date.now() - this.Ki),
              i = Math.max(0, n - r);
            0 < i &&
              Br(
                "ExponentialBackoff",
                "Backing off for " +
                  i +
                  " ms (base delay: " +
                  this.qi +
                  " ms, delay with jitter: " +
                  n +
                  " ms, last attempt: " +
                  r +
                  " ms ago)"
              ),
              (this.Ui = this.Se.enqueueAfterDelay(
                this.timerId,
                i,
                function () {
                  return (e.Ki = Date.now()), t();
                }
              )),
              (this.qi *= this.Li),
              this.qi < this.Mi && (this.qi = this.Mi),
              this.qi > this.Bi && (this.qi = this.Bi);
          }),
          (Ml.prototype.Gi = function () {
            null !== this.Ui && (this.Ui.skipDelay(), (this.Ui = null));
          }),
          (Ml.prototype.cancel = function () {
            null !== this.Ui && (this.Ui.cancel(), (this.Ui = null));
          }),
          (Ml.prototype.Wi = function () {
            return (Math.random() - 0.5) * this.qi;
          }),
          Ml),
        _ =
          ((Pl.prototype.tr = function () {
            return 1 === this.state || 2 === this.state || 4 === this.state;
          }),
          (Pl.prototype.er = function () {
            return 2 === this.state;
          }),
          (Pl.prototype.start = function () {
            3 !== this.state ? this.auth() : this.nr();
          }),
          (Pl.prototype.stop = function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.tr() ? [4, this.close(0)] : [3, 2];
                  case 1:
                    t.sent(), (t.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }),
          (Pl.prototype.sr = function () {
            (this.state = 0), this.Zi.reset();
          }),
          (Pl.prototype.ir = function () {
            var t = this;
            this.er() &&
              null === this.Xi &&
              (this.Xi = this.Se.enqueueAfterDelay(this.zi, 6e4, function () {
                return t.rr();
              }));
          }),
          (Pl.prototype.cr = function (t) {
            this.ur(), this.stream.send(t);
          }),
          (Pl.prototype.rr = function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                return this.er() ? [2, this.close(0)] : [2];
              });
            });
          }),
          (Pl.prototype.ur = function () {
            this.Xi && (this.Xi.cancel(), (this.Xi = null));
          }),
          (Pl.prototype.close = function (e, n) {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      this.ur(),
                      this.Zi.cancel(),
                      this.Yi++,
                      3 !== e
                        ? this.Zi.reset()
                        : n && n.code === Mr.RESOURCE_EXHAUSTED
                        ? (jr(n.toString()),
                          jr(
                            "Using maximum backoff delay to prevent overloading the backend."
                          ),
                          this.Zi.Qi())
                        : n &&
                          n.code === Mr.UNAUTHENTICATED &&
                          this.Ji.invalidateToken(),
                      null !== this.stream &&
                        (this.ar(), this.stream.close(), (this.stream = null)),
                      (this.state = e),
                      [4, this.listener.Ri(n)]
                    );
                  case 1:
                    return t.sent(), [2];
                }
              });
            });
          }),
          (Pl.prototype.ar = function () {}),
          (Pl.prototype.auth = function () {
            var n = this;
            this.state = 1;
            var t = this.hr(this.Yi),
              e = this.Yi;
            this.Ji.getToken().then(
              function (t) {
                n.Yi === e && n.lr(t);
              },
              function (e) {
                t(function () {
                  var t = new Fr(
                    Mr.UNKNOWN,
                    "Fetching auth token failed: " + e.message
                  );
                  return n.dr(t);
                });
              }
            );
          }),
          (Pl.prototype.lr = function (t) {
            var e = this,
              n = this.hr(this.Yi);
            (this.stream = this.wr(t)),
              this.stream.Ii(function () {
                n(function () {
                  return (e.state = 2), e.listener.Ii();
                });
              }),
              this.stream.Ri(function (t) {
                n(function () {
                  return e.dr(t);
                });
              }),
              this.stream.onMessage(function (t) {
                n(function () {
                  return e.onMessage(t);
                });
              });
          }),
          (Pl.prototype.nr = function () {
            var t = this;
            (this.state = 4),
              this.Zi.ji(function () {
                return y(t, void 0, void 0, function () {
                  return g(this, function (t) {
                    return (this.state = 0), this.start(), [2];
                  });
                });
              });
          }),
          (Pl.prototype.dr = function (t) {
            return (
              Br("PersistentStream", "close with error: " + t),
              (this.stream = null),
              this.close(3, t)
            );
          }),
          (Pl.prototype.hr = function (e) {
            var n = this;
            return function (t) {
              n.Se.enqueueAndForget(function () {
                return n.Yi === e
                  ? t()
                  : (Br(
                      "PersistentStream",
                      "stream callback skipped by getCloseGuardedDispatcher."
                    ),
                    Promise.resolve());
              });
            };
          }),
          Pl),
        Dl =
          (n(Ll, (Sl = _)),
          (Ll.prototype.wr = function (t) {
            return this.Hi.Oi("Listen", t);
          }),
          (Ll.prototype.onMessage = function (t) {
            this.Zi.reset();
            var e = (function (t, e) {
                if ("targetChange" in e) {
                  e.targetChange;
                  var n =
                      "NO_CHANGE" ===
                      (o = e.targetChange.targetChangeType || "NO_CHANGE")
                        ? 0
                        : "ADD" === o
                        ? 1
                        : "REMOVE" === o
                        ? 2
                        : "CURRENT" === o
                        ? 3
                        : "RESET" === o
                        ? 4
                        : Qr(),
                    r = e.targetChange.targetIds || [],
                    i =
                      ((s = e.targetChange.resumeToken),
                      t.I
                        ? (Hr(void 0 === s || "string" == typeof s),
                          li.fromBase64String(s || ""))
                        : (Hr(void 0 === s || s instanceof Uint8Array),
                          li.fromUint8Array(s || new Uint8Array()))),
                    o =
                      (a = e.targetChange.cause) &&
                      ((u = void 0 === (c = a).code ? Mr.UNKNOWN : Ps(c.code)),
                      new Fr(u, c.message || "")),
                    s = new ra(n, r, i, o || null);
                } else if ("documentChange" in e) {
                  e.documentChange,
                    (n = e.documentChange).document,
                    n.document.name,
                    n.document.updateTime;
                  var r = Ea(t, n.document.name),
                    i = ma(n.document.updateTime),
                    a = new Bi({ mapValue: { fields: n.document.fields } }),
                    u = ((o = Ki.newFoundDocument(r, i, a)), n.targetIds || []),
                    c = n.removedTargetIds || [];
                  s = new ea(u, c, o.key, o);
                } else if ("documentDelete" in e)
                  e.documentDelete,
                    (n = e.documentDelete).document,
                    (r = Ea(t, n.document)),
                    (i = n.readTime ? ma(n.readTime) : Zr.min()),
                    (a = Ki.newNoDocument(r, i)),
                    (o = n.removedTargetIds || []),
                    (s = new ea([], o, a.key, a));
                else if ("documentRemove" in e)
                  e.documentRemove,
                    (n = e.documentRemove).document,
                    (r = Ea(t, n.document)),
                    (i = n.removedTargetIds || []),
                    (s = new ea([], i, r, null));
                else {
                  if (!("filter" in e)) return Qr();
                  e.filter;
                  e = e.filter;
                  e.targetId,
                    (n = e.count || 0),
                    (r = new As(n)),
                    (i = e.targetId),
                    (s = new na(i, r));
                }
                return s;
              })(this.R, t),
              t = (function (t) {
                if (!("targetChange" in t)) return Zr.min();
                t = t.targetChange;
                return (!t.targetIds || !t.targetIds.length) && t.readTime
                  ? ma(t.readTime)
                  : Zr.min();
              })(t);
            return this.listener._r(e, t);
          }),
          (Ll.prototype.mr = function (t) {
            var e,
              n,
              r,
              i = {};
            (i.database = _a(this.R)),
              (i.addTarget =
                ((e = this.R),
                ((r = Yi((r = (n = t).target))
                  ? { documents: ka(e, r) }
                  : { query: Ra(e, r) }).targetId = n.targetId),
                0 < n.resumeToken.approximateByteSize()
                  ? (r.resumeToken = ga(e, n.resumeToken))
                  : 0 < n.snapshotVersion.compareTo(Zr.min()) &&
                    (r.readTime = ya(e, n.snapshotVersion.toTimestamp())),
                r));
            var o,
              t =
                (this.R,
                (o = t),
                null ==
                (t = (function () {
                  switch (o.purpose) {
                    case 0:
                      return null;
                    case 1:
                      return "existence-filter-mismatch";
                    case 2:
                      return "limbo-document";
                    default:
                      return Qr();
                  }
                })())
                  ? null
                  : { "goog-listen-tags": t });
            t && (i.labels = t), this.cr(i);
          }),
          (Ll.prototype.yr = function (t) {
            var e = {};
            (e.database = _a(this.R)), (e.removeTarget = t), this.cr(e);
          }),
          Ll),
        Nl =
          (n(Ol, (_l = _)),
          Object.defineProperty(Ol.prototype, "pr", {
            get: function () {
              return this.gr;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Ol.prototype.start = function () {
            (this.gr = !1),
              (this.lastStreamToken = void 0),
              _l.prototype.start.call(this);
          }),
          (Ol.prototype.ar = function () {
            this.gr && this.Er([]);
          }),
          (Ol.prototype.wr = function (t) {
            return this.Hi.Oi("Write", t);
          }),
          (Ol.prototype.onMessage = function (t) {
            if (
              (Hr(!!t.streamToken),
              (this.lastStreamToken = t.streamToken),
              this.gr)
            ) {
              this.Zi.reset();
              var e =
                  ((n = t.writeResults),
                  (r = t.commitTime),
                  n && 0 < n.length
                    ? (Hr(void 0 !== r),
                      n.map(function (t) {
                        return (
                          (n = r),
                          (t = (e = t).updateTime
                            ? ma(e.updateTime)
                            : ma(n)).isEqual(Zr.min()) && (t = ma(n)),
                          new cs(t, e.transformResults || [])
                        );
                        var e, n;
                      }))
                    : []),
                n = ma(t.commitTime);
              return this.listener.Tr(n, e);
            }
            var n, r;
            return (
              Hr(!t.writeResults || 0 === t.writeResults.length),
              (this.gr = !0),
              this.listener.Ir()
            );
          }),
          (Ol.prototype.Ar = function () {
            var t = {};
            (t.database = _a(this.R)), this.cr(t);
          }),
          (Ol.prototype.Er = function (t) {
            var e = this,
              t = {
                streamToken: this.lastStreamToken,
                writes: t.map(function (t) {
                  return Na(e.R, t);
                }),
              };
            this.cr(t);
          }),
          Ol),
        Cl =
          (n(xl, (Il = function () {})),
          (xl.prototype.br = function () {
            if (this.Rr)
              throw new Fr(
                Mr.FAILED_PRECONDITION,
                "The client has already been terminated."
              );
          }),
          (xl.prototype.Ni = function (e, n, r) {
            var i = this;
            return (
              this.br(),
              this.credentials
                .getToken()
                .then(function (t) {
                  return i.Hi.Ni(e, n, r, t);
                })
                .catch(function (t) {
                  throw "FirebaseError" === t.name
                    ? (t.code === Mr.UNAUTHENTICATED &&
                        i.credentials.invalidateToken(),
                      t)
                    : new Fr(Mr.UNKNOWN, t.toString());
                })
            );
          }),
          (xl.prototype.$i = function (e, n, r) {
            var i = this;
            return (
              this.br(),
              this.credentials
                .getToken()
                .then(function (t) {
                  return i.Hi.$i(e, n, r, t);
                })
                .catch(function (t) {
                  throw "FirebaseError" === t.name
                    ? (t.code === Mr.UNAUTHENTICATED &&
                        i.credentials.invalidateToken(),
                      t)
                    : new Fr(Mr.UNKNOWN, t.toString());
                })
            );
          }),
          (xl.prototype.terminate = function () {
            this.Rr = !0;
          }),
          xl),
        kl =
          ((Rl.prototype.Sr = function () {
            var t = this;
            0 === this.vr &&
              (this.Dr("Unknown"),
              (this.Pr = this.asyncQueue.enqueueAfterDelay(
                "online_state_timeout",
                1e4,
                function () {
                  return (
                    (t.Pr = null),
                    t.Cr("Backend didn't respond within 10 seconds."),
                    t.Dr("Offline"),
                    Promise.resolve()
                  );
                }
              )));
          }),
          (Rl.prototype.Nr = function (t) {
            "Online" === this.state
              ? this.Dr("Unknown")
              : (this.vr++,
                1 <= this.vr &&
                  (this.Fr(),
                  this.Cr(
                    "Connection failed 1 times. Most recent error: " +
                      t.toString()
                  ),
                  this.Dr("Offline")));
          }),
          (Rl.prototype.set = function (t) {
            this.Fr(),
              (this.vr = 0),
              "Online" === t && (this.Vr = !1),
              this.Dr(t);
          }),
          (Rl.prototype.Dr = function (t) {
            t !== this.state && ((this.state = t), this.onlineStateHandler(t));
          }),
          (Rl.prototype.Cr = function (t) {
            t =
              "Could not reach Cloud Firestore backend. " +
              t +
              "\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";
            this.Vr ? (jr(t), (this.Vr = !1)) : Br("OnlineStateTracker", t);
          }),
          (Rl.prototype.Fr = function () {
            null !== this.Pr && (this.Pr.cancel(), (this.Pr = null));
          }),
          Rl);
      function Rl(t, e) {
        (this.asyncQueue = t),
          (this.onlineStateHandler = e),
          (this.state = "Unknown"),
          (this.vr = 0),
          (this.Pr = null),
          (this.Vr = !0);
      }
      function xl(t, e, n) {
        var r = this;
        return (
          ((r = Il.call(this) || this).credentials = t),
          (r.Hi = e),
          (r.R = n),
          (r.Rr = !1),
          r
        );
      }
      function Ol(t, e, n, r, i) {
        var o = this;
        return (
          ((o =
            _l.call(
              this,
              t,
              "write_stream_connection_backoff",
              "write_stream_idle",
              e,
              n,
              i
            ) || this).R = r),
          (o.gr = !1),
          o
        );
      }
      function Ll(t, e, n, r, i) {
        var o = this;
        return (
          ((o =
            Sl.call(
              this,
              t,
              "listen_stream_connection_backoff",
              "listen_stream_idle",
              e,
              n,
              i
            ) || this).R = r),
          o
        );
      }
      function Pl(t, e, n, r, i, o) {
        (this.Se = t),
          (this.zi = n),
          (this.Hi = r),
          (this.Ji = i),
          (this.listener = o),
          (this.state = 0),
          (this.Yi = 0),
          (this.Xi = null),
          (this.stream = null),
          (this.Zi = new Al(t, e));
      }
      function Ml(t, e, n, r, i) {
        void 0 === n && (n = 1e3),
          void 0 === r && (r = 1.5),
          void 0 === i && (i = 6e4),
          (this.Se = t),
          (this.timerId = e),
          (this.Mi = n),
          (this.Li = r),
          (this.Bi = i),
          (this.qi = 0),
          (this.Ui = null),
          (this.Ki = Date.now()),
          this.reset();
      }
      function Fl(r) {
        return y(this, void 0, void 0, function () {
          var e, n;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                if (!Ql(r)) return [3, 4];
                (e = 0), (n = r.Mr), (t.label = 1);
              case 1:
                return e < n.length ? [4, (0, n[e])(!0)] : [3, 4];
              case 2:
                t.sent(), (t.label = 3);
              case 3:
                return e++, [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }
      function Vl(r) {
        return y(this, void 0, void 0, function () {
          var e, n;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (e = 0), (n = r.Mr), (t.label = 1);
              case 1:
                return e < n.length ? [4, (0, n[e])(!1)] : [3, 4];
              case 2:
                t.sent(), (t.label = 3);
              case 3:
                return e++, [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }
      function Ul(t, e) {
        t.$r.has(e.targetId) ||
          (t.$r.set(e.targetId, e), Gl(t) ? Kl(t) : tf(t).er() && Bl(t, e));
      }
      function ql(t, e) {
        var n = t,
          t = tf(n);
        n.$r.delete(e),
          t.er() && jl(n, e),
          0 === n.$r.size && (t.er() ? t.ir() : Ql(n) && n.Br.set("Unknown"));
      }
      function Bl(t, e) {
        t.qr.U(e.targetId), tf(t).mr(e);
      }
      function jl(t, e) {
        t.qr.U(e), tf(t).yr(e);
      }
      function Kl(e) {
        (e.qr = new oa({
          getRemoteKeysForTarget: function (t) {
            return e.remoteSyncer.getRemoteKeysForTarget(t);
          },
          lt: function (t) {
            return e.$r.get(t) || null;
          },
        })),
          tf(e).start(),
          e.Br.Sr();
      }
      function Gl(t) {
        return Ql(t) && !tf(t).tr() && 0 < t.$r.size;
      }
      function Ql(t) {
        return 0 === t.Or.size;
      }
      function Hl(t) {
        t.qr = void 0;
      }
      function zl(s, a, u) {
        return y(this, void 0, void 0, function () {
          var n, o;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                if (
                  (s.Br.set("Online"),
                  !(a instanceof ra && 2 === a.state && a.cause))
                )
                  return [3, 6];
                t.label = 1;
              case 1:
                return (
                  t.trys.push([1, 3, , 5]),
                  [
                    4,
                    (function (o, s) {
                      return y(this, void 0, void 0, function () {
                        var e, n, r, i;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              (e = s.cause),
                                (n = 0),
                                (r = s.targetIds),
                                (t.label = 1);
                            case 1:
                              return n < r.length
                                ? ((i = r[n]),
                                  o.$r.has(i)
                                    ? [4, o.remoteSyncer.rejectListen(i, e)]
                                    : [3, 3])
                                : [3, 5];
                            case 2:
                              t.sent(),
                                o.$r.delete(i),
                                o.qr.removeTarget(i),
                                (t.label = 3);
                            case 3:
                              t.label = 4;
                            case 4:
                              return n++, [3, 1];
                            case 5:
                              return [2];
                          }
                        });
                      });
                    })(s, a),
                  ]
                );
              case 2:
                return t.sent(), [3, 5];
              case 3:
                return (
                  (n = t.sent()),
                  Br(
                    "RemoteStore",
                    "Failed to remove targets %s: %s ",
                    a.targetIds.join(","),
                    n
                  ),
                  [4, Wl(s, n)]
                );
              case 4:
                return t.sent(), [3, 5];
              case 5:
                return [3, 13];
              case 6:
                if (
                  (a instanceof ea
                    ? s.qr.X(a)
                    : a instanceof na
                    ? s.qr.rt(a)
                    : s.qr.et(a),
                  u.isEqual(Zr.min()))
                )
                  return [3, 13];
                t.label = 7;
              case 7:
                return t.trys.push([7, 11, , 13]), [4, fh(s.localStore)];
              case 8:
                return (
                  (o = t.sent()),
                  0 <= u.compareTo(o)
                    ? [
                        4,
                        ((i = u),
                        (e = (r = s).qr.ut(i)).targetChanges.forEach(function (
                          t,
                          e
                        ) {
                          var n;
                          0 < t.resumeToken.approximateByteSize() &&
                            (n = r.$r.get(e)) &&
                            r.$r.set(e, n.withResumeToken(t.resumeToken, i));
                        }),
                        e.targetMismatches.forEach(function (t) {
                          var e = r.$r.get(t);
                          e &&
                            (r.$r.set(
                              t,
                              e.withResumeToken(
                                li.EMPTY_BYTE_STRING,
                                e.snapshotVersion
                              )
                            ),
                            jl(r, t),
                            (e = new Ou(e.target, t, 1, e.sequenceNumber)),
                            Bl(r, e));
                        }),
                        r.remoteSyncer.applyRemoteEvent(e)),
                      ]
                    : [3, 10]
                );
              case 9:
                t.sent(), (t.label = 10);
              case 10:
                return [3, 13];
              case 11:
                return (
                  Br(
                    "RemoteStore",
                    "Failed to raise snapshot:",
                    (o = t.sent())
                  ),
                  [4, Wl(s, o)]
                );
              case 12:
                return t.sent(), [3, 13];
              case 13:
                return [2];
            }
            var r, i, e;
          });
        });
      }
      function Wl(n, r, i) {
        return y(this, void 0, void 0, function () {
          var e = this;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                if (!Eu(r)) throw r;
                return n.Or.add(1), [4, Vl(n)];
              case 1:
                return (
                  t.sent(),
                  n.Br.set("Offline"),
                  (i =
                    i ||
                    function () {
                      return fh(n.localStore);
                    }),
                  n.asyncQueue.enqueueRetryable(function () {
                    return y(e, void 0, void 0, function () {
                      return g(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              Br("RemoteStore", "Retrying IndexedDB access"),
                              [4, i()]
                            );
                          case 1:
                            return t.sent(), n.Or.delete(1), [4, Fl(n)];
                          case 2:
                            return t.sent(), [2];
                        }
                      });
                    });
                  }),
                  [2]
                );
            }
          });
        });
      }
      function Yl(e, n) {
        return n().catch(function (t) {
          return Wl(e, t, n);
        });
      }
      function Xl(u) {
        return y(this, void 0, void 0, function () {
          var i, o, s, a;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (o = ef((i = u))),
                  (s = 0 < i.kr.length ? i.kr[i.kr.length - 1].batchId : -1),
                  (t.label = 1);
              case 1:
                if (!(Ql(i) && i.kr.length < 10)) return [3, 7];
                t.label = 2;
              case 2:
                return (
                  t.trys.push([2, 4, , 6]),
                  [
                    4,
                    ((e = i.localStore),
                    (n = s),
                    (r = e).persistence.runTransaction(
                      "Get next mutation batch",
                      "readonly",
                      function (t) {
                        return (
                          void 0 === n && (n = -1),
                          r._n.getNextMutationBatchAfterBatchId(t, n)
                        );
                      }
                    )),
                  ]
                );
              case 3:
                return null === (a = t.sent())
                  ? (0 === i.kr.length && o.ir(), [3, 7])
                  : ((s = a.batchId),
                    (function (t, e) {
                      t.kr.push(e);
                      t = ef(t);
                      t.er() && t.pr && t.Er(e.mutations);
                    })(i, a),
                    [3, 6]);
              case 4:
                return (a = t.sent()), [4, Wl(i, a)];
              case 5:
                return t.sent(), [3, 6];
              case 6:
                return [3, 1];
              case 7:
                return $l(i) && Jl(i), [2];
            }
            var e, n, r;
          });
        });
      }
      function $l(t) {
        return Ql(t) && !ef(t).tr() && 0 < t.kr.length;
      }
      function Jl(t) {
        ef(t).start();
      }
      function Zl(n, r) {
        return y(this, void 0, void 0, function () {
          var e;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (e = n), r ? (e.Or.delete(2), [4, Fl(e)]) : [3, 2];
              case 1:
                return t.sent(), [3, 5];
              case 2:
                return r ? [3, 4] : (e.Or.add(2), [4, Vl(e)]);
              case 3:
                t.sent(), e.Br.set("Unknown"), (t.label = 4);
              case 4:
                t.label = 5;
              case 5:
                return [2];
            }
          });
        });
      }
      function tf(n) {
        var t,
          e,
          r,
          i = this;
        return (
          n.Ur ||
            ((n.Ur =
              ((t = n.datastore),
              (e = n.asyncQueue),
              (r = {
                Ii: function (n) {
                  return y(this, void 0, void 0, function () {
                    return g(this, function (t) {
                      return (
                        n.$r.forEach(function (t, e) {
                          Bl(n, t);
                        }),
                        [2]
                      );
                    });
                  });
                }.bind(null, n),
                Ri: function (e, n) {
                  return y(this, void 0, void 0, function () {
                    return g(this, function (t) {
                      return (
                        Hl(e),
                        Gl(e) ? (e.Br.Nr(n), Kl(e)) : e.Br.set("Unknown"),
                        [2]
                      );
                    });
                  });
                }.bind(null, n),
                _r: zl.bind(null, n),
              }),
              t.br(),
              new Dl(e, t.Hi, t.credentials, t.R, r))),
            n.Mr.push(function (e) {
              return y(i, void 0, void 0, function () {
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return e
                        ? (n.Ur.sr(),
                          Gl(n) ? Kl(n) : n.Br.set("Unknown"),
                          [3, 3])
                        : [3, 1];
                    case 1:
                      return [4, n.Ur.stop()];
                    case 2:
                      t.sent(), Hl(n), (t.label = 3);
                    case 3:
                      return [2];
                  }
                });
              });
            })),
          n.Ur
        );
      }
      function ef(n) {
        var t,
          e,
          r,
          i = this;
        return (
          n.Kr ||
            ((n.Kr =
              ((t = n.datastore),
              (e = n.asyncQueue),
              (r = {
                Ii: function (e) {
                  return y(this, void 0, void 0, function () {
                    return g(this, function (t) {
                      return ef(e).Ar(), [2];
                    });
                  });
                }.bind(null, n),
                Ri: function (e, n) {
                  return y(this, void 0, void 0, function () {
                    return g(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return n && ef(e).pr
                            ? [
                                4,
                                (function (r, i) {
                                  return y(this, void 0, void 0, function () {
                                    var e, n;
                                    return g(this, function (t) {
                                      switch (t.label) {
                                        case 0:
                                          return Ls((n = i.code)) &&
                                            n !== Mr.ABORTED
                                            ? ((e = r.kr.shift()),
                                              ef(r).sr(),
                                              [
                                                4,
                                                Yl(r, function () {
                                                  return r.remoteSyncer.rejectFailedWrite(
                                                    e.batchId,
                                                    i
                                                  );
                                                }),
                                              ])
                                            : [3, 3];
                                        case 1:
                                          return t.sent(), [4, Xl(r)];
                                        case 2:
                                          t.sent(), (t.label = 3);
                                        case 3:
                                          return [2];
                                      }
                                    });
                                  });
                                })(e, n),
                              ]
                            : [3, 2];
                        case 1:
                          t.sent(), (t.label = 2);
                        case 2:
                          return $l(e) && Jl(e), [2];
                      }
                    });
                  });
                }.bind(null, n),
                Ir: function (o) {
                  return y(this, void 0, void 0, function () {
                    var e, n, r, i;
                    return g(this, function (t) {
                      for (e = ef(o), n = 0, r = o.kr; n < r.length; n++)
                        (i = r[n]), e.Er(i.mutations);
                      return [2];
                    });
                  });
                }.bind(null, n),
                Tr: function (r, i, o) {
                  return y(this, void 0, void 0, function () {
                    var e, n;
                    return g(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (
                            (e = r.kr.shift()),
                            (n = xu.from(e, i, o)),
                            [
                              4,
                              Yl(r, function () {
                                return r.remoteSyncer.applySuccessfulWrite(n);
                              }),
                            ]
                          );
                        case 1:
                          return t.sent(), [4, Xl(r)];
                        case 2:
                          return t.sent(), [2];
                      }
                    });
                  });
                }.bind(null, n),
              }),
              t.br(),
              new Nl(e, t.Hi, t.credentials, t.R, r))),
            n.Mr.push(function (e) {
              return y(i, void 0, void 0, function () {
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return e ? (n.Kr.sr(), [4, Xl(n)]) : [3, 2];
                    case 1:
                      return t.sent(), [3, 4];
                    case 2:
                      return [4, n.Kr.stop()];
                    case 3:
                      t.sent(),
                        0 < n.kr.length &&
                          (Br(
                            "RemoteStore",
                            "Stopping write stream with " +
                              n.kr.length +
                              " pending writes"
                          ),
                          (n.kr = [])),
                        (t.label = 4);
                    case 4:
                      return [2];
                  }
                });
              });
            })),
          n.Kr
        );
      }
      var nf =
        ((rf.createAndSchedule = function (t, e, n, r, i) {
          i = new rf(t, e, Date.now() + n, r, i);
          return i.start(n), i;
        }),
        (rf.prototype.start = function (t) {
          var e = this;
          this.timerHandle = setTimeout(function () {
            return e.handleDelayElapsed();
          }, t);
        }),
        (rf.prototype.skipDelay = function () {
          return this.handleDelayElapsed();
        }),
        (rf.prototype.cancel = function (t) {
          null !== this.timerHandle &&
            (this.clearTimeout(),
            this.deferred.reject(
              new Fr(Mr.CANCELLED, "Operation cancelled" + (t ? ": " + t : ""))
            ));
        }),
        (rf.prototype.handleDelayElapsed = function () {
          var e = this;
          this.asyncQueue.enqueueAndForget(function () {
            return null !== e.timerHandle
              ? (e.clearTimeout(),
                e.op().then(function (t) {
                  return e.deferred.resolve(t);
                }))
              : Promise.resolve();
          });
        }),
        (rf.prototype.clearTimeout = function () {
          null !== this.timerHandle &&
            (this.removalCallback(this),
            clearTimeout(this.timerHandle),
            (this.timerHandle = null));
        }),
        rf);
      function rf(t, e, n, r, i) {
        (this.asyncQueue = t),
          (this.timerId = e),
          (this.targetTimeMs = n),
          (this.op = r),
          (this.removalCallback = i),
          (this.deferred = new cu()),
          (this.then = this.deferred.promise.then.bind(this.deferred.promise)),
          this.deferred.promise.catch(function (t) {});
      }
      function of(t, e) {
        if ((jr("AsyncQueue", e + ": " + t), Eu(t)))
          return new Fr(Mr.UNAVAILABLE, e + ": " + t);
        throw t;
      }
      function sf() {
        (this.queries = new Pc(Uo, Vo)),
          (this.onlineState = "Unknown"),
          (this.Gr = new Set());
      }
      var af =
          ((df.emptySet = function (t) {
            return new df(t.comparator);
          }),
          (df.prototype.has = function (t) {
            return null != this.keyedMap.get(t);
          }),
          (df.prototype.get = function (t) {
            return this.keyedMap.get(t);
          }),
          (df.prototype.first = function () {
            return this.sortedSet.minKey();
          }),
          (df.prototype.last = function () {
            return this.sortedSet.maxKey();
          }),
          (df.prototype.isEmpty = function () {
            return this.sortedSet.isEmpty();
          }),
          (df.prototype.indexOf = function (t) {
            t = this.keyedMap.get(t);
            return t ? this.sortedSet.indexOf(t) : -1;
          }),
          Object.defineProperty(df.prototype, "size", {
            get: function () {
              return this.sortedSet.size;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (df.prototype.forEach = function (n) {
            this.sortedSet.inorderTraversal(function (t, e) {
              return n(t), !1;
            });
          }),
          (df.prototype.add = function (t) {
            var e = this.delete(t.key);
            return e.copy(
              e.keyedMap.insert(t.key, t),
              e.sortedSet.insert(t, null)
            );
          }),
          (df.prototype.delete = function (t) {
            var e = this.get(t);
            return e
              ? this.copy(this.keyedMap.remove(t), this.sortedSet.remove(e))
              : this;
          }),
          (df.prototype.isEqual = function (t) {
            if (!(t instanceof df)) return !1;
            if (this.size !== t.size) return !1;
            for (
              var e = this.sortedSet.getIterator(),
                n = t.sortedSet.getIterator();
              e.hasNext();

            ) {
              var r = e.getNext().key,
                i = n.getNext().key;
              if (!r.isEqual(i)) return !1;
            }
            return !0;
          }),
          (df.prototype.toString = function () {
            var e = [];
            return (
              this.forEach(function (t) {
                e.push(t.toString());
              }),
              0 === e.length
                ? "DocumentSet ()"
                : "DocumentSet (\n  " + e.join("  \n") + "\n)"
            );
          }),
          (df.prototype.copy = function (t, e) {
            var n = new df();
            return (
              (n.comparator = this.comparator),
              (n.keyedMap = t),
              (n.sortedSet = e),
              n
            );
          }),
          df),
        uf =
          ((ff.prototype.track = function (t) {
            var e = t.doc.key,
              n = this.Qr.get(e);
            !n || (0 !== t.type && 3 === n.type)
              ? (this.Qr = this.Qr.insert(e, t))
              : 3 === t.type && 1 !== n.type
              ? (this.Qr = this.Qr.insert(e, { type: n.type, doc: t.doc }))
              : 2 === t.type && 2 === n.type
              ? (this.Qr = this.Qr.insert(e, { type: 2, doc: t.doc }))
              : 2 === t.type && 0 === n.type
              ? (this.Qr = this.Qr.insert(e, { type: 0, doc: t.doc }))
              : 1 === t.type && 0 === n.type
              ? (this.Qr = this.Qr.remove(e))
              : 1 === t.type && 2 === n.type
              ? (this.Qr = this.Qr.insert(e, { type: 1, doc: n.doc }))
              : 0 === t.type && 1 === n.type
              ? (this.Qr = this.Qr.insert(e, { type: 2, doc: t.doc }))
              : Qr();
          }),
          (ff.prototype.jr = function () {
            var n = [];
            return (
              this.Qr.inorderTraversal(function (t, e) {
                n.push(e);
              }),
              n
            );
          }),
          ff),
        cf =
          ((lf.fromInitialDocuments = function (t, e, n, r) {
            var i = [];
            return (
              e.forEach(function (t) {
                i.push({ type: 0, doc: t });
              }),
              new lf(t, e, af.emptySet(e), i, n, r, !0, !1)
            );
          }),
          Object.defineProperty(lf.prototype, "hasPendingWrites", {
            get: function () {
              return !this.mutatedKeys.isEmpty();
            },
            enumerable: !1,
            configurable: !0,
          }),
          (lf.prototype.isEqual = function (t) {
            if (
              !(
                this.fromCache === t.fromCache &&
                this.syncStateChanged === t.syncStateChanged &&
                this.mutatedKeys.isEqual(t.mutatedKeys) &&
                Vo(this.query, t.query) &&
                this.docs.isEqual(t.docs) &&
                this.oldDocs.isEqual(t.oldDocs)
              )
            )
              return !1;
            var e = this.docChanges,
              n = t.docChanges;
            if (e.length !== n.length) return !1;
            for (var r = 0; r < e.length; r++)
              if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc))
                return !1;
            return !0;
          }),
          lf),
        hf = function () {
          (this.Wr = void 0), (this.listeners = []);
        };
      function lf(t, e, n, r, i, o, s, a) {
        (this.query = t),
          (this.docs = e),
          (this.oldDocs = n),
          (this.docChanges = r),
          (this.mutatedKeys = i),
          (this.fromCache = o),
          (this.syncStateChanged = s),
          (this.excludesMetadataChanges = a);
      }
      function ff() {
        this.Qr = new Ms(Ai.comparator);
      }
      function df(n) {
        (this.comparator = n
          ? function (t, e) {
              return n(t, e) || Ai.comparator(t.key, e.key);
            }
          : function (t, e) {
              return Ai.comparator(t.key, e.key);
            }),
          (this.keyedMap = Ws),
          (this.sortedSet = new Ms(this.comparator));
      }
      function pf(s, a) {
        return y(this, void 0, void 0, function () {
          var e, n, r, i, o;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                if (
                  ((e = s),
                  (n = a.query),
                  (r = !1),
                  (i = e.queries.get(n)) || ((r = !0), (i = new hf())),
                  !r)
                )
                  return [3, 4];
                t.label = 1;
              case 1:
                return t.trys.push([1, 3, , 4]), (o = i), [4, e.onListen(n)];
              case 2:
                return (o.Wr = t.sent()), [3, 4];
              case 3:
                return (
                  (o = t.sent()),
                  (o = of(
                    o,
                    "Initialization of query '" + qo(a.query) + "' failed"
                  )),
                  [2, void a.onError(o)]
                );
              case 4:
                return (
                  e.queries.set(n, i),
                  i.listeners.push(a),
                  a.zr(e.onlineState),
                  i.Wr && a.Hr(i.Wr) && gf(e),
                  [2]
                );
            }
          });
        });
      }
      function yf(s, a) {
        return y(this, void 0, void 0, function () {
          var e, n, r, i, o;
          return g(this, function (t) {
            return (
              (e = s),
              (n = a.query),
              (r = !1),
              (i = e.queries.get(n)) &&
                0 <= (o = i.listeners.indexOf(a)) &&
                (i.listeners.splice(o, 1), (r = 0 === i.listeners.length)),
              r ? [2, (e.queries.delete(n), e.onUnlisten(n))] : [2]
            );
          });
        });
      }
      function gf(t) {
        t.Gr.forEach(function (t) {
          t.next();
        });
      }
      var mf =
          ((_f.prototype.Hr = function (t) {
            if (!this.options.includeMetadataChanges) {
              for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {
                var i = r[n];
                3 !== i.type && e.push(i);
              }
              t = new cf(
                t.query,
                t.docs,
                t.oldDocs,
                e,
                t.mutatedKeys,
                t.fromCache,
                t.syncStateChanged,
                !0
              );
            }
            var o = !1;
            return (
              this.Yr
                ? this.Zr(t) && (this.Jr.next(t), (o = !0))
                : this.eo(t, this.onlineState) && (this.no(t), (o = !0)),
              (this.Xr = t),
              o
            );
          }),
          (_f.prototype.onError = function (t) {
            this.Jr.error(t);
          }),
          (_f.prototype.zr = function (t) {
            this.onlineState = t;
            var e = !1;
            return (
              this.Xr &&
                !this.Yr &&
                this.eo(this.Xr, t) &&
                (this.no(this.Xr), (e = !0)),
              e
            );
          }),
          (_f.prototype.eo = function (t, e) {
            return (
              !t.fromCache ||
              !(
                (this.options.so && "Offline" !== e) ||
                (t.docs.isEmpty() && "Offline" !== e)
              )
            );
          }),
          (_f.prototype.Zr = function (t) {
            if (0 < t.docChanges.length) return !0;
            var e = this.Xr && this.Xr.hasPendingWrites !== t.hasPendingWrites;
            return (
              !(!t.syncStateChanged && !e) &&
              !0 === this.options.includeMetadataChanges
            );
          }),
          (_f.prototype.no = function (t) {
            (t = cf.fromInitialDocuments(
              t.query,
              t.docs,
              t.mutatedKeys,
              t.fromCache
            )),
              (this.Yr = !0),
              this.Jr.next(t);
          }),
          _f),
        vf =
          ((If.prototype.io = function () {
            return "metadata" in this.payload;
          }),
          If),
        wf =
          ((Tf.prototype.qn = function (t) {
            return Ea(this.R, t);
          }),
          (Tf.prototype.Un = function (t) {
            return t.metadata.exists
              ? Da(this.R, t.document, !1)
              : Ki.newNoDocument(
                  this.qn(t.metadata.name),
                  this.Kn(t.metadata.readTime)
                );
          }),
          (Tf.prototype.Kn = ma),
          Tf),
        bf =
          ((Ef.prototype.oo = function (t) {
            this.progress.bytesLoaded += t.byteLength;
            var e = this.progress.documentsLoaded;
            return (
              t.payload.namedQuery
                ? this.queries.push(t.payload.namedQuery)
                : t.payload.documentMetadata
                ? (this.documents.push({
                    metadata: t.payload.documentMetadata,
                  }),
                  t.payload.documentMetadata.exists || ++e)
                : t.payload.document &&
                  ((this.documents[this.documents.length - 1].document =
                    t.payload.document),
                  ++e),
              e !== this.progress.documentsLoaded
                ? ((this.progress.documentsLoaded = e),
                  Object.assign({}, this.progress))
                : null
            );
          }),
          (Ef.prototype.co = function (t) {
            for (
              var e = new Map(), n = new wf(this.R), r = 0, i = t;
              r < i.length;
              r++
            ) {
              var o = i[r];
              if (o.metadata.queries)
                for (
                  var s = n.qn(o.metadata.name), a = 0, u = o.metadata.queries;
                  a < u.length;
                  a++
                ) {
                  var c = u[a],
                    h = (e.get(c) || $s()).add(s);
                  e.set(c, h);
                }
            }
            return e;
          }),
          (Ef.prototype.complete = function () {
            return y(this, void 0, void 0, function () {
              var e, n, r, i;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [
                      4,
                      (function (l, f, d, p) {
                        return y(this, void 0, void 0, function () {
                          var n, r, i, o, e, s, a, u, c, h;
                          return g(this, function (t) {
                            switch (t.label) {
                              case 0:
                                for (
                                  n = l, r = $s(), i = Qs, o = Ys, e = 0, s = d;
                                  e < s.length;
                                  e++
                                )
                                  (a = s[e]),
                                    (u = f.qn(a.metadata.name)),
                                    a.document && (r = r.add(u)),
                                    (i = i.insert(u, f.Un(a))),
                                    (o = o.insert(
                                      u,
                                      f.Kn(a.metadata.readTime)
                                    ));
                                return (
                                  (c = n.On.newChangeBuffer({
                                    trackRemovals: !0,
                                  })),
                                  [
                                    4,
                                    yh(
                                      n,
                                      Mo(
                                        Co(
                                          ai.fromString("__bundle__/docs/" + p)
                                        )
                                      )
                                    ),
                                  ]
                                );
                              case 1:
                                return (
                                  (h = t.sent()),
                                  [
                                    2,
                                    n.persistence.runTransaction(
                                      "Apply bundle documents",
                                      "readwrite",
                                      function (e) {
                                        return ph(e, c, i, Zr.min(), o)
                                          .next(function (t) {
                                            return c.apply(e), t;
                                          })
                                          .next(function (t) {
                                            return n.qe
                                              .removeMatchingKeysForTargetId(
                                                e,
                                                h.targetId
                                              )
                                              .next(function () {
                                                return n.qe.addMatchingKeys(
                                                  e,
                                                  r,
                                                  h.targetId
                                                );
                                              })
                                              .next(function () {
                                                return n.Mn.En(e, t);
                                              })
                                              .next(function () {
                                                return t;
                                              });
                                          });
                                      }
                                    ),
                                  ]
                                );
                            }
                          });
                        });
                      })(
                        this.localStore,
                        new wf(this.R),
                        this.documents,
                        this.ro.id
                      ),
                    ];
                  case 1:
                    (e = t.sent()),
                      (n = this.co(this.documents)),
                      (r = 0),
                      (i = this.queries),
                      (t.label = 2);
                  case 2:
                    return r < i.length
                      ? ((i = i[r]),
                        [
                          4,
                          (function (e, i, o) {
                            return (
                              void 0 === o && (o = $s()),
                              y(this, void 0, void 0, function () {
                                var n, r;
                                return g(this, function (t) {
                                  switch (t.label) {
                                    case 0:
                                      return [4, yh(e, Mo(zu(i.bundledQuery)))];
                                    case 1:
                                      return (
                                        (n = t.sent()),
                                        [
                                          2,
                                          (r = e).persistence.runTransaction(
                                            "Save named query",
                                            "readwrite",
                                            function (t) {
                                              var e = ma(i.readTime);
                                              if (
                                                0 <=
                                                n.snapshotVersion.compareTo(e)
                                              )
                                                return r.Ke.saveNamedQuery(
                                                  t,
                                                  i
                                                );
                                              e = n.withResumeToken(
                                                li.EMPTY_BYTE_STRING,
                                                e
                                              );
                                              return (
                                                (r.Fn = r.Fn.insert(
                                                  e.targetId,
                                                  e
                                                )),
                                                r.qe
                                                  .updateTargetData(t, e)
                                                  .next(function () {
                                                    return r.qe.removeMatchingKeysForTargetId(
                                                      t,
                                                      n.targetId
                                                    );
                                                  })
                                                  .next(function () {
                                                    return r.qe.addMatchingKeys(
                                                      t,
                                                      o,
                                                      n.targetId
                                                    );
                                                  })
                                                  .next(function () {
                                                    return r.Ke.saveNamedQuery(
                                                      t,
                                                      i
                                                    );
                                                  })
                                              );
                                            }
                                          ),
                                        ]
                                      );
                                  }
                                });
                              })
                            );
                          })(this.localStore, i, n.get(i.name)),
                        ])
                      : [3, 5];
                  case 3:
                    t.sent(), (t.label = 4);
                  case 4:
                    return r++, [3, 2];
                  case 5:
                    return [
                      2,
                      ((this.progress.taskState = "Success"),
                      new th(Object.assign({}, this.progress), e)),
                    ];
                }
              });
            });
          }),
          Ef);
      function Ef(t, e, n) {
        (this.ro = t),
          (this.localStore = e),
          (this.R = n),
          (this.queries = []),
          (this.documents = []),
          (this.progress = Sf(t));
      }
      function Tf(t) {
        this.R = t;
      }
      function If(t, e) {
        (this.payload = t), (this.byteLength = e);
      }
      function _f(t, e, n) {
        (this.query = t),
          (this.Jr = e),
          (this.Yr = !1),
          (this.Xr = null),
          (this.onlineState = "Unknown"),
          (this.options = n || {});
      }
      function Sf(t) {
        return {
          taskState: "Running",
          documentsLoaded: 0,
          bytesLoaded: 0,
          totalDocuments: t.totalDocuments,
          totalBytes: t.totalBytes,
        };
      }
      var Af = function (t) {
          this.key = t;
        },
        Df = function (t) {
          this.key = t;
        },
        Nf =
          (Object.defineProperty(Of.prototype, "wo", {
            get: function () {
              return this.uo;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Of.prototype._o = function (t, e) {
            var s = this,
              a = e ? e.mo : new uf(),
              u = (e || this).fo,
              c = (e || this).mutatedKeys,
              h = u,
              l = !1,
              f =
                ko(this.query) && u.size === this.query.limit ? u.last() : null,
              d =
                Ro(this.query) && u.size === this.query.limit
                  ? u.first()
                  : null;
            if (
              (t.inorderTraversal(function (t, e) {
                var n = u.get(t),
                  r = Bo(s.query, e) ? e : null,
                  i = !!n && s.mutatedKeys.has(n.key),
                  o =
                    !!r &&
                    (r.hasLocalMutations ||
                      (s.mutatedKeys.has(r.key) && r.hasCommittedMutations)),
                  e = !1;
                n && r
                  ? n.data.isEqual(r.data)
                    ? i !== o && (a.track({ type: 3, doc: r }), (e = !0))
                    : s.yo(n, r) ||
                      (a.track({ type: 2, doc: r }),
                      (e = !0),
                      ((f && 0 < s.lo(r, f)) || (d && s.lo(r, d) < 0)) &&
                        (l = !0))
                  : !n && r
                  ? (a.track({ type: 0, doc: r }), (e = !0))
                  : n &&
                    !r &&
                    (a.track({ type: 1, doc: n }),
                    (e = !0),
                    (f || d) && (l = !0)),
                  e &&
                    (c = r
                      ? ((h = h.add(r)), o ? c.add(t) : c.delete(t))
                      : ((h = h.delete(t)), c.delete(t)));
              }),
              ko(this.query) || Ro(this.query))
            )
              for (; h.size > this.query.limit; ) {
                var n = ko(this.query) ? h.last() : h.first(),
                  h = h.delete(n.key),
                  c = c.delete(n.key);
                a.track({ type: 1, doc: n });
              }
            return { fo: h, mo: a, Nn: l, mutatedKeys: c };
          }),
          (Of.prototype.yo = function (t, e) {
            return (
              t.hasLocalMutations &&
              e.hasCommittedMutations &&
              !e.hasLocalMutations
            );
          }),
          (Of.prototype.applyChanges = function (t, e, n) {
            var o = this,
              r = this.fo;
            (this.fo = t.fo), (this.mutatedKeys = t.mutatedKeys);
            var i = t.mo.jr();
            i.sort(function (t, e) {
              return (
                (r = t.type), (i = e.type), n(r) - n(i) || o.lo(t.doc, e.doc)
              );
              function n(t) {
                switch (t) {
                  case 0:
                    return 1;
                  case 2:
                  case 3:
                    return 2;
                  case 1:
                    return 0;
                  default:
                    return Qr();
                }
              }
              var r, i;
            }),
              this.po(n);
            var s = e ? this.Eo() : [],
              n = 0 === this.ho.size && this.current ? 1 : 0,
              e = n !== this.ao;
            return (
              (this.ao = n),
              0 !== i.length || e
                ? {
                    snapshot: new cf(
                      this.query,
                      t.fo,
                      r,
                      i,
                      t.mutatedKeys,
                      0 == n,
                      e,
                      !1
                    ),
                    To: s,
                  }
                : { To: s }
            );
          }),
          (Of.prototype.zr = function (t) {
            return this.current && "Offline" === t
              ? ((this.current = !1),
                this.applyChanges(
                  {
                    fo: this.fo,
                    mo: new uf(),
                    mutatedKeys: this.mutatedKeys,
                    Nn: !1,
                  },
                  !1
                ))
              : { To: [] };
          }),
          (Of.prototype.Io = function (t) {
            return (
              !this.uo.has(t) &&
              !!this.fo.has(t) &&
              !this.fo.get(t).hasLocalMutations
            );
          }),
          (Of.prototype.po = function (t) {
            var e = this;
            t &&
              (t.addedDocuments.forEach(function (t) {
                return (e.uo = e.uo.add(t));
              }),
              t.modifiedDocuments.forEach(function (t) {}),
              t.removedDocuments.forEach(function (t) {
                return (e.uo = e.uo.delete(t));
              }),
              (this.current = t.current));
          }),
          (Of.prototype.Eo = function () {
            var e = this;
            if (!this.current) return [];
            var n = this.ho;
            (this.ho = $s()),
              this.fo.forEach(function (t) {
                e.Io(t.key) && (e.ho = e.ho.add(t.key));
              });
            var r = [];
            return (
              n.forEach(function (t) {
                e.ho.has(t) || r.push(new Df(t));
              }),
              this.ho.forEach(function (t) {
                n.has(t) || r.push(new Af(t));
              }),
              r
            );
          }),
          (Of.prototype.Ao = function (t) {
            (this.uo = t.Bn), (this.ho = $s());
            t = this._o(t.documents);
            return this.applyChanges(t, !0);
          }),
          (Of.prototype.Ro = function () {
            return cf.fromInitialDocuments(
              this.query,
              this.fo,
              this.mutatedKeys,
              0 === this.ao
            );
          }),
          Of),
        Cf = function (t, e, n) {
          (this.query = t), (this.targetId = e), (this.view = n);
        },
        kf = function (t) {
          (this.key = t), (this.bo = !1);
        },
        Rf =
          (Object.defineProperty(xf.prototype, "isPrimaryClient", {
            get: function () {
              return !0 === this.$o;
            },
            enumerable: !1,
            configurable: !0,
          }),
          xf);
      function xf(t, e, n, r, i, o) {
        (this.localStore = t),
          (this.remoteStore = e),
          (this.eventManager = n),
          (this.sharedClientState = r),
          (this.currentUser = i),
          (this.maxConcurrentLimboResolutions = o),
          (this.vo = {}),
          (this.Po = new Pc(Uo, Vo)),
          (this.Vo = new Map()),
          (this.So = new Set()),
          (this.Do = new Ms(Ai.comparator)),
          (this.Co = new Map()),
          (this.No = new _h()),
          (this.xo = {}),
          (this.Fo = new Map()),
          (this.ko = gc.Yt()),
          (this.onlineState = "Unknown"),
          (this.$o = void 0);
      }
      function Of(t, e) {
        (this.query = t),
          (this.uo = e),
          (this.ao = null),
          (this.current = !1),
          (this.ho = $s()),
          (this.mutatedKeys = $s()),
          (this.lo = jo(t)),
          (this.fo = new af(this.lo));
      }
      function Lf(i, o, s, a) {
        return y(this, void 0, void 0, function () {
          var e, n, r;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (i.Oo = function (t, e, n) {
                    return (function (r, i, o, s) {
                      return y(this, void 0, void 0, function () {
                        var e, n;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              return (e = i.view._o(o)).Nn
                                ? [
                                    4,
                                    mh(r.localStore, i.query, !1).then(
                                      function (t) {
                                        t = t.documents;
                                        return i.view._o(t, e);
                                      }
                                    ),
                                  ]
                                : [3, 2];
                            case 1:
                              (e = t.sent()), (t.label = 2);
                            case 2:
                              return (
                                (n = s && s.targetChanges.get(i.targetId)),
                                (n = i.view.applyChanges(
                                  e,
                                  r.isPrimaryClient,
                                  n
                                )),
                                [2, (Gf(r, i.targetId, n.To), n.snapshot)]
                              );
                          }
                        });
                      });
                    })(i, t, e, n);
                  }),
                  [4, mh(i.localStore, o, !0)]
                );
              case 1:
                return (
                  (n = t.sent()),
                  (r = new Nf(o, n.Bn)),
                  (e = r._o(n.documents)),
                  (n = ta.createSynthesizedTargetChangeForCurrentChange(
                    s,
                    a && "Offline" !== i.onlineState
                  )),
                  (n = r.applyChanges(e, i.isPrimaryClient, n)),
                  Gf(i, s, n.To),
                  (r = new Cf(o, s, r)),
                  [
                    2,
                    (i.Po.set(o, r),
                    i.Vo.has(s) ? i.Vo.get(s).push(o) : i.Vo.set(s, [o]),
                    n.snapshot),
                  ]
                );
            }
          });
        });
      }
      function Pf(f, d, p) {
        return y(this, void 0, void 0, function () {
          var s, l;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (l = Zf(f)), (t.label = 1);
              case 1:
                return (
                  t.trys.push([1, 5, , 6]),
                  [
                    4,
                    ((i = l.localStore),
                    (a = d),
                    (c = i),
                    (h = Jr.now()),
                    (o = a.reduce(function (t, e) {
                      return t.add(e.key);
                    }, $s())),
                    c.persistence
                      .runTransaction(
                        "Locally write mutations",
                        "readwrite",
                        function (s) {
                          return c.Mn.pn(s, o).next(function (t) {
                            u = t;
                            for (var e = [], n = 0, r = a; n < r.length; n++) {
                              var i = r[n],
                                o = (function (t, e) {
                                  for (
                                    var n = null, r = 0, i = t.fieldTransforms;
                                    r < i.length;
                                    r++
                                  ) {
                                    var o = i[r],
                                      s = e.data.field(o.field),
                                      s = Ho(o.transform, s || null);
                                    null != s &&
                                      (n = null == n ? Bi.empty() : n).set(
                                        o.field,
                                        s
                                      );
                                  }
                                  return n || null;
                                })(i, u.get(i.key));
                              null != o &&
                                e.push(
                                  new bs(
                                    i.key,
                                    o,
                                    (function s(t) {
                                      var a = [];
                                      return (
                                        ri(t.fields, function (t, e) {
                                          var n = new ci([t]);
                                          if (Ui(e))
                                            if (
                                              0 ===
                                              (e = s(e.mapValue).fields).length
                                            )
                                              a.push(n);
                                            else
                                              for (
                                                var r = 0, i = e;
                                                r < i.length;
                                                r++
                                              ) {
                                                var o = i[r];
                                                a.push(n.child(o));
                                              }
                                          else a.push(n);
                                        }),
                                        new hi(a)
                                      );
                                    })(o.value.mapValue),
                                    ls.exists(!0)
                                  )
                                );
                            }
                            return c._n.addMutationBatch(s, h, e, a);
                          });
                        }
                      )
                      .then(function (t) {
                        return (
                          t.applyToLocalDocumentSet(u),
                          { batchId: t.batchId, changes: u }
                        );
                      })),
                  ]
                );
              case 2:
                return (
                  (s = t.sent()),
                  l.sharedClientState.addPendingMutation(s.batchId),
                  (e = l),
                  (n = s.batchId),
                  (r = p),
                  (i = (i =
                    (i = e.xo[e.currentUser.toKey()]) || new Ms(Yr)).insert(
                    n,
                    r
                  )),
                  (e.xo[e.currentUser.toKey()] = i),
                  [4, Hf(l, s.changes)]
                );
              case 3:
                return t.sent(), [4, Xl(l.remoteStore)];
              case 4:
                return t.sent(), [3, 6];
              case 5:
                return (
                  (l = t.sent()),
                  (l = of(l, "Failed to persist write")),
                  p.reject(l),
                  [3, 6]
                );
              case 6:
                return [2];
            }
            var e, n, r, i, a, u, c, h, o;
          });
        });
      }
      function Mf(r, i) {
        return y(this, void 0, void 0, function () {
          var n, e;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (n = r), (t.label = 1);
              case 1:
                return t.trys.push([1, 4, , 6]), [4, dh(n.localStore, i)];
              case 2:
                return (
                  (e = t.sent()),
                  i.targetChanges.forEach(function (t, e) {
                    e = n.Co.get(e);
                    e &&
                      (Hr(
                        t.addedDocuments.size +
                          t.modifiedDocuments.size +
                          t.removedDocuments.size <=
                          1
                      ),
                      0 < t.addedDocuments.size
                        ? (e.bo = !0)
                        : 0 < t.modifiedDocuments.size
                        ? Hr(e.bo)
                        : 0 < t.removedDocuments.size &&
                          (Hr(e.bo), (e.bo = !1)));
                  }),
                  [4, Hf(n, e, i)]
                );
              case 3:
                return t.sent(), [3, 6];
              case 4:
                return [4, Ic(t.sent())];
              case 5:
                return t.sent(), [3, 6];
              case 6:
                return [2];
            }
          });
        });
      }
      function Ff(t, n, e) {
        var r,
          t = t;
        ((t.isPrimaryClient && 0 === e) || (!t.isPrimaryClient && 1 === e)) &&
          ((r = []),
          t.Po.forEach(function (t, e) {
            e = e.view.zr(n);
            e.snapshot && r.push(e.snapshot);
          }),
          (function (t, i) {
            t.onlineState = i;
            var o = !1;
            t.queries.forEach(function (t, e) {
              for (var n = 0, r = e.listeners; n < r.length; n++)
                r[n].zr(i) && (o = !0);
            }),
              o && gf(t);
          })(t.eventManager, n),
          r.length && t.vo._r(r),
          (t.onlineState = n),
          t.isPrimaryClient && t.sharedClientState.setOnlineState(n));
      }
      function Vf(s, a, u) {
        return y(this, void 0, void 0, function () {
          var n, o;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (n = s), (t.label = 1);
              case 1:
                return (
                  t.trys.push([1, 4, , 6]),
                  [
                    4,
                    ((e = n.localStore),
                    (r = a),
                    (i = e).persistence.runTransaction(
                      "Reject batch",
                      "readwrite-primary",
                      function (e) {
                        var n;
                        return i._n
                          .lookupMutationBatch(e, r)
                          .next(function (t) {
                            return (
                              Hr(null !== t),
                              (n = t.keys()),
                              i._n.removeMutationBatch(e, t)
                            );
                          })
                          .next(function () {
                            return i._n.performConsistencyCheck(e);
                          })
                          .next(function () {
                            return i.Mn.pn(e, n);
                          });
                      }
                    )),
                  ]
                );
              case 2:
                return (
                  (o = t.sent()),
                  Bf(n, a, u),
                  qf(n, a),
                  n.sharedClientState.updateMutationState(a, "rejected", u),
                  [4, Hf(n, o)]
                );
              case 3:
                return t.sent(), [3, 6];
              case 4:
                return [4, Ic(t.sent())];
              case 5:
                return t.sent(), [3, 6];
              case 6:
                return [2];
            }
            var e, r, i;
          });
        });
      }
      function Uf(o, s) {
        return y(this, void 0, void 0, function () {
          var n, r, i;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                Ql((n = o).remoteStore) ||
                  Br(
                    "SyncEngine",
                    "The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."
                  ),
                  (t.label = 1);
              case 1:
                return (
                  t.trys.push([1, 3, , 4]),
                  [
                    4,
                    (e = n.localStore).persistence.runTransaction(
                      "Get highest unacknowledged batch id",
                      "readonly",
                      function (t) {
                        return e._n.getHighestUnacknowledgedBatchId(t);
                      }
                    ),
                  ]
                );
              case 2:
                return -1 === (r = t.sent())
                  ? [2, void s.resolve()]
                  : ((i = n.Fo.get(r) || []).push(s), n.Fo.set(r, i), [3, 4]);
              case 3:
                return (
                  (i = t.sent()),
                  (i = of(
                    i,
                    "Initialization of waitForPendingWrites() operation failed"
                  )),
                  s.reject(i),
                  [3, 4]
                );
              case 4:
                return [2];
            }
            var e;
          });
        });
      }
      function qf(t, e) {
        (t.Fo.get(e) || []).forEach(function (t) {
          t.resolve();
        }),
          t.Fo.delete(e);
      }
      function Bf(t, e, n) {
        var r = t,
          i = r.xo[r.currentUser.toKey()];
        i &&
          ((t = i.get(e)) && (n ? t.reject(n) : t.resolve(), (i = i.remove(e))),
          (r.xo[r.currentUser.toKey()] = i));
      }
      function jf(e, t, n) {
        void 0 === n && (n = null),
          e.sharedClientState.removeLocalQueryTarget(t);
        for (var r = 0, i = e.Vo.get(t); r < i.length; r++) {
          var o = i[r];
          e.Po.delete(o), n && e.vo.Mo(o, n);
        }
        e.Vo.delete(t),
          e.isPrimaryClient &&
            e.No.Zn(t).forEach(function (t) {
              e.No.containsKey(t) || Kf(e, t);
            });
      }
      function Kf(t, e) {
        t.So.delete(e.path.canonicalString());
        var n = t.Do.get(e);
        null !== n &&
          (ql(t.remoteStore, n),
          (t.Do = t.Do.remove(e)),
          t.Co.delete(n),
          Qf(t));
      }
      function Gf(t, e, n) {
        for (var r, i, o, s = 0, a = n; s < a.length; s++) {
          var u = a[s];
          u instanceof Af
            ? (t.No.addReference(u.key, e),
              (r = t),
              (o = void 0),
              (i = (o = (i = u).key).path.canonicalString()),
              r.Do.get(o) ||
                r.So.has(i) ||
                (Br("SyncEngine", "New document in limbo: " + o),
                r.So.add(i),
                Qf(r)))
            : u instanceof Df
            ? (Br("SyncEngine", "Document no longer in limbo: " + u.key),
              t.No.removeReference(u.key, e),
              t.No.containsKey(u.key) || Kf(t, u.key))
            : Qr();
        }
      }
      function Qf(t) {
        for (; 0 < t.So.size && t.Do.size < t.maxConcurrentLimboResolutions; ) {
          var e = t.So.values().next().value;
          t.So.delete(e);
          var n = new Ai(ai.fromString(e)),
            e = t.ko.next();
          t.Co.set(e, new kf(n)),
            (t.Do = t.Do.insert(n, e)),
            Ul(t.remoteStore, new Ou(Mo(Co(n.path)), e, 2, Or.o));
        }
      }
      function Hf(e, s, a) {
        return y(this, void 0, void 0, function () {
          var n, r, i, o;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (r = []),
                  (i = []),
                  (o = []),
                  (n = e).Po.isEmpty()
                    ? [3, 3]
                    : (n.Po.forEach(function (t, e) {
                        o.push(
                          n.Oo(e, s, a).then(function (t) {
                            t &&
                              (n.isPrimaryClient &&
                                n.sharedClientState.updateQueryState(
                                  e.targetId,
                                  t.fromCache ? "not-current" : "current"
                                ),
                              r.push(t),
                              (t = nh.Pn(e.targetId, t)),
                              i.push(t));
                          })
                        );
                      }),
                      [4, Promise.all(o)])
                );
              case 1:
                return (
                  t.sent(),
                  n.vo._r(r),
                  [
                    4,
                    (function (u, c) {
                      return y(this, void 0, void 0, function () {
                        var r, e, n, i, o, s, a;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              (r = u), (t.label = 1);
                            case 1:
                              return (
                                t.trys.push([1, 3, , 4]),
                                [
                                  4,
                                  r.persistence.runTransaction(
                                    "notifyLocalViewChanges",
                                    "readwrite",
                                    function (n) {
                                      return hu.forEach(c, function (e) {
                                        return hu
                                          .forEach(e.bn, function (t) {
                                            return r.persistence.referenceDelegate.addReference(
                                              n,
                                              e.targetId,
                                              t
                                            );
                                          })
                                          .next(function () {
                                            return hu.forEach(
                                              e.vn,
                                              function (t) {
                                                return r.persistence.referenceDelegate.removeReference(
                                                  n,
                                                  e.targetId,
                                                  t
                                                );
                                              }
                                            );
                                          });
                                      });
                                    }
                                  ),
                                ]
                              );
                            case 2:
                              return t.sent(), [3, 4];
                            case 3:
                              if (!Eu((e = t.sent()))) throw e;
                              return (
                                Br(
                                  "LocalStore",
                                  "Failed to update sequence numbers: " + e
                                ),
                                [3, 4]
                              );
                            case 4:
                              for (n = 0, i = c; n < i.length; n++)
                                (a = i[n]),
                                  (o = a.targetId),
                                  a.fromCache ||
                                    ((s = r.Fn.get(o)),
                                    (a = s.snapshotVersion),
                                    (a = s.withLastLimboFreeSnapshotVersion(a)),
                                    (r.Fn = r.Fn.insert(o, a)));
                              return [2];
                          }
                        });
                      });
                    })(n.localStore, i),
                  ]
                );
              case 2:
                t.sent(), (t.label = 3);
              case 3:
                return [2];
            }
          });
        });
      }
      function zf(i, o) {
        return y(this, void 0, void 0, function () {
          var n, r;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (n = i).currentUser.isEqual(o)
                  ? [3, 3]
                  : (Br("SyncEngine", "User change. New user:", o.toKey()),
                    [4, hh(n.localStore, o)]);
              case 1:
                return (
                  (r = t.sent()),
                  (n.currentUser = o),
                  (e = n).Fo.forEach(function (t) {
                    t.forEach(function (t) {
                      t.reject(
                        new Fr(
                          Mr.CANCELLED,
                          "'waitForPendingWrites' promise is rejected due to a user change."
                        )
                      );
                    });
                  }),
                  e.Fo.clear(),
                  n.sharedClientState.handleUserChange(
                    o,
                    r.removedBatchIds,
                    r.addedBatchIds
                  ),
                  [4, Hf(n, r.Ln)]
                );
              case 2:
                t.sent(), (t.label = 3);
              case 3:
                return [2];
            }
            var e;
          });
        });
      }
      function Wf(a, u, c, h) {
        return y(this, void 0, void 0, function () {
          var o, s;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return [
                  4,
                  ((e = (o = a).localStore),
                  (n = u),
                  (i = (r = e)._n),
                  r.persistence.runTransaction(
                    "Lookup mutation documents",
                    "readonly",
                    function (e) {
                      return i.jt(e, n).next(function (t) {
                        return t ? r.Mn.pn(e, t) : hu.resolve(null);
                      });
                    }
                  )),
                ];
              case 1:
                return null === (s = t.sent())
                  ? [3, 6]
                  : "pending" !== c
                  ? [3, 3]
                  : [4, Xl(o.remoteStore)];
              case 2:
                return t.sent(), [3, 4];
              case 3:
                "acknowledged" === c || "rejected" === c
                  ? (Bf(o, u, h || null), qf(o, u), o.localStore._n.Gt(u))
                  : Qr(),
                  (t.label = 4);
              case 4:
                return [4, Hf(o, s)];
              case 5:
                return t.sent(), [3, 7];
              case 6:
                Br("SyncEngine", "Cannot apply mutation batch with id: " + u),
                  (t.label = 7);
              case 7:
                return [2];
            }
            var e, n, r, i;
          });
        });
      }
      function Yf(h, l) {
        return y(this, void 0, void 0, function () {
          var r, e, i, o, s, a, u, c;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  Jf((r = h)),
                  Zf(r),
                  !0 !== l || !0 === r.$o
                    ? [3, 3]
                    : ((e = r.sharedClientState.getAllActiveQueryTargets()),
                      [4, Xf(r, e.toArray())])
                );
              case 1:
                return (i = t.sent()), (r.$o = !0), [4, Zl(r.remoteStore, !0)];
              case 2:
                for (t.sent(), o = 0, s = i; o < s.length; o++)
                  (a = s[o]), Ul(r.remoteStore, a);
                return [3, 7];
              case 3:
                return !1 !== l || !1 === r.$o
                  ? [3, 7]
                  : ((u = []),
                    (c = Promise.resolve()),
                    r.Vo.forEach(function (t, e) {
                      r.sharedClientState.isLocalQueryTarget(e)
                        ? u.push(e)
                        : (c = c.then(function () {
                            return jf(r, e), gh(r.localStore, e, !0);
                          })),
                        ql(r.remoteStore, e);
                    }),
                    [4, c]);
              case 4:
                return t.sent(), [4, Xf(r, u)];
              case 5:
                return (
                  t.sent(),
                  (n = r).Co.forEach(function (t, e) {
                    ql(n.remoteStore, e);
                  }),
                  n.No.ts(),
                  (n.Co = new Map()),
                  (n.Do = new Ms(Ai.comparator)),
                  (r.$o = !1),
                  [4, Zl(r.remoteStore, !1)]
                );
              case 6:
                t.sent(), (t.label = 7);
              case 7:
                return [2];
            }
            var n;
          });
        });
      }
      function Xf(d, p) {
        return y(this, void 0, void 0, function () {
          var e, n, r, i, o, s, a, u, c, h, l, f;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                (e = d), (n = []), (r = []), (i = 0), (o = p), (t.label = 1);
              case 1:
                return i < o.length
                  ? ((s = o[i]),
                    (a = void 0),
                    (u = e.Vo.get(s)) && 0 !== u.length
                      ? [4, yh(e.localStore, Mo(u[0]))]
                      : [3, 7])
                  : [3, 13];
              case 2:
                (a = t.sent()), (c = 0), (h = u), (t.label = 3);
              case 3:
                return c < h.length
                  ? ((l = h[c]),
                    (l = e.Po.get(l)),
                    [
                      4,
                      (function (r, i) {
                        return y(this, void 0, void 0, function () {
                          var e, n;
                          return g(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return [4, mh((e = r).localStore, i.query, !0)];
                              case 1:
                                return (
                                  (n = t.sent()),
                                  (n = i.view.Ao(n)),
                                  [
                                    2,
                                    (e.isPrimaryClient &&
                                      Gf(e, i.targetId, n.To),
                                    n),
                                  ]
                                );
                            }
                          });
                        });
                      })(e, l),
                    ])
                  : [3, 6];
              case 4:
                (l = t.sent()).snapshot && r.push(l.snapshot), (t.label = 5);
              case 5:
                return c++, [3, 3];
              case 6:
                return [3, 11];
              case 7:
                return [4, vh(e.localStore, s)];
              case 8:
                return (f = t.sent()), [4, yh(e.localStore, f)];
              case 9:
                return (a = t.sent()), [4, Lf(e, $f(f), s, !1)];
              case 10:
                t.sent(), (t.label = 11);
              case 11:
                n.push(a), (t.label = 12);
              case 12:
                return i++, [3, 1];
              case 13:
                return [2, (e.vo._r(r), n)];
            }
          });
        });
      }
      function $f(t) {
        return No(
          t.path,
          t.collectionGroup,
          t.orderBy,
          t.filters,
          t.limit,
          "F",
          t.startAt,
          t.endAt
        );
      }
      function Jf(t) {
        return (
          (t.remoteStore.remoteSyncer.applyRemoteEvent = Mf.bind(null, t)),
          (t.remoteStore.remoteSyncer.getRemoteKeysForTarget = function (t, e) {
            var n = t;
            if ((t = n.Co.get(e)) && t.bo) return $s().add(t.key);
            var r = $s();
            if (!(e = n.Vo.get(e))) return r;
            for (var i = 0, o = e; i < o.length; i++)
              var s = o[i], s = n.Po.get(s), r = r.unionWith(s.view.wo);
            return r;
          }.bind(null, t)),
          (t.remoteStore.remoteSyncer.rejectListen = function (o, s, a) {
            return y(this, void 0, void 0, function () {
              var e, n, r, i;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (e = o).sharedClientState.updateQueryState(
                        s,
                        "rejected",
                        a
                      ),
                      (i = e.Co.get(s)),
                      (n = i && i.key)
                        ? ((r = (r = new Ms(Ai.comparator)).insert(
                            n,
                            Ki.newNoDocument(n, Zr.min())
                          )),
                          (i = $s().add(n)),
                          (i = new Zs(Zr.min(), new Map(), new Ks(Yr), r, i)),
                          [4, Mf(e, i)])
                        : [3, 2]
                    );
                  case 1:
                    return (
                      t.sent(),
                      (e.Do = e.Do.remove(n)),
                      e.Co.delete(s),
                      Qf(e),
                      [3, 4]
                    );
                  case 2:
                    return [
                      4,
                      gh(e.localStore, s, !1)
                        .then(function () {
                          return jf(e, s, a);
                        })
                        .catch(Ic),
                    ];
                  case 3:
                    t.sent(), (t.label = 4);
                  case 4:
                    return [2];
                }
              });
            });
          }.bind(null, t)),
          (t.vo._r = function (t, e) {
            for (var n = t, r = !1, i = 0, o = e; i < o.length; i++) {
              var s = o[i],
                a = s.query,
                a = n.queries.get(a);
              if (a) {
                for (var u = 0, c = a.listeners; u < c.length; u++)
                  c[u].Hr(s) && (r = !0);
                a.Wr = s;
              }
            }
            r && gf(n);
          }.bind(null, t.eventManager)),
          (t.vo.Mo = function (t, e, n) {
            var r = t;
            if ((t = r.queries.get(e)))
              for (var i = 0, o = t.listeners; i < o.length; i++)
                o[i].onError(n);
            r.queries.delete(e);
          }.bind(null, t.eventManager)),
          t
        );
      }
      function Zf(t) {
        return (
          (t.remoteStore.remoteSyncer.applySuccessfulWrite = function (i, o) {
            return y(this, void 0, void 0, function () {
              var e, n, r;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    (e = i), (n = o.batch.batchId), (t.label = 1);
                  case 1:
                    return t.trys.push([1, 4, , 6]), [4, lh(e.localStore, o)];
                  case 2:
                    return (
                      (r = t.sent()),
                      Bf(e, n, null),
                      qf(e, n),
                      e.sharedClientState.updateMutationState(
                        n,
                        "acknowledged"
                      ),
                      [4, Hf(e, r)]
                    );
                  case 3:
                    return t.sent(), [3, 6];
                  case 4:
                    return [4, Ic(t.sent())];
                  case 5:
                    return t.sent(), [3, 6];
                  case 6:
                    return [2];
                }
              });
            });
          }.bind(null, t)),
          (t.remoteStore.remoteSyncer.rejectFailedWrite = Vf.bind(null, t)),
          t
        );
      }
      function td(t, e, n) {
        var r = t;
        !(function (f, d, p) {
          return y(this, void 0, void 0, function () {
            var a, u, c, h, l;
            return g(this, function (t) {
              switch (t.label) {
                case 0:
                  return t.trys.push([0, 14, , 15]), [4, d.getMetadata()];
                case 1:
                  return (
                    (a = t.sent()),
                    [
                      4,
                      ((r = f.localStore),
                      (o = r),
                      (s = ma((i = a).createTime)),
                      o.persistence
                        .runTransaction(
                          "hasNewerBundle",
                          "readonly",
                          function (t) {
                            return o.Ke.getBundleMetadata(t, i.id);
                          }
                        )
                        .then(function (t) {
                          return !!t && 0 <= t.createTime.compareTo(s);
                        })),
                    ]
                  );
                case 2:
                  return t.sent() ? [4, d.close()] : [3, 4];
                case 3:
                  return [
                    2,
                    (t.sent(),
                    void p._completeWith({
                      taskState: "Success",
                      documentsLoaded: a.totalDocuments,
                      bytesLoaded: a.totalBytes,
                      totalDocuments: a.totalDocuments,
                      totalBytes: a.totalBytes,
                    })),
                  ];
                case 4:
                  return (
                    p._updateProgress(Sf(a)),
                    (u = new bf(a, f.localStore, d.R)),
                    [4, d.Lo()]
                  );
                case 5:
                  (c = t.sent()), (t.label = 6);
                case 6:
                  return c ? [4, u.oo(c)] : [3, 10];
                case 7:
                  return (h = t.sent()) && p._updateProgress(h), [4, d.Lo()];
                case 8:
                  (c = t.sent()), (t.label = 9);
                case 9:
                  return [3, 6];
                case 10:
                  return [4, u.complete()];
                case 11:
                  return (l = t.sent()), [4, Hf(f, l.wn, void 0)];
                case 12:
                  return (
                    t.sent(),
                    [
                      4,
                      ((r = f.localStore),
                      (e = a),
                      (n = r).persistence.runTransaction(
                        "Save bundle",
                        "readwrite",
                        function (t) {
                          return n.Ke.saveBundleMetadata(t, e);
                        }
                      )),
                    ]
                  );
                case 13:
                  return t.sent(), p._completeWith(l.progress), [3, 15];
                case 14:
                  return (
                    Kr(
                      "SyncEngine",
                      "Loading bundle failed with " + (l = t.sent())
                    ),
                    p._failWith(l),
                    [3, 15]
                  );
                case 15:
                  return [2];
              }
              var e, n, r, i, o, s;
            });
          });
        })(r, e, n).then(function () {
          r.sharedClientState.notifyBundleLoaded();
        });
      }
      var ed,
        nd,
        rd =
          ((hd.prototype.initialize = function (e) {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (this.R = El(e.databaseInfo.databaseId)),
                      (this.sharedClientState = this.Bo(e)),
                      (this.persistence = this.qo(e)),
                      [4, this.persistence.start()]
                    );
                  case 1:
                    return (
                      t.sent(),
                      (this.gcScheduler = this.Uo(e)),
                      (this.localStore = this.Ko(e)),
                      [2]
                    );
                }
              });
            });
          }),
          (hd.prototype.Uo = function (t) {
            return null;
          }),
          (hd.prototype.Ko = function (t) {
            return ch(this.persistence, new rh(), t.initialUser, this.R);
          }),
          (hd.prototype.qo = function (t) {
            return new kh(xh.bs, this.R);
          }),
          (hd.prototype.Bo = function (t) {
            return new el();
          }),
          (hd.prototype.terminate = function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      this.gcScheduler && this.gcScheduler.stop(),
                      [4, this.sharedClientState.shutdown()]
                    );
                  case 1:
                    return t.sent(), [4, this.persistence.shutdown()];
                  case 2:
                    return t.sent(), [2];
                }
              });
            });
          }),
          hd),
        id =
          (n(cd, (nd = rd)),
          (cd.prototype.initialize = function (e) {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, nd.prototype.initialize.call(this, e)];
                  case 1:
                    return t.sent(), [4, bh(this.localStore)];
                  case 2:
                    return t.sent(), [4, this.Qo.initialize(this, e)];
                  case 3:
                    return t.sent(), [4, Zf(this.Qo.syncEngine)];
                  case 4:
                    return t.sent(), [4, Xl(this.Qo.remoteStore)];
                  case 5:
                    return t.sent(), [2];
                }
              });
            });
          }),
          (cd.prototype.Ko = function (t) {
            return ch(this.persistence, new rh(), t.initialUser, this.R);
          }),
          (cd.prototype.Uo = function (t) {
            var e = this.persistence.referenceDelegate.garbageCollector;
            return new Ac(e, t.asyncQueue);
          }),
          (cd.prototype.qo = function (t) {
            var e = Zc(
                t.databaseInfo.databaseId,
                t.databaseInfo.persistenceKey
              ),
              n =
                void 0 !== this.cacheSizeBytes
                  ? sc.withCacheSize(this.cacheSizeBytes)
                  : sc.DEFAULT;
            return new Yc(
              this.synchronizeTabs,
              e,
              t.clientId,
              n,
              t.asyncQueue,
              wl(),
              bl(),
              this.R,
              this.sharedClientState,
              !!this.forceOwnership
            );
          }),
          (cd.prototype.Bo = function (t) {
            return new el();
          }),
          cd),
        od =
          (n(ud, (ed = id)),
          (ud.prototype.initialize = function (r) {
            return y(this, void 0, void 0, function () {
              var e,
                n = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, ed.prototype.initialize.call(this, r)];
                  case 1:
                    return (
                      t.sent(),
                      (e = this.Qo.syncEngine),
                      this.sharedClientState instanceof tl
                        ? ((this.sharedClientState.syncEngine = {
                            ui: Wf.bind(null, e),
                            ai: function (i, o, s, a) {
                              return y(this, void 0, void 0, function () {
                                var e, n, r;
                                return g(this, function (t) {
                                  switch (t.label) {
                                    case 0:
                                      return (e = i).$o
                                        ? (Br(
                                            "SyncEngine",
                                            "Ignoring unexpected query state notification."
                                          ),
                                          [3, 8])
                                        : [3, 1];
                                    case 1:
                                      if (!e.Vo.has(o)) return [3, 8];
                                      switch (s) {
                                        case "current":
                                        case "not-current":
                                          return [3, 2];
                                        case "rejected":
                                          return [3, 5];
                                      }
                                      return [3, 7];
                                    case 2:
                                      return [4, wh(e.localStore)];
                                    case 3:
                                      return (
                                        (n = t.sent()),
                                        (r =
                                          Zs.createSynthesizedRemoteEventForCurrentChange(
                                            o,
                                            "current" === s
                                          )),
                                        [4, Hf(e, n, r)]
                                      );
                                    case 4:
                                      return t.sent(), [3, 8];
                                    case 5:
                                      return [4, gh(e.localStore, o, !0)];
                                    case 6:
                                      return t.sent(), jf(e, o, a), [3, 8];
                                    case 7:
                                      Qr(), (t.label = 8);
                                    case 8:
                                      return [2];
                                  }
                                });
                              });
                            }.bind(null, e),
                            hi: function (c, h, l) {
                              return y(this, void 0, void 0, function () {
                                var n, e, r, i, o, s, a, u;
                                return g(this, function (t) {
                                  switch (t.label) {
                                    case 0:
                                      if (!(n = Jf(c)).$o) return [3, 10];
                                      (e = 0), (r = h), (t.label = 1);
                                    case 1:
                                      return e < r.length
                                        ? ((r = r[e]),
                                          n.Vo.has(r)
                                            ? (Br(
                                                "SyncEngine",
                                                "Adding an already active target " +
                                                  r
                                              ),
                                              [3, 5])
                                            : [4, vh(n.localStore, r)])
                                        : [3, 6];
                                    case 2:
                                      return (
                                        (i = t.sent()), [4, yh(n.localStore, i)]
                                      );
                                    case 3:
                                      return (
                                        (o = t.sent()),
                                        [4, Lf(n, $f(i), o.targetId, !1)]
                                      );
                                    case 4:
                                      t.sent(),
                                        Ul(n.remoteStore, o),
                                        (t.label = 5);
                                    case 5:
                                      return e++, [3, 1];
                                    case 6:
                                      (s = function (e) {
                                        return g(this, function (t) {
                                          switch (t.label) {
                                            case 0:
                                              return n.Vo.has(e)
                                                ? [
                                                    4,
                                                    gh(n.localStore, e, !1)
                                                      .then(function () {
                                                        ql(n.remoteStore, e),
                                                          jf(n, e);
                                                      })
                                                      .catch(Ic),
                                                  ]
                                                : [3, 2];
                                            case 1:
                                              t.sent(), (t.label = 2);
                                            case 2:
                                              return [2];
                                          }
                                        });
                                      }),
                                        (a = 0),
                                        (u = l),
                                        (t.label = 7);
                                    case 7:
                                      return a < u.length
                                        ? ((u = u[a]), [5, s(u)])
                                        : [3, 10];
                                    case 8:
                                      t.sent(), (t.label = 9);
                                    case 9:
                                      return a++, [3, 7];
                                    case 10:
                                      return [2];
                                  }
                                });
                              });
                            }.bind(null, e),
                            fn: function (t) {
                              return t.localStore.persistence.fn();
                            }.bind(null, e),
                            ci: function (n) {
                              return y(this, void 0, void 0, function () {
                                var e;
                                return g(this, function (t) {
                                  return [
                                    2,
                                    wh((e = n).localStore).then(function (t) {
                                      return Hf(e, t);
                                    }),
                                  ];
                                });
                              });
                            }.bind(null, e),
                          }),
                          [4, this.sharedClientState.start()])
                        : [3, 3]
                    );
                  case 2:
                    t.sent(), (t.label = 3);
                  case 3:
                    return [
                      4,
                      this.persistence.He(function (e) {
                        return y(n, void 0, void 0, function () {
                          return g(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return [4, Yf(this.Qo.syncEngine, e)];
                              case 1:
                                return (
                                  t.sent(),
                                  this.gcScheduler &&
                                    (e && !this.gcScheduler.started
                                      ? this.gcScheduler.start(this.localStore)
                                      : e || this.gcScheduler.stop()),
                                  [2]
                                );
                            }
                          });
                        });
                      }),
                    ];
                  case 4:
                    return t.sent(), [2];
                }
              });
            });
          }),
          (ud.prototype.Bo = function (t) {
            var e = wl();
            if (!tl.yt(e))
              throw new Fr(
                Mr.UNIMPLEMENTED,
                "IndexedDB persistence is only available on platforms that support LocalStorage."
              );
            var n = Zc(
              t.databaseInfo.databaseId,
              t.databaseInfo.persistenceKey
            );
            return new tl(e, t.asyncQueue, n, t.clientId, t.initialUser);
          }),
          ud),
        sd =
          ((ad.prototype.initialize = function (n, r) {
            return y(this, void 0, void 0, function () {
              var e = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.localStore
                      ? [3, 2]
                      : ((this.localStore = n.localStore),
                        (this.sharedClientState = n.sharedClientState),
                        (this.datastore = this.createDatastore(r)),
                        (this.remoteStore = this.createRemoteStore(r)),
                        (this.eventManager = this.createEventManager(r)),
                        (this.syncEngine = this.createSyncEngine(
                          r,
                          !n.synchronizeTabs
                        )),
                        (this.sharedClientState.onlineStateHandler = function (
                          t
                        ) {
                          return Ff(e.syncEngine, t, 1);
                        }),
                        (this.remoteStore.remoteSyncer.handleCredentialChange =
                          zf.bind(null, this.syncEngine)),
                        [
                          4,
                          Zl(this.remoteStore, this.syncEngine.isPrimaryClient),
                        ]);
                  case 1:
                    t.sent(), (t.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }),
          (ad.prototype.createEventManager = function (t) {
            return new sf();
          }),
          (ad.prototype.createDatastore = function (t) {
            var e = El(t.databaseInfo.databaseId),
              n = ((n = t.databaseInfo), new sl(n));
            return (t = t.credentials), new Cl(t, n, e);
          }),
          (ad.prototype.createRemoteStore = function (t) {
            var e = this,
              n = this.localStore,
              r = this.datastore,
              i = t.asyncQueue,
              o = function (t) {
                return Ff(e.syncEngine, t, 0);
              },
              t = new (rl.yt() ? rl : nl)();
            return new Tl(n, r, i, o, t);
          }),
          (ad.prototype.createSyncEngine = function (t, e) {
            return (function (t, e, n, r, i, o, s) {
              o = new Rf(t, e, n, r, i, o);
              return s && (o.$o = !0), o;
            })(
              this.localStore,
              this.remoteStore,
              this.eventManager,
              this.sharedClientState,
              t.initialUser,
              t.maxConcurrentLimboResolutions,
              e
            );
          }),
          (ad.prototype.terminate = function () {
            return (function (n) {
              return y(this, void 0, void 0, function () {
                var e;
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return (
                        (e = n),
                        Br("RemoteStore", "RemoteStore shutting down."),
                        e.Or.add(5),
                        [4, Vl(e)]
                      );
                    case 1:
                      return (
                        t.sent(), e.Lr.shutdown(), e.Br.set("Unknown"), [2]
                      );
                  }
                });
              });
            })(this.remoteStore);
          }),
          ad);
      function ad() {}
      function ud(t, e) {
        var n = this;
        return (
          ((n = ed.call(this, t, e, !1) || this).Qo = t),
          (n.cacheSizeBytes = e),
          (n.synchronizeTabs = !0),
          n
        );
      }
      function cd(t, e, n) {
        var r = this;
        return (
          ((r = nd.call(this) || this).Qo = t),
          (r.cacheSizeBytes = e),
          (r.forceOwnership = n),
          (r.synchronizeTabs = !1),
          r
        );
      }
      function hd() {
        this.synchronizeTabs = !1;
      }
      function ld(n, r) {
        void 0 === r && (r = 10240);
        var i = 0;
        return {
          read: function () {
            return y(this, void 0, void 0, function () {
              var e;
              return g(this, function (t) {
                return i < n.byteLength
                  ? ((e = { value: n.slice(i, i + r), done: !1 }),
                    [2, ((i += r), e)])
                  : [2, { done: !0 }];
              });
            });
          },
          cancel: function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                return [2];
              });
            });
          },
          releaseLock: function () {},
          closed: Promise.reject("unimplemented"),
        };
      }
      var fd =
          ((Ed.prototype.next = function (t) {
            this.observer.next && this.jo(this.observer.next, t);
          }),
          (Ed.prototype.error = function (t) {
            this.observer.error
              ? this.jo(this.observer.error, t)
              : console.error("Uncaught Error in snapshot listener:", t);
          }),
          (Ed.prototype.Wo = function () {
            this.muted = !0;
          }),
          (Ed.prototype.jo = function (t, e) {
            var n = this;
            this.muted ||
              setTimeout(function () {
                n.muted || t(e);
              }, 0);
          }),
          Ed),
        dd =
          ((bd.prototype.close = function () {
            return this.Go.cancel();
          }),
          (bd.prototype.getMetadata = function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                return [2, this.metadata.promise];
              });
            });
          }),
          (bd.prototype.Lo = function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, this.getMetadata()];
                  case 1:
                    return [2, (t.sent(), this.Ho())];
                }
              });
            });
          }),
          (bd.prototype.Ho = function () {
            return y(this, void 0, void 0, function () {
              var e, n, r;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, this.Jo()];
                  case 1:
                    return null === (e = t.sent())
                      ? [2, null]
                      : ((r = this.zo.decode(e)),
                        (n = Number(r)),
                        isNaN(n) &&
                          this.Yo(
                            "length string (" + r + ") is not valid number"
                          ),
                        [4, this.Xo(n)]);
                  case 2:
                    return (
                      (r = t.sent()), [2, new vf(JSON.parse(r), e.length + n)]
                    );
                }
              });
            });
          }),
          (bd.prototype.Zo = function () {
            return this.buffer.findIndex(function (t) {
              return t === "{".charCodeAt(0);
            });
          }),
          (bd.prototype.Jo = function () {
            return y(this, void 0, void 0, function () {
              var e, n;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.Zo() < 0 ? [4, this.tc()] : [3, 3];
                  case 1:
                    if (t.sent()) return [3, 3];
                    t.label = 2;
                  case 2:
                    return [3, 0];
                  case 3:
                    return 0 === this.buffer.length
                      ? [2, null]
                      : ((e = this.Zo()) < 0 &&
                          this.Yo(
                            "Reached the end of bundle when a length string is expected."
                          ),
                        (n = this.buffer.slice(0, e)),
                        [2, ((this.buffer = this.buffer.slice(e)), n)]);
                }
              });
            });
          }),
          (bd.prototype.Xo = function (n) {
            return y(this, void 0, void 0, function () {
              var e;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.buffer.length < n ? [4, this.tc()] : [3, 3];
                  case 1:
                    t.sent() &&
                      this.Yo(
                        "Reached the end of bundle when more is expected."
                      ),
                      (t.label = 2);
                  case 2:
                    return [3, 0];
                  case 3:
                    return (
                      (e = this.zo.decode(this.buffer.slice(0, n))),
                      [2, ((this.buffer = this.buffer.slice(n)), e)]
                    );
                }
              });
            });
          }),
          (bd.prototype.Yo = function (t) {
            throw (this.Go.cancel(), new Error("Invalid bundle format: " + t));
          }),
          (bd.prototype.tc = function () {
            return y(this, void 0, void 0, function () {
              var e, n;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, this.Go.read()];
                  case 1:
                    return (
                      (e = t.sent()).done ||
                        ((n = new Uint8Array(
                          this.buffer.length + e.value.length
                        )).set(this.buffer),
                        n.set(e.value, this.buffer.length),
                        (this.buffer = n)),
                      [2, e.done]
                    );
                }
              });
            });
          }),
          bd),
        pd =
          ((wd.prototype.lookup = function (r) {
            return y(this, void 0, void 0, function () {
              var e,
                n = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    if (
                      (this.ensureCommitNotCalled(), 0 < this.mutations.length)
                    )
                      throw new Fr(
                        Mr.INVALID_ARGUMENT,
                        "Firestore transactions require all reads to be executed before all writes."
                      );
                    return [
                      4,
                      (function (s, a) {
                        return y(this, void 0, void 0, function () {
                          var n, e, r, i, o;
                          return g(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return (
                                  (e = _a((n = s).R) + "/documents"),
                                  (r = {
                                    documents: a.map(function (t) {
                                      return ba(n.R, t);
                                    }),
                                  }),
                                  [4, n.$i("BatchGetDocuments", e, r)]
                                );
                              case 1:
                                return (
                                  (r = t.sent()),
                                  (i = new Map()),
                                  r.forEach(function (t) {
                                    var e,
                                      t =
                                        ((e = n.R),
                                        "found" in (t = t)
                                          ? (function (t, e) {
                                              Hr(!!e.found),
                                                e.found.name,
                                                e.found.updateTime;
                                              var n = Ea(t, e.found.name),
                                                t = ma(e.found.updateTime),
                                                e = new Bi({
                                                  mapValue: {
                                                    fields: e.found.fields,
                                                  },
                                                });
                                              return Ki.newFoundDocument(
                                                n,
                                                t,
                                                e
                                              );
                                            })(e, t)
                                          : "missing" in t
                                          ? (function (t, e) {
                                              Hr(!!e.missing), Hr(!!e.readTime);
                                              (t = Ea(t, e.missing)),
                                                (e = ma(e.readTime));
                                              return Ki.newNoDocument(t, e);
                                            })(e, t)
                                          : Qr());
                                    i.set(t.key.toString(), t);
                                  }),
                                  (o = []),
                                  [
                                    2,
                                    (a.forEach(function (t) {
                                      t = i.get(t.toString());
                                      Hr(!!t), o.push(t);
                                    }),
                                    o),
                                  ]
                                );
                            }
                          });
                        });
                      })(this.datastore, r),
                    ];
                  case 1:
                    return [
                      2,
                      ((e = t.sent()).forEach(function (t) {
                        return n.recordVersion(t);
                      }),
                      e),
                    ];
                }
              });
            });
          }),
          (wd.prototype.set = function (t, e) {
            this.write(e.toMutation(t, this.precondition(t))),
              this.writtenDocs.add(t.toString());
          }),
          (wd.prototype.update = function (t, e) {
            try {
              this.write(e.toMutation(t, this.preconditionForUpdate(t)));
            } catch (t) {
              this.lastWriteError = t;
            }
            this.writtenDocs.add(t.toString());
          }),
          (wd.prototype.delete = function (t) {
            this.write(new ks(t, this.precondition(t))),
              this.writtenDocs.add(t.toString());
          }),
          (wd.prototype.commit = function () {
            return y(this, void 0, void 0, function () {
              var e,
                n = this;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    if ((this.ensureCommitNotCalled(), this.lastWriteError))
                      throw this.lastWriteError;
                    return (
                      (e = this.readVersions),
                      this.mutations.forEach(function (t) {
                        e.delete(t.key.toString());
                      }),
                      e.forEach(function (t, e) {
                        e = Ai.fromPath(e);
                        n.mutations.push(new Rs(e, n.precondition(e)));
                      }),
                      [
                        4,
                        (function (i, o) {
                          return y(this, void 0, void 0, function () {
                            var e, n, r;
                            return g(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return (
                                    (n = _a((e = i).R) + "/documents"),
                                    (r = {
                                      writes: o.map(function (t) {
                                        return Na(e.R, t);
                                      }),
                                    }),
                                    [4, e.Ni("Commit", n, r)]
                                  );
                                case 1:
                                  return t.sent(), [2];
                              }
                            });
                          });
                        })(this.datastore, this.mutations),
                      ]
                    );
                  case 1:
                    return t.sent(), (this.committed = !0), [2];
                }
              });
            });
          }),
          (wd.prototype.recordVersion = function (t) {
            var e;
            if (t.isFoundDocument()) e = t.version;
            else {
              if (!t.isNoDocument()) throw Qr();
              e = Zr.min();
            }
            var n = this.readVersions.get(t.key.toString());
            if (n) {
              if (!e.isEqual(n))
                throw new Fr(
                  Mr.ABORTED,
                  "Document version changed between two reads."
                );
            } else this.readVersions.set(t.key.toString(), e);
          }),
          (wd.prototype.precondition = function (t) {
            var e = this.readVersions.get(t.toString());
            return !this.writtenDocs.has(t.toString()) && e
              ? ls.updateTime(e)
              : ls.none();
          }),
          (wd.prototype.preconditionForUpdate = function (t) {
            var e = this.readVersions.get(t.toString());
            if (this.writtenDocs.has(t.toString()) || !e) return ls.exists(!0);
            if (e.isEqual(Zr.min()))
              throw new Fr(
                Mr.INVALID_ARGUMENT,
                "Can't update a document that doesn't exist."
              );
            return ls.updateTime(e);
          }),
          (wd.prototype.write = function (t) {
            this.ensureCommitNotCalled(), this.mutations.push(t);
          }),
          (wd.prototype.ensureCommitNotCalled = function () {}),
          wd),
        yd =
          ((vd.prototype.run = function () {
            --this.ec, this.nc();
          }),
          (vd.prototype.nc = function () {
            var t = this;
            this.Zi.ji(function () {
              return y(t, void 0, void 0, function () {
                var e,
                  n,
                  r = this;
                return g(this, function (t) {
                  return (
                    (e = new pd(this.datastore)),
                    (n = this.sc(e)) &&
                      n
                        .then(function (t) {
                          r.asyncQueue.enqueueAndForget(function () {
                            return e
                              .commit()
                              .then(function () {
                                r.deferred.resolve(t);
                              })
                              .catch(function (t) {
                                r.ic(t);
                              });
                          });
                        })
                        .catch(function (t) {
                          r.ic(t);
                        }),
                    [2]
                  );
                });
              });
            });
          }),
          (vd.prototype.sc = function (t) {
            try {
              var e = this.updateFunction(t);
              return !Ii(e) && e.catch && e.then
                ? e
                : (this.deferred.reject(
                    Error("Transaction callback must return a Promise")
                  ),
                  null);
            } catch (t) {
              return this.deferred.reject(t), null;
            }
          }),
          (vd.prototype.ic = function (t) {
            var e = this;
            0 < this.ec && this.rc(t)
              ? (--this.ec,
                this.asyncQueue.enqueueAndForget(function () {
                  return e.nc(), Promise.resolve();
                }))
              : this.deferred.reject(t);
          }),
          (vd.prototype.rc = function (t) {
            if ("FirebaseError" !== t.name) return !1;
            t = t.code;
            return "aborted" === t || "failed-precondition" === t || !Ls(t);
          }),
          vd),
        gd =
          ((md.prototype.getConfiguration = function () {
            return y(this, void 0, void 0, function () {
              return g(this, function (t) {
                return [
                  2,
                  {
                    asyncQueue: this.asyncQueue,
                    databaseInfo: this.databaseInfo,
                    clientId: this.clientId,
                    credentials: this.credentials,
                    initialUser: this.user,
                    maxConcurrentLimboResolutions: 100,
                  },
                ];
              });
            });
          }),
          (md.prototype.setCredentialChangeListener = function (t) {
            this.credentialListener = t;
          }),
          (md.prototype.verifyNotTerminated = function () {
            if (this.asyncQueue.isShuttingDown)
              throw new Fr(
                Mr.FAILED_PRECONDITION,
                "The client has already been terminated."
              );
          }),
          (md.prototype.terminate = function () {
            var t = this;
            this.asyncQueue.enterRestrictedMode();
            var n = new cu();
            return (
              this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function () {
                return y(t, void 0, void 0, function () {
                  var e;
                  return g(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return (
                          t.trys.push([0, 5, , 6]),
                          this.onlineComponents
                            ? [4, this.onlineComponents.terminate()]
                            : [3, 2]
                        );
                      case 1:
                        t.sent(), (t.label = 2);
                      case 2:
                        return this.offlineComponents
                          ? [4, this.offlineComponents.terminate()]
                          : [3, 4];
                      case 3:
                        t.sent(), (t.label = 4);
                      case 4:
                        return (
                          this.credentials.removeChangeListener(),
                          n.resolve(),
                          [3, 6]
                        );
                      case 5:
                        return (
                          (e = t.sent()),
                          (e = of(e, "Failed to shutdown persistence")),
                          n.reject(e),
                          [3, 6]
                        );
                      case 6:
                        return [2];
                    }
                  });
                });
              }),
              n.promise
            );
          }),
          md);
      function md(t, e, n) {
        var r = this;
        (this.credentials = t),
          (this.asyncQueue = e),
          (this.databaseInfo = n),
          (this.user = Oh.UNAUTHENTICATED),
          (this.clientId = zr.u()),
          (this.credentialListener = function () {
            return Promise.resolve();
          }),
          this.credentials.setChangeListener(e, function (e) {
            return y(r, void 0, void 0, function () {
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      Br("FirestoreClient", "Received user=", e.uid),
                      [4, this.credentialListener(e)]
                    );
                  case 1:
                    return t.sent(), (this.user = e), [2];
                }
              });
            });
          });
      }
      function vd(t, e, n, r) {
        (this.asyncQueue = t),
          (this.datastore = e),
          (this.updateFunction = n),
          (this.deferred = r),
          (this.ec = 5),
          (this.Zi = new Al(this.asyncQueue, "transaction_retry"));
      }
      function wd(t) {
        (this.datastore = t),
          (this.readVersions = new Map()),
          (this.mutations = []),
          (this.committed = !1),
          (this.lastWriteError = null),
          (this.writtenDocs = new Set());
      }
      function bd(t, e) {
        var n = this;
        (this.Go = t),
          (this.R = e),
          (this.metadata = new cu()),
          (this.buffer = new Uint8Array()),
          (this.zo = new TextDecoder("utf-8")),
          this.Ho().then(
            function (t) {
              t && t.io()
                ? n.metadata.resolve(t.payload.metadata)
                : n.metadata.reject(
                    new Error(
                      "The first element of the bundle is not a metadata, it is\n             " +
                        JSON.stringify(null == t ? void 0 : t.payload)
                    )
                  );
            },
            function (t) {
              return n.metadata.reject(t);
            }
          );
      }
      function Ed(t) {
        (this.observer = t), (this.muted = !1);
      }
      function Td(i, o) {
        return y(this, void 0, void 0, function () {
          var e,
            n,
            r = this;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  i.asyncQueue.verifyOperationInProgress(),
                  Br(
                    "FirestoreClient",
                    "Initializing OfflineComponentProvider"
                  ),
                  [4, i.getConfiguration()]
                );
              case 1:
                return (e = t.sent()), [4, o.initialize(e)];
              case 2:
                return (
                  t.sent(),
                  (n = e.initialUser),
                  i.setCredentialChangeListener(function (e) {
                    return y(r, void 0, void 0, function () {
                      return g(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return n.isEqual(e)
                              ? [3, 2]
                              : [4, hh(o.localStore, e)];
                          case 1:
                            t.sent(), (n = e), (t.label = 2);
                          case 2:
                            return [2];
                        }
                      });
                    });
                  }),
                  o.persistence.setDatabaseDeletedListener(function () {
                    return i.terminate();
                  }),
                  (i.offlineComponents = o),
                  [2]
                );
            }
          });
        });
      }
      function Id(r, i) {
        return y(this, void 0, void 0, function () {
          var e, n;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return r.asyncQueue.verifyOperationInProgress(), [4, _d(r)];
              case 1:
                return (
                  (e = t.sent()),
                  Br("FirestoreClient", "Initializing OnlineComponentProvider"),
                  [4, r.getConfiguration()]
                );
              case 2:
                return (n = t.sent()), [4, i.initialize(e, n)];
              case 3:
                return (
                  t.sent(),
                  r.setCredentialChangeListener(function (t) {
                    return (function (r, i) {
                      return y(this, void 0, void 0, function () {
                        var e, n;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              return (
                                (e = r).asyncQueue.verifyOperationInProgress(),
                                Br(
                                  "RemoteStore",
                                  "RemoteStore received new credentials"
                                ),
                                (n = Ql(e)),
                                e.Or.add(3),
                                [4, Vl(e)]
                              );
                            case 1:
                              return (
                                t.sent(),
                                n && e.Br.set("Unknown"),
                                [4, e.remoteSyncer.handleCredentialChange(i)]
                              );
                            case 2:
                              return t.sent(), e.Or.delete(3), [4, Fl(e)];
                            case 3:
                              return t.sent(), [2];
                          }
                        });
                      });
                    })(i.remoteStore, t);
                  }),
                  (r.onlineComponents = i),
                  [2]
                );
            }
          });
        });
      }
      function _d(e) {
        return y(this, void 0, void 0, function () {
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return e.offlineComponents
                  ? [3, 2]
                  : (Br(
                      "FirestoreClient",
                      "Using default OfflineComponentProvider"
                    ),
                    [4, Td(e, new rd())]);
              case 1:
                t.sent(), (t.label = 2);
              case 2:
                return [2, e.offlineComponents];
            }
          });
        });
      }
      function Sd(e) {
        return y(this, void 0, void 0, function () {
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return e.onlineComponents
                  ? [3, 2]
                  : (Br(
                      "FirestoreClient",
                      "Using default OnlineComponentProvider"
                    ),
                    [4, Id(e, new sd())]);
              case 1:
                t.sent(), (t.label = 2);
              case 2:
                return [2, e.onlineComponents];
            }
          });
        });
      }
      function Ad(t) {
        return _d(t).then(function (t) {
          return t.persistence;
        });
      }
      function Dd(t) {
        return _d(t).then(function (t) {
          return t.localStore;
        });
      }
      function Nd(t) {
        return Sd(t).then(function (t) {
          return t.remoteStore;
        });
      }
      function Cd(t) {
        return Sd(t).then(function (t) {
          return t.syncEngine;
        });
      }
      function kd(r) {
        return y(this, void 0, void 0, function () {
          var e, n;
          return g(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, Sd(r)];
              case 1:
                return (
                  (e = t.sent()),
                  [
                    2,
                    (((n = e.eventManager).onListen = function (s, a) {
                      return y(this, void 0, void 0, function () {
                        var e, n, r, i, o;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              return (
                                (e = Jf(s)),
                                (o = e.Po.get(a))
                                  ? ((n = o.targetId),
                                    e.sharedClientState.addLocalQueryTarget(n),
                                    (r = o.view.Ro()),
                                    [3, 4])
                                  : [3, 1]
                              );
                            case 1:
                              return [4, yh(e.localStore, Mo(a))];
                            case 2:
                              return (
                                (i = t.sent()),
                                (o = e.sharedClientState.addLocalQueryTarget(
                                  i.targetId
                                )),
                                (n = i.targetId),
                                [4, Lf(e, a, n, "current" === o)]
                              );
                            case 3:
                              (r = t.sent()),
                                e.isPrimaryClient && Ul(e.remoteStore, i),
                                (t.label = 4);
                            case 4:
                              return [2, r];
                          }
                        });
                      });
                    }.bind(null, e.syncEngine)),
                    (n.onUnlisten = function (i, o) {
                      return y(this, void 0, void 0, function () {
                        var e, n, r;
                        return g(this, function (t) {
                          switch (t.label) {
                            case 0:
                              return (
                                (n = (e = i).Po.get(o)),
                                1 < (r = e.Vo.get(n.targetId)).length
                                  ? [
                                      2,
                                      (e.Vo.set(
                                        n.targetId,
                                        r.filter(function (t) {
                                          return !Vo(t, o);
                                        })
                                      ),
                                      void e.Po.delete(o)),
                                    ]
                                  : e.isPrimaryClient
                                  ? (e.sharedClientState.removeLocalQueryTarget(
                                      n.targetId
                                    ),
                                    e.sharedClientState.isActiveQueryTarget(
                                      n.targetId
                                    )
                                      ? [3, 2]
                                      : [
                                          4,
                                          gh(e.localStore, n.targetId, !1)
                                            .then(function () {
                                              e.sharedClientState.clearQueryState(
                                                n.targetId
                                              ),
                                                ql(e.remoteStore, n.targetId),
                                                jf(e, n.targetId);
                                            })
                                            .catch(Ic),
                                        ])
                                  : [3, 3]
                              );
                            case 1:
                              t.sent(), (t.label = 2);
                            case 2:
                              return [3, 5];
                            case 3:
                              return (
                                jf(e, n.targetId),
                                [4, gh(e.localStore, n.targetId, !0)]
                              );
                            case 4:
                              t.sent(), (t.label = 5);
                            case 5:
                              return [2];
                          }
                        });
                      });
                    }.bind(null, e.syncEngine)),
                    n),
                  ]
                );
            }
          });
        });
      }
      function Rd(n, r, i) {
        var t = this;
        void 0 === i && (i = {});
        var o = new cu();
        return (
          n.asyncQueue.enqueueAndForget(function () {
            return y(t, void 0, void 0, function () {
              var e;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (e = function (n, r, i, o, s) {
                        var t = new fd({
                            next: function (t) {
                              r.enqueueAndForget(function () {
                                return yf(n, a);
                              });
                              var e = t.docs.has(i);
                              !e && t.fromCache
                                ? s.reject(
                                    new Fr(
                                      Mr.UNAVAILABLE,
                                      "Failed to get document because the client is offline."
                                    )
                                  )
                                : e && t.fromCache && o && "server" === o.source
                                ? s.reject(
                                    new Fr(
                                      Mr.UNAVAILABLE,
                                      'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)'
                                    )
                                  )
                                : s.resolve(t);
                            },
                            error: function (t) {
                              return s.reject(t);
                            },
                          }),
                          a = new mf(Co(i.path), t, {
                            includeMetadataChanges: !0,
                            so: !0,
                          });
                        return pf(n, a);
                      }),
                      [4, kd(n)]
                    );
                  case 1:
                    return [
                      2,
                      e.apply(void 0, [t.sent(), n.asyncQueue, r, i, o]),
                    ];
                }
              });
            });
          }),
          o.promise
        );
      }
      function xd(n, r, i) {
        var t = this;
        void 0 === i && (i = {});
        var o = new cu();
        return (
          n.asyncQueue.enqueueAndForget(function () {
            return y(t, void 0, void 0, function () {
              var e;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (e = function (e, n, t, r, i) {
                        var o = new fd({
                            next: function (t) {
                              n.enqueueAndForget(function () {
                                return yf(e, s);
                              }),
                                t.fromCache && "server" === r.source
                                  ? i.reject(
                                      new Fr(
                                        Mr.UNAVAILABLE,
                                        'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)'
                                      )
                                    )
                                  : i.resolve(t);
                            },
                            error: function (t) {
                              return i.reject(t);
                            },
                          }),
                          s = new mf(t, o, {
                            includeMetadataChanges: !0,
                            so: !0,
                          });
                        return pf(e, s);
                      }),
                      [4, kd(n)]
                    );
                  case 1:
                    return [
                      2,
                      e.apply(void 0, [t.sent(), n.asyncQueue, r, i, o]),
                    ];
                }
              });
            });
          }),
          o.promise
        );
      }
      function Od(t, e) {
        (this.user = e),
          (this.type = "OAuth"),
          (this.authHeaders = {}),
          (this.authHeaders.Authorization = "Bearer " + t);
      }
      var Ld = function (t, e, n, r, i, o, s, a) {
          (this.databaseId = t),
            (this.appId = e),
            (this.persistenceKey = n),
            (this.host = r),
            (this.ssl = i),
            (this.forceLongPolling = o),
            (this.autoDetectLongPolling = s),
            (this.useFetchStreams = a);
        },
        Pd =
          (Object.defineProperty(zd.prototype, "isDefaultDatabase", {
            get: function () {
              return "(default)" === this.database;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (zd.prototype.isEqual = function (t) {
            return (
              t instanceof zd &&
              t.projectId === this.projectId &&
              t.database === this.database
            );
          }),
          zd),
        Md = new Map(),
        Fd =
          ((Hd.prototype.getToken = function () {
            return Promise.resolve(null);
          }),
          (Hd.prototype.invalidateToken = function () {}),
          (Hd.prototype.setChangeListener = function (t, e) {
            (this.changeListener = e),
              t.enqueueRetryable(function () {
                return e(Oh.UNAUTHENTICATED);
              });
          }),
          (Hd.prototype.removeChangeListener = function () {
            this.changeListener = null;
          }),
          Hd),
        Vd =
          ((Qd.prototype.getToken = function () {
            return Promise.resolve(this.token);
          }),
          (Qd.prototype.invalidateToken = function () {}),
          (Qd.prototype.setChangeListener = function (t, e) {
            var n = this;
            (this.changeListener = e),
              t.enqueueRetryable(function () {
                return e(n.token.user);
              });
          }),
          (Qd.prototype.removeChangeListener = function () {
            this.changeListener = null;
          }),
          Qd),
        Ud =
          ((Gd.prototype.getToken = function () {
            var e = this,
              n = this.cc,
              t = this.forceRefresh;
            return (
              (this.forceRefresh = !1),
              this.auth
                ? this.auth.getToken(t).then(function (t) {
                    return e.cc !== n
                      ? (Br(
                          "FirebaseCredentialsProvider",
                          "getToken aborted due to token change."
                        ),
                        e.getToken())
                      : t
                      ? (Hr("string" == typeof t.accessToken),
                        new Od(t.accessToken, e.currentUser))
                      : null;
                  })
                : Promise.resolve(null)
            );
          }),
          (Gd.prototype.invalidateToken = function () {
            this.forceRefresh = !0;
          }),
          (Gd.prototype.setChangeListener = function (t, e) {
            var n = this;
            (this.asyncQueue = t),
              this.asyncQueue.enqueueRetryable(function () {
                return y(n, void 0, void 0, function () {
                  return g(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return [4, this.oc.promise];
                      case 1:
                        return t.sent(), [4, e(this.currentUser)];
                      case 2:
                        return t.sent(), (this.changeListener = e), [2];
                    }
                  });
                });
              });
          }),
          (Gd.prototype.removeChangeListener = function () {
            this.auth && this.auth.removeAuthTokenListener(this.uc),
              (this.changeListener = function () {
                return Promise.resolve();
              });
          }),
          (Gd.prototype.ac = function () {
            var t = this.auth && this.auth.getUid();
            return Hr(null === t || "string" == typeof t), new Oh(t);
          }),
          Gd),
        qd =
          (Object.defineProperty(Kd.prototype, "authHeaders", {
            get: function () {
              var t = { "X-Goog-AuthUser": this.lc },
                e = this.hc.auth.getAuthHeaderValueForFirstParty([]);
              return (
                e && (t.Authorization = e),
                this.fc && (t["X-Goog-Iam-Authorization-Token"] = this.fc),
                t
              );
            },
            enumerable: !1,
            configurable: !0,
          }),
          Kd),
        Bd =
          ((jd.prototype.getToken = function () {
            return Promise.resolve(new qd(this.hc, this.lc, this.fc));
          }),
          (jd.prototype.setChangeListener = function (t, e) {
            t.enqueueRetryable(function () {
              return e(Oh.FIRST_PARTY);
            });
          }),
          (jd.prototype.removeChangeListener = function () {}),
          (jd.prototype.invalidateToken = function () {}),
          jd);
      function jd(t, e, n) {
        (this.hc = t), (this.lc = e), (this.fc = n);
      }
      function Kd(t, e, n) {
        (this.hc = t),
          (this.lc = e),
          (this.fc = n),
          (this.type = "FirstParty"),
          (this.user = Oh.FIRST_PARTY);
      }
      function Gd(e) {
        var n = this;
        (this.currentUser = Oh.UNAUTHENTICATED),
          (this.oc = new cu()),
          (this.cc = 0),
          (this.forceRefresh = !1),
          (this.auth = null),
          (this.asyncQueue = null),
          (this.uc = function () {
            n.cc++,
              (n.currentUser = n.ac()),
              n.oc.resolve(),
              n.changeListener &&
                n.asyncQueue.enqueueRetryable(function () {
                  return n.changeListener(n.currentUser);
                });
          });
        function r(t) {
          Br("FirebaseCredentialsProvider", "Auth detected"),
            (n.auth = t),
            n.auth.addAuthTokenListener(n.uc);
        }
        e.onInit(r),
          setTimeout(function () {
            var t;
            n.auth ||
              ((t = e.getImmediate({ optional: !0 }))
                ? r(t)
                : (Br("FirebaseCredentialsProvider", "Auth not yet detected"),
                  n.oc.resolve()));
          }, 0);
      }
      function Qd(t) {
        (this.token = t), (this.changeListener = null);
      }
      function Hd() {
        this.changeListener = null;
      }
      function zd(t, e) {
        (this.projectId = t), (this.database = e || "(default)");
      }
      function Wd(t, e, n) {
        if (!n)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Function " + t + "() cannot be called with an empty " + e + "."
          );
      }
      function Yd(t, e) {
        if (void 0 === e) return { merge: !1 };
        if (void 0 !== e.mergeFields && void 0 !== e.merge)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Invalid options passed to function " +
              t +
              '(): You cannot specify both "merge" and "mergeFields".'
          );
        return e;
      }
      function Xd(t, e, n, r) {
        if (!0 === e && !0 === r)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            t + " and " + n + " cannot be used together."
          );
      }
      function $d(t) {
        if (!Ai.isDocumentKey(t))
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Invalid document reference. Document references must have an even number of segments, but " +
              t +
              " has " +
              t.length +
              "."
          );
      }
      function Jd(t) {
        if (Ai.isDocumentKey(t))
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Invalid collection reference. Collection references must have an odd number of segments, but " +
              t +
              " has " +
              t.length +
              "."
          );
      }
      function Zd(e) {
        if (void 0 === e) return "undefined";
        if (null === e) return "null";
        if ("string" == typeof e)
          return (
            20 < e.length && (e = e.substring(0, 20) + "..."), JSON.stringify(e)
          );
        if ("number" == typeof e || "boolean" == typeof e) return "" + e;
        if ("object" != typeof e)
          return "function" == typeof e ? "a function" : Qr();
        if (e instanceof Array) return "an array";
        var t = (function () {
          if (e.constructor) {
            var t = /function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());
            if (t && 1 < t.length) return t[1];
          }
          return null;
        })();
        return t ? "a custom " + t + " object" : "an object";
      }
      function tp(t, e) {
        if ((t = "_delegate" in t ? t._delegate : t) instanceof e) return t;
        if (e.name === t.constructor.name)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?"
          );
        t = Zd(t);
        throw new Fr(
          Mr.INVALID_ARGUMENT,
          "Expected type '" + e.name + "', but it was: " + t
        );
      }
      function ep(t, e) {
        if (e <= 0)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Function " +
              t +
              "() requires a positive number, but it was: " +
              e +
              "."
          );
      }
      var np,
        rp =
          ((fp.prototype.isEqual = function (t) {
            return (
              this.host === t.host &&
              this.ssl === t.ssl &&
              this.credentials === t.credentials &&
              this.cacheSizeBytes === t.cacheSizeBytes &&
              this.experimentalForceLongPolling ===
                t.experimentalForceLongPolling &&
              this.experimentalAutoDetectLongPolling ===
                t.experimentalAutoDetectLongPolling &&
              this.ignoreUndefinedProperties === t.ignoreUndefinedProperties &&
              this.useFetchStreams === t.useFetchStreams
            );
          }),
          fp),
        ip =
          (Object.defineProperty(lp.prototype, "app", {
            get: function () {
              if (!this._app)
                throw new Fr(
                  Mr.FAILED_PRECONDITION,
                  "Firestore was not initialized using the Firebase SDK. 'app' is not available"
                );
              return this._app;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(lp.prototype, "_initialized", {
            get: function () {
              return this._settingsFrozen;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(lp.prototype, "_terminated", {
            get: function () {
              return void 0 !== this._terminateTask;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (lp.prototype._setSettings = function (t) {
            if (this._settingsFrozen)
              throw new Fr(
                Mr.FAILED_PRECONDITION,
                "Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object."
              );
            (this._settings = new rp(t)),
              void 0 !== t.credentials &&
                (this._credentials = (function (t) {
                  if (!t) return new Fd();
                  switch (t.type) {
                    case "gapi":
                      var e = t.client;
                      return (
                        Hr(
                          !(
                            "object" != typeof e ||
                            null === e ||
                            !e.auth ||
                            !e.auth.getAuthHeaderValueForFirstParty
                          )
                        ),
                        new Bd(e, t.sessionIndex || "0", t.iamToken || null)
                      );
                    case "provider":
                      return t.client;
                    default:
                      throw new Fr(
                        Mr.INVALID_ARGUMENT,
                        "makeCredentialsProvider failed due to invalid credential type"
                      );
                  }
                })(t.credentials));
          }),
          (lp.prototype._getSettings = function () {
            return this._settings;
          }),
          (lp.prototype._freezeSettings = function () {
            return (this._settingsFrozen = !0), this._settings;
          }),
          (lp.prototype._delete = function () {
            return (
              this._terminateTask || (this._terminateTask = this._terminate()),
              this._terminateTask
            );
          }),
          (lp.prototype.toJSON = function () {
            return {
              app: this._app,
              databaseId: this._databaseId,
              settings: this._settings,
            };
          }),
          (lp.prototype._terminate = function () {
            return (
              (t = Md.get(this)) &&
                (Br("ComponentProvider", "Removing Datastore"),
                Md.delete(this),
                t.terminate()),
              Promise.resolve()
            );
            var t;
          }),
          lp),
        op =
          (Object.defineProperty(hp.prototype, "_path", {
            get: function () {
              return this._key.path;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(hp.prototype, "id", {
            get: function () {
              return this._key.path.lastSegment();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(hp.prototype, "path", {
            get: function () {
              return this._key.path.canonicalString();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(hp.prototype, "parent", {
            get: function () {
              return new ap(
                this.firestore,
                this.converter,
                this._key.path.popLast()
              );
            },
            enumerable: !1,
            configurable: !0,
          }),
          (hp.prototype.withConverter = function (t) {
            return new hp(this.firestore, t, this._key);
          }),
          hp),
        sp =
          ((cp.prototype.withConverter = function (t) {
            return new cp(this.firestore, t, this._query);
          }),
          cp),
        ap =
          (n(up, (np = sp)),
          Object.defineProperty(up.prototype, "id", {
            get: function () {
              return this._query.path.lastSegment();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(up.prototype, "path", {
            get: function () {
              return this._query.path.canonicalString();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(up.prototype, "parent", {
            get: function () {
              var t = this._path.popLast();
              return t.isEmpty()
                ? null
                : new op(this.firestore, null, new Ai(t));
            },
            enumerable: !1,
            configurable: !0,
          }),
          (up.prototype.withConverter = function (t) {
            return new up(this.firestore, t, this._path);
          }),
          up);
      function up(t, e, n) {
        var r = this;
        return (
          ((r = np.call(this, t, e, Co(n)) || this)._path = n),
          (r.type = "collection"),
          r
        );
      }
      function cp(t, e, n) {
        (this.converter = e),
          (this._query = n),
          (this.type = "query"),
          (this.firestore = t);
      }
      function hp(t, e, n) {
        (this.converter = e),
          (this._key = n),
          (this.type = "document"),
          (this.firestore = t);
      }
      function lp(t, e) {
        (this.type = "firestore-lite"),
          (this._persistenceKey = "(lite)"),
          (this._settings = new rp({})),
          (this._settingsFrozen = !1),
          t instanceof Pd
            ? ((this._databaseId = t), (this._credentials = new Fd()))
            : ((this._app = t),
              (this._databaseId = (function (t) {
                if (
                  !Object.prototype.hasOwnProperty.apply(t.options, [
                    "projectId",
                  ])
                )
                  throw new Fr(
                    Mr.INVALID_ARGUMENT,
                    '"projectId" not provided in firebase.initializeApp.'
                  );
                return new Pd(t.options.projectId);
              })(t)),
              (this._credentials = new Ud(e)));
      }
      function fp(t) {
        var e;
        if (void 0 === t.host) {
          if (void 0 !== t.ssl)
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Can't provide ssl option if host option is not set"
            );
          (this.host = "firestore.googleapis.com"), (this.ssl = !0);
        } else
          (this.host = t.host),
            (this.ssl = null === (e = t.ssl) || void 0 === e || e);
        if (
          ((this.credentials = t.credentials),
          (this.ignoreUndefinedProperties = !!t.ignoreUndefinedProperties),
          void 0 === t.cacheSizeBytes)
        )
          this.cacheSizeBytes = 41943040;
        else {
          if (-1 !== t.cacheSizeBytes && t.cacheSizeBytes < 1048576)
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "cacheSizeBytes must be at least 1048576"
            );
          this.cacheSizeBytes = t.cacheSizeBytes;
        }
        (this.experimentalForceLongPolling = !!t.experimentalForceLongPolling),
          (this.experimentalAutoDetectLongPolling =
            !!t.experimentalAutoDetectLongPolling),
          (this.useFetchStreams = !!t.useFetchStreams),
          Xd(
            "experimentalForceLongPolling",
            t.experimentalForceLongPolling,
            "experimentalAutoDetectLongPolling",
            t.experimentalAutoDetectLongPolling
          );
      }
      function dp(t, e) {
        for (var n, r = [], i = 2; i < arguments.length; i++)
          r[i - 2] = arguments[i];
        if (((t = w(t)), Wd("collection", "path", e), t instanceof ip))
          return (
            Jd((n = ai.fromString.apply(ai, s([e], r)))), new ap(t, null, n)
          );
        if (!(t instanceof op || t instanceof ap))
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore"
          );
        return (
          Jd(
            (n = ai.fromString
              .apply(ai, s([t.path], r))
              .child(ai.fromString(e)))
          ),
          new ap(t.firestore, null, n)
        );
      }
      function pp(t, e) {
        for (var n, r = [], i = 2; i < arguments.length; i++)
          r[i - 2] = arguments[i];
        if (
          ((t = w(t)),
          Wd("doc", "path", (e = 1 === arguments.length ? zr.u() : e)),
          t instanceof ip)
        )
          return (
            $d((n = ai.fromString.apply(ai, s([e], r)))),
            new op(t, null, new Ai(n))
          );
        if (!(t instanceof op || t instanceof ap))
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore"
          );
        return (
          $d((n = t._path.child(ai.fromString.apply(ai, s([e], r))))),
          new op(t.firestore, t instanceof ap ? t.converter : null, new Ai(n))
        );
      }
      function yp(t, e) {
        return (
          (t = w(t)),
          (e = w(e)),
          (t instanceof op || t instanceof ap) &&
            (e instanceof op || e instanceof ap) &&
            t.firestore === e.firestore &&
            t.path === e.path &&
            t.converter === e.converter
        );
      }
      function gp(t, e) {
        return (
          (t = w(t)),
          (e = w(e)),
          t instanceof sp &&
            e instanceof sp &&
            t.firestore === e.firestore &&
            Vo(t._query, e._query) &&
            t.converter === e.converter
        );
      }
      var mp =
        (Object.defineProperty(vp.prototype, "isShuttingDown", {
          get: function () {
            return this._c;
          },
          enumerable: !1,
          configurable: !0,
        }),
        (vp.prototype.enqueueAndForget = function (t) {
          this.enqueue(t);
        }),
        (vp.prototype.enqueueAndForgetEvenWhileRestricted = function (t) {
          this.Ac(), this.Rc(t);
        }),
        (vp.prototype.enterRestrictedMode = function (t) {
          this._c ||
            ((this._c = !0),
            (this.Ec = t || !1),
            (t = bl()) &&
              "function" == typeof t.removeEventListener &&
              t.removeEventListener("visibilitychange", this.Ic));
        }),
        (vp.prototype.enqueue = function (t) {
          var e = this;
          if ((this.Ac(), this._c)) return new Promise(function () {});
          var n = new cu();
          return this.Rc(function () {
            return e._c && e.Ec
              ? Promise.resolve()
              : (t().then(n.resolve, n.reject), n.promise);
          }).then(function () {
            return n.promise;
          });
        }),
        (vp.prototype.enqueueRetryable = function (t) {
          var e = this;
          this.enqueueAndForget(function () {
            return e.wc.push(t), e.bc();
          });
        }),
        (vp.prototype.bc = function () {
          return y(this, void 0, void 0, function () {
            var e,
              n = this;
            return g(this, function (t) {
              switch (t.label) {
                case 0:
                  if (0 === this.wc.length) return [3, 5];
                  t.label = 1;
                case 1:
                  return t.trys.push([1, 3, , 4]), [4, this.wc[0]()];
                case 2:
                  return t.sent(), this.wc.shift(), this.Zi.reset(), [3, 4];
                case 3:
                  if (!Eu((e = t.sent()))) throw e;
                  return (
                    Br(
                      "AsyncQueue",
                      "Operation failed with retryable error: " + e
                    ),
                    [3, 4]
                  );
                case 4:
                  0 < this.wc.length &&
                    this.Zi.ji(function () {
                      return n.bc();
                    }),
                    (t.label = 5);
                case 5:
                  return [2];
              }
            });
          });
        }),
        (vp.prototype.Rc = function (t) {
          var r = this,
            e = this.dc.then(function () {
              return (
                (r.gc = !0),
                t()
                  .catch(function (t) {
                    throw (
                      ((r.yc = t),
                      (r.gc = !1),
                      jr(
                        "INTERNAL UNHANDLED ERROR: ",
                        ((n = (e = t).message || ""),
                        (n = e.stack
                          ? e.stack.includes(e.message)
                            ? e.stack
                            : e.message + "\n" + e.stack
                          : n))
                      ),
                      t)
                    );
                    var e, n;
                  })
                  .then(function (t) {
                    return (r.gc = !1), t;
                  })
              );
            });
          return (this.dc = e);
        }),
        (vp.prototype.enqueueAfterDelay = function (t, e, n) {
          var r = this;
          this.Ac(), -1 < this.Tc.indexOf(t) && (e = 0);
          n = nf.createAndSchedule(this, t, e, n, function (t) {
            return r.vc(t);
          });
          return this.mc.push(n), n;
        }),
        (vp.prototype.Ac = function () {
          this.yc && Qr();
        }),
        (vp.prototype.verifyOperationInProgress = function () {}),
        (vp.prototype.Pc = function () {
          return y(this, void 0, void 0, function () {
            var e;
            return g(this, function (t) {
              switch (t.label) {
                case 0:
                  return [4, (e = this.dc)];
                case 1:
                  t.sent(), (t.label = 2);
                case 2:
                  if (e !== this.dc) return [3, 0];
                  t.label = 3;
                case 3:
                  return [2];
              }
            });
          });
        }),
        (vp.prototype.Vc = function (t) {
          for (var e = 0, n = this.mc; e < n.length; e++)
            if (n[e].timerId === t) return !0;
          return !1;
        }),
        (vp.prototype.Sc = function (r) {
          var i = this;
          return this.Pc().then(function () {
            i.mc.sort(function (t, e) {
              return t.targetTimeMs - e.targetTimeMs;
            });
            for (var t = 0, e = i.mc; t < e.length; t++) {
              var n = e[t];
              if ((n.skipDelay(), "all" !== r && n.timerId === r)) break;
            }
            return i.Pc();
          });
        }),
        (vp.prototype.Dc = function (t) {
          this.Tc.push(t);
        }),
        (vp.prototype.vc = function (t) {
          t = this.mc.indexOf(t);
          this.mc.splice(t, 1);
        }),
        vp);
      function vp() {
        var e = this;
        (this.dc = Promise.resolve()),
          (this.wc = []),
          (this._c = !1),
          (this.mc = []),
          (this.yc = null),
          (this.gc = !1),
          (this.Ec = !1),
          (this.Tc = []),
          (this.Zi = new Al(this, "async_queue_retry")),
          (this.Ic = function () {
            var t = bl();
            t &&
              Br(
                "AsyncQueue",
                "Visibility state changed to " + t.visibilityState
              ),
              e.Zi.Gi();
          });
        var t = bl();
        t &&
          "function" == typeof t.addEventListener &&
          t.addEventListener("visibilitychange", this.Ic);
      }
      function wp(i) {
        return (function () {
          if ("object" == typeof i && null !== i)
            for (
              var t = i, e = 0, n = ["next", "error", "complete"];
              e < n.length;
              e++
            ) {
              var r = n[e];
              if (r in t && "function" == typeof t[r]) return 1;
            }
        })();
      }
      var bp,
        Ep =
          ((_p.prototype.onProgress = function (t, e, n) {
            this._progressObserver = { next: t, error: e, complete: n };
          }),
          (_p.prototype.catch = function (t) {
            return this._taskCompletionResolver.promise.catch(t);
          }),
          (_p.prototype.then = function (t, e) {
            return this._taskCompletionResolver.promise.then(t, e);
          }),
          (_p.prototype._completeWith = function (t) {
            this._updateProgress(t),
              this._progressObserver.complete &&
                this._progressObserver.complete(),
              this._taskCompletionResolver.resolve(t);
          }),
          (_p.prototype._failWith = function (t) {
            (this._lastProgress.taskState = "Error"),
              this._progressObserver.next &&
                this._progressObserver.next(this._lastProgress),
              this._progressObserver.error && this._progressObserver.error(t),
              this._taskCompletionResolver.reject(t);
          }),
          (_p.prototype._updateProgress = function (t) {
            (this._lastProgress = t),
              this._progressObserver.next && this._progressObserver.next(t);
          }),
          _p),
        Tp =
          (n(Ip, (bp = ip)),
          (Ip.prototype._terminate = function () {
            return (
              this._firestoreClient || Ap(this),
              this._firestoreClient.terminate()
            );
          }),
          Ip);
      function Ip(t, e) {
        var n = this;
        return (
          ((n = bp.call(this, t, e) || this).type = "firestore"),
          (n._queue = new mp()),
          (n._persistenceKey = "name" in t ? t.name : "[DEFAULT]"),
          n
        );
      }
      function _p() {
        (this._progressObserver = {}),
          (this._taskCompletionResolver = new cu()),
          (this._lastProgress = {
            taskState: "Running",
            totalBytes: 0,
            totalDocuments: 0,
            bytesLoaded: 0,
            documentsLoaded: 0,
          });
      }
      function Sp(t) {
        return (
          t._firestoreClient || Ap(t),
          t._firestoreClient.verifyNotTerminated(),
          t._firestoreClient
        );
      }
      function Ap(t) {
        var e,
          n,
          r,
          i = t._freezeSettings(),
          i =
            ((e = t._databaseId),
            (n =
              (null === (r = t._app) || void 0 === r
                ? void 0
                : r.options.appId) || ""),
            (r = t._persistenceKey),
            new Ld(
              e,
              n,
              r,
              i.host,
              i.ssl,
              i.experimentalForceLongPolling,
              i.experimentalAutoDetectLongPolling,
              i.useFetchStreams
            ));
        t._firestoreClient = new gd(t._credentials, t._queue, i);
      }
      function Dp(n, r, i) {
        var t = this,
          o = new cu();
        return n.asyncQueue
          .enqueue(function () {
            return y(t, void 0, void 0, function () {
              var e;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return t.trys.push([0, 3, , 4]), [4, Td(n, i)];
                  case 1:
                    return t.sent(), [4, Id(n, r)];
                  case 2:
                    return t.sent(), o.resolve(), [3, 4];
                  case 3:
                    if (
                      !("FirebaseError" === (e = t.sent()).name
                        ? e.code === Mr.FAILED_PRECONDITION ||
                          e.code === Mr.UNIMPLEMENTED
                        : !(
                            "undefined" != typeof DOMException &&
                            e instanceof DOMException
                          ) ||
                          22 === e.code ||
                          20 === e.code ||
                          11 === e.code)
                    )
                      throw e;
                    return (
                      console.warn(
                        "Error enabling offline persistence. Falling back to persistence disabled: " +
                          e
                      ),
                      o.reject(e),
                      [3, 4]
                    );
                  case 4:
                    return [2];
                }
              });
            });
          })
          .then(function () {
            return o.promise;
          });
      }
      function Np(t) {
        if (t._initialized || t._terminated)
          throw new Fr(
            Mr.FAILED_PRECONDITION,
            "Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object."
          );
      }
      var Cp =
          ((qp.prototype.isEqual = function (t) {
            return this._internalPath.isEqual(t._internalPath);
          }),
          qp),
        kp =
          ((Up.fromBase64String = function (t) {
            try {
              return new Up(li.fromBase64String(t));
            } catch (t) {
              throw new Fr(
                Mr.INVALID_ARGUMENT,
                "Failed to construct data from Base64 string: " + t
              );
            }
          }),
          (Up.fromUint8Array = function (t) {
            return new Up(li.fromUint8Array(t));
          }),
          (Up.prototype.toBase64 = function () {
            return this._byteString.toBase64();
          }),
          (Up.prototype.toUint8Array = function () {
            return this._byteString.toUint8Array();
          }),
          (Up.prototype.toString = function () {
            return "Bytes(base64: " + this.toBase64() + ")";
          }),
          (Up.prototype.isEqual = function (t) {
            return this._byteString.isEqual(t._byteString);
          }),
          Up),
        Rp = function (t) {
          this._methodName = t;
        },
        xp =
          (Object.defineProperty(Vp.prototype, "latitude", {
            get: function () {
              return this._lat;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Vp.prototype, "longitude", {
            get: function () {
              return this._long;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Vp.prototype.isEqual = function (t) {
            return this._lat === t._lat && this._long === t._long;
          }),
          (Vp.prototype.toJSON = function () {
            return { latitude: this._lat, longitude: this._long };
          }),
          (Vp.prototype._compareTo = function (t) {
            return Yr(this._lat, t._lat) || Yr(this._long, t._long);
          }),
          Vp),
        Op = /^__.*__$/,
        Lp =
          ((Fp.prototype.toMutation = function (t, e) {
            return null !== this.fieldMask
              ? new bs(t, this.data, this.fieldMask, e, this.fieldTransforms)
              : new ws(t, this.data, e, this.fieldTransforms);
          }),
          Fp),
        Pp =
          ((Mp.prototype.toMutation = function (t, e) {
            return new bs(
              t,
              this.data,
              this.fieldMask,
              e,
              this.fieldTransforms
            );
          }),
          Mp);
      function Mp(t, e, n) {
        (this.data = t), (this.fieldMask = e), (this.fieldTransforms = n);
      }
      function Fp(t, e, n) {
        (this.data = t), (this.fieldMask = e), (this.fieldTransforms = n);
      }
      function Vp(t, e) {
        if (!isFinite(t) || t < -90 || 90 < t)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Latitude must be a number between -90 and 90, but was: " + t
          );
        if (!isFinite(e) || e < -180 || 180 < e)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Longitude must be a number between -180 and 180, but was: " + e
          );
        (this._lat = t), (this._long = e);
      }
      function Up(t) {
        this._byteString = t;
      }
      function qp() {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        for (var n = 0; n < t.length; ++n)
          if (0 === t[n].length)
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Invalid field name at argument $(i + 1). Field names must not be empty."
            );
        this._internalPath = new ci(t);
      }
      function Bp(t) {
        switch (t) {
          case 0:
          case 2:
          case 1:
            return 1;
          case 3:
          case 4:
            return;
          default:
            throw Qr();
        }
      }
      var jp =
          (Object.defineProperty(Qp.prototype, "path", {
            get: function () {
              return this.settings.path;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Qp.prototype, "Nc", {
            get: function () {
              return this.settings.Nc;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Qp.prototype.xc = function (t) {
            return new Qp(
              Object.assign(Object.assign({}, this.settings), t),
              this.databaseId,
              this.R,
              this.ignoreUndefinedProperties,
              this.fieldTransforms,
              this.fieldMask
            );
          }),
          (Qp.prototype.Fc = function (t) {
            var e =
                null === (e = this.path) || void 0 === e ? void 0 : e.child(t),
              e = this.xc({ path: e, kc: !1 });
            return e.$c(t), e;
          }),
          (Qp.prototype.Oc = function (t) {
            var e,
              t =
                null === (e = this.path) || void 0 === e ? void 0 : e.child(t),
              t = this.xc({ path: t, kc: !1 });
            return t.Cc(), t;
          }),
          (Qp.prototype.Mc = function (t) {
            return this.xc({ path: void 0, kc: !0 });
          }),
          (Qp.prototype.Lc = function (t) {
            return by(
              t,
              this.settings.methodName,
              this.settings.Bc || !1,
              this.path,
              this.settings.qc
            );
          }),
          (Qp.prototype.contains = function (e) {
            return (
              void 0 !==
                this.fieldMask.find(function (t) {
                  return e.isPrefixOf(t);
                }) ||
              void 0 !==
                this.fieldTransforms.find(function (t) {
                  return e.isPrefixOf(t.field);
                })
            );
          }),
          (Qp.prototype.Cc = function () {
            if (this.path)
              for (var t = 0; t < this.path.length; t++)
                this.$c(this.path.get(t));
          }),
          (Qp.prototype.$c = function (t) {
            if (0 === t.length)
              throw this.Lc("Document fields must not be empty");
            if (Bp(this.Nc) && Op.test(t))
              throw this.Lc('Document fields cannot begin and end with "__"');
          }),
          Qp),
        Kp =
          ((Gp.prototype.Uc = function (t, e, n, r) {
            return (
              void 0 === r && (r = !1),
              new jp(
                {
                  Nc: t,
                  methodName: e,
                  qc: n,
                  path: ci.emptyPath(),
                  kc: !1,
                  Bc: r,
                },
                this.databaseId,
                this.R,
                this.ignoreUndefinedProperties
              )
            );
          }),
          Gp);
      function Gp(t, e, n) {
        (this.databaseId = t),
          (this.ignoreUndefinedProperties = e),
          (this.R = n || El(t));
      }
      function Qp(t, e, n, r, i, o) {
        (this.settings = t),
          (this.databaseId = e),
          (this.R = n),
          (this.ignoreUndefinedProperties = r),
          void 0 === i && this.Cc(),
          (this.fieldTransforms = i || []),
          (this.fieldMask = o || []);
      }
      function Hp(t) {
        var e = t._freezeSettings(),
          n = El(t._databaseId);
        return new Kp(t._databaseId, !!e.ignoreUndefinedProperties, n);
      }
      function zp(t, e, n, r, i, o) {
        var s = t.Uc(
          (o = void 0 === o ? {} : o).merge || o.mergeFields ? 2 : 0,
          e,
          n,
          i
        );
        gy("Data must be an object, but it was:", s, r);
        var a,
          u,
          r = py(r, s);
        if (o.merge) (a = new hi(s.fieldMask)), (u = s.fieldTransforms);
        else if (o.mergeFields) {
          for (var c = [], h = 0, l = o.mergeFields; h < l.length; h++) {
            var f = my(e, l[h], n);
            if (!s.contains(f))
              throw new Fr(
                Mr.INVALID_ARGUMENT,
                "Field '" +
                  f +
                  "' is specified in your field mask but missing from your input data."
              );
            Ey(c, f) || c.push(f);
          }
          (a = new hi(c)),
            (u = s.fieldTransforms.filter(function (t) {
              return a.covers(t.field);
            }));
        } else (a = null), (u = s.fieldTransforms);
        return new Lp(new Bi(r), a, u);
      }
      var Wp,
        Yp =
          (n(Xp, (Wp = Rp)),
          (Xp.prototype._toFieldTransform = function (t) {
            if (2 !== t.Nc)
              throw 1 === t.Nc
                ? t.Lc(
                    this._methodName +
                      "() can only appear at the top level of your update data"
                  )
                : t.Lc(
                    this._methodName +
                      "() cannot be used with set() unless you pass {merge:true}"
                  );
            return t.fieldMask.push(t.path), null;
          }),
          (Xp.prototype.isEqual = function (t) {
            return t instanceof Xp;
          }),
          Xp);
      function Xp() {
        return (null !== Wp && Wp.apply(this, arguments)) || this;
      }
      function $p(t, e, n) {
        return new jp(
          { Nc: 3, qc: e.settings.qc, methodName: t._methodName, kc: n },
          e.databaseId,
          e.R,
          e.ignoreUndefinedProperties
        );
      }
      var Jp,
        Zp,
        ty,
        ey,
        ny =
          (n(cy, (ey = Rp)),
          (cy.prototype._toFieldTransform = function (t) {
            return new hs(t.path, new Yo());
          }),
          (cy.prototype.isEqual = function (t) {
            return t instanceof cy;
          }),
          cy),
        ry =
          (n(uy, (ty = Rp)),
          (uy.prototype._toFieldTransform = function (t) {
            var e = $p(this, t, !0),
              n = this.Kc.map(function (t) {
                return dy(t, e);
              }),
              n = new Xo(n);
            return new hs(t.path, n);
          }),
          (uy.prototype.isEqual = function (t) {
            return this === t;
          }),
          uy),
        iy =
          (n(ay, (Zp = Rp)),
          (ay.prototype._toFieldTransform = function (t) {
            var e = $p(this, t, !0),
              n = this.Kc.map(function (t) {
                return dy(t, e);
              }),
              n = new es(n);
            return new hs(t.path, n);
          }),
          (ay.prototype.isEqual = function (t) {
            return this === t;
          }),
          ay),
        oy =
          (n(sy, (Jp = Rp)),
          (sy.prototype._toFieldTransform = function (t) {
            var e = new os(t.R, Qo(t.R, this.Qc));
            return new hs(t.path, e);
          }),
          (sy.prototype.isEqual = function (t) {
            return this === t;
          }),
          sy);
      function sy(t, e) {
        var n = this;
        return ((n = Jp.call(this, t) || this).Qc = e), n;
      }
      function ay(t, e) {
        var n = this;
        return ((n = Zp.call(this, t) || this).Kc = e), n;
      }
      function uy(t, e) {
        var n = this;
        return ((n = ty.call(this, t) || this).Kc = e), n;
      }
      function cy() {
        return (null !== ey && ey.apply(this, arguments)) || this;
      }
      function hy(t, r, i, e) {
        var o = t.Uc(1, r, i);
        gy("Data must be an object, but it was:", o, e);
        var s = [],
          a = Bi.empty();
        ri(e, function (t, e) {
          var n = wy(r, t, i);
          e = w(e);
          t = o.Oc(n);
          e instanceof Yp
            ? s.push(n)
            : null != (t = dy(e, t)) && (s.push(n), a.set(n, t));
        });
        e = new hi(s);
        return new Pp(a, e, o.fieldTransforms);
      }
      function ly(t, e, n, r, i, o) {
        var s = t.Uc(1, e, n),
          a = [my(e, r, n)],
          u = [i];
        if (o.length % 2 != 0)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Function " +
              e +
              "() needs to be called with an even number of arguments that alternate between field names and values."
          );
        for (var c = 0; c < o.length; c += 2)
          a.push(my(e, o[c])), u.push(o[c + 1]);
        for (var h, l, f, d = [], p = Bi.empty(), y = a.length - 1; 0 <= y; --y)
          Ey(d, a[y]) ||
            ((h = a[y]),
            (l = w((l = u[y]))),
            (f = s.Oc(h)),
            l instanceof Yp
              ? d.push(h)
              : null != (f = dy(l, f)) && (d.push(h), p.set(h, f)));
        i = new hi(d);
        return new Pp(p, i, s.fieldTransforms);
      }
      function fy(t, e, n, r) {
        return dy(n, t.Uc((r = void 0 === r ? !1 : r) ? 4 : 3, e));
      }
      function dy(s, t) {
        if (yy((s = w(s))))
          return gy("Unsupported field value:", t, s), py(s, t);
        if (s instanceof Rp)
          return (
            (function (t, e) {
              if (!Bp(e.Nc))
                throw e.Lc(
                  t._methodName + "() can only be used with update() and set()"
                );
              if (!e.path)
                throw e.Lc(
                  t._methodName + "() is not currently supported inside arrays"
                );
              t = t._toFieldTransform(e);
              t && e.fieldTransforms.push(t);
            })(s, t),
            null
          );
        if (void 0 === s && t.ignoreUndefinedProperties) return null;
        if ((t.path && t.fieldMask.push(t.path), s instanceof Array)) {
          if (t.settings.kc && 4 !== t.Nc)
            throw t.Lc("Nested arrays are not supported");
          return (function (t) {
            for (var e = [], n = 0, r = 0, i = s; r < i.length; r++) {
              var o = dy(i[r], t.Mc(n));
              null == o && (o = { nullValue: "NULL_VALUE" }), e.push(o), n++;
            }
            return { arrayValue: { values: e } };
          })(t);
        }
        return (function (t, e) {
          if (null === (t = w(s))) return { nullValue: "NULL_VALUE" };
          if ("number" == typeof t) return Qo(e.R, t);
          if ("boolean" == typeof t) return { booleanValue: t };
          if ("string" == typeof t) return { stringValue: t };
          if (t instanceof Date) {
            var n = Jr.fromDate(t);
            return { timestampValue: ya(e.R, n) };
          }
          if (t instanceof Jr)
            return (
              (n = new Jr(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3))),
              { timestampValue: ya(e.R, n) }
            );
          if (t instanceof xp)
            return {
              geoPointValue: { latitude: t.latitude, longitude: t.longitude },
            };
          if (t instanceof kp) return { bytesValue: ga(e.R, t._byteString) };
          if (t instanceof op) {
            var n = e.databaseId,
              r = t.firestore._databaseId;
            if (!r.isEqual(n))
              throw e.Lc(
                "Document reference is for database " +
                  r.projectId +
                  "/" +
                  r.database +
                  " but should be for database " +
                  n.projectId +
                  "/" +
                  n.database
              );
            return {
              referenceValue: va(
                t.firestore._databaseId || e.databaseId,
                t._key.path
              ),
            };
          }
          throw e.Lc("Unsupported field value: " + Zd(t));
        })(0, t);
      }
      function py(t, n) {
        var r = {};
        return (
          ii(t)
            ? n.path && 0 < n.path.length && n.fieldMask.push(n.path)
            : ri(t, function (t, e) {
                e = dy(e, n.Fc(t));
                null != e && (r[t] = e);
              }),
          { mapValue: { fields: r } }
        );
      }
      function yy(t) {
        return !(
          "object" != typeof t ||
          null === t ||
          t instanceof Array ||
          t instanceof Date ||
          t instanceof Jr ||
          t instanceof xp ||
          t instanceof kp ||
          t instanceof op ||
          t instanceof Rp
        );
      }
      function gy(t, e, n) {
        if (
          !yy(n) ||
          "object" != typeof (r = n) ||
          null === r ||
          (Object.getPrototypeOf(r) !== Object.prototype &&
            null !== Object.getPrototypeOf(r))
        ) {
          n = Zd(n);
          throw "an object" === n
            ? e.Lc(t + " a custom object")
            : e.Lc(t + " " + n);
        }
        var r;
      }
      function my(t, e, n) {
        if ((e = w(e)) instanceof Cp) return e._internalPath;
        if ("string" == typeof e) return wy(t, e);
        throw by(
          "Field path arguments must be of type string or FieldPath.",
          t,
          !1,
          void 0,
          n
        );
      }
      var vy = new RegExp("[~\\*/\\[\\]]");
      function wy(e, n, r) {
        if (0 <= n.search(vy))
          throw by(
            "Invalid field path (" +
              n +
              "). Paths must not contain '~', '*', '/', '[', or ']'",
            e,
            !1,
            void 0,
            r
          );
        try {
          return new (Cp.bind.apply(Cp, s([void 0], n.split("."))))()
            ._internalPath;
        } catch (t) {
          throw by(
            "Invalid field path (" +
              n +
              "). Paths must not be empty, begin with '.', end with '.', or contain '..'",
            e,
            !1,
            void 0,
            r
          );
        }
      }
      function by(t, e, n, r, i) {
        var o = r && !r.isEmpty(),
          s = void 0 !== i,
          e = "Function " + e + "() called with invalid data";
        n && (e += " (via `toFirestore()`)");
        n = "";
        return (
          (o || s) &&
            ((n += " (found"),
            o && (n += " in field " + r),
            s && (n += " in document " + i),
            (n += ")")),
          new Fr(Mr.INVALID_ARGUMENT, (e += ". ") + t + n)
        );
      }
      function Ey(t, e) {
        return t.some(function (t) {
          return t.isEqual(e);
        });
      }
      var Ty,
        Iy =
          (Object.defineProperty(Ay.prototype, "id", {
            get: function () {
              return this._key.path.lastSegment();
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Ay.prototype, "ref", {
            get: function () {
              return new op(this._firestore, this._converter, this._key);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Ay.prototype.exists = function () {
            return null !== this._document;
          }),
          (Ay.prototype.data = function () {
            if (this._document) {
              if (this._converter) {
                var t = new _y(
                  this._firestore,
                  this._userDataWriter,
                  this._key,
                  this._document,
                  null
                );
                return this._converter.fromFirestore(t);
              }
              return this._userDataWriter.convertValue(
                this._document.data.value
              );
            }
          }),
          (Ay.prototype.get = function (t) {
            if (this._document) {
              t = this._document.data.field(Dy("DocumentSnapshot.get", t));
              if (null !== t) return this._userDataWriter.convertValue(t);
            }
          }),
          Ay),
        _y =
          (n(Sy, (Ty = Iy)),
          (Sy.prototype.data = function () {
            return Ty.prototype.data.call(this);
          }),
          Sy);
      function Sy() {
        return (null !== Ty && Ty.apply(this, arguments)) || this;
      }
      function Ay(t, e, n, r, i) {
        (this._firestore = t),
          (this._userDataWriter = e),
          (this._key = n),
          (this._document = r),
          (this._converter = i);
      }
      function Dy(t, e) {
        return "string" == typeof e
          ? wy(t, e)
          : (e instanceof Cp ? e : e._delegate)._internalPath;
      }
      var Ny,
        Cy,
        ky =
          ((Fy.prototype.isEqual = function (t) {
            return (
              this.hasPendingWrites === t.hasPendingWrites &&
              this.fromCache === t.fromCache
            );
          }),
          Fy),
        Ry =
          (n(My, (Cy = Iy)),
          (My.prototype.exists = function () {
            return Cy.prototype.exists.call(this);
          }),
          (My.prototype.data = function (t) {
            if ((void 0 === t && (t = {}), this._document)) {
              if (this._converter) {
                var e = new xy(
                  this._firestore,
                  this._userDataWriter,
                  this._key,
                  this._document,
                  this.metadata,
                  null
                );
                return this._converter.fromFirestore(e, t);
              }
              return this._userDataWriter.convertValue(
                this._document.data.value,
                t.serverTimestamps
              );
            }
          }),
          (My.prototype.get = function (t, e) {
            if ((void 0 === e && (e = {}), this._document)) {
              t = this._document.data.field(Dy("DocumentSnapshot.get", t));
              if (null !== t)
                return this._userDataWriter.convertValue(t, e.serverTimestamps);
            }
          }),
          My),
        xy =
          (n(Py, (Ny = Ry)),
          (Py.prototype.data = function (t) {
            return Ny.prototype.data.call(this, (t = void 0 === t ? {} : t));
          }),
          Py),
        Oy =
          (Object.defineProperty(Ly.prototype, "docs", {
            get: function () {
              var e = [];
              return (
                this.forEach(function (t) {
                  return e.push(t);
                }),
                e
              );
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Ly.prototype, "size", {
            get: function () {
              return this._snapshot.docs.size;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(Ly.prototype, "empty", {
            get: function () {
              return 0 === this.size;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Ly.prototype.forEach = function (e, n) {
            var r = this;
            this._snapshot.docs.forEach(function (t) {
              e.call(
                n,
                new xy(
                  r._firestore,
                  r._userDataWriter,
                  t.key,
                  t,
                  new ky(
                    r._snapshot.mutatedKeys.has(t.key),
                    r._snapshot.fromCache
                  ),
                  r.query.converter
                )
              );
            });
          }),
          (Ly.prototype.docChanges = function (t) {
            t = !!(t = void 0 === t ? {} : t).includeMetadataChanges;
            if (t && this._snapshot.excludesMetadataChanges)
              throw new Fr(
                Mr.INVALID_ARGUMENT,
                "To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot()."
              );
            return (
              (this._cachedChanges &&
                this._cachedChangesIncludeMetadataChanges === t) ||
                ((this._cachedChanges = (function (i, e) {
                  if (i._snapshot.oldDocs.isEmpty()) {
                    var n = 0;
                    return i._snapshot.docChanges.map(function (t) {
                      return {
                        type: "added",
                        doc: new xy(
                          i._firestore,
                          i._userDataWriter,
                          t.doc.key,
                          t.doc,
                          new ky(
                            i._snapshot.mutatedKeys.has(t.doc.key),
                            i._snapshot.fromCache
                          ),
                          i.query.converter
                        ),
                        oldIndex: -1,
                        newIndex: n++,
                      };
                    });
                  }
                  var o = i._snapshot.oldDocs;
                  return i._snapshot.docChanges
                    .filter(function (t) {
                      return e || 3 !== t.type;
                    })
                    .map(function (t) {
                      var e = new xy(
                          i._firestore,
                          i._userDataWriter,
                          t.doc.key,
                          t.doc,
                          new ky(
                            i._snapshot.mutatedKeys.has(t.doc.key),
                            i._snapshot.fromCache
                          ),
                          i.query.converter
                        ),
                        n = -1,
                        r = -1;
                      return (
                        0 !== t.type &&
                          ((n = o.indexOf(t.doc.key)),
                          (o = o.delete(t.doc.key))),
                        1 !== t.type &&
                          (r = (o = o.add(t.doc)).indexOf(t.doc.key)),
                        {
                          type: (function (t) {
                            switch (t) {
                              case 0:
                                return "added";
                              case 2:
                              case 3:
                                return "modified";
                              case 1:
                                return "removed";
                              default:
                                return Qr();
                            }
                          })(t.type),
                          doc: e,
                          oldIndex: n,
                          newIndex: r,
                        }
                      );
                    });
                })(this, t)),
                (this._cachedChangesIncludeMetadataChanges = t)),
              this._cachedChanges
            );
          }),
          Ly);
      function Ly(t, e, n, r) {
        (this._firestore = t),
          (this._userDataWriter = e),
          (this._snapshot = r),
          (this.metadata = new ky(r.hasPendingWrites, r.fromCache)),
          (this.query = n);
      }
      function Py() {
        return (null !== Ny && Ny.apply(this, arguments)) || this;
      }
      function My(t, e, n, r, i, o) {
        var s = this;
        return (
          ((s = Cy.call(this, t, e, n, r, o) || this)._firestore = t),
          (s._firestoreImpl = t),
          (s.metadata = i),
          s
        );
      }
      function Fy(t, e) {
        (this.hasPendingWrites = t), (this.fromCache = e);
      }
      function Vy(t, e) {
        return t instanceof Ry && e instanceof Ry
          ? t._firestore === e._firestore &&
              t._key.isEqual(e._key) &&
              (null === t._document
                ? null === e._document
                : t._document.isEqual(e._document)) &&
              t._converter === e._converter
          : t instanceof Oy &&
              e instanceof Oy &&
              t._firestore === e._firestore &&
              gp(t.query, e.query) &&
              t.metadata.isEqual(e.metadata) &&
              t._snapshot.isEqual(e._snapshot);
      }
      function Uy(t) {
        if (Ro(t) && 0 === t.explicitOrderBy.length)
          throw new Fr(
            Mr.UNIMPLEMENTED,
            "limitToLast() queries require specifying at least one orderBy() clause"
          );
      }
      C = function () {};
      function qy(t) {
        for (var e = [], n = 1; n < arguments.length; n++)
          e[n - 1] = arguments[n];
        for (var r = 0, i = e; r < i.length; r++) t = i[r]._apply(t);
        return t;
      }
      var By,
        jy,
        Ky,
        Gy,
        Qy,
        Hy =
          (n(eg, (Qy = C)),
          (eg.prototype._apply = function (t) {
            var e = Hp(t.firestore),
              e = (function (t, e, n, r, i, o) {
                if (r.isKeyField()) {
                  if ("array-contains" === i || "array-contains-any" === i)
                    throw new Fr(
                      Mr.INVALID_ARGUMENT,
                      "Invalid Query. You can't perform '" +
                        i +
                        "' queries on FieldPath.documentId()."
                    );
                  if ("in" === i || "not-in" === i) {
                    ig(o, i);
                    for (var s = [], a = 0, u = o; a < u.length; a++) {
                      var c = u[a];
                      s.push(rg(n, t, c));
                    }
                    h = { arrayValue: { values: s } };
                  } else h = rg(n, t, o);
                } else
                  ("in" !== i &&
                    "not-in" !== i &&
                    "array-contains-any" !== i) ||
                    ig(o, i),
                    (h = fy(e, "where", o, "in" === i || "not-in" === i));
                var h = $i.create(r, i, h);
                return (
                  (function (t, e) {
                    if (e.g()) {
                      var n = Oo(t);
                      if (null !== n && !n.isEqual(e.field))
                        throw new Fr(
                          Mr.INVALID_ARGUMENT,
                          "Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '" +
                            n.toString() +
                            "' and '" +
                            e.field.toString() +
                            "'"
                        );
                      n = xo(t);
                      null !== n && og(0, e.field, n);
                    }
                    t = (function (t, e) {
                      for (var n = 0, r = t.filters; n < r.length; n++) {
                        var i = r[n];
                        if (0 <= e.indexOf(i.op)) return i.op;
                      }
                      return null;
                    })(
                      t,
                      (function () {
                        switch (e.op) {
                          case "!=":
                            return ["!=", "not-in"];
                          case "array-contains":
                            return [
                              "array-contains",
                              "array-contains-any",
                              "not-in",
                            ];
                          case "in":
                            return ["array-contains-any", "in", "not-in"];
                          case "array-contains-any":
                            return [
                              "array-contains",
                              "array-contains-any",
                              "in",
                              "not-in",
                            ];
                          case "not-in":
                            return [
                              "array-contains",
                              "array-contains-any",
                              "in",
                              "not-in",
                              "!=",
                            ];
                          default:
                            return [];
                        }
                      })()
                    );
                    if (null !== t)
                      throw t === e.op
                        ? new Fr(
                            Mr.INVALID_ARGUMENT,
                            "Invalid query. You cannot use more than one '" +
                              e.op.toString() +
                              "' filter."
                          )
                        : new Fr(
                            Mr.INVALID_ARGUMENT,
                            "Invalid query. You cannot use '" +
                              e.op.toString() +
                              "' filters with '" +
                              t.toString() +
                              "' filters."
                          );
                  })(t, h),
                  h
                );
              })(
                t._query,
                e,
                t.firestore._databaseId,
                this.jc,
                this.Wc,
                this.Gc
              );
            return new sp(
              t.firestore,
              t.converter,
              ((t = t._query),
              (e = t.filters.concat([e])),
              new Do(
                t.path,
                t.collectionGroup,
                t.explicitOrderBy.slice(),
                e,
                t.limit,
                t.limitType,
                t.startAt,
                t.endAt
              ))
            );
          }),
          eg),
        zy =
          (n(tg, (Gy = C)),
          (tg.prototype._apply = function (t) {
            var e = (function (t, e, n) {
              if (null !== t.startAt)
                throw new Fr(
                  Mr.INVALID_ARGUMENT,
                  "Invalid query. You must not call startAt() or startAfter() before calling orderBy()."
                );
              if (null !== t.endAt)
                throw new Fr(
                  Mr.INVALID_ARGUMENT,
                  "Invalid query. You must not call endAt() or endBefore() before calling orderBy()."
                );
              var r = new _o(e, n);
              return (
                (e = r),
                null !== xo((n = t)) ||
                  (null !== (t = Oo(n)) && og(0, t, e.field)),
                r
              );
            })(t._query, this.jc, this.zc);
            return new sp(
              t.firestore,
              t.converter,
              ((t = t._query),
              (e = t.explicitOrderBy.concat([e])),
              new Do(
                t.path,
                t.collectionGroup,
                e,
                t.filters.slice(),
                t.limit,
                t.limitType,
                t.startAt,
                t.endAt
              ))
            );
          }),
          tg),
        Wy =
          (n(Zy, (Ky = C)),
          (Zy.prototype._apply = function (t) {
            return new sp(
              t.firestore,
              t.converter,
              Fo(t._query, this.Hc, this.Jc)
            );
          }),
          Zy),
        Yy =
          (n(Jy, (jy = C)),
          (Jy.prototype._apply = function (t) {
            var e = ng(t, this.type, this.Yc, this.Xc);
            return new sp(
              t.firestore,
              t.converter,
              ((t = t._query),
              (e = e),
              new Do(
                t.path,
                t.collectionGroup,
                t.explicitOrderBy.slice(),
                t.filters.slice(),
                t.limit,
                t.limitType,
                e,
                t.endAt
              ))
            );
          }),
          Jy),
        Xy =
          (n($y, (By = C)),
          ($y.prototype._apply = function (t) {
            var e = ng(t, this.type, this.Yc, this.Xc);
            return new sp(
              t.firestore,
              t.converter,
              ((t = t._query),
              (e = e),
              new Do(
                t.path,
                t.collectionGroup,
                t.explicitOrderBy.slice(),
                t.filters.slice(),
                t.limit,
                t.limitType,
                t.startAt,
                e
              ))
            );
          }),
          $y);
      function $y(t, e, n) {
        var r = this;
        return (
          ((r = By.call(this) || this).type = t), (r.Yc = e), (r.Xc = n), r
        );
      }
      function Jy(t, e, n) {
        var r = this;
        return (
          ((r = jy.call(this) || this).type = t), (r.Yc = e), (r.Xc = n), r
        );
      }
      function Zy(t, e, n) {
        var r = this;
        return (
          ((r = Ky.call(this) || this).type = t), (r.Hc = e), (r.Jc = n), r
        );
      }
      function tg(t, e) {
        var n = this;
        return (
          ((n = Gy.call(this) || this).jc = t),
          (n.zc = e),
          (n.type = "orderBy"),
          n
        );
      }
      function eg(t, e, n) {
        var r = this;
        return (
          ((r = Qy.call(this) || this).jc = t),
          (r.Wc = e),
          (r.Gc = n),
          (r.type = "where"),
          r
        );
      }
      function ng(t, c, e, n) {
        if (((e[0] = w(e[0])), e[0] instanceof Iy))
          return (function (t, e, n, r) {
            if (!n)
              throw new Fr(
                Mr.NOT_FOUND,
                "Can't use a DocumentSnapshot that doesn't exist for " +
                  c +
                  "()."
              );
            for (var i = [], o = 0, s = Po(t); o < s.length; o++) {
              var a = s[o];
              if (a.field.isKeyField()) i.push(Li(e, n.key));
              else {
                var u = n.data.field(a.field);
                if (Ei(u))
                  throw new Fr(
                    Mr.INVALID_ARGUMENT,
                    'Invalid query. You are trying to start or end a query using a document for which the field "' +
                      a.field +
                      '" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)'
                  );
                if (null === u) {
                  a = a.field.canonicalString();
                  throw new Fr(
                    Mr.INVALID_ARGUMENT,
                    "Invalid query. You are trying to start or end a query using a document for which the field '" +
                      a +
                      "' (used as the orderBy) does not exist."
                  );
                }
                i.push(u);
              }
            }
            return new vo(i, r);
          })(t._query, t.firestore._databaseId, e[0]._document, n);
        var r = Hp(t.firestore);
        return (function (t, e, n, r, i, o) {
          var s = t.explicitOrderBy;
          if (i.length > s.length)
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Too many arguments provided to " +
                r +
                "(). The number of arguments must be less than or equal to the number of orderBy() clauses"
            );
          for (var a = [], u = 0; u < i.length; u++) {
            var c = i[u];
            if (s[u].field.isKeyField()) {
              if ("string" != typeof c)
                throw new Fr(
                  Mr.INVALID_ARGUMENT,
                  "Invalid query. Expected a string for document ID in " +
                    r +
                    "(), but got a " +
                    typeof c
                );
              if (!Lo(t) && -1 !== c.indexOf("/"))
                throw new Fr(
                  Mr.INVALID_ARGUMENT,
                  "Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to " +
                    r +
                    "() must be a plain document ID, but '" +
                    c +
                    "' contains a slash."
                );
              var h = t.path.child(ai.fromString(c));
              if (!Ai.isDocumentKey(h))
                throw new Fr(
                  Mr.INVALID_ARGUMENT,
                  "Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to " +
                    r +
                    "() must result in a valid document path, but '" +
                    h +
                    "' is not because it contains an odd number of segments."
                );
              h = new Ai(h);
              a.push(Li(e, h));
            } else {
              c = fy(n, r, c);
              a.push(c);
            }
          }
          return new vo(a, o);
        })(t._query, t.firestore._databaseId, r, c, e, n);
      }
      function rg(t, e, n) {
        if ("string" == typeof (n = w(n))) {
          if ("" === n)
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string."
            );
          if (!Lo(e) && -1 !== n.indexOf("/"))
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '" +
                n +
                "' contains a '/' character."
            );
          e = e.path.child(ai.fromString(n));
          if (!Ai.isDocumentKey(e))
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '" +
                e +
                "' is not because it has an odd number of segments (" +
                e.length +
                ")."
            );
          return Li(t, new Ai(e));
        }
        if (n instanceof op) return Li(t, n._key);
        throw new Fr(
          Mr.INVALID_ARGUMENT,
          "Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: " +
            Zd(n) +
            "."
        );
      }
      function ig(t, e) {
        if (!Array.isArray(t) || 0 === t.length)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Invalid Query. A non-empty array is required for '" +
              e.toString() +
              "' filters."
          );
        if (10 < t.length)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Invalid Query. '" +
              e.toString() +
              "' filters support a maximum of 10 elements in the value array."
          );
      }
      function og(t, e, n) {
        if (!n.isEqual(e))
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '" +
              e.toString() +
              "' and so you must also use '" +
              e.toString() +
              "' as your first argument to orderBy(), but your first orderBy() is on field '" +
              n.toString() +
              "' instead."
          );
      }
      (sg.prototype.convertValue = function (t, e) {
        switch ((void 0 === e && (e = "none"), Ni(t))) {
          case 0:
            return null;
          case 1:
            return t.booleanValue;
          case 2:
            return wi(t.integerValue || t.doubleValue);
          case 3:
            return this.convertTimestamp(t.timestampValue);
          case 4:
            return this.convertServerTimestamp(t, e);
          case 5:
            return t.stringValue;
          case 6:
            return this.convertBytes(bi(t.bytesValue));
          case 7:
            return this.convertReference(t.referenceValue);
          case 8:
            return this.convertGeoPoint(t.geoPointValue);
          case 9:
            return this.convertArray(t.arrayValue, e);
          case 10:
            return this.convertObject(t.mapValue, e);
          default:
            throw Qr();
        }
      }),
        (sg.prototype.convertObject = function (t, n) {
          var r = this,
            i = {};
          return (
            ri(t.fields, function (t, e) {
              i[t] = r.convertValue(e, n);
            }),
            i
          );
        }),
        (sg.prototype.convertGeoPoint = function (t) {
          return new xp(wi(t.latitude), wi(t.longitude));
        }),
        (sg.prototype.convertArray = function (t, e) {
          var n = this;
          return (t.values || []).map(function (t) {
            return n.convertValue(t, e);
          });
        }),
        (sg.prototype.convertServerTimestamp = function (t, e) {
          switch (e) {
            case "previous":
              var n = (function t(e) {
                e = e.mapValue.fields.__previous_value__;
                return Ei(e) ? t(e) : e;
              })(t);
              return null == n ? null : this.convertValue(n, e);
            case "estimate":
              return this.convertTimestamp(Ti(t));
            default:
              return null;
          }
        }),
        (sg.prototype.convertTimestamp = function (t) {
          t = vi(t);
          return new Jr(t.seconds, t.nanos);
        }),
        (sg.prototype.convertDocumentKey = function (t, e) {
          var n = ai.fromString(t);
          Hr(Ua(n));
          (t = new Pd(n.get(1), n.get(3))), (n = new Ai(n.popFirst(5)));
          return (
            t.isEqual(e) ||
              jr(
                "Document " +
                  n +
                  " contains a document reference within a different database (" +
                  t.projectId +
                  "/" +
                  t.database +
                  ") which is not supported. It will be treated as a reference in the current database (" +
                  e.projectId +
                  "/" +
                  e.database +
                  ") instead."
              ),
            n
          );
        }),
        (_ = sg);
      function sg() {}
      function ag(t, e, n) {
        return t
          ? n && (n.merge || n.mergeFields)
            ? t.toFirestore(e, n)
            : t.toFirestore(e)
          : e;
      }
      var ug,
        cg =
          (n(fg, (ug = _)),
          (fg.prototype.convertBytes = function (t) {
            return new kp(t);
          }),
          (fg.prototype.convertReference = function (t) {
            t = this.convertDocumentKey(t, this.firestore._databaseId);
            return new op(this.firestore, null, t);
          }),
          fg),
        hg =
          ((lg.prototype.set = function (t, e, n) {
            this._verifyNotCommitted();
            (t = dg(t, this._firestore)),
              (e = ag(t.converter, e, n)),
              (n = zp(
                this._dataReader,
                "WriteBatch.set",
                t._key,
                e,
                null !== t.converter,
                n
              ));
            return this._mutations.push(n.toMutation(t._key, ls.none())), this;
          }),
          (lg.prototype.update = function (t, e, n) {
            for (var r = [], i = 3; i < arguments.length; i++)
              r[i - 3] = arguments[i];
            this._verifyNotCommitted();
            (t = dg(t, this._firestore)),
              (e =
                "string" == typeof (e = w(e)) || e instanceof Cp
                  ? ly(this._dataReader, "WriteBatch.update", t._key, e, n, r)
                  : hy(this._dataReader, "WriteBatch.update", t._key, e));
            return (
              this._mutations.push(e.toMutation(t._key, ls.exists(!0))), this
            );
          }),
          (lg.prototype.delete = function (t) {
            this._verifyNotCommitted();
            t = dg(t, this._firestore);
            return (
              (this._mutations = this._mutations.concat(
                new ks(t._key, ls.none())
              )),
              this
            );
          }),
          (lg.prototype.commit = function () {
            return (
              this._verifyNotCommitted(),
              (this._committed = !0),
              0 < this._mutations.length
                ? this._commitHandler(this._mutations)
                : Promise.resolve()
            );
          }),
          (lg.prototype._verifyNotCommitted = function () {
            if (this._committed)
              throw new Fr(
                Mr.FAILED_PRECONDITION,
                "A write batch can no longer be used after commit() has been called."
              );
          }),
          lg);
      function lg(t, e) {
        (this._firestore = t),
          (this._commitHandler = e),
          (this._mutations = []),
          (this._committed = !1),
          (this._dataReader = Hp(t));
      }
      function fg(t) {
        var e = this;
        return ((e = ug.call(this) || this).firestore = t), e;
      }
      function dg(t, e) {
        if ((t = w(t)).firestore !== e)
          throw new Fr(
            Mr.INVALID_ARGUMENT,
            "Provided document reference is from a different Firestore instance."
          );
        return t;
      }
      var pg,
        yg =
          (n(gg, (pg = _)),
          (gg.prototype.convertBytes = function (t) {
            return new kp(t);
          }),
          (gg.prototype.convertReference = function (t) {
            t = this.convertDocumentKey(t, this.firestore._databaseId);
            return new op(this.firestore, null, t);
          }),
          gg);
      function gg(t) {
        var e = this;
        return ((e = pg.call(this) || this).firestore = t), e;
      }
      function mg(t, e, n) {
        for (var r = [], i = 3; i < arguments.length; i++)
          r[i - 3] = arguments[i];
        t = tp(t, op);
        var o = tp(t.firestore, Tp),
          s = Hp(o);
        return wg(o, [
          ("string" == typeof (e = w(e)) || e instanceof Cp
            ? ly(s, "updateDoc", t._key, e, n, r)
            : hy(s, "updateDoc", t._key, e)
          ).toMutation(t._key, ls.exists(!0)),
        ]);
      }
      function vg(e) {
        for (var n = [], t = 1; t < arguments.length; t++)
          n[t - 1] = arguments[t];
        e = w(e);
        var r = { includeMetadataChanges: !1 },
          i = 0;
        "object" != typeof n[i] || wp(n[i]) || ((r = n[i]), i++);
        var o,
          s,
          a,
          u,
          c,
          h,
          l = { includeMetadataChanges: r.includeMetadataChanges };
        return (
          wp(n[i]) &&
            ((o = n[i]),
            (n[i] = null === (r = o.next) || void 0 === r ? void 0 : r.bind(o)),
            (n[i + 1] =
              null === (r = o.error) || void 0 === r ? void 0 : r.bind(o)),
            (n[i + 2] =
              null === (r = o.complete) || void 0 === r ? void 0 : r.bind(o))),
          e instanceof op
            ? ((a = tp(e.firestore, Tp)),
              (u = Co(e._key.path)),
              (h = {
                next: function (t) {
                  n[i] && n[i](bg(a, e, t));
                },
                error: n[i + 1],
                complete: n[i + 2],
              }))
            : ((s = tp(e, sp)),
              (a = tp(s.firestore, Tp)),
              (u = s._query),
              (c = new yg(a)),
              (h = {
                next: function (t) {
                  n[i] && n[i](new Oy(a, c, s, t));
                },
                error: n[i + 1],
                complete: n[i + 2],
              }),
              Uy(e._query)),
          (function (n, t, e) {
            var r = this,
              i = new fd(h),
              o = new mf(t, i, e);
            return (
              n.asyncQueue.enqueueAndForget(function () {
                return y(r, void 0, void 0, function () {
                  var e;
                  return g(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return (e = pf), [4, kd(n)];
                      case 1:
                        return [2, e.apply(void 0, [t.sent(), o])];
                    }
                  });
                });
              }),
              function () {
                i.Wo(),
                  n.asyncQueue.enqueueAndForget(function () {
                    return y(r, void 0, void 0, function () {
                      var e;
                      return g(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (e = yf), [4, kd(n)];
                          case 1:
                            return [2, e.apply(void 0, [t.sent(), o])];
                        }
                      });
                    });
                  });
              }
            );
          })(Sp(a), u, l)
        );
      }
      function wg(t, e) {
        return (function (n, r) {
          var t = this,
            i = new cu();
          return (
            n.asyncQueue.enqueueAndForget(function () {
              return y(t, void 0, void 0, function () {
                var e;
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return (e = Pf), [4, Cd(n)];
                    case 1:
                      return [2, e.apply(void 0, [t.sent(), r, i])];
                  }
                });
              });
            }),
            i.promise
          );
        })(Sp(t), e);
      }
      function bg(t, e, n) {
        var r = n.docs.get(e._key),
          i = new yg(t);
        return new Ry(
          t,
          i,
          e._key,
          r,
          new ky(n.hasPendingWrites, n.fromCache),
          e.converter
        );
      }
      var Eg,
        Tg =
          ((_g.prototype.get = function (t) {
            var e = this,
              n = dg(t, this._firestore),
              r = new cg(this._firestore);
            return this._transaction.lookup([n._key]).then(function (t) {
              if (!t || 1 !== t.length) return Qr();
              t = t[0];
              if (t.isFoundDocument())
                return new Iy(e._firestore, r, t.key, t, n.converter);
              if (t.isNoDocument())
                return new Iy(e._firestore, r, n._key, null, n.converter);
              throw Qr();
            });
          }),
          (_g.prototype.set = function (t, e, n) {
            (t = dg(t, this._firestore)),
              (e = ag(t.converter, e, n)),
              (n = zp(
                this._dataReader,
                "Transaction.set",
                t._key,
                e,
                null !== t.converter,
                n
              ));
            return this._transaction.set(t._key, n), this;
          }),
          (_g.prototype.update = function (t, e, n) {
            for (var r = [], i = 3; i < arguments.length; i++)
              r[i - 3] = arguments[i];
            (t = dg(t, this._firestore)),
              (e =
                "string" == typeof (e = w(e)) || e instanceof Cp
                  ? ly(this._dataReader, "Transaction.update", t._key, e, n, r)
                  : hy(this._dataReader, "Transaction.update", t._key, e));
            return this._transaction.update(t._key, e), this;
          }),
          (_g.prototype.delete = function (t) {
            t = dg(t, this._firestore);
            return this._transaction.delete(t._key), this;
          }),
          n(Ig, (Eg = _g)),
          (Ig.prototype.get = function (t) {
            var e = this,
              n = dg(t, this._firestore),
              r = new yg(this._firestore);
            return Eg.prototype.get.call(this, t).then(function (t) {
              return new Ry(
                e._firestore,
                r,
                n._key,
                t._document,
                new ky(!1, !1),
                n.converter
              );
            });
          }),
          Ig);
      function Ig(t, e) {
        var n = this;
        return ((n = Eg.call(this, t, e) || this)._firestore = t), n;
      }
      function _g(t, e) {
        (this._firestore = t),
          (this._transaction = e),
          (this._dataReader = Hp(t));
      }
      function Sg() {
        if ("undefined" == typeof Uint8Array)
          throw new Fr(
            Mr.UNIMPLEMENTED,
            "Uint8Arrays are not available in this environment."
          );
      }
      function Ag() {
        if ("undefined" == typeof atob)
          throw new Fr(
            Mr.UNIMPLEMENTED,
            "Blobs are unavailable in Firestore in this environment."
          );
      }
      var Dg,
        Ng =
          ((Pg.fromBase64String = function (t) {
            return Ag(), new Pg(kp.fromBase64String(t));
          }),
          (Pg.fromUint8Array = function (t) {
            return Sg(), new Pg(kp.fromUint8Array(t));
          }),
          (Pg.prototype.toBase64 = function () {
            return Ag(), this._delegate.toBase64();
          }),
          (Pg.prototype.toUint8Array = function () {
            return Sg(), this._delegate.toUint8Array();
          }),
          (Pg.prototype.isEqual = function (t) {
            return this._delegate.isEqual(t._delegate);
          }),
          (Pg.prototype.toString = function () {
            return "Blob(base64: " + this.toBase64() + ")";
          }),
          Pg),
        Cg =
          ((Lg.prototype.enableIndexedDbPersistence = function (t, e) {
            return (function (t, e) {
              Np((t = tp(t, Tp)));
              var n = Sp(t),
                r = t._freezeSettings(),
                t = new sd();
              return Dp(
                n,
                t,
                new id(
                  t,
                  r.cacheSizeBytes,
                  null == e ? void 0 : e.forceOwnership
                )
              );
            })(t._delegate, { forceOwnership: e });
          }),
          (Lg.prototype.enableMultiTabIndexedDbPersistence = function (t) {
            return (function (t) {
              Np((t = tp(t, Tp)));
              var e = Sp(t),
                n = t._freezeSettings(),
                t = new sd();
              return Dp(e, t, new od(t, n.cacheSizeBytes));
            })(t._delegate);
          }),
          (Lg.prototype.clearIndexedDbPersistence = function (t) {
            return (function (n) {
              var t = this;
              if (n._initialized && !n._terminated)
                throw new Fr(
                  Mr.FAILED_PRECONDITION,
                  "Persistence can only be cleared before a Firestore instance is initialized or after it is terminated."
                );
              var r = new cu();
              return (
                n._queue.enqueueAndForgetEvenWhileRestricted(function () {
                  return y(t, void 0, void 0, function () {
                    var e;
                    return g(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (
                            t.trys.push([0, 2, , 3]),
                            [
                              4,
                              (function (n) {
                                return y(this, void 0, void 0, function () {
                                  var e;
                                  return g(this, function (t) {
                                    switch (t.label) {
                                      case 0:
                                        return fu.yt()
                                          ? ((e = n + "main"),
                                            [4, fu.delete(e)])
                                          : [2, Promise.resolve()];
                                      case 1:
                                        return t.sent(), [2];
                                    }
                                  });
                                });
                              })(Zc(n._databaseId, n._persistenceKey)),
                            ]
                          );
                        case 1:
                          return t.sent(), r.resolve(), [3, 3];
                        case 2:
                          return (e = t.sent()), r.reject(e), [3, 3];
                        case 3:
                          return [2];
                      }
                    });
                  });
                }),
                r.promise
              );
            })(t._delegate);
          }),
          Lg),
        kg =
          (Object.defineProperty(Og.prototype, "_databaseId", {
            get: function () {
              return this._delegate._databaseId;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Og.prototype.settings = function (t) {
            var e = this._delegate._getSettings();
            t.merge ||
              e.host === t.host ||
              Kr(
                "You are overriding the original host. If you did not intend to override your settings, use {merge: true}."
              ),
              t.merge &&
                delete (t = Object.assign(Object.assign({}, e), t)).merge,
              this._delegate._setSettings(t);
          }),
          (Og.prototype.useEmulator = function (t, e, n) {
            (function (t, e, n, r) {
              void 0 === r && (r = {});
              var i = (t = tp(t, ip))._getSettings();
              if (
                ("firestore.googleapis.com" !== i.host &&
                  i.host !== e &&
                  Kr(
                    "Host has been set in both settings() and useEmulator(), emulator host will be used"
                  ),
                t._setSettings(
                  Object.assign(Object.assign({}, i), {
                    host: e + ":" + n,
                    ssl: !1,
                  })
                ),
                r.mockUserToken)
              ) {
                (n = (function (t, e) {
                  if (t.uid)
                    throw new Error(
                      'The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.'
                    );
                  var n = e || "demo-project",
                    r = t.iat || 0;
                  if (!(e = t.sub || t.user_id))
                    throw new Error(
                      "mockUserToken must contain 'sub' or 'user_id' field!"
                    );
                  return (
                    (t = o(
                      {
                        iss: "https://securetoken.google.com/" + n,
                        aud: n,
                        iat: r,
                        exp: r + 3600,
                        auth_time: r,
                        sub: e,
                        user_id: e,
                        firebase: {
                          sign_in_provider: "custom",
                          identities: {},
                        },
                      },
                      t
                    )),
                    [
                      a.encodeString(
                        JSON.stringify({ alg: "none", type: "JWT" }),
                        !1
                      ),
                      a.encodeString(JSON.stringify(t), !1),
                      "",
                    ].join(".")
                  );
                })(r.mockUserToken)),
                  (r = r.mockUserToken.sub || r.mockUserToken.user_id);
                if (!r)
                  throw new Fr(
                    Mr.INVALID_ARGUMENT,
                    "mockUserToken must contain 'sub' or 'user_id' field!"
                  );
                t._credentials = new Vd(new Od(n, new Oh(r)));
              }
            })(this._delegate, t, e, (n = void 0 === n ? {} : n));
          }),
          (Og.prototype.enableNetwork = function () {
            return (function (i) {
              var t = this;
              return i.asyncQueue.enqueue(function () {
                return y(t, void 0, void 0, function () {
                  var n, r;
                  return g(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return [4, Ad(i)];
                      case 1:
                        return (n = t.sent()), [4, Nd(i)];
                      case 2:
                        return (
                          (r = t.sent()),
                          [
                            2,
                            (n.setNetworkEnabled(!0),
                            (e = r).Or.delete(0),
                            Fl(e)),
                          ]
                        );
                    }
                    var e;
                  });
                });
              });
            })(Sp(tp(this._delegate, Tp)));
          }),
          (Og.prototype.disableNetwork = function () {
            return (function (r) {
              var t = this;
              return r.asyncQueue.enqueue(function () {
                return y(t, void 0, void 0, function () {
                  var e, n;
                  return g(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return [4, Ad(r)];
                      case 1:
                        return (e = t.sent()), [4, Nd(r)];
                      case 2:
                        return (
                          (n = t.sent()),
                          [
                            2,
                            (e.setNetworkEnabled(!1),
                            (function (n) {
                              return y(this, void 0, void 0, function () {
                                var e;
                                return g(this, function (t) {
                                  switch (t.label) {
                                    case 0:
                                      return (e = n).Or.add(0), [4, Vl(e)];
                                    case 1:
                                      return t.sent(), e.Br.set("Offline"), [2];
                                  }
                                });
                              });
                            })(n)),
                          ]
                        );
                    }
                  });
                });
              });
            })(Sp(tp(this._delegate, Tp)));
          }),
          (Og.prototype.enablePersistence = function (t) {
            var e = !1,
              n = !1;
            return (
              t &&
                Xd(
                  "synchronizeTabs",
                  (e = !!t.synchronizeTabs),
                  "experimentalForceOwningTab",
                  (n = !!t.experimentalForceOwningTab)
                ),
              e
                ? this.Zc.enableMultiTabIndexedDbPersistence(this)
                : this.Zc.enableIndexedDbPersistence(this, n)
            );
          }),
          (Og.prototype.clearPersistence = function () {
            return this.Zc.clearIndexedDbPersistence(this);
          }),
          (Og.prototype.terminate = function () {
            return (
              this.tu &&
                (this.tu._removeServiceInstance("firestore"),
                this.tu._removeServiceInstance("firestore-exp")),
              this._delegate._delete()
            );
          }),
          (Og.prototype.waitForPendingWrites = function () {
            return (function (n) {
              var t = this,
                r = new cu();
              return (
                n.asyncQueue.enqueueAndForget(function () {
                  return y(t, void 0, void 0, function () {
                    var e;
                    return g(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (e = Uf), [4, Cd(n)];
                        case 1:
                          return [2, e.apply(void 0, [t.sent(), r])];
                      }
                    });
                  });
                }),
                r.promise
              );
            })(Sp(tp(this._delegate, Tp)));
          }),
          (Og.prototype.onSnapshotsInSync = function (t) {
            return (
              (e = this._delegate),
              (t = t),
              (function (n, t) {
                var e = this,
                  r = new fd(t);
                return (
                  n.asyncQueue.enqueueAndForget(function () {
                    return y(e, void 0, void 0, function () {
                      var e;
                      return g(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              (e = function (t, e) {
                                t.Gr.add(e), e.next();
                              }),
                              [4, kd(n)]
                            );
                          case 1:
                            return [2, e.apply(void 0, [t.sent(), r])];
                        }
                      });
                    });
                  }),
                  function () {
                    r.Wo(),
                      n.asyncQueue.enqueueAndForget(function () {
                        return y(e, void 0, void 0, function () {
                          var e;
                          return g(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return (
                                  (e = function (t, e) {
                                    t.Gr.delete(e);
                                  }),
                                  [4, kd(n)]
                                );
                              case 1:
                                return [2, e.apply(void 0, [t.sent(), r])];
                            }
                          });
                        });
                      });
                  }
                );
              })(Sp(tp(e, Tp)), wp(t) ? t : { next: t })
            );
            var e;
          }),
          Object.defineProperty(Og.prototype, "app", {
            get: function () {
              if (!this.tu)
                throw new Fr(
                  Mr.FAILED_PRECONDITION,
                  "Firestore was not initialized using the Firebase SDK. 'app' is not available"
                );
              return this.tu;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (Og.prototype.collection = function (t) {
            try {
              return new tm(this, dp(this._delegate, t));
            } catch (t) {
              throw Gg(t, "collection()", "Firestore.collection()");
            }
          }),
          (Og.prototype.doc = function (t) {
            try {
              return new jg(this, pp(this._delegate, t));
            } catch (t) {
              throw Gg(t, "doc()", "Firestore.doc()");
            }
          }),
          (Og.prototype.collectionGroup = function (t) {
            try {
              return new $g(
                this,
                (function (t, e) {
                  if (
                    ((t = tp(t, ip)),
                    Wd("collectionGroup", "collection id", e),
                    0 <= e.indexOf("/"))
                  )
                    throw new Fr(
                      Mr.INVALID_ARGUMENT,
                      "Invalid collection ID '" +
                        e +
                        "' passed to function collectionGroup(). Collection IDs must not contain '/'."
                    );
                  return new sp(t, null, ((e = e), new Do(ai.emptyPath(), e)));
                })(this._delegate, t)
              );
            } catch (t) {
              throw Gg(t, "collectionGroup()", "Firestore.collectionGroup()");
            }
          }),
          (Og.prototype.runTransaction = function (e) {
            var n,
              r = this;
            return (function (n, r) {
              var t = this,
                i = new cu();
              return (
                n.asyncQueue.enqueueAndForget(function () {
                  return y(t, void 0, void 0, function () {
                    var e;
                    return g(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return [
                            4,
                            Sd(n).then(function (t) {
                              return t.datastore;
                            }),
                          ];
                        case 1:
                          return (
                            (e = t.sent()),
                            new yd(n.asyncQueue, e, r, i).run(),
                            [2]
                          );
                      }
                    });
                  });
                }),
                i.promise
              );
            })(Sp((n = this._delegate)), function (t) {
              return (t = new Tg(n, t)), e(new Mg(r, t));
            });
          }),
          (Og.prototype.batch = function () {
            var e = this;
            return (
              Sp(this._delegate),
              new Fg(
                new hg(this._delegate, function (t) {
                  return wg(e._delegate, t);
                })
              )
            );
          }),
          (Og.prototype.loadBundle = function (t) {
            throw new Fr(
              Mr.FAILED_PRECONDITION,
              '"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?'
            );
          }),
          (Og.prototype.namedQuery = function (t) {
            throw new Fr(
              Mr.FAILED_PRECONDITION,
              '"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?'
            );
          }),
          Og),
        Rg =
          (n(xg, (Dg = _)),
          (xg.prototype.convertBytes = function (t) {
            return new Ng(new kp(t));
          }),
          (xg.prototype.convertReference = function (t) {
            t = this.convertDocumentKey(t, this.firestore._databaseId);
            return jg.eu(t, this.firestore, null);
          }),
          xg);
      function xg(t) {
        var e = this;
        return ((e = Dg.call(this) || this).firestore = t), e;
      }
      function Og(t, e, n) {
        var r = this;
        (this._delegate = e),
          (this.Zc = n),
          (this.INTERNAL = {
            delete: function () {
              return r.terminate();
            },
          }),
          t instanceof Pd || (this.tu = t);
      }
      function Lg() {}
      function Pg(t) {
        this._delegate = t;
      }
      var Mg =
          ((Bg.prototype.get = function (t) {
            var e = this,
              n = am(t);
            return this._delegate.get(n).then(function (t) {
              return new Yg(
                e._firestore,
                new Ry(
                  e._firestore._delegate,
                  e._userDataWriter,
                  t._key,
                  t._document,
                  t.metadata,
                  n.converter
                )
              );
            });
          }),
          (Bg.prototype.set = function (t, e, n) {
            t = am(t);
            return (
              n
                ? (Yd("Transaction.set", n), this._delegate.set(t, e, n))
                : this._delegate.set(t, e),
              this
            );
          }),
          (Bg.prototype.update = function (t, e, n) {
            for (var r = [], i = 3; i < arguments.length; i++)
              r[i - 3] = arguments[i];
            var o = am(t);
            return (
              2 === arguments.length
                ? this._delegate.update(o, e)
                : (t = this._delegate).update.apply(t, s([o, e, n], r)),
              this
            );
          }),
          (Bg.prototype.delete = function (t) {
            t = am(t);
            return this._delegate.delete(t), this;
          }),
          Bg),
        Fg =
          ((qg.prototype.set = function (t, e, n) {
            t = am(t);
            return (
              n
                ? (Yd("WriteBatch.set", n), this._delegate.set(t, e, n))
                : this._delegate.set(t, e),
              this
            );
          }),
          (qg.prototype.update = function (t, e, n) {
            for (var r = [], i = 3; i < arguments.length; i++)
              r[i - 3] = arguments[i];
            var o = am(t);
            return (
              2 === arguments.length
                ? this._delegate.update(o, e)
                : (t = this._delegate).update.apply(t, s([o, e, n], r)),
              this
            );
          }),
          (qg.prototype.delete = function (t) {
            t = am(t);
            return this._delegate.delete(t), this;
          }),
          (qg.prototype.commit = function () {
            return this._delegate.commit();
          }),
          qg),
        Vg =
          ((Ug.prototype.fromFirestore = function (t, e) {
            t = new xy(
              this._firestore._delegate,
              this._userDataWriter,
              t._key,
              t._document,
              t.metadata,
              null
            );
            return this._delegate.fromFirestore(
              new Xg(this._firestore, t),
              null != e ? e : {}
            );
          }),
          (Ug.prototype.toFirestore = function (t, e) {
            return e
              ? this._delegate.toFirestore(t, e)
              : this._delegate.toFirestore(t);
          }),
          (Ug.nu = function (t, e) {
            var n = Ug.su,
              r = n.get(t);
            r || ((r = new WeakMap()), n.set(t, r));
            n = r.get(e);
            return n || ((n = new Ug(t, new Rg(t), e)), r.set(e, n)), n;
          }),
          Ug);
      function Ug(t, e, n) {
        (this._firestore = t), (this._userDataWriter = e), (this._delegate = n);
      }
      function qg(t) {
        this._delegate = t;
      }
      function Bg(t, e) {
        (this._firestore = t),
          (this._delegate = e),
          (this._userDataWriter = new Rg(t));
      }
      Vg.su = new WeakMap();
      var jg =
        ((Kg.iu = function (t, e, n) {
          if (t.length % 2 != 0)
            throw new Fr(
              Mr.INVALID_ARGUMENT,
              "Invalid document reference. Document references must have an even number of segments, but " +
                t.canonicalString() +
                " has " +
                t.length
            );
          return new Kg(e, new op(e._delegate, n, new Ai(t)));
        }),
        (Kg.eu = function (t, e, n) {
          return new Kg(e, new op(e._delegate, n, t));
        }),
        Object.defineProperty(Kg.prototype, "id", {
          get: function () {
            return this._delegate.id;
          },
          enumerable: !1,
          configurable: !0,
        }),
        Object.defineProperty(Kg.prototype, "parent", {
          get: function () {
            return new tm(this.firestore, this._delegate.parent);
          },
          enumerable: !1,
          configurable: !0,
        }),
        Object.defineProperty(Kg.prototype, "path", {
          get: function () {
            return this._delegate.path;
          },
          enumerable: !1,
          configurable: !0,
        }),
        (Kg.prototype.collection = function (t) {
          try {
            return new tm(this.firestore, dp(this._delegate, t));
          } catch (t) {
            throw Gg(t, "collection()", "DocumentReference.collection()");
          }
        }),
        (Kg.prototype.isEqual = function (t) {
          return (t = w(t)) instanceof op && yp(this._delegate, t);
        }),
        (Kg.prototype.set = function (t, e) {
          e = Yd("DocumentReference.set", e);
          try {
            return (function (t, e, n) {
              t = tp(t, op);
              var r = tp(t.firestore, Tp),
                e = ag(t.converter, e, n);
              return wg(r, [
                zp(
                  Hp(r),
                  "setDoc",
                  t._key,
                  e,
                  null !== t.converter,
                  n
                ).toMutation(t._key, ls.none()),
              ]);
            })(this._delegate, t, e);
          } catch (t) {
            throw Gg(t, "setDoc()", "DocumentReference.set()");
          }
        }),
        (Kg.prototype.update = function (t, e) {
          for (var n = [], r = 2; r < arguments.length; r++)
            n[r - 2] = arguments[r];
          try {
            return 1 === arguments.length
              ? mg(this._delegate, t)
              : mg.apply(void 0, s([this._delegate, t, e], n));
          } catch (t) {
            throw Gg(t, "updateDoc()", "DocumentReference.update()");
          }
        }),
        (Kg.prototype.delete = function () {
          return wg(tp((t = this._delegate).firestore, Tp), [
            new ks(t._key, ls.none()),
          ]);
          var t;
        }),
        (Kg.prototype.onSnapshot = function () {
          for (var e = this, t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
          var r = Qg(t),
            i = Hg(t, function (t) {
              return new Yg(
                e.firestore,
                new Ry(
                  e.firestore._delegate,
                  e._userDataWriter,
                  t._key,
                  t._document,
                  t.metadata,
                  e._delegate.converter
                )
              );
            });
          return vg(this._delegate, r, i);
        }),
        (Kg.prototype.get = function (t) {
          var e = this;
          return (
            "cache" === (null == t ? void 0 : t.source)
              ? function (e) {
                  e = tp(e, op);
                  var n = tp(e.firestore, Tp),
                    t = Sp(n),
                    r = new yg(n);
                  return (function (n, r) {
                    var t = this,
                      i = new cu();
                    return (
                      n.asyncQueue.enqueueAndForget(function () {
                        return y(t, void 0, void 0, function () {
                          var e;
                          return g(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return (
                                  (e = function (o, s, a) {
                                    return y(this, void 0, void 0, function () {
                                      var r, i;
                                      return g(this, function (t) {
                                        switch (t.label) {
                                          case 0:
                                            return (
                                              t.trys.push([0, 2, , 3]),
                                              [
                                                4,
                                                ((e = s),
                                                (n =
                                                  o).persistence.runTransaction(
                                                  "read document",
                                                  "readonly",
                                                  function (t) {
                                                    return n.Mn.mn(t, e);
                                                  }
                                                )),
                                              ]
                                            );
                                          case 1:
                                            return (
                                              (i = t.sent()).isFoundDocument()
                                                ? a.resolve(i)
                                                : i.isNoDocument()
                                                ? a.resolve(null)
                                                : a.reject(
                                                    new Fr(
                                                      Mr.UNAVAILABLE,
                                                      "Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"
                                                    )
                                                  ),
                                              [3, 3]
                                            );
                                          case 2:
                                            return (
                                              (r = t.sent()),
                                              (i = of(
                                                r,
                                                "Failed to get document '" +
                                                  s +
                                                  " from cache"
                                              )),
                                              a.reject(i),
                                              [3, 3]
                                            );
                                          case 3:
                                            return [2];
                                        }
                                        var e, n;
                                      });
                                    });
                                  }),
                                  [4, Dd(n)]
                                );
                              case 1:
                                return [2, e.apply(void 0, [t.sent(), r, i])];
                            }
                          });
                        });
                      }),
                      i.promise
                    );
                  })(t, e._key).then(function (t) {
                    return new Ry(
                      n,
                      r,
                      e._key,
                      t,
                      new ky(null !== t && t.hasLocalMutations, !0),
                      e.converter
                    );
                  });
                }
              : "server" === (null == t ? void 0 : t.source)
              ? function (e) {
                  e = tp(e, op);
                  var n = tp(e.firestore, Tp);
                  return Rd(Sp(n), e._key, { source: "server" }).then(function (
                    t
                  ) {
                    return bg(n, e, t);
                  });
                }
              : function (e) {
                  e = tp(e, op);
                  var n = tp(e.firestore, Tp);
                  return Rd(Sp(n), e._key).then(function (t) {
                    return bg(n, e, t);
                  });
                }
          )(this._delegate).then(function (t) {
            return new Yg(
              e.firestore,
              new Ry(
                e.firestore._delegate,
                e._userDataWriter,
                t._key,
                t._document,
                t.metadata,
                e._delegate.converter
              )
            );
          });
        }),
        (Kg.prototype.withConverter = function (t) {
          return new Kg(
            this.firestore,
            t
              ? this._delegate.withConverter(Vg.nu(this.firestore, t))
              : this._delegate.withConverter(null)
          );
        }),
        Kg);
      function Kg(t, e) {
        (this.firestore = t),
          (this._delegate = e),
          (this._userDataWriter = new Rg(t));
      }
      function Gg(t, e, n) {
        return (t.message = t.message.replace(e, n)), t;
      }
      function Qg(t) {
        for (var e = 0, n = t; e < n.length; e++) {
          var r = n[e];
          if ("object" == typeof r && !wp(r)) return r;
        }
        return {};
      }
      function Hg(t, e) {
        var n;
        return {
          next: function (t) {
            n.next && n.next(e(t));
          },
          error:
            null ===
              (t = (n = wp(t[0])
                ? t[0]
                : wp(t[1])
                ? t[1]
                : "function" == typeof t[0]
                ? { next: t[0], error: t[1], complete: t[2] }
                : { next: t[1], error: t[2], complete: t[3] }).error) ||
            void 0 === t
              ? void 0
              : t.bind(n),
          complete:
            null === (t = n.complete) || void 0 === t ? void 0 : t.bind(n),
        };
      }
      var zg,
        Wg,
        Yg =
          (Object.defineProperty(sm.prototype, "ref", {
            get: function () {
              return new jg(this._firestore, this._delegate.ref);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(sm.prototype, "id", {
            get: function () {
              return this._delegate.id;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(sm.prototype, "metadata", {
            get: function () {
              return this._delegate.metadata;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(sm.prototype, "exists", {
            get: function () {
              return this._delegate.exists();
            },
            enumerable: !1,
            configurable: !0,
          }),
          (sm.prototype.data = function (t) {
            return this._delegate.data(t);
          }),
          (sm.prototype.get = function (t, e) {
            return this._delegate.get(t, e);
          }),
          (sm.prototype.isEqual = function (t) {
            return Vy(this._delegate, t._delegate);
          }),
          sm),
        Xg =
          (n(om, (Wg = Yg)),
          (om.prototype.data = function (t) {
            return this._delegate.data(t);
          }),
          om),
        $g =
          ((im.prototype.where = function (t, e, n) {
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  ((r = n), (i = e), (o = Dy("where", t)), new Hy(o, i, r))
                )
              );
            } catch (t) {
              throw Gg(t, /(orderBy|where)\(\)/, "Query.$1()");
            }
            var r, i, o;
          }),
          (im.prototype.orderBy = function (t, e) {
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  ((n = void 0 === e ? "asc" : e),
                  (r = Dy("orderBy", t)),
                  new zy(r, n))
                )
              );
            } catch (t) {
              throw Gg(t, /(orderBy|where)\(\)/, "Query.$1()");
            }
            var n, r;
          }),
          (im.prototype.limit = function (t) {
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  (ep("limit", (e = t)), new Wy("limit", e, "F"))
                )
              );
            } catch (t) {
              throw Gg(t, "limit()", "Query.limit()");
            }
            var e;
          }),
          (im.prototype.limitToLast = function (t) {
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  (ep("limitToLast", (e = t)), new Wy("limitToLast", e, "L"))
                )
              );
            } catch (t) {
              throw Gg(t, "limitToLast()", "Query.limitToLast()");
            }
            var e;
          }),
          (im.prototype.startAt = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  function () {
                    for (var t = [], e = 0; e < arguments.length; e++)
                      t[e] = arguments[e];
                    return new Yy("startAt", t, !0);
                  }.apply(void 0, t)
                )
              );
            } catch (t) {
              throw Gg(t, "startAt()", "Query.startAt()");
            }
          }),
          (im.prototype.startAfter = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  function () {
                    for (var t = [], e = 0; e < arguments.length; e++)
                      t[e] = arguments[e];
                    return new Yy("startAfter", t, !1);
                  }.apply(void 0, t)
                )
              );
            } catch (t) {
              throw Gg(t, "startAfter()", "Query.startAfter()");
            }
          }),
          (im.prototype.endBefore = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  function () {
                    for (var t = [], e = 0; e < arguments.length; e++)
                      t[e] = arguments[e];
                    return new Xy("endBefore", t, !0);
                  }.apply(void 0, t)
                )
              );
            } catch (t) {
              throw Gg(t, "endBefore()", "Query.endBefore()");
            }
          }),
          (im.prototype.endAt = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            try {
              return new im(
                this.firestore,
                qy(
                  this._delegate,
                  function () {
                    for (var t = [], e = 0; e < arguments.length; e++)
                      t[e] = arguments[e];
                    return new Xy("endAt", t, !1);
                  }.apply(void 0, t)
                )
              );
            } catch (t) {
              throw Gg(t, "endAt()", "Query.endAt()");
            }
          }),
          (im.prototype.isEqual = function (t) {
            return gp(this._delegate, t._delegate);
          }),
          (im.prototype.get = function (t) {
            var e = this;
            return (
              "cache" === (null == t ? void 0 : t.source)
                ? function (e) {
                    e = tp(e, sp);
                    var n = tp(e.firestore, Tp),
                      t = Sp(n),
                      r = new yg(n);
                    return (function (n, r) {
                      var t = this,
                        i = new cu();
                      return (
                        n.asyncQueue.enqueueAndForget(function () {
                          return y(t, void 0, void 0, function () {
                            var e;
                            return g(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return (
                                    (e = function (i, o, s) {
                                      return y(
                                        this,
                                        void 0,
                                        void 0,
                                        function () {
                                          var e, n, r;
                                          return g(this, function (t) {
                                            switch (t.label) {
                                              case 0:
                                                return (
                                                  t.trys.push([0, 2, , 3]),
                                                  [4, mh(i, o, !0)]
                                                );
                                              case 1:
                                                return (
                                                  (r = t.sent()),
                                                  (e = new Nf(o, r.Bn)),
                                                  (n = e._o(r.documents)),
                                                  (n = e.applyChanges(n, !1)),
                                                  s.resolve(n.snapshot),
                                                  [3, 3]
                                                );
                                              case 2:
                                                return (
                                                  (n = t.sent()),
                                                  (r = of(
                                                    n,
                                                    "Failed to execute query '" +
                                                      o +
                                                      " against cache"
                                                  )),
                                                  s.reject(r),
                                                  [3, 3]
                                                );
                                              case 3:
                                                return [2];
                                            }
                                          });
                                        }
                                      );
                                    }),
                                    [4, Dd(n)]
                                  );
                                case 1:
                                  return [2, e.apply(void 0, [t.sent(), r, i])];
                              }
                            });
                          });
                        }),
                        i.promise
                      );
                    })(t, e._query).then(function (t) {
                      return new Oy(n, r, e, t);
                    });
                  }
                : "server" === (null == t ? void 0 : t.source)
                ? function (e) {
                    e = tp(e, sp);
                    var n = tp(e.firestore, Tp),
                      t = Sp(n),
                      r = new yg(n);
                    return xd(t, e._query, { source: "server" }).then(function (
                      t
                    ) {
                      return new Oy(n, r, e, t);
                    });
                  }
                : function (e) {
                    e = tp(e, sp);
                    var n = tp(e.firestore, Tp),
                      t = Sp(n),
                      r = new yg(n);
                    return (
                      Uy(e._query),
                      xd(t, e._query).then(function (t) {
                        return new Oy(n, r, e, t);
                      })
                    );
                  }
            )(this._delegate).then(function (t) {
              return new Zg(
                e.firestore,
                new Oy(
                  e.firestore._delegate,
                  e._userDataWriter,
                  e._delegate,
                  t._snapshot
                )
              );
            });
          }),
          (im.prototype.onSnapshot = function () {
            for (var e = this, t = [], n = 0; n < arguments.length; n++)
              t[n] = arguments[n];
            var r = Qg(t),
              i = Hg(t, function (t) {
                return new Zg(
                  e.firestore,
                  new Oy(
                    e.firestore._delegate,
                    e._userDataWriter,
                    e._delegate,
                    t._snapshot
                  )
                );
              });
            return vg(this._delegate, r, i);
          }),
          (im.prototype.withConverter = function (t) {
            return new im(
              this.firestore,
              t
                ? this._delegate.withConverter(Vg.nu(this.firestore, t))
                : this._delegate.withConverter(null)
            );
          }),
          im),
        Jg =
          (Object.defineProperty(rm.prototype, "type", {
            get: function () {
              return this._delegate.type;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(rm.prototype, "doc", {
            get: function () {
              return new Xg(this._firestore, this._delegate.doc);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(rm.prototype, "oldIndex", {
            get: function () {
              return this._delegate.oldIndex;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(rm.prototype, "newIndex", {
            get: function () {
              return this._delegate.newIndex;
            },
            enumerable: !1,
            configurable: !0,
          }),
          rm),
        Zg =
          (Object.defineProperty(nm.prototype, "query", {
            get: function () {
              return new $g(this._firestore, this._delegate.query);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(nm.prototype, "metadata", {
            get: function () {
              return this._delegate.metadata;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(nm.prototype, "size", {
            get: function () {
              return this._delegate.size;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(nm.prototype, "empty", {
            get: function () {
              return this._delegate.empty;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(nm.prototype, "docs", {
            get: function () {
              var e = this;
              return this._delegate.docs.map(function (t) {
                return new Xg(e._firestore, t);
              });
            },
            enumerable: !1,
            configurable: !0,
          }),
          (nm.prototype.docChanges = function (t) {
            var e = this;
            return this._delegate.docChanges(t).map(function (t) {
              return new Jg(e._firestore, t);
            });
          }),
          (nm.prototype.forEach = function (e, n) {
            var r = this;
            this._delegate.forEach(function (t) {
              e.call(n, new Xg(r._firestore, t));
            });
          }),
          (nm.prototype.isEqual = function (t) {
            return Vy(this._delegate, t._delegate);
          }),
          nm),
        tm =
          (n(em, (zg = $g)),
          Object.defineProperty(em.prototype, "id", {
            get: function () {
              return this._delegate.id;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(em.prototype, "path", {
            get: function () {
              return this._delegate.path;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(em.prototype, "parent", {
            get: function () {
              var t = this._delegate.parent;
              return t ? new jg(this.firestore, t) : null;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (em.prototype.doc = function (t) {
            try {
              return new jg(
                this.firestore,
                void 0 === t ? pp(this._delegate) : pp(this._delegate, t)
              );
            } catch (t) {
              throw Gg(t, "doc()", "CollectionReference.doc()");
            }
          }),
          (em.prototype.add = function (t) {
            var e,
              n,
              r,
              i = this;
            return (
              (e = this._delegate),
              (n = t),
              (t = tp(e.firestore, Tp)),
              (r = pp(e)),
              (n = ag(e.converter, n)),
              wg(t, [
                zp(
                  Hp(e.firestore),
                  "addDoc",
                  r._key,
                  n,
                  null !== e.converter,
                  {}
                ).toMutation(r._key, ls.exists(!1)),
              ])
                .then(function () {
                  return r;
                })
                .then(function (t) {
                  return new jg(i.firestore, t);
                })
            );
          }),
          (em.prototype.isEqual = function (t) {
            return yp(this._delegate, t._delegate);
          }),
          (em.prototype.withConverter = function (t) {
            return new em(
              this.firestore,
              t
                ? this._delegate.withConverter(Vg.nu(this.firestore, t))
                : this._delegate.withConverter(null)
            );
          }),
          em);
      function em(t, e) {
        var n = this;
        return (
          ((n = zg.call(this, t, e) || this).firestore = t),
          (n._delegate = e),
          n
        );
      }
      function nm(t, e) {
        (this._firestore = t), (this._delegate = e);
      }
      function rm(t, e) {
        (this._firestore = t), (this._delegate = e);
      }
      function im(t, e) {
        (this.firestore = t),
          (this._delegate = e),
          (this._userDataWriter = new Rg(t));
      }
      function om() {
        return (null !== Wg && Wg.apply(this, arguments)) || this;
      }
      function sm(t, e) {
        (this._firestore = t), (this._delegate = e);
      }
      function am(t) {
        return tp(t, op);
      }
      (cm.documentId = function () {
        return new cm(ci.keyField().canonicalString());
      }),
        (cm.prototype.isEqual = function (t) {
          return (
            (t = w(t)) instanceof Cp &&
            this._delegate._internalPath.isEqual(t._internalPath)
          );
        }),
        (C = cm),
        (um.serverTimestamp = function () {
          var t = new ny("serverTimestamp");
          return (t._methodName = "FieldValue.serverTimestamp"), new um(t);
        }),
        (um.delete = function () {
          var t = new Yp("deleteField");
          return (t._methodName = "FieldValue.delete"), new um(t);
        }),
        (um.arrayUnion = function () {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          var n = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            return new ry("arrayUnion", t);
          }.apply(void 0, t);
          return (n._methodName = "FieldValue.arrayUnion"), new um(n);
        }),
        (um.arrayRemove = function () {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          var n = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            return new iy("arrayRemove", t);
          }.apply(void 0, t);
          return (n._methodName = "FieldValue.arrayRemove"), new um(n);
        }),
        (um.increment = function (t) {
          t = new oy("increment", t);
          return (t._methodName = "FieldValue.increment"), new um(t);
        }),
        (um.prototype.isEqual = function (t) {
          return this._delegate.isEqual(t._delegate);
        }),
        (_ = um);
      function um(t) {
        this._delegate = t;
      }
      function cm() {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        this._delegate = new (Cp.bind.apply(Cp, s([void 0], t)))();
      }
      function hm(t) {
        return (
          (e = this._delegate),
          (s = t),
          (n = Sp((e = tp(e, Tp)))),
          (t = new Ep()),
          (function (n, t, r) {
            var e,
              i = this,
              o =
                ((e = s),
                (t = El(t)),
                (e = (function (t) {
                  if (t instanceof Uint8Array) return ld(t, void 0);
                  if (t instanceof ArrayBuffer)
                    return ld(new Uint8Array(t), void 0);
                  if (t instanceof ReadableStream) return t.getReader();
                  throw new Error(
                    "Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream"
                  );
                })("string" == typeof e ? new TextEncoder().encode(e) : e)),
                new dd(e, t));
            n.asyncQueue.enqueueAndForget(function () {
              return y(i, void 0, void 0, function () {
                var e;
                return g(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return (e = td), [4, Cd(n)];
                    case 1:
                      return e.apply(void 0, [t.sent(), o, r]), [2];
                  }
                });
              });
            });
          })(n, e._databaseId, t),
          t
        );
        var e, s, n;
      }
      function lm(t) {
        var e = this,
          n = this._delegate,
          t = t;
        return (function (n, r) {
          var t = this;
          return n.asyncQueue.enqueue(function () {
            return y(t, void 0, void 0, function () {
              var e;
              return g(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (e = function (t, e) {
                        var n = t;
                        return n.persistence.runTransaction(
                          "Get named query",
                          "readonly",
                          function (t) {
                            return n.Ke.getNamedQuery(t, e);
                          }
                        );
                      }),
                      [4, Dd(n)]
                    );
                  case 1:
                    return [2, e.apply(void 0, [t.sent(), r])];
                }
              });
            });
          });
        })(Sp((n = tp(n, Tp))), t)
          .then(function (t) {
            return t ? new sp(n, null, t.query) : null;
          })
          .then(function (t) {
            return t ? new $g(e, t) : null;
          });
      }
      var fm =
        ((dm.prototype.setInstantiationMode = function (t) {
          return (this.instantiationMode = t), this;
        }),
        (dm.prototype.setMultipleInstances = function (t) {
          return (this.multipleInstances = t), this;
        }),
        (dm.prototype.setServiceProps = function (t) {
          return (this.serviceProps = t), this;
        }),
        (dm.prototype.setInstanceCreatedCallback = function (t) {
          return (this.onInstanceCreated = t), this;
        }),
        dm);
      function dm(t, e, n) {
        (this.name = t),
          (this.instanceFactory = e),
          (this.type = n),
          (this.multipleInstances = !1),
          (this.serviceProps = {}),
          (this.instantiationMode = "LAZY"),
          (this.onInstanceCreated = null);
      }
      var pm,
        ym,
        gm = {
          Firestore: kg,
          GeoPoint: xp,
          Timestamp: Jr,
          Blob: Ng,
          Transaction: Mg,
          WriteBatch: Fg,
          DocumentReference: jg,
          DocumentSnapshot: Yg,
          Query: $g,
          QueryDocumentSnapshot: Xg,
          QuerySnapshot: Zg,
          CollectionReference: tm,
          FieldPath: C,
          FieldValue: _,
          setLogLevel: function (t) {
            Vr.setLogLevel(t);
          },
          CACHE_SIZE_UNLIMITED: -1,
        };
      (pm = e.default).INTERNAL.registerComponent(
        new fm(
          "firestore",
          function (t) {
            var e = t.getProvider("app").getImmediate();
            return (
              (e = e),
              (t = t.getProvider("auth-internal")),
              new kg(e, new Tp(e, t), new Cg())
            );
          },
          "PUBLIC"
        ).setServiceProps(Object.assign({}, gm))
      ),
        pm.registerVersion("@firebase/firestore", "2.3.10"),
        ((ym = kg).prototype.loadBundle = hm),
        (ym.prototype.namedQuery = lm);
    }.apply(this, arguments);
  } catch (t) {
    throw (
      (console.error(t),
      new Error(
        "Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first."
      ))
    );
  }
});
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
( function( global, factory ) {

	"use strict";

	if ( typeof module === "object" && typeof module.exports === "object" ) {

		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
} )( typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
// enough that all such attempts are guarded in a try block.
"use strict";

var arr = [];

var getProto = Object.getPrototypeOf;

var slice = arr.slice;

var flat = arr.flat ? function( array ) {
	return arr.flat.call( array );
} : function( array ) {
	return arr.concat.apply( [], array );
};


var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var fnToString = hasOwn.toString;

var ObjectFunctionString = fnToString.call( Object );

var support = {};

var isFunction = function isFunction( obj ) {

		// Support: Chrome <=57, Firefox <=52
		// In some browsers, typeof returns "function" for HTML <object> elements
		// (i.e., `typeof document.createElement( "object" ) === "function"`).
		// We don't want to classify *any* DOM node as a function.
		// Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5
		// Plus for old WebKit, typeof returns "function" for HTML collections
		// (e.g., `typeof document.getElementsByTagName("div") === "function"`). (gh-4756)
		return typeof obj === "function" && typeof obj.nodeType !== "number" &&
			typeof obj.item !== "function";
	};


var isWindow = function isWindow( obj ) {
		return obj != null && obj === obj.window;
	};


var document = window.document;



	var preservedScriptAttributes = {
		type: true,
		src: true,
		nonce: true,
		noModule: true
	};

	function DOMEval( code, node, doc ) {
		doc = doc || document;

		var i, val,
			script = doc.createElement( "script" );

		script.text = code;
		if ( node ) {
			for ( i in preservedScriptAttributes ) {

				// Support: Firefox 64+, Edge 18+
				// Some browsers don't support the "nonce" property on scripts.
				// On the other hand, just using `getAttribute` is not enough as
				// the `nonce` attribute is reset to an empty string whenever it
				// becomes browsing-context connected.
				// See https://github.com/whatwg/html/issues/2369
				// See https://html.spec.whatwg.org/#nonce-attributes
				// The `node.getAttribute` check was added for the sake of
				// `jQuery.globalEval` so that it can fake a nonce-containing node
				// via an object.
				val = node[ i ] || node.getAttribute && node.getAttribute( i );
				if ( val ) {
					script.setAttribute( i, val );
				}
			}
		}
		doc.head.appendChild( script ).parentNode.removeChild( script );
	}


function toType( obj ) {
	if ( obj == null ) {
		return obj + "";
	}

	// Support: Android <=2.3 only (functionish RegExp)
	return typeof obj === "object" || typeof obj === "function" ?
		class2type[ toString.call( obj ) ] || "object" :
		typeof obj;
}
/* global Symbol */
// Defining this global in .eslintrc.json would create a danger of using the global
// unguarded in another place, it seems safer to define global only for this module



var
	version = "3.6.0",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	};

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {

		// Return all the elements in a clean array
		if ( num == null ) {
			return slice.call( this );
		}

		// Return just the one element from the set
		return num < 0 ? this[ num + this.length ] : this[ num ];
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	even: function() {
		return this.pushStack( jQuery.grep( this, function( _elem, i ) {
			return ( i + 1 ) % 2;
		} ) );
	},

	odd: function() {
		return this.pushStack( jQuery.grep( this, function( _elem, i ) {
			return i % 2;
		} ) );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction( target ) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				copy = options[ name ];

				// Prevent Object.prototype pollution
				// Prevent never-ending loop
				if ( name === "__proto__" || target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = Array.isArray( copy ) ) ) ) {
					src = target[ name ];

					// Ensure proper type for the source value
					if ( copyIsArray && !Array.isArray( src ) ) {
						clone = [];
					} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {
						clone = {};
					} else {
						clone = src;
					}
					copyIsArray = false;

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isPlainObject: function( obj ) {
		var proto, Ctor;

		// Detect obvious negatives
		// Use toString instead of jQuery.type to catch host objects
		if ( !obj || toString.call( obj ) !== "[object Object]" ) {
			return false;
		}

		proto = getProto( obj );

		// Objects with no prototype (e.g., `Object.create( null )`) are plain
		if ( !proto ) {
			return true;
		}

		// Objects with prototype are plain iff they were constructed by a global Object function
		Ctor = hasOwn.call( proto, "constructor" ) && proto.constructor;
		return typeof Ctor === "function" && fnToString.call( Ctor ) === ObjectFunctionString;
	},

	isEmptyObject: function( obj ) {
		var name;

		for ( name in obj ) {
			return false;
		}
		return true;
	},

	// Evaluates a script in a provided context; falls back to the global one
	// if not specified.
	globalEval: function( code, options, doc ) {
		DOMEval( code, { nonce: options && options.nonce }, doc );
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
						[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	// Support: Android <=4.0 only, PhantomJS 1 only
	// push.apply(_, arraylike) throws on ancient WebKit
	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return flat( ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];
}

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
	function( _i, name ) {
		class2type[ "[object " + name + "]" ] = name.toLowerCase();
	} );

function isArrayLike( obj ) {

	// Support: real iOS 8.2 only (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = toType( obj );

	if ( isFunction( obj ) || isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
( function( window ) {
var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	nonnativeSelectorCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// Instance methods
	hasOwn = ( {} ).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	pushNative = arr.push,
	push = arr.push,
	slice = arr.slice,

	// Use a stripped-down indexOf as it's faster than native
	// https://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[ i ] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|" +
		"ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram
	identifier = "(?:\\\\[\\da-fA-F]{1,6}" + whitespace +
		"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +

		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +

		// "Attribute values must be CSS identifiers [capture 5]
		// or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" +
		whitespace + "*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +

		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +

		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +

		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" +
		whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace +
		"*" ),
	rdescend = new RegExp( whitespace + "|>" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" +
			whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" +
			whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),

		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace +
			"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace +
			"*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rhtml = /HTML$/i,
	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,

	// CSS escapes
	// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\[\\da-fA-F]{1,6}" + whitespace + "?|\\\\([^\\r\\n\\f])", "g" ),
	funescape = function( escape, nonHex ) {
		var high = "0x" + escape.slice( 1 ) - 0x10000;

		return nonHex ?

			// Strip the backslash prefix from a non-hex escape sequence
			nonHex :

			// Replace a hexadecimal escape sequence with the encoded Unicode code point
			// Support: IE <=11+
			// For values outside the Basic Multilingual Plane (BMP), manually construct a
			// surrogate pair
			high < 0 ?
				String.fromCharCode( high + 0x10000 ) :
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// CSS string/identifier serialization
	// https://drafts.csswg.org/cssom/#common-serializing-idioms
	rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
	fcssescape = function( ch, asCodePoint ) {
		if ( asCodePoint ) {

			// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
			if ( ch === "\0" ) {
				return "\uFFFD";
			}

			// Control characters and (dependent upon position) numbers get escaped as code points
			return ch.slice( 0, -1 ) + "\\" +
				ch.charCodeAt( ch.length - 1 ).toString( 16 ) + " ";
		}

		// Other potentially-special ASCII characters get backslash-escaped
		return "\\" + ch;
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	},

	inDisabledFieldset = addCombinator(
		function( elem ) {
			return elem.disabled === true && elem.nodeName.toLowerCase() === "fieldset";
		},
		{ dir: "parentNode", next: "legend" }
	);

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		( arr = slice.call( preferredDoc.childNodes ) ),
		preferredDoc.childNodes
	);

	// Support: Android<4.0
	// Detect silently failing push.apply
	// eslint-disable-next-line no-unused-expressions
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			pushNative.apply( target, slice.call( els ) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;

			// Can't trust NodeList.length
			while ( ( target[ j++ ] = els[ i++ ] ) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {
		setDocument( context );
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {

				// ID selector
				if ( ( m = match[ 1 ] ) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( ( elem = context.getElementById( m ) ) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && ( elem = newContext.getElementById( m ) ) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[ 2 ] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( ( m = match[ 3 ] ) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!nonnativeSelectorCache[ selector + " " ] &&
				( !rbuggyQSA || !rbuggyQSA.test( selector ) ) &&

				// Support: IE 8 only
				// Exclude object elements
				( nodeType !== 1 || context.nodeName.toLowerCase() !== "object" ) ) {

				newSelector = selector;
				newContext = context;

				// qSA considers elements outside a scoping root when evaluating child or
				// descendant combinators, which is not what we want.
				// In such cases, we work around the behavior by prefixing every selector in the
				// list with an ID selector referencing the scope context.
				// The technique has to be used as well when a leading combinator is used
				// as such selectors are not recognized by querySelectorAll.
				// Thanks to Andrew Dupont for this technique.
				if ( nodeType === 1 &&
					( rdescend.test( selector ) || rcombinators.test( selector ) ) ) {

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;

					// We can use :scope instead of the ID hack if the browser
					// supports it & if we're not changing the context.
					if ( newContext !== context || !support.scope ) {

						// Capture the context ID, setting it first if necessary
						if ( ( nid = context.getAttribute( "id" ) ) ) {
							nid = nid.replace( rcssescape, fcssescape );
						} else {
							context.setAttribute( "id", ( nid = expando ) );
						}
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					while ( i-- ) {
						groups[ i ] = ( nid ? "#" + nid : ":scope" ) + " " +
							toSelector( groups[ i ] );
					}
					newSelector = groups.join( "," );
				}

				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch ( qsaError ) {
					nonnativeSelectorCache( selector, true );
				} finally {
					if ( nid === expando ) {
						context.removeAttribute( "id" );
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {

		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {

			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return ( cache[ key + " " ] = value );
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created element and returns a boolean result
 */
function assert( fn ) {
	var el = document.createElement( "fieldset" );

	try {
		return !!fn( el );
	} catch ( e ) {
		return false;
	} finally {

		// Remove from its parent by default
		if ( el.parentNode ) {
			el.parentNode.removeChild( el );
		}

		// release memory in IE
		el = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split( "|" ),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[ i ] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			a.sourceIndex - b.sourceIndex;

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( ( cur = cur.nextSibling ) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return ( name === "input" || name === "button" ) && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for :enabled/:disabled
 * @param {Boolean} disabled true for :disabled; false for :enabled
 */
function createDisabledPseudo( disabled ) {

	// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
	return function( elem ) {

		// Only certain elements can match :enabled or :disabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
		if ( "form" in elem ) {

			// Check for inherited disabledness on relevant non-disabled elements:
			// * listed form-associated elements in a disabled fieldset
			//   https://html.spec.whatwg.org/multipage/forms.html#category-listed
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
			// * option elements in a disabled optgroup
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
			// All such elements have a "form" property.
			if ( elem.parentNode && elem.disabled === false ) {

				// Option elements defer to a parent optgroup if present
				if ( "label" in elem ) {
					if ( "label" in elem.parentNode ) {
						return elem.parentNode.disabled === disabled;
					} else {
						return elem.disabled === disabled;
					}
				}

				// Support: IE 6 - 11
				// Use the isDisabled shortcut property to check for disabled fieldset ancestors
				return elem.isDisabled === disabled ||

					// Where there is no isDisabled, check manually
					/* jshint -W018 */
					elem.isDisabled !== !disabled &&
					inDisabledFieldset( elem ) === disabled;
			}

			return elem.disabled === disabled;

		// Try to winnow out elements that can't be disabled before trusting the disabled property.
		// Some victims get caught in our net (label, legend, menu, track), but it shouldn't
		// even exist on them, let alone have a boolean value.
		} else if ( "label" in elem ) {
			return elem.disabled === disabled;
		}

		// Remaining elements are neither :enabled nor :disabled
		return false;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction( function( argument ) {
		argument = +argument;
		return markFunction( function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ ( j = matchIndexes[ i ] ) ] ) {
					seed[ j ] = !( matches[ j ] = seed[ j ] );
				}
			}
		} );
	} );
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	var namespace = elem && elem.namespaceURI,
		docElem = elem && ( elem.ownerDocument || elem ).documentElement;

	// Support: IE <=8
	// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes
	// https://bugs.jquery.com/ticket/4833
	return !rhtml.test( namespace || docElem && docElem.nodeName || "HTML" );
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, subWindow,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9 - 11+, Edge 12 - 18+
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( preferredDoc != document &&
		( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {

		// Support: IE 11, Edge
		if ( subWindow.addEventListener ) {
			subWindow.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( subWindow.attachEvent ) {
			subWindow.attachEvent( "onunload", unloadHandler );
		}
	}

	// Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,
	// Safari 4 - 5 only, Opera <=11.6 - 12.x only
	// IE/Edge & older browsers don't support the :scope pseudo-class.
	// Support: Safari 6.0 only
	// Safari 6.0 supports :scope but it's an alias of :root there.
	support.scope = assert( function( el ) {
		docElem.appendChild( el ).appendChild( document.createElement( "div" ) );
		return typeof el.querySelectorAll !== "undefined" &&
			!el.querySelectorAll( ":scope fieldset div" ).length;
	} );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert( function( el ) {
		el.className = "i";
		return !el.getAttribute( "className" );
	} );

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert( function( el ) {
		el.appendChild( document.createComment( "" ) );
		return !el.getElementsByTagName( "*" ).length;
	} );

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programmatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert( function( el ) {
		docElem.appendChild( el ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	} );

	// ID filter and find
	if ( support.getById ) {
		Expr.filter[ "ID" ] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute( "id" ) === attrId;
			};
		};
		Expr.find[ "ID" ] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var elem = context.getElementById( id );
				return elem ? [ elem ] : [];
			}
		};
	} else {
		Expr.filter[ "ID" ] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode( "id" );
				return node && node.value === attrId;
			};
		};

		// Support: IE 6 - 7 only
		// getElementById is not reliable as a find shortcut
		Expr.find[ "ID" ] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var node, i, elems,
					elem = context.getElementById( id );

				if ( elem ) {

					// Verify the id attribute
					node = elem.getAttributeNode( "id" );
					if ( node && node.value === id ) {
						return [ elem ];
					}

					// Fall back on getElementsByName
					elems = context.getElementsByName( id );
					i = 0;
					while ( ( elem = elems[ i++ ] ) ) {
						node = elem.getAttributeNode( "id" );
						if ( node && node.value === id ) {
							return [ elem ];
						}
					}
				}

				return [];
			}
		};
	}

	// Tag
	Expr.find[ "TAG" ] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,

				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( ( elem = results[ i++ ] ) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find[ "CLASS" ] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See https://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( ( support.qsa = rnative.test( document.querySelectorAll ) ) ) {

		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert( function( el ) {

			var input;

			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// https://bugs.jquery.com/ticket/12359
			docElem.appendChild( el ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( el.querySelectorAll( "[msallowcapture^='']" ).length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !el.querySelectorAll( "[selected]" ).length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !el.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push( "~=" );
			}

			// Support: IE 11+, Edge 15 - 18+
			// IE 11/Edge don't find elements on a `[name='']` query in some cases.
			// Adding a temporary attribute to the document before the selection works
			// around the issue.
			// Interestingly, IE 10 & older don't seem to have the issue.
			input = document.createElement( "input" );
			input.setAttribute( "name", "" );
			el.appendChild( input );
			if ( !el.querySelectorAll( "[name='']" ).length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*name" + whitespace + "*=" +
					whitespace + "*(?:''|\"\")" );
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !el.querySelectorAll( ":checked" ).length ) {
				rbuggyQSA.push( ":checked" );
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibling-combinator selector` fails
			if ( !el.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push( ".#.+[+~]" );
			}

			// Support: Firefox <=3.6 - 5 only
			// Old Firefox doesn't throw on a badly-escaped identifier.
			el.querySelectorAll( "\\\f" );
			rbuggyQSA.push( "[\\r\\n\\f]" );
		} );

		assert( function( el ) {
			el.innerHTML = "<a href='' disabled='disabled'></a>" +
				"<select disabled='disabled'><option/></select>";

			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement( "input" );
			input.setAttribute( "type", "hidden" );
			el.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( el.querySelectorAll( "[name=d]" ).length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( el.querySelectorAll( ":enabled" ).length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: IE9-11+
			// IE's :disabled selector does not pick up the children of disabled fieldsets
			docElem.appendChild( el ).disabled = true;
			if ( el.querySelectorAll( ":disabled" ).length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: Opera 10 - 11 only
			// Opera 10-11 does not throw on post-comma invalid pseudos
			el.querySelectorAll( "*,:x" );
			rbuggyQSA.push( ",.*:" );
		} );
	}

	if ( ( support.matchesSelector = rnative.test( ( matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector ) ) ) ) {

		assert( function( el ) {

			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( el, "*" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( el, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		} );
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( "|" ) );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join( "|" ) );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			) );
		} :
		function( a, b ) {
			if ( b ) {
				while ( ( b = b.parentNode ) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		// Support: IE 11+, Edge 17 - 18+
		// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
		// two documents; shallow comparisons work.
		// eslint-disable-next-line eqeqeq
		compare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {

			// Choose the first element that is related to our preferred document
			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			// eslint-disable-next-line eqeqeq
			if ( a == document || a.ownerDocument == preferredDoc &&
				contains( preferredDoc, a ) ) {
				return -1;
			}

			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			// eslint-disable-next-line eqeqeq
			if ( b == document || b.ownerDocument == preferredDoc &&
				contains( preferredDoc, b ) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {

		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {

			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			/* eslint-disable eqeqeq */
			return a == document ? -1 :
				b == document ? 1 :
				/* eslint-enable eqeqeq */
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( ( cur = cur.parentNode ) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( ( cur = cur.parentNode ) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[ i ] === bp[ i ] ) {
			i++;
		}

		return i ?

			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[ i ], bp[ i ] ) :

			// Otherwise nodes in our document sort first
			// Support: IE 11+, Edge 17 - 18+
			// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
			// two documents; shallow comparisons work.
			/* eslint-disable eqeqeq */
			ap[ i ] == preferredDoc ? -1 :
			bp[ i ] == preferredDoc ? 1 :
			/* eslint-enable eqeqeq */
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	setDocument( elem );

	if ( support.matchesSelector && documentIsHTML &&
		!nonnativeSelectorCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||

				// As well, disconnected nodes are said to be in a document
				// fragment in IE 9
				elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch ( e ) {
			nonnativeSelectorCache( expr, true );
		}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {

	// Set document vars if needed
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( ( context.ownerDocument || context ) != document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {

	// Set document vars if needed
	// Support: IE 11+, Edge 17 - 18+
	// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
	// two documents; shallow comparisons work.
	// eslint-disable-next-line eqeqeq
	if ( ( elem.ownerDocument || elem ) != document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],

		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			( val = elem.getAttributeNode( name ) ) && val.specified ?
				val.value :
				null;
};

Sizzle.escape = function( sel ) {
	return ( sel + "" ).replace( rcssescape, fcssescape );
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( ( elem = results[ i++ ] ) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {

		// If no nodeType, this is expected to be an array
		while ( ( node = elem[ i++ ] ) ) {

			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {

		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {

			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}

	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[ 1 ] = match[ 1 ].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[ 3 ] = ( match[ 3 ] || match[ 4 ] ||
				match[ 5 ] || "" ).replace( runescape, funescape );

			if ( match[ 2 ] === "~=" ) {
				match[ 3 ] = " " + match[ 3 ] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {

			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[ 1 ] = match[ 1 ].toLowerCase();

			if ( match[ 1 ].slice( 0, 3 ) === "nth" ) {

				// nth-* requires argument
				if ( !match[ 3 ] ) {
					Sizzle.error( match[ 0 ] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[ 4 ] = +( match[ 4 ] ?
					match[ 5 ] + ( match[ 6 ] || 1 ) :
					2 * ( match[ 3 ] === "even" || match[ 3 ] === "odd" ) );
				match[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === "odd" );

				// other types prohibit arguments
			} else if ( match[ 3 ] ) {
				Sizzle.error( match[ 0 ] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[ 6 ] && match[ 2 ];

			if ( matchExpr[ "CHILD" ].test( match[ 0 ] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[ 3 ] ) {
				match[ 2 ] = match[ 4 ] || match[ 5 ] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&

				// Get excess from tokenize (recursively)
				( excess = tokenize( unquoted, true ) ) &&

				// advance to the next closing parenthesis
				( excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length ) ) {

				// excess is a negative index
				match[ 0 ] = match[ 0 ].slice( 0, excess );
				match[ 2 ] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() {
					return true;
				} :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				( pattern = new RegExp( "(^|" + whitespace +
					")" + className + "(" + whitespace + "|$)" ) ) && classCache(
						className, function( elem ) {
							return pattern.test(
								typeof elem.className === "string" && elem.className ||
								typeof elem.getAttribute !== "undefined" &&
									elem.getAttribute( "class" ) ||
								""
							);
				} );
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				/* eslint-disable max-len */

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
				/* eslint-enable max-len */

			};
		},

		"CHILD": function( type, what, _argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, _context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( ( node = node[ dir ] ) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}

								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || ( node[ expando ] = {} );

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								( outerCache[ node.uniqueID ] = {} );

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( ( node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								( diff = nodeIndex = 0 ) || start.pop() ) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {

							// Use previously-cached element index if available
							if ( useCache ) {

								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || ( node[ expando ] = {} );

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									( outerCache[ node.uniqueID ] = {} );

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {

								// Use the same loop as above to seek `elem` from the start
								while ( ( node = ++nodeIndex && node && node[ dir ] ||
									( diff = nodeIndex = 0 ) || start.pop() ) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] ||
												( node[ expando ] = {} );

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												( outerCache[ node.uniqueID ] = {} );

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {

			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction( function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[ i ] );
							seed[ idx ] = !( matches[ idx ] = matched[ i ] );
						}
					} ) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {

		// Potentially complex pseudos
		"not": markFunction( function( selector ) {

			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction( function( seed, matches, _context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( ( elem = unmatched[ i ] ) ) {
							seed[ i ] = !( matches[ i ] = elem );
						}
					}
				} ) :
				function( elem, _context, xml ) {
					input[ 0 ] = elem;
					matcher( input, null, xml, results );

					// Don't keep the element (issue #299)
					input[ 0 ] = null;
					return !results.pop();
				};
		} ),

		"has": markFunction( function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		} ),

		"contains": markFunction( function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;
			};
		} ),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {

			// lang value must be a valid identifier
			if ( !ridentifier.test( lang || "" ) ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( ( elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute( "xml:lang" ) || elem.getAttribute( "lang" ) ) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );
				return false;
			};
		} ),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement &&
				( !document.hasFocus || document.hasFocus() ) &&
				!!( elem.type || elem.href || ~elem.tabIndex );
		},

		// Boolean properties
		"enabled": createDisabledPseudo( false ),
		"disabled": createDisabledPseudo( true ),

		"checked": function( elem ) {

			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return ( nodeName === "input" && !!elem.checked ) ||
				( nodeName === "option" && !!elem.selected );
		},

		"selected": function( elem ) {

			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				// eslint-disable-next-line no-unused-expressions
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {

			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos[ "empty" ]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( ( attr = elem.getAttribute( "type" ) ) == null ||
					attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo( function() {
			return [ 0 ];
		} ),

		"last": createPositionalPseudo( function( _matchIndexes, length ) {
			return [ length - 1 ];
		} ),

		"eq": createPositionalPseudo( function( _matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		} ),

		"even": createPositionalPseudo( function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} ),

		"odd": createPositionalPseudo( function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} ),

		"lt": createPositionalPseudo( function( matchIndexes, length, argument ) {
			var i = argument < 0 ?
				argument + length :
				argument > length ?
					length :
					argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} ),

		"gt": createPositionalPseudo( function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		} )
	}
};

Expr.pseudos[ "nth" ] = Expr.pseudos[ "eq" ];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || ( match = rcomma.exec( soFar ) ) ) {
			if ( match ) {

				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[ 0 ].length ) || soFar;
			}
			groups.push( ( tokens = [] ) );
		}

		matched = false;

		// Combinators
		if ( ( match = rcombinators.exec( soFar ) ) ) {
			matched = match.shift();
			tokens.push( {
				value: matched,

				// Cast descendant combinators to space
				type: match[ 0 ].replace( rtrim, " " )
			} );
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||
				( match = preFilters[ type ]( match ) ) ) ) {
				matched = match.shift();
				tokens.push( {
					value: matched,
					type: type,
					matches: match
				} );
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :

			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[ i ].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		skip = combinator.next,
		key = skip || dir,
		checkNonElements = base && key === "parentNode",
		doneName = done++;

	return combinator.first ?

		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( ( elem = elem[ dir ] ) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
			return false;
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( ( elem = elem[ dir ] ) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( ( elem = elem[ dir ] ) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || ( elem[ expando ] = {} );

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] ||
							( outerCache[ elem.uniqueID ] = {} );

						if ( skip && skip === elem.nodeName.toLowerCase() ) {
							elem = elem[ dir ] || elem;
						} else if ( ( oldCache = uniqueCache[ key ] ) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return ( newCache[ 2 ] = oldCache[ 2 ] );
						} else {

							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ key ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {
								return true;
							}
						}
					}
				}
			}
			return false;
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[ i ]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[ 0 ];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[ i ], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( ( elem = unmatched[ i ] ) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction( function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts(
				selector || "*",
				context.nodeType ? [ context ] : context,
				[]
			),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?

				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( ( elem = temp[ i ] ) ) {
					matcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {

					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( ( elem = matcherOut[ i ] ) ) {

							// Restore matcherIn since elem is not yet a final match
							temp.push( ( matcherIn[ i ] = elem ) );
						}
					}
					postFinder( null, ( matcherOut = [] ), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( ( elem = matcherOut[ i ] ) &&
						( temp = postFinder ? indexOf( seed, elem ) : preMap[ i ] ) > -1 ) {

						seed[ temp ] = !( results[ temp ] = elem );
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	} );
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[ 0 ].type ],
		implicitRelative = leadingRelative || Expr.relative[ " " ],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				( checkContext = context ).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );

			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {
			matchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];
		} else {
			matcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {

				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[ j ].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(

					// If the preceding token was a descendant combinator, insert an implicit any-element `*`
					tokens
						.slice( 0, i - 1 )
						.concat( { value: tokens[ i - 2 ].type === " " ? "*" : "" } )
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,

				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find[ "TAG" ]( "*", outermost ),

				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),
				len = elems.length;

			if ( outermost ) {

				// Support: IE 11+, Edge 17 - 18+
				// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
				// two documents; shallow comparisons work.
				// eslint-disable-next-line eqeqeq
				outermostContext = context == document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;

					// Support: IE 11+, Edge 17 - 18+
					// IE/Edge sometimes throw a "Permission denied" error when strict-comparing
					// two documents; shallow comparisons work.
					// eslint-disable-next-line eqeqeq
					if ( !context && elem.ownerDocument != document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( ( matcher = elementMatchers[ j++ ] ) ) {
						if ( matcher( elem, context || document, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {

					// They will have gone through all possible matchers
					if ( ( elem = !matcher && elem ) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( ( matcher = setMatchers[ j++ ] ) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {

					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !( unmatched[ i ] || setMatched[ i ] ) ) {
								setMatched[ i ] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {

		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[ i ] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache(
			selector,
			matcherFromGroupMatchers( elementMatchers, setMatchers )
		);

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( ( selector = compiled.selector || selector ) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[ 0 ] = match[ 0 ].slice( 0 );
		if ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === "ID" &&
			context.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {

			context = ( Expr.find[ "ID" ]( token.matches[ 0 ]
				.replace( runescape, funescape ), context ) || [] )[ 0 ];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr[ "needsContext" ].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[ i ];

			// Abort if we hit a combinator
			if ( Expr.relative[ ( type = token.type ) ] ) {
				break;
			}
			if ( ( find = Expr.find[ type ] ) ) {

				// Search, expanding context for leading sibling combinators
				if ( ( seed = find(
					token.matches[ 0 ].replace( runescape, funescape ),
					rsibling.test( tokens[ 0 ].type ) && testContext( context.parentNode ) ||
						context
				) ) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split( "" ).sort( sortOrder ).join( "" ) === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert( function( el ) {

	// Should return 1, but returns 4 (following)
	return el.compareDocumentPosition( document.createElement( "fieldset" ) ) & 1;
} );

// Support: IE<8
// Prevent attribute/property "interpolation"
// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert( function( el ) {
	el.innerHTML = "<a href='#'></a>";
	return el.firstChild.getAttribute( "href" ) === "#";
} ) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	} );
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert( function( el ) {
	el.innerHTML = "<input/>";
	el.firstChild.setAttribute( "value", "" );
	return el.firstChild.getAttribute( "value" ) === "";
} ) ) {
	addHandle( "value", function( elem, _name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	} );
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert( function( el ) {
	return el.getAttribute( "disabled" ) == null;
} ) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
				( val = elem.getAttributeNode( name ) ) && val.specified ?
					val.value :
					null;
		}
	} );
}

return Sizzle;

} )( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;

// Deprecated
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;
jQuery.escapeSelector = Sizzle.escape;




var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;



function nodeName( elem, name ) {

	return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();

}
var rsingleTag = ( /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i );



// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			return !!qualifier.call( elem, i, elem ) !== not;
		} );
	}

	// Single element
	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );
	}

	// Arraylike of elements (jQuery, arguments, Array)
	if ( typeof qualifier !== "string" ) {
		return jQuery.grep( elements, function( elem ) {
			return ( indexOf.call( qualifier, elem ) > -1 ) !== not;
		} );
	}

	// Filtered directly for both simple and complex selectors
	return jQuery.filter( qualifier, elements, not );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	if ( elems.length === 1 && elem.nodeType === 1 ) {
		return jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];
	}

	return jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
		return elem.nodeType === 1;
	} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i, ret,
			len = this.length,
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		ret = this.pushStack( [] );

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		return len > 1 ? jQuery.uniqueSort( ret ) : ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	// Shortcut simple #id case for speed
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Method init() accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[ 0 ] === "<" &&
				selector[ selector.length - 1 ] === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					if ( elem ) {

						// Inject the element directly into the jQuery object
						this[ 0 ] = elem;
						this.length = 1;
					}
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( isFunction( selector ) ) {
			return root.ready !== undefined ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter( function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			targets = typeof selectors !== "string" && jQuery( selectors );

		// Positional selectors never match, since there's no _selection_ context
		if ( !rneedsContext.test( selectors ) ) {
			for ( ; i < l; i++ ) {
				for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

					// Always skip document fragments
					if ( cur.nodeType < 11 && ( targets ?
						targets.index( cur ) > -1 :

						// Don't pass non-elements to Sizzle
						cur.nodeType === 1 &&
							jQuery.find.matchesSelector( cur, selectors ) ) ) {

						matched.push( cur );
						break;
					}
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	while ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, _i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, _i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, _i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
		if ( elem.contentDocument != null &&

			// Support: IE 11+
			// <object> elements with no `data` attribute has an object
			// `contentDocument` with a `null` prototype.
			getProto( elem.contentDocument ) ) {

			return elem.contentDocument;
		}

		// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
		// Treat the template element as a regular one in browsers that
		// don't support it.
		if ( nodeName( elem, "template" ) ) {
			elem = elem.content || elem;
		}

		return jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.uniqueSort( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
} );
var rnothtmlwhite = ( /[^\x20\t\r\n\f]+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = locked || options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && toType( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = queue = [];
				if ( !memory && !firing ) {
					list = memory = "";
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


function Identity( v ) {
	return v;
}
function Thrower( ex ) {
	throw ex;
}

function adoptValue( value, resolve, reject, noValue ) {
	var method;

	try {

		// Check for promise aspect first to privilege synchronous behavior
		if ( value && isFunction( ( method = value.promise ) ) ) {
			method.call( value ).done( resolve ).fail( reject );

		// Other thenables
		} else if ( value && isFunction( ( method = value.then ) ) ) {
			method.call( value, resolve, reject );

		// Other non-thenables
		} else {

			// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
			// * false: [ value ].slice( 0 ) => resolve( value )
			// * true: [ value ].slice( 1 ) => resolve()
			resolve.apply( undefined, [ value ].slice( noValue ) );
		}

	// For Promises/A+, convert exceptions into rejections
	// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
	// Deferred#then to conditionally suppress rejection.
	} catch ( value ) {

		// Support: Android 4.0 only
		// Strict mode functions invoked without .call/.apply get global-object context
		reject.apply( undefined, [ value ] );
	}
}

jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, callbacks,
				// ... .then handlers, argument index, [final state]
				[ "notify", "progress", jQuery.Callbacks( "memory" ),
					jQuery.Callbacks( "memory" ), 2 ],
				[ "resolve", "done", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 0, "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 1, "rejected" ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				"catch": function( fn ) {
					return promise.then( null, fn );
				},

				// Keep pipe for back-compat
				pipe: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;

					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( _i, tuple ) {

							// Map tuples (progress, done, fail) to arguments (done, fail, progress)
							var fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];

							// deferred.progress(function() { bind to newDefer or newDefer.notify })
							// deferred.done(function() { bind to newDefer or newDefer.resolve })
							// deferred.fail(function() { bind to newDefer or newDefer.reject })
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},
				then: function( onFulfilled, onRejected, onProgress ) {
					var maxDepth = 0;
					function resolve( depth, deferred, handler, special ) {
						return function() {
							var that = this,
								args = arguments,
								mightThrow = function() {
									var returned, then;

									// Support: Promises/A+ section 2.3.3.3.3
									// https://promisesaplus.com/#point-59
									// Ignore double-resolution attempts
									if ( depth < maxDepth ) {
										return;
									}

									returned = handler.apply( that, args );

									// Support: Promises/A+ section 2.3.1
									// https://promisesaplus.com/#point-48
									if ( returned === deferred.promise() ) {
										throw new TypeError( "Thenable self-resolution" );
									}

									// Support: Promises/A+ sections 2.3.3.1, 3.5
									// https://promisesaplus.com/#point-54
									// https://promisesaplus.com/#point-75
									// Retrieve `then` only once
									then = returned &&

										// Support: Promises/A+ section 2.3.4
										// https://promisesaplus.com/#point-64
										// Only check objects and functions for thenability
										( typeof returned === "object" ||
											typeof returned === "function" ) &&
										returned.then;

									// Handle a returned thenable
									if ( isFunction( then ) ) {

										// Special processors (notify) just wait for resolution
										if ( special ) {
											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special )
											);

										// Normal processors (resolve) also hook into progress
										} else {

											// ...and disregard older resolution values
											maxDepth++;

											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special ),
												resolve( maxDepth, deferred, Identity,
													deferred.notifyWith )
											);
										}

									// Handle all other returned values
									} else {

										// Only substitute handlers pass on context
										// and multiple values (non-spec behavior)
										if ( handler !== Identity ) {
											that = undefined;
											args = [ returned ];
										}

										// Process the value(s)
										// Default process is resolve
										( special || deferred.resolveWith )( that, args );
									}
								},

								// Only normal processors (resolve) catch and reject exceptions
								process = special ?
									mightThrow :
									function() {
										try {
											mightThrow();
										} catch ( e ) {

											if ( jQuery.Deferred.exceptionHook ) {
												jQuery.Deferred.exceptionHook( e,
													process.stackTrace );
											}

											// Support: Promises/A+ section 2.3.3.3.4.1
											// https://promisesaplus.com/#point-61
											// Ignore post-resolution exceptions
											if ( depth + 1 >= maxDepth ) {

												// Only substitute handlers pass on context
												// and multiple values (non-spec behavior)
												if ( handler !== Thrower ) {
													that = undefined;
													args = [ e ];
												}

												deferred.rejectWith( that, args );
											}
										}
									};

							// Support: Promises/A+ section 2.3.3.3.1
							// https://promisesaplus.com/#point-57
							// Re-resolve promises immediately to dodge false rejection from
							// subsequent errors
							if ( depth ) {
								process();
							} else {

								// Call an optional hook to record the stack, in case of exception
								// since it's otherwise lost when execution goes async
								if ( jQuery.Deferred.getStackHook ) {
									process.stackTrace = jQuery.Deferred.getStackHook();
								}
								window.setTimeout( process );
							}
						};
					}

					return jQuery.Deferred( function( newDefer ) {

						// progress_handlers.add( ... )
						tuples[ 0 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onProgress ) ?
									onProgress :
									Identity,
								newDefer.notifyWith
							)
						);

						// fulfilled_handlers.add( ... )
						tuples[ 1 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onFulfilled ) ?
									onFulfilled :
									Identity
							)
						);

						// rejected_handlers.add( ... )
						tuples[ 2 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onRejected ) ?
									onRejected :
									Thrower
							)
						);
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 5 ];

			// promise.progress = list.add
			// promise.done = list.add
			// promise.fail = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(
					function() {

						// state = "resolved" (i.e., fulfilled)
						// state = "rejected"
						state = stateString;
					},

					// rejected_callbacks.disable
					// fulfilled_callbacks.disable
					tuples[ 3 - i ][ 2 ].disable,

					// rejected_handlers.disable
					// fulfilled_handlers.disable
					tuples[ 3 - i ][ 3 ].disable,

					// progress_callbacks.lock
					tuples[ 0 ][ 2 ].lock,

					// progress_handlers.lock
					tuples[ 0 ][ 3 ].lock
				);
			}

			// progress_handlers.fire
			// fulfilled_handlers.fire
			// rejected_handlers.fire
			list.add( tuple[ 3 ].fire );

			// deferred.notify = function() { deferred.notifyWith(...) }
			// deferred.resolve = function() { deferred.resolveWith(...) }
			// deferred.reject = function() { deferred.rejectWith(...) }
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? undefined : this, arguments );
				return this;
			};

			// deferred.notifyWith = list.fireWith
			// deferred.resolveWith = list.fireWith
			// deferred.rejectWith = list.fireWith
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( singleValue ) {
		var

			// count of uncompleted subordinates
			remaining = arguments.length,

			// count of unprocessed arguments
			i = remaining,

			// subordinate fulfillment data
			resolveContexts = Array( i ),
			resolveValues = slice.call( arguments ),

			// the primary Deferred
			primary = jQuery.Deferred(),

			// subordinate callback factory
			updateFunc = function( i ) {
				return function( value ) {
					resolveContexts[ i ] = this;
					resolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( !( --remaining ) ) {
						primary.resolveWith( resolveContexts, resolveValues );
					}
				};
			};

		// Single- and empty arguments are adopted like Promise.resolve
		if ( remaining <= 1 ) {
			adoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,
				!remaining );

			// Use .then() to unwrap secondary thenables (cf. gh-3000)
			if ( primary.state() === "pending" ||
				isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {

				return primary.then();
			}
		}

		// Multiple arguments are aggregated like Promise.all array elements
		while ( i-- ) {
			adoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );
		}

		return primary.promise();
	}
} );


// These usually indicate a programmer mistake during development,
// warn about them ASAP rather than swallowing them by default.
var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;

jQuery.Deferred.exceptionHook = function( error, stack ) {

	// Support: IE 8 - 9 only
	// Console exists when dev tools are open, which can happen at any time
	if ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {
		window.console.warn( "jQuery.Deferred exception: " + error.message, error.stack, stack );
	}
};




jQuery.readyException = function( error ) {
	window.setTimeout( function() {
		throw error;
	} );
};




// The deferred used on DOM ready
var readyList = jQuery.Deferred();

jQuery.fn.ready = function( fn ) {

	readyList
		.then( fn )

		// Wrap jQuery.readyException in a function so that the lookup
		// happens at the time of error handling instead of callback
		// registration.
		.catch( function( error ) {
			jQuery.readyException( error );
		} );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );
	}
} );

jQuery.ready.then = readyList.then;

// The ready event handler and self cleanup method
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed );
	window.removeEventListener( "load", completed );
	jQuery.ready();
}

// Catch cases where $(document).ready() is called
// after the browser event has already occurred.
// Support: IE <=9 - 10 only
// Older IE sometimes signals "interactive" too soon
if ( document.readyState === "complete" ||
	( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

	// Handle it asynchronously to allow scripts the opportunity to delay ready
	window.setTimeout( jQuery.ready );

} else {

	// Use the handy event callback
	document.addEventListener( "DOMContentLoaded", completed );

	// A fallback to window.onload, that will always work
	window.addEventListener( "load", completed );
}




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( toType( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, _key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn(
					elems[ i ], key, raw ?
						value :
						value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	if ( chainable ) {
		return elems;
	}

	// Gets
	if ( bulk ) {
		return fn.call( elems );
	}

	return len ? fn( elems[ 0 ], key ) : emptyGet;
};


// Matches dashed string for camelizing
var rmsPrefix = /^-ms-/,
	rdashAlpha = /-([a-z])/g;

// Used by camelCase as callback to replace()
function fcamelCase( _all, letter ) {
	return letter.toUpperCase();
}

// Convert dashed to camelCase; used by the css and data modules
// Support: IE <=9 - 11, Edge 12 - 15
// Microsoft forgot to hump their vendor prefix (#9572)
function camelCase( string ) {
	return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
}
var acceptData = function( owner ) {

	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};




function Data() {
	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;

Data.prototype = {

	cache: function( owner ) {

		// Check if the owner object already has a cache
		var value = owner[ this.expando ];

		// If not, create one
		if ( !value ) {
			value = {};

			// We can accept data for non-element nodes in modern browsers,
			// but we should not, see #8335.
			// Always return an empty object.
			if ( acceptData( owner ) ) {

				// If it is a node unlikely to be stringify-ed or looped over
				// use plain assignment
				if ( owner.nodeType ) {
					owner[ this.expando ] = value;

				// Otherwise secure it in a non-enumerable property
				// configurable must be true to allow the property to be
				// deleted when data is removed
				} else {
					Object.defineProperty( owner, this.expando, {
						value: value,
						configurable: true
					} );
				}
			}
		}

		return value;
	},
	set: function( owner, data, value ) {
		var prop,
			cache = this.cache( owner );

		// Handle: [ owner, key, value ] args
		// Always use camelCase key (gh-2257)
		if ( typeof data === "string" ) {
			cache[ camelCase( data ) ] = value;

		// Handle: [ owner, { properties } ] args
		} else {

			// Copy the properties one-by-one to the cache object
			for ( prop in data ) {
				cache[ camelCase( prop ) ] = data[ prop ];
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		return key === undefined ?
			this.cache( owner ) :

			// Always use camelCase key (gh-2257)
			owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];
	},
	access: function( owner, key, value ) {

		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				( ( key && typeof key === "string" ) && value === undefined ) ) {

			return this.get( owner, key );
		}

		// When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i,
			cache = owner[ this.expando ];

		if ( cache === undefined ) {
			return;
		}

		if ( key !== undefined ) {

			// Support array or space separated string of keys
			if ( Array.isArray( key ) ) {

				// If key is an array of keys...
				// We always set camelCase keys, so remove that.
				key = key.map( camelCase );
			} else {
				key = camelCase( key );

				// If a key with the spaces exists, use it.
				// Otherwise, create an array by matching non-whitespace
				key = key in cache ?
					[ key ] :
					( key.match( rnothtmlwhite ) || [] );
			}

			i = key.length;

			while ( i-- ) {
				delete cache[ key[ i ] ];
			}
		}

		// Remove the expando if there's no more data
		if ( key === undefined || jQuery.isEmptyObject( cache ) ) {

			// Support: Chrome <=35 - 45
			// Webkit & Blink performance suffers when deleting properties
			// from DOM nodes, so set to undefined instead
			// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
			if ( owner.nodeType ) {
				owner[ this.expando ] = undefined;
			} else {
				delete owner[ this.expando ];
			}
		}
	},
	hasData: function( owner ) {
		var cache = owner[ this.expando ];
		return cache !== undefined && !jQuery.isEmptyObject( cache );
	}
};
var dataPriv = new Data();

var dataUser = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /[A-Z]/g;

function getData( data ) {
	if ( data === "true" ) {
		return true;
	}

	if ( data === "false" ) {
		return false;
	}

	if ( data === "null" ) {
		return null;
	}

	// Only convert to a number if it doesn't change the string
	if ( data === +data + "" ) {
		return +data;
	}

	if ( rbrace.test( data ) ) {
		return JSON.parse( data );
	}

	return data;
}

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$&" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = getData( data );
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			dataUser.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend( {
	hasData: function( elem ) {
		return dataUser.hasData( elem ) || dataPriv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return dataUser.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		dataUser.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to dataPriv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return dataPriv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		dataPriv.remove( elem, name );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = dataUser.get( elem );

				if ( elem.nodeType === 1 && !dataPriv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE 11 only
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					dataPriv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				dataUser.set( this, key );
			} );
		}

		return access( this, function( value ) {
			var data;

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {

				// Attempt to get data from the cache
				// The key will always be camelCased in Data
				data = dataUser.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each( function() {

				// We always store the camelCased key
				dataUser.set( this, key, value );
			} );
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each( function() {
			dataUser.remove( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = dataPriv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || Array.isArray( data ) ) {
					queue = dataPriv.access( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return dataPriv.get( elem, key ) || dataPriv.access( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				dataPriv.remove( elem, [ type + "queue", key ] );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = dataPriv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var documentElement = document.documentElement;



	var isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem );
		},
		composed = { composed: true };

	// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only
	// Check attachment across shadow DOM boundaries when possible (gh-3504)
	// Support: iOS 10.0-10.2 only
	// Early iOS 10 versions support `attachShadow` but not `getRootNode`,
	// leading to errors. We need to check for `getRootNode`.
	if ( documentElement.getRootNode ) {
		isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem ) ||
				elem.getRootNode( composed ) === elem.ownerDocument;
		};
	}
var isHiddenWithinTree = function( elem, el ) {

		// isHiddenWithinTree might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;

		// Inline style trumps all
		return elem.style.display === "none" ||
			elem.style.display === "" &&

			// Otherwise, check computed style
			// Support: Firefox <=43 - 45
			// Disconnected elements can have computed display: none, so first confirm that elem is
			// in the document.
			isAttached( elem ) &&

			jQuery.css( elem, "display" ) === "none";
	};



function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted, scale,
		maxIterations = 20,
		currentValue = tween ?
			function() {
				return tween.cur();
			} :
			function() {
				return jQuery.css( elem, prop, "" );
			},
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = elem.nodeType &&
			( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Support: Firefox <=54
		// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
		initial = initial / 2;

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		while ( maxIterations-- ) {

			// Evaluate and update our best guess (doubling guesses that zero out).
			// Finish if the scale equals or crosses 1 (making the old*new product non-positive).
			jQuery.style( elem, prop, initialInUnit + unit );
			if ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {
				maxIterations = 0;
			}
			initialInUnit = initialInUnit / scale;

		}

		initialInUnit = initialInUnit * 2;
		jQuery.style( elem, prop, initialInUnit + unit );

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


var defaultDisplayMap = {};

function getDefaultDisplay( elem ) {
	var temp,
		doc = elem.ownerDocument,
		nodeName = elem.nodeName,
		display = defaultDisplayMap[ nodeName ];

	if ( display ) {
		return display;
	}

	temp = doc.body.appendChild( doc.createElement( nodeName ) );
	display = jQuery.css( temp, "display" );

	temp.parentNode.removeChild( temp );

	if ( display === "none" ) {
		display = "block";
	}
	defaultDisplayMap[ nodeName ] = display;

	return display;
}

function showHide( elements, show ) {
	var display, elem,
		values = [],
		index = 0,
		length = elements.length;

	// Determine new display value for elements that need to change
	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		display = elem.style.display;
		if ( show ) {

			// Since we force visibility upon cascade-hidden elements, an immediate (and slow)
			// check is required in this first loop unless we have a nonempty display value (either
			// inline or about-to-be-restored)
			if ( display === "none" ) {
				values[ index ] = dataPriv.get( elem, "display" ) || null;
				if ( !values[ index ] ) {
					elem.style.display = "";
				}
			}
			if ( elem.style.display === "" && isHiddenWithinTree( elem ) ) {
				values[ index ] = getDefaultDisplay( elem );
			}
		} else {
			if ( display !== "none" ) {
				values[ index ] = "none";

				// Remember what we're overwriting
				dataPriv.set( elem, "display", display );
			}
		}
	}

	// Set the display of the elements in a second loop to avoid constant reflow
	for ( index = 0; index < length; index++ ) {
		if ( values[ index ] != null ) {
			elements[ index ].style.display = values[ index ];
		}
	}

	return elements;
}

jQuery.fn.extend( {
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHiddenWithinTree( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([a-z][^\/\0>\x20\t\r\n\f]*)/i );

var rscriptType = ( /^$|^module$|\/(?:java|ecma)script/i );



( function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Android 4.0 - 4.3 only
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Android <=4.1 only
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE <=11 only
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;

	// Support: IE <=9 only
	// IE <=9 replaces <option> tags with their contents when inserted outside of
	// the select element.
	div.innerHTML = "<option></option>";
	support.option = !!div.lastChild;
} )();


// We have to close these tags to support XHTML (#13200)
var wrapMap = {

	// XHTML parsers do not magically insert elements in the
	// same way that tag soup parsers do. So we cannot shorten
	// this by omitting <tbody> or other required elements.
	thead: [ 1, "<table>", "</table>" ],
	col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	_default: [ 0, "", "" ]
};

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: IE <=9 only
if ( !support.option ) {
	wrapMap.optgroup = wrapMap.option = [ 1, "<select multiple='multiple'>", "</select>" ];
}


function getAll( context, tag ) {

	// Support: IE <=9 - 11 only
	// Use typeof to avoid zero-argument method invocation on host objects (#15151)
	var ret;

	if ( typeof context.getElementsByTagName !== "undefined" ) {
		ret = context.getElementsByTagName( tag || "*" );

	} else if ( typeof context.querySelectorAll !== "undefined" ) {
		ret = context.querySelectorAll( tag || "*" );

	} else {
		ret = [];
	}

	if ( tag === undefined || tag && nodeName( context, tag ) ) {
		return jQuery.merge( [ context ], ret );
	}

	return ret;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		dataPriv.set(
			elems[ i ],
			"globalEval",
			!refElements || dataPriv.get( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/;

function buildFragment( elems, context, scripts, selection, ignored ) {
	var elem, tmp, tag, wrap, attached, j,
		fragment = context.createDocumentFragment(),
		nodes = [],
		i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( toType( elem ) === "object" ) {

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || fragment.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;
				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, tmp.childNodes );

				// Remember the top-level container
				tmp = fragment.firstChild;

				// Ensure the created nodes are orphaned (#12392)
				tmp.textContent = "";
			}
		}
	}

	// Remove wrapper from fragment
	fragment.textContent = "";

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}
			continue;
		}

		attached = isAttached( elem );

		// Append to fragment
		tmp = getAll( fragment.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( attached ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	return fragment;
}


var rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE <=9 - 11+
// focus() and blur() are asynchronous, except when they are no-op.
// So expect focus to be synchronous when the element is already active,
// and blur to be synchronous when the element is not already active.
// (focus and blur are always synchronous in other supported browsers,
// this just defines when we can count on it).
function expectSync( elem, type ) {
	return ( elem === safeActiveElement() ) === ( type === "focus" );
}

// Support: IE <=9 only
// Accessing document.activeElement can throw unexpectedly
// https://bugs.jquery.com/ticket/13393
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.get( elem );

		// Only attach events to objects that accept data
		if ( !acceptData( elem ) ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Ensure that invalid selectors throw exceptions at attach time
		// Evaluate against documentElement in case elem is a non-element node (e.g., document)
		if ( selector ) {
			jQuery.find.matchesSelector( documentElement, selector );
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = Object.create( null );
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.hasData( elem ) && dataPriv.get( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove data and the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			dataPriv.remove( elem, "handle events" );
		}
	},

	dispatch: function( nativeEvent ) {

		var i, j, ret, matched, handleObj, handlerQueue,
			args = new Array( arguments.length ),

			// Make a writable jQuery.Event from the native event object
			event = jQuery.event.fix( nativeEvent ),

			handlers = (
				dataPriv.get( this, "events" ) || Object.create( null )
			)[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;

		for ( i = 1; i < arguments.length; i++ ) {
			args[ i ] = arguments[ i ];
		}

		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// If the event is namespaced, then each handler is only invoked if it is
				// specially universal or its namespaces are a superset of the event's.
				if ( !event.rnamespace || handleObj.namespace === false ||
					event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, handleObj, sel, matchedHandlers, matchedSelectors,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		if ( delegateCount &&

			// Support: IE <=9
			// Black-hole SVG <use> instance trees (trac-13180)
			cur.nodeType &&

			// Support: Firefox <=42
			// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
			// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
			// Support: IE 11 only
			// ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
			!( event.type === "click" && event.button >= 1 ) ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && !( event.type === "click" && cur.disabled === true ) ) {
					matchedHandlers = [];
					matchedSelectors = {};
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matchedSelectors[ sel ] === undefined ) {
							matchedSelectors[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matchedSelectors[ sel ] ) {
							matchedHandlers.push( handleObj );
						}
					}
					if ( matchedHandlers.length ) {
						handlerQueue.push( { elem: cur, handlers: matchedHandlers } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		cur = this;
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	addProp: function( name, hook ) {
		Object.defineProperty( jQuery.Event.prototype, name, {
			enumerable: true,
			configurable: true,

			get: isFunction( hook ) ?
				function() {
					if ( this.originalEvent ) {
						return hook( this.originalEvent );
					}
				} :
				function() {
					if ( this.originalEvent ) {
						return this.originalEvent[ name ];
					}
				},

			set: function( value ) {
				Object.defineProperty( this, name, {
					enumerable: true,
					configurable: true,
					writable: true,
					value: value
				} );
			}
		} );
	},

	fix: function( originalEvent ) {
		return originalEvent[ jQuery.expando ] ?
			originalEvent :
			new jQuery.Event( originalEvent );
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		click: {

			// Utilize native event to ensure correct state for checkable inputs
			setup: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Claim the first handler
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					// dataPriv.set( el, "click", ... )
					leverageNative( el, "click", returnTrue );
				}

				// Return false to allow normal processing in the caller
				return false;
			},
			trigger: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Force setup before triggering a click
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					leverageNative( el, "click" );
				}

				// Return non-false to allow normal event-path propagation
				return true;
			},

			// For cross-browser consistency, suppress native .click() on links
			// Also prevent it if we're currently inside a leveraged native-event stack
			_default: function( event ) {
				var target = event.target;
				return rcheckableType.test( target.type ) &&
					target.click && nodeName( target, "input" ) &&
					dataPriv.get( target, "click" ) ||
					nodeName( target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	}
};

// Ensure the presence of an event listener that handles manually-triggered
// synthetic events by interrupting progress until reinvoked in response to
// *native* events that it fires directly, ensuring that state changes have
// already occurred before other listeners are invoked.
function leverageNative( el, type, expectSync ) {

	// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add
	if ( !expectSync ) {
		if ( dataPriv.get( el, type ) === undefined ) {
			jQuery.event.add( el, type, returnTrue );
		}
		return;
	}

	// Register the controller as a special universal handler for all event namespaces
	dataPriv.set( el, type, false );
	jQuery.event.add( el, type, {
		namespace: false,
		handler: function( event ) {
			var notAsync, result,
				saved = dataPriv.get( this, type );

			if ( ( event.isTrigger & 1 ) && this[ type ] ) {

				// Interrupt processing of the outer synthetic .trigger()ed event
				// Saved data should be false in such cases, but might be a leftover capture object
				// from an async native handler (gh-4350)
				if ( !saved.length ) {

					// Store arguments for use when handling the inner native event
					// There will always be at least one argument (an event object), so this array
					// will not be confused with a leftover capture object.
					saved = slice.call( arguments );
					dataPriv.set( this, type, saved );

					// Trigger the native event and capture its result
					// Support: IE <=9 - 11+
					// focus() and blur() are asynchronous
					notAsync = expectSync( this, type );
					this[ type ]();
					result = dataPriv.get( this, type );
					if ( saved !== result || notAsync ) {
						dataPriv.set( this, type, false );
					} else {
						result = {};
					}
					if ( saved !== result ) {

						// Cancel the outer synthetic event
						event.stopImmediatePropagation();
						event.preventDefault();

						// Support: Chrome 86+
						// In Chrome, if an element having a focusout handler is blurred by
						// clicking outside of it, it invokes the handler synchronously. If
						// that handler calls `.remove()` on the element, the data is cleared,
						// leaving `result` undefined. We need to guard against this.
						return result && result.value;
					}

				// If this is an inner synthetic event for an event with a bubbling surrogate
				// (focus or blur), assume that the surrogate already propagated from triggering the
				// native event and prevent that from happening again here.
				// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the
				// bubbling surrogate propagates *after* the non-bubbling base), but that seems
				// less bad than duplication.
				} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {
					event.stopPropagation();
				}

			// If this is a native event triggered above, everything is now in order
			// Fire an inner synthetic event with the original arguments
			} else if ( saved.length ) {

				// ...and capture the result
				dataPriv.set( this, type, {
					value: jQuery.event.trigger(

						// Support: IE <=9 - 11+
						// Extend with the prototype to reset the above stopImmediatePropagation()
						jQuery.extend( saved[ 0 ], jQuery.Event.prototype ),
						saved.slice( 1 ),
						this
					)
				} );

				// Abort handling of the native event
				event.stopImmediatePropagation();
			}
		}
	} );
}

jQuery.removeEvent = function( elem, type, handle ) {

	// This "if" is needed for plain objects
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle );
	}
};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: Android <=2.3 only
				src.returnValue === false ?
			returnTrue :
			returnFalse;

		// Create target properties
		// Support: Safari <=6 - 7 only
		// Target should not be a text node (#504, #13143)
		this.target = ( src.target && src.target.nodeType === 3 ) ?
			src.target.parentNode :
			src.target;

		this.currentTarget = src.currentTarget;
		this.relatedTarget = src.relatedTarget;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || Date.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,
	isSimulated: false,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && !this.isSimulated ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Includes all common event props including KeyEvent and MouseEvent specific props
jQuery.each( {
	altKey: true,
	bubbles: true,
	cancelable: true,
	changedTouches: true,
	ctrlKey: true,
	detail: true,
	eventPhase: true,
	metaKey: true,
	pageX: true,
	pageY: true,
	shiftKey: true,
	view: true,
	"char": true,
	code: true,
	charCode: true,
	key: true,
	keyCode: true,
	button: true,
	buttons: true,
	clientX: true,
	clientY: true,
	offsetX: true,
	offsetY: true,
	pointerId: true,
	pointerType: true,
	screenX: true,
	screenY: true,
	targetTouches: true,
	toElement: true,
	touches: true,
	which: true
}, jQuery.event.addProp );

jQuery.each( { focus: "focusin", blur: "focusout" }, function( type, delegateType ) {
	jQuery.event.special[ type ] = {

		// Utilize native event if possible so blur/focus sequence is correct
		setup: function() {

			// Claim the first handler
			// dataPriv.set( this, "focus", ... )
			// dataPriv.set( this, "blur", ... )
			leverageNative( this, type, expectSync );

			// Return false to allow normal processing in the caller
			return false;
		},
		trigger: function() {

			// Force setup before trigger
			leverageNative( this, type );

			// Return non-false to allow normal event-path propagation
			return true;
		},

		// Suppress native focus or blur as it's already being fired
		// in leverageNative.
		_default: function() {
			return true;
		},

		delegateType: delegateType
	};
} );

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://bugs.chromium.org/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	}
} );


var

	// Support: IE <=10 - 11, Edge 12 - 13 only
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

// Prefer a tbody over its parent table for containing new rows
function manipulationTarget( elem, content ) {
	if ( nodeName( elem, "table" ) &&
		nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ) {

		return jQuery( elem ).children( "tbody" )[ 0 ] || elem;
	}

	return elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( elem.getAttribute( "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	if ( ( elem.type || "" ).slice( 0, 5 ) === "true/" ) {
		elem.type = elem.type.slice( 5 );
	} else {
		elem.removeAttribute( "type" );
	}

	return elem;
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( dataPriv.hasData( src ) ) {
		pdataOld = dataPriv.get( src );
		events = pdataOld.events;

		if ( events ) {
			dataPriv.remove( dest, "handle events" );

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( dataUser.hasData( src ) ) {
		udataOld = dataUser.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		dataUser.set( dest, udataCur );
	}
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = flat( args );

	var fragment, first, scripts, hasScripts, node, doc,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		valueIsFunction = isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( valueIsFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( valueIsFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android <=4.0 only, PhantomJS 1 only
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!dataPriv.access( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src && ( node.type || "" ).toLowerCase()  !== "module" ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl && !node.noModule ) {
								jQuery._evalUrl( node.src, {
									nonce: node.nonce || node.getAttribute( "nonce" )
								}, doc );
							}
						} else {
							DOMEval( node.textContent.replace( rcleanScript, "" ), node, doc );
						}
					}
				}
			}
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		nodes = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = nodes[ i ] ) != null; i++ ) {
		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && isAttached( node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html;
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = isAttached( elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems ) {
		var data, elem, type,
			special = jQuery.event.special,
			i = 0;

		for ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {
			if ( acceptData( elem ) ) {
				if ( ( data = elem[ dataPriv.expando ] ) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataPriv.expando ] = undefined;
				}
				if ( elem[ dataUser.expando ] ) {

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataUser.expando ] = undefined;
				}
			}
		}
	}
} );

jQuery.fn.extend( {
	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each( function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				} );
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: Android <=4.0 only, PhantomJS 1 only
			// .get() because push.apply(_, arraylike) throws on ancient WebKit
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );
var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {

		// Support: IE <=11 only, Firefox <=30 (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

var swap = function( elem, options, callback ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.call( elem );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var rboxStyle = new RegExp( cssExpand.join( "|" ), "i" );



( function() {

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computeStyleTests() {

		// This is a singleton, we need to execute it only once
		if ( !div ) {
			return;
		}

		container.style.cssText = "position:absolute;left:-11111px;width:60px;" +
			"margin-top:1px;padding:0;border:0";
		div.style.cssText =
			"position:relative;display:block;box-sizing:border-box;overflow:scroll;" +
			"margin:auto;border:1px;padding:1px;" +
			"width:60%;top:1%";
		documentElement.appendChild( container ).appendChild( div );

		var divStyle = window.getComputedStyle( div );
		pixelPositionVal = divStyle.top !== "1%";

		// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
		reliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;

		// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
		// Some styles come back with percentage values, even though they shouldn't
		div.style.right = "60%";
		pixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;

		// Support: IE 9 - 11 only
		// Detect misreporting of content dimensions for box-sizing:border-box elements
		boxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;

		// Support: IE 9 only
		// Detect overflow:scroll screwiness (gh-3699)
		// Support: Chrome <=64
		// Don't get tricked when zoom affects offsetWidth (gh-4029)
		div.style.position = "absolute";
		scrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;

		documentElement.removeChild( container );

		// Nullify the div so it wouldn't be stored in the memory and
		// it will also be a sign that checks already performed
		div = null;
	}

	function roundPixelMeasures( measure ) {
		return Math.round( parseFloat( measure ) );
	}

	var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,
		reliableTrDimensionsVal, reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	// Support: IE <=9 - 11 only
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	jQuery.extend( support, {
		boxSizingReliable: function() {
			computeStyleTests();
			return boxSizingReliableVal;
		},
		pixelBoxStyles: function() {
			computeStyleTests();
			return pixelBoxStylesVal;
		},
		pixelPosition: function() {
			computeStyleTests();
			return pixelPositionVal;
		},
		reliableMarginLeft: function() {
			computeStyleTests();
			return reliableMarginLeftVal;
		},
		scrollboxSize: function() {
			computeStyleTests();
			return scrollboxSizeVal;
		},

		// Support: IE 9 - 11+, Edge 15 - 18+
		// IE/Edge misreport `getComputedStyle` of table rows with width/height
		// set in CSS while `offset*` properties report correct values.
		// Behavior in IE 9 is more subtle than in newer versions & it passes
		// some versions of this test; make sure not to make it pass there!
		//
		// Support: Firefox 70+
		// Only Firefox includes border widths
		// in computed dimensions. (gh-4529)
		reliableTrDimensions: function() {
			var table, tr, trChild, trStyle;
			if ( reliableTrDimensionsVal == null ) {
				table = document.createElement( "table" );
				tr = document.createElement( "tr" );
				trChild = document.createElement( "div" );

				table.style.cssText = "position:absolute;left:-11111px;border-collapse:separate";
				tr.style.cssText = "border:1px solid";

				// Support: Chrome 86+
				// Height set through cssText does not get applied.
				// Computed height then comes back as 0.
				tr.style.height = "1px";
				trChild.style.height = "9px";

				// Support: Android 8 Chrome 86+
				// In our bodyBackground.html iframe,
				// display for all div elements is set to "inline",
				// which causes a problem only in Android 8 Chrome 86.
				// Ensuring the div is display: block
				// gets around this issue.
				trChild.style.display = "block";

				documentElement
					.appendChild( table )
					.appendChild( tr )
					.appendChild( trChild );

				trStyle = window.getComputedStyle( tr );
				reliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +
					parseInt( trStyle.borderTopWidth, 10 ) +
					parseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;

				documentElement.removeChild( table );
			}
			return reliableTrDimensionsVal;
		}
	} );
} )();


function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,

		// Support: Firefox 51+
		// Retrieving style before computed somehow
		// fixes an issue with getting wrong values
		// on detached elements
		style = elem.style;

	computed = computed || getStyles( elem );

	// getPropertyValue is needed for:
	//   .css('filter') (IE 9 only, #12537)
	//   .css('--customProperty) (#3144)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];

		if ( ret === "" && !isAttached( elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// A tribute to the "awesome hack by Dean Edwards"
		// Android Browser returns percentage for some values,
		// but width seems to be reliably pixels.
		// This is against the CSSOM draft spec:
		// https://drafts.csswg.org/cssom/#resolved-values
		if ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?

		// Support: IE <=9 - 11 only
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var cssPrefixes = [ "Webkit", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style,
	vendorProps = {};

// Return a vendor-prefixed property or undefined
function vendorPropName( name ) {

	// Check for vendor prefixed names
	var capName = name[ 0 ].toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

// Return a potentially-mapped jQuery.cssProps or vendor prefixed property
function finalPropName( name ) {
	var final = jQuery.cssProps[ name ] || vendorProps[ name ];

	if ( final ) {
		return final;
	}
	if ( name in emptyStyle ) {
		return name;
	}
	return vendorProps[ name ] = vendorPropName( name ) || name;
}


var

	// Swappable if display is none or starts with table
	// except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rcustomProp = /^--/,
	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	};

function setPositiveNumber( _elem, value, subtract ) {

	// Any relative (+/-) values have already been
	// normalized at this point
	var matches = rcssNum.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || "px" ) :
		value;
}

function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {
	var i = dimension === "width" ? 1 : 0,
		extra = 0,
		delta = 0;

	// Adjustment may not be necessary
	if ( box === ( isBorderBox ? "border" : "content" ) ) {
		return 0;
	}

	for ( ; i < 4; i += 2 ) {

		// Both box models exclude margin
		if ( box === "margin" ) {
			delta += jQuery.css( elem, box + cssExpand[ i ], true, styles );
		}

		// If we get here with a content-box, we're seeking "padding" or "border" or "margin"
		if ( !isBorderBox ) {

			// Add padding
			delta += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// For "border" or "margin", add border
			if ( box !== "padding" ) {
				delta += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );

			// But still keep track of it otherwise
			} else {
				extra += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}

		// If we get here with a border-box (content + padding + border), we're seeking "content" or
		// "padding" or "margin"
		} else {

			// For "content", subtract padding
			if ( box === "content" ) {
				delta -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// For "content" or "padding", subtract border
			if ( box !== "margin" ) {
				delta -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	// Account for positive content-box scroll gutter when requested by providing computedVal
	if ( !isBorderBox && computedVal >= 0 ) {

		// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
		// Assuming integer scroll gutter, subtract the rest and round down
		delta += Math.max( 0, Math.ceil(
			elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
			computedVal -
			delta -
			extra -
			0.5

		// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter
		// Use an explicit zero to avoid NaN (gh-3964)
		) ) || 0;
	}

	return delta;
}

function getWidthOrHeight( elem, dimension, extra ) {

	// Start with computed style
	var styles = getStyles( elem ),

		// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).
		// Fake content-box until we know it's needed to know the true value.
		boxSizingNeeded = !support.boxSizingReliable() || extra,
		isBorderBox = boxSizingNeeded &&
			jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
		valueIsBorderBox = isBorderBox,

		val = curCSS( elem, dimension, styles ),
		offsetProp = "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );

	// Support: Firefox <=54
	// Return a confounding non-pixel value or feign ignorance, as appropriate.
	if ( rnumnonpx.test( val ) ) {
		if ( !extra ) {
			return val;
		}
		val = "auto";
	}


	// Support: IE 9 - 11 only
	// Use offsetWidth/offsetHeight for when box sizing is unreliable.
	// In those cases, the computed value can be trusted to be border-box.
	if ( ( !support.boxSizingReliable() && isBorderBox ||

		// Support: IE 10 - 11+, Edge 15 - 18+
		// IE/Edge misreport `getComputedStyle` of table rows with width/height
		// set in CSS while `offset*` properties report correct values.
		// Interestingly, in some cases IE 9 doesn't suffer from this issue.
		!support.reliableTrDimensions() && nodeName( elem, "tr" ) ||

		// Fall back to offsetWidth/offsetHeight when value is "auto"
		// This happens for inline elements with no explicit setting (gh-3571)
		val === "auto" ||

		// Support: Android <=4.1 - 4.3 only
		// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
		!parseFloat( val ) && jQuery.css( elem, "display", false, styles ) === "inline" ) &&

		// Make sure the element is visible & connected
		elem.getClientRects().length ) {

		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

		// Where available, offsetWidth/offsetHeight approximate border box dimensions.
		// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the
		// retrieved value as a content box dimension.
		valueIsBorderBox = offsetProp in elem;
		if ( valueIsBorderBox ) {
			val = elem[ offsetProp ];
		}
	}

	// Normalize "" and auto
	val = parseFloat( val ) || 0;

	// Adjust for the element's box model
	return ( val +
		boxModelAdjustment(
			elem,
			dimension,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles,

			// Provide the current computed size to request scroll gutter calculation (gh-3589)
			val
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"gridArea": true,
		"gridColumn": true,
		"gridColumnEnd": true,
		"gridColumnStart": true,
		"gridRow": true,
		"gridRowEnd": true,
		"gridRowStart": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name ),
			style = elem.style;

		// Make sure that we're working with the right name. We don't
		// want to query the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append
			// "px" to a few hardcoded values.
			if ( type === "number" && !isCustomProp ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				if ( isCustomProp ) {
					style.setProperty( name, value );
				} else {
					style[ name ] = value;
				}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name );

		// Make sure that we're working with the right name. We don't
		// want to modify the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}

		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( _i, dimension ) {
	jQuery.cssHooks[ dimension ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&

					// Support: Safari 8+
					// Table columns in Safari have non-zero offsetWidth & zero
					// getBoundingClientRect().width unless display is changed.
					// Support: IE <=11 only
					// Running getBoundingClientRect on a disconnected node
					// in IE throws an error.
					( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?
					swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, dimension, extra );
					} ) :
					getWidthOrHeight( elem, dimension, extra );
			}
		},

		set: function( elem, value, extra ) {
			var matches,
				styles = getStyles( elem ),

				// Only read styles.position if the test has a chance to fail
				// to avoid forcing a reflow.
				scrollboxSizeBuggy = !support.scrollboxSize() &&
					styles.position === "absolute",

				// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)
				boxSizingNeeded = scrollboxSizeBuggy || extra,
				isBorderBox = boxSizingNeeded &&
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
				subtract = extra ?
					boxModelAdjustment(
						elem,
						dimension,
						extra,
						isBorderBox,
						styles
					) :
					0;

			// Account for unreliable border-box dimensions by comparing offset* to computed and
			// faking a content-box to get border and padding (gh-3699)
			if ( isBorderBox && scrollboxSizeBuggy ) {
				subtract -= Math.ceil(
					elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
					parseFloat( styles[ dimension ] ) -
					boxModelAdjustment( elem, dimension, "border", false, styles ) -
					0.5
				);
			}

			// Convert to pixels if value adjustment is needed
			if ( subtract && ( matches = rcssNum.exec( value ) ) &&
				( matches[ 3 ] || "px" ) !== "px" ) {

				elem.style[ dimension ] = value;
				value = jQuery.css( elem, dimension );
			}

			return setPositiveNumber( elem, value, subtract );
		}
	};
} );

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return ( parseFloat( curCSS( elem, "marginLeft" ) ) ||
				elem.getBoundingClientRect().left -
					swap( elem, { marginLeft: 0 }, function() {
						return elem.getBoundingClientRect().left;
					} )
			) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( prefix !== "margin" ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( Array.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 && (
				jQuery.cssHooks[ tween.prop ] ||
					tween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9 only
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, inProgress,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

function schedule() {
	if ( inProgress ) {
		if ( document.hidden === false && window.requestAnimationFrame ) {
			window.requestAnimationFrame( schedule );
		} else {
			window.setTimeout( schedule, jQuery.fx.interval );
		}

		jQuery.fx.tick();
	}
}

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = Date.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,
		isBox = "width" in props || "height" in props,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHiddenWithinTree( elem ),
		dataShow = dataPriv.get( elem, "fxshow" );

	// Queue-skipping animations hijack the fx hooks
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// Ensure the complete handler is called before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// Detect show/hide animations
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.test( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// Pretend to be hidden if this is a "show" and
				// there is still data from a stopped show/hide
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;

				// Ignore all other no-op show/hide data
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	// Bail out if this is a no-op like .hide().hide()
	propTween = !jQuery.isEmptyObject( props );
	if ( !propTween && jQuery.isEmptyObject( orig ) ) {
		return;
	}

	// Restrict "overflow" and "display" styles during box animations
	if ( isBox && elem.nodeType === 1 ) {

		// Support: IE <=9 - 11, Edge 12 - 15
		// Record all 3 overflow attributes because IE does not infer the shorthand
		// from identically-valued overflowX and overflowY and Edge just mirrors
		// the overflowX value there.
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Identify a display type, preferring old show/hide data over the CSS cascade
		restoreDisplay = dataShow && dataShow.display;
		if ( restoreDisplay == null ) {
			restoreDisplay = dataPriv.get( elem, "display" );
		}
		display = jQuery.css( elem, "display" );
		if ( display === "none" ) {
			if ( restoreDisplay ) {
				display = restoreDisplay;
			} else {

				// Get nonempty value(s) by temporarily forcing visibility
				showHide( [ elem ], true );
				restoreDisplay = elem.style.display || restoreDisplay;
				display = jQuery.css( elem, "display" );
				showHide( [ elem ] );
			}
		}

		// Animate inline elements as inline-block
		if ( display === "inline" || display === "inline-block" && restoreDisplay != null ) {
			if ( jQuery.css( elem, "float" ) === "none" ) {

				// Restore the original display value at the end of pure show/hide animations
				if ( !propTween ) {
					anim.done( function() {
						style.display = restoreDisplay;
					} );
					if ( restoreDisplay == null ) {
						display = style.display;
						restoreDisplay = display === "none" ? "" : display;
					}
				}
				style.display = "inline-block";
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always( function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		} );
	}

	// Implement show/hide animations
	propTween = false;
	for ( prop in orig ) {

		// General show/hide setup for this element animation
		if ( !propTween ) {
			if ( dataShow ) {
				if ( "hidden" in dataShow ) {
					hidden = dataShow.hidden;
				}
			} else {
				dataShow = dataPriv.access( elem, "fxshow", { display: restoreDisplay } );
			}

			// Store hidden/visible for toggle so `.stop().toggle()` "reverses"
			if ( toggle ) {
				dataShow.hidden = !hidden;
			}

			// Show elements before animating them
			if ( hidden ) {
				showHide( [ elem ], true );
			}

			/* eslint-disable no-loop-func */

			anim.done( function() {

				/* eslint-enable no-loop-func */

				// The final step of a "hide" animation is actually hiding the element
				if ( !hidden ) {
					showHide( [ elem ] );
				}
				dataPriv.remove( elem, "fxshow" );
				for ( prop in orig ) {
					jQuery.style( elem, prop, orig[ prop ] );
				}
			} );
		}

		// Per-property setup
		propTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
		if ( !( prop in dataShow ) ) {
			dataShow[ prop ] = propTween.start;
			if ( hidden ) {
				propTween.end = propTween.start;
				propTween.start = 0;
			}
		}
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( Array.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// Don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3 only
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			// If there's more to do, yield
			if ( percent < 1 && length ) {
				return remaining;
			}

			// If this was an empty animation, synthesize a final progress notification
			if ( !length ) {
				deferred.notifyWith( elem, [ animation, 1, 0 ] );
			}

			// Resolve the animation and report its conclusion
			deferred.resolveWith( elem, [ animation ] );
			return false;
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
					animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					result.stop.bind( result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	// Attach callbacks from options
	animation
		.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	return animation;
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnothtmlwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !isFunction( easing ) && easing
	};

	// Go to the end state if fx are off
	if ( jQuery.fx.off ) {
		opt.duration = 0;

	} else {
		if ( typeof opt.duration !== "number" ) {
			if ( opt.duration in jQuery.fx.speeds ) {
				opt.duration = jQuery.fx.speeds[ opt.duration ];

			} else {
				opt.duration = jQuery.fx.speeds._default;
			}
		}
	}

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHiddenWithinTree ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || dataPriv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};

		doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = dataPriv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = dataPriv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( _i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = Date.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Run the timer and safely remove it when done (allowing for external removal)
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	jQuery.fx.start();
};

jQuery.fx.interval = 13;
jQuery.fx.start = function() {
	if ( inProgress ) {
		return;
	}

	inProgress = true;
	schedule();
};

jQuery.fx.stop = function() {
	inProgress = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: Android <=4.3 only
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE <=11 only
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: IE <=11 only
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
} )();


var boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// Attribute hooks are determined by the lowercase version
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			hooks = jQuery.attrHooks[ name.toLowerCase() ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name,
			i = 0,

			// Attribute names can contain non-HTML whitespace characters
			// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
			attrNames = value && value.match( rnothtmlwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				elem.removeAttribute( name );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( _i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle,
			lowercaseName = name.toLowerCase();

		if ( !isXML ) {

			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ lowercaseName ];
			attrHandle[ lowercaseName ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				lowercaseName :
				null;
			attrHandle[ lowercaseName ] = handle;
		}
		return ret;
	};
} );




var rfocusable = /^(?:input|select|textarea|button)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each( function() {
			delete this[ jQuery.propFix[ name ] || name ];
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// Support: IE <=9 - 11 only
				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				if ( tabindex ) {
					return parseInt( tabindex, 10 );
				}

				if (
					rfocusable.test( elem.nodeName ) ||
					rclickable.test( elem.nodeName ) &&
					elem.href
				) {
					return 0;
				}

				return -1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Support: IE <=11 only
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
// eslint rule "no-unused-expressions" is disabled for this code
// since it considers such accessions noop
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		},
		set: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );




	// Strip and collapse whitespace according to HTML spec
	// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
	function stripAndCollapse( value ) {
		var tokens = value.match( rnothtmlwhite ) || [];
		return tokens.join( " " );
	}


function getClass( elem ) {
	return elem.getAttribute && elem.getAttribute( "class" ) || "";
}

function classesToArray( value ) {
	if ( Array.isArray( value ) ) {
		return value;
	}
	if ( typeof value === "string" ) {
		return value.match( rnothtmlwhite ) || [];
	}
	return [];
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isValidValue = type === "string" || Array.isArray( value );

		if ( typeof stateVal === "boolean" && isValidValue ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( isValidValue ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = classesToArray( value );

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// Store className if set
					dataPriv.set( this, "__className__", className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				if ( this.setAttribute ) {
					this.setAttribute( "class",
						className || value === false ?
							"" :
							dataPriv.get( this, "__className__" ) || ""
					);
				}
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + stripAndCollapse( getClass( elem ) ) + " " ).indexOf( className ) > -1 ) {
				return true;
			}
		}

		return false;
	}
} );




var rreturn = /\r/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, valueIsFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				// Handle most common string cases
				if ( typeof ret === "string" ) {
					return ret.replace( rreturn, "" );
				}

				// Handle cases where value is null/undef or number
				return ret == null ? "" : ret;
			}

			return;
		}

		valueIsFunction = isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( valueIsFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( Array.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {

				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE <=10 - 11 only
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					stripAndCollapse( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option, i,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one",
					values = one ? null : [],
					max = one ? index + 1 : options.length;

				if ( index < 0 ) {
					i = max;

				} else {
					i = one ? index : 0;
				}

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// Support: IE <=9 only
					// IE8-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							!option.disabled &&
							( !option.parentNode.disabled ||
								!nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					/* eslint-disable no-cond-assign */

					if ( option.selected =
						jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1
					) {
						optionSet = true;
					}

					/* eslint-enable no-cond-assign */
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( Array.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




// Return jQuery for attributes-only inclusion


support.focusin = "onfocusin" in window;


var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	stopPropagationCallback = function( e ) {
		e.stopPropagation();
	};

jQuery.extend( jQuery.event, {

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = lastElement = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {
			lastElement = cur;
			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( dataPriv.get( cur, "events" ) || Object.create( null ) )[ event.type ] &&
				dataPriv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( ( !special._default ||
				special._default.apply( eventPath.pop(), data ) === false ) &&
				acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;

					if ( event.isPropagationStopped() ) {
						lastElement.addEventListener( type, stopPropagationCallback );
					}

					elem[ type ]();

					if ( event.isPropagationStopped() ) {
						lastElement.removeEventListener( type, stopPropagationCallback );
					}

					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	// Piggyback on a donor event to simulate a different one
	// Used only for `focus(in | out)` events
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true
			}
		);

		jQuery.event.trigger( e, null, elem );
	}

} );

jQuery.fn.extend( {

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


// Support: Firefox <=44
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {

				// Handle: regular nodes (via `this.ownerDocument`), window
				// (via `this.document`) & document (via `this`).
				var doc = this.ownerDocument || this.document || this,
					attaches = dataPriv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				dataPriv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this.document || this,
					attaches = dataPriv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					dataPriv.remove( doc, fix );

				} else {
					dataPriv.access( doc, fix, attaches );
				}
			}
		};
	} );
}
var location = window.location;

var nonce = { guid: Date.now() };

var rquery = ( /\?/ );



// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, parserErrorElem;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE 9 - 11 only
	// IE throws on parseFromString with invalid input.
	try {
		xml = ( new window.DOMParser() ).parseFromString( data, "text/xml" );
	} catch ( e ) {}

	parserErrorElem = xml && xml.getElementsByTagName( "parsererror" )[ 0 ];
	if ( !xml || parserErrorElem ) {
		jQuery.error( "Invalid XML: " + (
			parserErrorElem ?
				jQuery.map( parserErrorElem.childNodes, function( el ) {
					return el.textContent;
				} ).join( "\n" ) :
				data
		) );
	}
	return xml;
};


var
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( Array.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && toType( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, valueOrFunction ) {

			// If value is a function, invoke it and use its return value
			var value = isFunction( valueOrFunction ) ?
				valueOrFunction() :
				valueOrFunction;

			s[ s.length ] = encodeURIComponent( key ) + "=" +
				encodeURIComponent( value == null ? "" : value );
		};

	if ( a == null ) {
		return "";
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} ).filter( function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} ).map( function( _i, elem ) {
			var val = jQuery( this ).val();

			if ( val == null ) {
				return null;
			}

			if ( Array.isArray( val ) ) {
				return jQuery.map( val, function( val ) {
					return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
				} );
			}

			return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


var
	r20 = /%20/g,
	rhash = /#.*$/,
	rantiCache = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Anchor tag for parsing the document origin
	originAnchor = document.createElement( "a" );

originAnchor.href = location.href;

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];

		if ( isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType[ 0 ] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s.throws ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: location.href,
		type: "GET",
		isLocal: rlocalProtocol.test( location.protocol ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",

		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": JSON.parse,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,

			// URL without anti-cache param
			cacheURL,

			// Response headers
			responseHeadersString,
			responseHeaders,

			// timeout handle
			timeoutTimer,

			// Url cleanup var
			urlAnchor,

			// Request state (becomes false upon send and true upon completion)
			completed,

			// To know if global events are to be dispatched
			fireGlobals,

			// Loop variable
			i,

			// uncached part of the url
			uncached,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( completed ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() + " " ] =
									( responseHeaders[ match[ 1 ].toLowerCase() + " " ] || [] )
										.concat( match[ 2 ] );
							}
						}
						match = responseHeaders[ key.toLowerCase() + " " ];
					}
					return match == null ? null : match.join( ", " );
				},

				// Raw string
				getAllResponseHeaders: function() {
					return completed ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					if ( completed == null ) {
						name = requestHeadersNames[ name.toLowerCase() ] =
							requestHeadersNames[ name.toLowerCase() ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( completed == null ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( completed ) {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						} else {

							// Lazy-add the new callbacks in a way that preserves old ones
							for ( code in map ) {
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR );

		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || location.href ) + "" )
			.replace( rprotocol, location.protocol + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = ( s.dataType || "*" ).toLowerCase().match( rnothtmlwhite ) || [ "" ];

		// A cross-domain request is in order when the origin doesn't match the current origin.
		if ( s.crossDomain == null ) {
			urlAnchor = document.createElement( "a" );

			// Support: IE <=8 - 11, Edge 12 - 15
			// IE throws exception on accessing the href property if url is malformed,
			// e.g. http://example.com:80x/
			try {
				urlAnchor.href = s.url;

				// Support: IE <=8 - 11 only
				// Anchor's host property isn't correctly set when s.url is relative
				urlAnchor.href = urlAnchor.href;
				s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !==
					urlAnchor.protocol + "//" + urlAnchor.host;
			} catch ( e ) {

				// If there is an error parsing the URL, assume it is crossDomain,
				// it can be rejected by the transport if it is invalid
				s.crossDomain = true;
			}
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( completed ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		// Remove hash to simplify url manipulation
		cacheURL = s.url.replace( rhash, "" );

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// Remember the hash so we can put it back
			uncached = s.url.slice( cacheURL.length );

			// If data is available and should be processed, append data to url
			if ( s.data && ( s.processData || typeof s.data === "string" ) ) {
				cacheURL += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data;

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add or update anti-cache param if needed
			if ( s.cache === false ) {
				cacheURL = cacheURL.replace( rantiCache, "$1" );
				uncached = ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ( nonce.guid++ ) +
					uncached;
			}

			// Put hash and anti-cache on the URL that will be requested (gh-1732)
			s.url = cacheURL + uncached;

		// Change '%20' to '+' if this is encoded form body content (gh-2658)
		} else if ( s.data && s.processData &&
			( s.contentType || "" ).indexOf( "application/x-www-form-urlencoded" ) === 0 ) {
			s.data = s.data.replace( r20, "+" );
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		completeDeferred.add( s.complete );
		jqXHR.done( s.success );
		jqXHR.fail( s.error );

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( completed ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				completed = false;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Rethrow post-completion exceptions
				if ( completed ) {
					throw e;
				}

				// Propagate others as results
				done( -1, e );
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Ignore repeat invocations
			if ( completed ) {
				return;
			}

			completed = true;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Use a noop converter for missing script but not if jsonp
			if ( !isSuccess &&
				jQuery.inArray( "script", s.dataTypes ) > -1 &&
				jQuery.inArray( "json", s.dataTypes ) < 0 ) {
				s.converters[ "text script" ] = function() {};
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( _i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// Shift arguments if data argument was omitted
		if ( isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );

jQuery.ajaxPrefilter( function( s ) {
	var i;
	for ( i in s.headers ) {
		if ( i.toLowerCase() === "content-type" ) {
			s.contentType = s.headers[ i ] || "";
		}
	}
} );


jQuery._evalUrl = function( url, options, doc ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,

		// Only evaluate the response if it is successful (gh-4126)
		// dataFilter is not invoked for failure responses, so using it instead
		// of the default converter is kludgy but it works.
		converters: {
			"text script": function() {}
		},
		dataFilter: function( response ) {
			jQuery.globalEval( response, options, doc );
		}
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		var wrap;

		if ( this[ 0 ] ) {
			if ( isFunction( html ) ) {
				html = html.call( this[ 0 ] );
			}

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var htmlIsFunction = isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function( selector ) {
		this.parent( selector ).not( "body" ).each( function() {
			jQuery( this ).replaceWith( this.childNodes );
		} );
		return this;
	}
} );


jQuery.expr.pseudos.hidden = function( elem ) {
	return !jQuery.expr.pseudos.visible( elem );
};
jQuery.expr.pseudos.visible = function( elem ) {
	return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );
};




jQuery.ajaxSettings.xhr = function() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
};

var xhrSuccessStatus = {

		// File protocol always yields status code 0, assume 200
		0: 200,

		// Support: IE <=9 only
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport( function( options ) {
	var callback, errorCallback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr();

				xhr.open(
					options.type,
					options.url,
					options.async,
					options.username,
					options.password
				);

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
					headers[ "X-Requested-With" ] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							callback = errorCallback = xhr.onload =
								xhr.onerror = xhr.onabort = xhr.ontimeout =
									xhr.onreadystatechange = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {

								// Support: IE <=9 only
								// On a manual native abort, IE9 throws
								// errors on any property access that is not readyState
								if ( typeof xhr.status !== "number" ) {
									complete( 0, "error" );
								} else {
									complete(

										// File: protocol always yields status 0; see #8605, #14207
										xhr.status,
										xhr.statusText
									);
								}
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,

									// Support: IE <=9 only
									// IE9 has no XHR2 but throws on binary (trac-11426)
									// For XHR2 non-text, let the caller handle it (gh-2498)
									( xhr.responseType || "text" ) !== "text"  ||
									typeof xhr.responseText !== "string" ?
										{ binary: xhr.response } :
										{ text: xhr.responseText },
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				errorCallback = xhr.onerror = xhr.ontimeout = callback( "error" );

				// Support: IE 9 only
				// Use onreadystatechange to replace onabort
				// to handle uncaught aborts
				if ( xhr.onabort !== undefined ) {
					xhr.onabort = errorCallback;
				} else {
					xhr.onreadystatechange = function() {

						// Check readyState before timeout as it changes
						if ( xhr.readyState === 4 ) {

							// Allow onerror to be called first,
							// but that will not handle a native abort
							// Also, save errorCallback to a variable
							// as xhr.onerror cannot be accessed
							window.setTimeout( function() {
								if ( callback ) {
									errorCallback();
								}
							} );
						}
					};
				}

				// Create the abort callback
				callback = callback( "abort" );

				try {

					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {

					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
jQuery.ajaxPrefilter( function( s ) {
	if ( s.crossDomain ) {
		s.contents.script = false;
	}
} );

// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain or forced-by-attrs requests
	if ( s.crossDomain || s.scriptAttrs ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery( "<script>" )
					.attr( s.scriptAttrs || {} )
					.prop( { charset: s.scriptCharset, src: s.url } )
					.on( "load error", callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					} );

				// Use native DOM manipulation to avoid our domManip AJAX trickery
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce.guid++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// Force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// Make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// Save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// Support: Safari 8 only
// In Safari 8 documents created via document.implementation.createHTMLDocument
// collapse sibling forms: the second one becomes a child of the first one.
// Because of that, this security measure has to be disabled in Safari 8.
// https://bugs.webkit.org/show_bug.cgi?id=137337
support.createHTMLDocument = ( function() {
	var body = document.implementation.createHTMLDocument( "" ).body;
	body.innerHTML = "<form></form><form></form>";
	return body.childNodes.length === 2;
} )();


// Argument "data" should be string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( typeof data !== "string" ) {
		return [];
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}

	var base, parsed, scripts;

	if ( !context ) {

		// Stop scripts or inline event handlers from being executed immediately
		// by using document.implementation
		if ( support.createHTMLDocument ) {
			context = document.implementation.createHTMLDocument( "" );

			// Set the base href for the created document
			// so any parsed elements with URLs
			// are based on the document's URL (gh-2965)
			base = context.createElement( "base" );
			base.href = document.location.href;
			context.head.appendChild( base );
		} else {
			context = document;
		}
	}

	parsed = rsingleTag.exec( data );
	scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = stripAndCollapse( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




jQuery.expr.pseudos.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};




jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf( "auto" ) > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {

	// offset() relates an element's border box to the document origin
	offset: function( options ) {

		// Preserve chaining for setter
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var rect, win,
			elem = this[ 0 ];

		if ( !elem ) {
			return;
		}

		// Return zeros for disconnected and hidden (display: none) elements (gh-2310)
		// Support: IE <=11 only
		// Running getBoundingClientRect on a
		// disconnected node in IE throws an error
		if ( !elem.getClientRects().length ) {
			return { top: 0, left: 0 };
		}

		// Get document-relative position by adding viewport scroll to viewport-relative gBCR
		rect = elem.getBoundingClientRect();
		win = elem.ownerDocument.defaultView;
		return {
			top: rect.top + win.pageYOffset,
			left: rect.left + win.pageXOffset
		};
	},

	// position() relates an element's margin box to its offset parent's padding box
	// This corresponds to the behavior of CSS absolute positioning
	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset, doc,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// position:fixed elements are offset from the viewport, which itself always has zero offset
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// Assume position:fixed implies availability of getBoundingClientRect
			offset = elem.getBoundingClientRect();

		} else {
			offset = this.offset();

			// Account for the *real* offset parent, which can be the document or its root element
			// when a statically positioned element is identified
			doc = elem.ownerDocument;
			offsetParent = elem.offsetParent || doc.documentElement;
			while ( offsetParent &&
				( offsetParent === doc.body || offsetParent === doc.documentElement ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) {

				offsetParent = offsetParent.parentNode;
			}
			if ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {

				// Incorporate borders into its offset, since they are outside its content origin
				parentOffset = jQuery( offsetParent ).offset();
				parentOffset.top += jQuery.css( offsetParent, "borderTopWidth", true );
				parentOffset.left += jQuery.css( offsetParent, "borderLeftWidth", true );
			}
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	// This method will return documentElement in the following cases:
	// 1) For the element inside the iframe without offsetParent, this method will return
	//    documentElement of the parent window
	// 2) For the hidden or detached element
	// 3) For body or html element, i.e. in case of the html node - it will return itself
	//
	// but those exceptions were never presented as a real life use-cases
	// and might be considered as more preferable results.
	//
	// This logic, however, is not guaranteed and can change at any point in the future
	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && jQuery.css( offsetParent, "position" ) === "static" ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {

			// Coalesce documents and windows
			var win;
			if ( isWindow( elem ) ) {
				win = elem;
			} else if ( elem.nodeType === 9 ) {
				win = elem.defaultView;
			}

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : win.pageXOffset,
					top ? val : win.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length );
	};
} );

// Support: Safari <=7 - 9.1, Chrome <=37 - 49
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( _i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( {
		padding: "inner" + name,
		content: type,
		"": "outer" + name
	}, function( defaultExtra, funcName ) {

		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( isWindow( elem ) ) {

					// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
					return funcName.indexOf( "outer" ) === 0 ?
						elem[ "inner" + name ] :
						elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable );
		};
	} );
} );


jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( _i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	},

	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );

jQuery.each(
	( "blur focus focusin focusout resize scroll click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup contextmenu" ).split( " " ),
	function( _i, name ) {

		// Handle event binding
		jQuery.fn[ name ] = function( data, fn ) {
			return arguments.length > 0 ?
				this.on( name, null, data, fn ) :
				this.trigger( name );
		};
	}
);




// Support: Android <=4.0 only
// Make sure we trim BOM and NBSP
var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

// Bind a function to a context, optionally partially applying any
// arguments.
// jQuery.proxy is deprecated to promote standards (specifically Function#bind)
// However, it is not slated for removal any time soon
jQuery.proxy = function( fn, context ) {
	var tmp, args, proxy;

	if ( typeof context === "string" ) {
		tmp = fn[ context ];
		context = fn;
		fn = tmp;
	}

	// Quick check to determine if target is callable, in the spec
	// this throws a TypeError, but we will just return undefined.
	if ( !isFunction( fn ) ) {
		return undefined;
	}

	// Simulated bind
	args = slice.call( arguments, 2 );
	proxy = function() {
		return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
	};

	// Set the guid of unique handler to the same of original handler, so it can be removed
	proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	return proxy;
};

jQuery.holdReady = function( hold ) {
	if ( hold ) {
		jQuery.readyWait++;
	} else {
		jQuery.ready( true );
	}
};
jQuery.isArray = Array.isArray;
jQuery.parseJSON = JSON.parse;
jQuery.nodeName = nodeName;
jQuery.isFunction = isFunction;
jQuery.isWindow = isWindow;
jQuery.camelCase = camelCase;
jQuery.type = toType;

jQuery.now = Date.now;

jQuery.isNumeric = function( obj ) {

	// As of jQuery 3.0, isNumeric is limited to
	// strings and numbers (primitives or objects)
	// that can be coerced to finite numbers (gh-2662)
	var type = jQuery.type( obj );
	return ( type === "number" || type === "string" ) &&

		// parseFloat NaNs numeric-cast false positives ("")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		!isNaN( obj - parseFloat( obj ) );
};

jQuery.trim = function( text ) {
	return text == null ?
		"" :
		( text + "" ).replace( rtrim, "" );
};



// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	} );
}




var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === "undefined" ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;
} );
/*!
 * Socket.IO v4.1.3
 * (c) 2014-2021 Guillermo Rauch
 * Released under the MIT License.
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["io"] = factory();
	else
		root["io"] = factory();
})(self, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./build/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./build/index.js":
/*!************************!*\
  !*** ./build/index.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.io = exports.Socket = exports.Manager = exports.protocol = void 0;

var url_1 = __webpack_require__(/*! ./url */ "./build/url.js");

var manager_1 = __webpack_require__(/*! ./manager */ "./build/manager.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("socket.io-client");
/**
 * Module exports.
 */


module.exports = exports = lookup;
/**
 * Managers cache.
 */

var cache = exports.managers = {};

function lookup(uri, opts) {
  if (_typeof(uri) === "object") {
    opts = uri;
    uri = undefined;
  }

  opts = opts || {};
  var parsed = url_1.url(uri, opts.path || "/socket.io");
  var source = parsed.source;
  var id = parsed.id;
  var path = parsed.path;
  var sameNamespace = cache[id] && path in cache[id]["nsps"];
  var newConnection = opts.forceNew || opts["force new connection"] || false === opts.multiplex || sameNamespace;
  var io;

  if (newConnection) {
    debug("ignoring socket cache for %s", source);
    io = new manager_1.Manager(source, opts);
  } else {
    if (!cache[id]) {
      debug("new io instance for %s", source);
      cache[id] = new manager_1.Manager(source, opts);
    }

    io = cache[id];
  }

  if (parsed.query && !opts.query) {
    opts.query = parsed.queryKey;
  }

  return io.socket(parsed.path, opts);
}

exports.io = lookup;
/**
 * Protocol version.
 *
 * @public
 */

var socket_io_parser_1 = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");

Object.defineProperty(exports, "protocol", {
  enumerable: true,
  get: function get() {
    return socket_io_parser_1.protocol;
  }
});
/**
 * `connect`.
 *
 * @param {String} uri
 * @public
 */

exports.connect = lookup;
/**
 * Expose constructors for standalone build.
 *
 * @public
 */

var manager_2 = __webpack_require__(/*! ./manager */ "./build/manager.js");

Object.defineProperty(exports, "Manager", {
  enumerable: true,
  get: function get() {
    return manager_2.Manager;
  }
});

var socket_1 = __webpack_require__(/*! ./socket */ "./build/socket.js");

Object.defineProperty(exports, "Socket", {
  enumerable: true,
  get: function get() {
    return socket_1.Socket;
  }
});
exports["default"] = lookup;

/***/ }),

/***/ "./build/manager.js":
/*!**************************!*\
  !*** ./build/manager.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Manager = void 0;

var eio = __webpack_require__(/*! engine.io-client */ "./node_modules/engine.io-client/lib/index.js");

var socket_1 = __webpack_require__(/*! ./socket */ "./build/socket.js");

var parser = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");

var on_1 = __webpack_require__(/*! ./on */ "./build/on.js");

var Backoff = __webpack_require__(/*! backo2 */ "./node_modules/backo2/index.js");

var typed_events_1 = __webpack_require__(/*! ./typed-events */ "./build/typed-events.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("socket.io-client:manager");

var Manager = /*#__PURE__*/function (_typed_events_1$Stric) {
  _inherits(Manager, _typed_events_1$Stric);

  var _super = _createSuper(Manager);

  function Manager(uri, opts) {
    var _this;

    _classCallCheck(this, Manager);

    _this = _super.call(this);
    _this.nsps = {};
    _this.subs = [];

    if (uri && "object" === _typeof(uri)) {
      opts = uri;
      uri = undefined;
    }

    opts = opts || {};
    opts.path = opts.path || "/socket.io";
    _this.opts = opts;

    _this.reconnection(opts.reconnection !== false);

    _this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);

    _this.reconnectionDelay(opts.reconnectionDelay || 1000);

    _this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);

    _this.randomizationFactor(opts.randomizationFactor || 0.5);

    _this.backoff = new Backoff({
      min: _this.reconnectionDelay(),
      max: _this.reconnectionDelayMax(),
      jitter: _this.randomizationFactor()
    });

    _this.timeout(null == opts.timeout ? 20000 : opts.timeout);

    _this._readyState = "closed";
    _this.uri = uri;

    var _parser = opts.parser || parser;

    _this.encoder = new _parser.Encoder();
    _this.decoder = new _parser.Decoder();
    _this._autoConnect = opts.autoConnect !== false;
    if (_this._autoConnect) _this.open();
    return _this;
  }

  _createClass(Manager, [{
    key: "reconnection",
    value: function reconnection(v) {
      if (!arguments.length) return this._reconnection;
      this._reconnection = !!v;
      return this;
    }
  }, {
    key: "reconnectionAttempts",
    value: function reconnectionAttempts(v) {
      if (v === undefined) return this._reconnectionAttempts;
      this._reconnectionAttempts = v;
      return this;
    }
  }, {
    key: "reconnectionDelay",
    value: function reconnectionDelay(v) {
      var _a;

      if (v === undefined) return this._reconnectionDelay;
      this._reconnectionDelay = v;
      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);
      return this;
    }
  }, {
    key: "randomizationFactor",
    value: function randomizationFactor(v) {
      var _a;

      if (v === undefined) return this._randomizationFactor;
      this._randomizationFactor = v;
      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);
      return this;
    }
  }, {
    key: "reconnectionDelayMax",
    value: function reconnectionDelayMax(v) {
      var _a;

      if (v === undefined) return this._reconnectionDelayMax;
      this._reconnectionDelayMax = v;
      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);
      return this;
    }
  }, {
    key: "timeout",
    value: function timeout(v) {
      if (!arguments.length) return this._timeout;
      this._timeout = v;
      return this;
    }
    /**
     * Starts trying to reconnect if reconnection is enabled and we have not
     * started reconnecting yet
     *
     * @private
     */

  }, {
    key: "maybeReconnectOnOpen",
    value: function maybeReconnectOnOpen() {
      // Only try to reconnect if it's the first time we're connecting
      if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) {
        // keeps reconnection from firing twice for the same reconnection loop
        this.reconnect();
      }
    }
    /**
     * Sets the current transport `socket`.
     *
     * @param {Function} fn - optional, callback
     * @return self
     * @public
     */

  }, {
    key: "open",
    value: function open(fn) {
      var _this2 = this;

      debug("readyState %s", this._readyState);
      if (~this._readyState.indexOf("open")) return this;
      debug("opening %s", this.uri);
      this.engine = eio(this.uri, this.opts);
      var socket = this.engine;
      var self = this;
      this._readyState = "opening";
      this.skipReconnect = false; // emit `open`

      var openSubDestroy = on_1.on(socket, "open", function () {
        self.onopen();
        fn && fn();
      }); // emit `error`

      var errorSub = on_1.on(socket, "error", function (err) {
        debug("error");
        self.cleanup();
        self._readyState = "closed";

        _this2.emitReserved("error", err);

        if (fn) {
          fn(err);
        } else {
          // Only do this if there is no fn to handle the error
          self.maybeReconnectOnOpen();
        }
      });

      if (false !== this._timeout) {
        var timeout = this._timeout;
        debug("connect attempt will timeout after %d", timeout);

        if (timeout === 0) {
          openSubDestroy(); // prevents a race condition with the 'open' event
        } // set timer


        var timer = setTimeout(function () {
          debug("connect attempt timed out after %d", timeout);
          openSubDestroy();
          socket.close();
          socket.emit("error", new Error("timeout"));
        }, timeout);

        if (this.opts.autoUnref) {
          timer.unref();
        }

        this.subs.push(function subDestroy() {
          clearTimeout(timer);
        });
      }

      this.subs.push(openSubDestroy);
      this.subs.push(errorSub);
      return this;
    }
    /**
     * Alias for open()
     *
     * @return self
     * @public
     */

  }, {
    key: "connect",
    value: function connect(fn) {
      return this.open(fn);
    }
    /**
     * Called upon transport open.
     *
     * @private
     */

  }, {
    key: "onopen",
    value: function onopen() {
      debug("open"); // clear old subs

      this.cleanup(); // mark as open

      this._readyState = "open";
      this.emitReserved("open"); // add new subs

      var socket = this.engine;
      this.subs.push(on_1.on(socket, "ping", this.onping.bind(this)), on_1.on(socket, "data", this.ondata.bind(this)), on_1.on(socket, "error", this.onerror.bind(this)), on_1.on(socket, "close", this.onclose.bind(this)), on_1.on(this.decoder, "decoded", this.ondecoded.bind(this)));
    }
    /**
     * Called upon a ping.
     *
     * @private
     */

  }, {
    key: "onping",
    value: function onping() {
      this.emitReserved("ping");
    }
    /**
     * Called with data.
     *
     * @private
     */

  }, {
    key: "ondata",
    value: function ondata(data) {
      this.decoder.add(data);
    }
    /**
     * Called when parser fully decodes a packet.
     *
     * @private
     */

  }, {
    key: "ondecoded",
    value: function ondecoded(packet) {
      this.emitReserved("packet", packet);
    }
    /**
     * Called upon socket error.
     *
     * @private
     */

  }, {
    key: "onerror",
    value: function onerror(err) {
      debug("error", err);
      this.emitReserved("error", err);
    }
    /**
     * Creates a new socket for the given `nsp`.
     *
     * @return {Socket}
     * @public
     */

  }, {
    key: "socket",
    value: function socket(nsp, opts) {
      var socket = this.nsps[nsp];

      if (!socket) {
        socket = new socket_1.Socket(this, nsp, opts);
        this.nsps[nsp] = socket;
      }

      return socket;
    }
    /**
     * Called upon a socket close.
     *
     * @param socket
     * @private
     */

  }, {
    key: "_destroy",
    value: function _destroy(socket) {
      var nsps = Object.keys(this.nsps);

      for (var _i = 0, _nsps = nsps; _i < _nsps.length; _i++) {
        var nsp = _nsps[_i];
        var _socket = this.nsps[nsp];

        if (_socket.active) {
          debug("socket %s is still active, skipping close", nsp);
          return;
        }
      }

      this._close();
    }
    /**
     * Writes a packet.
     *
     * @param packet
     * @private
     */

  }, {
    key: "_packet",
    value: function _packet(packet) {
      debug("writing packet %j", packet);
      var encodedPackets = this.encoder.encode(packet);

      for (var i = 0; i < encodedPackets.length; i++) {
        this.engine.write(encodedPackets[i], packet.options);
      }
    }
    /**
     * Clean up transport subscriptions and packet buffer.
     *
     * @private
     */

  }, {
    key: "cleanup",
    value: function cleanup() {
      debug("cleanup");
      this.subs.forEach(function (subDestroy) {
        return subDestroy();
      });
      this.subs.length = 0;
      this.decoder.destroy();
    }
    /**
     * Close the current socket.
     *
     * @private
     */

  }, {
    key: "_close",
    value: function _close() {
      debug("disconnect");
      this.skipReconnect = true;
      this._reconnecting = false;

      if ("opening" === this._readyState) {
        // `onclose` will not fire because
        // an open event never happened
        this.cleanup();
      }

      this.backoff.reset();
      this._readyState = "closed";
      if (this.engine) this.engine.close();
    }
    /**
     * Alias for close()
     *
     * @private
     */

  }, {
    key: "disconnect",
    value: function disconnect() {
      return this._close();
    }
    /**
     * Called upon engine close.
     *
     * @private
     */

  }, {
    key: "onclose",
    value: function onclose(reason) {
      debug("onclose");
      this.cleanup();
      this.backoff.reset();
      this._readyState = "closed";
      this.emitReserved("close", reason);

      if (this._reconnection && !this.skipReconnect) {
        this.reconnect();
      }
    }
    /**
     * Attempt a reconnection.
     *
     * @private
     */

  }, {
    key: "reconnect",
    value: function reconnect() {
      var _this3 = this;

      if (this._reconnecting || this.skipReconnect) return this;
      var self = this;

      if (this.backoff.attempts >= this._reconnectionAttempts) {
        debug("reconnect failed");
        this.backoff.reset();
        this.emitReserved("reconnect_failed");
        this._reconnecting = false;
      } else {
        var delay = this.backoff.duration();
        debug("will wait %dms before reconnect attempt", delay);
        this._reconnecting = true;
        var timer = setTimeout(function () {
          if (self.skipReconnect) return;
          debug("attempting reconnect");

          _this3.emitReserved("reconnect_attempt", self.backoff.attempts); // check again for the case socket closed in above events


          if (self.skipReconnect) return;
          self.open(function (err) {
            if (err) {
              debug("reconnect attempt error");
              self._reconnecting = false;
              self.reconnect();

              _this3.emitReserved("reconnect_error", err);
            } else {
              debug("reconnect success");
              self.onreconnect();
            }
          });
        }, delay);

        if (this.opts.autoUnref) {
          timer.unref();
        }

        this.subs.push(function subDestroy() {
          clearTimeout(timer);
        });
      }
    }
    /**
     * Called upon successful reconnect.
     *
     * @private
     */

  }, {
    key: "onreconnect",
    value: function onreconnect() {
      var attempt = this.backoff.attempts;
      this._reconnecting = false;
      this.backoff.reset();
      this.emitReserved("reconnect", attempt);
    }
  }]);

  return Manager;
}(typed_events_1.StrictEventEmitter);

exports.Manager = Manager;

/***/ }),

/***/ "./build/on.js":
/*!*********************!*\
  !*** ./build/on.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.on = void 0;

function on(obj, ev, fn) {
  obj.on(ev, fn);
  return function subDestroy() {
    obj.off(ev, fn);
  };
}

exports.on = on;

/***/ }),

/***/ "./build/socket.js":
/*!*************************!*\
  !*** ./build/socket.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Socket = void 0;

var socket_io_parser_1 = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-parser/dist/index.js");

var on_1 = __webpack_require__(/*! ./on */ "./build/on.js");

var typed_events_1 = __webpack_require__(/*! ./typed-events */ "./build/typed-events.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("socket.io-client:socket");
/**
 * Internal events.
 * These events can't be emitted by the user.
 */


var RESERVED_EVENTS = Object.freeze({
  connect: 1,
  connect_error: 1,
  disconnect: 1,
  disconnecting: 1,
  // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener
  newListener: 1,
  removeListener: 1
});

var Socket = /*#__PURE__*/function (_typed_events_1$Stric) {
  _inherits(Socket, _typed_events_1$Stric);

  var _super = _createSuper(Socket);

  /**
   * `Socket` constructor.
   *
   * @public
   */
  function Socket(io, nsp, opts) {
    var _this;

    _classCallCheck(this, Socket);

    _this = _super.call(this);
    _this.receiveBuffer = [];
    _this.sendBuffer = [];
    _this.ids = 0;
    _this.acks = {};
    _this.flags = {};
    _this.io = io;
    _this.nsp = nsp;
    _this.ids = 0;
    _this.acks = {};
    _this.receiveBuffer = [];
    _this.sendBuffer = [];
    _this.connected = false;
    _this.disconnected = true;
    _this.flags = {};

    if (opts && opts.auth) {
      _this.auth = opts.auth;
    }

    if (_this.io._autoConnect) _this.open();
    return _this;
  }
  /**
   * Subscribe to open, close and packet events
   *
   * @private
   */


  _createClass(Socket, [{
    key: "subEvents",
    value: function subEvents() {
      if (this.subs) return;
      var io = this.io;
      this.subs = [on_1.on(io, "open", this.onopen.bind(this)), on_1.on(io, "packet", this.onpacket.bind(this)), on_1.on(io, "error", this.onerror.bind(this)), on_1.on(io, "close", this.onclose.bind(this))];
    }
    /**
     * Whether the Socket will try to reconnect when its Manager connects or reconnects
     */

  }, {
    key: "active",
    get: function get() {
      return !!this.subs;
    }
    /**
     * "Opens" the socket.
     *
     * @public
     */

  }, {
    key: "connect",
    value: function connect() {
      if (this.connected) return this;
      this.subEvents();
      if (!this.io["_reconnecting"]) this.io.open(); // ensure open

      if ("open" === this.io._readyState) this.onopen();
      return this;
    }
    /**
     * Alias for connect()
     */

  }, {
    key: "open",
    value: function open() {
      return this.connect();
    }
    /**
     * Sends a `message` event.
     *
     * @return self
     * @public
     */

  }, {
    key: "send",
    value: function send() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      args.unshift("message");
      this.emit.apply(this, args);
      return this;
    }
    /**
     * Override `emit`.
     * If the event is in `events`, it's emitted normally.
     *
     * @return self
     * @public
     */

  }, {
    key: "emit",
    value: function emit(ev) {
      if (RESERVED_EVENTS.hasOwnProperty(ev)) {
        throw new Error('"' + ev + '" is a reserved event name');
      }

      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      args.unshift(ev);
      var packet = {
        type: socket_io_parser_1.PacketType.EVENT,
        data: args
      };
      packet.options = {};
      packet.options.compress = this.flags.compress !== false; // event ack callback

      if ("function" === typeof args[args.length - 1]) {
        debug("emitting packet with ack id %d", this.ids);
        this.acks[this.ids] = args.pop();
        packet.id = this.ids++;
      }

      var isTransportWritable = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable;
      var discardPacket = this.flags["volatile"] && (!isTransportWritable || !this.connected);

      if (discardPacket) {
        debug("discard packet as the transport is not currently writable");
      } else if (this.connected) {
        this.packet(packet);
      } else {
        this.sendBuffer.push(packet);
      }

      this.flags = {};
      return this;
    }
    /**
     * Sends a packet.
     *
     * @param packet
     * @private
     */

  }, {
    key: "packet",
    value: function packet(_packet) {
      _packet.nsp = this.nsp;

      this.io._packet(_packet);
    }
    /**
     * Called upon engine `open`.
     *
     * @private
     */

  }, {
    key: "onopen",
    value: function onopen() {
      var _this2 = this;

      debug("transport is open - connecting");

      if (typeof this.auth == "function") {
        this.auth(function (data) {
          _this2.packet({
            type: socket_io_parser_1.PacketType.CONNECT,
            data: data
          });
        });
      } else {
        this.packet({
          type: socket_io_parser_1.PacketType.CONNECT,
          data: this.auth
        });
      }
    }
    /**
     * Called upon engine or manager `error`.
     *
     * @param err
     * @private
     */

  }, {
    key: "onerror",
    value: function onerror(err) {
      if (!this.connected) {
        this.emitReserved("connect_error", err);
      }
    }
    /**
     * Called upon engine `close`.
     *
     * @param reason
     * @private
     */

  }, {
    key: "onclose",
    value: function onclose(reason) {
      debug("close (%s)", reason);
      this.connected = false;
      this.disconnected = true;
      delete this.id;
      this.emitReserved("disconnect", reason);
    }
    /**
     * Called with socket packet.
     *
     * @param packet
     * @private
     */

  }, {
    key: "onpacket",
    value: function onpacket(packet) {
      var sameNamespace = packet.nsp === this.nsp;
      if (!sameNamespace) return;

      switch (packet.type) {
        case socket_io_parser_1.PacketType.CONNECT:
          if (packet.data && packet.data.sid) {
            var id = packet.data.sid;
            this.onconnect(id);
          } else {
            this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
          }

          break;

        case socket_io_parser_1.PacketType.EVENT:
          this.onevent(packet);
          break;

        case socket_io_parser_1.PacketType.BINARY_EVENT:
          this.onevent(packet);
          break;

        case socket_io_parser_1.PacketType.ACK:
          this.onack(packet);
          break;

        case socket_io_parser_1.PacketType.BINARY_ACK:
          this.onack(packet);
          break;

        case socket_io_parser_1.PacketType.DISCONNECT:
          this.ondisconnect();
          break;

        case socket_io_parser_1.PacketType.CONNECT_ERROR:
          var err = new Error(packet.data.message); // @ts-ignore

          err.data = packet.data.data;
          this.emitReserved("connect_error", err);
          break;
      }
    }
    /**
     * Called upon a server event.
     *
     * @param packet
     * @private
     */

  }, {
    key: "onevent",
    value: function onevent(packet) {
      var args = packet.data || [];
      debug("emitting event %j", args);

      if (null != packet.id) {
        debug("attaching ack callback to event");
        args.push(this.ack(packet.id));
      }

      if (this.connected) {
        this.emitEvent(args);
      } else {
        this.receiveBuffer.push(Object.freeze(args));
      }
    }
  }, {
    key: "emitEvent",
    value: function emitEvent(args) {
      if (this._anyListeners && this._anyListeners.length) {
        var listeners = this._anyListeners.slice();

        var _iterator = _createForOfIteratorHelper(listeners),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var listener = _step.value;
            listener.apply(this, args);
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }

      _get(_getPrototypeOf(Socket.prototype), "emit", this).apply(this, args);
    }
    /**
     * Produces an ack callback to emit with an event.
     *
     * @private
     */

  }, {
    key: "ack",
    value: function ack(id) {
      var self = this;
      var sent = false;
      return function () {
        // prevent double callbacks
        if (sent) return;
        sent = true;

        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
          args[_key3] = arguments[_key3];
        }

        debug("sending ack %j", args);
        self.packet({
          type: socket_io_parser_1.PacketType.ACK,
          id: id,
          data: args
        });
      };
    }
    /**
     * Called upon a server acknowlegement.
     *
     * @param packet
     * @private
     */

  }, {
    key: "onack",
    value: function onack(packet) {
      var ack = this.acks[packet.id];

      if ("function" === typeof ack) {
        debug("calling ack %s with %j", packet.id, packet.data);
        ack.apply(this, packet.data);
        delete this.acks[packet.id];
      } else {
        debug("bad ack %s", packet.id);
      }
    }
    /**
     * Called upon server connect.
     *
     * @private
     */

  }, {
    key: "onconnect",
    value: function onconnect(id) {
      debug("socket connected with id %s", id);
      this.id = id;
      this.connected = true;
      this.disconnected = false;
      this.emitBuffered();
      this.emitReserved("connect");
    }
    /**
     * Emit buffered events (received and emitted).
     *
     * @private
     */

  }, {
    key: "emitBuffered",
    value: function emitBuffered() {
      var _this3 = this;

      this.receiveBuffer.forEach(function (args) {
        return _this3.emitEvent(args);
      });
      this.receiveBuffer = [];
      this.sendBuffer.forEach(function (packet) {
        return _this3.packet(packet);
      });
      this.sendBuffer = [];
    }
    /**
     * Called upon server disconnect.
     *
     * @private
     */

  }, {
    key: "ondisconnect",
    value: function ondisconnect() {
      debug("server disconnect (%s)", this.nsp);
      this.destroy();
      this.onclose("io server disconnect");
    }
    /**
     * Called upon forced client/server side disconnections,
     * this method ensures the manager stops tracking us and
     * that reconnections don't get triggered for this.
     *
     * @private
     */

  }, {
    key: "destroy",
    value: function destroy() {
      if (this.subs) {
        // clean subscriptions to avoid reconnections
        this.subs.forEach(function (subDestroy) {
          return subDestroy();
        });
        this.subs = undefined;
      }

      this.io["_destroy"](this);
    }
    /**
     * Disconnects the socket manually.
     *
     * @return self
     * @public
     */

  }, {
    key: "disconnect",
    value: function disconnect() {
      if (this.connected) {
        debug("performing disconnect (%s)", this.nsp);
        this.packet({
          type: socket_io_parser_1.PacketType.DISCONNECT
        });
      } // remove socket from pool


      this.destroy();

      if (this.connected) {
        // fire events
        this.onclose("io client disconnect");
      }

      return this;
    }
    /**
     * Alias for disconnect()
     *
     * @return self
     * @public
     */

  }, {
    key: "close",
    value: function close() {
      return this.disconnect();
    }
    /**
     * Sets the compress flag.
     *
     * @param compress - if `true`, compresses the sending data
     * @return self
     * @public
     */

  }, {
    key: "compress",
    value: function compress(_compress) {
      this.flags.compress = _compress;
      return this;
    }
    /**
     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not
     * ready to send messages.
     *
     * @returns self
     * @public
     */

  }, {
    key: "volatile",
    get: function get() {
      this.flags["volatile"] = true;
      return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback.
     *
     * @param listener
     * @public
     */

  }, {
    key: "onAny",
    value: function onAny(listener) {
      this._anyListeners = this._anyListeners || [];

      this._anyListeners.push(listener);

      return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback. The listener is added to the beginning of the listeners array.
     *
     * @param listener
     * @public
     */

  }, {
    key: "prependAny",
    value: function prependAny(listener) {
      this._anyListeners = this._anyListeners || [];

      this._anyListeners.unshift(listener);

      return this;
    }
    /**
     * Removes the listener that will be fired when any event is emitted.
     *
     * @param listener
     * @public
     */

  }, {
    key: "offAny",
    value: function offAny(listener) {
      if (!this._anyListeners) {
        return this;
      }

      if (listener) {
        var listeners = this._anyListeners;

        for (var i = 0; i < listeners.length; i++) {
          if (listener === listeners[i]) {
            listeners.splice(i, 1);
            return this;
          }
        }
      } else {
        this._anyListeners = [];
      }

      return this;
    }
    /**
     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
     * e.g. to remove listeners.
     *
     * @public
     */

  }, {
    key: "listenersAny",
    value: function listenersAny() {
      return this._anyListeners || [];
    }
  }]);

  return Socket;
}(typed_events_1.StrictEventEmitter);

exports.Socket = Socket;

/***/ }),

/***/ "./build/typed-events.js":
/*!*******************************!*\
  !*** ./build/typed-events.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StrictEventEmitter = void 0;

var Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");
/**
 * Strictly typed version of an `EventEmitter`. A `TypedEventEmitter` takes type
 * parameters for mappings of event names to event data types, and strictly
 * types method calls to the `EventEmitter` according to these event maps.
 *
 * @typeParam ListenEvents - `EventsMap` of user-defined events that can be
 * listened to with `on` or `once`
 * @typeParam EmitEvents - `EventsMap` of user-defined events that can be
 * emitted with `emit`
 * @typeParam ReservedEvents - `EventsMap` of reserved events, that can be
 * emitted by socket.io with `emitReserved`, and can be listened to with
 * `listen`.
 */


var StrictEventEmitter = /*#__PURE__*/function (_Emitter) {
  _inherits(StrictEventEmitter, _Emitter);

  var _super = _createSuper(StrictEventEmitter);

  function StrictEventEmitter() {
    _classCallCheck(this, StrictEventEmitter);

    return _super.apply(this, arguments);
  }

  _createClass(StrictEventEmitter, [{
    key: "on",
    value:
    /**
     * Adds the `listener` function as an event listener for `ev`.
     *
     * @param ev Name of the event
     * @param listener Callback function
     */
    function on(ev, listener) {
      _get(_getPrototypeOf(StrictEventEmitter.prototype), "on", this).call(this, ev, listener);

      return this;
    }
    /**
     * Adds a one-time `listener` function as an event listener for `ev`.
     *
     * @param ev Name of the event
     * @param listener Callback function
     */

  }, {
    key: "once",
    value: function once(ev, listener) {
      _get(_getPrototypeOf(StrictEventEmitter.prototype), "once", this).call(this, ev, listener);

      return this;
    }
    /**
     * Emits an event.
     *
     * @param ev Name of the event
     * @param args Values to send to listeners of this event
     */

  }, {
    key: "emit",
    value: function emit(ev) {
      var _get2;

      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      (_get2 = _get(_getPrototypeOf(StrictEventEmitter.prototype), "emit", this)).call.apply(_get2, [this, ev].concat(args));

      return this;
    }
    /**
     * Emits a reserved event.
     *
     * This method is `protected`, so that only a class extending
     * `StrictEventEmitter` can emit its own reserved events.
     *
     * @param ev Reserved event name
     * @param args Arguments to emit along with the event
     */

  }, {
    key: "emitReserved",
    value: function emitReserved(ev) {
      var _get3;

      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      (_get3 = _get(_getPrototypeOf(StrictEventEmitter.prototype), "emit", this)).call.apply(_get3, [this, ev].concat(args));

      return this;
    }
    /**
     * Returns the listeners listening to an event.
     *
     * @param event Event name
     * @returns Array of listeners subscribed to `event`
     */

  }, {
    key: "listeners",
    value: function listeners(event) {
      return _get(_getPrototypeOf(StrictEventEmitter.prototype), "listeners", this).call(this, event);
    }
  }]);

  return StrictEventEmitter;
}(Emitter);

exports.StrictEventEmitter = StrictEventEmitter;

/***/ }),

/***/ "./build/url.js":
/*!**********************!*\
  !*** ./build/url.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.url = void 0;

var parseuri = __webpack_require__(/*! parseuri */ "./node_modules/parseuri/index.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("socket.io-client:url");
/**
 * URL parser.
 *
 * @param uri - url
 * @param path - the request path of the connection
 * @param loc - An object meant to mimic window.location.
 *        Defaults to window.location.
 * @public
 */


function url(uri) {
  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
  var loc = arguments.length > 2 ? arguments[2] : undefined;
  var obj = uri; // default to window.location

  loc = loc || typeof location !== "undefined" && location;
  if (null == uri) uri = loc.protocol + "//" + loc.host; // relative path support

  if (typeof uri === "string") {
    if ("/" === uri.charAt(0)) {
      if ("/" === uri.charAt(1)) {
        uri = loc.protocol + uri;
      } else {
        uri = loc.host + uri;
      }
    }

    if (!/^(https?|wss?):\/\//.test(uri)) {
      debug("protocol-less url %s", uri);

      if ("undefined" !== typeof loc) {
        uri = loc.protocol + "//" + uri;
      } else {
        uri = "https://" + uri;
      }
    } // parse


    debug("parse %s", uri);
    obj = parseuri(uri);
  } // make sure we treat `localhost:80` and `localhost` equally


  if (!obj.port) {
    if (/^(http|ws)$/.test(obj.protocol)) {
      obj.port = "80";
    } else if (/^(http|ws)s$/.test(obj.protocol)) {
      obj.port = "443";
    }
  }

  obj.path = obj.path || "/";
  var ipv6 = obj.host.indexOf(":") !== -1;
  var host = ipv6 ? "[" + obj.host + "]" : obj.host; // define unique id

  obj.id = obj.protocol + "://" + host + ":" + obj.port + path; // define href

  obj.href = obj.protocol + "://" + host + (loc && loc.port === obj.port ? "" : ":" + obj.port);
  return obj;
}

exports.url = url;

/***/ }),

/***/ "./node_modules/backo2/index.js":
/*!**************************************!*\
  !*** ./node_modules/backo2/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Expose `Backoff`.
 */
module.exports = Backoff;
/**
 * Initialize backoff timer with `opts`.
 *
 * - `min` initial timeout in milliseconds [100]
 * - `max` max timeout [10000]
 * - `jitter` [0]
 * - `factor` [2]
 *
 * @param {Object} opts
 * @api public
 */

function Backoff(opts) {
  opts = opts || {};
  this.ms = opts.min || 100;
  this.max = opts.max || 10000;
  this.factor = opts.factor || 2;
  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;
  this.attempts = 0;
}
/**
 * Return the backoff duration.
 *
 * @return {Number}
 * @api public
 */


Backoff.prototype.duration = function () {
  var ms = this.ms * Math.pow(this.factor, this.attempts++);

  if (this.jitter) {
    var rand = Math.random();
    var deviation = Math.floor(rand * this.jitter * ms);
    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;
  }

  return Math.min(ms, this.max) | 0;
};
/**
 * Reset the number of attempts.
 *
 * @api public
 */


Backoff.prototype.reset = function () {
  this.attempts = 0;
};
/**
 * Set the minimum duration
 *
 * @api public
 */


Backoff.prototype.setMin = function (min) {
  this.ms = min;
};
/**
 * Set the maximum duration
 *
 * @api public
 */


Backoff.prototype.setMax = function (max) {
  this.max = max;
};
/**
 * Set the jitter
 *
 * @api public
 */


Backoff.prototype.setJitter = function (jitter) {
  this.jitter = jitter;
};

/***/ }),

/***/ "./node_modules/component-emitter/index.js":
/*!*************************************************!*\
  !*** ./node_modules/component-emitter/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Expose `Emitter`.
 */
if (true) {
  module.exports = Emitter;
}
/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */


function Emitter(obj) {
  if (obj) return mixin(obj);
}

;
/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }

  return obj;
}
/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */


Emitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {
  this._callbacks = this._callbacks || {};
  (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);
  return this;
};
/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */


Emitter.prototype.once = function (event, fn) {
  function on() {
    this.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};
/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */


Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {
  this._callbacks = this._callbacks || {}; // all

  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  } // specific event


  var callbacks = this._callbacks['$' + event];
  if (!callbacks) return this; // remove all handlers

  if (1 == arguments.length) {
    delete this._callbacks['$' + event];
    return this;
  } // remove specific handler


  var cb;

  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];

    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  } // Remove event specific arrays for event types that no
  // one is subscribed for to avoid memory leak.


  if (callbacks.length === 0) {
    delete this._callbacks['$' + event];
  }

  return this;
};
/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */


Emitter.prototype.emit = function (event) {
  this._callbacks = this._callbacks || {};
  var args = new Array(arguments.length - 1),
      callbacks = this._callbacks['$' + event];

  for (var i = 1; i < arguments.length; i++) {
    args[i - 1] = arguments[i];
  }

  if (callbacks) {
    callbacks = callbacks.slice(0);

    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};
/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */


Emitter.prototype.listeners = function (event) {
  this._callbacks = this._callbacks || {};
  return this._callbacks['$' + event] || [];
};
/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */


Emitter.prototype.hasListeners = function (event) {
  return !!this.listeners(event).length;
};

/***/ }),

/***/ "./node_modules/debug/src/browser.js":
/*!*******************************************!*\
  !*** ./node_modules/debug/src/browser.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */
exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();

exports.destroy = function () {
  var warned = false;
  return function () {
    if (!warned) {
      warned = true;
      console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
    }
  };
}();
/**
 * Colors.
 */


exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];
/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */
// eslint-disable-next-line complexity

function useColors() {
  // NB: In an Electron preload script, document will be defined but not fully
  // initialized. Since we know we're in Chrome, we'll just detect this case
  // explicitly
  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
    return true;
  } // Internet Explorer and Edge do not support colors.


  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
    return false;
  } // Is webkit? http://stackoverflow.com/a/16459606/376773
  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632


  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
}
/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */


function formatArgs(args) {
  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);

  if (!this.useColors) {
    return;
  }

  var c = 'color: ' + this.color;
  args.splice(1, 0, c, 'color: inherit'); // The final "%c" is somewhat tricky, because there could be other
  // arguments passed either before or after the %c, so we need to
  // figure out the correct index to insert the CSS into

  var index = 0;
  var lastC = 0;
  args[0].replace(/%[a-zA-Z%]/g, function (match) {
    if (match === '%%') {
      return;
    }

    index++;

    if (match === '%c') {
      // We only are interested in the *last* %c
      // (the user may have provided their own)
      lastC = index;
    }
  });
  args.splice(lastC, 0, c);
}
/**
 * Invokes `console.debug()` when available.
 * No-op when `console.debug` is not a "function".
 * If `console.debug` is not available, falls back
 * to `console.log`.
 *
 * @api public
 */


exports.log = console.debug || console.log || function () {};
/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */


function save(namespaces) {
  try {
    if (namespaces) {
      exports.storage.setItem('debug', namespaces);
    } else {
      exports.storage.removeItem('debug');
    }
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  }
}
/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */


function load() {
  var r;

  try {
    r = exports.storage.getItem('debug');
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  } // If debug isn't set in LS, and we're in Electron, try to load $DEBUG


  if (!r && typeof process !== 'undefined' && 'env' in process) {
    r = process.env.DEBUG;
  }

  return r;
}
/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */


function localstorage() {
  try {
    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
    // The Browser also has localStorage in the global context.
    return localStorage;
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  }
}

module.exports = __webpack_require__(/*! ./common */ "./node_modules/debug/src/common.js")(exports);
var formatters = module.exports.formatters;
/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
  try {
    return JSON.stringify(v);
  } catch (error) {
    return '[UnexpectedJSONParseError]: ' + error.message;
  }
};

/***/ }),

/***/ "./node_modules/debug/src/common.js":
/*!******************************************!*\
  !*** ./node_modules/debug/src/common.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */
function setup(env) {
  createDebug.debug = createDebug;
  createDebug["default"] = createDebug;
  createDebug.coerce = coerce;
  createDebug.disable = disable;
  createDebug.enable = enable;
  createDebug.enabled = enabled;
  createDebug.humanize = __webpack_require__(/*! ms */ "./node_modules/ms/index.js");
  createDebug.destroy = destroy;
  Object.keys(env).forEach(function (key) {
    createDebug[key] = env[key];
  });
  /**
  * The currently active debug mode names, and names to skip.
  */

  createDebug.names = [];
  createDebug.skips = [];
  /**
  * Map of special "%n" handling functions, for the debug "format" argument.
  *
  * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
  */

  createDebug.formatters = {};
  /**
  * Selects a color for a debug namespace
  * @param {String} namespace The namespace string for the for the debug instance to be colored
  * @return {Number|String} An ANSI color code for the given namespace
  * @api private
  */

  function selectColor(namespace) {
    var hash = 0;

    for (var i = 0; i < namespace.length; i++) {
      hash = (hash << 5) - hash + namespace.charCodeAt(i);
      hash |= 0; // Convert to 32bit integer
    }

    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
  }

  createDebug.selectColor = selectColor;
  /**
  * Create a debugger with the given `namespace`.
  *
  * @param {String} namespace
  * @return {Function}
  * @api public
  */

  function createDebug(namespace) {
    var prevTime;
    var enableOverride = null;

    function debug() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      // Disabled?
      if (!debug.enabled) {
        return;
      }

      var self = debug; // Set `diff` timestamp

      var curr = Number(new Date());
      var ms = curr - (prevTime || curr);
      self.diff = ms;
      self.prev = prevTime;
      self.curr = curr;
      prevTime = curr;
      args[0] = createDebug.coerce(args[0]);

      if (typeof args[0] !== 'string') {
        // Anything else let's inspect with %O
        args.unshift('%O');
      } // Apply any `formatters` transformations


      var index = 0;
      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {
        // If we encounter an escaped % then don't increase the array index
        if (match === '%%') {
          return '%';
        }

        index++;
        var formatter = createDebug.formatters[format];

        if (typeof formatter === 'function') {
          var val = args[index];
          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`

          args.splice(index, 1);
          index--;
        }

        return match;
      }); // Apply env-specific formatting (colors, etc.)

      createDebug.formatArgs.call(self, args);
      var logFn = self.log || createDebug.log;
      logFn.apply(self, args);
    }

    debug.namespace = namespace;
    debug.useColors = createDebug.useColors();
    debug.color = createDebug.selectColor(namespace);
    debug.extend = extend;
    debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.

    Object.defineProperty(debug, 'enabled', {
      enumerable: true,
      configurable: false,
      get: function get() {
        return enableOverride === null ? createDebug.enabled(namespace) : enableOverride;
      },
      set: function set(v) {
        enableOverride = v;
      }
    }); // Env-specific initialization logic for debug instances

    if (typeof createDebug.init === 'function') {
      createDebug.init(debug);
    }

    return debug;
  }

  function extend(namespace, delimiter) {
    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
    newDebug.log = this.log;
    return newDebug;
  }
  /**
  * Enables a debug mode by namespaces. This can include modes
  * separated by a colon and wildcards.
  *
  * @param {String} namespaces
  * @api public
  */


  function enable(namespaces) {
    createDebug.save(namespaces);
    createDebug.names = [];
    createDebug.skips = [];
    var i;
    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
    var len = split.length;

    for (i = 0; i < len; i++) {
      if (!split[i]) {
        // ignore empty strings
        continue;
      }

      namespaces = split[i].replace(/\*/g, '.*?');

      if (namespaces[0] === '-') {
        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
      } else {
        createDebug.names.push(new RegExp('^' + namespaces + '$'));
      }
    }
  }
  /**
  * Disable debug output.
  *
  * @return {String} namespaces
  * @api public
  */


  function disable() {
    var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {
      return '-' + namespace;
    }))).join(',');
    createDebug.enable('');
    return namespaces;
  }
  /**
  * Returns true if the given mode name is enabled, false otherwise.
  *
  * @param {String} name
  * @return {Boolean}
  * @api public
  */


  function enabled(name) {
    if (name[name.length - 1] === '*') {
      return true;
    }

    var i;
    var len;

    for (i = 0, len = createDebug.skips.length; i < len; i++) {
      if (createDebug.skips[i].test(name)) {
        return false;
      }
    }

    for (i = 0, len = createDebug.names.length; i < len; i++) {
      if (createDebug.names[i].test(name)) {
        return true;
      }
    }

    return false;
  }
  /**
  * Convert regexp to namespace
  *
  * @param {RegExp} regxep
  * @return {String} namespace
  * @api private
  */


  function toNamespace(regexp) {
    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\.\*\?$/, '*');
  }
  /**
  * Coerce `val`.
  *
  * @param {Mixed} val
  * @return {Mixed}
  * @api private
  */


  function coerce(val) {
    if (val instanceof Error) {
      return val.stack || val.message;
    }

    return val;
  }
  /**
  * XXX DO NOT USE. This is a temporary stub function.
  * XXX It WILL be removed in the next major release.
  */


  function destroy() {
    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
  }

  createDebug.enable(createDebug.load());
  return createDebug;
}

module.exports = setup;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/globalThis.browser.js":
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/globalThis.browser.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
  if (typeof self !== "undefined") {
    return self;
  } else if (typeof window !== "undefined") {
    return window;
  } else {
    return Function("return this")();
  }
}();

/***/ }),

/***/ "./node_modules/engine.io-client/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Socket = __webpack_require__(/*! ./socket */ "./node_modules/engine.io-client/lib/socket.js");

module.exports = function (uri, opts) {
  return new Socket(uri, opts);
};
/**
 * Expose deps for legacy compatibility
 * and standalone browser access.
 */


module.exports.Socket = Socket;
module.exports.protocol = Socket.protocol; // this is an int

module.exports.Transport = __webpack_require__(/*! ./transport */ "./node_modules/engine.io-client/lib/transport.js");
module.exports.transports = __webpack_require__(/*! ./transports/index */ "./node_modules/engine.io-client/lib/transports/index.js");
module.exports.parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");

/***/ }),

/***/ "./node_modules/engine.io-client/lib/socket.js":
/*!*****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/socket.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var transports = __webpack_require__(/*! ./transports/index */ "./node_modules/engine.io-client/lib/transports/index.js");

var Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("engine.io-client:socket");

var parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");

var parseuri = __webpack_require__(/*! parseuri */ "./node_modules/parseuri/index.js");

var parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");

var Socket = /*#__PURE__*/function (_Emitter) {
  _inherits(Socket, _Emitter);

  var _super = _createSuper(Socket);

  /**
   * Socket constructor.
   *
   * @param {String|Object} uri or options
   * @param {Object} options
   * @api public
   */
  function Socket(uri) {
    var _this;

    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Socket);

    _this = _super.call(this);

    if (uri && "object" === _typeof(uri)) {
      opts = uri;
      uri = null;
    }

    if (uri) {
      uri = parseuri(uri);
      opts.hostname = uri.host;
      opts.secure = uri.protocol === "https" || uri.protocol === "wss";
      opts.port = uri.port;
      if (uri.query) opts.query = uri.query;
    } else if (opts.host) {
      opts.hostname = parseuri(opts.host).host;
    }

    _this.secure = null != opts.secure ? opts.secure : typeof location !== "undefined" && "https:" === location.protocol;

    if (opts.hostname && !opts.port) {
      // if no port is specified manually, use the protocol default
      opts.port = _this.secure ? "443" : "80";
    }

    _this.hostname = opts.hostname || (typeof location !== "undefined" ? location.hostname : "localhost");
    _this.port = opts.port || (typeof location !== "undefined" && location.port ? location.port : _this.secure ? 443 : 80);
    _this.transports = opts.transports || ["polling", "websocket"];
    _this.readyState = "";
    _this.writeBuffer = [];
    _this.prevBufferLen = 0;
    _this.opts = _extends({
      path: "/engine.io",
      agent: false,
      withCredentials: false,
      upgrade: true,
      jsonp: true,
      timestampParam: "t",
      rememberUpgrade: false,
      rejectUnauthorized: true,
      perMessageDeflate: {
        threshold: 1024
      },
      transportOptions: {},
      closeOnBeforeunload: true
    }, opts);
    _this.opts.path = _this.opts.path.replace(/\/$/, "") + "/";

    if (typeof _this.opts.query === "string") {
      _this.opts.query = parseqs.decode(_this.opts.query);
    } // set on handshake


    _this.id = null;
    _this.upgrades = null;
    _this.pingInterval = null;
    _this.pingTimeout = null; // set on heartbeat

    _this.pingTimeoutTimer = null;

    if (typeof addEventListener === "function") {
      if (_this.opts.closeOnBeforeunload) {
        // Firefox closes the connection when the "beforeunload" event is emitted but not Chrome. This event listener
        // ensures every browser behaves the same (no "disconnect" event at the Socket.IO level when the page is
        // closed/reloaded)
        addEventListener("beforeunload", function () {
          if (_this.transport) {
            // silently close the transport
            _this.transport.removeAllListeners();

            _this.transport.close();
          }
        }, false);
      }

      if (_this.hostname !== "localhost") {
        _this.offlineEventListener = function () {
          _this.onClose("transport close");
        };

        addEventListener("offline", _this.offlineEventListener, false);
      }
    }

    _this.open();

    return _this;
  }
  /**
   * Creates transport of the given type.
   *
   * @param {String} transport name
   * @return {Transport}
   * @api private
   */


  _createClass(Socket, [{
    key: "createTransport",
    value: function createTransport(name) {
      debug('creating transport "%s"', name);
      var query = clone(this.opts.query); // append engine.io protocol identifier

      query.EIO = parser.protocol; // transport name

      query.transport = name; // session id if we already have one

      if (this.id) query.sid = this.id;

      var opts = _extends({}, this.opts.transportOptions[name], this.opts, {
        query: query,
        socket: this,
        hostname: this.hostname,
        secure: this.secure,
        port: this.port
      });

      debug("options: %j", opts);
      return new transports[name](opts);
    }
    /**
     * Initializes transport to use and starts probe.
     *
     * @api private
     */

  }, {
    key: "open",
    value: function open() {
      var _this2 = this;

      var transport;

      if (this.opts.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf("websocket") !== -1) {
        transport = "websocket";
      } else if (0 === this.transports.length) {
        // Emit error on next tick so it can be listened to
        setTimeout(function () {
          _this2.emit("error", "No transports available");
        }, 0);
        return;
      } else {
        transport = this.transports[0];
      }

      this.readyState = "opening"; // Retry with the next transport if the transport is disabled (jsonp: false)

      try {
        transport = this.createTransport(transport);
      } catch (e) {
        debug("error while creating transport: %s", e);
        this.transports.shift();
        this.open();
        return;
      }

      transport.open();
      this.setTransport(transport);
    }
    /**
     * Sets the current transport. Disables the existing one (if any).
     *
     * @api private
     */

  }, {
    key: "setTransport",
    value: function setTransport(transport) {
      var _this3 = this;

      debug("setting transport %s", transport.name);

      if (this.transport) {
        debug("clearing existing transport %s", this.transport.name);
        this.transport.removeAllListeners();
      } // set up transport


      this.transport = transport; // set up transport listeners

      transport.on("drain", this.onDrain.bind(this)).on("packet", this.onPacket.bind(this)).on("error", this.onError.bind(this)).on("close", function () {
        _this3.onClose("transport close");
      });
    }
    /**
     * Probes a transport.
     *
     * @param {String} transport name
     * @api private
     */

  }, {
    key: "probe",
    value: function probe(name) {
      var _this4 = this;

      debug('probing transport "%s"', name);
      var transport = this.createTransport(name, {
        probe: 1
      });
      var failed = false;
      Socket.priorWebsocketSuccess = false;

      var onTransportOpen = function onTransportOpen() {
        if (failed) return;
        debug('probe transport "%s" opened', name);
        transport.send([{
          type: "ping",
          data: "probe"
        }]);
        transport.once("packet", function (msg) {
          if (failed) return;

          if ("pong" === msg.type && "probe" === msg.data) {
            debug('probe transport "%s" pong', name);
            _this4.upgrading = true;

            _this4.emit("upgrading", transport);

            if (!transport) return;
            Socket.priorWebsocketSuccess = "websocket" === transport.name;
            debug('pausing current transport "%s"', _this4.transport.name);

            _this4.transport.pause(function () {
              if (failed) return;
              if ("closed" === _this4.readyState) return;
              debug("changing transport and sending upgrade packet");
              cleanup();

              _this4.setTransport(transport);

              transport.send([{
                type: "upgrade"
              }]);

              _this4.emit("upgrade", transport);

              transport = null;
              _this4.upgrading = false;

              _this4.flush();
            });
          } else {
            debug('probe transport "%s" failed', name);
            var err = new Error("probe error");
            err.transport = transport.name;

            _this4.emit("upgradeError", err);
          }
        });
      };

      function freezeTransport() {
        if (failed) return; // Any callback called by transport should be ignored since now

        failed = true;
        cleanup();
        transport.close();
        transport = null;
      } // Handle any error that happens while probing


      var onerror = function onerror(err) {
        var error = new Error("probe error: " + err);
        error.transport = transport.name;
        freezeTransport();
        debug('probe transport "%s" failed because of error: %s', name, err);

        _this4.emit("upgradeError", error);
      };

      function onTransportClose() {
        onerror("transport closed");
      } // When the socket is closed while we're probing


      function onclose() {
        onerror("socket closed");
      } // When the socket is upgraded while we're probing


      function onupgrade(to) {
        if (transport && to.name !== transport.name) {
          debug('"%s" works - aborting "%s"', to.name, transport.name);
          freezeTransport();
        }
      } // Remove all listeners on the transport and on self


      var cleanup = function cleanup() {
        transport.removeListener("open", onTransportOpen);
        transport.removeListener("error", onerror);
        transport.removeListener("close", onTransportClose);

        _this4.removeListener("close", onclose);

        _this4.removeListener("upgrading", onupgrade);
      };

      transport.once("open", onTransportOpen);
      transport.once("error", onerror);
      transport.once("close", onTransportClose);
      this.once("close", onclose);
      this.once("upgrading", onupgrade);
      transport.open();
    }
    /**
     * Called when connection is deemed open.
     *
     * @api public
     */

  }, {
    key: "onOpen",
    value: function onOpen() {
      debug("socket open");
      this.readyState = "open";
      Socket.priorWebsocketSuccess = "websocket" === this.transport.name;
      this.emit("open");
      this.flush(); // we check for `readyState` in case an `open`
      // listener already closed the socket

      if ("open" === this.readyState && this.opts.upgrade && this.transport.pause) {
        debug("starting upgrade probes");
        var i = 0;
        var l = this.upgrades.length;

        for (; i < l; i++) {
          this.probe(this.upgrades[i]);
        }
      }
    }
    /**
     * Handles a packet.
     *
     * @api private
     */

  }, {
    key: "onPacket",
    value: function onPacket(packet) {
      if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) {
        debug('socket receive: type "%s", data "%s"', packet.type, packet.data);
        this.emit("packet", packet); // Socket is live - any packet counts

        this.emit("heartbeat");

        switch (packet.type) {
          case "open":
            this.onHandshake(JSON.parse(packet.data));
            break;

          case "ping":
            this.resetPingTimeout();
            this.sendPacket("pong");
            this.emit("ping");
            this.emit("pong");
            break;

          case "error":
            var err = new Error("server error");
            err.code = packet.data;
            this.onError(err);
            break;

          case "message":
            this.emit("data", packet.data);
            this.emit("message", packet.data);
            break;
        }
      } else {
        debug('packet received with socket readyState "%s"', this.readyState);
      }
    }
    /**
     * Called upon handshake completion.
     *
     * @param {Object} handshake obj
     * @api private
     */

  }, {
    key: "onHandshake",
    value: function onHandshake(data) {
      this.emit("handshake", data);
      this.id = data.sid;
      this.transport.query.sid = data.sid;
      this.upgrades = this.filterUpgrades(data.upgrades);
      this.pingInterval = data.pingInterval;
      this.pingTimeout = data.pingTimeout;
      this.onOpen(); // In case open handler closes socket

      if ("closed" === this.readyState) return;
      this.resetPingTimeout();
    }
    /**
     * Sets and resets ping timeout timer based on server pings.
     *
     * @api private
     */

  }, {
    key: "resetPingTimeout",
    value: function resetPingTimeout() {
      var _this5 = this;

      clearTimeout(this.pingTimeoutTimer);
      this.pingTimeoutTimer = setTimeout(function () {
        _this5.onClose("ping timeout");
      }, this.pingInterval + this.pingTimeout);

      if (this.opts.autoUnref) {
        this.pingTimeoutTimer.unref();
      }
    }
    /**
     * Called on `drain` event
     *
     * @api private
     */

  }, {
    key: "onDrain",
    value: function onDrain() {
      this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important
      // for example, when upgrading, upgrade packet is sent over,
      // and a nonzero prevBufferLen could cause problems on `drain`

      this.prevBufferLen = 0;

      if (0 === this.writeBuffer.length) {
        this.emit("drain");
      } else {
        this.flush();
      }
    }
    /**
     * Flush write buffers.
     *
     * @api private
     */

  }, {
    key: "flush",
    value: function flush() {
      if ("closed" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
        debug("flushing %d packets in socket", this.writeBuffer.length);
        this.transport.send(this.writeBuffer); // keep track of current length of writeBuffer
        // splice writeBuffer and callbackBuffer on `drain`

        this.prevBufferLen = this.writeBuffer.length;
        this.emit("flush");
      }
    }
    /**
     * Sends a message.
     *
     * @param {String} message.
     * @param {Function} callback function.
     * @param {Object} options.
     * @return {Socket} for chaining.
     * @api public
     */

  }, {
    key: "write",
    value: function write(msg, options, fn) {
      this.sendPacket("message", msg, options, fn);
      return this;
    }
  }, {
    key: "send",
    value: function send(msg, options, fn) {
      this.sendPacket("message", msg, options, fn);
      return this;
    }
    /**
     * Sends a packet.
     *
     * @param {String} packet type.
     * @param {String} data.
     * @param {Object} options.
     * @param {Function} callback function.
     * @api private
     */

  }, {
    key: "sendPacket",
    value: function sendPacket(type, data, options, fn) {
      if ("function" === typeof data) {
        fn = data;
        data = undefined;
      }

      if ("function" === typeof options) {
        fn = options;
        options = null;
      }

      if ("closing" === this.readyState || "closed" === this.readyState) {
        return;
      }

      options = options || {};
      options.compress = false !== options.compress;
      var packet = {
        type: type,
        data: data,
        options: options
      };
      this.emit("packetCreate", packet);
      this.writeBuffer.push(packet);
      if (fn) this.once("flush", fn);
      this.flush();
    }
    /**
     * Closes the connection.
     *
     * @api private
     */

  }, {
    key: "close",
    value: function close() {
      var _this6 = this;

      var close = function close() {
        _this6.onClose("forced close");

        debug("socket closing - telling transport to close");

        _this6.transport.close();
      };

      var cleanupAndClose = function cleanupAndClose() {
        _this6.removeListener("upgrade", cleanupAndClose);

        _this6.removeListener("upgradeError", cleanupAndClose);

        close();
      };

      var waitForUpgrade = function waitForUpgrade() {
        // wait for upgrade to finish since we can't send packets while pausing a transport
        _this6.once("upgrade", cleanupAndClose);

        _this6.once("upgradeError", cleanupAndClose);
      };

      if ("opening" === this.readyState || "open" === this.readyState) {
        this.readyState = "closing";

        if (this.writeBuffer.length) {
          this.once("drain", function () {
            if (_this6.upgrading) {
              waitForUpgrade();
            } else {
              close();
            }
          });
        } else if (this.upgrading) {
          waitForUpgrade();
        } else {
          close();
        }
      }

      return this;
    }
    /**
     * Called upon transport error
     *
     * @api private
     */

  }, {
    key: "onError",
    value: function onError(err) {
      debug("socket error %j", err);
      Socket.priorWebsocketSuccess = false;
      this.emit("error", err);
      this.onClose("transport error", err);
    }
    /**
     * Called upon transport close.
     *
     * @api private
     */

  }, {
    key: "onClose",
    value: function onClose(reason, desc) {
      if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) {
        debug('socket close with reason: "%s"', reason); // clear timers

        clearTimeout(this.pingIntervalTimer);
        clearTimeout(this.pingTimeoutTimer); // stop event from firing again for transport

        this.transport.removeAllListeners("close"); // ensure transport won't stay open

        this.transport.close(); // ignore further transport communication

        this.transport.removeAllListeners();

        if (typeof removeEventListener === "function") {
          removeEventListener("offline", this.offlineEventListener, false);
        } // set ready state


        this.readyState = "closed"; // clear session id

        this.id = null; // emit close event

        this.emit("close", reason, desc); // clean buffers after, so users can still
        // grab the buffers on `close` event

        this.writeBuffer = [];
        this.prevBufferLen = 0;
      }
    }
    /**
     * Filters upgrades, returning only those matching client transports.
     *
     * @param {Array} server upgrades
     * @api private
     *
     */

  }, {
    key: "filterUpgrades",
    value: function filterUpgrades(upgrades) {
      var filteredUpgrades = [];
      var i = 0;
      var j = upgrades.length;

      for (; i < j; i++) {
        if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]);
      }

      return filteredUpgrades;
    }
  }]);

  return Socket;
}(Emitter);

Socket.priorWebsocketSuccess = false;
/**
 * Protocol version.
 *
 * @api public
 */

Socket.protocol = parser.protocol; // this is an int

function clone(obj) {
  var o = {};

  for (var i in obj) {
    if (obj.hasOwnProperty(i)) {
      o[i] = obj[i];
    }
  }

  return o;
}

module.exports = Socket;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transport.js":
/*!********************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transport.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");

var Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("engine.io-client:transport");

var Transport = /*#__PURE__*/function (_Emitter) {
  _inherits(Transport, _Emitter);

  var _super = _createSuper(Transport);

  /**
   * Transport abstract constructor.
   *
   * @param {Object} options.
   * @api private
   */
  function Transport(opts) {
    var _this;

    _classCallCheck(this, Transport);

    _this = _super.call(this);
    _this.opts = opts;
    _this.query = opts.query;
    _this.readyState = "";
    _this.socket = opts.socket;
    return _this;
  }
  /**
   * Emits an error.
   *
   * @param {String} str
   * @return {Transport} for chaining
   * @api public
   */


  _createClass(Transport, [{
    key: "onError",
    value: function onError(msg, desc) {
      var err = new Error(msg);
      err.type = "TransportError";
      err.description = desc;
      this.emit("error", err);
      return this;
    }
    /**
     * Opens the transport.
     *
     * @api public
     */

  }, {
    key: "open",
    value: function open() {
      if ("closed" === this.readyState || "" === this.readyState) {
        this.readyState = "opening";
        this.doOpen();
      }

      return this;
    }
    /**
     * Closes the transport.
     *
     * @api private
     */

  }, {
    key: "close",
    value: function close() {
      if ("opening" === this.readyState || "open" === this.readyState) {
        this.doClose();
        this.onClose();
      }

      return this;
    }
    /**
     * Sends multiple packets.
     *
     * @param {Array} packets
     * @api private
     */

  }, {
    key: "send",
    value: function send(packets) {
      if ("open" === this.readyState) {
        this.write(packets);
      } else {
        // this might happen if the transport was silently closed in the beforeunload event handler
        debug("transport is not open, discarding packets");
      }
    }
    /**
     * Called upon open
     *
     * @api private
     */

  }, {
    key: "onOpen",
    value: function onOpen() {
      this.readyState = "open";
      this.writable = true;
      this.emit("open");
    }
    /**
     * Called with data.
     *
     * @param {String} data
     * @api private
     */

  }, {
    key: "onData",
    value: function onData(data) {
      var packet = parser.decodePacket(data, this.socket.binaryType);
      this.onPacket(packet);
    }
    /**
     * Called with a decoded packet.
     */

  }, {
    key: "onPacket",
    value: function onPacket(packet) {
      this.emit("packet", packet);
    }
    /**
     * Called upon close.
     *
     * @api private
     */

  }, {
    key: "onClose",
    value: function onClose() {
      this.readyState = "closed";
      this.emit("close");
    }
  }]);

  return Transport;
}(Emitter);

module.exports = Transport;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/index.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var XMLHttpRequest = __webpack_require__(/*! ../../contrib/xmlhttprequest-ssl/XMLHttpRequest */ "./node_modules/engine.io-client/lib/xmlhttprequest.js");

var XHR = __webpack_require__(/*! ./polling-xhr */ "./node_modules/engine.io-client/lib/transports/polling-xhr.js");

var JSONP = __webpack_require__(/*! ./polling-jsonp */ "./node_modules/engine.io-client/lib/transports/polling-jsonp.js");

var websocket = __webpack_require__(/*! ./websocket */ "./node_modules/engine.io-client/lib/transports/websocket.js");

exports.polling = polling;
exports.websocket = websocket;
/**
 * Polling transport polymorphic constructor.
 * Decides on xhr vs jsonp based on feature detection.
 *
 * @api private
 */

function polling(opts) {
  var xhr;
  var xd = false;
  var xs = false;
  var jsonp = false !== opts.jsonp;

  if (typeof location !== "undefined") {
    var isSSL = "https:" === location.protocol;
    var port = location.port; // some user agents have empty `location.port`

    if (!port) {
      port = isSSL ? 443 : 80;
    }

    xd = opts.hostname !== location.hostname || port !== opts.port;
    xs = opts.secure !== isSSL;
  }

  opts.xdomain = xd;
  opts.xscheme = xs;
  xhr = new XMLHttpRequest(opts);

  if ("open" in xhr && !opts.forceJSONP) {
    return new XHR(opts);
  } else {
    if (!jsonp) throw new Error("JSONP disabled");
    return new JSONP(opts);
  }
}

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling-jsonp.js":
/*!***********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-jsonp.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Polling = __webpack_require__(/*! ./polling */ "./node_modules/engine.io-client/lib/transports/polling.js");

var globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

var rNewline = /\n/g;
var rEscapedNewline = /\\n/g;
/**
 * Global JSONP callbacks.
 */

var callbacks;

var JSONPPolling = /*#__PURE__*/function (_Polling) {
  _inherits(JSONPPolling, _Polling);

  var _super = _createSuper(JSONPPolling);

  /**
   * JSONP Polling constructor.
   *
   * @param {Object} opts.
   * @api public
   */
  function JSONPPolling(opts) {
    var _this;

    _classCallCheck(this, JSONPPolling);

    _this = _super.call(this, opts);
    _this.query = _this.query || {}; // define global callbacks array if not present
    // we do this here (lazily) to avoid unneeded global pollution

    if (!callbacks) {
      // we need to consider multiple engines in the same page
      callbacks = globalThis.___eio = globalThis.___eio || [];
    } // callback identifier


    _this.index = callbacks.length; // add callback to jsonp global

    callbacks.push(_this.onData.bind(_assertThisInitialized(_this))); // append to query string

    _this.query.j = _this.index;
    return _this;
  }
  /**
   * JSONP only supports binary as base64 encoded strings
   */


  _createClass(JSONPPolling, [{
    key: "supportsBinary",
    get: function get() {
      return false;
    }
    /**
     * Closes the socket.
     *
     * @api private
     */

  }, {
    key: "doClose",
    value: function doClose() {
      if (this.script) {
        // prevent spurious errors from being emitted when the window is unloaded
        this.script.onerror = function () {};

        this.script.parentNode.removeChild(this.script);
        this.script = null;
      }

      if (this.form) {
        this.form.parentNode.removeChild(this.form);
        this.form = null;
        this.iframe = null;
      }

      _get(_getPrototypeOf(JSONPPolling.prototype), "doClose", this).call(this);
    }
    /**
     * Starts a poll cycle.
     *
     * @api private
     */

  }, {
    key: "doPoll",
    value: function doPoll() {
      var _this2 = this;

      var script = document.createElement("script");

      if (this.script) {
        this.script.parentNode.removeChild(this.script);
        this.script = null;
      }

      script.async = true;
      script.src = this.uri();

      script.onerror = function (e) {
        _this2.onError("jsonp poll error", e);
      };

      var insertAt = document.getElementsByTagName("script")[0];

      if (insertAt) {
        insertAt.parentNode.insertBefore(script, insertAt);
      } else {
        (document.head || document.body).appendChild(script);
      }

      this.script = script;
      var isUAgecko = "undefined" !== typeof navigator && /gecko/i.test(navigator.userAgent);

      if (isUAgecko) {
        setTimeout(function () {
          var iframe = document.createElement("iframe");
          document.body.appendChild(iframe);
          document.body.removeChild(iframe);
        }, 100);
      }
    }
    /**
     * Writes with a hidden iframe.
     *
     * @param {String} data to send
     * @param {Function} called upon flush.
     * @api private
     */

  }, {
    key: "doWrite",
    value: function doWrite(data, fn) {
      var _this3 = this;

      var iframe;

      if (!this.form) {
        var form = document.createElement("form");
        var area = document.createElement("textarea");
        var id = this.iframeId = "eio_iframe_" + this.index;
        form.className = "socketio";
        form.style.position = "absolute";
        form.style.top = "-1000px";
        form.style.left = "-1000px";
        form.target = id;
        form.method = "POST";
        form.setAttribute("accept-charset", "utf-8");
        area.name = "d";
        form.appendChild(area);
        document.body.appendChild(form);
        this.form = form;
        this.area = area;
      }

      this.form.action = this.uri();

      function complete() {
        initIframe();
        fn();
      }

      var initIframe = function initIframe() {
        if (_this3.iframe) {
          try {
            _this3.form.removeChild(_this3.iframe);
          } catch (e) {
            _this3.onError("jsonp polling iframe removal error", e);
          }
        }

        try {
          // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
          var html = '<iframe src="javascript:0" name="' + _this3.iframeId + '">';
          iframe = document.createElement(html);
        } catch (e) {
          iframe = document.createElement("iframe");
          iframe.name = _this3.iframeId;
          iframe.src = "javascript:0";
        }

        iframe.id = _this3.iframeId;

        _this3.form.appendChild(iframe);

        _this3.iframe = iframe;
      };

      initIframe(); // escape \n to prevent it from being converted into \r\n by some UAs
      // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side

      data = data.replace(rEscapedNewline, "\\\n");
      this.area.value = data.replace(rNewline, "\\n");

      try {
        this.form.submit();
      } catch (e) {}

      if (this.iframe.attachEvent) {
        this.iframe.onreadystatechange = function () {
          if (_this3.iframe.readyState === "complete") {
            complete();
          }
        };
      } else {
        this.iframe.onload = complete;
      }
    }
  }]);

  return JSONPPolling;
}(Polling);

module.exports = JSONPPolling;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling-xhr.js":
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-xhr.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

/* global attachEvent */
var XMLHttpRequest = __webpack_require__(/*! ../../contrib/xmlhttprequest-ssl/XMLHttpRequest */ "./node_modules/engine.io-client/lib/xmlhttprequest.js");

var Polling = __webpack_require__(/*! ./polling */ "./node_modules/engine.io-client/lib/transports/polling.js");

var Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");

var _require = __webpack_require__(/*! ../util */ "./node_modules/engine.io-client/lib/util.js"),
    pick = _require.pick;

var globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("engine.io-client:polling-xhr");
/**
 * Empty function
 */


function empty() {}

var hasXHR2 = function () {
  var xhr = new XMLHttpRequest({
    xdomain: false
  });
  return null != xhr.responseType;
}();

var XHR = /*#__PURE__*/function (_Polling) {
  _inherits(XHR, _Polling);

  var _super = _createSuper(XHR);

  /**
   * XHR Polling constructor.
   *
   * @param {Object} opts
   * @api public
   */
  function XHR(opts) {
    var _this;

    _classCallCheck(this, XHR);

    _this = _super.call(this, opts);

    if (typeof location !== "undefined") {
      var isSSL = "https:" === location.protocol;
      var port = location.port; // some user agents have empty `location.port`

      if (!port) {
        port = isSSL ? 443 : 80;
      }

      _this.xd = typeof location !== "undefined" && opts.hostname !== location.hostname || port !== opts.port;
      _this.xs = opts.secure !== isSSL;
    }
    /**
     * XHR supports binary
     */


    var forceBase64 = opts && opts.forceBase64;
    _this.supportsBinary = hasXHR2 && !forceBase64;
    return _this;
  }
  /**
   * Creates a request.
   *
   * @param {String} method
   * @api private
   */


  _createClass(XHR, [{
    key: "request",
    value: function request() {
      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _extends(opts, {
        xd: this.xd,
        xs: this.xs
      }, this.opts);

      return new Request(this.uri(), opts);
    }
    /**
     * Sends data.
     *
     * @param {String} data to send.
     * @param {Function} called upon flush.
     * @api private
     */

  }, {
    key: "doWrite",
    value: function doWrite(data, fn) {
      var _this2 = this;

      var req = this.request({
        method: "POST",
        data: data
      });
      req.on("success", fn);
      req.on("error", function (err) {
        _this2.onError("xhr post error", err);
      });
    }
    /**
     * Starts a poll cycle.
     *
     * @api private
     */

  }, {
    key: "doPoll",
    value: function doPoll() {
      var _this3 = this;

      debug("xhr poll");
      var req = this.request();
      req.on("data", this.onData.bind(this));
      req.on("error", function (err) {
        _this3.onError("xhr poll error", err);
      });
      this.pollXhr = req;
    }
  }]);

  return XHR;
}(Polling);

var Request = /*#__PURE__*/function (_Emitter) {
  _inherits(Request, _Emitter);

  var _super2 = _createSuper(Request);

  /**
   * Request constructor
   *
   * @param {Object} options
   * @api public
   */
  function Request(uri, opts) {
    var _this4;

    _classCallCheck(this, Request);

    _this4 = _super2.call(this);
    _this4.opts = opts;
    _this4.method = opts.method || "GET";
    _this4.uri = uri;
    _this4.async = false !== opts.async;
    _this4.data = undefined !== opts.data ? opts.data : null;

    _this4.create();

    return _this4;
  }
  /**
   * Creates the XHR object and sends the request.
   *
   * @api private
   */


  _createClass(Request, [{
    key: "create",
    value: function create() {
      var _this5 = this;

      var opts = pick(this.opts, "agent", "enablesXDR", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref");
      opts.xdomain = !!this.opts.xd;
      opts.xscheme = !!this.opts.xs;
      var xhr = this.xhr = new XMLHttpRequest(opts);

      try {
        debug("xhr open %s: %s", this.method, this.uri);
        xhr.open(this.method, this.uri, this.async);

        try {
          if (this.opts.extraHeaders) {
            xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);

            for (var i in this.opts.extraHeaders) {
              if (this.opts.extraHeaders.hasOwnProperty(i)) {
                xhr.setRequestHeader(i, this.opts.extraHeaders[i]);
              }
            }
          }
        } catch (e) {}

        if ("POST" === this.method) {
          try {
            xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
          } catch (e) {}
        }

        try {
          xhr.setRequestHeader("Accept", "*/*");
        } catch (e) {} // ie6 check


        if ("withCredentials" in xhr) {
          xhr.withCredentials = this.opts.withCredentials;
        }

        if (this.opts.requestTimeout) {
          xhr.timeout = this.opts.requestTimeout;
        }

        if (this.hasXDR()) {
          xhr.onload = function () {
            _this5.onLoad();
          };

          xhr.onerror = function () {
            _this5.onError(xhr.responseText);
          };
        } else {
          xhr.onreadystatechange = function () {
            if (4 !== xhr.readyState) return;

            if (200 === xhr.status || 1223 === xhr.status) {
              _this5.onLoad();
            } else {
              // make sure the `error` event handler that's user-set
              // does not throw in the same tick and gets caught here
              setTimeout(function () {
                _this5.onError(typeof xhr.status === "number" ? xhr.status : 0);
              }, 0);
            }
          };
        }

        debug("xhr data %s", this.data);
        xhr.send(this.data);
      } catch (e) {
        // Need to defer since .create() is called directly from the constructor
        // and thus the 'error' event can only be only bound *after* this exception
        // occurs.  Therefore, also, we cannot throw here at all.
        setTimeout(function () {
          _this5.onError(e);
        }, 0);
        return;
      }

      if (typeof document !== "undefined") {
        this.index = Request.requestsCount++;
        Request.requests[this.index] = this;
      }
    }
    /**
     * Called upon successful response.
     *
     * @api private
     */

  }, {
    key: "onSuccess",
    value: function onSuccess() {
      this.emit("success");
      this.cleanup();
    }
    /**
     * Called if we have data.
     *
     * @api private
     */

  }, {
    key: "onData",
    value: function onData(data) {
      this.emit("data", data);
      this.onSuccess();
    }
    /**
     * Called upon error.
     *
     * @api private
     */

  }, {
    key: "onError",
    value: function onError(err) {
      this.emit("error", err);
      this.cleanup(true);
    }
    /**
     * Cleans up house.
     *
     * @api private
     */

  }, {
    key: "cleanup",
    value: function cleanup(fromError) {
      if ("undefined" === typeof this.xhr || null === this.xhr) {
        return;
      } // xmlhttprequest


      if (this.hasXDR()) {
        this.xhr.onload = this.xhr.onerror = empty;
      } else {
        this.xhr.onreadystatechange = empty;
      }

      if (fromError) {
        try {
          this.xhr.abort();
        } catch (e) {}
      }

      if (typeof document !== "undefined") {
        delete Request.requests[this.index];
      }

      this.xhr = null;
    }
    /**
     * Called upon load.
     *
     * @api private
     */

  }, {
    key: "onLoad",
    value: function onLoad() {
      var data = this.xhr.responseText;

      if (data !== null) {
        this.onData(data);
      }
    }
    /**
     * Check if it has XDomainRequest.
     *
     * @api private
     */

  }, {
    key: "hasXDR",
    value: function hasXDR() {
      return typeof XDomainRequest !== "undefined" && !this.xs && this.enablesXDR;
    }
    /**
     * Aborts the request.
     *
     * @api public
     */

  }, {
    key: "abort",
    value: function abort() {
      this.cleanup();
    }
  }]);

  return Request;
}(Emitter);
/**
 * Aborts pending requests when unloading the window. This is needed to prevent
 * memory leaks (e.g. when using IE) and to ensure that no spurious error is
 * emitted.
 */


Request.requestsCount = 0;
Request.requests = {};

if (typeof document !== "undefined") {
  if (typeof attachEvent === "function") {
    attachEvent("onunload", unloadHandler);
  } else if (typeof addEventListener === "function") {
    var terminationEvent = "onpagehide" in globalThis ? "pagehide" : "unload";
    addEventListener(terminationEvent, unloadHandler, false);
  }
}

function unloadHandler() {
  for (var i in Request.requests) {
    if (Request.requests.hasOwnProperty(i)) {
      Request.requests[i].abort();
    }
  }
}

module.exports = XHR;
module.exports.Request = Request;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/polling.js":
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Transport = __webpack_require__(/*! ../transport */ "./node_modules/engine.io-client/lib/transport.js");

var parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");

var parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");

var yeast = __webpack_require__(/*! yeast */ "./node_modules/yeast/index.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("engine.io-client:polling");

var Polling = /*#__PURE__*/function (_Transport) {
  _inherits(Polling, _Transport);

  var _super = _createSuper(Polling);

  function Polling() {
    _classCallCheck(this, Polling);

    return _super.apply(this, arguments);
  }

  _createClass(Polling, [{
    key: "name",
    get:
    /**
     * Transport name.
     */
    function get() {
      return "polling";
    }
    /**
     * Opens the socket (triggers polling). We write a PING message to determine
     * when the transport is open.
     *
     * @api private
     */

  }, {
    key: "doOpen",
    value: function doOpen() {
      this.poll();
    }
    /**
     * Pauses polling.
     *
     * @param {Function} callback upon buffers are flushed and transport is paused
     * @api private
     */

  }, {
    key: "pause",
    value: function pause(onPause) {
      var _this = this;

      this.readyState = "pausing";

      var pause = function pause() {
        debug("paused");
        _this.readyState = "paused";
        onPause();
      };

      if (this.polling || !this.writable) {
        var total = 0;

        if (this.polling) {
          debug("we are currently polling - waiting to pause");
          total++;
          this.once("pollComplete", function () {
            debug("pre-pause polling complete");
            --total || pause();
          });
        }

        if (!this.writable) {
          debug("we are currently writing - waiting to pause");
          total++;
          this.once("drain", function () {
            debug("pre-pause writing complete");
            --total || pause();
          });
        }
      } else {
        pause();
      }
    }
    /**
     * Starts polling cycle.
     *
     * @api public
     */

  }, {
    key: "poll",
    value: function poll() {
      debug("polling");
      this.polling = true;
      this.doPoll();
      this.emit("poll");
    }
    /**
     * Overloads onData to detect payloads.
     *
     * @api private
     */

  }, {
    key: "onData",
    value: function onData(data) {
      var _this2 = this;

      debug("polling got data %s", data);

      var callback = function callback(packet) {
        // if its the first message we consider the transport open
        if ("opening" === _this2.readyState && packet.type === "open") {
          _this2.onOpen();
        } // if its a close packet, we close the ongoing requests


        if ("close" === packet.type) {
          _this2.onClose();

          return false;
        } // otherwise bypass onData and handle the message


        _this2.onPacket(packet);
      }; // decode payload


      parser.decodePayload(data, this.socket.binaryType).forEach(callback); // if an event did not trigger closing

      if ("closed" !== this.readyState) {
        // if we got data we're not polling
        this.polling = false;
        this.emit("pollComplete");

        if ("open" === this.readyState) {
          this.poll();
        } else {
          debug('ignoring poll - transport state "%s"', this.readyState);
        }
      }
    }
    /**
     * For polling, send a close packet.
     *
     * @api private
     */

  }, {
    key: "doClose",
    value: function doClose() {
      var _this3 = this;

      var close = function close() {
        debug("writing close packet");

        _this3.write([{
          type: "close"
        }]);
      };

      if ("open" === this.readyState) {
        debug("transport open - closing");
        close();
      } else {
        // in case we're trying to close while
        // handshaking is in progress (GH-164)
        debug("transport not open - deferring close");
        this.once("open", close);
      }
    }
    /**
     * Writes a packets payload.
     *
     * @param {Array} data packets
     * @param {Function} drain callback
     * @api private
     */

  }, {
    key: "write",
    value: function write(packets) {
      var _this4 = this;

      this.writable = false;
      parser.encodePayload(packets, function (data) {
        _this4.doWrite(data, function () {
          _this4.writable = true;

          _this4.emit("drain");
        });
      });
    }
    /**
     * Generates uri for connection.
     *
     * @api private
     */

  }, {
    key: "uri",
    value: function uri() {
      var query = this.query || {};
      var schema = this.opts.secure ? "https" : "http";
      var port = ""; // cache busting is forced

      if (false !== this.opts.timestampRequests) {
        query[this.opts.timestampParam] = yeast();
      }

      if (!this.supportsBinary && !query.sid) {
        query.b64 = 1;
      }

      query = parseqs.encode(query); // avoid port if default for schema

      if (this.opts.port && ("https" === schema && Number(this.opts.port) !== 443 || "http" === schema && Number(this.opts.port) !== 80)) {
        port = ":" + this.opts.port;
      } // prepend ? to query


      if (query.length) {
        query = "?" + query;
      }

      var ipv6 = this.opts.hostname.indexOf(":") !== -1;
      return schema + "://" + (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) + port + this.opts.path + query;
    }
  }]);

  return Polling;
}(Transport);

module.exports = Polling;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var globalThis = __webpack_require__(/*! ../globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

var nextTick = function () {
  var isPromiseAvailable = typeof Promise === "function" && typeof Promise.resolve === "function";

  if (isPromiseAvailable) {
    return function (cb) {
      return Promise.resolve().then(cb);
    };
  } else {
    return function (cb) {
      return setTimeout(cb, 0);
    };
  }
}();

module.exports = {
  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,
  usingBrowserWebSocket: true,
  defaultBinaryType: "arraybuffer",
  nextTick: nextTick
};

/***/ }),

/***/ "./node_modules/engine.io-client/lib/transports/websocket.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Transport = __webpack_require__(/*! ../transport */ "./node_modules/engine.io-client/lib/transport.js");

var parser = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-parser/lib/index.js");

var parseqs = __webpack_require__(/*! parseqs */ "./node_modules/parseqs/index.js");

var yeast = __webpack_require__(/*! yeast */ "./node_modules/yeast/index.js");

var _require = __webpack_require__(/*! ../util */ "./node_modules/engine.io-client/lib/util.js"),
    pick = _require.pick;

var _require2 = __webpack_require__(/*! ./websocket-constructor */ "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js"),
    WebSocket = _require2.WebSocket,
    usingBrowserWebSocket = _require2.usingBrowserWebSocket,
    defaultBinaryType = _require2.defaultBinaryType,
    nextTick = _require2.nextTick;

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("engine.io-client:websocket"); // detect ReactNative environment


var isReactNative = typeof navigator !== "undefined" && typeof navigator.product === "string" && navigator.product.toLowerCase() === "reactnative";

var WS = /*#__PURE__*/function (_Transport) {
  _inherits(WS, _Transport);

  var _super = _createSuper(WS);

  /**
   * WebSocket transport constructor.
   *
   * @api {Object} connection options
   * @api public
   */
  function WS(opts) {
    var _this;

    _classCallCheck(this, WS);

    _this = _super.call(this, opts);
    _this.supportsBinary = !opts.forceBase64;
    return _this;
  }
  /**
   * Transport name.
   *
   * @api public
   */


  _createClass(WS, [{
    key: "name",
    get: function get() {
      return "websocket";
    }
    /**
     * Opens socket.
     *
     * @api private
     */

  }, {
    key: "doOpen",
    value: function doOpen() {
      if (!this.check()) {
        // let probe timeout
        return;
      }

      var uri = this.uri();
      var protocols = this.opts.protocols; // React Native only supports the 'headers' option, and will print a warning if anything else is passed

      var opts = isReactNative ? {} : pick(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity");

      if (this.opts.extraHeaders) {
        opts.headers = this.opts.extraHeaders;
      }

      try {
        this.ws = usingBrowserWebSocket && !isReactNative ? protocols ? new WebSocket(uri, protocols) : new WebSocket(uri) : new WebSocket(uri, protocols, opts);
      } catch (err) {
        return this.emit("error", err);
      }

      this.ws.binaryType = this.socket.binaryType || defaultBinaryType;
      this.addEventListeners();
    }
    /**
     * Adds event listeners to the socket
     *
     * @api private
     */

  }, {
    key: "addEventListeners",
    value: function addEventListeners() {
      var _this2 = this;

      this.ws.onopen = function () {
        if (_this2.opts.autoUnref) {
          _this2.ws._socket.unref();
        }

        _this2.onOpen();
      };

      this.ws.onclose = this.onClose.bind(this);

      this.ws.onmessage = function (ev) {
        return _this2.onData(ev.data);
      };

      this.ws.onerror = function (e) {
        return _this2.onError("websocket error", e);
      };
    }
    /**
     * Writes data to socket.
     *
     * @param {Array} array of packets.
     * @api private
     */

  }, {
    key: "write",
    value: function write(packets) {
      var _this3 = this;

      this.writable = false; // encodePacket efficient as it uses WS framing
      // no need for encodePayload

      var _loop = function _loop(i) {
        var packet = packets[i];
        var lastPacket = i === packets.length - 1;
        parser.encodePacket(packet, _this3.supportsBinary, function (data) {
          // always create a new object (GH-437)
          var opts = {};

          if (!usingBrowserWebSocket) {
            if (packet.options) {
              opts.compress = packet.options.compress;
            }

            if (_this3.opts.perMessageDeflate) {
              var len = "string" === typeof data ? Buffer.byteLength(data) : data.length;

              if (len < _this3.opts.perMessageDeflate.threshold) {
                opts.compress = false;
              }
            }
          } // Sometimes the websocket has already been closed but the browser didn't
          // have a chance of informing us about it yet, in that case send will
          // throw an error


          try {
            if (usingBrowserWebSocket) {
              // TypeError is thrown when passing the second argument on Safari
              _this3.ws.send(data);
            } else {
              _this3.ws.send(data, opts);
            }
          } catch (e) {
            debug("websocket closed before onclose event");
          }

          if (lastPacket) {
            // fake drain
            // defer to next tick to allow Socket to clear writeBuffer
            nextTick(function () {
              _this3.writable = true;

              _this3.emit("drain");
            });
          }
        });
      };

      for (var i = 0; i < packets.length; i++) {
        _loop(i);
      }
    }
    /**
     * Called upon close
     *
     * @api private
     */

  }, {
    key: "onClose",
    value: function onClose() {
      Transport.prototype.onClose.call(this);
    }
    /**
     * Closes socket.
     *
     * @api private
     */

  }, {
    key: "doClose",
    value: function doClose() {
      if (typeof this.ws !== "undefined") {
        this.ws.close();
        this.ws = null;
      }
    }
    /**
     * Generates uri for connection.
     *
     * @api private
     */

  }, {
    key: "uri",
    value: function uri() {
      var query = this.query || {};
      var schema = this.opts.secure ? "wss" : "ws";
      var port = ""; // avoid port if default for schema

      if (this.opts.port && ("wss" === schema && Number(this.opts.port) !== 443 || "ws" === schema && Number(this.opts.port) !== 80)) {
        port = ":" + this.opts.port;
      } // append timestamp to URI


      if (this.opts.timestampRequests) {
        query[this.opts.timestampParam] = yeast();
      } // communicate binary support capabilities


      if (!this.supportsBinary) {
        query.b64 = 1;
      }

      query = parseqs.encode(query); // prepend ? to query

      if (query.length) {
        query = "?" + query;
      }

      var ipv6 = this.opts.hostname.indexOf(":") !== -1;
      return schema + "://" + (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) + port + this.opts.path + query;
    }
    /**
     * Feature detection for WebSocket.
     *
     * @return {Boolean} whether this transport is available.
     * @api public
     */

  }, {
    key: "check",
    value: function check() {
      return !!WebSocket && !("__initialize" in WebSocket && this.name === WS.prototype.name);
    }
  }]);

  return WS;
}(Transport);

module.exports = WS;

/***/ }),

/***/ "./node_modules/engine.io-client/lib/util.js":
/*!***************************************************!*\
  !*** ./node_modules/engine.io-client/lib/util.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports.pick = function (obj) {
  for (var _len = arguments.length, attr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    attr[_key - 1] = arguments[_key];
  }

  return attr.reduce(function (acc, k) {
    if (obj.hasOwnProperty(k)) {
      acc[k] = obj[k];
    }

    return acc;
  }, {});
};

/***/ }),

/***/ "./node_modules/engine.io-client/lib/xmlhttprequest.js":
/*!*************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/xmlhttprequest.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// browser shim for xmlhttprequest module
var hasCORS = __webpack_require__(/*! has-cors */ "./node_modules/has-cors/index.js");

var globalThis = __webpack_require__(/*! ./globalThis */ "./node_modules/engine.io-client/lib/globalThis.browser.js");

module.exports = function (opts) {
  var xdomain = opts.xdomain; // scheme must be same when usign XDomainRequest
  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx

  var xscheme = opts.xscheme; // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.
  // https://github.com/Automattic/engine.io-client/pull/217

  var enablesXDR = opts.enablesXDR; // XMLHttpRequest can be disabled on IE

  try {
    if ("undefined" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {
      return new XMLHttpRequest();
    }
  } catch (e) {} // Use XDomainRequest for IE8 if enablesXDR is true
  // because loading bar keeps flashing when using jsonp-polling
  // https://github.com/yujiosaka/socke.io-ie8-loading-example


  try {
    if ("undefined" !== typeof XDomainRequest && !xscheme && enablesXDR) {
      return new XDomainRequest();
    }
  } catch (e) {}

  if (!xdomain) {
    try {
      return new globalThis[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
    } catch (e) {}
  }
};

/***/ }),

/***/ "./node_modules/engine.io-parser/lib/commons.js":
/*!******************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/commons.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var PACKET_TYPES = Object.create(null); // no Map = no polyfill

PACKET_TYPES["open"] = "0";
PACKET_TYPES["close"] = "1";
PACKET_TYPES["ping"] = "2";
PACKET_TYPES["pong"] = "3";
PACKET_TYPES["message"] = "4";
PACKET_TYPES["upgrade"] = "5";
PACKET_TYPES["noop"] = "6";
var PACKET_TYPES_REVERSE = Object.create(null);
Object.keys(PACKET_TYPES).forEach(function (key) {
  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;
});
var ERROR_PACKET = {
  type: "error",
  data: "parser error"
};
module.exports = {
  PACKET_TYPES: PACKET_TYPES,
  PACKET_TYPES_REVERSE: PACKET_TYPES_REVERSE,
  ERROR_PACKET: ERROR_PACKET
};

/***/ }),

/***/ "./node_modules/engine.io-parser/lib/decodePacket.browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/decodePacket.browser.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var _require = __webpack_require__(/*! ./commons */ "./node_modules/engine.io-parser/lib/commons.js"),
    PACKET_TYPES_REVERSE = _require.PACKET_TYPES_REVERSE,
    ERROR_PACKET = _require.ERROR_PACKET;

var withNativeArrayBuffer = typeof ArrayBuffer === "function";
var base64decoder;

if (withNativeArrayBuffer) {
  base64decoder = __webpack_require__(/*! base64-arraybuffer */ "./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js");
}

var decodePacket = function decodePacket(encodedPacket, binaryType) {
  if (typeof encodedPacket !== "string") {
    return {
      type: "message",
      data: mapBinary(encodedPacket, binaryType)
    };
  }

  var type = encodedPacket.charAt(0);

  if (type === "b") {
    return {
      type: "message",
      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)
    };
  }

  var packetType = PACKET_TYPES_REVERSE[type];

  if (!packetType) {
    return ERROR_PACKET;
  }

  return encodedPacket.length > 1 ? {
    type: PACKET_TYPES_REVERSE[type],
    data: encodedPacket.substring(1)
  } : {
    type: PACKET_TYPES_REVERSE[type]
  };
};

var decodeBase64Packet = function decodeBase64Packet(data, binaryType) {
  if (base64decoder) {
    var decoded = base64decoder.decode(data);
    return mapBinary(decoded, binaryType);
  } else {
    return {
      base64: true,
      data: data
    }; // fallback for old browsers
  }
};

var mapBinary = function mapBinary(data, binaryType) {
  switch (binaryType) {
    case "blob":
      return data instanceof ArrayBuffer ? new Blob([data]) : data;

    case "arraybuffer":
    default:
      return data;
    // assuming the data is already an ArrayBuffer
  }
};

module.exports = decodePacket;

/***/ }),

/***/ "./node_modules/engine.io-parser/lib/encodePacket.browser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/encodePacket.browser.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var _require = __webpack_require__(/*! ./commons */ "./node_modules/engine.io-parser/lib/commons.js"),
    PACKET_TYPES = _require.PACKET_TYPES;

var withNativeBlob = typeof Blob === "function" || typeof Blob !== "undefined" && Object.prototype.toString.call(Blob) === "[object BlobConstructor]";
var withNativeArrayBuffer = typeof ArrayBuffer === "function"; // ArrayBuffer.isView method is not defined in IE10

var isView = function isView(obj) {
  return typeof ArrayBuffer.isView === "function" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;
};

var encodePacket = function encodePacket(_ref, supportsBinary, callback) {
  var type = _ref.type,
      data = _ref.data;

  if (withNativeBlob && data instanceof Blob) {
    if (supportsBinary) {
      return callback(data);
    } else {
      return encodeBlobAsBase64(data, callback);
    }
  } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {
    if (supportsBinary) {
      return callback(data instanceof ArrayBuffer ? data : data.buffer);
    } else {
      return encodeBlobAsBase64(new Blob([data]), callback);
    }
  } // plain string


  return callback(PACKET_TYPES[type] + (data || ""));
};

var encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {
  var fileReader = new FileReader();

  fileReader.onload = function () {
    var content = fileReader.result.split(",")[1];
    callback("b" + content);
  };

  return fileReader.readAsDataURL(data);
};

module.exports = encodePacket;

/***/ }),

/***/ "./node_modules/engine.io-parser/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/engine.io-parser/lib/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var encodePacket = __webpack_require__(/*! ./encodePacket */ "./node_modules/engine.io-parser/lib/encodePacket.browser.js");

var decodePacket = __webpack_require__(/*! ./decodePacket */ "./node_modules/engine.io-parser/lib/decodePacket.browser.js");

var SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text

var encodePayload = function encodePayload(packets, callback) {
  // some packets may be added to the array while encoding, so the initial length must be saved
  var length = packets.length;
  var encodedPackets = new Array(length);
  var count = 0;
  packets.forEach(function (packet, i) {
    // force base64 encoding for binary packets
    encodePacket(packet, false, function (encodedPacket) {
      encodedPackets[i] = encodedPacket;

      if (++count === length) {
        callback(encodedPackets.join(SEPARATOR));
      }
    });
  });
};

var decodePayload = function decodePayload(encodedPayload, binaryType) {
  var encodedPackets = encodedPayload.split(SEPARATOR);
  var packets = [];

  for (var i = 0; i < encodedPackets.length; i++) {
    var decodedPacket = decodePacket(encodedPackets[i], binaryType);
    packets.push(decodedPacket);

    if (decodedPacket.type === "error") {
      break;
    }
  }

  return packets;
};

module.exports = {
  protocol: 4,
  encodePacket: encodePacket,
  encodePayload: encodePayload,
  decodePacket: decodePacket,
  decodePayload: decodePayload
};

/***/ }),

/***/ "./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
(function (chars) {
  "use strict";

  exports.encode = function (arraybuffer) {
    var bytes = new Uint8Array(arraybuffer),
        i,
        len = bytes.length,
        base64 = "";

    for (i = 0; i < len; i += 3) {
      base64 += chars[bytes[i] >> 2];
      base64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
      base64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
      base64 += chars[bytes[i + 2] & 63];
    }

    if (len % 3 === 2) {
      base64 = base64.substring(0, base64.length - 1) + "=";
    } else if (len % 3 === 1) {
      base64 = base64.substring(0, base64.length - 2) + "==";
    }

    return base64;
  };

  exports.decode = function (base64) {
    var bufferLength = base64.length * 0.75,
        len = base64.length,
        i,
        p = 0,
        encoded1,
        encoded2,
        encoded3,
        encoded4;

    if (base64[base64.length - 1] === "=") {
      bufferLength--;

      if (base64[base64.length - 2] === "=") {
        bufferLength--;
      }
    }

    var arraybuffer = new ArrayBuffer(bufferLength),
        bytes = new Uint8Array(arraybuffer);

    for (i = 0; i < len; i += 4) {
      encoded1 = chars.indexOf(base64[i]);
      encoded2 = chars.indexOf(base64[i + 1]);
      encoded3 = chars.indexOf(base64[i + 2]);
      encoded4 = chars.indexOf(base64[i + 3]);
      bytes[p++] = encoded1 << 2 | encoded2 >> 4;
      bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
      bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }

    return arraybuffer;
  };
})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");

/***/ }),

/***/ "./node_modules/has-cors/index.js":
/*!****************************************!*\
  !*** ./node_modules/has-cors/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Module exports.
 *
 * Logic borrowed from Modernizr:
 *
 *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js
 */
try {
  module.exports = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();
} catch (err) {
  // if XMLHttp support is disabled in IE then it will throw
  // when trying to create
  module.exports = false;
}

/***/ }),

/***/ "./node_modules/ms/index.js":
/*!**********************************!*\
  !*** ./node_modules/ms/index.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/**
 * Helpers.
 */
var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;
/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function (val, options) {
  options = options || {};

  var type = _typeof(val);

  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options["long"] ? fmtLong(val) : fmtShort(val);
  }

  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));
};
/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */


function parse(str) {
  str = String(str);

  if (str.length > 100) {
    return;
  }

  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);

  if (!match) {
    return;
  }

  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();

  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;

    case 'weeks':
    case 'week':
    case 'w':
      return n * w;

    case 'days':
    case 'day':
    case 'd':
      return n * d;

    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;

    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;

    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;

    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;

    default:
      return undefined;
  }
}
/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */


function fmtShort(ms) {
  var msAbs = Math.abs(ms);

  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }

  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }

  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }

  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }

  return ms + 'ms';
}
/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */


function fmtLong(ms) {
  var msAbs = Math.abs(ms);

  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }

  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }

  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }

  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }

  return ms + ' ms';
}
/**
 * Pluralization helper.
 */


function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}

/***/ }),

/***/ "./node_modules/parseqs/index.js":
/*!***************************************!*\
  !*** ./node_modules/parseqs/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Compiles a querystring
 * Returns string representation of the object
 *
 * @param {Object}
 * @api private
 */
exports.encode = function (obj) {
  var str = '';

  for (var i in obj) {
    if (obj.hasOwnProperty(i)) {
      if (str.length) str += '&';
      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);
    }
  }

  return str;
};
/**
 * Parses a simple querystring into an object
 *
 * @param {String} qs
 * @api private
 */


exports.decode = function (qs) {
  var qry = {};
  var pairs = qs.split('&');

  for (var i = 0, l = pairs.length; i < l; i++) {
    var pair = pairs[i].split('=');
    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
  }

  return qry;
};

/***/ }),

/***/ "./node_modules/parseuri/index.js":
/*!****************************************!*\
  !*** ./node_modules/parseuri/index.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */
var re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;
var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];

module.exports = function parseuri(str) {
  var src = str,
      b = str.indexOf('['),
      e = str.indexOf(']');

  if (b != -1 && e != -1) {
    str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);
  }

  var m = re.exec(str || ''),
      uri = {},
      i = 14;

  while (i--) {
    uri[parts[i]] = m[i] || '';
  }

  if (b != -1 && e != -1) {
    uri.source = src;
    uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');
    uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');
    uri.ipv6uri = true;
  }

  uri.pathNames = pathNames(uri, uri['path']);
  uri.queryKey = queryKey(uri, uri['query']);
  return uri;
};

function pathNames(obj, path) {
  var regx = /\/{2,9}/g,
      names = path.replace(regx, "/").split("/");

  if (path.substr(0, 1) == '/' || path.length === 0) {
    names.splice(0, 1);
  }

  if (path.substr(path.length - 1, 1) == '/') {
    names.splice(names.length - 1, 1);
  }

  return names;
}

function queryKey(uri, query) {
  var data = {};
  query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {
    if ($1) {
      data[$1] = $2;
    }
  });
  return data;
}

/***/ }),

/***/ "./node_modules/socket.io-parser/dist/binary.js":
/*!******************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/binary.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.reconstructPacket = exports.deconstructPacket = void 0;

var is_binary_1 = __webpack_require__(/*! ./is-binary */ "./node_modules/socket.io-parser/dist/is-binary.js");
/**
 * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.
 *
 * @param {Object} packet - socket.io event packet
 * @return {Object} with deconstructed packet and list of buffers
 * @public
 */


function deconstructPacket(packet) {
  var buffers = [];
  var packetData = packet.data;
  var pack = packet;
  pack.data = _deconstructPacket(packetData, buffers);
  pack.attachments = buffers.length; // number of binary 'attachments'

  return {
    packet: pack,
    buffers: buffers
  };
}

exports.deconstructPacket = deconstructPacket;

function _deconstructPacket(data, buffers) {
  if (!data) return data;

  if (is_binary_1.isBinary(data)) {
    var placeholder = {
      _placeholder: true,
      num: buffers.length
    };
    buffers.push(data);
    return placeholder;
  } else if (Array.isArray(data)) {
    var newData = new Array(data.length);

    for (var i = 0; i < data.length; i++) {
      newData[i] = _deconstructPacket(data[i], buffers);
    }

    return newData;
  } else if (_typeof(data) === "object" && !(data instanceof Date)) {
    var _newData = {};

    for (var key in data) {
      if (data.hasOwnProperty(key)) {
        _newData[key] = _deconstructPacket(data[key], buffers);
      }
    }

    return _newData;
  }

  return data;
}
/**
 * Reconstructs a binary packet from its placeholder packet and buffers
 *
 * @param {Object} packet - event packet with placeholders
 * @param {Array} buffers - binary buffers to put in placeholder positions
 * @return {Object} reconstructed packet
 * @public
 */


function reconstructPacket(packet, buffers) {
  packet.data = _reconstructPacket(packet.data, buffers);
  packet.attachments = undefined; // no longer useful

  return packet;
}

exports.reconstructPacket = reconstructPacket;

function _reconstructPacket(data, buffers) {
  if (!data) return data;

  if (data && data._placeholder) {
    return buffers[data.num]; // appropriate buffer (should be natural order anyway)
  } else if (Array.isArray(data)) {
    for (var i = 0; i < data.length; i++) {
      data[i] = _reconstructPacket(data[i], buffers);
    }
  } else if (_typeof(data) === "object") {
    for (var key in data) {
      if (data.hasOwnProperty(key)) {
        data[key] = _reconstructPacket(data[key], buffers);
      }
    }
  }

  return data;
}

/***/ }),

/***/ "./node_modules/socket.io-parser/dist/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;

var Emitter = __webpack_require__(/*! component-emitter */ "./node_modules/component-emitter/index.js");

var binary_1 = __webpack_require__(/*! ./binary */ "./node_modules/socket.io-parser/dist/binary.js");

var is_binary_1 = __webpack_require__(/*! ./is-binary */ "./node_modules/socket.io-parser/dist/is-binary.js");

var debug = __webpack_require__(/*! debug */ "./node_modules/debug/src/browser.js")("socket.io-parser");
/**
 * Protocol version.
 *
 * @public
 */


exports.protocol = 5;
var PacketType;

(function (PacketType) {
  PacketType[PacketType["CONNECT"] = 0] = "CONNECT";
  PacketType[PacketType["DISCONNECT"] = 1] = "DISCONNECT";
  PacketType[PacketType["EVENT"] = 2] = "EVENT";
  PacketType[PacketType["ACK"] = 3] = "ACK";
  PacketType[PacketType["CONNECT_ERROR"] = 4] = "CONNECT_ERROR";
  PacketType[PacketType["BINARY_EVENT"] = 5] = "BINARY_EVENT";
  PacketType[PacketType["BINARY_ACK"] = 6] = "BINARY_ACK";
})(PacketType = exports.PacketType || (exports.PacketType = {}));
/**
 * A socket.io Encoder instance
 */


var Encoder = /*#__PURE__*/function () {
  function Encoder() {
    _classCallCheck(this, Encoder);
  }

  _createClass(Encoder, [{
    key: "encode",
    value:
    /**
     * Encode a packet as a single string if non-binary, or as a
     * buffer sequence, depending on packet type.
     *
     * @param {Object} obj - packet object
     */
    function encode(obj) {
      debug("encoding packet %j", obj);

      if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {
        if (is_binary_1.hasBinary(obj)) {
          obj.type = obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK;
          return this.encodeAsBinary(obj);
        }
      }

      return [this.encodeAsString(obj)];
    }
    /**
     * Encode packet as string.
     */

  }, {
    key: "encodeAsString",
    value: function encodeAsString(obj) {
      // first is type
      var str = "" + obj.type; // attachments if we have them

      if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) {
        str += obj.attachments + "-";
      } // if we have a namespace other than `/`
      // we append it followed by a comma `,`


      if (obj.nsp && "/" !== obj.nsp) {
        str += obj.nsp + ",";
      } // immediately followed by the id


      if (null != obj.id) {
        str += obj.id;
      } // json data


      if (null != obj.data) {
        str += JSON.stringify(obj.data);
      }

      debug("encoded %j as %s", obj, str);
      return str;
    }
    /**
     * Encode packet as 'buffer sequence' by removing blobs, and
     * deconstructing packet into object with placeholders and
     * a list of buffers.
     */

  }, {
    key: "encodeAsBinary",
    value: function encodeAsBinary(obj) {
      var deconstruction = binary_1.deconstructPacket(obj);
      var pack = this.encodeAsString(deconstruction.packet);
      var buffers = deconstruction.buffers;
      buffers.unshift(pack); // add packet info to beginning of data list

      return buffers; // write all the buffers
    }
  }]);

  return Encoder;
}();

exports.Encoder = Encoder;
/**
 * A socket.io Decoder instance
 *
 * @return {Object} decoder
 */

var Decoder = /*#__PURE__*/function (_Emitter) {
  _inherits(Decoder, _Emitter);

  var _super = _createSuper(Decoder);

  function Decoder() {
    _classCallCheck(this, Decoder);

    return _super.call(this);
  }
  /**
   * Decodes an encoded packet string into packet JSON.
   *
   * @param {String} obj - encoded packet
   */


  _createClass(Decoder, [{
    key: "add",
    value: function add(obj) {
      var packet;

      if (typeof obj === "string") {
        packet = this.decodeString(obj);

        if (packet.type === PacketType.BINARY_EVENT || packet.type === PacketType.BINARY_ACK) {
          // binary packet's json
          this.reconstructor = new BinaryReconstructor(packet); // no attachments, labeled binary but no binary data to follow

          if (packet.attachments === 0) {
            _get(_getPrototypeOf(Decoder.prototype), "emit", this).call(this, "decoded", packet);
          }
        } else {
          // non-binary full packet
          _get(_getPrototypeOf(Decoder.prototype), "emit", this).call(this, "decoded", packet);
        }
      } else if (is_binary_1.isBinary(obj) || obj.base64) {
        // raw binary data
        if (!this.reconstructor) {
          throw new Error("got binary data when not reconstructing a packet");
        } else {
          packet = this.reconstructor.takeBinaryData(obj);

          if (packet) {
            // received final buffer
            this.reconstructor = null;

            _get(_getPrototypeOf(Decoder.prototype), "emit", this).call(this, "decoded", packet);
          }
        }
      } else {
        throw new Error("Unknown type: " + obj);
      }
    }
    /**
     * Decode a packet String (JSON data)
     *
     * @param {String} str
     * @return {Object} packet
     */

  }, {
    key: "decodeString",
    value: function decodeString(str) {
      var i = 0; // look up type

      var p = {
        type: Number(str.charAt(0))
      };

      if (PacketType[p.type] === undefined) {
        throw new Error("unknown packet type " + p.type);
      } // look up attachments if type binary


      if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) {
        var start = i + 1;

        while (str.charAt(++i) !== "-" && i != str.length) {}

        var buf = str.substring(start, i);

        if (buf != Number(buf) || str.charAt(i) !== "-") {
          throw new Error("Illegal attachments");
        }

        p.attachments = Number(buf);
      } // look up namespace (if any)


      if ("/" === str.charAt(i + 1)) {
        var _start = i + 1;

        while (++i) {
          var c = str.charAt(i);
          if ("," === c) break;
          if (i === str.length) break;
        }

        p.nsp = str.substring(_start, i);
      } else {
        p.nsp = "/";
      } // look up id


      var next = str.charAt(i + 1);

      if ("" !== next && Number(next) == next) {
        var _start2 = i + 1;

        while (++i) {
          var _c = str.charAt(i);

          if (null == _c || Number(_c) != _c) {
            --i;
            break;
          }

          if (i === str.length) break;
        }

        p.id = Number(str.substring(_start2, i + 1));
      } // look up json data


      if (str.charAt(++i)) {
        var payload = tryParse(str.substr(i));

        if (Decoder.isPayloadValid(p.type, payload)) {
          p.data = payload;
        } else {
          throw new Error("invalid payload");
        }
      }

      debug("decoded %s as %j", str, p);
      return p;
    }
  }, {
    key: "destroy",
    value:
    /**
     * Deallocates a parser's resources
     */
    function destroy() {
      if (this.reconstructor) {
        this.reconstructor.finishedReconstruction();
      }
    }
  }], [{
    key: "isPayloadValid",
    value: function isPayloadValid(type, payload) {
      switch (type) {
        case PacketType.CONNECT:
          return _typeof(payload) === "object";

        case PacketType.DISCONNECT:
          return payload === undefined;

        case PacketType.CONNECT_ERROR:
          return typeof payload === "string" || _typeof(payload) === "object";

        case PacketType.EVENT:
        case PacketType.BINARY_EVENT:
          return Array.isArray(payload) && payload.length > 0;

        case PacketType.ACK:
        case PacketType.BINARY_ACK:
          return Array.isArray(payload);
      }
    }
  }]);

  return Decoder;
}(Emitter);

exports.Decoder = Decoder;

function tryParse(str) {
  try {
    return JSON.parse(str);
  } catch (e) {
    return false;
  }
}
/**
 * A manager of a binary event's 'buffer sequence'. Should
 * be constructed whenever a packet of type BINARY_EVENT is
 * decoded.
 *
 * @param {Object} packet
 * @return {BinaryReconstructor} initialized reconstructor
 */


var BinaryReconstructor = /*#__PURE__*/function () {
  function BinaryReconstructor(packet) {
    _classCallCheck(this, BinaryReconstructor);

    this.packet = packet;
    this.buffers = [];
    this.reconPack = packet;
  }
  /**
   * Method to be called when binary data received from connection
   * after a BINARY_EVENT packet.
   *
   * @param {Buffer | ArrayBuffer} binData - the raw binary data received
   * @return {null | Object} returns null if more binary data is expected or
   *   a reconstructed packet object if all buffers have been received.
   */


  _createClass(BinaryReconstructor, [{
    key: "takeBinaryData",
    value: function takeBinaryData(binData) {
      this.buffers.push(binData);

      if (this.buffers.length === this.reconPack.attachments) {
        // done with buffer list
        var packet = binary_1.reconstructPacket(this.reconPack, this.buffers);
        this.finishedReconstruction();
        return packet;
      }

      return null;
    }
    /**
     * Cleans up binary packet reconstruction variables.
     */

  }, {
    key: "finishedReconstruction",
    value: function finishedReconstruction() {
      this.reconPack = null;
      this.buffers = [];
    }
  }]);

  return BinaryReconstructor;
}();

/***/ }),

/***/ "./node_modules/socket.io-parser/dist/is-binary.js":
/*!*********************************************************!*\
  !*** ./node_modules/socket.io-parser/dist/is-binary.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hasBinary = exports.isBinary = void 0;
var withNativeArrayBuffer = typeof ArrayBuffer === "function";

var isView = function isView(obj) {
  return typeof ArrayBuffer.isView === "function" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer;
};

var toString = Object.prototype.toString;
var withNativeBlob = typeof Blob === "function" || typeof Blob !== "undefined" && toString.call(Blob) === "[object BlobConstructor]";
var withNativeFile = typeof File === "function" || typeof File !== "undefined" && toString.call(File) === "[object FileConstructor]";
/**
 * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.
 *
 * @private
 */

function isBinary(obj) {
  return withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File;
}

exports.isBinary = isBinary;

function hasBinary(obj, toJSON) {
  if (!obj || _typeof(obj) !== "object") {
    return false;
  }

  if (Array.isArray(obj)) {
    for (var i = 0, l = obj.length; i < l; i++) {
      if (hasBinary(obj[i])) {
        return true;
      }
    }

    return false;
  }

  if (isBinary(obj)) {
    return true;
  }

  if (obj.toJSON && typeof obj.toJSON === "function" && arguments.length === 1) {
    return hasBinary(obj.toJSON(), true);
  }

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {
      return true;
    }
  }

  return false;
}

exports.hasBinary = hasBinary;

/***/ }),

/***/ "./node_modules/yeast/index.js":
/*!*************************************!*\
  !*** ./node_modules/yeast/index.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),
    length = 64,
    map = {},
    seed = 0,
    i = 0,
    prev;
/**
 * Return a string representing the specified number.
 *
 * @param {Number} num The number to convert.
 * @returns {String} The string representation of the number.
 * @api public
 */

function encode(num) {
  var encoded = '';

  do {
    encoded = alphabet[num % length] + encoded;
    num = Math.floor(num / length);
  } while (num > 0);

  return encoded;
}
/**
 * Return the integer value specified by the given string.
 *
 * @param {String} str The string to convert.
 * @returns {Number} The integer value represented by the string.
 * @api public
 */


function decode(str) {
  var decoded = 0;

  for (i = 0; i < str.length; i++) {
    decoded = decoded * length + map[str.charAt(i)];
  }

  return decoded;
}
/**
 * Yeast: A tiny growing id generator.
 *
 * @returns {String} A unique id.
 * @api public
 */


function yeast() {
  var now = encode(+new Date());
  if (now !== prev) return seed = 0, prev = now;
  return now + '.' + encode(seed++);
} //
// Map each character to its index.
//


for (; i < length; i++) {
  map[alphabet[i]] = i;
} //
// Expose the `yeast`, `encode` and `decode` functions.
//


yeast.encode = encode;
yeast.decode = decode;
module.exports = yeast;

/***/ })

/******/ });
});
(function() {
  var E;
  var g = window
    , n = document
    , p = function(a) {
      var b = g._gaUserPrefs;
      if (b && b.ioo && b.ioo() || a && !0 === g["ga-disable-" + a])
          return !0;
      try {
          var c = g.external;
          if (c && c._gaUserPrefs && "oo" == c._gaUserPrefs)
              return !0
      } catch (f) {}
      a = [];
      b = n.cookie.split(";");
      c = /^\s*AMP_TOKEN=\s*(.*?)\s*$/;
      for (var d = 0; d < b.length; d++) {
          var e = b[d].match(c);
          e && a.push(e[1])
      }
      for (b = 0; b < a.length; b++)
          if ("$OPT_OUT" == decodeURIComponent(a[b]))
              return !0;
      return !1
  };
  var q = function(a) {
      return encodeURIComponent ? encodeURIComponent(a).replace(/\(/g, "%28").replace(/\)/g, "%29") : a
  }
    , r = /^(www\.)?google(\.com?)?(\.[a-z]{2})?$/
    , u = /(^|\.)doubleclick\.net$/i;
  function Aa(a, b) {
      switch (b) {
      case 0:
          return "" + a;
      case 1:
          return 1 * a;
      case 2:
          return !!a;
      case 3:
          return 1E3 * a
      }
      return a
  }
  function Ba(a) {
      return "function" == typeof a
  }
  function Ca(a) {
      return void 0 != a && -1 < (a.constructor + "").indexOf("String")
  }
  function F(a, b) {
      return void 0 == a || "-" == a && !b || "" == a
  }
  function Da(a) {
      if (!a || "" == a)
          return "";
      for (; a && -1 < " \n\r\t".indexOf(a.charAt(0)); )
          a = a.substring(1);
      for (; a && -1 < " \n\r\t".indexOf(a.charAt(a.length - 1)); )
          a = a.substring(0, a.length - 1);
      return a
  }
  function Ea() {
      return Math.round(2147483647 * Math.random())
  }
  function Fa() {}
  function G(a, b) {
      if (encodeURIComponent instanceof Function)
          return b ? encodeURI(a) : encodeURIComponent(a);
      H(68);
      return escape(a)
  }
  function I(a) {
      a = a.split("+").join(" ");
      if (decodeURIComponent instanceof Function)
          try {
              return decodeURIComponent(a)
          } catch (b) {
              H(17)
          }
      else
          H(68);
      return unescape(a)
  }
  var Ga = function(a, b, c, d) {
      a.addEventListener ? a.addEventListener(b, c, !!d) : a.attachEvent && a.attachEvent("on" + b, c)
  };
  function Ia(a, b) {
      if (a) {
          var c = J.createElement("script");
          c.type = "text/javascript";
          c.async = !0;
          c.src = a;
          c.id = b;
          a = J.getElementsByTagName("script")[0];
          a.parentNode.insertBefore(c, a);
          return c
      }
  }
  function K(a) {
      return a && 0 < a.length ? a[0] : ""
  }
  function L(a) {
      var b = a ? a.length : 0;
      return 0 < b ? a[b - 1] : ""
  }
  var nf = function() {
      this.prefix = "ga.";
      this.values = {}
  };
  nf.prototype.set = function(a, b) {
      this.values[this.prefix + a] = b
  }
  ;
  nf.prototype.get = function(a) {
      return this.values[this.prefix + a]
  }
  ;
  nf.prototype.contains = function(a) {
      return void 0 !== this.get(a)
  }
  ;
  function Ka(a) {
      0 == a.indexOf("www.") && (a = a.substring(4));
      return a.toLowerCase()
  }
  function La(a, b) {
      var c = {
          url: a,
          protocol: "http",
          host: "",
          path: "",
          R: new nf,
          anchor: ""
      };
      if (!a)
          return c;
      var d = a.indexOf("://");
      0 <= d && (c.protocol = a.substring(0, d),
      a = a.substring(d + 3));
      d = a.search("/|\\?|#");
      if (0 <= d)
          c.host = a.substring(0, d).toLowerCase(),
          a = a.substring(d);
      else
          return c.host = a.toLowerCase(),
          c;
      d = a.indexOf("#");
      0 <= d && (c.anchor = a.substring(d + 1),
      a = a.substring(0, d));
      d = a.indexOf("?");
      0 <= d && (Na(c.R, a.substring(d + 1)),
      a = a.substring(0, d));
      c.anchor && b && Na(c.R, c.anchor);
      a && "/" == a.charAt(0) && (a = a.substring(1));
      c.path = a;
      return c
  }
  function Oa(a, b) {
      function c(a) {
          var b = (a.hostname || "").split(":")[0].toLowerCase()
            , c = (a.protocol || "").toLowerCase();
          c = 1 * a.port || ("http:" == c ? 80 : "https:" == c ? 443 : "");
          a = a.pathname || "";
          0 == a.indexOf("/") || (a = "/" + a);
          return [b, "" + c, a]
      }
      b = b || J.createElement("a");
      b.href = J.location.href;
      var d = (b.protocol || "").toLowerCase()
        , e = c(b)
        , f = b.search || ""
        , Be = d + "//" + e[0] + (e[1] ? ":" + e[1] : "");
      0 == a.indexOf("//") ? a = d + a : 0 == a.indexOf("/") ? a = Be + a : a && 0 != a.indexOf("?") ? 0 > a.split("/")[0].indexOf(":") && (a = Be + e[2].substring(0, e[2].lastIndexOf("/")) + "/" + a) : a = Be + e[2] + (a || f);
      b.href = a;
      d = c(b);
      return {
          protocol: (b.protocol || "").toLowerCase(),
          host: d[0],
          port: d[1],
          path: d[2],
          query: b.search || "",
          url: a || ""
      }
  }
  function Na(a, b) {
      function c(b, c) {
          a.contains(b) || a.set(b, []);
          a.get(b).push(c)
      }
      b = Da(b).split("&");
      for (var d = 0; d < b.length; d++)
          if (b[d]) {
              var e = b[d].indexOf("=");
              0 > e ? c(b[d], "1") : c(b[d].substring(0, e), b[d].substring(e + 1))
          }
  }
  function Pa(a, b) {
      return F(a) || "[" == a.charAt(0) && "]" == a.charAt(a.length - 1) ? "-" : a.indexOf(J.domain + (b && "/" != b ? b : "")) == (0 == a.indexOf("http://") ? 7 : 0 == a.indexOf("https://") ? 8 : 0) ? "0" : a
  }
  ;var Qa = 0;
  function Ra(a, b, c) {
      1 <= Qa || 1 <= 100 * Math.random() || ld() || (a = ["utmt=error", "utmerr=" + a, "utmwv=5.7.2", "utmn=" + Ea(), "utmsp=1"],
      b && a.push("api=" + b),
      c && a.push("msg=" + G(c.substring(0, 100))),
      M.w && a.push("aip=1"),
      Sa(a.join("&")),
      Qa++)
  }
  ;var Ta = 0
    , Ua = {};
  function N(a) {
      return Va("x" + Ta++, a)
  }
  function Va(a, b) {
      Ua[a] = !!b;
      return a
  }
  var Wa = N()
    , Xa = Va("anonymizeIp")
    , Ya = N()
    , $a = N()
    , ab = N()
    , bb = N()
    , O = N()
    , P = N()
    , cb = N()
    , db = N()
    , eb = N()
    , fb = N()
    , gb = N()
    , hb = N()
    , ib = N()
    , jb = N()
    , kb = N()
    , lb = N()
    , nb = N()
    , ob = N()
    , pb = N()
    , qb = N()
    , rb = N()
    , sb = N()
    , tb = N()
    , ub = N()
    , vb = N()
    , wb = N()
    , xb = N()
    , yb = N()
    , zb = N()
    , Ab = N()
    , Bb = N()
    , Cb = N()
    , Db = N()
    , Eb = N()
    , Fb = N(!0)
    , Gb = Va("currencyCode")
    , v = Va("storeGac")
    , Hb = Va("page")
    , Ib = Va("title")
    , Jb = N()
    , Kb = N()
    , Lb = N()
    , Mb = N()
    , Nb = N()
    , Ob = N()
    , Pb = N()
    , Qb = N()
    , Rb = N()
    , Q = N(!0)
    , Sb = N(!0)
    , Tb = N(!0)
    , Ub = N(!0)
    , Vb = N(!0)
    , Wb = N(!0)
    , Zb = N(!0)
    , $b = N(!0)
    , ac = N(!0)
    , bc = N(!0)
    , cc = N(!0)
    , R = N(!0)
    , dc = N(!0)
    , ec = N(!0)
    , fc = N(!0)
    , gc = N(!0)
    , hc = N(!0)
    , ic = N(!0)
    , jc = N(!0)
    , S = N(!0)
    , kc = N(!0)
    , lc = N(!0)
    , mc = N(!0)
    , nc = N(!0)
    , oc = N(!0)
    , pc = N(!0)
    , qc = N(!0)
    , rc = Va("campaignParams")
    , sc = N()
    , tc = Va("hitCallback")
    , uc = N();
  N();
  var vc = N()
    , wc = N()
    , xc = N()
    , yc = N()
    , zc = N()
    , Ac = N()
    , Bc = N()
    , Cc = N()
    , Dc = N()
    , Ec = N()
    , Fc = N()
    , Gc = N()
    , Hc = N()
    , Ic = N();
  N();
  var Mc = N()
    , Nc = N()
    , Yb = N()
    , Jc = N()
    , Kc = N()
    , Lc = Va("utmtCookieName")
    , Cd = Va("displayFeatures")
    , Oc = N()
    , of = Va("gtmid")
    , Oe = Va("uaName")
    , Pe = Va("uaDomain")
    , Qe = Va("uaPath")
    , pf = Va("linkid")
    , w = N()
    , x = N()
    , y = N()
    , z = N();
  var Re = function() {
      function a(a, c, d) {
          T(qf.prototype, a, c, d)
      }
      a("_createTracker", qf.prototype.hb, 55);
      a("_getTracker", qf.prototype.oa, 0);
      a("_getTrackerByName", qf.prototype.u, 51);
      a("_getTrackers", qf.prototype.pa, 130);
      a("_anonymizeIp", qf.prototype.aa, 16);
      a("_forceSSL", qf.prototype.la, 125);
      a("_getPlugin", Pc, 120)
  }
    , Se = function() {
      function a(a, c, d) {
          T(U.prototype, a, c, d)
      }
      Qc("_getName", $a, 58);
      Qc("_getAccount", Wa, 64);
      Qc("_visitCode", Q, 54);
      Qc("_getClientInfo", ib, 53, 1);
      Qc("_getDetectTitle", lb, 56, 1);
      Qc("_getDetectFlash", jb, 65, 1);
      Qc("_getLocalGifPath", wb, 57);
      Qc("_getServiceMode", xb, 59);
      V("_setClientInfo", ib, 66, 2);
      V("_setAccount", Wa, 3);
      V("_setNamespace", Ya, 48);
      V("_setAllowLinker", fb, 11, 2);
      V("_setDetectFlash", jb, 61, 2);
      V("_setDetectTitle", lb, 62, 2);
      V("_setLocalGifPath", wb, 46, 0);
      V("_setLocalServerMode", xb, 92, void 0, 0);
      V("_setRemoteServerMode", xb, 63, void 0, 1);
      V("_setLocalRemoteServerMode", xb, 47, void 0, 2);
      V("_setSampleRate", vb, 45, 1);
      V("_setCampaignTrack", kb, 36, 2);
      V("_setAllowAnchor", gb, 7, 2);
      V("_setCampNameKey", ob, 41);
      V("_setCampContentKey", tb, 38);
      V("_setCampIdKey", nb, 39);
      V("_setCampMediumKey", rb, 40);
      V("_setCampNOKey", ub, 42);
      V("_setCampSourceKey", qb, 43);
      V("_setCampTermKey", sb, 44);
      V("_setCampCIdKey", pb, 37);
      V("_setCookiePath", P, 9, 0);
      V("_setMaxCustomVariables", yb, 0, 1);
      V("_setVisitorCookieTimeout", cb, 28, 1);
      V("_setSessionCookieTimeout", db, 26, 1);
      V("_setCampaignCookieTimeout", eb, 29, 1);
      V("_setReferrerOverride", Jb, 49);
      V("_setSiteSpeedSampleRate", Dc, 132);
      V("_storeGac", v, 143);
      a("_trackPageview", U.prototype.Fa, 1);
      a("_trackEvent", U.prototype.F, 4);
      a("_trackPageLoadTime", U.prototype.Ea, 100);
      a("_trackSocial", U.prototype.Ga, 104);
      a("_trackTrans", U.prototype.Ia, 18);
      a("_sendXEvent", U.prototype.ib, 78);
      a("_createEventTracker", U.prototype.ia, 74);
      a("_getVersion", U.prototype.qa, 60);
      a("_setDomainName", U.prototype.B, 6);
      a("_setAllowHash", U.prototype.va, 8);
      a("_getLinkerUrl", U.prototype.na, 52);
      a("_link", U.prototype.link, 101);
      a("_linkByPost", U.prototype.ua, 102);
      a("_setTrans", U.prototype.za, 20);
      a("_addTrans", U.prototype.$, 21);
      a("_addItem", U.prototype.Y, 19);
      a("_clearTrans", U.prototype.ea, 105);
      a("_setTransactionDelim", U.prototype.Aa, 82);
      a("_setCustomVar", U.prototype.wa, 10);
      a("_deleteCustomVar", U.prototype.ka, 35);
      a("_getVisitorCustomVar", U.prototype.ra, 50);
      a("_setXKey", U.prototype.Ca, 83);
      a("_setXValue", U.prototype.Da, 84);
      a("_getXKey", U.prototype.sa, 76);
      a("_getXValue", U.prototype.ta, 77);
      a("_clearXKey", U.prototype.fa, 72);
      a("_clearXValue", U.prototype.ga, 73);
      a("_createXObj", U.prototype.ja, 75);
      a("_addIgnoredOrganic", U.prototype.W, 15);
      a("_clearIgnoredOrganic", U.prototype.ba, 97);
      a("_addIgnoredRef", U.prototype.X, 31);
      a("_clearIgnoredRef", U.prototype.ca, 32);
      a("_addOrganic", U.prototype.Z, 14);
      a("_clearOrganic", U.prototype.da, 70);
      a("_cookiePathCopy", U.prototype.ha, 30);
      a("_get", U.prototype.ma, 106);
      a("_set", U.prototype.xa, 107);
      a("_addEventListener", U.prototype.addEventListener, 108);
      a("_removeEventListener", U.prototype.removeEventListener, 109);
      a("_addDevId", U.prototype.V);
      a("_getPlugin", Pc, 122);
      a("_setPageGroup", U.prototype.ya, 126);
      a("_trackTiming", U.prototype.Ha, 124);
      a("_initData", U.prototype.initData, 2);
      a("_setVar", U.prototype.Ba, 22);
      V("_setSessionTimeout", db, 27, 3);
      V("_setCookieTimeout", eb, 25, 3);
      V("_setCookiePersistence", cb, 24, 1);
      a("_setAutoTrackOutbound", Fa, 79);
      a("_setTrackOutboundSubdomains", Fa, 81);
      a("_setHrefExamineLimit", Fa, 80)
  };
  function Pc(a) {
      var b = this.plugins_;
      if (b)
          return b.get(a)
  }
  var T = function(a, b, c, d) {
      a[b] = function() {
          try {
              return void 0 != d && H(d),
              c.apply(this, arguments)
          } catch (e) {
              throw Ra("exc", b, e && e.name),
              e;
          }
      }
  }
    , Qc = function(a, b, c, d) {
      U.prototype[a] = function() {
          try {
              return H(c),
              Aa(this.a.get(b), d)
          } catch (e) {
              throw Ra("exc", a, e && e.name),
              e;
          }
      }
  }
    , V = function(a, b, c, d, e) {
      U.prototype[a] = function(f) {
          try {
              H(c),
              void 0 == e ? this.a.set(b, Aa(f, d)) : this.a.set(b, e)
          } catch (Be) {
              throw Ra("exc", a, Be && Be.name),
              Be;
          }
      }
  }
    , Te = function(a, b) {
      return {
          type: b,
          target: a,
          stopPropagation: function() {
              throw "aborted";
          }
      }
  };
  var Rc = new RegExp(/(^|\.)doubleclick\.net$/i)
    , Sc = function(a, b) {
      return Rc.test(J.location.hostname) ? !0 : "/" !== b ? !1 : 0 != a.indexOf("www.google.") && 0 != a.indexOf(".google.") && 0 != a.indexOf("google.") || -1 < a.indexOf("google.org") ? !1 : !0
  }
    , Tc = function(a) {
      var b = a.get(bb)
        , c = a.c(P, "/");
      Sc(b, c) && a.stopPropagation()
  };
  var Zc = function() {
      var a = {}
        , b = {}
        , c = new Uc;
      this.g = function(a, b) {
          c.add(a, b)
      }
      ;
      var d = new Uc;
      this.v = function(a, b) {
          d.add(a, b)
      }
      ;
      var e = !1
        , f = !1
        , Be = !0;
      this.T = function() {
          e = !0
      }
      ;
      this.j = function(a) {
          this.load();
          this.set(sc, a, !0);
          a = new Vc(this);
          e = !1;
          d.cb(this);
          e = !0;
          b = {};
          this.store();
          a.Ja()
      }
      ;
      this.load = function() {
          e && (e = !1,
          this.Ka(),
          Wc(this),
          f || (f = !0,
          c.cb(this),
          Xc(this),
          Wc(this)),
          e = !0)
      }
      ;
      this.store = function() {
          e && (f ? (e = !1,
          Xc(this),
          e = !0) : this.load())
      }
      ;
      this.get = function(c) {
          Ua[c] && this.load();
          return void 0 !== b[c] ? b[c] : a[c]
      }
      ;
      this.set = function(c, d, e) {
          Ua[c] && this.load();
          e ? b[c] = d : a[c] = d;
          Ua[c] && this.store()
      }
      ;
      this.Za = function(b) {
          a[b] = this.b(b, 0) + 1
      }
      ;
      this.b = function(a, b) {
          a = this.get(a);
          return void 0 == a || "" === a ? b : 1 * a
      }
      ;
      this.c = function(a, b) {
          a = this.get(a);
          return void 0 == a ? b : a + ""
      }
      ;
      this.Ka = function() {
          if (Be) {
              var b = this.c(bb, "")
                , c = this.c(P, "/");
              Sc(b, c) || (a[O] = a[hb] && "" != b ? Yc(b) : 1,
              Be = !1)
          }
      }
  };
  Zc.prototype.stopPropagation = function() {
      throw "aborted";
  }
  ;
  var Vc = function(a) {
      var b = this;
      this.fb = 0;
      var c = a.get(tc);
      this.Ua = function() {
          0 < b.fb && c && (b.fb--,
          b.fb || c())
      }
      ;
      this.Ja = function() {
          !b.fb && c && setTimeout(c, 10)
      }
      ;
      a.set(uc, b, !0)
  };
  function $c(a, b) {
      b = b || [];
      for (var c = 0; c < b.length; c++) {
          var d = b[c];
          if ("" + a == d || 0 == d.indexOf(a + "."))
              return d
      }
      return "-"
  }
  var bd = function(a, b, c) {
      c = c ? "" : a.c(O, "1");
      b = b.split(".");
      if (6 !== b.length || ad(b[0], c))
          return !1;
      c = 1 * b[1];
      var d = 1 * b[2]
        , e = 1 * b[3]
        , f = 1 * b[4];
      b = 1 * b[5];
      if (!(0 <= c && 0 < d && 0 < e && 0 < f && 0 <= b))
          return !1;
      a.set(Q, c);
      a.set(Vb, d);
      a.set(Wb, e);
      a.set(Zb, f);
      a.set($b, b);
      return !0
  }
    , cd = function(a) {
      var b = a.get(Q)
        , c = a.get(Vb)
        , d = a.get(Wb)
        , e = a.get(Zb)
        , f = a.b($b, 1);
      return [a.b(O, 1), void 0 != b ? b : "-", c || "-", d || "-", e || "-", f].join(".")
  }
    , dd = function(a) {
      return [a.b(O, 1), a.b(cc, 0), a.b(R, 1), a.b(dc, 0)].join(".")
  }
    , ed = function(a, b, c) {
      c = c ? "" : a.c(O, "1");
      var d = b.split(".");
      if (4 !== d.length || ad(d[0], c))
          d = null;
      a.set(cc, d ? 1 * d[1] : 0);
      a.set(R, d ? 1 * d[2] : 10);
      a.set(dc, d ? 1 * d[3] : a.get(ab));
      return null != d || !ad(b, c)
  }
    , fd = function(a, b) {
      var c = G(a.c(Tb, ""))
        , d = []
        , e = a.get(Fb);
      if (!b && e) {
          for (b = 0; b < e.length; b++) {
              var f = e[b];
              f && 1 == f.scope && d.push(b + "=" + G(f.name) + "=" + G(f.value) + "=1")
          }
          0 < d.length && (c += "|" + d.join("^"))
      }
      return c ? a.b(O, 1) + "." + c : null
  }
    , gd = function(a, b, c) {
      c = c ? "" : a.c(O, "1");
      b = b.split(".");
      if (2 > b.length || ad(b[0], c))
          return !1;
      b = b.slice(1).join(".").split("|");
      0 < b.length && a.set(Tb, I(b[0]));
      if (1 >= b.length)
          return !0;
      b = b[1].split(-1 == b[1].indexOf(",") ? "^" : ",");
      for (c = 0; c < b.length; c++) {
          var d = b[c].split("=");
          if (4 == d.length) {
              var e = {};
              e.name = I(d[1]);
              e.value = I(d[2]);
              e.scope = 1;
              a.get(Fb)[d[0]] = e
          }
      }
      return !0
  }
    , hd = function(a, b) {
      return (b = Ue(a, b)) ? [a.b(O, 1), a.b(ec, 0), a.b(fc, 1), a.b(gc, 1), b].join(".") : ""
  }
    , Ue = function(a) {
      function b(b, e) {
          F(a.get(b)) || (b = a.c(b, ""),
          b = b.split(" ").join("%20"),
          b = b.split("+").join("%20"),
          c.push(e + "=" + b))
      }
      var c = [];
      b(ic, "utmcid");
      b(nc, "utmcsr");
      b(S, "utmgclid");
      b(kc, "utmgclsrc");
      b(lc, "utmdclid");
      b(mc, "utmdsid");
      b(jc, "utmccn");
      b(oc, "utmcmd");
      b(pc, "utmctr");
      b(qc, "utmcct");
      return c.join("|")
  }
    , id = function(a, b, c) {
      c = c ? "" : a.c(O, "1");
      b = b.split(".");
      if (5 > b.length || ad(b[0], c))
          return a.set(ec, void 0),
          a.set(fc, void 0),
          a.set(gc, void 0),
          a.set(ic, void 0),
          a.set(jc, void 0),
          a.set(nc, void 0),
          a.set(oc, void 0),
          a.set(pc, void 0),
          a.set(qc, void 0),
          a.set(S, void 0),
          a.set(kc, void 0),
          a.set(lc, void 0),
          a.set(mc, void 0),
          !1;
      a.set(ec, 1 * b[1]);
      a.set(fc, 1 * b[2]);
      a.set(gc, 1 * b[3]);
      Ve(a, b.slice(4).join("."));
      return !0
  }
    , Ve = function(a, b) {
      function c(a) {
          return (a = b.match(a + "=(.*?)(?:\\|utm|$)")) && 2 == a.length ? a[1] : void 0
      }
      function d(b, c) {
          c ? (c = e ? I(c) : c.split("%20").join(" "),
          a.set(b, c)) : a.set(b, void 0)
      }
      -1 == b.indexOf("=") && (b = I(b));
      var e = "2" == c("utmcvr");
      d(ic, c("utmcid"));
      d(jc, c("utmccn"));
      d(nc, c("utmcsr"));
      d(oc, c("utmcmd"));
      d(pc, c("utmctr"));
      d(qc, c("utmcct"));
      d(S, c("utmgclid"));
      d(kc, c("utmgclsrc"));
      d(lc, c("utmdclid"));
      d(mc, c("utmdsid"))
  }
    , ad = function(a, b) {
      return b ? a != b : !/^\d+$/.test(a)
  };
  var Uc = function() {
      this.filters = []
  };
  Uc.prototype.add = function(a, b) {
      this.filters.push({
          name: a,
          s: b
      })
  }
  ;
  Uc.prototype.cb = function(a) {
      try {
          for (var b = 0; b < this.filters.length; b++)
              this.filters[b].s.call(W, a)
      } catch (c) {}
  }
  ;
  function jd(a) {
      100 != a.get(vb) && a.get(Q) % 1E4 >= 100 * a.get(vb) && a.stopPropagation()
  }
  function kd(a) {
      ld(a.get(Wa)) && a.stopPropagation()
  }
  function md(a) {
      "file:" == J.location.protocol && a.stopPropagation()
  }
  function Ge(a) {
      He() && a.stopPropagation()
  }
  function nd(a) {
      a.get(Ib) || a.set(Ib, J.title, !0);
      a.get(Hb) || a.set(Hb, J.location.pathname + J.location.search, !0)
  }
  function lf(a) {
      a.get(Wa) && "UA-XXXXX-X" != a.get(Wa) || a.stopPropagation()
  }
  ;var od = new function() {
      var a = [];
      this.set = function(b) {
          a[b] = !0
      }
      ;
      this.encode = function() {
          for (var b = [], c = 0; c < a.length; c++)
              a[c] && (b[Math.floor(c / 6)] ^= 1 << c % 6);
          for (c = 0; c < b.length; c++)
              b[c] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b[c] || 0);
          return b.join("") + "~"
      }
  }
  ;
  function H(a) {
      od.set(a)
  }
  ;var W = window
    , J = document
    , ld = function(a) {
      var b = W._gaUserPrefs;
      if (b && b.ioo && b.ioo() || a && !0 === W["ga-disable-" + a])
          return !0;
      try {
          var c = W.external;
          if (c && c._gaUserPrefs && "oo" == c._gaUserPrefs)
              return !0
      } catch (d) {}
      return !1
  }
    , He = function() {
      return W.navigator && "preview" == W.navigator.loadPurpose
  }
    , We = function(a, b) {
      setTimeout(a, b)
  }
    , pd = function(a) {
      var b = []
        , c = J.cookie.split(";");
      a = new RegExp("^\\s*" + a + "=\\s*(.*?)\\s*$");
      for (var d = 0; d < c.length; d++) {
          var e = c[d].match(a);
          e && b.push(e[1])
      }
      return b
  }
    , X = function(a, b, c, d, e, f) {
      e = ld(e) ? !1 : Sc(d, c) ? !1 : He() ? !1 : !0;
      e && ((b = mf(b)) && 2E3 < b.length && (b = b.substring(0, 2E3),
      H(69)),
      a = a + "=" + b + "; path=" + c + "; ",
      f && (a += "expires=" + (new Date((new Date).getTime() + f)).toGMTString() + "; "),
      d && (a += "domain=" + d + ";"),
      J.cookie = a)
  }
    , mf = function(a) {
      if (!a)
          return a;
      var b = a.indexOf(";");
      -1 != b && (a = a.substring(0, b),
      H(141));
      if (!(0 <= W.navigator.userAgent.indexOf("Firefox")))
          return a;
      a = a.replace(/\n|\r/g, " ");
      b = 0;
      for (var c = a.length; b < c; ++b) {
          var d = a.charCodeAt(b) & 255;
          if (10 == d || 13 == d)
              a = a.substring(0, b) + "?" + a.substring(b + 1)
      }
      return a
  };
  var A, B = /^.*Version\/?(\d+)[^\d].*$/i;
  var qd, rd, sd = function() {
      if (!qd) {
          var a = {}
            , b = W.navigator
            , c = W.screen;
          a.jb = c ? c.width + "x" + c.height : "-";
          a.P = c ? c.colorDepth + "-bit" : "-";
          a.language = (b && (b.language || b.browserLanguage) || "-").toLowerCase();
          a.javaEnabled = b && b.javaEnabled() ? 1 : 0;
          a.characterSet = J.characterSet || J.charset || "-";
          try {
              var d = J.documentElement
                , e = J.body
                , f = e && e.clientWidth && e.clientHeight;
              b = [];
              d && d.clientWidth && d.clientHeight && ("CSS1Compat" === J.compatMode || !f) ? b = [d.clientWidth, d.clientHeight] : f && (b = [e.clientWidth, e.clientHeight]);
              var Be = 0 >= b[0] || 0 >= b[1] ? "" : b.join("x");
              a.Wa = Be
          } catch (k) {
              H(135)
          }
          qd = a
      }
  }, td = function() {
      sd();
      var a = qd
        , b = W.navigator;
      a = b.appName + b.version + a.language + b.platform + b.userAgent + a.javaEnabled + a.jb + a.P + (J.cookie ? J.cookie : "") + (J.referrer ? J.referrer : "");
      b = a.length;
      for (var c = W.history.length; 0 < c; )
          a += c-- ^ b++;
      return Yc(a)
  }, ud = function(a) {
      sd();
      var b = qd;
      a.set(Lb, b.jb);
      a.set(Mb, b.P);
      a.set(Pb, b.language);
      a.set(Qb, b.characterSet);
      a.set(Nb, b.javaEnabled);
      a.set(Rb, b.Wa);
      if (a.get(ib) && a.get(jb)) {
          if (!(b = rd)) {
              var c, d;
              var e = "ShockwaveFlash";
              if ((b = (b = W.navigator) ? b.plugins : void 0) && 0 < b.length)
                  for (c = 0; c < b.length && !d; c++)
                      e = b[c],
                      -1 < e.name.indexOf("Shockwave Flash") && (d = e.description.split("Shockwave Flash ")[1]);
              else {
                  e = e + "." + e;
                  try {
                      c = new ActiveXObject(e + ".7"),
                      d = c.GetVariable("$version")
                  } catch (f) {}
                  if (!d)
                      try {
                          c = new ActiveXObject(e + ".6"),
                          d = "WIN 6,0,21,0",
                          c.AllowScriptAccess = "always",
                          d = c.GetVariable("$version")
                      } catch (f) {}
                  if (!d)
                      try {
                          c = new ActiveXObject(e),
                          d = c.GetVariable("$version")
                      } catch (f) {}
                  d && (d = d.split(" ")[1].split(","),
                  d = d[0] + "." + d[1] + " r" + d[2])
              }
              b = d ? d : "-"
          }
          rd = b;
          a.set(Ob, rd)
      } else
          a.set(Ob, "-")
  };
  var vd = function(a) {
      if (Ba(a))
          this.s = a;
      else {
          var b = a[0]
            , c = b.lastIndexOf(":")
            , d = b.lastIndexOf(".");
          this.h = this.i = this.l = "";
          -1 == c && -1 == d ? this.h = b : -1 == c && -1 != d ? (this.i = b.substring(0, d),
          this.h = b.substring(d + 1)) : -1 != c && -1 == d ? (this.l = b.substring(0, c),
          this.h = b.substring(c + 1)) : c > d ? (this.i = b.substring(0, d),
          this.l = b.substring(d + 1, c),
          this.h = b.substring(c + 1)) : (this.i = b.substring(0, d),
          this.h = b.substring(d + 1));
          this.Xa = a.slice(1);
          this.Ma = !this.l && "_require" == this.h;
          this.J = !this.i && !this.l && "_provide" == this.h
      }
  }
    , Y = function() {
      T(Y.prototype, "push", Y.prototype.push, 5);
      T(Y.prototype, "_getPlugin", Pc, 121);
      T(Y.prototype, "_createAsyncTracker", Y.prototype.Sa, 33);
      T(Y.prototype, "_getAsyncTracker", Y.prototype.Ta, 34);
      this.I = new nf;
      this.eb = []
  };
  E = Y.prototype;
  E.Na = function(a, b, c) {
      var d = this.I.get(a);
      if (!Ba(d))
          return !1;
      b.plugins_ = b.plugins_ || new nf;
      b.plugins_.set(a, new d(b,c || {}));
      return !0
  }
  ;
  E.push = function(a) {
      var b = Z.Va.apply(this, arguments);
      b = Z.eb.concat(b);
      for (Z.eb = []; 0 < b.length && !Z.O(b[0]) && !(b.shift(),
      0 < Z.eb.length); )
          ;
      Z.eb = Z.eb.concat(b);
      return 0
  }
  ;
  E.Va = function(a) {
      for (var b = [], c = 0; c < arguments.length; c++)
          try {
              var d = new vd(arguments[c]);
              d.J ? this.O(d) : b.push(d)
          } catch (e) {}
      return b
  }
  ;
  E.O = function(a) {
      try {
          if (a.s)
              a.s.apply(W);
          else if (a.J)
              this.I.set(a.Xa[0], a.Xa[1]);
          else {
              var b = "_gat" == a.i ? M : "_gaq" == a.i ? Z : M.u(a.i);
              if (a.Ma) {
                  if (!this.Na(a.Xa[0], b, a.Xa[2])) {
                      if (!a.Pa) {
                          var c = Oa("" + a.Xa[1]);
                          var d = c.protocol
                            , e = J.location.protocol;
                          var f;
                          if (f = "https:" == d || d == e ? !0 : "http:" != d ? !1 : "http:" == e)
                              a: {
                                  var Be = Oa(J.location.href);
                                  if (!(c.query || 0 <= c.url.indexOf("?") || 0 <= c.path.indexOf("://") || c.host == Be.host && c.port == Be.port)) {
                                      var k = "http:" == c.protocol ? 80 : 443
                                        , Ja = M.S;
                                      for (b = 0; b < Ja.length; b++)
                                          if (c.host == Ja[b][0] && (c.port || k) == (Ja[b][1] || k) && 0 == c.path.indexOf(Ja[b][2])) {
                                              f = !0;
                                              break a
                                          }
                                  }
                                  f = !1
                              }
                          f && !ld() && (a.Pa = Ia(c.url))
                      }
                      return !0
                  }
              } else
                  a.l && (b = b.plugins_.get(a.l)),
                  b[a.h].apply(b, a.Xa)
          }
      } catch (t) {}
  }
  ;
  E.Sa = function(a, b) {
      return M.hb(a, b || "")
  }
  ;
  E.Ta = function(a) {
      return M.u(a)
  }
  ;
  var yd = function() {
      function a(a, b, c, d) {
          void 0 == f[a] && (f[a] = {});
          void 0 == f[a][b] && (f[a][b] = []);
          f[a][b][c] = d
      }
      function b(a, b, c) {
          if (void 0 != f[a] && void 0 != f[a][b])
              return f[a][b][c]
      }
      function c(a, b) {
          if (void 0 != f[a] && void 0 != f[a][b]) {
              f[a][b] = void 0;
              b = !0;
              var c;
              for (c = 0; c < Be.length; c++)
                  if (void 0 != f[a][Be[c]]) {
                      b = !1;
                      break
                  }
              b && (f[a] = void 0)
          }
      }
      function d(a) {
          var b = "", c = !1, d;
          for (d = 0; d < Be.length; d++) {
              var e = a[Be[d]];
              if (void 0 != e) {
                  c && (b += Be[d]);
                  var f = e
                    , Ja = [];
                  for (e = 0; e < f.length; e++)
                      if (void 0 != f[e]) {
                          c = "";
                          1 != e && void 0 == f[e - 1] && (c += e.toString() + "!");
                          var fa, Ke = f[e], Le = "";
                          for (fa = 0; fa < Ke.length; fa++) {
                              var Me = Ke.charAt(fa);
                              var m = k[Me];
                              Le += void 0 != m ? m : Me
                          }
                          c += Le;
                          Ja.push(c)
                      }
                  b += "(" + Ja.join("*") + ")";
                  c = !1
              } else
                  c = !0
          }
          return b
      }
      var e = this
        , f = []
        , Be = ["k", "v"]
        , k = {
          "'": "'0",
          ")": "'1",
          "*": "'2",
          "!": "'3"
      };
      e.Ra = function(a) {
          return void 0 != f[a]
      }
      ;
      e.A = function() {
          for (var a = "", b = 0; b < f.length; b++)
              void 0 != f[b] && (a += b.toString() + d(f[b]));
          return a
      }
      ;
      e.Qa = function(a) {
          if (void 0 == a)
              return e.A();
          for (var b = a.A(), c = 0; c < f.length; c++)
              void 0 == f[c] || a.Ra(c) || (b += c.toString() + d(f[c]));
          return b
      }
      ;
      e.f = function(b, c, d) {
          if (!wd(d))
              return !1;
          a(b, "k", c, d);
          return !0
      }
      ;
      e.o = function(b, c, d) {
          if (!xd(d))
              return !1;
          a(b, "v", c, d.toString());
          return !0
      }
      ;
      e.getKey = function(a, c) {
          return b(a, "k", c)
      }
      ;
      e.N = function(a, c) {
          return b(a, "v", c)
      }
      ;
      e.L = function(a) {
          c(a, "k")
      }
      ;
      e.M = function(a) {
          c(a, "v")
      }
      ;
      T(e, "_setKey", e.f, 89);
      T(e, "_setValue", e.o, 90);
      T(e, "_getKey", e.getKey, 87);
      T(e, "_getValue", e.N, 88);
      T(e, "_clearKey", e.L, 85);
      T(e, "_clearValue", e.M, 86)
  };
  function wd(a) {
      return "string" == typeof a
  }
  function xd(a) {
      return !("number" == typeof a || void 0 != Number && a instanceof Number) || Math.round(a) != a || isNaN(a) || Infinity == a ? !1 : !0
  }
  ;var zd = function(a) {
      var b = W.gaGlobal;
      a && !b && (W.gaGlobal = b = {});
      return b
  }
    , Ad = function() {
      var a = zd(!0).hid;
      null == a && (a = Ea(),
      zd(!0).hid = a);
      return a
  }
    , Dd = function(a) {
      a.set(Kb, Ad());
      var b = zd();
      if (b && b.dh == a.get(O)) {
          var c = b.sid;
          c && (a.get(ac) ? H(112) : H(132),
          a.set(Zb, c),
          a.get(Sb) && a.set(Wb, c));
          b = b.vid;
          a.get(Sb) && b && (b = b.split("."),
          a.set(Q, 1 * b[0]),
          a.set(Vb, 1 * b[1]))
      }
  };
  var Ed, Fd = function(a, b, c, d) {
      var e = a.c(bb, "")
        , f = a.c(P, "/");
      d = void 0 != d ? d : a.b(cb, 0);
      a = a.c(Wa, "");
      X(b, c, f, e, a, d)
  }, Xc = function(a) {
      var b = a.c(bb, "")
        , c = a.c(P, "/")
        , d = a.c(Wa, "");
      X("__utma", cd(a), c, b, d, a.get(cb));
      X("__utmb", dd(a), c, b, d, a.get(db));
      X("__utmc", "" + a.b(O, 1), c, b, d);
      var e = hd(a, !0);
      e ? X("__utmz", e, c, b, d, a.get(eb)) : X("__utmz", "", c, b, "", -1);
      (e = fd(a, !1)) ? X("__utmv", e, c, b, d, a.get(cb)) : X("__utmv", "", c, b, "", -1);
      if (1 == a.get(v) && (e = a.get(w))) {
          var f = a.get(x);
          b = a.c(bb, "");
          c = a.c(P, "/");
          d = a.c(Wa, "");
          var Be = a.b(y, 0);
          a = Math.min(a.b(cb, 7776E6), a.b(eb, 7776E6), 7776E6);
          a = Math.min(a, 1E3 * Be + a - (new Date).getTime());
          if (!f || "aw.ds" == f)
              if (f = ["1", Be + "", q(e)].join("."),
              0 < a && (e = "_gac_" + q(d),
              !(p(d) || u.test(J.location.hostname) || "/" == c && r.test(b)) && ((d = f) && 1200 < d.length && (d = d.substring(0, 1200)),
              c = e + "=" + d + "; path=" + c + "; ",
              a && (c += "expires=" + (new Date((new Date).getTime() + a)).toGMTString() + "; "),
              b && "none" !== b && (c += "domain=" + b + ";"),
              b = J.cookie,
              J.cookie = c,
              b == J.cookie)))
                  for (b = [],
                  c = J.cookie.split(";"),
                  a = new RegExp("^\\s*" + e + "=\\s*(.*?)\\s*$"),
                  d = 0; d < c.length; d++)
                      (e = c[d].match(a)) && b.push(e[1])
      }
  }, Wc = function(a) {
      var b = a.b(O, 1);
      if (!bd(a, $c(b, pd("__utma"))))
          return a.set(Ub, !0),
          !1;
      var c = !ed(a, $c(b, pd("__utmb")));
      a.set(bc, c);
      id(a, $c(b, pd("__utmz")));
      gd(a, $c(b, pd("__utmv")));
      if (1 == a.get(v)) {
          b = a.get(w);
          var d = a.get(x);
          if (!b || d && "aw.ds" != d) {
              if (J) {
                  b = [];
                  d = J.cookie.split(";");
                  for (var e = /^\s*_gac_(UA-\d+-\d+)=\s*(.+?)\s*$/, f = 0; f < d.length; f++) {
                      var Be = d[f].match(e);
                      Be && b.push({
                          Oa: Be[1],
                          value: Be[2]
                      })
                  }
                  d = {};
                  if (b && b.length)
                      for (e = 0; e < b.length; e++)
                          f = b[e].value.split("."),
                          "1" == f[0] && 3 == f.length && f[1] && (d[b[e].Oa] || (d[b[e].Oa] = []),
                          d[b[e].Oa].push({
                              timestamp: f[1],
                              kb: f[2]
                          }));
                  b = d
              } else
                  b = {};
              (b = b[a.get(Wa)]) && 0 < b.length && (b = b[0],
              a.set(y, b.timestamp),
              a.set(w, b.kb),
              a.set(x, void 0))
          }
      }
      Ed = !c;
      return !0
  }, Gd = function(a) {
      Ed || 0 < pd("__utmb").length || (X("__utmd", "1", a.c(P, "/"), a.c(bb, ""), a.c(Wa, ""), 1E4),
      0 == pd("__utmd").length && a.stopPropagation())
  };
  var h = 0
    , Jd = function(a) {
      void 0 == a.get(Q) ? Hd(a) : a.get(Ub) && !a.get(Mc) ? Hd(a) : a.get(bc) && Id(a)
  }
    , Kd = function(a) {
      a.get(hc) && !a.get(ac) && (Id(a),
      a.set(fc, a.get($b)))
  }
    , Hd = function(a) {
      h++;
      1 < h && H(137);
      var b = a.get(ab);
      a.set(Sb, !0);
      a.set(Q, Ea() ^ td(a) & 2147483647);
      a.set(Tb, "");
      a.set(Vb, b);
      a.set(Wb, b);
      a.set(Zb, b);
      a.set($b, 1);
      a.set(ac, !0);
      a.set(cc, 0);
      a.set(R, 10);
      a.set(dc, b);
      a.set(Fb, []);
      a.set(Ub, !1);
      a.set(bc, !1)
  }
    , Id = function(a) {
      h++;
      1 < h && H(137);
      a.set(Wb, a.get(Zb));
      a.set(Zb, a.get(ab));
      a.Za($b);
      a.set(ac, !0);
      a.set(cc, 0);
      a.set(R, 10);
      a.set(dc, a.get(ab));
      a.set(bc, !1)
  };
  var Ld = "daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p yahoo:q msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q".split(" ")
    , Sd = function(a) {
      if (a.get(kb) && !a.get(Mc)) {
          var b = !F(a.get(ic)) || !F(a.get(nc)) || !F(a.get(S)) || !F(a.get(lc));
          for (var c = {}, d = 0; d < Md.length; d++) {
              var e = Md[d];
              c[e] = a.get(e)
          }
          (d = a.get(rc)) ? (H(149),
          e = new nf,
          Na(e, d),
          d = e) : d = La(J.location.href, a.get(gb)).R;
          if ("1" != L(d.get(a.get(ub))) || !b)
              if (d = Xe(a, d) || Qd(a),
              d || b || !a.get(ac) || (Pd(a, void 0, "(direct)", void 0, void 0, void 0, "(direct)", "(none)", void 0, void 0),
              d = !0),
              d && (a.set(hc, Rd(a, c)),
              b = "(direct)" == a.get(nc) && "(direct)" == a.get(jc) && "(none)" == a.get(oc),
              a.get(hc) || a.get(ac) && !b))
                  a.set(ec, a.get(ab)),
                  a.set(fc, a.get($b)),
                  a.Za(gc)
      }
  }
    , Xe = function(a, b) {
      function c(c, d) {
          d = d || "-";
          return (c = L(b.get(a.get(c)))) && "-" != c ? I(c) : d
      }
      var d = L(b.get(a.get(nb))) || "-"
        , e = L(b.get(a.get(qb))) || "-"
        , f = L(b.get(a.get(pb))) || "-"
        , Be = L(b.get("gclsrc")) || "-"
        , k = L(b.get("dclid")) || "-";
      "-" != f && a.set(w, f);
      "-" != Be && a.set(x, Be);
      var Ja = c(ob, "(not set)")
        , t = c(rb, "(not set)")
        , Za = c(sb)
        , Ma = c(tb);
      if (F(d) && F(f) && F(k) && F(e))
          return !1;
      var mb = !F(f) && !F(Be);
      mb = F(e) && (!F(k) || mb);
      var Xb = F(Za);
      if (mb || Xb) {
          var Bd = Nd(a);
          Bd = La(Bd, !0);
          (Bd = Od(a, Bd)) && !F(Bd[1] && !Bd[2]) && (mb && (e = Bd[0]),
          Xb && (Za = Bd[1]))
      }
      Pd(a, d, e, f, Be, k, Ja, t, Za, Ma);
      return !0
  }
    , Qd = function(a) {
      var b = Nd(a)
        , c = La(b, !0);
      (b = !(void 0 != b && null != b && "" != b && "0" != b && "-" != b && 0 <= b.indexOf("://"))) || (b = c && -1 < c.host.indexOf("google") && c.R.contains("q") && "cse" == c.path);
      if (b)
          return !1;
      if ((b = Od(a, c)) && !b[2])
          return Pd(a, void 0, b[0], void 0, void 0, void 0, "(organic)", "organic", b[1], void 0),
          !0;
      if (b || !a.get(ac))
          return !1;
      a: {
          b = a.get(Bb);
          for (var d = Ka(c.host), e = 0; e < b.length; ++e)
              if (-1 < d.indexOf(b[e])) {
                  a = !1;
                  break a
              }
          Pd(a, void 0, d, void 0, void 0, void 0, "(referral)", "referral", void 0, "/" + c.path);
          a = !0
      }
      return a
  }
    , Od = function(a, b) {
      for (var c = a.get(zb), d = 0; d < c.length; ++d) {
          var e = c[d].split(":");
          if (-1 < b.host.indexOf(e[0].toLowerCase())) {
              var f = b.R.get(e[1]);
              if (f && (f = K(f),
              !f && -1 < b.host.indexOf("google.") && (f = "(not provided)"),
              !e[3] || -1 < b.url.indexOf(e[3]))) {
                  f || H(151);
                  a: {
                      b = f;
                      a = a.get(Ab);
                      b = I(b).toLowerCase();
                      for (c = 0; c < a.length; ++c)
                          if (b == a[c]) {
                              a = !0;
                              break a
                          }
                      a = !1
                  }
                  return [e[2] || e[0], f, a]
              }
          }
      }
      return null
  }
    , Pd = function(a, b, c, d, e, f, Be, k, Ja, t) {
      a.set(ic, b);
      a.set(nc, c);
      a.set(S, d);
      a.set(kc, e);
      a.set(lc, f);
      a.set(jc, Be);
      a.set(oc, k);
      a.set(pc, Ja);
      a.set(qc, t)
  }
    , Md = [jc, ic, S, lc, nc, oc, pc, qc]
    , Rd = function(a, b) {
      function c(a) {
          a = ("" + a).split("+").join("%20");
          return a = a.split(" ").join("%20")
      }
      function d(c) {
          var d = "" + (a.get(c) || "");
          c = "" + (b[c] || "");
          return 0 < d.length && d == c
      }
      if (d(S) || d(lc))
          return H(131),
          !1;
      for (var e = 0; e < Md.length; e++) {
          var f = Md[e]
            , Be = b[f] || "-";
          f = a.get(f) || "-";
          if (c(Be) != c(f))
              return !0
      }
      return !1
  }
    , Td = new RegExp(/^https?:\/\/(www\.)?google(\.com?)?(\.[a-z]{2}t?)?\/?$/i)
    , jf = /^https?:\/\/(r\.)?search\.yahoo\.com?(\.jp)?\/?[^?]*$/i
    , rf = /^https?:\/\/(www\.)?bing\.com\/?$/i
    , Nd = function(a) {
      a = Pa(a.get(Jb), a.get(P));
      try {
          if (Td.test(a))
              return H(136),
              a + "?q=";
          if (jf.test(a))
              return H(150),
              a + "?p=(not provided)";
          if (rf.test(a))
              return a + "?q=(not provided)"
      } catch (b) {
          H(145)
      }
      return a
  };
  var Ud, Vd, Wd = function(a) {
      Ud = a.c(S, "");
      Vd = a.c(kc, "")
  }, Xd = function(a) {
      var b = a.c(S, "")
        , c = a.c(kc, "");
      b != Ud && (-1 < c.indexOf("ds") ? a.set(mc, void 0) : !F(Ud) && -1 < Vd.indexOf("ds") && a.set(mc, Ud))
  };
  var Zd = function(a) {
      Yd(a, J.location.href) ? (a.set(Mc, !0),
      H(12)) : a.set(Mc, !1)
  }
    , Yd = function(a, b) {
      if (!a.get(fb))
          return !1;
      var c = La(b, a.get(gb));
      b = K(c.R.get("__utma"));
      var d = K(c.R.get("__utmb"))
        , e = K(c.R.get("__utmc"))
        , f = K(c.R.get("__utmx"))
        , Be = K(c.R.get("__utmz"))
        , k = K(c.R.get("__utmv"));
      c = K(c.R.get("__utmk"));
      if (Yc("" + b + d + e + f + Be + k) != c) {
          b = I(b);
          d = I(d);
          e = I(e);
          f = I(f);
          e = $d(b + d + e + f, Be, k, c);
          if (!e)
              return !1;
          Be = e[0];
          k = e[1]
      }
      if (!bd(a, b, !0))
          return !1;
      ed(a, d, !0);
      id(a, Be, !0);
      gd(a, k, !0);
      ae(a, f, !0);
      return !0
  }
    , ce = function(a, b, c) {
      var d = cd(a) || "-";
      var e = dd(a) || "-"
        , f = "" + a.b(O, 1) || "-"
        , Be = be(a) || "-"
        , k = hd(a, !1) || "-";
      a = fd(a, !1) || "-";
      var Ja = Yc("" + d + e + f + Be + k + a)
        , t = [];
      t.push("__utma=" + d);
      t.push("__utmb=" + e);
      t.push("__utmc=" + f);
      t.push("__utmx=" + Be);
      t.push("__utmz=" + k);
      t.push("__utmv=" + a);
      t.push("__utmk=" + Ja);
      d = t.join("&");
      if (!d)
          return b;
      e = b.indexOf("#");
      if (c)
          return 0 > e ? b + "#" + d : b + "&" + d;
      c = "";
      0 < e && (c = b.substring(e),
      b = b.substring(0, e));
      return 0 > b.indexOf("?") ? b + "?" + d + c : b + "&" + d + c
  }
    , $d = function(a, b, c, d) {
      for (var e = 0; 3 > e; e++) {
          for (var f = 0; 3 > f; f++) {
              if (d == Yc(a + b + c))
                  return H(127),
                  [b, c];
              var Be = b.replace(/ /g, "%20")
                , k = c.replace(/ /g, "%20");
              if (d == Yc(a + Be + k))
                  return H(128),
                  [Be, k];
              Be = Be.replace(/\+/g, "%20");
              k = k.replace(/\+/g, "%20");
              if (d == Yc(a + Be + k))
                  return H(129),
                  [Be, k];
              try {
                  var Ja = b.match("utmctr=(.*?)(?:\\|utm|$)");
                  if (Ja && 2 == Ja.length && (Be = b.replace(Ja[1], G(I(Ja[1]))),
                  d == Yc(a + Be + c)))
                      return H(139),
                      [Be, c]
              } catch (t) {}
              b = I(b)
          }
          c = I(c)
      }
  };
  var de = "|"
    , fe = function(a, b, c, d, e, f, Be, k, Ja) {
      var t = ee(a, b);
      t || (t = {},
      a.get(Cb).push(t));
      t.id_ = b;
      t.affiliation_ = c;
      t.total_ = d;
      t.tax_ = e;
      t.shipping_ = f;
      t.city_ = Be;
      t.state_ = k;
      t.country_ = Ja;
      t.items_ = t.items_ || [];
      return t
  }
    , ge = function(a, b, c, d, e, f, Be) {
      a = ee(a, b) || fe(a, b, "", 0, 0, 0, "", "", "");
      a: {
          if (a && a.items_) {
              var k = a.items_;
              for (var Ja = 0; Ja < k.length; Ja++)
                  if (k[Ja].sku_ == c) {
                      k = k[Ja];
                      break a
                  }
          }
          k = null
      }
      Ja = k || {};
      Ja.transId_ = b;
      Ja.sku_ = c;
      Ja.name_ = d;
      Ja.category_ = e;
      Ja.price_ = f;
      Ja.quantity_ = Be;
      k || a.items_.push(Ja);
      return Ja
  }
    , ee = function(a, b) {
      a = a.get(Cb);
      for (var c = 0; c < a.length; c++)
          if (a[c].id_ == b)
              return a[c];
      return null
  };
  var he, ie = function(a) {
      if (!he) {
          var b = J.location.hash;
          var c = W.name
            , d = /^#?gaso=([^&]*)/;
          if (c = (b = (b = b && b.match(d) || c && c.match(d)) ? b[1] : K(pd("GASO"))) && b.match(/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))
              Fd(a, "GASO", "" + b, 0),
              M._gasoDomain = a.get(bb),
              M._gasoCPath = a.get(P),
              a = c[1],
              Ia("https://www.google.com/analytics/web/inpage/pub/inpage.js?" + (a ? "prefix=" + a + "&" : "") + Ea(), "_gasojs");
          he = !0
      }
  };
  var ae = function(a, b, c) {
      c && (b = I(b));
      c = a.b(O, 1);
      b = b.split(".");
      2 > b.length || !/^\d+$/.test(b[0]) || (b[0] = "" + c,
      Fd(a, "__utmx", b.join("."), void 0))
  }
    , be = function(a, b) {
      a = $c(a.get(O), pd("__utmx"));
      "-" == a && (a = "");
      return b ? G(a) : a
  }
    , Ye = function(a) {
      try {
          var b = La(J.location.href, !1)
            , c = decodeURIComponent(L(b.R.get("utm_referrer"))) || "";
          c && a.set(Jb, c);
          var d = decodeURIComponent(K(b.R.get("utm_expid"))) || "";
          d && (d = d.split(".")[0],
          a.set(Oc, "" + d))
      } catch (e) {
          H(146)
      }
  }
    , l = function(a) {
      var b = W.gaData && W.gaData.expId;
      b && a.set(Oc, "" + b)
  };
  var ke = function(a, b) {
      var c = Math.min(a.b(Dc, 0), 100);
      if (a.b(Q, 0) % 100 >= c)
          return !1;
      c = Ze() || $e();
      if (void 0 == c)
          return !1;
      var d = c[0];
      if (void 0 == d || Infinity == d || isNaN(d))
          return !1;
      0 < d ? af(c) ? b(je(c)) : b(je(c.slice(0, 1))) : Ga(W, "load", function() {
          ke(a, b)
      }, !1);
      return !0
  }
    , me = function(a, b, c, d) {
      var e = new yd;
      e.f(14, 90, b.substring(0, 500));
      e.f(14, 91, a.substring(0, 150));
      e.f(14, 92, "" + le(c));
      void 0 != d && e.f(14, 93, d.substring(0, 500));
      e.o(14, 90, c);
      return e
  }
    , af = function(a) {
      for (var b = 1; b < a.length; b++)
          if (isNaN(a[b]) || Infinity == a[b] || 0 > a[b])
              return !1;
      return !0
  }
    , le = function(a) {
      return isNaN(a) || 0 > a ? 0 : 5E3 > a ? 10 * Math.floor(a / 10) : 5E4 > a ? 100 * Math.floor(a / 100) : 41E5 > a ? 1E3 * Math.floor(a / 1E3) : 41E5
  }
    , je = function(a) {
      for (var b = new yd, c = 0; c < a.length; c++)
          b.f(14, c + 1, "" + le(a[c])),
          b.o(14, c + 1, a[c]);
      return b
  }
    , Ze = function() {
      var a = W.performance || W.webkitPerformance;
      if (a = a && a.timing) {
          var b = a.navigationStart;
          if (0 == b)
              H(133);
          else
              return [a.loadEventStart - b, a.domainLookupEnd - a.domainLookupStart, a.connectEnd - a.connectStart, a.responseStart - a.requestStart, a.responseEnd - a.responseStart, a.fetchStart - b, a.domInteractive - b, a.domContentLoadedEventStart - b]
      }
  }
    , $e = function() {
      if (W.top == W) {
          var a = W.external
            , b = a && a.onloadT;
          a && !a.isValidLoadTime && (b = void 0);
          2147483648 < b && (b = void 0);
          0 < b && a.setPageReadyTime();
          if (void 0 != b)
              return [b]
      }
  };
  var cf = function(a) {
      if (a.get(Sb))
          try {
              a: {
                  var b = pd(a.get(Oe) || "_ga");
                  if (b && !(1 > b.length)) {
                      for (var c = [], d = 0; d < b.length; d++) {
                          var e = b[d].split(".")
                            , f = e.shift();
                          if (("GA1" == f || "1" == f) && 1 < e.length) {
                              var Be = e.shift().split("-");
                              1 == Be.length && (Be[1] = "1");
                              Be[0] *= 1;
                              Be[1] *= 1;
                              var k = {
                                  Ya: Be,
                                  $a: e.join(".")
                              }
                          } else
                              k = void 0;
                          k && c.push(k)
                      }
                      if (1 == c.length) {
                          var Ja = c[0].$a;
                          break a
                      }
                      if (0 != c.length) {
                          var t = a.get(Pe) || a.get(bb);
                          c = bf(c, (0 == t.indexOf(".") ? t.substr(1) : t).split(".").length, 0);
                          if (1 == c.length) {
                              Ja = c[0].$a;
                              break a
                          }
                          var Za = a.get(Qe) || a.get(P);
                          (b = Za) ? (1 < b.length && "/" == b.charAt(b.length - 1) && (b = b.substr(0, b.length - 1)),
                          0 != b.indexOf("/") && (b = "/" + b),
                          Za = b) : Za = "/";
                          c = bf(c, "/" == Za ? 1 : Za.split("/").length, 1);
                          Ja = c[0].$a;
                          break a
                      }
                  }
                  Ja = void 0
              }
              if (Ja) {
                  var Ma = ("" + Ja).split(".");
                  2 == Ma.length && /[0-9.]/.test(Ma) && (H(114),
                  a.set(Q, Ma[0]),
                  a.set(Vb, Ma[1]),
                  a.set(Sb, !1))
              }
          } catch (mb) {
              H(115)
          }
  }
    , bf = function(a, b, c) {
      for (var d = [], e = [], f = 128, Be = 0; Be < a.length; Be++) {
          var k = a[Be];
          k.Ya[c] == b ? d.push(k) : k.Ya[c] == f ? e.push(k) : k.Ya[c] < f && (e = [k],
          f = k.Ya[c])
      }
      return 0 < d.length ? d : e
  };
  var kf = /^gtm\d+$/
    , hf = function(a) {
      var b = !!a.b(Cd, 1);
      if (b)
          if (H(140),
          "page" != a.get(sc))
              a.set(Kc, "", !0);
          else if (b = a.c(Lc, ""),
          b || (b = (b = a.c($a, "")) && "~0" != b ? kf.test(b) ? "__utmt_" + G(a.c(Wa, "")) : "__utmt_" + G(b) : "__utmt"),
          0 < pd(b).length)
              a.set(Kc, "", !0);
          else if (X(b, "1", a.c(P, "/"), a.c(bb, ""), a.c(Wa, ""), 6E5),
          0 < pd(b).length) {
              a.set(Kc, Ea(), !0);
              a.set(Yb, 1, !0);
              if (void 0 !== W.__ga4__)
                  b = W.__ga4__;
              else {
                  if (void 0 === A) {
                      var c = W.navigator.userAgent;
                      if (c) {
                          b = c;
                          try {
                              b = decodeURIComponent(c)
                          } catch (d) {}
                          if (c = !(0 <= b.indexOf("Chrome")) && !(0 <= b.indexOf("CriOS")) && (0 <= b.indexOf("Safari/") || 0 <= b.indexOf("Safari,")))
                              b = B.exec(b),
                              c = 11 <= (b ? Number(b[1]) : -1);
                          A = c
                      } else
                          A = !1
                  }
                  b = A
              }
              b ? (a.set(z, C(a), !0),
              a.set(Jc, "https://ssl.google-analytics.com/j/__utm.gif", !0)) : a.set(Jc, Ne() + "/r/__utm.gif?", !0)
          }
  }
    , C = function(a) {
      a = aa(a);
      return {
          gb: "t=dc&_r=3&" + a,
          google: "t=sr&slf_rd=1&_r=4&" + a,
          count: 0
      }
  }
    , aa = function(a) {
      function b(a, b) {
          c.push(a + "=" + G(b))
      }
      var c = [];
      b("v", "1");
      b("_v", "5.7.2");
      b("tid", a.get(Wa));
      b("cid", a.get(Q) + "." + a.get(Vb));
      b("jid", a.get(Kc));
      b("aip", "1");
      return c.join("&") + "&z=" + Ea()
  };
  var U = function(a, b, c) {
      function d(a) {
          return function(b) {
              if ((b = b.get(Nc)[a]) && b.length)
                  for (var c = Te(e, a), d = 0; d < b.length; d++)
                      b[d].call(e, c)
          }
      }
      var e = this;
      this.a = new Zc;
      this.get = function(a) {
          return this.a.get(a)
      }
      ;
      this.set = function(a, b, c) {
          this.a.set(a, b, c)
      }
      ;
      this.set(Wa, b || "UA-XXXXX-X");
      this.set($a, a || "");
      this.set(Ya, c || "");
      this.set(ab, Math.round((new Date).getTime() / 1E3));
      this.set(P, "/");
      this.set(cb, 63072E6);
      this.set(eb, 15768E6);
      this.set(db, 18E5);
      this.set(fb, !1);
      this.set(yb, 50);
      this.set(gb, !1);
      this.set(hb, !0);
      this.set(ib, !0);
      this.set(jb, !0);
      this.set(kb, !0);
      this.set(lb, !0);
      this.set(ob, "utm_campaign");
      this.set(nb, "utm_id");
      this.set(pb, "gclid");
      this.set(qb, "utm_source");
      this.set(rb, "utm_medium");
      this.set(sb, "utm_term");
      this.set(tb, "utm_content");
      this.set(ub, "utm_nooverride");
      this.set(vb, 100);
      this.set(Dc, 1);
      this.set(Ec, !1);
      this.set(wb, "/__utm.gif");
      this.set(xb, 1);
      this.set(Cb, []);
      this.set(Fb, []);
      this.set(zb, Ld.slice(0));
      this.set(Ab, []);
      this.set(Bb, []);
      this.B("auto");
      this.set(Jb, J.referrer);
      this.set(v, !0);
      this.set(y, Math.round((new Date).getTime() / 1E3));
      Ye(this.a);
      this.set(Nc, {
          hit: [],
          load: []
      });
      this.a.g("0", Zd);
      this.a.g("1", Wd);
      this.a.g("2", Jd);
      this.a.g("3", cf);
      this.a.g("4", Sd);
      this.a.g("5", Xd);
      this.a.g("6", Kd);
      this.a.g("7", d("load"));
      this.a.g("8", ie);
      this.a.v("A", kd);
      this.a.v("B", md);
      this.a.v("C", Ge);
      this.a.v("D", Jd);
      this.a.v("E", jd);
      this.a.v("F", Tc);
      this.a.v("G", ne);
      this.a.v("H", lf);
      this.a.v("I", Gd);
      this.a.v("J", nd);
      this.a.v("K", ud);
      this.a.v("L", Dd);
      this.a.v("M", l);
      this.a.v("N", hf);
      this.a.v("O", d("hit"));
      this.a.v("P", oe);
      this.a.v("Q", pe);
      0 === this.get(ab) && H(111);
      this.a.T();
      this.H = void 0
  };
  E = U.prototype;
  E.m = function() {
      var a = this.get(Db);
      a || (a = new yd,
      this.set(Db, a));
      return a
  }
  ;
  E.La = function(a) {
      for (var b in a) {
          var c = a[b];
          a.hasOwnProperty(b) && this.set(b, c, !0)
      }
  }
  ;
  E.K = function(a) {
      if (this.get(Ec))
          return !1;
      var b = this
        , c = ke(this.a, function(c) {
          b.set(Hb, a, !0);
          b.ib(c)
      });
      this.set(Ec, c);
      return c
  }
  ;
  E.Fa = function(a) {
      a && Ca(a) ? (H(13),
      this.set(Hb, a, !0)) : "object" === typeof a && null !== a && this.La(a);
      this.H = a = this.get(Hb);
      this.a.j("page");
      this.K(a)
  }
  ;
  E.F = function(a, b, c, d, e) {
      if ("" == a || !wd(a) || "" == b || !wd(b) || void 0 != c && !wd(c) || void 0 != d && !xd(d))
          return !1;
      this.set(wc, a, !0);
      this.set(xc, b, !0);
      this.set(yc, c, !0);
      this.set(zc, d, !0);
      this.set(vc, !!e, !0);
      this.a.j("event");
      return !0
  }
  ;
  E.Ha = function(a, b, c, d, e) {
      var f = this.a.b(Dc, 0);
      1 * e === e && (f = e);
      if (this.a.b(Q, 0) % 100 >= f)
          return !1;
      c = 1 * ("" + c);
      if ("" == a || !wd(a) || "" == b || !wd(b) || !xd(c) || isNaN(c) || 0 > c || 0 > f || 100 < f || void 0 != d && ("" == d || !wd(d)))
          return !1;
      this.ib(me(a, b, c, d));
      return !0
  }
  ;
  E.Ga = function(a, b, c, d) {
      if (!a || !b)
          return !1;
      this.set(Ac, a, !0);
      this.set(Bc, b, !0);
      this.set(Cc, c || J.location.href, !0);
      d && this.set(Hb, d, !0);
      this.a.j("social");
      return !0
  }
  ;
  E.Ea = function() {
      this.set(Dc, 10);
      this.K(this.H)
  }
  ;
  E.Ia = function() {
      this.a.j("trans")
  }
  ;
  E.ib = function(a) {
      this.set(Eb, a, !0);
      this.a.j("event")
  }
  ;
  E.ia = function(a) {
      this.initData();
      var b = this;
      return {
          _trackEvent: function(c, d, e) {
              H(91);
              b.F(a, c, d, e)
          }
      }
  }
  ;
  E.ma = function(a) {
      return this.get(a)
  }
  ;
  E.xa = function(a, b) {
      if (a)
          if (Ca(a))
              this.set(a, b);
          else if ("object" == typeof a)
              for (var c in a)
                  a.hasOwnProperty(c) && this.set(c, a[c])
  }
  ;
  E.addEventListener = function(a, b) {
      (a = this.get(Nc)[a]) && a.push(b)
  }
  ;
  E.removeEventListener = function(a, b) {
      a = this.get(Nc)[a];
      for (var c = 0; a && c < a.length; c++)
          if (a[c] == b) {
              a.splice(c, 1);
              break
          }
  }
  ;
  E.qa = function() {
      return "5.7.2"
  }
  ;
  E.B = function(a) {
      this.get(hb);
      a = "auto" == a ? Ka(J.domain) : a && "-" != a && "none" != a ? a.toLowerCase() : "";
      this.set(bb, a)
  }
  ;
  E.va = function(a) {
      this.set(hb, !!a)
  }
  ;
  E.na = function(a, b) {
      return ce(this.a, a, b)
  }
  ;
  E.link = function(a, b) {
      this.a.get(fb) && a && (J.location.href = ce(this.a, a, b))
  }
  ;
  E.ua = function(a, b) {
      this.a.get(fb) && a && a.action && (a.action = ce(this.a, a.action, b))
  }
  ;
  E.za = function() {
      this.initData();
      var a = this.a
        , b = J.getElementById ? J.getElementById("utmtrans") : J.utmform && J.utmform.utmtrans ? J.utmform.utmtrans : null;
      if (b && b.value) {
          a.set(Cb, []);
          b = b.value.split("UTM:");
          for (var c = 0; c < b.length; c++) {
              b[c] = Da(b[c]);
              for (var d = b[c].split(de), e = 0; e < d.length; e++)
                  d[e] = Da(d[e]);
              "T" == d[0] ? fe(a, d[1], d[2], d[3], d[4], d[5], d[6], d[7], d[8]) : "I" == d[0] && ge(a, d[1], d[2], d[3], d[4], d[5], d[6])
          }
      }
  }
  ;
  E.$ = function(a, b, c, d, e, f, Be, k) {
      return fe(this.a, a, b, c, d, e, f, Be, k)
  }
  ;
  E.Y = function(a, b, c, d, e, f) {
      return ge(this.a, a, b, c, d, e, f)
  }
  ;
  E.Aa = function(a) {
      de = a || "|"
  }
  ;
  E.ea = function() {
      this.set(Cb, [])
  }
  ;
  E.wa = function(a, b, c, d) {
      var e = this.a;
      if (0 >= a || a > e.get(yb))
          a = !1;
      else if (!b || !c || 128 < b.length + c.length)
          a = !1;
      else {
          1 != d && 2 != d && (d = 3);
          var f = {};
          f.name = b;
          f.value = c;
          f.scope = d;
          e.get(Fb)[a] = f;
          a = !0
      }
      a && this.a.store();
      return a
  }
  ;
  E.ka = function(a) {
      this.a.get(Fb)[a] = void 0;
      this.a.store()
  }
  ;
  E.ra = function(a) {
      return (a = this.a.get(Fb)[a]) && 1 == a.scope ? a.value : void 0
  }
  ;
  E.Ca = function(a, b, c) {
      12 == a && 1 == b ? this.set(pf, c) : this.m().f(a, b, c)
  }
  ;
  E.Da = function(a, b, c) {
      this.m().o(a, b, c)
  }
  ;
  E.sa = function(a, b) {
      return this.m().getKey(a, b)
  }
  ;
  E.ta = function(a, b) {
      return this.m().N(a, b)
  }
  ;
  E.fa = function(a) {
      this.m().L(a)
  }
  ;
  E.ga = function(a) {
      this.m().M(a)
  }
  ;
  E.ja = function() {
      return new yd
  }
  ;
  E.W = function(a) {
      a && this.get(Ab).push(a.toLowerCase())
  }
  ;
  E.ba = function() {
      this.set(Ab, [])
  }
  ;
  E.X = function(a) {
      a && this.get(Bb).push(a.toLowerCase())
  }
  ;
  E.ca = function() {
      this.set(Bb, [])
  }
  ;
  E.Z = function(a, b, c, d, e) {
      if (a && b) {
          a = [a, b.toLowerCase()].join(":");
          if (d || e)
              a = [a, d, e].join(":");
          d = this.get(zb);
          d.splice(c ? 0 : d.length, 0, a)
      }
  }
  ;
  E.da = function() {
      this.set(zb, [])
  }
  ;
  E.ha = function(a) {
      this.a.load();
      var b = this.get(P)
        , c = be(this.a);
      this.set(P, a);
      this.a.store();
      ae(this.a, c);
      this.set(P, b)
  }
  ;
  E.ya = function(a, b) {
      if (0 < a && 5 >= a && Ca(b) && "" != b) {
          var c = this.get(Fc) || [];
          c[a] = b;
          this.set(Fc, c)
      }
  }
  ;
  E.V = function(a) {
      a = "" + a;
      if (a.match(/^[A-Za-z0-9]{1,5}$/)) {
          var b = this.get(Ic) || [];
          b.push(a);
          this.set(Ic, b)
      }
  }
  ;
  E.initData = function() {
      this.a.load()
  }
  ;
  E.Ba = function(a) {
      a && "" != a && (this.set(Tb, a),
      this.a.j("var"))
  }
  ;
  var ne = function(a) {
      "trans" !== a.get(sc) && 500 <= a.b(cc, 0) && a.stopPropagation();
      if ("event" === a.get(sc)) {
          var b = (new Date).getTime()
            , c = a.b(dc, 0)
            , d = a.b(Zb, 0);
          c = Math.floor((b - (c != d ? c : 1E3 * c)) / 1E3);
          0 < c && (a.set(dc, b),
          a.set(R, Math.min(10, a.b(R, 0) + c)));
          0 >= a.b(R, 0) && a.stopPropagation()
      }
  }
    , pe = function(a) {
      "event" === a.get(sc) && a.set(R, Math.max(0, a.b(R, 10) - 1))
  };
  var qe = function() {
      var a = [];
      this.add = function(b, c, d) {
          d && (c = G("" + c));
          a.push(b + "=" + c)
      }
      ;
      this.toString = function() {
          return a.join("&")
      }
  }
    , re = function(a, b) {
      (b || 2 != a.get(xb)) && a.Za(cc)
  }
    , se = function(a, b) {
      b.add("utmwv", "5.7.2");
      b.add("utms", a.get(cc));
      b.add("utmn", Ea());
      var c = J.location.hostname;
      F(c) || b.add("utmhn", c, !0);
      a = a.get(vb);
      100 != a && b.add("utmsp", a, !0)
  }
    , te = function(a, b) {
      b.add("utmht", (new Date).getTime());
      b.add("utmac", Da(a.get(Wa)));
      a.get(Oc) && b.add("utmxkey", a.get(Oc), !0);
      a.get(vc) && b.add("utmni", 1);
      a.get(of) && b.add("utmgtm", a.get(of), !0);
      var c = a.get(Ic);
      c && 0 < c.length && b.add("utmdid", c.join("."));
      ff(a, b);
      !1 !== a.get(Xa) && (a.get(Xa) || M.w) && b.add("aip", 1);
      void 0 !== a.get(Kc) && b.add("utmjid", a.c(Kc, ""), !0);
      a.b(Yb, 0) && b.add("utmredir", a.b(Yb, 0), !0);
      M.bb || (M.bb = a.get(Wa));
      (1 < M.ab() || M.bb != a.get(Wa)) && b.add("utmmt", 1);
      b.add("utmu", od.encode())
  }
    , ue = function(a, b) {
      a = a.get(Fc) || [];
      for (var c = [], d = 1; d < a.length; d++)
          a[d] && c.push(d + ":" + G(a[d].replace(/%/g, "%25").replace(/:/g, "%3A").replace(/,/g, "%2C")));
      c.length && b.add("utmpg", c.join(","))
  }
    , ff = function(a, b) {
      function c(a, b) {
          b && d.push(a + "=" + b + ";")
      }
      var d = [];
      c("__utma", cd(a));
      c("__utmz", hd(a, !1));
      c("__utmv", fd(a, !0));
      c("__utmx", be(a));
      b.add("utmcc", d.join("+"), !0)
  }
    , ve = function(a, b) {
      a.get(ib) && (b.add("utmcs", a.get(Qb), !0),
      b.add("utmsr", a.get(Lb)),
      a.get(Rb) && b.add("utmvp", a.get(Rb)),
      b.add("utmsc", a.get(Mb)),
      b.add("utmul", a.get(Pb)),
      b.add("utmje", a.get(Nb)),
      b.add("utmfl", a.get(Ob), !0))
  }
    , we = function(a, b) {
      a.get(lb) && a.get(Ib) && b.add("utmdt", a.get(Ib), !0);
      b.add("utmhid", a.get(Kb));
      b.add("utmr", Pa(a.get(Jb), a.get(P)), !0);
      b.add("utmp", G(a.get(Hb), !0), !0)
  }
    , xe = function(a, b) {
      for (var c = a.get(Db), d = a.get(Eb), e = a.get(Fb) || [], f = 0; f < e.length; f++) {
          var Be = e[f];
          Be && (c || (c = new yd),
          c.f(8, f, Be.name),
          c.f(9, f, Be.value),
          3 != Be.scope && c.f(11, f, "" + Be.scope))
      }
      F(a.get(wc)) || F(a.get(xc), !0) || (c || (c = new yd),
      c.f(5, 1, a.get(wc)),
      c.f(5, 2, a.get(xc)),
      e = a.get(yc),
      void 0 != e && c.f(5, 3, e),
      e = a.get(zc),
      void 0 != e && c.o(5, 1, e));
      F(a.get(pf)) || (c || (c = new yd),
      c.f(12, 1, a.get(pf)));
      c ? b.add("utme", c.Qa(d), !0) : d && b.add("utme", d.A(), !0)
  }
    , ye = function(a, b, c) {
      var d = new qe;
      re(a, c);
      se(a, d);
      d.add("utmt", "tran");
      d.add("utmtid", b.id_, !0);
      d.add("utmtst", b.affiliation_, !0);
      d.add("utmtto", b.total_, !0);
      d.add("utmttx", b.tax_, !0);
      d.add("utmtsp", b.shipping_, !0);
      d.add("utmtci", b.city_, !0);
      d.add("utmtrg", b.state_, !0);
      d.add("utmtco", b.country_, !0);
      xe(a, d);
      ve(a, d);
      we(a, d);
      (b = a.get(Gb)) && d.add("utmcu", b, !0);
      c || (ue(a, d),
      te(a, d));
      return d.toString()
  }
    , ze = function(a, b, c) {
      var d = new qe;
      re(a, c);
      se(a, d);
      d.add("utmt", "item");
      d.add("utmtid", b.transId_, !0);
      d.add("utmipc", b.sku_, !0);
      d.add("utmipn", b.name_, !0);
      d.add("utmiva", b.category_, !0);
      d.add("utmipr", b.price_, !0);
      d.add("utmiqt", b.quantity_, !0);
      xe(a, d);
      ve(a, d);
      we(a, d);
      (b = a.get(Gb)) && d.add("utmcu", b, !0);
      c || (ue(a, d),
      te(a, d));
      return d.toString()
  }
    , Ae = function(a, b) {
      var c = a.get(sc);
      if ("page" == c)
          c = new qe,
          re(a, b),
          se(a, c),
          xe(a, c),
          ve(a, c),
          we(a, c),
          b || (ue(a, c),
          te(a, c)),
          a = [c.toString()];
      else if ("event" == c)
          c = new qe,
          re(a, b),
          se(a, c),
          c.add("utmt", "event"),
          xe(a, c),
          ve(a, c),
          we(a, c),
          b || (ue(a, c),
          te(a, c)),
          a = [c.toString()];
      else if ("var" == c)
          c = new qe,
          re(a, b),
          se(a, c),
          c.add("utmt", "var"),
          !b && te(a, c),
          a = [c.toString()];
      else if ("trans" == c) {
          c = [];
          for (var d = a.get(Cb), e = 0; e < d.length; ++e) {
              c.push(ye(a, d[e], b));
              for (var f = d[e].items_, Be = 0; Be < f.length; ++Be)
                  c.push(ze(a, f[Be], b))
          }
          a = c
      } else
          "social" == c ? b ? a = [] : (c = new qe,
          re(a, b),
          se(a, c),
          c.add("utmt", "social"),
          c.add("utmsn", a.get(Ac), !0),
          c.add("utmsa", a.get(Bc), !0),
          c.add("utmsid", a.get(Cc), !0),
          xe(a, c),
          ve(a, c),
          we(a, c),
          ue(a, c),
          te(a, c),
          a = [c.toString()]) : "feedback" == c ? b ? a = [] : (c = new qe,
          re(a, b),
          se(a, c),
          c.add("utmt", "feedback"),
          c.add("utmfbid", a.get(Gc), !0),
          c.add("utmfbpr", a.get(Hc), !0),
          xe(a, c),
          ve(a, c),
          we(a, c),
          ue(a, c),
          te(a, c),
          a = [c.toString()]) : a = [];
      return a
  }
    , oe = function(a) {
      var b = a.get(xb)
        , c = a.get(uc)
        , d = c && c.Ua
        , e = 0
        , f = a.get(z);
      if (0 == b || 2 == b) {
          var Be = a.get(wb) + "?";
          var k = Ae(a, !0);
          for (var Ja = 0, t = k.length; Ja < t; Ja++)
              Sa(k[Ja], d, Be, !0),
              e++
      }
      if (1 == b || 2 == b)
          for (k = Ae(a),
          a = a.c(Jc, ""),
          Ja = 0,
          t = k.length; Ja < t; Ja++)
              try {
                  if (f) {
                      var Za = k[Ja];
                      b = (b = d) || Fa;
                      df("", b, a + "?" + Za, f)
                  } else
                      Sa(k[Ja], d, a);
                  e++
              } catch (Ma) {
                  Ma && Ra(Ma.name, void 0, Ma.message)
              }
      c && (c.fb = e)
  };
  var Ne = function() {
      return "https:" == J.location.protocol || M.G ? "https://ssl.google-analytics.com" : "http://www.google-analytics.com"
  }
    , Ce = function(a) {
      this.name = "len";
      this.message = a + "-8192"
  }
    , De = function(a) {
      this.name = "ff2post";
      this.message = a + "-2036"
  }
    , Sa = function(a, b, c, d) {
      b = b || Fa;
      if (d || 2036 >= a.length)
          gf(a, b, c);
      else if (8192 >= a.length) {
          if (0 <= W.navigator.userAgent.indexOf("Firefox") && ![].reduce)
              throw new De(a.length);
          df(a, b) || ef(a, b) || Ee(a, b) || b()
      } else
          throw new Ce(a.length);
  }
    , gf = function(a, b, c) {
      c = c || Ne() + "/__utm.gif?";
      var d = new Image(1,1);
      d.src = c + a;
      d.onload = function() {
          d.onload = null;
          d.onerror = null;
          b()
      }
      ;
      d.onerror = function() {
          d.onload = null;
          d.onerror = null;
          b()
      }
  }
    , ef = function(a, b) {
      if (0 != Ne().indexOf(J.location.protocol))
          return !1;
      var c = W.XDomainRequest;
      if (!c)
          return !1;
      c = new c;
      c.open("POST", Ne() + "/p/__utm.gif");
      c.onerror = function() {
          b()
      }
      ;
      c.onload = b;
      c.send(a);
      return !0
  }
    , df = function(a, b, c, d) {
      var e = W.XMLHttpRequest;
      if (!e)
          return !1;
      var f = new e;
      if (!("withCredentials"in f))
          return !1;
      f.open("POST", c || Ne() + "/p/__utm.gif", !0);
      f.withCredentials = !0;
      f.setRequestHeader("Content-Type", "text/plain");
      f.onreadystatechange = function() {
          if (4 == f.readyState) {
              if (d)
                  try {
                      var a = f.responseText;
                      if (1 > a.length || "1" != a.charAt(0))
                          Ra("xhr", "ver", a),
                          b();
                      else if (3 < d.count++)
                          Ra("xhr", "tmr", "" + d.count),
                          b();
                      else if (1 == a.length)
                          b();
                      else {
                          var c = a.charAt(1);
                          if ("d" == c) {
                              var e = d.gb;
                              a = (a = b) || Fa;
                              df("", a, "https://stats.g.doubleclick.net/j/collect?" + e, d)
                          } else if ("g" == c) {
                              var t = "https://www.google.%/ads/ga-audiences?".replace("%", "com");
                              gf(d.google, b, t);
                              var Za = a.substring(2);
                              if (Za)
                                  if (/^[a-z.]{1,6}$/.test(Za)) {
                                      var Ma = "https://www.google.%/ads/ga-audiences?".replace("%", Za);
                                      gf(d.google, Fa, Ma)
                                  } else
                                      Ra("tld", "bcc", Za)
                          } else
                              Ra("xhr", "brc", c),
                              b()
                      }
                  } catch (mb) {
                      b()
                  }
              else
                  b();
              f = null
          }
      }
      ;
      f.send(a);
      return !0
  }
    , Ee = function(a, b) {
      if (!J.body)
          return We(function() {
              Ee(a, b)
          }, 100),
          !0;
      a = encodeURIComponent(a);
      try {
          var c = J.createElement('<iframe name="' + a + '"></iframe>')
      } catch (e) {
          c = J.createElement("iframe"),
          c.name = a
      }
      c.height = "0";
      c.width = "0";
      c.style.display = "none";
      c.style.visibility = "hidden";
      var d = Ne() + "/u/post_iframe.html";
      Ga(W, "beforeunload", function() {
          c.src = "";
          c.parentNode && c.parentNode.removeChild(c)
      });
      setTimeout(b, 1E3);
      J.body.appendChild(c);
      c.src = d;
      return !0
  };
  var qf = function() {
      this.G = this.w = !1;
      0 == Ea() % 1E4 && (H(142),
      this.G = !0);
      this.C = {};
      this.D = [];
      this.U = 0;
      this.S = [["www.google-analytics.com", "", "/plugins/"]];
      this._gasoCPath = this._gasoDomain = this.bb = void 0;
      Re();
      Se()
  };
  E = qf.prototype;
  E.oa = function(a, b) {
      return this.hb(a, void 0, b)
  }
  ;
  E.hb = function(a, b, c) {
      b && H(23);
      c && H(67);
      void 0 == b && (b = "~" + M.U++);
      a = new U(b,a,c);
      M.C[b] = a;
      M.D.push(a);
      return a
  }
  ;
  E.u = function(a) {
      a = a || "";
      return M.C[a] || M.hb(void 0, a)
  }
  ;
  E.pa = function() {
      return M.D.slice(0)
  }
  ;
  E.ab = function() {
      return M.D.length
  }
  ;
  E.aa = function() {
      this.w = !0
  }
  ;
  E.la = function() {
      this.G = !0
  }
  ;
  var Fe = function(a) {
      if ("prerender" == J.visibilityState)
          return !1;
      a();
      return !0
  };
  var M = new qf;
  var D = W._gat;
  D && Ba(D._getTracker) ? M = D : W._gat = M;
  var Z = new Y;
  (function(a) {
      if (!Fe(a)) {
          H(123);
          var b = !1
            , c = function() {
              if (!b && Fe(a)) {
                  b = !0;
                  var d = J
                    , e = c;
                  d.removeEventListener ? d.removeEventListener("visibilitychange", e, !1) : d.detachEvent && d.detachEvent("onvisibilitychange", e)
              }
          };
          Ga(J, "visibilitychange", c)
      }
  }
  )(function() {
      var a = W._gaq
        , b = !1;
      if (a && Ba(a.push) && (b = "[object Array]" == Object.prototype.toString.call(Object(a)),
      !b)) {
          Z = a;
          return
      }
      W._gaq = Z;
      b && Z.push.apply(Z, a)
  });
  function Yc(a) {
      var b = 1, c;
      if (a)
          for (b = 0,
          c = a.length - 1; 0 <= c; c--) {
              var d = a.charCodeAt(c);
              b = (b << 6 & 268435455) + d + (d << 14);
              d = b & 266338304;
              b = 0 != d ? b ^ d >> 21 : b
          }
      return b
  }
  ;
}
).call(this);

(() => {
  var __webpack_modules__ = {
      731: (t, e, n) => {
        "use strict";
        n.d(e, { E: () => r });
        var i = n(365);
        class r extends i.Loader {
          constructor(t) {
            super(t),
              (this.dracoLoader = null),
              (this.ktx2Loader = null),
              (this.meshoptDecoder = null),
              (this.pluginCallbacks = []),
              this.register(function (t) {
                return new c(t);
              }),
              this.register(function (t) {
                return new h(t);
              }),
              this.register(function (t) {
                return new d(t);
              }),
              this.register(function (t) {
                return new u(t);
              }),
              this.register(function (t) {
                return new a(t);
              }),
              this.register(function (t) {
                return new p(t);
              });
          }
          load(t, e, n, r) {
            const o = this;
            let s;
            (s =
              "" !== this.resourcePath
                ? this.resourcePath
                : "" !== this.path
                ? this.path
                : i.LoaderUtils.extractUrlBase(t)),
              this.manager.itemStart(t);
            const a = function (e) {
                r ? r(e) : console.error(e),
                  o.manager.itemError(t),
                  o.manager.itemEnd(t);
              },
              l = new i.FileLoader(this.manager);
            l.setPath(this.path),
              l.setResponseType("arraybuffer"),
              l.setRequestHeader(this.requestHeader),
              l.setWithCredentials(this.withCredentials),
              l.load(
                t,
                function (n) {
                  try {
                    o.parse(
                      n,
                      s,
                      function (n) {
                        e(n), o.manager.itemEnd(t);
                      },
                      a
                    );
                  } catch (t) {
                    a(t);
                  }
                },
                n,
                a
              );
          }
          setDRACOLoader(t) {
            return (this.dracoLoader = t), this;
          }
          setDDSLoader() {
            throw new Error(
              'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
            );
          }
          setKTX2Loader(t) {
            return (this.ktx2Loader = t), this;
          }
          setMeshoptDecoder(t) {
            return (this.meshoptDecoder = t), this;
          }
          register(t) {
            return (
              -1 === this.pluginCallbacks.indexOf(t) &&
                this.pluginCallbacks.push(t),
              this
            );
          }
          unregister(t) {
            return (
              -1 !== this.pluginCallbacks.indexOf(t) &&
                this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t), 1),
              this
            );
          }
          parse(t, e, n, r) {
            let o;
            const a = {},
              c = {};
            if ("string" == typeof t) o = t;
            else if (i.LoaderUtils.decodeText(new Uint8Array(t, 0, 4)) === f) {
              try {
                a[s.KHR_BINARY_GLTF] = new m(t);
              } catch (t) {
                return void (r && r(t));
              }
              o = a[s.KHR_BINARY_GLTF].content;
            } else o = i.LoaderUtils.decodeText(new Uint8Array(t));
            const u = JSON.parse(o);
            if (void 0 === u.asset || u.asset.version[0] < 2)
              return void (
                r &&
                r(
                  new Error(
                    "THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."
                  )
                )
              );
            const h = new B(u, {
              path: e || this.resourcePath || "",
              crossOrigin: this.crossOrigin,
              requestHeader: this.requestHeader,
              manager: this.manager,
              ktx2Loader: this.ktx2Loader,
              meshoptDecoder: this.meshoptDecoder,
            });
            h.fileLoader.setRequestHeader(this.requestHeader);
            for (let t = 0; t < this.pluginCallbacks.length; t++) {
              const e = this.pluginCallbacks[t](h);
              (c[e.name] = e), (a[e.name] = !0);
            }
            if (u.extensionsUsed)
              for (let t = 0; t < u.extensionsUsed.length; ++t) {
                const e = u.extensionsUsed[t],
                  n = u.extensionsRequired || [];
                switch (e) {
                  case s.KHR_MATERIALS_UNLIT:
                    a[e] = new l();
                    break;
                  case s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
                    a[e] = new x();
                    break;
                  case s.KHR_DRACO_MESH_COMPRESSION:
                    a[e] = new g(u, this.dracoLoader);
                    break;
                  case s.KHR_TEXTURE_TRANSFORM:
                    a[e] = new v();
                    break;
                  case s.KHR_MESH_QUANTIZATION:
                    a[e] = new _();
                    break;
                  default:
                    n.indexOf(e) >= 0 &&
                      void 0 === c[e] &&
                      console.warn(
                        'THREE.GLTFLoader: Unknown extension "' + e + '".'
                      );
                }
              }
            h.setExtensions(a), h.setPlugins(c), h.parse(n, r);
          }
        }
        function o() {
          let t = {};
          return {
            get: function (e) {
              return t[e];
            },
            add: function (e, n) {
              t[e] = n;
            },
            remove: function (e) {
              delete t[e];
            },
            removeAll: function () {
              t = {};
            },
          };
        }
        const s = {
          KHR_BINARY_GLTF: "KHR_binary_glTF",
          KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
          KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
          KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
          KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
            "KHR_materials_pbrSpecularGlossiness",
          KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
          KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
          KHR_TEXTURE_BASISU: "KHR_texture_basisu",
          KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
          KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
          EXT_TEXTURE_WEBP: "EXT_texture_webp",
          EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
        };
        class a {
          constructor(t) {
            (this.parser = t),
              (this.name = s.KHR_LIGHTS_PUNCTUAL),
              (this.cache = { refs: {}, uses: {} });
          }
          _markDefs() {
            const t = this.parser,
              e = this.parser.json.nodes || [];
            for (let n = 0, i = e.length; n < i; n++) {
              const i = e[n];
              i.extensions &&
                i.extensions[this.name] &&
                void 0 !== i.extensions[this.name].light &&
                t._addNodeRef(this.cache, i.extensions[this.name].light);
            }
          }
          _loadLight(t) {
            const e = this.parser,
              n = "light:" + t;
            let r = e.cache.get(n);
            if (r) return r;
            const o = e.json,
              s = (((o.extensions && o.extensions[this.name]) || {}).lights ||
                [])[t];
            let a;
            const l = new i.Color(16777215);
            void 0 !== s.color && l.fromArray(s.color);
            const c = void 0 !== s.range ? s.range : 0;
            switch (s.type) {
              case "directional":
                (a = new i.DirectionalLight(l)),
                  a.target.position.set(0, 0, -1),
                  a.add(a.target);
                break;
              case "point":
                (a = new i.PointLight(l)), (a.distance = c);
                break;
              case "spot":
                (a = new i.SpotLight(l)),
                  (a.distance = c),
                  (s.spot = s.spot || {}),
                  (s.spot.innerConeAngle =
                    void 0 !== s.spot.innerConeAngle
                      ? s.spot.innerConeAngle
                      : 0),
                  (s.spot.outerConeAngle =
                    void 0 !== s.spot.outerConeAngle
                      ? s.spot.outerConeAngle
                      : Math.PI / 4),
                  (a.angle = s.spot.outerConeAngle),
                  (a.penumbra =
                    1 - s.spot.innerConeAngle / s.spot.outerConeAngle),
                  a.target.position.set(0, 0, -1),
                  a.add(a.target);
                break;
              default:
                throw new Error(
                  "THREE.GLTFLoader: Unexpected light type: " + s.type
                );
            }
            return (
              a.position.set(0, 0, 0),
              (a.decay = 2),
              void 0 !== s.intensity && (a.intensity = s.intensity),
              (a.name = e.createUniqueName(s.name || "light_" + t)),
              (r = Promise.resolve(a)),
              e.cache.add(n, r),
              r
            );
          }
          createNodeAttachment(t) {
            const e = this,
              n = this.parser,
              i = n.json.nodes[t],
              r = ((i.extensions && i.extensions[this.name]) || {}).light;
            return void 0 === r
              ? null
              : this._loadLight(r).then(function (t) {
                  return n._getNodeRef(e.cache, r, t);
                });
          }
        }
        class l {
          constructor() {
            this.name = s.KHR_MATERIALS_UNLIT;
          }
          getMaterialType() {
            return i.MeshBasicMaterial;
          }
          extendParams(t, e, n) {
            const r = [];
            (t.color = new i.Color(1, 1, 1)), (t.opacity = 1);
            const o = e.pbrMetallicRoughness;
            if (o) {
              if (Array.isArray(o.baseColorFactor)) {
                const e = o.baseColorFactor;
                t.color.fromArray(e), (t.opacity = e[3]);
              }
              void 0 !== o.baseColorTexture &&
                r.push(n.assignTexture(t, "map", o.baseColorTexture));
            }
            return Promise.all(r);
          }
        }
        class c {
          constructor(t) {
            (this.parser = t), (this.name = s.KHR_MATERIALS_CLEARCOAT);
          }
          getMaterialType(t) {
            const e = this.parser.json.materials[t];
            return e.extensions && e.extensions[this.name]
              ? i.MeshPhysicalMaterial
              : null;
          }
          extendMaterialParams(t, e) {
            const n = this.parser,
              r = n.json.materials[t];
            if (!r.extensions || !r.extensions[this.name])
              return Promise.resolve();
            const o = [],
              s = r.extensions[this.name];
            if (
              (void 0 !== s.clearcoatFactor &&
                (e.clearcoat = s.clearcoatFactor),
              void 0 !== s.clearcoatTexture &&
                o.push(n.assignTexture(e, "clearcoatMap", s.clearcoatTexture)),
              void 0 !== s.clearcoatRoughnessFactor &&
                (e.clearcoatRoughness = s.clearcoatRoughnessFactor),
              void 0 !== s.clearcoatRoughnessTexture &&
                o.push(
                  n.assignTexture(
                    e,
                    "clearcoatRoughnessMap",
                    s.clearcoatRoughnessTexture
                  )
                ),
              void 0 !== s.clearcoatNormalTexture &&
                (o.push(
                  n.assignTexture(
                    e,
                    "clearcoatNormalMap",
                    s.clearcoatNormalTexture
                  )
                ),
                void 0 !== s.clearcoatNormalTexture.scale))
            ) {
              const t = s.clearcoatNormalTexture.scale;
              e.clearcoatNormalScale = new i.Vector2(t, -t);
            }
            return Promise.all(o);
          }
        }
        class u {
          constructor(t) {
            (this.parser = t), (this.name = s.KHR_MATERIALS_TRANSMISSION);
          }
          getMaterialType(t) {
            const e = this.parser.json.materials[t];
            return e.extensions && e.extensions[this.name]
              ? i.MeshPhysicalMaterial
              : null;
          }
          extendMaterialParams(t, e) {
            const n = this.parser,
              i = n.json.materials[t];
            if (!i.extensions || !i.extensions[this.name])
              return Promise.resolve();
            const r = [],
              o = i.extensions[this.name];
            return (
              void 0 !== o.transmissionFactor &&
                (e.transmission = o.transmissionFactor),
              void 0 !== o.transmissionTexture &&
                r.push(
                  n.assignTexture(e, "transmissionMap", o.transmissionTexture)
                ),
              Promise.all(r)
            );
          }
        }
        class h {
          constructor(t) {
            (this.parser = t), (this.name = s.KHR_TEXTURE_BASISU);
          }
          loadTexture(t) {
            const e = this.parser,
              n = e.json,
              i = n.textures[t];
            if (!i.extensions || !i.extensions[this.name]) return null;
            const r = i.extensions[this.name],
              o = n.images[r.source],
              s = e.options.ktx2Loader;
            if (!s) {
              if (
                n.extensionsRequired &&
                n.extensionsRequired.indexOf(this.name) >= 0
              )
                throw new Error(
                  "THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures"
                );
              return null;
            }
            return e.loadTextureImage(t, o, s);
          }
        }
        class d {
          constructor(t) {
            (this.parser = t),
              (this.name = s.EXT_TEXTURE_WEBP),
              (this.isSupported = null);
          }
          loadTexture(t) {
            const e = this.name,
              n = this.parser,
              i = n.json,
              r = i.textures[t];
            if (!r.extensions || !r.extensions[e]) return null;
            const o = r.extensions[e],
              s = i.images[o.source];
            let a = n.textureLoader;
            if (s.uri) {
              const t = n.options.manager.getHandler(s.uri);
              null !== t && (a = t);
            }
            return this.detectSupport().then(function (r) {
              if (r) return n.loadTextureImage(t, s, a);
              if (i.extensionsRequired && i.extensionsRequired.indexOf(e) >= 0)
                throw new Error(
                  "THREE.GLTFLoader: WebP required by asset but unsupported."
                );
              return n.loadTexture(t);
            });
          }
          detectSupport() {
            return (
              this.isSupported ||
                (this.isSupported = new Promise(function (t) {
                  const e = new Image();
                  (e.src =
                    "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"),
                    (e.onload = e.onerror =
                      function () {
                        t(1 === e.height);
                      });
                })),
              this.isSupported
            );
          }
        }
        class p {
          constructor(t) {
            (this.name = s.EXT_MESHOPT_COMPRESSION), (this.parser = t);
          }
          loadBufferView(t) {
            const e = this.parser.json,
              n = e.bufferViews[t];
            if (n.extensions && n.extensions[this.name]) {
              const t = n.extensions[this.name],
                i = this.parser.getDependency("buffer", t.buffer),
                r = this.parser.options.meshoptDecoder;
              if (!r || !r.supported) {
                if (
                  e.extensionsRequired &&
                  e.extensionsRequired.indexOf(this.name) >= 0
                )
                  throw new Error(
                    "THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files"
                  );
                return null;
              }
              return Promise.all([i, r.ready]).then(function (e) {
                const n = t.byteOffset || 0,
                  i = t.byteLength || 0,
                  o = t.count,
                  s = t.byteStride,
                  a = new ArrayBuffer(o * s),
                  l = new Uint8Array(e[0], n, i);
                return (
                  r.decodeGltfBuffer(
                    new Uint8Array(a),
                    o,
                    s,
                    l,
                    t.mode,
                    t.filter
                  ),
                  a
                );
              });
            }
            return null;
          }
        }
        const f = "glTF";
        class m {
          constructor(t) {
            (this.name = s.KHR_BINARY_GLTF),
              (this.content = null),
              (this.body = null);
            const e = new DataView(t, 0, 12);
            if (
              ((this.header = {
                magic: i.LoaderUtils.decodeText(new Uint8Array(t.slice(0, 4))),
                version: e.getUint32(4, !0),
                length: e.getUint32(8, !0),
              }),
              this.header.magic !== f)
            )
              throw new Error(
                "THREE.GLTFLoader: Unsupported glTF-Binary header."
              );
            if (this.header.version < 2)
              throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
            const n = this.header.length - 12,
              r = new DataView(t, 12);
            let o = 0;
            for (; o < n; ) {
              const e = r.getUint32(o, !0);
              o += 4;
              const n = r.getUint32(o, !0);
              if (((o += 4), 1313821514 === n)) {
                const n = new Uint8Array(t, 12 + o, e);
                this.content = i.LoaderUtils.decodeText(n);
              } else if (5130562 === n) {
                const n = 12 + o;
                this.body = t.slice(n, n + e);
              }
              o += e;
            }
            if (null === this.content)
              throw new Error("THREE.GLTFLoader: JSON content not found.");
          }
        }
        class g {
          constructor(t, e) {
            if (!e)
              throw new Error(
                "THREE.GLTFLoader: No DRACOLoader instance provided."
              );
            (this.name = s.KHR_DRACO_MESH_COMPRESSION),
              (this.json = t),
              (this.dracoLoader = e),
              this.dracoLoader.preload();
          }
          decodePrimitive(t, e) {
            const n = this.json,
              i = this.dracoLoader,
              r = t.extensions[this.name].bufferView,
              o = t.extensions[this.name].attributes,
              s = {},
              a = {},
              l = {};
            for (const t in o) {
              const e = T[t] || t.toLowerCase();
              s[e] = o[t];
            }
            for (const e in t.attributes) {
              const i = T[e] || e.toLowerCase();
              if (void 0 !== o[e]) {
                const r = n.accessors[t.attributes[e]],
                  o = w[r.componentType];
                (l[i] = o), (a[i] = !0 === r.normalized);
              }
            }
            return e.getDependency("bufferView", r).then(function (t) {
              return new Promise(function (e) {
                i.decodeDracoFile(
                  t,
                  function (t) {
                    for (const e in t.attributes) {
                      const n = t.attributes[e],
                        i = a[e];
                      void 0 !== i && (n.normalized = i);
                    }
                    e(t);
                  },
                  s,
                  l
                );
              });
            });
          }
        }
        class v {
          constructor() {
            this.name = s.KHR_TEXTURE_TRANSFORM;
          }
          extendTexture(t, e) {
            return (
              void 0 !== e.texCoord &&
                console.warn(
                  'THREE.GLTFLoader: Custom UV sets in "' +
                    this.name +
                    '" extension not yet supported.'
                ),
              (void 0 === e.offset &&
                void 0 === e.rotation &&
                void 0 === e.scale) ||
                ((t = t.clone()),
                void 0 !== e.offset && t.offset.fromArray(e.offset),
                void 0 !== e.rotation && (t.rotation = e.rotation),
                void 0 !== e.scale && t.repeat.fromArray(e.scale),
                (t.needsUpdate = !0)),
              t
            );
          }
        }
        class y extends i.MeshStandardMaterial {
          constructor(t) {
            super(), (this.isGLTFSpecularGlossinessMaterial = !0);
            const e = [
                "#ifdef USE_SPECULARMAP",
                "\tuniform sampler2D specularMap;",
                "#endif",
              ].join("\n"),
              n = [
                "#ifdef USE_GLOSSINESSMAP",
                "\tuniform sampler2D glossinessMap;",
                "#endif",
              ].join("\n"),
              r = [
                "vec3 specularFactor = specular;",
                "#ifdef USE_SPECULARMAP",
                "\tvec4 texelSpecular = texture2D( specularMap, vUv );",
                "\ttexelSpecular = sRGBToLinear( texelSpecular );",
                "\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture",
                "\tspecularFactor *= texelSpecular.rgb;",
                "#endif",
              ].join("\n"),
              o = [
                "float glossinessFactor = glossiness;",
                "#ifdef USE_GLOSSINESSMAP",
                "\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );",
                "\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture",
                "\tglossinessFactor *= texelGlossiness.a;",
                "#endif",
              ].join("\n"),
              s = [
                "PhysicalMaterial material;",
                "material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );",
                "vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );",
                "float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );",
                "material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.",
                "material.specularRoughness += geometryRoughness;",
                "material.specularRoughness = min( material.specularRoughness, 1.0 );",
                "material.specularColor = specularFactor;",
              ].join("\n"),
              a = {
                specular: { value: new i.Color().setHex(16777215) },
                glossiness: { value: 1 },
                specularMap: { value: null },
                glossinessMap: { value: null },
              };
            (this._extraUniforms = a),
              (this.onBeforeCompile = function (t) {
                for (const e in a) t.uniforms[e] = a[e];
                t.fragmentShader = t.fragmentShader
                  .replace("uniform float roughness;", "uniform vec3 specular;")
                  .replace(
                    "uniform float metalness;",
                    "uniform float glossiness;"
                  )
                  .replace("#include <roughnessmap_pars_fragment>", e)
                  .replace("#include <metalnessmap_pars_fragment>", n)
                  .replace("#include <roughnessmap_fragment>", r)
                  .replace("#include <metalnessmap_fragment>", o)
                  .replace("#include <lights_physical_fragment>", s);
              }),
              Object.defineProperties(this, {
                specular: {
                  get: function () {
                    return a.specular.value;
                  },
                  set: function (t) {
                    a.specular.value = t;
                  },
                },
                specularMap: {
                  get: function () {
                    return a.specularMap.value;
                  },
                  set: function (t) {
                    (a.specularMap.value = t),
                      t
                        ? (this.defines.USE_SPECULARMAP = "")
                        : delete this.defines.USE_SPECULARMAP;
                  },
                },
                glossiness: {
                  get: function () {
                    return a.glossiness.value;
                  },
                  set: function (t) {
                    a.glossiness.value = t;
                  },
                },
                glossinessMap: {
                  get: function () {
                    return a.glossinessMap.value;
                  },
                  set: function (t) {
                    (a.glossinessMap.value = t),
                      t
                        ? ((this.defines.USE_GLOSSINESSMAP = ""),
                          (this.defines.USE_UV = ""))
                        : (delete this.defines.USE_GLOSSINESSMAP,
                          delete this.defines.USE_UV);
                  },
                },
              }),
              delete this.metalness,
              delete this.roughness,
              delete this.metalnessMap,
              delete this.roughnessMap,
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.specularMap = t.specularMap),
              this.specular.copy(t.specular),
              (this.glossinessMap = t.glossinessMap),
              (this.glossiness = t.glossiness),
              delete this.metalness,
              delete this.roughness,
              delete this.metalnessMap,
              delete this.roughnessMap,
              this
            );
          }
        }
        class x {
          constructor() {
            (this.name = s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS),
              (this.specularGlossinessParams = [
                "color",
                "map",
                "lightMap",
                "lightMapIntensity",
                "aoMap",
                "aoMapIntensity",
                "emissive",
                "emissiveIntensity",
                "emissiveMap",
                "bumpMap",
                "bumpScale",
                "normalMap",
                "normalMapType",
                "displacementMap",
                "displacementScale",
                "displacementBias",
                "specularMap",
                "specular",
                "glossinessMap",
                "glossiness",
                "alphaMap",
                "envMap",
                "envMapIntensity",
                "refractionRatio",
              ]);
          }
          getMaterialType() {
            return y;
          }
          extendParams(t, e, n) {
            const r = e.extensions[this.name];
            (t.color = new i.Color(1, 1, 1)), (t.opacity = 1);
            const o = [];
            if (Array.isArray(r.diffuseFactor)) {
              const e = r.diffuseFactor;
              t.color.fromArray(e), (t.opacity = e[3]);
            }
            if (
              (void 0 !== r.diffuseTexture &&
                o.push(n.assignTexture(t, "map", r.diffuseTexture)),
              (t.emissive = new i.Color(0, 0, 0)),
              (t.glossiness =
                void 0 !== r.glossinessFactor ? r.glossinessFactor : 1),
              (t.specular = new i.Color(1, 1, 1)),
              Array.isArray(r.specularFactor) &&
                t.specular.fromArray(r.specularFactor),
              void 0 !== r.specularGlossinessTexture)
            ) {
              const e = r.specularGlossinessTexture;
              o.push(n.assignTexture(t, "glossinessMap", e)),
                o.push(n.assignTexture(t, "specularMap", e));
            }
            return Promise.all(o);
          }
          createMaterial(t) {
            const e = new y(t);
            return (
              (e.fog = !0),
              (e.color = t.color),
              (e.map = void 0 === t.map ? null : t.map),
              (e.lightMap = null),
              (e.lightMapIntensity = 1),
              (e.aoMap = void 0 === t.aoMap ? null : t.aoMap),
              (e.aoMapIntensity = 1),
              (e.emissive = t.emissive),
              (e.emissiveIntensity = 1),
              (e.emissiveMap = void 0 === t.emissiveMap ? null : t.emissiveMap),
              (e.bumpMap = void 0 === t.bumpMap ? null : t.bumpMap),
              (e.bumpScale = 1),
              (e.normalMap = void 0 === t.normalMap ? null : t.normalMap),
              (e.normalMapType = i.TangentSpaceNormalMap),
              t.normalScale && (e.normalScale = t.normalScale),
              (e.displacementMap = null),
              (e.displacementScale = 1),
              (e.displacementBias = 0),
              (e.specularMap = void 0 === t.specularMap ? null : t.specularMap),
              (e.specular = t.specular),
              (e.glossinessMap =
                void 0 === t.glossinessMap ? null : t.glossinessMap),
              (e.glossiness = t.glossiness),
              (e.alphaMap = null),
              (e.envMap = void 0 === t.envMap ? null : t.envMap),
              (e.envMapIntensity = 1),
              (e.refractionRatio = 0.98),
              e
            );
          }
        }
        class _ {
          constructor() {
            this.name = s.KHR_MESH_QUANTIZATION;
          }
        }
        class b extends i.Interpolant {
          constructor(t, e, n, i) {
            super(t, e, n, i);
          }
          copySampleValue_(t) {
            const e = this.resultBuffer,
              n = this.sampleValues,
              i = this.valueSize,
              r = t * i * 3 + i;
            for (let t = 0; t !== i; t++) e[t] = n[r + t];
            return e;
          }
        }
        (b.prototype.beforeStart_ = b.prototype.copySampleValue_),
          (b.prototype.afterEnd_ = b.prototype.copySampleValue_),
          (b.prototype.interpolate_ = function (t, e, n, i) {
            const r = this.resultBuffer,
              o = this.sampleValues,
              s = this.valueSize,
              a = 2 * s,
              l = 3 * s,
              c = i - e,
              u = (n - e) / c,
              h = u * u,
              d = h * u,
              p = t * l,
              f = p - l,
              m = -2 * d + 3 * h,
              g = d - h,
              v = 1 - m,
              y = g - h + u;
            for (let t = 0; t !== s; t++) {
              const e = o[f + t + s],
                n = o[f + t + a] * c,
                i = o[p + t + s],
                l = o[p + t] * c;
              r[t] = v * e + y * n + m * i + g * l;
            }
            return r;
          });
        const w = {
            5120: Int8Array,
            5121: Uint8Array,
            5122: Int16Array,
            5123: Uint16Array,
            5125: Uint32Array,
            5126: Float32Array,
          },
          M = {
            9728: i.NearestFilter,
            9729: i.LinearFilter,
            9984: i.NearestMipmapNearestFilter,
            9985: i.LinearMipmapNearestFilter,
            9986: i.NearestMipmapLinearFilter,
            9987: i.LinearMipmapLinearFilter,
          },
          S = {
            33071: i.ClampToEdgeWrapping,
            33648: i.MirroredRepeatWrapping,
            10497: i.RepeatWrapping,
          },
          E = {
            SCALAR: 1,
            VEC2: 2,
            VEC3: 3,
            VEC4: 4,
            MAT2: 4,
            MAT3: 9,
            MAT4: 16,
          },
          T = {
            POSITION: "position",
            NORMAL: "normal",
            TANGENT: "tangent",
            TEXCOORD_0: "uv",
            TEXCOORD_1: "uv2",
            COLOR_0: "color",
            WEIGHTS_0: "skinWeight",
            JOINTS_0: "skinIndex",
          },
          A = {
            scale: "scale",
            translation: "position",
            rotation: "quaternion",
            weights: "morphTargetInfluences",
          },
          C = {
            CUBICSPLINE: void 0,
            LINEAR: i.InterpolateLinear,
            STEP: i.InterpolateDiscrete,
          };
        function L(t, e) {
          return "string" != typeof t || "" === t
            ? ""
            : (/^https?:\/\//i.test(e) &&
                /^\//.test(t) &&
                (e = e.replace(/(^https?:\/\/[^\/]+).*/i, "$1")),
              /^(https?:)?\/\//i.test(t) ||
              /^data:.*,.*$/i.test(t) ||
              /^blob:.*$/i.test(t)
                ? t
                : e + t);
        }
        function R(t, e, n) {
          for (const i in n.extensions)
            void 0 === t[i] &&
              ((e.userData.gltfExtensions = e.userData.gltfExtensions || {}),
              (e.userData.gltfExtensions[i] = n.extensions[i]));
        }
        function P(t, e) {
          void 0 !== e.extras &&
            ("object" == typeof e.extras
              ? Object.assign(t.userData, e.extras)
              : console.warn(
                  "THREE.GLTFLoader: Ignoring primitive type .extras, " +
                    e.extras
                ));
        }
        function O(t, e) {
          if ((t.updateMorphTargets(), void 0 !== e.weights))
            for (let n = 0, i = e.weights.length; n < i; n++)
              t.morphTargetInfluences[n] = e.weights[n];
          if (e.extras && Array.isArray(e.extras.targetNames)) {
            const n = e.extras.targetNames;
            if (t.morphTargetInfluences.length === n.length) {
              t.morphTargetDictionary = {};
              for (let e = 0, i = n.length; e < i; e++)
                t.morphTargetDictionary[n[e]] = e;
            } else
              console.warn(
                "THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names."
              );
          }
        }
        function k(t) {
          const e = t.extensions && t.extensions[s.KHR_DRACO_MESH_COMPRESSION];
          let n;
          return (
            (n = e
              ? "draco:" +
                e.bufferView +
                ":" +
                e.indices +
                ":" +
                I(e.attributes)
              : t.indices + ":" + I(t.attributes) + ":" + t.mode),
            n
          );
        }
        function I(t) {
          let e = "";
          const n = Object.keys(t).sort();
          for (let i = 0, r = n.length; i < r; i++)
            e += n[i] + ":" + t[n[i]] + ";";
          return e;
        }
        function D(t) {
          switch (t) {
            case Int8Array:
              return 1 / 127;
            case Uint8Array:
              return 1 / 255;
            case Int16Array:
              return 1 / 32767;
            case Uint16Array:
              return 1 / 65535;
            default:
              throw new Error(
                "THREE.GLTFLoader: Unsupported normalized accessor component type."
              );
          }
        }
        class B {
          constructor(t = {}, e = {}) {
            (this.json = t),
              (this.extensions = {}),
              (this.plugins = {}),
              (this.options = e),
              (this.cache = new o()),
              (this.associations = new Map()),
              (this.primitiveCache = {}),
              (this.meshCache = { refs: {}, uses: {} }),
              (this.cameraCache = { refs: {}, uses: {} }),
              (this.lightCache = { refs: {}, uses: {} }),
              (this.textureCache = {}),
              (this.nodeNamesUsed = {}),
              "undefined" != typeof createImageBitmap &&
              !1 === /Firefox/.test(navigator.userAgent)
                ? (this.textureLoader = new i.ImageBitmapLoader(
                    this.options.manager
                  ))
                : (this.textureLoader = new i.TextureLoader(
                    this.options.manager
                  )),
              this.textureLoader.setCrossOrigin(this.options.crossOrigin),
              this.textureLoader.setRequestHeader(this.options.requestHeader),
              (this.fileLoader = new i.FileLoader(this.options.manager)),
              this.fileLoader.setResponseType("arraybuffer"),
              "use-credentials" === this.options.crossOrigin &&
                this.fileLoader.setWithCredentials(!0);
          }
          setExtensions(t) {
            this.extensions = t;
          }
          setPlugins(t) {
            this.plugins = t;
          }
          parse(t, e) {
            const n = this,
              i = this.json,
              r = this.extensions;
            this.cache.removeAll(),
              this._invokeAll(function (t) {
                return t._markDefs && t._markDefs();
              }),
              Promise.all(
                this._invokeAll(function (t) {
                  return t.beforeRoot && t.beforeRoot();
                })
              )
                .then(function () {
                  return Promise.all([
                    n.getDependencies("scene"),
                    n.getDependencies("animation"),
                    n.getDependencies("camera"),
                  ]);
                })
                .then(function (e) {
                  const o = {
                    scene: e[0][i.scene || 0],
                    scenes: e[0],
                    animations: e[1],
                    cameras: e[2],
                    asset: i.asset,
                    parser: n,
                    userData: {},
                  };
                  R(r, o, i),
                    P(o, i),
                    Promise.all(
                      n._invokeAll(function (t) {
                        return t.afterRoot && t.afterRoot(o);
                      })
                    ).then(function () {
                      t(o);
                    });
                })
                .catch(e);
          }
          _markDefs() {
            const t = this.json.nodes || [],
              e = this.json.skins || [],
              n = this.json.meshes || [];
            for (let n = 0, i = e.length; n < i; n++) {
              const i = e[n].joints;
              for (let e = 0, n = i.length; e < n; e++) t[i[e]].isBone = !0;
            }
            for (let e = 0, i = t.length; e < i; e++) {
              const i = t[e];
              void 0 !== i.mesh &&
                (this._addNodeRef(this.meshCache, i.mesh),
                void 0 !== i.skin && (n[i.mesh].isSkinnedMesh = !0)),
                void 0 !== i.camera &&
                  this._addNodeRef(this.cameraCache, i.camera);
            }
          }
          _addNodeRef(t, e) {
            void 0 !== e &&
              (void 0 === t.refs[e] && (t.refs[e] = t.uses[e] = 0),
              t.refs[e]++);
          }
          _getNodeRef(t, e, n) {
            if (t.refs[e] <= 1) return n;
            const i = n.clone();
            return (i.name += "_instance_" + t.uses[e]++), i;
          }
          _invokeOne(t) {
            const e = Object.values(this.plugins);
            e.push(this);
            for (let n = 0; n < e.length; n++) {
              const i = t(e[n]);
              if (i) return i;
            }
            return null;
          }
          _invokeAll(t) {
            const e = Object.values(this.plugins);
            e.unshift(this);
            const n = [];
            for (let i = 0; i < e.length; i++) {
              const r = t(e[i]);
              r && n.push(r);
            }
            return n;
          }
          getDependency(t, e) {
            const n = t + ":" + e;
            let i = this.cache.get(n);
            if (!i) {
              switch (t) {
                case "scene":
                  i = this.loadScene(e);
                  break;
                case "node":
                  i = this.loadNode(e);
                  break;
                case "mesh":
                  i = this._invokeOne(function (t) {
                    return t.loadMesh && t.loadMesh(e);
                  });
                  break;
                case "accessor":
                  i = this.loadAccessor(e);
                  break;
                case "bufferView":
                  i = this._invokeOne(function (t) {
                    return t.loadBufferView && t.loadBufferView(e);
                  });
                  break;
                case "buffer":
                  i = this.loadBuffer(e);
                  break;
                case "material":
                  i = this._invokeOne(function (t) {
                    return t.loadMaterial && t.loadMaterial(e);
                  });
                  break;
                case "texture":
                  i = this._invokeOne(function (t) {
                    return t.loadTexture && t.loadTexture(e);
                  });
                  break;
                case "skin":
                  i = this.loadSkin(e);
                  break;
                case "animation":
                  i = this.loadAnimation(e);
                  break;
                case "camera":
                  i = this.loadCamera(e);
                  break;
                default:
                  throw new Error("Unknown type: " + t);
              }
              this.cache.add(n, i);
            }
            return i;
          }
          getDependencies(t) {
            let e = this.cache.get(t);
            if (!e) {
              const n = this,
                i = this.json[t + ("mesh" === t ? "es" : "s")] || [];
              (e = Promise.all(
                i.map(function (e, i) {
                  return n.getDependency(t, i);
                })
              )),
                this.cache.add(t, e);
            }
            return e;
          }
          loadBuffer(t) {
            const e = this.json.buffers[t],
              n = this.fileLoader;
            if (e.type && "arraybuffer" !== e.type)
              throw new Error(
                "THREE.GLTFLoader: " + e.type + " buffer type is not supported."
              );
            if (void 0 === e.uri && 0 === t)
              return Promise.resolve(this.extensions[s.KHR_BINARY_GLTF].body);
            const i = this.options;
            return new Promise(function (t, r) {
              n.load(L(e.uri, i.path), t, void 0, function () {
                r(
                  new Error(
                    'THREE.GLTFLoader: Failed to load buffer "' + e.uri + '".'
                  )
                );
              });
            });
          }
          loadBufferView(t) {
            const e = this.json.bufferViews[t];
            return this.getDependency("buffer", e.buffer).then(function (t) {
              const n = e.byteLength || 0,
                i = e.byteOffset || 0;
              return t.slice(i, i + n);
            });
          }
          loadAccessor(t) {
            const e = this,
              n = this.json,
              r = this.json.accessors[t];
            if (void 0 === r.bufferView && void 0 === r.sparse)
              return Promise.resolve(null);
            const o = [];
            return (
              void 0 !== r.bufferView
                ? o.push(this.getDependency("bufferView", r.bufferView))
                : o.push(null),
              void 0 !== r.sparse &&
                (o.push(
                  this.getDependency("bufferView", r.sparse.indices.bufferView)
                ),
                o.push(
                  this.getDependency("bufferView", r.sparse.values.bufferView)
                )),
              Promise.all(o).then(function (t) {
                const o = t[0],
                  s = E[r.type],
                  a = w[r.componentType],
                  l = a.BYTES_PER_ELEMENT,
                  c = l * s,
                  u = r.byteOffset || 0,
                  h =
                    void 0 !== r.bufferView
                      ? n.bufferViews[r.bufferView].byteStride
                      : void 0,
                  d = !0 === r.normalized;
                let p, f;
                if (h && h !== c) {
                  const t = Math.floor(u / h),
                    n =
                      "InterleavedBuffer:" +
                      r.bufferView +
                      ":" +
                      r.componentType +
                      ":" +
                      t +
                      ":" +
                      r.count;
                  let c = e.cache.get(n);
                  c ||
                    ((p = new a(o, t * h, (r.count * h) / l)),
                    (c = new i.InterleavedBuffer(p, h / l)),
                    e.cache.add(n, c)),
                    (f = new i.InterleavedBufferAttribute(
                      c,
                      s,
                      (u % h) / l,
                      d
                    ));
                } else (p = null === o ? new a(r.count * s) : new a(o, u, r.count * s)), (f = new i.BufferAttribute(p, s, d));
                if (void 0 !== r.sparse) {
                  const e = E.SCALAR,
                    n = w[r.sparse.indices.componentType],
                    l = r.sparse.indices.byteOffset || 0,
                    c = r.sparse.values.byteOffset || 0,
                    u = new n(t[1], l, r.sparse.count * e),
                    h = new a(t[2], c, r.sparse.count * s);
                  null !== o &&
                    (f = new i.BufferAttribute(
                      f.array.slice(),
                      f.itemSize,
                      f.normalized
                    ));
                  for (let t = 0, e = u.length; t < e; t++) {
                    const e = u[t];
                    if (
                      (f.setX(e, h[t * s]),
                      s >= 2 && f.setY(e, h[t * s + 1]),
                      s >= 3 && f.setZ(e, h[t * s + 2]),
                      s >= 4 && f.setW(e, h[t * s + 3]),
                      s >= 5)
                    )
                      throw new Error(
                        "THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute."
                      );
                  }
                }
                return f;
              })
            );
          }
          loadTexture(t) {
            const e = this.json,
              n = this.options,
              i = e.textures[t],
              r = e.images[i.source];
            let o = this.textureLoader;
            if (r.uri) {
              const t = n.manager.getHandler(r.uri);
              null !== t && (o = t);
            }
            return this.loadTextureImage(t, r, o);
          }
          loadTextureImage(t, e, n) {
            const r = this,
              o = this.json,
              s = this.options,
              a = o.textures[t],
              l = (e.uri || e.bufferView) + ":" + a.sampler;
            if (this.textureCache[l]) return this.textureCache[l];
            const c = self.URL || self.webkitURL;
            let u = e.uri || "",
              h = !1,
              d = !0;
            const p =
              u.search(/\.jpe?g($|\?)/i) > 0 ||
              0 === u.search(/^data\:image\/jpeg/);
            if (
              (("image/jpeg" === e.mimeType || p) && (d = !1),
              void 0 !== e.bufferView)
            )
              u = r
                .getDependency("bufferView", e.bufferView)
                .then(function (t) {
                  if ("image/png" === e.mimeType) {
                    const e = new DataView(t, 25, 1).getUint8(0, !1);
                    d = 6 === e || 4 === e || 3 === e;
                  }
                  h = !0;
                  const n = new Blob([t], { type: e.mimeType });
                  return (u = c.createObjectURL(n)), u;
                });
            else if (void 0 === e.uri)
              throw new Error(
                "THREE.GLTFLoader: Image " +
                  t +
                  " is missing URI and bufferView"
              );
            const f = Promise.resolve(u)
              .then(function (t) {
                return new Promise(function (e, r) {
                  let o = e;
                  !0 === n.isImageBitmapLoader &&
                    (o = function (t) {
                      const n = new i.Texture(t);
                      (n.needsUpdate = !0), e(n);
                    }),
                    n.load(L(t, s.path), o, void 0, r);
                });
              })
              .then(function (e) {
                !0 === h && c.revokeObjectURL(u),
                  (e.flipY = !1),
                  a.name && (e.name = a.name),
                  d || (e.format = i.RGBFormat);
                const n = (o.samplers || {})[a.sampler] || {};
                return (
                  (e.magFilter = M[n.magFilter] || i.LinearFilter),
                  (e.minFilter = M[n.minFilter] || i.LinearMipmapLinearFilter),
                  (e.wrapS = S[n.wrapS] || i.RepeatWrapping),
                  (e.wrapT = S[n.wrapT] || i.RepeatWrapping),
                  r.associations.set(e, { type: "textures", index: t }),
                  e
                );
              })
              .catch(function () {
                return (
                  console.error("THREE.GLTFLoader: Couldn't load texture", u),
                  null
                );
              });
            return (this.textureCache[l] = f), f;
          }
          assignTexture(t, e, n) {
            const i = this;
            return this.getDependency("texture", n.index).then(function (r) {
              if (
                (void 0 === n.texCoord ||
                  0 == n.texCoord ||
                  ("aoMap" === e && 1 == n.texCoord) ||
                  console.warn(
                    "THREE.GLTFLoader: Custom UV set " +
                      n.texCoord +
                      " for texture " +
                      e +
                      " not yet supported."
                  ),
                i.extensions[s.KHR_TEXTURE_TRANSFORM])
              ) {
                const t =
                  void 0 !== n.extensions
                    ? n.extensions[s.KHR_TEXTURE_TRANSFORM]
                    : void 0;
                if (t) {
                  const e = i.associations.get(r);
                  (r = i.extensions[s.KHR_TEXTURE_TRANSFORM].extendTexture(
                    r,
                    t
                  )),
                    i.associations.set(r, e);
                }
              }
              t[e] = r;
            });
          }
          assignFinalMaterial(t) {
            const e = t.geometry;
            let n = t.material;
            const r = void 0 !== e.attributes.tangent,
              o = void 0 !== e.attributes.color,
              s = void 0 === e.attributes.normal,
              a = Object.keys(e.morphAttributes).length > 0,
              l = a && void 0 !== e.morphAttributes.normal;
            if (t.isPoints) {
              const t = "PointsMaterial:" + n.uuid;
              let e = this.cache.get(t);
              e ||
                ((e = new i.PointsMaterial()),
                i.Material.prototype.copy.call(e, n),
                e.color.copy(n.color),
                (e.map = n.map),
                (e.sizeAttenuation = !1),
                this.cache.add(t, e)),
                (n = e);
            } else if (t.isLine) {
              const t = "LineBasicMaterial:" + n.uuid;
              let e = this.cache.get(t);
              e ||
                ((e = new i.LineBasicMaterial()),
                i.Material.prototype.copy.call(e, n),
                e.color.copy(n.color),
                this.cache.add(t, e)),
                (n = e);
            }
            if (r || o || s || a) {
              let t = "ClonedMaterial:" + n.uuid + ":";
              n.isGLTFSpecularGlossinessMaterial &&
                (t += "specular-glossiness:"),
                r && (t += "vertex-tangents:"),
                o && (t += "vertex-colors:"),
                s && (t += "flat-shading:"),
                a && (t += "morph-targets:"),
                l && (t += "morph-normals:");
              let e = this.cache.get(t);
              e ||
                ((e = n.clone()),
                o && (e.vertexColors = !0),
                s && (e.flatShading = !0),
                a && (e.morphTargets = !0),
                l && (e.morphNormals = !0),
                r &&
                  ((e.vertexTangents = !0),
                  e.normalScale && (e.normalScale.y *= -1),
                  e.clearcoatNormalScale && (e.clearcoatNormalScale.y *= -1)),
                this.cache.add(t, e),
                this.associations.set(e, this.associations.get(n))),
                (n = e);
            }
            n.aoMap &&
              void 0 === e.attributes.uv2 &&
              void 0 !== e.attributes.uv &&
              e.setAttribute("uv2", e.attributes.uv),
              (t.material = n);
          }
          getMaterialType() {
            return i.MeshStandardMaterial;
          }
          loadMaterial(t) {
            const e = this,
              n = this.json,
              r = this.extensions,
              o = n.materials[t];
            let a;
            const l = {},
              c = o.extensions || {},
              u = [];
            if (c[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {
              const t = r[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];
              (a = t.getMaterialType()), u.push(t.extendParams(l, o, e));
            } else if (c[s.KHR_MATERIALS_UNLIT]) {
              const t = r[s.KHR_MATERIALS_UNLIT];
              (a = t.getMaterialType()), u.push(t.extendParams(l, o, e));
            } else {
              const n = o.pbrMetallicRoughness || {};
              if (
                ((l.color = new i.Color(1, 1, 1)),
                (l.opacity = 1),
                Array.isArray(n.baseColorFactor))
              ) {
                const t = n.baseColorFactor;
                l.color.fromArray(t), (l.opacity = t[3]);
              }
              void 0 !== n.baseColorTexture &&
                u.push(e.assignTexture(l, "map", n.baseColorTexture)),
                (l.metalness =
                  void 0 !== n.metallicFactor ? n.metallicFactor : 1),
                (l.roughness =
                  void 0 !== n.roughnessFactor ? n.roughnessFactor : 1),
                void 0 !== n.metallicRoughnessTexture &&
                  (u.push(
                    e.assignTexture(
                      l,
                      "metalnessMap",
                      n.metallicRoughnessTexture
                    )
                  ),
                  u.push(
                    e.assignTexture(
                      l,
                      "roughnessMap",
                      n.metallicRoughnessTexture
                    )
                  )),
                (a = this._invokeOne(function (e) {
                  return e.getMaterialType && e.getMaterialType(t);
                })),
                u.push(
                  Promise.all(
                    this._invokeAll(function (e) {
                      return (
                        e.extendMaterialParams && e.extendMaterialParams(t, l)
                      );
                    })
                  )
                );
            }
            !0 === o.doubleSided && (l.side = i.DoubleSide);
            const h = o.alphaMode || "OPAQUE";
            return (
              "BLEND" === h
                ? ((l.transparent = !0), (l.depthWrite = !1))
                : ((l.transparent = !1),
                  "MASK" === h &&
                    (l.alphaTest =
                      void 0 !== o.alphaCutoff ? o.alphaCutoff : 0.5)),
              void 0 !== o.normalTexture &&
                a !== i.MeshBasicMaterial &&
                (u.push(e.assignTexture(l, "normalMap", o.normalTexture)),
                (l.normalScale = new i.Vector2(1, -1)),
                void 0 !== o.normalTexture.scale &&
                  l.normalScale.set(
                    o.normalTexture.scale,
                    -o.normalTexture.scale
                  )),
              void 0 !== o.occlusionTexture &&
                a !== i.MeshBasicMaterial &&
                (u.push(e.assignTexture(l, "aoMap", o.occlusionTexture)),
                void 0 !== o.occlusionTexture.strength &&
                  (l.aoMapIntensity = o.occlusionTexture.strength)),
              void 0 !== o.emissiveFactor &&
                a !== i.MeshBasicMaterial &&
                (l.emissive = new i.Color().fromArray(o.emissiveFactor)),
              void 0 !== o.emissiveTexture &&
                a !== i.MeshBasicMaterial &&
                u.push(e.assignTexture(l, "emissiveMap", o.emissiveTexture)),
              Promise.all(u).then(function () {
                let n;
                return (
                  (n =
                    a === y
                      ? r[
                          s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS
                        ].createMaterial(l)
                      : new a(l)),
                  o.name && (n.name = o.name),
                  n.map && (n.map.encoding = i.sRGBEncoding),
                  n.emissiveMap && (n.emissiveMap.encoding = i.sRGBEncoding),
                  P(n, o),
                  e.associations.set(n, { type: "materials", index: t }),
                  o.extensions && R(r, n, o),
                  n
                );
              })
            );
          }
          createUniqueName(t) {
            const e = i.PropertyBinding.sanitizeNodeName(t || "");
            let n = e;
            for (let t = 1; this.nodeNamesUsed[n]; ++t) n = e + "_" + t;
            return (this.nodeNamesUsed[n] = !0), n;
          }
          loadGeometries(t) {
            const e = this,
              n = this.extensions,
              r = this.primitiveCache;
            function o(t) {
              return n[s.KHR_DRACO_MESH_COMPRESSION]
                .decodePrimitive(t, e)
                .then(function (n) {
                  return F(n, t, e);
                });
            }
            const a = [];
            for (let n = 0, l = t.length; n < l; n++) {
              const l = t[n],
                c = k(l),
                u = r[c];
              if (u) a.push(u.promise);
              else {
                let t;
                (t =
                  l.extensions && l.extensions[s.KHR_DRACO_MESH_COMPRESSION]
                    ? o(l)
                    : F(new i.BufferGeometry(), l, e)),
                  (r[c] = { primitive: l, promise: t }),
                  a.push(t);
              }
            }
            return Promise.all(a);
          }
          loadMesh(t) {
            const e = this,
              n = this.json,
              r = this.extensions,
              o = n.meshes[t],
              s = o.primitives,
              a = [];
            for (let t = 0, e = s.length; t < e; t++) {
              const e =
                void 0 === s[t].material
                  ? (void 0 === (l = this.cache).DefaultMaterial &&
                      (l.DefaultMaterial = new i.MeshStandardMaterial({
                        color: 16777215,
                        emissive: 0,
                        metalness: 1,
                        roughness: 1,
                        transparent: !1,
                        depthTest: !0,
                        side: i.FrontSide,
                      })),
                    l.DefaultMaterial)
                  : this.getDependency("material", s[t].material);
              a.push(e);
            }
            var l;
            return (
              a.push(e.loadGeometries(s)),
              Promise.all(a).then(function (n) {
                const a = n.slice(0, n.length - 1),
                  l = n[n.length - 1],
                  c = [];
                for (let n = 0, u = l.length; n < u; n++) {
                  const u = l[n],
                    h = s[n];
                  let d;
                  const p = a[n];
                  if (
                    4 === h.mode ||
                    5 === h.mode ||
                    6 === h.mode ||
                    void 0 === h.mode
                  )
                    (d =
                      !0 === o.isSkinnedMesh
                        ? new i.SkinnedMesh(u, p)
                        : new i.Mesh(u, p)),
                      !0 !== d.isSkinnedMesh ||
                        d.geometry.attributes.skinWeight.normalized ||
                        d.normalizeSkinWeights(),
                      5 === h.mode
                        ? (d.geometry = z(d.geometry, i.TriangleStripDrawMode))
                        : 6 === h.mode &&
                          (d.geometry = z(d.geometry, i.TriangleFanDrawMode));
                  else if (1 === h.mode) d = new i.LineSegments(u, p);
                  else if (3 === h.mode) d = new i.Line(u, p);
                  else if (2 === h.mode) d = new i.LineLoop(u, p);
                  else {
                    if (0 !== h.mode)
                      throw new Error(
                        "THREE.GLTFLoader: Primitive mode unsupported: " +
                          h.mode
                      );
                    d = new i.Points(u, p);
                  }
                  Object.keys(d.geometry.morphAttributes).length > 0 && O(d, o),
                    (d.name = e.createUniqueName(o.name || "mesh_" + t)),
                    P(d, o),
                    h.extensions && R(r, d, h),
                    e.assignFinalMaterial(d),
                    c.push(d);
                }
                if (1 === c.length) return c[0];
                const u = new i.Group();
                for (let t = 0, e = c.length; t < e; t++) u.add(c[t]);
                return u;
              })
            );
          }
          loadCamera(t) {
            let e;
            const n = this.json.cameras[t],
              r = n[n.type];
            if (r)
              return (
                "perspective" === n.type
                  ? (e = new i.PerspectiveCamera(
                      i.MathUtils.radToDeg(r.yfov),
                      r.aspectRatio || 1,
                      r.znear || 1,
                      r.zfar || 2e6
                    ))
                  : "orthographic" === n.type &&
                    (e = new i.OrthographicCamera(
                      -r.xmag,
                      r.xmag,
                      r.ymag,
                      -r.ymag,
                      r.znear,
                      r.zfar
                    )),
                n.name && (e.name = this.createUniqueName(n.name)),
                P(e, n),
                Promise.resolve(e)
              );
            console.warn("THREE.GLTFLoader: Missing camera parameters.");
          }
          loadSkin(t) {
            const e = this.json.skins[t],
              n = { joints: e.joints };
            return void 0 === e.inverseBindMatrices
              ? Promise.resolve(n)
              : this.getDependency("accessor", e.inverseBindMatrices).then(
                  function (t) {
                    return (n.inverseBindMatrices = t), n;
                  }
                );
          }
          loadAnimation(t) {
            const e = this.json.animations[t],
              n = [],
              r = [],
              o = [],
              s = [],
              a = [];
            for (let t = 0, i = e.channels.length; t < i; t++) {
              const i = e.channels[t],
                l = e.samplers[i.sampler],
                c = i.target,
                u = void 0 !== c.node ? c.node : c.id,
                h = void 0 !== e.parameters ? e.parameters[l.input] : l.input,
                d = void 0 !== e.parameters ? e.parameters[l.output] : l.output;
              n.push(this.getDependency("node", u)),
                r.push(this.getDependency("accessor", h)),
                o.push(this.getDependency("accessor", d)),
                s.push(l),
                a.push(c);
            }
            return Promise.all([
              Promise.all(n),
              Promise.all(r),
              Promise.all(o),
              Promise.all(s),
              Promise.all(a),
            ]).then(function (n) {
              const r = n[0],
                o = n[1],
                s = n[2],
                a = n[3],
                l = n[4],
                c = [];
              for (let t = 0, e = r.length; t < e; t++) {
                const e = r[t],
                  n = o[t],
                  u = s[t],
                  h = a[t],
                  d = l[t];
                if (void 0 === e) continue;
                let p;
                switch (
                  (e.updateMatrix(), (e.matrixAutoUpdate = !0), A[d.path])
                ) {
                  case A.weights:
                    p = i.NumberKeyframeTrack;
                    break;
                  case A.rotation:
                    p = i.QuaternionKeyframeTrack;
                    break;
                  case A.position:
                  case A.scale:
                  default:
                    p = i.VectorKeyframeTrack;
                }
                const f = e.name ? e.name : e.uuid,
                  m =
                    void 0 !== h.interpolation
                      ? C[h.interpolation]
                      : i.InterpolateLinear,
                  g = [];
                A[d.path] === A.weights
                  ? e.traverse(function (t) {
                      !0 === t.isMesh &&
                        t.morphTargetInfluences &&
                        g.push(t.name ? t.name : t.uuid);
                    })
                  : g.push(f);
                let v = u.array;
                if (u.normalized) {
                  const t = D(v.constructor),
                    e = new Float32Array(v.length);
                  for (let n = 0, i = v.length; n < i; n++) e[n] = v[n] * t;
                  v = e;
                }
                for (let t = 0, e = g.length; t < e; t++) {
                  const e = new p(g[t] + "." + A[d.path], n.array, v, m);
                  "CUBICSPLINE" === h.interpolation &&
                    ((e.createInterpolant = function (t) {
                      return new b(
                        this.times,
                        this.values,
                        this.getValueSize() / 3,
                        t
                      );
                    }),
                    (e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline =
                      !0)),
                    c.push(e);
                }
              }
              const u = e.name ? e.name : "animation_" + t;
              return new i.AnimationClip(u, void 0, c);
            });
          }
          createNodeMesh(t) {
            const e = this.json,
              n = this,
              i = e.nodes[t];
            return void 0 === i.mesh
              ? null
              : n.getDependency("mesh", i.mesh).then(function (t) {
                  const e = n._getNodeRef(n.meshCache, i.mesh, t);
                  return (
                    void 0 !== i.weights &&
                      e.traverse(function (t) {
                        if (t.isMesh)
                          for (let e = 0, n = i.weights.length; e < n; e++)
                            t.morphTargetInfluences[e] = i.weights[e];
                      }),
                    e
                  );
                });
          }
          loadNode(t) {
            const e = this.json,
              n = this.extensions,
              r = this,
              o = e.nodes[t],
              s = o.name ? r.createUniqueName(o.name) : "";
            return (function () {
              const e = [],
                n = r._invokeOne(function (e) {
                  return e.createNodeMesh && e.createNodeMesh(t);
                });
              return (
                n && e.push(n),
                void 0 !== o.camera &&
                  e.push(
                    r.getDependency("camera", o.camera).then(function (t) {
                      return r._getNodeRef(r.cameraCache, o.camera, t);
                    })
                  ),
                r
                  ._invokeAll(function (e) {
                    return e.createNodeAttachment && e.createNodeAttachment(t);
                  })
                  .forEach(function (t) {
                    e.push(t);
                  }),
                Promise.all(e)
              );
            })().then(function (e) {
              let a;
              if (
                ((a =
                  !0 === o.isBone
                    ? new i.Bone()
                    : e.length > 1
                    ? new i.Group()
                    : 1 === e.length
                    ? e[0]
                    : new i.Object3D()),
                a !== e[0])
              )
                for (let t = 0, n = e.length; t < n; t++) a.add(e[t]);
              if (
                (o.name && ((a.userData.name = o.name), (a.name = s)),
                P(a, o),
                o.extensions && R(n, a, o),
                void 0 !== o.matrix)
              ) {
                const t = new i.Matrix4();
                t.fromArray(o.matrix), a.applyMatrix4(t);
              } else void 0 !== o.translation && a.position.fromArray(o.translation), void 0 !== o.rotation && a.quaternion.fromArray(o.rotation), void 0 !== o.scale && a.scale.fromArray(o.scale);
              return r.associations.set(a, { type: "nodes", index: t }), a;
            });
          }
          loadScene(t) {
            const e = this.json,
              n = this.extensions,
              r = this.json.scenes[t],
              o = this,
              s = new i.Group();
            r.name && (s.name = o.createUniqueName(r.name)),
              P(s, r),
              r.extensions && R(n, s, r);
            const a = r.nodes || [],
              l = [];
            for (let t = 0, n = a.length; t < n; t++) l.push(N(a[t], s, e, o));
            return Promise.all(l).then(function () {
              return s;
            });
          }
        }
        function N(t, e, n, r) {
          const o = n.nodes[t];
          return r
            .getDependency("node", t)
            .then(function (t) {
              if (void 0 === o.skin) return t;
              let e;
              return r
                .getDependency("skin", o.skin)
                .then(function (t) {
                  e = t;
                  const n = [];
                  for (let t = 0, i = e.joints.length; t < i; t++)
                    n.push(r.getDependency("node", e.joints[t]));
                  return Promise.all(n);
                })
                .then(function (n) {
                  return (
                    t.traverse(function (t) {
                      if (!t.isMesh) return;
                      const r = [],
                        o = [];
                      for (let t = 0, s = n.length; t < s; t++) {
                        const s = n[t];
                        if (s) {
                          r.push(s);
                          const n = new i.Matrix4();
                          void 0 !== e.inverseBindMatrices &&
                            n.fromArray(e.inverseBindMatrices.array, 16 * t),
                            o.push(n);
                        } else
                          console.warn(
                            'THREE.GLTFLoader: Joint "%s" could not be found.',
                            e.joints[t]
                          );
                      }
                      t.bind(new i.Skeleton(r, o), t.matrixWorld);
                    }),
                    t
                  );
                });
            })
            .then(function (t) {
              e.add(t);
              const i = [];
              if (o.children) {
                const e = o.children;
                for (let o = 0, s = e.length; o < s; o++) {
                  const s = e[o];
                  i.push(N(s, t, n, r));
                }
              }
              return Promise.all(i);
            });
        }
        function F(t, e, n) {
          const r = e.attributes,
            o = [];
          function s(e, i) {
            return n.getDependency("accessor", e).then(function (e) {
              t.setAttribute(i, e);
            });
          }
          for (const e in r) {
            const n = T[e] || e.toLowerCase();
            n in t.attributes || o.push(s(r[e], n));
          }
          if (void 0 !== e.indices && !t.index) {
            const i = n.getDependency("accessor", e.indices).then(function (e) {
              t.setIndex(e);
            });
            o.push(i);
          }
          return (
            P(t, e),
            (function (t, e, n) {
              const r = e.attributes,
                o = new i.Box3();
              if (void 0 === r.POSITION) return;
              {
                const t = n.json.accessors[r.POSITION],
                  e = t.min,
                  s = t.max;
                if (void 0 === e || void 0 === s)
                  return void console.warn(
                    "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                  );
                if (
                  (o.set(
                    new i.Vector3(e[0], e[1], e[2]),
                    new i.Vector3(s[0], s[1], s[2])
                  ),
                  t.normalized)
                ) {
                  const e = D(w[t.componentType]);
                  o.min.multiplyScalar(e), o.max.multiplyScalar(e);
                }
              }
              const s = e.targets;
              if (void 0 !== s) {
                const t = new i.Vector3(),
                  e = new i.Vector3();
                for (let i = 0, r = s.length; i < r; i++) {
                  const r = s[i];
                  if (void 0 !== r.POSITION) {
                    const i = n.json.accessors[r.POSITION],
                      o = i.min,
                      s = i.max;
                    if (void 0 !== o && void 0 !== s) {
                      if (
                        (e.setX(Math.max(Math.abs(o[0]), Math.abs(s[0]))),
                        e.setY(Math.max(Math.abs(o[1]), Math.abs(s[1]))),
                        e.setZ(Math.max(Math.abs(o[2]), Math.abs(s[2]))),
                        i.normalized)
                      ) {
                        const t = D(w[i.componentType]);
                        e.multiplyScalar(t);
                      }
                      t.max(e);
                    } else
                      console.warn(
                        "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                      );
                  }
                }
                o.expandByVector(t);
              }
              t.boundingBox = o;
              const a = new i.Sphere();
              o.getCenter(a.center),
                (a.radius = o.min.distanceTo(o.max) / 2),
                (t.boundingSphere = a);
            })(t, e, n),
            Promise.all(o).then(function () {
              return void 0 !== e.targets
                ? (function (t, e, n) {
                    let i = !1,
                      r = !1;
                    for (let t = 0, n = e.length; t < n; t++) {
                      const n = e[t];
                      if (
                        (void 0 !== n.POSITION && (i = !0),
                        void 0 !== n.NORMAL && (r = !0),
                        i && r)
                      )
                        break;
                    }
                    if (!i && !r) return Promise.resolve(t);
                    const o = [],
                      s = [];
                    for (let a = 0, l = e.length; a < l; a++) {
                      const l = e[a];
                      if (i) {
                        const e =
                          void 0 !== l.POSITION
                            ? n.getDependency("accessor", l.POSITION)
                            : t.attributes.position;
                        o.push(e);
                      }
                      if (r) {
                        const e =
                          void 0 !== l.NORMAL
                            ? n.getDependency("accessor", l.NORMAL)
                            : t.attributes.normal;
                        s.push(e);
                      }
                    }
                    return Promise.all([Promise.all(o), Promise.all(s)]).then(
                      function (e) {
                        const n = e[0],
                          o = e[1];
                        return (
                          i && (t.morphAttributes.position = n),
                          r && (t.morphAttributes.normal = o),
                          (t.morphTargetsRelative = !0),
                          t
                        );
                      }
                    );
                  })(t, e.targets, n)
                : t;
            })
          );
        }
        function z(t, e) {
          let n = t.getIndex();
          if (null === n) {
            const e = [],
              i = t.getAttribute("position");
            if (void 0 === i)
              return (
                console.error(
                  "THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."
                ),
                t
              );
            for (let t = 0; t < i.count; t++) e.push(t);
            t.setIndex(e), (n = t.getIndex());
          }
          const r = n.count - 2,
            o = [];
          if (e === i.TriangleFanDrawMode)
            for (let t = 1; t <= r; t++)
              o.push(n.getX(0)), o.push(n.getX(t)), o.push(n.getX(t + 1));
          else
            for (let t = 0; t < r; t++)
              t % 2 == 0
                ? (o.push(n.getX(t)),
                  o.push(n.getX(t + 1)),
                  o.push(n.getX(t + 2)))
                : (o.push(n.getX(t + 2)),
                  o.push(n.getX(t + 1)),
                  o.push(n.getX(t)));
          o.length / 3 !== r &&
            console.error(
              "THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles."
            );
          const s = t.clone();
          return s.setIndex(o), s;
        }
      },
      533: (t, e, n) => {
        "use strict";
        n.d(e, { z: () => a });
        var i = n(365);
        const r = { type: "change" },
          o = { type: "start" },
          s = { type: "end" };
        class a extends i.EventDispatcher {
          constructor(t, e) {
            super(),
              void 0 === e &&
                console.warn(
                  'THREE.OrbitControls: The second parameter "domElement" is now mandatory.'
                ),
              e === document &&
                console.error(
                  'THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'
                ),
              (this.object = t),
              (this.domElement = e),
              (this.domElement.style.touchAction = "none"),
              (this.enabled = !0),
              (this.target = new i.Vector3()),
              (this.minDistance = 0),
              (this.maxDistance = 1 / 0),
              (this.minZoom = 0),
              (this.maxZoom = 1 / 0),
              (this.minPolarAngle = 0),
              (this.maxPolarAngle = Math.PI),
              (this.minAzimuthAngle = -1 / 0),
              (this.maxAzimuthAngle = 1 / 0),
              (this.enableDamping = !1),
              (this.dampingFactor = 0.05),
              (this.enableZoom = !0),
              (this.zoomSpeed = 1),
              (this.enableRotate = !0),
              (this.rotateSpeed = 1),
              (this.enablePan = !0),
              (this.panSpeed = 1),
              (this.screenSpacePanning = !0),
              (this.keyPanSpeed = 7),
              (this.autoRotate = !1),
              (this.autoRotateSpeed = 2),
              (this.keys = {
                LEFT: "ArrowLeft",
                UP: "ArrowUp",
                RIGHT: "ArrowRight",
                BOTTOM: "ArrowDown",
              }),
              (this.mouseButtons = {
                LEFT: i.MOUSE.ROTATE,
                MIDDLE: i.MOUSE.DOLLY,
                RIGHT: i.MOUSE.PAN,
              }),
              (this.touches = { ONE: i.TOUCH.ROTATE, TWO: i.TOUCH.DOLLY_PAN }),
              (this.target0 = this.target.clone()),
              (this.position0 = this.object.position.clone()),
              (this.zoom0 = this.object.zoom),
              (this._domElementKeyEvents = null),
              (this.getPolarAngle = function () {
                return u.phi;
              }),
              (this.getAzimuthalAngle = function () {
                return u.theta;
              }),
              (this.getDistance = function () {
                return this.object.position.distanceTo(this.target);
              }),
              (this.listenToKeyEvents = function (t) {
                t.addEventListener("keydown", X),
                  (this._domElementKeyEvents = t);
              }),
              (this.saveState = function () {
                n.target0.copy(n.target),
                  n.position0.copy(n.object.position),
                  (n.zoom0 = n.object.zoom);
              }),
              (this.reset = function () {
                n.target.copy(n.target0),
                  n.object.position.copy(n.position0),
                  (n.object.zoom = n.zoom0),
                  n.object.updateProjectionMatrix(),
                  n.dispatchEvent(r),
                  n.update(),
                  (l = a.NONE);
              }),
              (this.update = (function () {
                const e = new i.Vector3(),
                  o = new i.Quaternion().setFromUnitVectors(
                    t.up,
                    new i.Vector3(0, 1, 0)
                  ),
                  s = o.clone().invert(),
                  m = new i.Vector3(),
                  g = new i.Quaternion(),
                  v = 2 * Math.PI;
                return function () {
                  const t = n.object.position;
                  e.copy(t).sub(n.target),
                    e.applyQuaternion(o),
                    u.setFromVector3(e),
                    n.autoRotate &&
                      l === a.NONE &&
                      A(((2 * Math.PI) / 60 / 60) * n.autoRotateSpeed),
                    n.enableDamping
                      ? ((u.theta += h.theta * n.dampingFactor),
                        (u.phi += h.phi * n.dampingFactor))
                      : ((u.theta += h.theta), (u.phi += h.phi));
                  let i = n.minAzimuthAngle,
                    y = n.maxAzimuthAngle;
                  return (
                    isFinite(i) &&
                      isFinite(y) &&
                      (i < -Math.PI ? (i += v) : i > Math.PI && (i -= v),
                      y < -Math.PI ? (y += v) : y > Math.PI && (y -= v),
                      (u.theta =
                        i <= y
                          ? Math.max(i, Math.min(y, u.theta))
                          : u.theta > (i + y) / 2
                          ? Math.max(i, u.theta)
                          : Math.min(y, u.theta))),
                    (u.phi = Math.max(
                      n.minPolarAngle,
                      Math.min(n.maxPolarAngle, u.phi)
                    )),
                    u.makeSafe(),
                    (u.radius *= d),
                    (u.radius = Math.max(
                      n.minDistance,
                      Math.min(n.maxDistance, u.radius)
                    )),
                    !0 === n.enableDamping
                      ? n.target.addScaledVector(p, n.dampingFactor)
                      : n.target.add(p),
                    e.setFromSpherical(u),
                    e.applyQuaternion(s),
                    t.copy(n.target).add(e),
                    n.object.lookAt(n.target),
                    !0 === n.enableDamping
                      ? ((h.theta *= 1 - n.dampingFactor),
                        (h.phi *= 1 - n.dampingFactor),
                        p.multiplyScalar(1 - n.dampingFactor))
                      : (h.set(0, 0, 0), p.set(0, 0, 0)),
                    (d = 1),
                    !!(
                      f ||
                      m.distanceToSquared(n.object.position) > c ||
                      8 * (1 - g.dot(n.object.quaternion)) > c
                    ) &&
                      (n.dispatchEvent(r),
                      m.copy(n.object.position),
                      g.copy(n.object.quaternion),
                      (f = !1),
                      !0)
                  );
                };
              })()),
              (this.dispose = function () {
                n.domElement.removeEventListener("contextmenu", Y),
                  n.domElement.removeEventListener("pointerdown", U),
                  n.domElement.removeEventListener("pointercancel", W),
                  n.domElement.removeEventListener("wheel", q),
                  n.domElement.removeEventListener("pointermove", V),
                  n.domElement.removeEventListener("pointerup", G),
                  null !== n._domElementKeyEvents &&
                    n._domElementKeyEvents.removeEventListener("keydown", X);
              });
            const n = this,
              a = {
                NONE: -1,
                ROTATE: 0,
                DOLLY: 1,
                PAN: 2,
                TOUCH_ROTATE: 3,
                TOUCH_PAN: 4,
                TOUCH_DOLLY_PAN: 5,
                TOUCH_DOLLY_ROTATE: 6,
              };
            let l = a.NONE;
            const c = 1e-6,
              u = new i.Spherical(),
              h = new i.Spherical();
            let d = 1;
            const p = new i.Vector3();
            let f = !1;
            const m = new i.Vector2(),
              g = new i.Vector2(),
              v = new i.Vector2(),
              y = new i.Vector2(),
              x = new i.Vector2(),
              _ = new i.Vector2(),
              b = new i.Vector2(),
              w = new i.Vector2(),
              M = new i.Vector2(),
              S = [],
              E = {};
            function T() {
              return Math.pow(0.95, n.zoomSpeed);
            }
            function A(t) {
              h.theta -= t;
            }
            function C(t) {
              h.phi -= t;
            }
            const L = (function () {
                const t = new i.Vector3();
                return function (e, n) {
                  t.setFromMatrixColumn(n, 0), t.multiplyScalar(-e), p.add(t);
                };
              })(),
              R = (function () {
                const t = new i.Vector3();
                return function (e, i) {
                  !0 === n.screenSpacePanning
                    ? t.setFromMatrixColumn(i, 1)
                    : (t.setFromMatrixColumn(i, 0),
                      t.crossVectors(n.object.up, t)),
                    t.multiplyScalar(e),
                    p.add(t);
                };
              })(),
              P = (function () {
                const t = new i.Vector3();
                return function (e, i) {
                  const r = n.domElement;
                  if (n.object.isPerspectiveCamera) {
                    const o = n.object.position;
                    t.copy(o).sub(n.target);
                    let s = t.length();
                    (s *= Math.tan(((n.object.fov / 2) * Math.PI) / 180)),
                      L((2 * e * s) / r.clientHeight, n.object.matrix),
                      R((2 * i * s) / r.clientHeight, n.object.matrix);
                  } else
                    n.object.isOrthographicCamera
                      ? (L(
                          (e * (n.object.right - n.object.left)) /
                            n.object.zoom /
                            r.clientWidth,
                          n.object.matrix
                        ),
                        R(
                          (i * (n.object.top - n.object.bottom)) /
                            n.object.zoom /
                            r.clientHeight,
                          n.object.matrix
                        ))
                      : (console.warn(
                          "WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."
                        ),
                        (n.enablePan = !1));
                };
              })();
            function O(t) {
              n.object.isPerspectiveCamera
                ? (d /= t)
                : n.object.isOrthographicCamera
                ? ((n.object.zoom = Math.max(
                    n.minZoom,
                    Math.min(n.maxZoom, n.object.zoom * t)
                  )),
                  n.object.updateProjectionMatrix(),
                  (f = !0))
                : (console.warn(
                    "WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."
                  ),
                  (n.enableZoom = !1));
            }
            function k(t) {
              n.object.isPerspectiveCamera
                ? (d *= t)
                : n.object.isOrthographicCamera
                ? ((n.object.zoom = Math.max(
                    n.minZoom,
                    Math.min(n.maxZoom, n.object.zoom / t)
                  )),
                  n.object.updateProjectionMatrix(),
                  (f = !0))
                : (console.warn(
                    "WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."
                  ),
                  (n.enableZoom = !1));
            }
            function I(t) {
              m.set(t.clientX, t.clientY);
            }
            function D(t) {
              y.set(t.clientX, t.clientY);
            }
            function B() {
              if (1 === S.length) m.set(S[0].pageX, S[0].pageY);
              else {
                const t = 0.5 * (S[0].pageX + S[1].pageX),
                  e = 0.5 * (S[0].pageY + S[1].pageY);
                m.set(t, e);
              }
            }
            function N() {
              if (1 === S.length) y.set(S[0].pageX, S[0].pageY);
              else {
                const t = 0.5 * (S[0].pageX + S[1].pageX),
                  e = 0.5 * (S[0].pageY + S[1].pageY);
                y.set(t, e);
              }
            }
            function F() {
              const t = S[0].pageX - S[1].pageX,
                e = S[0].pageY - S[1].pageY,
                n = Math.sqrt(t * t + e * e);
              b.set(0, n);
            }
            function z(t) {
              if (1 == S.length) g.set(t.pageX, t.pageY);
              else {
                const e = J(t),
                  n = 0.5 * (t.pageX + e.x),
                  i = 0.5 * (t.pageY + e.y);
                g.set(n, i);
              }
              v.subVectors(g, m).multiplyScalar(n.rotateSpeed);
              const e = n.domElement;
              A((2 * Math.PI * v.x) / e.clientHeight),
                C((2 * Math.PI * v.y) / e.clientHeight),
                m.copy(g);
            }
            function H(t) {
              if (1 === S.length) x.set(t.pageX, t.pageY);
              else {
                const e = J(t),
                  n = 0.5 * (t.pageX + e.x),
                  i = 0.5 * (t.pageY + e.y);
                x.set(n, i);
              }
              _.subVectors(x, y).multiplyScalar(n.panSpeed),
                P(_.x, _.y),
                y.copy(x);
            }
            function j(t) {
              const e = J(t),
                i = t.pageX - e.x,
                r = t.pageY - e.y,
                o = Math.sqrt(i * i + r * r);
              w.set(0, o),
                M.set(0, Math.pow(w.y / b.y, n.zoomSpeed)),
                O(M.y),
                b.copy(w);
            }
            function U(t) {
              !1 !== n.enabled &&
                (0 === S.length &&
                  (n.domElement.setPointerCapture(t.pointerId),
                  n.domElement.addEventListener("pointermove", V),
                  n.domElement.addEventListener("pointerup", G)),
                (function (t) {
                  S.push(t);
                })(t),
                "touch" === t.pointerType
                  ? (function (t) {
                      switch ((K(t), S.length)) {
                        case 1:
                          switch (n.touches.ONE) {
                            case i.TOUCH.ROTATE:
                              if (!1 === n.enableRotate) return;
                              B(), (l = a.TOUCH_ROTATE);
                              break;
                            case i.TOUCH.PAN:
                              if (!1 === n.enablePan) return;
                              N(), (l = a.TOUCH_PAN);
                              break;
                            default:
                              l = a.NONE;
                          }
                          break;
                        case 2:
                          switch (n.touches.TWO) {
                            case i.TOUCH.DOLLY_PAN:
                              if (!1 === n.enableZoom && !1 === n.enablePan)
                                return;
                              n.enableZoom && F(),
                                n.enablePan && N(),
                                (l = a.TOUCH_DOLLY_PAN);
                              break;
                            case i.TOUCH.DOLLY_ROTATE:
                              if (!1 === n.enableZoom && !1 === n.enableRotate)
                                return;
                              n.enableZoom && F(),
                                n.enableRotate && B(),
                                (l = a.TOUCH_DOLLY_ROTATE);
                              break;
                            default:
                              l = a.NONE;
                          }
                          break;
                        default:
                          l = a.NONE;
                      }
                      l !== a.NONE && n.dispatchEvent(o);
                    })(t)
                  : (function (t) {
                      let e;
                      switch (t.button) {
                        case 0:
                          e = n.mouseButtons.LEFT;
                          break;
                        case 1:
                          e = n.mouseButtons.MIDDLE;
                          break;
                        case 2:
                          e = n.mouseButtons.RIGHT;
                          break;
                        default:
                          e = -1;
                      }
                      switch (e) {
                        case i.MOUSE.DOLLY:
                          if (!1 === n.enableZoom) return;
                          !(function (t) {
                            b.set(t.clientX, t.clientY);
                          })(t),
                            (l = a.DOLLY);
                          break;
                        case i.MOUSE.ROTATE:
                          if (t.ctrlKey || t.metaKey || t.shiftKey) {
                            if (!1 === n.enablePan) return;
                            D(t), (l = a.PAN);
                          } else {
                            if (!1 === n.enableRotate) return;
                            I(t), (l = a.ROTATE);
                          }
                          break;
                        case i.MOUSE.PAN:
                          if (t.ctrlKey || t.metaKey || t.shiftKey) {
                            if (!1 === n.enableRotate) return;
                            I(t), (l = a.ROTATE);
                          } else {
                            if (!1 === n.enablePan) return;
                            D(t), (l = a.PAN);
                          }
                          break;
                        default:
                          l = a.NONE;
                      }
                      l !== a.NONE && n.dispatchEvent(o);
                    })(t));
            }
            function V(t) {
              !1 !== n.enabled &&
                ("touch" === t.pointerType
                  ? (function (t) {
                      switch ((K(t), l)) {
                        case a.TOUCH_ROTATE:
                          if (!1 === n.enableRotate) return;
                          z(t), n.update();
                          break;
                        case a.TOUCH_PAN:
                          if (!1 === n.enablePan) return;
                          H(t), n.update();
                          break;
                        case a.TOUCH_DOLLY_PAN:
                          if (!1 === n.enableZoom && !1 === n.enablePan) return;
                          !(function (t) {
                            n.enableZoom && j(t), n.enablePan && H(t);
                          })(t),
                            n.update();
                          break;
                        case a.TOUCH_DOLLY_ROTATE:
                          if (!1 === n.enableZoom && !1 === n.enableRotate)
                            return;
                          !(function (t) {
                            n.enableZoom && j(t), n.enableRotate && z(t);
                          })(t),
                            n.update();
                          break;
                        default:
                          l = a.NONE;
                      }
                    })(t)
                  : (function (t) {
                      if (!1 !== n.enabled)
                        switch (l) {
                          case a.ROTATE:
                            if (!1 === n.enableRotate) return;
                            !(function (t) {
                              g.set(t.clientX, t.clientY),
                                v
                                  .subVectors(g, m)
                                  .multiplyScalar(n.rotateSpeed);
                              const e = n.domElement;
                              A((2 * Math.PI * v.x) / e.clientHeight),
                                C((2 * Math.PI * v.y) / e.clientHeight),
                                m.copy(g),
                                n.update();
                            })(t);
                            break;
                          case a.DOLLY:
                            if (!1 === n.enableZoom) return;
                            !(function (t) {
                              w.set(t.clientX, t.clientY),
                                M.subVectors(w, b),
                                M.y > 0 ? O(T()) : M.y < 0 && k(T()),
                                b.copy(w),
                                n.update();
                            })(t);
                            break;
                          case a.PAN:
                            if (!1 === n.enablePan) return;
                            !(function (t) {
                              x.set(t.clientX, t.clientY),
                                _.subVectors(x, y).multiplyScalar(n.panSpeed),
                                P(_.x, _.y),
                                y.copy(x),
                                n.update();
                            })(t);
                        }
                    })(t));
            }
            function G(t) {
              !1 !== n.enabled &&
                (t.pointerType,
                n.dispatchEvent(s),
                (l = a.NONE),
                $(t),
                0 === S.length &&
                  (n.domElement.releasePointerCapture(t.pointerId),
                  n.domElement.removeEventListener("pointermove", V),
                  n.domElement.removeEventListener("pointerup", G)));
            }
            function W(t) {
              $(t);
            }
            function q(t) {
              !1 === n.enabled ||
                !1 === n.enableZoom ||
                (l !== a.NONE && l !== a.ROTATE) ||
                (t.preventDefault(),
                n.dispatchEvent(o),
                (function (t) {
                  t.deltaY < 0 ? k(T()) : t.deltaY > 0 && O(T()), n.update();
                })(t),
                n.dispatchEvent(s));
            }
            function X(t) {
              !1 !== n.enabled &&
                !1 !== n.enablePan &&
                (function (t) {
                  let e = !1;
                  switch (t.code) {
                    case n.keys.UP:
                      P(0, n.keyPanSpeed), (e = !0);
                      break;
                    case n.keys.BOTTOM:
                      P(0, -n.keyPanSpeed), (e = !0);
                      break;
                    case n.keys.LEFT:
                      P(n.keyPanSpeed, 0), (e = !0);
                      break;
                    case n.keys.RIGHT:
                      P(-n.keyPanSpeed, 0), (e = !0);
                  }
                  e && (t.preventDefault(), n.update());
                })(t);
            }
            function Y(t) {
              !1 !== n.enabled && t.preventDefault();
            }
            function $(t) {
              delete E[t.pointerId];
              for (let e = 0; e < S.length; e++)
                if (S[e].pointerId == t.pointerId) return void S.splice(e, 1);
            }
            function K(t) {
              let e = E[t.pointerId];
              void 0 === e && ((e = new i.Vector2()), (E[t.pointerId] = e)),
                e.set(t.pageX, t.pageY);
            }
            function J(t) {
              const e = t.pointerId === S[0].pointerId ? S[1] : S[0];
              return E[e.pointerId];
            }
            n.domElement.addEventListener("contextmenu", Y),
              n.domElement.addEventListener("pointerdown", U),
              n.domElement.addEventListener("pointercancel", W),
              n.domElement.addEventListener("wheel", q, { passive: !1 }),
              this.update();
          }
        }
      },
      202: (t, e, n) => {
        "use strict";
        n.d(e, { q: () => u });
        var i = n(365);
        const r = new i.Euler(0, 0, 0, "YXZ"),
          o = new i.Vector3(),
          s = { type: "change" },
          a = { type: "lock" },
          l = { type: "unlock" },
          c = Math.PI / 2;
        class u extends i.EventDispatcher {
          constructor(t, e) {
            super(),
              void 0 === e &&
                (console.warn(
                  'THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'
                ),
                (e = document.body)),
              (this.domElement = e),
              (this.isLocked = !1),
              (this.minPolarAngle = 0),
              (this.maxPolarAngle = Math.PI);
            const n = this;
            function u(e) {
              if (!1 === n.isLocked) return;
              const i = e.movementX || e.mozMovementX || e.webkitMovementX || 0,
                o = e.movementY || e.mozMovementY || e.webkitMovementY || 0;
              r.setFromQuaternion(t.quaternion),
                (r.y -= 0.002 * i),
                (r.x -= 0.002 * o),
                (r.x = Math.max(
                  c - n.maxPolarAngle,
                  Math.min(c - n.minPolarAngle, r.x)
                )),
                t.quaternion.setFromEuler(r),
                n.dispatchEvent(s);
            }
            function h() {
              n.domElement.ownerDocument.pointerLockElement === n.domElement
                ? (n.dispatchEvent(a), (n.isLocked = !0))
                : (n.dispatchEvent(l), (n.isLocked = !1));
            }
            function d() {
              console.error(
                "THREE.PointerLockControls: Unable to use Pointer Lock API"
              );
            }
            (this.connect = function () {
              n.domElement.ownerDocument.addEventListener("mousemove", u),
                n.domElement.ownerDocument.addEventListener(
                  "pointerlockchange",
                  h
                ),
                n.domElement.ownerDocument.addEventListener(
                  "pointerlockerror",
                  d
                );
            }),
              (this.disconnect = function () {
                n.domElement.ownerDocument.removeEventListener("mousemove", u),
                  n.domElement.ownerDocument.removeEventListener(
                    "pointerlockchange",
                    h
                  ),
                  n.domElement.ownerDocument.removeEventListener(
                    "pointerlockerror",
                    d
                  );
              }),
              (this.dispose = function () {
                this.disconnect();
              }),
              (this.getObject = function () {
                return t;
              }),
              (this.getDirection = (function () {
                const e = new i.Vector3(0, 0, -1);
                return function (n) {
                  return n.copy(e).applyQuaternion(t.quaternion);
                };
              })()),
              (this.moveForward = function (e) {
                o.setFromMatrixColumn(t.matrix, 0),
                  o.crossVectors(t.up, o),
                  t.position.addScaledVector(o, e);
              }),
              (this.moveRight = function (e) {
                o.setFromMatrixColumn(t.matrix, 0),
                  t.position.addScaledVector(o, e);
              }),
              (this.lock = function () {
                this.domElement.requestPointerLock();
              }),
              (this.unlock = function () {
                n.domElement.ownerDocument.exitPointerLock();
              }),
              this.connect();
          }
        }
      },
      128: (t, e, n) => {
        "use strict";
        n.d(e, { B: () => r });
        var i = n(365);
        class r extends i.Mesh {
          constructor(t, e = {}) {
            super(t);
            const n = this,
              r = void 0 !== e.textureWidth ? e.textureWidth : 512,
              o = void 0 !== e.textureHeight ? e.textureHeight : 512,
              s = void 0 !== e.clipBias ? e.clipBias : 0,
              a = void 0 !== e.alpha ? e.alpha : 1,
              l = void 0 !== e.time ? e.time : 0,
              c = void 0 !== e.waterNormals ? e.waterNormals : null,
              u =
                void 0 !== e.sunDirection
                  ? e.sunDirection
                  : new i.Vector3(0.70707, 0.70707, 0),
              h = new i.Color(void 0 !== e.sunColor ? e.sunColor : 16777215),
              d = new i.Color(void 0 !== e.waterColor ? e.waterColor : 8355711),
              p = void 0 !== e.eye ? e.eye : new i.Vector3(0, 0, 0),
              f = void 0 !== e.distortionScale ? e.distortionScale : 20,
              m = void 0 !== e.side ? e.side : i.FrontSide,
              g = void 0 !== e.fog && e.fog,
              v = new i.Plane(),
              y = new i.Vector3(),
              x = new i.Vector3(),
              _ = new i.Vector3(),
              b = new i.Matrix4(),
              w = new i.Vector3(0, 0, -1),
              M = new i.Vector4(),
              S = new i.Vector3(),
              E = new i.Vector3(),
              T = new i.Vector4(),
              A = new i.Matrix4(),
              C = new i.PerspectiveCamera(),
              L = {
                minFilter: i.LinearFilter,
                magFilter: i.LinearFilter,
                format: i.RGBFormat,
              },
              R = new i.WebGLRenderTarget(r, o, L);
            (i.MathUtils.isPowerOfTwo(r) && i.MathUtils.isPowerOfTwo(o)) ||
              (R.texture.generateMipmaps = !1);
            const P = {
                uniforms: i.UniformsUtils.merge([
                  i.UniformsLib.fog,
                  i.UniformsLib.lights,
                  {
                    normalSampler: { value: null },
                    mirrorSampler: { value: null },
                    alpha: { value: 1 },
                    time: { value: 0 },
                    size: { value: 1 },
                    distortionScale: { value: 20 },
                    textureMatrix: { value: new i.Matrix4() },
                    sunColor: { value: new i.Color(8355711) },
                    sunDirection: { value: new i.Vector3(0.70707, 0.70707, 0) },
                    eye: { value: new i.Vector3() },
                    waterColor: { value: new i.Color(5592405) },
                  },
                ]),
                vertexShader:
                  "\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tworldPosition = mirrorCoord.xyzw;\n\t\t\t\t\tmirrorCoord = textureMatrix * mirrorCoord;\n\t\t\t\t\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t#include <fog_vertex>\n\t\t\t\t#include <shadowmap_vertex>\n\t\t\t}",
                fragmentShader:
                  "\n\t\t\t\tuniform sampler2D mirrorSampler;\n\t\t\t\tuniform float alpha;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform float size;\n\t\t\t\tuniform float distortionScale;\n\t\t\t\tuniform sampler2D normalSampler;\n\t\t\t\tuniform vec3 sunColor;\n\t\t\t\tuniform vec3 sunDirection;\n\t\t\t\tuniform vec3 eye;\n\t\t\t\tuniform vec3 waterColor;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\tvec4 getNoise( vec2 uv ) {\n\t\t\t\t\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n\t\t\t\t\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n\t\t\t\t\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n\t\t\t\t\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n\t\t\t\t\tvec4 noise = texture2D( normalSampler, uv0 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv1 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv2 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv3 );\n\t\t\t\t\treturn noise * 0.5 - 1.0;\n\t\t\t\t}\n\n\t\t\t\tvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n\t\t\t\t\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n\t\t\t\t\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n\t\t\t\t\tspecularColor += pow( direction, shiny ) * sunColor * spec;\n\t\t\t\t\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t\tvec4 noise = getNoise( worldPosition.xz * size );\n\t\t\t\t\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n\t\t\t\t\tvec3 diffuseLight = vec3(0.0);\n\t\t\t\t\tvec3 specularLight = vec3(0.0);\n\n\t\t\t\t\tvec3 worldToEye = eye-worldPosition.xyz;\n\t\t\t\t\tvec3 eyeDirection = normalize( worldToEye );\n\t\t\t\t\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\t\t\t\t\tfloat distance = length(worldToEye);\n\n\t\t\t\t\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n\t\t\t\t\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );\n\n\t\t\t\t\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n\t\t\t\t\tfloat rf0 = 0.3;\n\t\t\t\t\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n\t\t\t\t\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n\t\t\t\t\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\n\t\t\t\t\tvec3 outgoingLight = albedo;\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, alpha );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t}",
              },
              O = new i.ShaderMaterial({
                fragmentShader: P.fragmentShader,
                vertexShader: P.vertexShader,
                uniforms: i.UniformsUtils.clone(P.uniforms),
                lights: !0,
                side: m,
                fog: g,
              });
            (O.uniforms.mirrorSampler.value = R.texture),
              (O.uniforms.textureMatrix.value = A),
              (O.uniforms.alpha.value = a),
              (O.uniforms.time.value = l),
              (O.uniforms.normalSampler.value = c),
              (O.uniforms.sunColor.value = h),
              (O.uniforms.waterColor.value = d),
              (O.uniforms.sunDirection.value = u),
              (O.uniforms.distortionScale.value = f),
              (O.uniforms.eye.value = p),
              (n.material = O),
              (n.onBeforeRender = function (t, e, i) {
                if (
                  (x.setFromMatrixPosition(n.matrixWorld),
                  _.setFromMatrixPosition(i.matrixWorld),
                  b.extractRotation(n.matrixWorld),
                  y.set(0, 0, 1),
                  y.applyMatrix4(b),
                  S.subVectors(x, _),
                  S.dot(y) > 0)
                )
                  return;
                S.reflect(y).negate(),
                  S.add(x),
                  b.extractRotation(i.matrixWorld),
                  w.set(0, 0, -1),
                  w.applyMatrix4(b),
                  w.add(_),
                  E.subVectors(x, w),
                  E.reflect(y).negate(),
                  E.add(x),
                  C.position.copy(S),
                  C.up.set(0, 1, 0),
                  C.up.applyMatrix4(b),
                  C.up.reflect(y),
                  C.lookAt(E),
                  (C.far = i.far),
                  C.updateMatrixWorld(),
                  C.projectionMatrix.copy(i.projectionMatrix),
                  A.set(
                    0.5,
                    0,
                    0,
                    0.5,
                    0,
                    0.5,
                    0,
                    0.5,
                    0,
                    0,
                    0.5,
                    0.5,
                    0,
                    0,
                    0,
                    1
                  ),
                  A.multiply(C.projectionMatrix),
                  A.multiply(C.matrixWorldInverse),
                  v.setFromNormalAndCoplanarPoint(y, x),
                  v.applyMatrix4(C.matrixWorldInverse),
                  M.set(v.normal.x, v.normal.y, v.normal.z, v.constant);
                const r = C.projectionMatrix;
                (T.x = (Math.sign(M.x) + r.elements[8]) / r.elements[0]),
                  (T.y = (Math.sign(M.y) + r.elements[9]) / r.elements[5]),
                  (T.z = -1),
                  (T.w = (1 + r.elements[10]) / r.elements[14]),
                  M.multiplyScalar(2 / M.dot(T)),
                  (r.elements[2] = M.x),
                  (r.elements[6] = M.y),
                  (r.elements[10] = M.z + 1 - s),
                  (r.elements[14] = M.w),
                  p.setFromMatrixPosition(i.matrixWorld);
                const o = t.getRenderTarget(),
                  a = t.xr.enabled,
                  l = t.shadowMap.autoUpdate;
                (n.visible = !1),
                  (t.xr.enabled = !1),
                  (t.shadowMap.autoUpdate = !1),
                  t.setRenderTarget(R),
                  t.state.buffers.depth.setMask(!0),
                  !1 === t.autoClear && t.clear(),
                  t.render(e, C),
                  (n.visible = !0),
                  (t.xr.enabled = a),
                  (t.shadowMap.autoUpdate = l),
                  t.setRenderTarget(o);
                const c = i.viewport;
                void 0 !== c && t.state.viewport(c);
              });
          }
        }
        r.prototype.isWater = !0;
      },
      873: (t) => {
        t.exports = (function t(e, n, i) {
          function r(s, a) {
            if (!n[s]) {
              if (!e[s]) {
                if (o) return o(s, !0);
                throw new Error("Cannot find module '" + s + "'");
              }
              var l = (n[s] = { exports: {} });
              e[s][0].call(
                l.exports,
                function (t) {
                  return r(e[s][1][t] || t);
                },
                l,
                l.exports,
                t,
                e,
                n,
                i
              );
            }
            return n[s].exports;
          }
          for (var o = void 0, s = 0; s < i.length; s++) r(i[s]);
          return r;
        })(
          {
            1: [
              function (t, e) {
                e.exports = {
                  name: "cannon",
                  version: "0.6.2",
                  description:
                    "A lightweight 3D physics engine written in JavaScript.",
                  homepage: "https://github.com/schteppe/cannon.js",
                  author:
                    "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",
                  keywords: ["cannon.js", "cannon", "physics", "engine", "3d"],
                  main: "./build/cannon.js",
                  engines: { node: "*" },
                  repository: {
                    type: "git",
                    url: "https://github.com/schteppe/cannon.js.git",
                  },
                  bugs: { url: "https://github.com/schteppe/cannon.js/issues" },
                  licenses: [{ type: "MIT" }],
                  devDependencies: {
                    jshint: "latest",
                    "uglify-js": "latest",
                    nodeunit: "^0.9.0",
                    grunt: "~0.4.0",
                    "grunt-contrib-jshint": "~0.1.1",
                    "grunt-contrib-nodeunit": "^0.4.1",
                    "grunt-contrib-concat": "~0.1.3",
                    "grunt-contrib-uglify": "^0.5.1",
                    "grunt-browserify": "^2.1.4",
                    "grunt-contrib-yuidoc": "^0.5.2",
                    browserify: "*",
                  },
                  dependencies: {},
                };
              },
              {},
            ],
            2: [
              function (t, e) {
                e.exports = {
                  version: t("../package.json").version,
                  AABB: t("./collision/AABB"),
                  ArrayCollisionMatrix: t("./collision/ArrayCollisionMatrix"),
                  Body: t("./objects/Body"),
                  Box: t("./shapes/Box"),
                  Broadphase: t("./collision/Broadphase"),
                  Constraint: t("./constraints/Constraint"),
                  ContactEquation: t("./equations/ContactEquation"),
                  Narrowphase: t("./world/Narrowphase"),
                  ConeTwistConstraint: t("./constraints/ConeTwistConstraint"),
                  ContactMaterial: t("./material/ContactMaterial"),
                  ConvexPolyhedron: t("./shapes/ConvexPolyhedron"),
                  Cylinder: t("./shapes/Cylinder"),
                  DistanceConstraint: t("./constraints/DistanceConstraint"),
                  Equation: t("./equations/Equation"),
                  EventTarget: t("./utils/EventTarget"),
                  FrictionEquation: t("./equations/FrictionEquation"),
                  GSSolver: t("./solver/GSSolver"),
                  GridBroadphase: t("./collision/GridBroadphase"),
                  Heightfield: t("./shapes/Heightfield"),
                  HingeConstraint: t("./constraints/HingeConstraint"),
                  LockConstraint: t("./constraints/LockConstraint"),
                  Mat3: t("./math/Mat3"),
                  Material: t("./material/Material"),
                  NaiveBroadphase: t("./collision/NaiveBroadphase"),
                  ObjectCollisionMatrix: t("./collision/ObjectCollisionMatrix"),
                  Pool: t("./utils/Pool"),
                  Particle: t("./shapes/Particle"),
                  Plane: t("./shapes/Plane"),
                  PointToPointConstraint: t(
                    "./constraints/PointToPointConstraint"
                  ),
                  Quaternion: t("./math/Quaternion"),
                  Ray: t("./collision/Ray"),
                  RaycastVehicle: t("./objects/RaycastVehicle"),
                  RaycastResult: t("./collision/RaycastResult"),
                  RigidVehicle: t("./objects/RigidVehicle"),
                  RotationalEquation: t("./equations/RotationalEquation"),
                  RotationalMotorEquation: t(
                    "./equations/RotationalMotorEquation"
                  ),
                  SAPBroadphase: t("./collision/SAPBroadphase"),
                  SPHSystem: t("./objects/SPHSystem"),
                  Shape: t("./shapes/Shape"),
                  Solver: t("./solver/Solver"),
                  Sphere: t("./shapes/Sphere"),
                  SplitSolver: t("./solver/SplitSolver"),
                  Spring: t("./objects/Spring"),
                  Trimesh: t("./shapes/Trimesh"),
                  Vec3: t("./math/Vec3"),
                  Vec3Pool: t("./utils/Vec3Pool"),
                  World: t("./world/World"),
                };
              },
              {
                "../package.json": 1,
                "./collision/AABB": 3,
                "./collision/ArrayCollisionMatrix": 4,
                "./collision/Broadphase": 5,
                "./collision/GridBroadphase": 6,
                "./collision/NaiveBroadphase": 7,
                "./collision/ObjectCollisionMatrix": 8,
                "./collision/Ray": 9,
                "./collision/RaycastResult": 10,
                "./collision/SAPBroadphase": 11,
                "./constraints/ConeTwistConstraint": 12,
                "./constraints/Constraint": 13,
                "./constraints/DistanceConstraint": 14,
                "./constraints/HingeConstraint": 15,
                "./constraints/LockConstraint": 16,
                "./constraints/PointToPointConstraint": 17,
                "./equations/ContactEquation": 19,
                "./equations/Equation": 20,
                "./equations/FrictionEquation": 21,
                "./equations/RotationalEquation": 22,
                "./equations/RotationalMotorEquation": 23,
                "./material/ContactMaterial": 24,
                "./material/Material": 25,
                "./math/Mat3": 27,
                "./math/Quaternion": 28,
                "./math/Vec3": 30,
                "./objects/Body": 31,
                "./objects/RaycastVehicle": 32,
                "./objects/RigidVehicle": 33,
                "./objects/SPHSystem": 34,
                "./objects/Spring": 35,
                "./shapes/Box": 37,
                "./shapes/ConvexPolyhedron": 38,
                "./shapes/Cylinder": 39,
                "./shapes/Heightfield": 40,
                "./shapes/Particle": 41,
                "./shapes/Plane": 42,
                "./shapes/Shape": 43,
                "./shapes/Sphere": 44,
                "./shapes/Trimesh": 45,
                "./solver/GSSolver": 46,
                "./solver/Solver": 47,
                "./solver/SplitSolver": 48,
                "./utils/EventTarget": 49,
                "./utils/Pool": 51,
                "./utils/Vec3Pool": 54,
                "./world/Narrowphase": 55,
                "./world/World": 56,
              },
            ],
            3: [
              function (t, e) {
                function n(t) {
                  (t = t || {}),
                    (this.lowerBound = new i()),
                    t.lowerBound && this.lowerBound.copy(t.lowerBound),
                    (this.upperBound = new i()),
                    t.upperBound && this.upperBound.copy(t.upperBound);
                }
                var i = t("../math/Vec3");
                t("../utils/Utils"), (e.exports = n);
                var r = new i();
                (n.prototype.setFromPoints = function (t, e, n, i) {
                  var o = this.lowerBound,
                    s = this.upperBound,
                    a = n;
                  o.copy(t[0]), a && a.vmult(o, o), s.copy(o);
                  for (var l = 1; l < t.length; l++) {
                    var c = t[l];
                    a && (a.vmult(c, r), (c = r)),
                      c.x > s.x && (s.x = c.x),
                      c.x < o.x && (o.x = c.x),
                      c.y > s.y && (s.y = c.y),
                      c.y < o.y && (o.y = c.y),
                      c.z > s.z && (s.z = c.z),
                      c.z < o.z && (o.z = c.z);
                  }
                  return (
                    e && (e.vadd(o, o), e.vadd(s, s)),
                    i &&
                      ((o.x -= i),
                      (o.y -= i),
                      (o.z -= i),
                      (s.x += i),
                      (s.y += i),
                      (s.z += i)),
                    this
                  );
                }),
                  (n.prototype.copy = function (t) {
                    return (
                      this.lowerBound.copy(t.lowerBound),
                      this.upperBound.copy(t.upperBound),
                      this
                    );
                  }),
                  (n.prototype.clone = function () {
                    return new n().copy(this);
                  }),
                  (n.prototype.extend = function (t) {
                    var e = t.lowerBound.x;
                    this.lowerBound.x > e && (this.lowerBound.x = e);
                    var n = t.upperBound.x;
                    this.upperBound.x < n && (this.upperBound.x = n),
                      (e = t.lowerBound.y),
                      this.lowerBound.y > e && (this.lowerBound.y = e),
                      (n = t.upperBound.y),
                      this.upperBound.y < n && (this.upperBound.y = n),
                      (e = t.lowerBound.z),
                      this.lowerBound.z > e && (this.lowerBound.z = e),
                      (n = t.upperBound.z),
                      this.upperBound.z < n && (this.upperBound.z = n);
                  }),
                  (n.prototype.overlaps = function (t) {
                    var e = this.lowerBound,
                      n = this.upperBound,
                      i = t.lowerBound,
                      r = t.upperBound;
                    return (
                      ((i.x <= n.x && n.x <= r.x) ||
                        (e.x <= r.x && r.x <= n.x)) &&
                      ((i.y <= n.y && n.y <= r.y) ||
                        (e.y <= r.y && r.y <= n.y)) &&
                      ((i.z <= n.z && n.z <= r.z) || (e.z <= r.z && r.z <= n.z))
                    );
                  }),
                  (n.prototype.contains = function (t) {
                    var e = this.lowerBound,
                      n = this.upperBound,
                      i = t.lowerBound,
                      r = t.upperBound;
                    return (
                      e.x <= i.x &&
                      n.x >= r.x &&
                      e.y <= i.y &&
                      n.y >= r.y &&
                      e.z <= i.z &&
                      n.z >= r.z
                    );
                  }),
                  (n.prototype.getCorners = function (t, e, n, i, r, o, s, a) {
                    var l = this.lowerBound,
                      c = this.upperBound;
                    t.copy(l),
                      e.set(c.x, l.y, l.z),
                      n.set(c.x, c.y, l.z),
                      i.set(l.x, c.y, c.z),
                      r.set(c.x, l.y, l.z),
                      o.set(l.x, c.y, l.z),
                      s.set(l.x, l.y, c.z),
                      a.copy(c);
                  });
                var o = [
                  new i(),
                  new i(),
                  new i(),
                  new i(),
                  new i(),
                  new i(),
                  new i(),
                  new i(),
                ];
                (n.prototype.toLocalFrame = function (t, e) {
                  var n = o,
                    i = n[0],
                    r = n[1],
                    s = n[2],
                    a = n[3],
                    l = n[4],
                    c = n[5],
                    u = n[6],
                    h = n[7];
                  this.getCorners(i, r, s, a, l, c, u, h);
                  for (var d = 0; 8 !== d; d++) {
                    var p = n[d];
                    t.pointToLocal(p, p);
                  }
                  return e.setFromPoints(n);
                }),
                  (n.prototype.toWorldFrame = function (t, e) {
                    var n = o,
                      i = n[0],
                      r = n[1],
                      s = n[2],
                      a = n[3],
                      l = n[4],
                      c = n[5],
                      u = n[6],
                      h = n[7];
                    this.getCorners(i, r, s, a, l, c, u, h);
                    for (var d = 0; 8 !== d; d++) {
                      var p = n[d];
                      t.pointToWorld(p, p);
                    }
                    return e.setFromPoints(n);
                  });
              },
              { "../math/Vec3": 30, "../utils/Utils": 53 },
            ],
            4: [
              function (t, e) {
                function n() {
                  this.matrix = [];
                }
                (e.exports = n),
                  (n.prototype.get = function (t, e) {
                    if (((t = t.index), (e = e.index) > t)) {
                      var n = e;
                      (e = t), (t = n);
                    }
                    return this.matrix[((t * (t + 1)) >> 1) + e - 1];
                  }),
                  (n.prototype.set = function (t, e, n) {
                    if (((t = t.index), (e = e.index) > t)) {
                      var i = e;
                      (e = t), (t = i);
                    }
                    this.matrix[((t * (t + 1)) >> 1) + e - 1] = n ? 1 : 0;
                  }),
                  (n.prototype.reset = function () {
                    for (var t = 0, e = this.matrix.length; t !== e; t++)
                      this.matrix[t] = 0;
                  }),
                  (n.prototype.setNumObjects = function (t) {
                    this.matrix.length = (t * (t - 1)) >> 1;
                  });
              },
              {},
            ],
            5: [
              function (t, e) {
                function n() {
                  (this.world = null),
                    (this.useBoundingBoxes = !1),
                    (this.dirty = !0);
                }
                var i = t("../objects/Body"),
                  r = t("../math/Vec3"),
                  o = t("../math/Quaternion");
                t("../shapes/Shape"),
                  t("../shapes/Plane"),
                  (e.exports = n),
                  (n.prototype.collisionPairs = function () {
                    throw new Error(
                      "collisionPairs not implemented for this BroadPhase class!"
                    );
                  });
                var s = i.STATIC | i.KINEMATIC;
                (n.prototype.needBroadphaseCollision = function (t, e) {
                  return (
                    0 != (t.collisionFilterGroup & e.collisionFilterMask) &&
                    0 != (e.collisionFilterGroup & t.collisionFilterMask) &&
                    ((0 == (t.type & s) && t.sleepState !== i.SLEEPING) ||
                      (0 == (e.type & s) && e.sleepState !== i.SLEEPING))
                  );
                }),
                  (n.prototype.intersectionTest = function (t, e, n, i) {
                    this.useBoundingBoxes
                      ? this.doBoundingBoxBroadphase(t, e, n, i)
                      : this.doBoundingSphereBroadphase(t, e, n, i);
                  });
                var a = new r();
                new r(),
                  new o(),
                  new r(),
                  (n.prototype.doBoundingSphereBroadphase = function (
                    t,
                    e,
                    n,
                    i
                  ) {
                    var r = a;
                    e.position.vsub(t.position, r),
                      Math.pow(t.boundingRadius + e.boundingRadius, 2) >
                        r.norm2() && (n.push(t), i.push(e));
                  }),
                  (n.prototype.doBoundingBoxBroadphase = function (t, e, n, i) {
                    t.aabbNeedsUpdate && t.computeAABB(),
                      e.aabbNeedsUpdate && e.computeAABB(),
                      t.aabb.overlaps(e.aabb) && (n.push(t), i.push(e));
                  });
                var l = { keys: [] },
                  c = [],
                  u = [];
                (n.prototype.makePairsUnique = function (t, e) {
                  for (
                    var n = l, i = c, r = u, o = t.length, s = 0;
                    s !== o;
                    s++
                  )
                    (i[s] = t[s]), (r[s] = e[s]);
                  for (t.length = 0, e.length = 0, s = 0; s !== o; s++) {
                    var a = i[s].id,
                      h = r[s].id;
                    (n[(d = h > a ? a + "," + h : h + "," + a)] = s),
                      n.keys.push(d);
                  }
                  for (s = 0; s !== n.keys.length; s++) {
                    var d = n.keys.pop(),
                      p = n[d];
                    t.push(i[p]), e.push(r[p]), delete n[d];
                  }
                }),
                  (n.prototype.setWorld = function () {});
                var h = new r();
                (n.boundingSphereCheck = function (t, e) {
                  var n = h;
                  return (
                    t.position.vsub(e.position, n),
                    Math.pow(
                      t.shape.boundingSphereRadius +
                        e.shape.boundingSphereRadius,
                      2
                    ) > n.norm2()
                  );
                }),
                  (n.prototype.aabbQuery = function () {
                    return (
                      console.warn(
                        ".aabbQuery is not implemented in this Broadphase subclass."
                      ),
                      []
                    );
                  });
              },
              {
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "../objects/Body": 31,
                "../shapes/Plane": 42,
                "../shapes/Shape": 43,
              },
            ],
            6: [
              function (t, e) {
                function n(t, e, n, o, s) {
                  i.apply(this),
                    (this.nx = n || 10),
                    (this.ny = o || 10),
                    (this.nz = s || 10),
                    (this.aabbMin = t || new r(100, 100, 100)),
                    (this.aabbMax = e || new r(-100, -100, -100));
                  var a = this.nx * this.ny * this.nz;
                  if (0 >= a)
                    throw "GridBroadphase: Each dimension's n must be >0";
                  (this.bins = []),
                    (this.binLengths = []),
                    (this.bins.length = a),
                    (this.binLengths.length = a);
                  for (var l = 0; a > l; l++)
                    (this.bins[l] = []), (this.binLengths[l] = 0);
                }
                e.exports = n;
                var i = t("./Broadphase"),
                  r = t("../math/Vec3"),
                  o = t("../shapes/Shape");
                (n.prototype = new i()), (n.prototype.constructor = n);
                var s = new r();
                new r(),
                  (n.prototype.collisionPairs = function (t, e, n) {
                    function i(t, e, n, i, r, o, s) {
                      var a = ((t - x) * w) | 0,
                        l = ((e - _) * M) | 0,
                        c = ((n - b) * S) | 0,
                        g = B((i - x) * w),
                        v = B((r - _) * M),
                        y = B((o - b) * S);
                      0 > a ? (a = 0) : a >= u && (a = u - 1),
                        0 > l ? (l = 0) : l >= h && (l = h - 1),
                        0 > c ? (c = 0) : c >= d && (c = d - 1),
                        0 > g ? (g = 0) : g >= u && (g = u - 1),
                        0 > v ? (v = 0) : v >= h && (v = h - 1),
                        0 > y ? (y = 0) : y >= d && (y = d - 1),
                        (l *= f),
                        (c *= m),
                        (g *= p),
                        (v *= f),
                        (y *= m);
                      for (var E = (a *= p); g >= E; E += p)
                        for (var T = l; v >= T; T += f)
                          for (var A = c; y >= A; A += m) {
                            var C = E + T + A;
                            O[C][k[C]++] = s;
                          }
                    }
                    for (
                      var r = t.numObjects(),
                        a = t.bodies,
                        l = this.aabbMax,
                        c = this.aabbMin,
                        u = this.nx,
                        h = this.ny,
                        d = this.nz,
                        p = h * d,
                        f = d,
                        m = 1,
                        g = l.x,
                        v = l.y,
                        y = l.z,
                        x = c.x,
                        _ = c.y,
                        b = c.z,
                        w = u / (g - x),
                        M = h / (v - _),
                        S = d / (y - b),
                        E = (g - x) / u,
                        T = (v - _) / h,
                        A = (y - b) / d,
                        C = 0.5 * Math.sqrt(E * E + T * T + A * A),
                        L = o.types,
                        R = L.SPHERE,
                        P = L.PLANE,
                        O = (L.BOX, L.COMPOUND, L.CONVEXPOLYHEDRON, this.bins),
                        k = this.binLengths,
                        I = this.bins.length,
                        D = 0;
                      D !== I;
                      D++
                    )
                      k[D] = 0;
                    var B = Math.ceil;
                    for (c = Math.min, l = Math.max, D = 0; D !== r; D++) {
                      var N = (nt = a[D]).shape;
                      switch (N.type) {
                        case R:
                          var F = nt.position.x,
                            z = nt.position.y,
                            H = nt.position.z,
                            j = N.radius;
                          i(F - j, z - j, H - j, F + j, z + j, H + j, nt);
                          break;
                        case P:
                          N.worldNormalNeedsUpdate &&
                            N.computeWorldNormal(nt.quaternion);
                          var U = N.worldNormal,
                            V = x + 0.5 * E - nt.position.x,
                            G = _ + 0.5 * T - nt.position.y,
                            W = b + 0.5 * A - nt.position.z,
                            q = s;
                          q.set(V, G, W);
                          for (
                            var X = 0, Y = 0;
                            X !== u;
                            X++, Y += p, q.y = G, q.x += E
                          )
                            for (
                              var $ = 0, K = 0;
                              $ !== h;
                              $++, K += f, q.z = W, q.y += T
                            )
                              for (
                                var J = 0, Z = 0;
                                J !== d;
                                J++, Z += m, q.z += A
                              )
                                if (q.dot(U) < C) {
                                  var Q = Y + K + Z;
                                  O[Q][k[Q]++] = nt;
                                }
                          break;
                        default:
                          nt.aabbNeedsUpdate && nt.computeAABB(),
                            i(
                              nt.aabb.lowerBound.x,
                              nt.aabb.lowerBound.y,
                              nt.aabb.lowerBound.z,
                              nt.aabb.upperBound.x,
                              nt.aabb.upperBound.y,
                              nt.aabb.upperBound.z,
                              nt
                            );
                      }
                    }
                    for (D = 0; D !== I; D++) {
                      var tt = k[D];
                      if (tt > 1) {
                        var et = O[D];
                        for (X = 0; X !== tt; X++) {
                          var nt = et[X];
                          for ($ = 0; $ !== X; $++) {
                            var it = et[$];
                            this.needBroadphaseCollision(nt, it) &&
                              this.intersectionTest(nt, it, e, n);
                          }
                        }
                      }
                    }
                    this.makePairsUnique(e, n);
                  });
              },
              { "../math/Vec3": 30, "../shapes/Shape": 43, "./Broadphase": 5 },
            ],
            7: [
              function (t, e) {
                function n() {
                  i.apply(this);
                }
                e.exports = n;
                var i = t("./Broadphase"),
                  r = t("./AABB");
                (n.prototype = new i()),
                  (n.prototype.constructor = n),
                  (n.prototype.collisionPairs = function (t, e, n) {
                    var i,
                      r,
                      o,
                      s,
                      a = t.bodies,
                      l = a.length;
                    for (i = 0; i !== l; i++)
                      for (r = 0; r !== i; r++)
                        (o = a[i]),
                          (s = a[r]),
                          this.needBroadphaseCollision(o, s) &&
                            this.intersectionTest(o, s, e, n);
                  }),
                  new r(),
                  (n.prototype.aabbQuery = function (t, e, n) {
                    n = n || [];
                    for (var i = 0; i < t.bodies.length; i++) {
                      var r = t.bodies[i];
                      r.aabbNeedsUpdate && r.computeAABB(),
                        r.aabb.overlaps(e) && n.push(r);
                    }
                    return n;
                  });
              },
              { "./AABB": 3, "./Broadphase": 5 },
            ],
            8: [
              function (t, e) {
                function n() {
                  this.matrix = {};
                }
                (e.exports = n),
                  (n.prototype.get = function (t, e) {
                    if (((t = t.id), (e = e.id) > t)) {
                      var n = e;
                      (e = t), (t = n);
                    }
                    return t + "-" + e in this.matrix;
                  }),
                  (n.prototype.set = function (t, e, n) {
                    if (((t = t.id), (e = e.id) > t)) {
                      var i = e;
                      (e = t), (t = i);
                    }
                    n
                      ? (this.matrix[t + "-" + e] = !0)
                      : delete this.matrix[t + "-" + e];
                  }),
                  (n.prototype.reset = function () {
                    this.matrix = {};
                  }),
                  (n.prototype.setNumObjects = function () {});
              },
              {},
            ],
            9: [
              function (t, e) {
                function n(t, e) {
                  (this.from = t ? t.clone() : new r()),
                    (this.to = e ? e.clone() : new r()),
                    (this._direction = new r()),
                    (this.precision = 1e-4),
                    (this.checkCollisionResponse = !0),
                    (this.skipBackfaces = !1),
                    (this.collisionFilterMask = -1),
                    (this.collisionFilterGroup = -1),
                    (this.mode = n.ANY),
                    (this.result = new a()),
                    (this.hasHit = !1),
                    (this.callback = function () {});
                }
                function i(t, e, n, i) {
                  i.vsub(e, k), n.vsub(e, d), t.vsub(e, p);
                  var r,
                    o,
                    s = k.dot(k),
                    a = k.dot(d),
                    l = k.dot(p),
                    c = d.dot(d),
                    u = d.dot(p);
                  return (
                    (r = c * l - a * u) >= 0 &&
                    (o = s * u - a * l) >= 0 &&
                    s * c - a * a > r + o
                  );
                }
                e.exports = n;
                var r = t("../math/Vec3"),
                  o = t("../math/Quaternion"),
                  s = t("../math/Transform"),
                  a =
                    (t("../shapes/ConvexPolyhedron"),
                    t("../shapes/Box"),
                    t("../collision/RaycastResult")),
                  l = t("../shapes/Shape"),
                  c = t("../collision/AABB");
                (n.prototype.constructor = n),
                  (n.CLOSEST = 1),
                  (n.ANY = 2),
                  (n.ALL = 4);
                var u = new c(),
                  h = [];
                n.prototype.intersectWorld = function (t, e) {
                  return (
                    (this.mode = e.mode || n.ANY),
                    (this.result = e.result || new a()),
                    (this.skipBackfaces = !!e.skipBackfaces),
                    (this.collisionFilterMask =
                      void 0 !== e.collisionFilterMask
                        ? e.collisionFilterMask
                        : -1),
                    (this.collisionFilterGroup =
                      void 0 !== e.collisionFilterGroup
                        ? e.collisionFilterGroup
                        : -1),
                    e.from && this.from.copy(e.from),
                    e.to && this.to.copy(e.to),
                    (this.callback = e.callback || function () {}),
                    (this.hasHit = !1),
                    this.result.reset(),
                    this._updateDirection(),
                    this.getAABB(u),
                    (h.length = 0),
                    t.broadphase.aabbQuery(t, u, h),
                    this.intersectBodies(h),
                    this.hasHit
                  );
                };
                var d = new r(),
                  p = new r();
                n.pointInTriangle = i;
                var f = new r(),
                  m = new o();
                (n.prototype.intersectBody = function (t, e) {
                  e && ((this.result = e), this._updateDirection());
                  var n = this.checkCollisionResponse;
                  if (
                    (!n || t.collisionResponse) &&
                    0 != (this.collisionFilterGroup & t.collisionFilterMask) &&
                    0 != (t.collisionFilterGroup & this.collisionFilterMask)
                  )
                    for (
                      var i = f, r = m, o = 0, s = t.shapes.length;
                      s > o;
                      o++
                    ) {
                      var a = t.shapes[o];
                      if (
                        (!n || a.collisionResponse) &&
                        (t.quaternion.mult(t.shapeOrientations[o], r),
                        t.quaternion.vmult(t.shapeOffsets[o], i),
                        i.vadd(t.position, i),
                        this.intersectShape(a, r, i, t),
                        this.result._shouldStop)
                      )
                        break;
                    }
                }),
                  (n.prototype.intersectBodies = function (t, e) {
                    e && ((this.result = e), this._updateDirection());
                    for (
                      var n = 0, i = t.length;
                      !this.result._shouldStop && i > n;
                      n++
                    )
                      this.intersectBody(t[n]);
                  }),
                  (n.prototype._updateDirection = function () {
                    this.to.vsub(this.from, this._direction),
                      this._direction.normalize();
                  }),
                  (n.prototype.intersectShape = function (t, e, n, i) {
                    if (
                      !(
                        (function (t, e, n) {
                          n.vsub(t, k);
                          var i = k.dot(e);
                          return e.mult(i, I), I.vadd(t, I), n.distanceTo(I);
                        })(this.from, this._direction, n) >
                        t.boundingSphereRadius
                      )
                    ) {
                      var r = this[t.type];
                      r && r.call(this, t, e, n, i);
                    }
                  });
                var g = (new r(), new r(), new r()),
                  v = new r(),
                  y = new r(),
                  x = new r();
                new r(),
                  new a(),
                  (n.prototype.intersectBox = function (t, e, n, i) {
                    return this.intersectConvex(
                      t.convexPolyhedronRepresentation,
                      e,
                      n,
                      i
                    );
                  }),
                  (n.prototype[l.types.BOX] = n.prototype.intersectBox),
                  (n.prototype.intersectPlane = function (t, e, n, i) {
                    var o = this.from,
                      s = this.to,
                      a = this._direction,
                      l = new r(0, 0, 1);
                    e.vmult(l, l);
                    var c = new r();
                    o.vsub(n, c);
                    var u = c.dot(l);
                    if (
                      (s.vsub(n, c), !(u * c.dot(l) > 0 || o.distanceTo(s) < u))
                    ) {
                      var h = l.dot(a);
                      if (!(Math.abs(h) < this.precision)) {
                        var d = new r(),
                          p = new r(),
                          f = new r();
                        o.vsub(n, d);
                        var m = -l.dot(d) / h;
                        a.scale(m, p),
                          o.vadd(p, f),
                          this.reportIntersection(l, f, t, i, -1);
                      }
                    }
                  }),
                  (n.prototype[l.types.PLANE] = n.prototype.intersectPlane),
                  (n.prototype.getAABB = function (t) {
                    var e = this.to,
                      n = this.from;
                    (t.lowerBound.x = Math.min(e.x, n.x)),
                      (t.lowerBound.y = Math.min(e.y, n.y)),
                      (t.lowerBound.z = Math.min(e.z, n.z)),
                      (t.upperBound.x = Math.max(e.x, n.x)),
                      (t.upperBound.y = Math.max(e.y, n.y)),
                      (t.upperBound.z = Math.max(e.z, n.z));
                  });
                var _ = { faceList: [0] };
                (n.prototype.intersectHeightfield = function (t, e, i, o) {
                  var a = (t.data, t.elementSize, new r()),
                    l = new n(this.from, this.to);
                  s.pointToLocalFrame(i, e, l.from, l.from),
                    s.pointToLocalFrame(i, e, l.to, l.to);
                  var c = [],
                    u = null,
                    h = null,
                    d = null,
                    p = null,
                    f = t.getIndexOfPosition(l.from.x, l.from.y, c, !1);
                  if (
                    (f && ((u = c[0]), (h = c[1]), (d = c[0]), (p = c[1])),
                    (f = t.getIndexOfPosition(l.to.x, l.to.y, c, !1)) &&
                      ((null === u || c[0] < u) && (u = c[0]),
                      (null === d || c[0] > d) && (d = c[0]),
                      (null === h || c[1] < h) && (h = c[1]),
                      (null === p || c[1] > p) && (p = c[1])),
                    null !== u)
                  ) {
                    var m = [];
                    t.getRectMinMax(u, h, d, p, m);
                    for (var g = u; d >= g; g++)
                      for (var v = h; p >= v; v++) {
                        if (this.result._shouldStop) return;
                        if (
                          (t.getConvexTrianglePillar(g, v, !1),
                          s.pointToWorldFrame(i, e, t.pillarOffset, a),
                          this.intersectConvex(t.pillarConvex, e, a, o, _),
                          this.result._shouldStop)
                        )
                          return;
                        t.getConvexTrianglePillar(g, v, !0),
                          s.pointToWorldFrame(i, e, t.pillarOffset, a),
                          this.intersectConvex(t.pillarConvex, e, a, o, _);
                      }
                  }
                }),
                  (n.prototype[l.types.HEIGHTFIELD] =
                    n.prototype.intersectHeightfield);
                var b = new r(),
                  w = new r();
                (n.prototype.intersectSphere = function (t, e, n, i) {
                  var r = this.from,
                    o = this.to,
                    s = t.radius,
                    a =
                      Math.pow(o.x - r.x, 2) +
                      Math.pow(o.y - r.y, 2) +
                      Math.pow(o.z - r.z, 2),
                    l =
                      2 *
                      ((o.x - r.x) * (r.x - n.x) +
                        (o.y - r.y) * (r.y - n.y) +
                        (o.z - r.z) * (r.z - n.z)),
                    c =
                      Math.pow(r.x - n.x, 2) +
                      Math.pow(r.y - n.y, 2) +
                      Math.pow(r.z - n.z, 2) -
                      Math.pow(s, 2),
                    u = Math.pow(l, 2) - 4 * a * c,
                    h = b,
                    d = w;
                  if (!(0 > u))
                    if (0 === u)
                      r.lerp(o, u, h),
                        h.vsub(n, d),
                        d.normalize(),
                        this.reportIntersection(d, h, t, i, -1);
                    else {
                      var p = (-l - Math.sqrt(u)) / (2 * a),
                        f = (-l + Math.sqrt(u)) / (2 * a);
                      if (
                        (p >= 0 &&
                          1 >= p &&
                          (r.lerp(o, p, h),
                          h.vsub(n, d),
                          d.normalize(),
                          this.reportIntersection(d, h, t, i, -1)),
                        this.result._shouldStop)
                      )
                        return;
                      f >= 0 &&
                        1 >= f &&
                        (r.lerp(o, f, h),
                        h.vsub(n, d),
                        d.normalize(),
                        this.reportIntersection(d, h, t, i, -1));
                    }
                }),
                  (n.prototype[l.types.SPHERE] = n.prototype.intersectSphere);
                var M = new r(),
                  S = (new r(), new r(), new r());
                (n.prototype.intersectConvex = function (t, e, n, r, o) {
                  for (
                    var s = M,
                      a = S,
                      l = (o && o.faceList) || null,
                      c = t.faces,
                      u = t.vertices,
                      h = t.faceNormals,
                      d = this._direction,
                      p = this.from,
                      f = this.to,
                      m = p.distanceTo(f),
                      _ = l ? l.length : c.length,
                      b = this.result,
                      w = 0;
                    !b._shouldStop && _ > w;
                    w++
                  ) {
                    var E = l ? l[w] : w,
                      T = c[E],
                      A = h[E],
                      C = e,
                      L = n;
                    a.copy(u[T[0]]),
                      C.vmult(a, a),
                      a.vadd(L, a),
                      a.vsub(p, a),
                      C.vmult(A, s);
                    var R = d.dot(s);
                    if (!(Math.abs(R) < this.precision)) {
                      var P = s.dot(a) / R;
                      if (!(0 > P)) {
                        d.mult(P, g),
                          g.vadd(p, g),
                          v.copy(u[T[0]]),
                          C.vmult(v, v),
                          L.vadd(v, v);
                        for (
                          var O = 1;
                          !b._shouldStop && O < T.length - 1;
                          O++
                        ) {
                          y.copy(u[T[O]]),
                            x.copy(u[T[O + 1]]),
                            C.vmult(y, y),
                            C.vmult(x, x),
                            L.vadd(y, y),
                            L.vadd(x, x);
                          var k = g.distanceTo(p);
                          (!i(g, v, y, x) && !i(g, y, v, x)) ||
                            k > m ||
                            this.reportIntersection(s, g, t, r, E);
                        }
                      }
                    }
                  }
                }),
                  (n.prototype[l.types.CONVEXPOLYHEDRON] =
                    n.prototype.intersectConvex);
                var E = new r(),
                  T = new r(),
                  A = new r(),
                  C = new r(),
                  L = new r(),
                  R = new r(),
                  P = (new c(), []),
                  O = new s();
                (n.prototype.intersectTrimesh = function (t, e, n, r, o) {
                  var a = E,
                    l = P,
                    c = O,
                    u = S,
                    h = T,
                    d = A,
                    p = C,
                    f = R,
                    m = L,
                    _ = (o && o.faceList, t.indices),
                    b = (t.vertices, t.faceNormals, this.from),
                    w = this.to,
                    M = this._direction;
                  c.position.copy(n),
                    c.quaternion.copy(e),
                    s.vectorToLocalFrame(n, e, M, h),
                    s.pointToLocalFrame(n, e, b, d),
                    s.pointToLocalFrame(n, e, w, p);
                  var k = d.distanceSquared(p);
                  t.tree.rayQuery(this, c, l);
                  for (
                    var I = 0, D = l.length;
                    !this.result._shouldStop && I !== D;
                    I++
                  ) {
                    var B = l[I];
                    t.getNormal(B, a), t.getVertex(_[3 * B], v), v.vsub(d, u);
                    var N = h.dot(a),
                      F = a.dot(u) / N;
                    if (!(0 > F)) {
                      h.scale(F, g),
                        g.vadd(d, g),
                        t.getVertex(_[3 * B + 1], y),
                        t.getVertex(_[3 * B + 2], x);
                      var z = g.distanceSquared(d);
                      (!i(g, y, v, x) && !i(g, v, y, x)) ||
                        z > k ||
                        (s.vectorToWorldFrame(e, a, m),
                        s.pointToWorldFrame(n, e, g, f),
                        this.reportIntersection(m, f, t, r, B));
                    }
                  }
                  l.length = 0;
                }),
                  (n.prototype[l.types.TRIMESH] = n.prototype.intersectTrimesh),
                  (n.prototype.reportIntersection = function (t, e, i, r, o) {
                    var s = this.from,
                      a = this.to,
                      l = s.distanceTo(e),
                      c = this.result;
                    if (!(this.skipBackfaces && t.dot(this._direction) > 0))
                      switch (
                        ((c.hitFaceIndex = void 0 !== o ? o : -1), this.mode)
                      ) {
                        case n.ALL:
                          (this.hasHit = !0),
                            c.set(s, a, t, e, i, r, l),
                            (c.hasHit = !0),
                            this.callback(c);
                          break;
                        case n.CLOSEST:
                          (l < c.distance || !c.hasHit) &&
                            ((this.hasHit = !0),
                            (c.hasHit = !0),
                            c.set(s, a, t, e, i, r, l));
                          break;
                        case n.ANY:
                          (this.hasHit = !0),
                            (c.hasHit = !0),
                            c.set(s, a, t, e, i, r, l),
                            (c._shouldStop = !0);
                      }
                  });
                var k = new r(),
                  I = new r();
              },
              {
                "../collision/AABB": 3,
                "../collision/RaycastResult": 10,
                "../math/Quaternion": 28,
                "../math/Transform": 29,
                "../math/Vec3": 30,
                "../shapes/Box": 37,
                "../shapes/ConvexPolyhedron": 38,
                "../shapes/Shape": 43,
              },
            ],
            10: [
              function (t, e) {
                function n() {
                  (this.rayFromWorld = new i()),
                    (this.rayToWorld = new i()),
                    (this.hitNormalWorld = new i()),
                    (this.hitPointWorld = new i()),
                    (this.hasHit = !1),
                    (this.shape = null),
                    (this.body = null),
                    (this.hitFaceIndex = -1),
                    (this.distance = -1),
                    (this._shouldStop = !1);
                }
                var i = t("../math/Vec3");
                (e.exports = n),
                  (n.prototype.reset = function () {
                    this.rayFromWorld.setZero(),
                      this.rayToWorld.setZero(),
                      this.hitNormalWorld.setZero(),
                      this.hitPointWorld.setZero(),
                      (this.hasHit = !1),
                      (this.shape = null),
                      (this.body = null),
                      (this.hitFaceIndex = -1),
                      (this.distance = -1),
                      (this._shouldStop = !1);
                  }),
                  (n.prototype.abort = function () {
                    this._shouldStop = !0;
                  }),
                  (n.prototype.set = function (t, e, n, i, r, o, s) {
                    this.rayFromWorld.copy(t),
                      this.rayToWorld.copy(e),
                      this.hitNormalWorld.copy(n),
                      this.hitPointWorld.copy(i),
                      (this.shape = r),
                      (this.body = o),
                      (this.distance = s);
                  });
              },
              { "../math/Vec3": 30 },
            ],
            11: [
              function (t, e) {
                function n(t) {
                  i.apply(this),
                    (this.axisList = []),
                    (this.world = null),
                    (this.axisIndex = 0);
                  var e = this.axisList;
                  (this._addBodyHandler = function (t) {
                    e.push(t.body);
                  }),
                    (this._removeBodyHandler = function (t) {
                      var n = e.indexOf(t.body);
                      -1 !== n && e.splice(n, 1);
                    }),
                    t && this.setWorld(t);
                }
                var i = (t("../shapes/Shape"), t("../collision/Broadphase"));
                (e.exports = n),
                  (n.prototype = new i()),
                  (n.prototype.setWorld = function (t) {
                    this.axisList.length = 0;
                    for (var e = 0; e < t.bodies.length; e++)
                      this.axisList.push(t.bodies[e]);
                    t.removeEventListener("addBody", this._addBodyHandler),
                      t.removeEventListener(
                        "removeBody",
                        this._removeBodyHandler
                      ),
                      t.addEventListener("addBody", this._addBodyHandler),
                      t.addEventListener("removeBody", this._removeBodyHandler),
                      (this.world = t),
                      (this.dirty = !0);
                  }),
                  (n.insertionSortX = function (t) {
                    for (var e = 1, n = t.length; n > e; e++) {
                      for (
                        var i = t[e], r = e - 1;
                        r >= 0 &&
                        !(t[r].aabb.lowerBound.x <= i.aabb.lowerBound.x);
                        r--
                      )
                        t[r + 1] = t[r];
                      t[r + 1] = i;
                    }
                    return t;
                  }),
                  (n.insertionSortY = function (t) {
                    for (var e = 1, n = t.length; n > e; e++) {
                      for (
                        var i = t[e], r = e - 1;
                        r >= 0 &&
                        !(t[r].aabb.lowerBound.y <= i.aabb.lowerBound.y);
                        r--
                      )
                        t[r + 1] = t[r];
                      t[r + 1] = i;
                    }
                    return t;
                  }),
                  (n.insertionSortZ = function (t) {
                    for (var e = 1, n = t.length; n > e; e++) {
                      for (
                        var i = t[e], r = e - 1;
                        r >= 0 &&
                        !(t[r].aabb.lowerBound.z <= i.aabb.lowerBound.z);
                        r--
                      )
                        t[r + 1] = t[r];
                      t[r + 1] = i;
                    }
                    return t;
                  }),
                  (n.prototype.collisionPairs = function (t, e, i) {
                    var r,
                      o,
                      s = this.axisList,
                      a = s.length,
                      l = this.axisIndex;
                    for (
                      this.dirty && (this.sortList(), (this.dirty = !1)), r = 0;
                      r !== a;
                      r++
                    ) {
                      var c = s[r];
                      for (o = r + 1; a > o; o++) {
                        var u = s[o];
                        if (this.needBroadphaseCollision(c, u)) {
                          if (!n.checkBounds(c, u, l)) break;
                          this.intersectionTest(c, u, e, i);
                        }
                      }
                    }
                  }),
                  (n.prototype.sortList = function () {
                    for (
                      var t = this.axisList,
                        e = this.axisIndex,
                        i = t.length,
                        r = 0;
                      r !== i;
                      r++
                    ) {
                      var o = t[r];
                      o.aabbNeedsUpdate && o.computeAABB();
                    }
                    0 === e
                      ? n.insertionSortX(t)
                      : 1 === e
                      ? n.insertionSortY(t)
                      : 2 === e && n.insertionSortZ(t);
                  }),
                  (n.checkBounds = function (t, e, n) {
                    var i, r;
                    return (
                      0 === n
                        ? ((i = t.position.x), (r = e.position.x))
                        : 1 === n
                        ? ((i = t.position.y), (r = e.position.y))
                        : 2 === n && ((i = t.position.z), (r = e.position.z)),
                      i + t.boundingRadius > r - e.boundingRadius
                    );
                  }),
                  (n.prototype.autoDetectAxis = function () {
                    for (
                      var t = 0,
                        e = 0,
                        n = 0,
                        i = 0,
                        r = 0,
                        o = 0,
                        s = this.axisList,
                        a = s.length,
                        l = 1 / a,
                        c = 0;
                      c !== a;
                      c++
                    ) {
                      var u = s[c],
                        h = u.position.x;
                      (t += h), (e += h * h);
                      var d = u.position.y;
                      (n += d), (i += d * d);
                      var p = u.position.z;
                      (r += p), (o += p * p);
                    }
                    var f = e - t * t * l,
                      m = i - n * n * l,
                      g = o - r * r * l;
                    this.axisIndex = f > m ? (f > g ? 0 : 2) : m > g ? 1 : 2;
                  }),
                  (n.prototype.aabbQuery = function (t, e, n) {
                    (n = n || []),
                      this.dirty && (this.sortList(), (this.dirty = !1));
                    var i = this.axisIndex,
                      r = "x";
                    1 === i && (r = "y"), 2 === i && (r = "z");
                    for (
                      var o = this.axisList,
                        s = (e.lowerBound[r], e.upperBound[r], 0);
                      s < o.length;
                      s++
                    ) {
                      var a = o[s];
                      a.aabbNeedsUpdate && a.computeAABB(),
                        a.aabb.overlaps(e) && n.push(a);
                    }
                    return n;
                  });
              },
              { "../collision/Broadphase": 5, "../shapes/Shape": 43 },
            ],
            12: [
              function (t, e) {
                function n(t, e, n) {
                  var a = void 0 !== (n = n || {}).maxForce ? n.maxForce : 1e6,
                    l = n.pivotA ? n.pivotA.clone() : new s(),
                    c = n.pivotB ? n.pivotB.clone() : new s();
                  (this.axisA = n.axisA ? n.axisA.clone() : new s()),
                    (this.axisB = n.axisB ? n.axisB.clone() : new s()),
                    i.call(this, t, l, e, c, a),
                    (this.collideConnected = !!n.collideConnected),
                    (this.angle = void 0 !== n.angle ? n.angle : 0);
                  var u = (this.coneEquation = new r(t, e, n)),
                    h = (this.twistEquation = new o(t, e, n));
                  (this.twistAngle =
                    void 0 !== n.twistAngle ? n.twistAngle : 0),
                    (u.maxForce = 0),
                    (u.minForce = -a),
                    (h.maxForce = 0),
                    (h.minForce = -a),
                    this.equations.push(u, h);
                }
                e.exports = n;
                var i = (t("./Constraint"), t("./PointToPointConstraint")),
                  r = t("../equations/ConeEquation"),
                  o = t("../equations/RotationalEquation"),
                  s = (t("../equations/ContactEquation"), t("../math/Vec3"));
                (n.prototype = new i()),
                  (n.constructor = n),
                  new s(),
                  new s(),
                  (n.prototype.update = function () {
                    var t = this.bodyA,
                      e = this.bodyB,
                      n = this.coneEquation,
                      r = this.twistEquation;
                    i.prototype.update.call(this),
                      t.vectorToWorldFrame(this.axisA, n.axisA),
                      e.vectorToWorldFrame(this.axisB, n.axisB),
                      this.axisA.tangents(r.axisA, r.axisA),
                      t.vectorToWorldFrame(r.axisA, r.axisA),
                      this.axisB.tangents(r.axisB, r.axisB),
                      e.vectorToWorldFrame(r.axisB, r.axisB),
                      (n.angle = this.angle),
                      (r.maxAngle = this.twistAngle);
                  });
              },
              {
                "../equations/ConeEquation": 18,
                "../equations/ContactEquation": 19,
                "../equations/RotationalEquation": 22,
                "../math/Vec3": 30,
                "./Constraint": 13,
                "./PointToPointConstraint": 17,
              },
            ],
            13: [
              function (t, e) {
                function n(t, e, r) {
                  (r = i.defaults(r, {
                    collideConnected: !0,
                    wakeUpBodies: !0,
                  })),
                    (this.equations = []),
                    (this.bodyA = t),
                    (this.bodyB = e),
                    (this.id = n.idCounter++),
                    (this.collideConnected = r.collideConnected),
                    r.wakeUpBodies && (t && t.wakeUp(), e && e.wakeUp());
                }
                e.exports = n;
                var i = t("../utils/Utils");
                (n.prototype.update = function () {
                  throw new Error(
                    "method update() not implmemented in this Constraint subclass!"
                  );
                }),
                  (n.prototype.enable = function () {
                    for (var t = this.equations, e = 0; e < t.length; e++)
                      t[e].enabled = !0;
                  }),
                  (n.prototype.disable = function () {
                    for (var t = this.equations, e = 0; e < t.length; e++)
                      t[e].enabled = !1;
                  }),
                  (n.idCounter = 0);
              },
              { "../utils/Utils": 53 },
            ],
            14: [
              function (t, e) {
                function n(t, e, n, o) {
                  i.call(this, t, e),
                    void 0 === n && (n = t.position.distanceTo(e.position)),
                    void 0 === o && (o = 1e6),
                    (this.distance = n);
                  var s = (this.distanceEquation = new r(t, e));
                  this.equations.push(s), (s.minForce = -o), (s.maxForce = o);
                }
                e.exports = n;
                var i = t("./Constraint"),
                  r = t("../equations/ContactEquation");
                (n.prototype = new i()),
                  (n.prototype.update = function () {
                    var t = this.bodyA,
                      e = this.bodyB,
                      n = this.distanceEquation,
                      i = 0.5 * this.distance,
                      r = n.ni;
                    e.position.vsub(t.position, r),
                      r.normalize(),
                      r.mult(i, n.ri),
                      r.mult(-i, n.rj);
                  });
              },
              { "../equations/ContactEquation": 19, "./Constraint": 13 },
            ],
            15: [
              function (t, e) {
                function n(t, e, n) {
                  var a = void 0 !== (n = n || {}).maxForce ? n.maxForce : 1e6,
                    l = n.pivotA ? n.pivotA.clone() : new s(),
                    c = n.pivotB ? n.pivotB.clone() : new s();
                  i.call(this, t, l, e, c, a),
                    (this.axisA = n.axisA
                      ? n.axisA.clone()
                      : new s(1, 0, 0)).normalize(),
                    (this.axisB = n.axisB
                      ? n.axisB.clone()
                      : new s(1, 0, 0)).normalize();
                  var u = (this.rotationalEquation1 = new r(t, e, n)),
                    h = (this.rotationalEquation2 = new r(t, e, n)),
                    d = (this.motorEquation = new o(t, e, a));
                  (d.enabled = !1), this.equations.push(u, h, d);
                }
                e.exports = n;
                var i = (t("./Constraint"), t("./PointToPointConstraint")),
                  r = t("../equations/RotationalEquation"),
                  o = t("../equations/RotationalMotorEquation"),
                  s = (t("../equations/ContactEquation"), t("../math/Vec3"));
                (n.prototype = new i()),
                  (n.constructor = n),
                  (n.prototype.enableMotor = function () {
                    this.motorEquation.enabled = !0;
                  }),
                  (n.prototype.disableMotor = function () {
                    this.motorEquation.enabled = !1;
                  }),
                  (n.prototype.setMotorSpeed = function (t) {
                    this.motorEquation.targetVelocity = t;
                  }),
                  (n.prototype.setMotorMaxForce = function (t) {
                    (this.motorEquation.maxForce = t),
                      (this.motorEquation.minForce = -t);
                  });
                var a = new s(),
                  l = new s();
                n.prototype.update = function () {
                  var t = this.bodyA,
                    e = this.bodyB,
                    n = this.motorEquation,
                    r = this.rotationalEquation1,
                    o = this.rotationalEquation2,
                    s = a,
                    c = l,
                    u = this.axisA,
                    h = this.axisB;
                  i.prototype.update.call(this),
                    t.quaternion.vmult(u, s),
                    e.quaternion.vmult(h, c),
                    s.tangents(r.axisA, o.axisA),
                    r.axisB.copy(c),
                    o.axisB.copy(c),
                    this.motorEquation.enabled &&
                      (t.quaternion.vmult(this.axisA, n.axisA),
                      e.quaternion.vmult(this.axisB, n.axisB));
                };
              },
              {
                "../equations/ContactEquation": 19,
                "../equations/RotationalEquation": 22,
                "../equations/RotationalMotorEquation": 23,
                "../math/Vec3": 30,
                "./Constraint": 13,
                "./PointToPointConstraint": 17,
              },
            ],
            16: [
              function (t, e) {
                function n(t, e, n) {
                  var s = void 0 !== (n = n || {}).maxForce ? n.maxForce : 1e6,
                    a = new o(),
                    l = new o(),
                    c = new o();
                  t.position.vadd(e.position, c),
                    c.scale(0.5, c),
                    e.pointToLocalFrame(c, l),
                    t.pointToLocalFrame(c, a),
                    i.call(this, t, a, e, l, s);
                  var u = (this.rotationalEquation1 = new r(t, e, n)),
                    h = (this.rotationalEquation2 = new r(t, e, n)),
                    d = (this.rotationalEquation3 = new r(t, e, n));
                  this.equations.push(u, h, d);
                }
                e.exports = n;
                var i = (t("./Constraint"), t("./PointToPointConstraint")),
                  r = t("../equations/RotationalEquation"),
                  o =
                    (t("../equations/RotationalMotorEquation"),
                    t("../equations/ContactEquation"),
                    t("../math/Vec3"));
                (n.prototype = new i()),
                  (n.constructor = n),
                  new o(),
                  new o(),
                  (n.prototype.update = function () {
                    var t = this.bodyA,
                      e = this.bodyB,
                      n = (this.motorEquation, this.rotationalEquation1),
                      r = this.rotationalEquation2,
                      s = this.rotationalEquation3;
                    i.prototype.update.call(this),
                      t.vectorToWorldFrame(o.UNIT_X, n.axisA),
                      e.vectorToWorldFrame(o.UNIT_Y, n.axisB),
                      t.vectorToWorldFrame(o.UNIT_Y, r.axisA),
                      e.vectorToWorldFrame(o.UNIT_Z, r.axisB),
                      t.vectorToWorldFrame(o.UNIT_Z, s.axisA),
                      e.vectorToWorldFrame(o.UNIT_X, s.axisB);
                  });
              },
              {
                "../equations/ContactEquation": 19,
                "../equations/RotationalEquation": 22,
                "../equations/RotationalMotorEquation": 23,
                "../math/Vec3": 30,
                "./Constraint": 13,
                "./PointToPointConstraint": 17,
              },
            ],
            17: [
              function (t, e) {
                function n(t, e, n, s, a) {
                  i.call(this, t, n),
                    (a = void 0 !== a ? a : 1e6),
                    (this.pivotA = e ? e.clone() : new o()),
                    (this.pivotB = s ? s.clone() : new o());
                  var l = (this.equationX = new r(t, n)),
                    c = (this.equationY = new r(t, n)),
                    u = (this.equationZ = new r(t, n));
                  this.equations.push(l, c, u),
                    (l.minForce = c.minForce = u.minForce = -a),
                    (l.maxForce = c.maxForce = u.maxForce = a),
                    l.ni.set(1, 0, 0),
                    c.ni.set(0, 1, 0),
                    u.ni.set(0, 0, 1);
                }
                e.exports = n;
                var i = t("./Constraint"),
                  r = t("../equations/ContactEquation"),
                  o = t("../math/Vec3");
                (n.prototype = new i()),
                  (n.prototype.update = function () {
                    var t = this.bodyA,
                      e = this.bodyB,
                      n = this.equationX,
                      i = this.equationY,
                      r = this.equationZ;
                    t.quaternion.vmult(this.pivotA, n.ri),
                      e.quaternion.vmult(this.pivotB, n.rj),
                      i.ri.copy(n.ri),
                      i.rj.copy(n.rj),
                      r.ri.copy(n.ri),
                      r.rj.copy(n.rj);
                  });
              },
              {
                "../equations/ContactEquation": 19,
                "../math/Vec3": 30,
                "./Constraint": 13,
              },
            ],
            18: [
              function (t, e) {
                function n(t, e, n) {
                  var o = void 0 !== (n = n || {}).maxForce ? n.maxForce : 1e6;
                  r.call(this, t, e, -o, o),
                    (this.axisA = n.axisA ? n.axisA.clone() : new i(1, 0, 0)),
                    (this.axisB = n.axisB ? n.axisB.clone() : new i(0, 1, 0)),
                    (this.angle = void 0 !== n.angle ? n.angle : 0);
                }
                e.exports = n;
                var i = t("../math/Vec3"),
                  r = (t("../math/Mat3"), t("./Equation"));
                (n.prototype = new r()), (n.prototype.constructor = n);
                var o = new i(),
                  s = new i();
                n.prototype.computeB = function (t) {
                  var e = this.a,
                    n = this.b,
                    i = this.axisA,
                    r = this.axisB,
                    a = o,
                    l = s,
                    c = this.jacobianElementA,
                    u = this.jacobianElementB;
                  return (
                    i.cross(r, a),
                    r.cross(i, l),
                    c.rotational.copy(l),
                    u.rotational.copy(a),
                    -(Math.cos(this.angle) - i.dot(r)) * e -
                      this.computeGW() * n -
                      t * this.computeGiMf()
                  );
                };
              },
              { "../math/Mat3": 27, "../math/Vec3": 30, "./Equation": 20 },
            ],
            19: [
              function (t, e) {
                function n(t, e, n) {
                  (n = void 0 !== n ? n : 1e6),
                    i.call(this, t, e, 0, n),
                    (this.restitution = 0),
                    (this.ri = new r()),
                    (this.rj = new r()),
                    (this.ni = new r());
                }
                e.exports = n;
                var i = t("./Equation"),
                  r = t("../math/Vec3");
                t("../math/Mat3"),
                  (n.prototype = new i()),
                  (n.prototype.constructor = n);
                var o = new r(),
                  s = new r(),
                  a = new r();
                n.prototype.computeB = function (t) {
                  var e = this.a,
                    n = this.b,
                    i = this.bi,
                    r = this.bj,
                    l = this.ri,
                    c = this.rj,
                    u = o,
                    h = s,
                    d = i.velocity,
                    p = i.angularVelocity,
                    f = (i.force, i.torque, r.velocity),
                    m = r.angularVelocity,
                    g = (r.force, r.torque, a),
                    v = this.jacobianElementA,
                    y = this.jacobianElementB,
                    x = this.ni;
                  l.cross(x, u),
                    c.cross(x, h),
                    x.negate(v.spatial),
                    u.negate(v.rotational),
                    y.spatial.copy(x),
                    y.rotational.copy(h),
                    g.copy(r.position),
                    g.vadd(c, g),
                    g.vsub(i.position, g),
                    g.vsub(l, g);
                  var _ = x.dot(g),
                    b = this.restitution + 1;
                  return (
                    -_ * e -
                    (b * f.dot(x) - b * d.dot(x) + m.dot(h) - p.dot(u)) * n -
                    t * this.computeGiMf()
                  );
                };
                var l = new r(),
                  c = new r(),
                  u = new r(),
                  h = new r(),
                  d = new r();
                n.prototype.getImpactVelocityAlongNormal = function () {
                  var t = l,
                    e = c,
                    n = u,
                    i = h,
                    r = d;
                  return (
                    this.bi.position.vadd(this.ri, n),
                    this.bj.position.vadd(this.rj, i),
                    this.bi.getVelocityAtWorldPoint(n, t),
                    this.bj.getVelocityAtWorldPoint(i, e),
                    t.vsub(e, r),
                    this.ni.dot(r)
                  );
                };
              },
              { "../math/Mat3": 27, "../math/Vec3": 30, "./Equation": 20 },
            ],
            20: [
              function (t, e) {
                function n(t, e, r, o) {
                  (this.id = n.id++),
                    (this.minForce = void 0 === r ? -1e6 : r),
                    (this.maxForce = void 0 === o ? 1e6 : o),
                    (this.bi = t),
                    (this.bj = e),
                    (this.a = 0),
                    (this.b = 0),
                    (this.eps = 0),
                    (this.jacobianElementA = new i()),
                    (this.jacobianElementB = new i()),
                    (this.enabled = !0),
                    this.setSpookParams(1e7, 4, 1 / 60);
                }
                e.exports = n;
                var i = t("../math/JacobianElement"),
                  r = t("../math/Vec3");
                (n.prototype.constructor = n),
                  (n.id = 0),
                  (n.prototype.setSpookParams = function (t, e, n) {
                    var i = e,
                      r = t,
                      o = n;
                    (this.a = 4 / (o * (1 + 4 * i))),
                      (this.b = (4 * i) / (1 + 4 * i)),
                      (this.eps = 4 / (o * o * r * (1 + 4 * i)));
                  }),
                  (n.prototype.computeB = function (t, e, n) {
                    var i = this.computeGW();
                    return (
                      -this.computeGq() * t - i * e - this.computeGiMf() * n
                    );
                  }),
                  (n.prototype.computeGq = function () {
                    var t = this.jacobianElementA,
                      e = this.jacobianElementB,
                      n = this.bi,
                      i = this.bj,
                      r = n.position,
                      o = i.position;
                    return t.spatial.dot(r) + e.spatial.dot(o);
                  });
                var o = new r();
                (n.prototype.computeGW = function () {
                  var t = this.jacobianElementA,
                    e = this.jacobianElementB,
                    n = this.bi,
                    i = this.bj,
                    r = n.velocity,
                    s = i.velocity,
                    a = n.angularVelocity || o,
                    l = i.angularVelocity || o;
                  return t.multiplyVectors(r, a) + e.multiplyVectors(s, l);
                }),
                  (n.prototype.computeGWlambda = function () {
                    var t = this.jacobianElementA,
                      e = this.jacobianElementB,
                      n = this.bi,
                      i = this.bj,
                      r = n.vlambda,
                      s = i.vlambda,
                      a = n.wlambda || o,
                      l = i.wlambda || o;
                    return t.multiplyVectors(r, a) + e.multiplyVectors(s, l);
                  });
                var s = new r(),
                  a = new r(),
                  l = new r(),
                  c = new r();
                n.prototype.computeGiMf = function () {
                  var t = this.jacobianElementA,
                    e = this.jacobianElementB,
                    n = this.bi,
                    i = this.bj,
                    r = n.force,
                    o = n.torque,
                    u = i.force,
                    h = i.torque,
                    d = n.invMassSolve,
                    p = i.invMassSolve;
                  return (
                    n.invInertiaWorldSolve
                      ? n.invInertiaWorldSolve.vmult(o, l)
                      : l.set(0, 0, 0),
                    i.invInertiaWorldSolve
                      ? i.invInertiaWorldSolve.vmult(h, c)
                      : c.set(0, 0, 0),
                    r.mult(d, s),
                    u.mult(p, a),
                    t.multiplyVectors(s, l) + e.multiplyVectors(a, c)
                  );
                };
                var u = new r();
                n.prototype.computeGiMGt = function () {
                  var t = this.jacobianElementA,
                    e = this.jacobianElementB,
                    n = this.bi,
                    i = this.bj,
                    r = n.invMassSolve,
                    o = i.invMassSolve,
                    s = n.invInertiaWorldSolve,
                    a = i.invInertiaWorldSolve,
                    l = r + o;
                  return (
                    s && (s.vmult(t.rotational, u), (l += u.dot(t.rotational))),
                    a && (a.vmult(e.rotational, u), (l += u.dot(e.rotational))),
                    l
                  );
                };
                var h = new r();
                new r(),
                  new r(),
                  new r(),
                  new r(),
                  new r(),
                  (n.prototype.addToWlambda = function (t) {
                    var e = this.jacobianElementA,
                      n = this.jacobianElementB,
                      i = this.bi,
                      r = this.bj,
                      o = h;
                    e.spatial.mult(i.invMassSolve * t, o),
                      i.vlambda.vadd(o, i.vlambda),
                      n.spatial.mult(r.invMassSolve * t, o),
                      r.vlambda.vadd(o, r.vlambda),
                      i.invInertiaWorldSolve &&
                        (i.invInertiaWorldSolve.vmult(e.rotational, o),
                        o.mult(t, o),
                        i.wlambda.vadd(o, i.wlambda)),
                      r.invInertiaWorldSolve &&
                        (r.invInertiaWorldSolve.vmult(n.rotational, o),
                        o.mult(t, o),
                        r.wlambda.vadd(o, r.wlambda));
                  }),
                  (n.prototype.computeC = function () {
                    return this.computeGiMGt() + this.eps;
                  });
              },
              { "../math/JacobianElement": 26, "../math/Vec3": 30 },
            ],
            21: [
              function (t, e) {
                function n(t, e, n) {
                  i.call(this, t, e, -n, n),
                    (this.ri = new r()),
                    (this.rj = new r()),
                    (this.t = new r());
                }
                e.exports = n;
                var i = t("./Equation"),
                  r = t("../math/Vec3");
                t("../math/Mat3"),
                  (n.prototype = new i()),
                  (n.prototype.constructor = n);
                var o = new r(),
                  s = new r();
                n.prototype.computeB = function (t) {
                  var e = (this.a, this.b),
                    n = (this.bi, this.bj, this.ri),
                    i = this.rj,
                    r = o,
                    a = s,
                    l = this.t;
                  n.cross(l, r), i.cross(l, a);
                  var c = this.jacobianElementA,
                    u = this.jacobianElementB;
                  return (
                    l.negate(c.spatial),
                    r.negate(c.rotational),
                    u.spatial.copy(l),
                    u.rotational.copy(a),
                    -this.computeGW() * e - t * this.computeGiMf()
                  );
                };
              },
              { "../math/Mat3": 27, "../math/Vec3": 30, "./Equation": 20 },
            ],
            22: [
              function (t, e) {
                function n(t, e, n) {
                  var o = void 0 !== (n = n || {}).maxForce ? n.maxForce : 1e6;
                  r.call(this, t, e, -o, o),
                    (this.axisA = n.axisA ? n.axisA.clone() : new i(1, 0, 0)),
                    (this.axisB = n.axisB ? n.axisB.clone() : new i(0, 1, 0)),
                    (this.maxAngle = Math.PI / 2);
                }
                e.exports = n;
                var i = t("../math/Vec3"),
                  r = (t("../math/Mat3"), t("./Equation"));
                (n.prototype = new r()), (n.prototype.constructor = n);
                var o = new i(),
                  s = new i();
                n.prototype.computeB = function (t) {
                  var e = this.a,
                    n = this.b,
                    i = this.axisA,
                    r = this.axisB,
                    a = o,
                    l = s,
                    c = this.jacobianElementA,
                    u = this.jacobianElementB;
                  return (
                    i.cross(r, a),
                    r.cross(i, l),
                    c.rotational.copy(l),
                    u.rotational.copy(a),
                    -(Math.cos(this.maxAngle) - i.dot(r)) * e -
                      this.computeGW() * n -
                      t * this.computeGiMf()
                  );
                };
              },
              { "../math/Mat3": 27, "../math/Vec3": 30, "./Equation": 20 },
            ],
            23: [
              function (t, e) {
                function n(t, e, n) {
                  (n = void 0 !== n ? n : 1e6),
                    r.call(this, t, e, -n, n),
                    (this.axisA = new i()),
                    (this.axisB = new i()),
                    (this.targetVelocity = 0);
                }
                e.exports = n;
                var i = t("../math/Vec3"),
                  r = (t("../math/Mat3"), t("./Equation"));
                (n.prototype = new r()),
                  (n.prototype.constructor = n),
                  (n.prototype.computeB = function (t) {
                    var e = (this.a, this.b),
                      n = (this.bi, this.bj, this.axisA),
                      i = this.axisB,
                      r = this.jacobianElementA,
                      o = this.jacobianElementB;
                    return (
                      r.rotational.copy(n),
                      i.negate(o.rotational),
                      -(this.computeGW() - this.targetVelocity) * e -
                        t * this.computeGiMf()
                    );
                  });
              },
              { "../math/Mat3": 27, "../math/Vec3": 30, "./Equation": 20 },
            ],
            24: [
              function (t, e) {
                function n(t, e, r) {
                  (r = i.defaults(r, {
                    friction: 0.3,
                    restitution: 0.3,
                    contactEquationStiffness: 1e7,
                    contactEquationRelaxation: 3,
                    frictionEquationStiffness: 1e7,
                    frictionEquationRelaxation: 3,
                  })),
                    (this.id = n.idCounter++),
                    (this.materials = [t, e]),
                    (this.friction = r.friction),
                    (this.restitution = r.restitution),
                    (this.contactEquationStiffness =
                      r.contactEquationStiffness),
                    (this.contactEquationRelaxation =
                      r.contactEquationRelaxation),
                    (this.frictionEquationStiffness =
                      r.frictionEquationStiffness),
                    (this.frictionEquationRelaxation =
                      r.frictionEquationRelaxation);
                }
                var i = t("../utils/Utils");
                (e.exports = n), (n.idCounter = 0);
              },
              { "../utils/Utils": 53 },
            ],
            25: [
              function (t, e) {
                function n(t) {
                  var e = "";
                  "string" == typeof (t = t || {})
                    ? ((e = t), (t = {}))
                    : "object" == typeof t && (e = ""),
                    (this.name = e),
                    (this.id = n.idCounter++),
                    (this.friction = void 0 !== t.friction ? t.friction : -1),
                    (this.restitution =
                      void 0 !== t.restitution ? t.restitution : -1);
                }
                (e.exports = n), (n.idCounter = 0);
              },
              {},
            ],
            26: [
              function (t, e) {
                function n() {
                  (this.spatial = new i()), (this.rotational = new i());
                }
                e.exports = n;
                var i = t("./Vec3");
                (n.prototype.multiplyElement = function (t) {
                  return (
                    t.spatial.dot(this.spatial) +
                    t.rotational.dot(this.rotational)
                  );
                }),
                  (n.prototype.multiplyVectors = function (t, e) {
                    return t.dot(this.spatial) + e.dot(this.rotational);
                  });
              },
              { "./Vec3": 30 },
            ],
            27: [
              function (t, e) {
                function n(t) {
                  this.elements = t || [0, 0, 0, 0, 0, 0, 0, 0, 0];
                }
                e.exports = n;
                var i = t("./Vec3");
                (n.prototype.identity = function () {
                  var t = this.elements;
                  (t[0] = 1),
                    (t[1] = 0),
                    (t[2] = 0),
                    (t[3] = 0),
                    (t[4] = 1),
                    (t[5] = 0),
                    (t[6] = 0),
                    (t[7] = 0),
                    (t[8] = 1);
                }),
                  (n.prototype.setZero = function () {
                    var t = this.elements;
                    (t[0] = 0),
                      (t[1] = 0),
                      (t[2] = 0),
                      (t[3] = 0),
                      (t[4] = 0),
                      (t[5] = 0),
                      (t[6] = 0),
                      (t[7] = 0),
                      (t[8] = 0);
                  }),
                  (n.prototype.setTrace = function (t) {
                    var e = this.elements;
                    (e[0] = t.x), (e[4] = t.y), (e[8] = t.z);
                  }),
                  (n.prototype.getTrace = function (t) {
                    t = t || new i();
                    var e = this.elements;
                    (t.x = e[0]), (t.y = e[4]), (t.z = e[8]);
                  }),
                  (n.prototype.vmult = function (t, e) {
                    e = e || new i();
                    var n = this.elements,
                      r = t.x,
                      o = t.y,
                      s = t.z;
                    return (
                      (e.x = n[0] * r + n[1] * o + n[2] * s),
                      (e.y = n[3] * r + n[4] * o + n[5] * s),
                      (e.z = n[6] * r + n[7] * o + n[8] * s),
                      e
                    );
                  }),
                  (n.prototype.smult = function (t) {
                    for (var e = 0; e < this.elements.length; e++)
                      this.elements[e] *= t;
                  }),
                  (n.prototype.mmult = function (t, e) {
                    for (var i = e || new n(), r = 0; 3 > r; r++)
                      for (var o = 0; 3 > o; o++) {
                        for (var s = 0, a = 0; 3 > a; a++)
                          s += t.elements[r + 3 * a] * this.elements[a + 3 * o];
                        i.elements[r + 3 * o] = s;
                      }
                    return i;
                  }),
                  (n.prototype.scale = function (t, e) {
                    e = e || new n();
                    for (
                      var i = this.elements, r = e.elements, o = 0;
                      3 !== o;
                      o++
                    )
                      (r[3 * o + 0] = t.x * i[3 * o + 0]),
                        (r[3 * o + 1] = t.y * i[3 * o + 1]),
                        (r[3 * o + 2] = t.z * i[3 * o + 2]);
                    return e;
                  }),
                  (n.prototype.solve = function (t, e) {
                    e = e || new i();
                    for (var n = [], r = 0; 12 > r; r++) n.push(0);
                    var o;
                    for (r = 0; 3 > r; r++)
                      for (o = 0; 3 > o; o++)
                        n[r + 4 * o] = this.elements[r + 3 * o];
                    (n[3] = t.x), (n[7] = t.y), (n[11] = t.z);
                    var s,
                      a,
                      l = 3,
                      c = l;
                    do {
                      if (0 === n[(r = c - l) + 4 * r])
                        for (o = r + 1; c > o; o++)
                          if (0 !== n[r + 4 * o]) {
                            s = 4;
                            do {
                              n[(a = 4 - s) + 4 * r] += n[a + 4 * o];
                            } while (--s);
                            break;
                          }
                      if (0 !== n[r + 4 * r])
                        for (o = r + 1; c > o; o++) {
                          var u = n[r + 4 * o] / n[r + 4 * r];
                          s = 4;
                          do {
                            n[(a = 4 - s) + 4 * o] =
                              r >= a ? 0 : n[a + 4 * o] - n[a + 4 * r] * u;
                          } while (--s);
                        }
                    } while (--l);
                    if (
                      ((e.z = n[11] / n[10]),
                      (e.y = (n[7] - n[6] * e.z) / n[5]),
                      (e.x = (n[3] - n[2] * e.z - n[1] * e.y) / n[0]),
                      isNaN(e.x) ||
                        isNaN(e.y) ||
                        isNaN(e.z) ||
                        1 / 0 === e.x ||
                        1 / 0 === e.y ||
                        1 / 0 === e.z)
                    )
                      throw (
                        "Could not solve equation! Got x=[" +
                        e.toString() +
                        "], b=[" +
                        t.toString() +
                        "], A=[" +
                        this.toString() +
                        "]"
                      );
                    return e;
                  }),
                  (n.prototype.e = function (t, e, n) {
                    return void 0 === n
                      ? this.elements[e + 3 * t]
                      : void (this.elements[e + 3 * t] = n);
                  }),
                  (n.prototype.copy = function (t) {
                    for (var e = 0; e < t.elements.length; e++)
                      this.elements[e] = t.elements[e];
                    return this;
                  }),
                  (n.prototype.toString = function () {
                    for (var t = "", e = 0; 9 > e; e++)
                      t += this.elements[e] + ",";
                    return t;
                  }),
                  (n.prototype.reverse = function (t) {
                    t = t || new n();
                    for (var e = [], i = 0; 18 > i; i++) e.push(0);
                    var r;
                    for (i = 0; 3 > i; i++)
                      for (r = 0; 3 > r; r++)
                        e[i + 6 * r] = this.elements[i + 3 * r];
                    (e[3] = 1),
                      (e[9] = 0),
                      (e[15] = 0),
                      (e[4] = 0),
                      (e[10] = 1),
                      (e[16] = 0),
                      (e[5] = 0),
                      (e[11] = 0),
                      (e[17] = 1);
                    var o,
                      s,
                      a = 3,
                      l = a;
                    do {
                      if (0 === e[(i = l - a) + 6 * i])
                        for (r = i + 1; l > r; r++)
                          if (0 !== e[i + 6 * r]) {
                            o = 6;
                            do {
                              e[(s = 6 - o) + 6 * i] += e[s + 6 * r];
                            } while (--o);
                            break;
                          }
                      if (0 !== e[i + 6 * i])
                        for (r = i + 1; l > r; r++) {
                          var c = e[i + 6 * r] / e[i + 6 * i];
                          o = 6;
                          do {
                            e[(s = 6 - o) + 6 * r] =
                              i >= s ? 0 : e[s + 6 * r] - e[s + 6 * i] * c;
                          } while (--o);
                        }
                    } while (--a);
                    i = 2;
                    do {
                      r = i - 1;
                      do {
                        (c = e[i + 6 * r] / e[i + 6 * i]), (o = 6);
                        do {
                          e[(s = 6 - o) + 6 * r] =
                            e[s + 6 * r] - e[s + 6 * i] * c;
                        } while (--o);
                      } while (r--);
                    } while (--i);
                    i = 2;
                    do {
                      (c = 1 / e[i + 6 * i]), (o = 6);
                      do {
                        e[(s = 6 - o) + 6 * i] = e[s + 6 * i] * c;
                      } while (--o);
                    } while (i--);
                    i = 2;
                    do {
                      r = 2;
                      do {
                        if (((s = e[3 + r + 6 * i]), isNaN(s) || 1 / 0 === s))
                          throw (
                            "Could not reverse! A=[" + this.toString() + "]"
                          );
                        t.e(i, r, s);
                      } while (r--);
                    } while (i--);
                    return t;
                  }),
                  (n.prototype.setRotationFromQuaternion = function (t) {
                    var e = t.x,
                      n = t.y,
                      i = t.z,
                      r = t.w,
                      o = e + e,
                      s = n + n,
                      a = i + i,
                      l = e * o,
                      c = e * s,
                      u = e * a,
                      h = n * s,
                      d = n * a,
                      p = i * a,
                      f = r * o,
                      m = r * s,
                      g = r * a,
                      v = this.elements;
                    return (
                      (v[0] = 1 - (h + p)),
                      (v[1] = c - g),
                      (v[2] = u + m),
                      (v[3] = c + g),
                      (v[4] = 1 - (l + p)),
                      (v[5] = d - f),
                      (v[6] = u - m),
                      (v[7] = d + f),
                      (v[8] = 1 - (l + h)),
                      this
                    );
                  }),
                  (n.prototype.transpose = function (t) {
                    for (
                      var e = (t = t || new n()).elements,
                        i = this.elements,
                        r = 0;
                      3 !== r;
                      r++
                    )
                      for (var o = 0; 3 !== o; o++) e[3 * r + o] = i[3 * o + r];
                    return t;
                  });
              },
              { "./Vec3": 30 },
            ],
            28: [
              function (t, e) {
                function n(t, e, n, i) {
                  (this.x = void 0 !== t ? t : 0),
                    (this.y = void 0 !== e ? e : 0),
                    (this.z = void 0 !== n ? n : 0),
                    (this.w = void 0 !== i ? i : 1);
                }
                e.exports = n;
                var i = t("./Vec3");
                (n.prototype.set = function (t, e, n, i) {
                  (this.x = t), (this.y = e), (this.z = n), (this.w = i);
                }),
                  (n.prototype.toString = function () {
                    return this.x + "," + this.y + "," + this.z + "," + this.w;
                  }),
                  (n.prototype.toArray = function () {
                    return [this.x, this.y, this.z, this.w];
                  }),
                  (n.prototype.setFromAxisAngle = function (t, e) {
                    var n = Math.sin(0.5 * e);
                    (this.x = t.x * n),
                      (this.y = t.y * n),
                      (this.z = t.z * n),
                      (this.w = Math.cos(0.5 * e));
                  }),
                  (n.prototype.toAxisAngle = function (t) {
                    (t = t || new i()), this.normalize();
                    var e = 2 * Math.acos(this.w),
                      n = Math.sqrt(1 - this.w * this.w);
                    return (
                      0.001 > n
                        ? ((t.x = this.x), (t.y = this.y), (t.z = this.z))
                        : ((t.x = this.x / n),
                          (t.y = this.y / n),
                          (t.z = this.z / n)),
                      [t, e]
                    );
                  });
                var r = new i(),
                  o = new i();
                n.prototype.setFromVectors = function (t, e) {
                  if (t.isAntiparallelTo(e)) {
                    var n = r,
                      i = o;
                    t.tangents(n, i), this.setFromAxisAngle(n, Math.PI);
                  } else {
                    var s = t.cross(e);
                    (this.x = s.x),
                      (this.y = s.y),
                      (this.z = s.z),
                      (this.w =
                        Math.sqrt(
                          Math.pow(t.norm(), 2) * Math.pow(e.norm(), 2)
                        ) + t.dot(e)),
                      this.normalize();
                  }
                };
                var s = new i(),
                  a = new i(),
                  l = new i();
                (n.prototype.mult = function (t, e) {
                  e = e || new n();
                  var i = this.w,
                    r = s,
                    o = a,
                    c = l;
                  return (
                    r.set(this.x, this.y, this.z),
                    o.set(t.x, t.y, t.z),
                    (e.w = i * t.w - r.dot(o)),
                    r.cross(o, c),
                    (e.x = i * o.x + t.w * r.x + c.x),
                    (e.y = i * o.y + t.w * r.y + c.y),
                    (e.z = i * o.z + t.w * r.z + c.z),
                    e
                  );
                }),
                  (n.prototype.inverse = function (t) {
                    var e = this.x,
                      i = this.y,
                      r = this.z,
                      o = this.w;
                    (t = t || new n()), this.conjugate(t);
                    var s = 1 / (e * e + i * i + r * r + o * o);
                    return (t.x *= s), (t.y *= s), (t.z *= s), (t.w *= s), t;
                  }),
                  (n.prototype.conjugate = function (t) {
                    return (
                      ((t = t || new n()).x = -this.x),
                      (t.y = -this.y),
                      (t.z = -this.z),
                      (t.w = this.w),
                      t
                    );
                  }),
                  (n.prototype.normalize = function () {
                    var t = Math.sqrt(
                      this.x * this.x +
                        this.y * this.y +
                        this.z * this.z +
                        this.w * this.w
                    );
                    0 === t
                      ? ((this.x = 0), (this.y = 0), (this.z = 0), (this.w = 0))
                      : ((t = 1 / t),
                        (this.x *= t),
                        (this.y *= t),
                        (this.z *= t),
                        (this.w *= t));
                  }),
                  (n.prototype.normalizeFast = function () {
                    var t =
                      (3 -
                        (this.x * this.x +
                          this.y * this.y +
                          this.z * this.z +
                          this.w * this.w)) /
                      2;
                    0 === t
                      ? ((this.x = 0), (this.y = 0), (this.z = 0), (this.w = 0))
                      : ((this.x *= t),
                        (this.y *= t),
                        (this.z *= t),
                        (this.w *= t));
                  }),
                  (n.prototype.vmult = function (t, e) {
                    e = e || new i();
                    var n = t.x,
                      r = t.y,
                      o = t.z,
                      s = this.x,
                      a = this.y,
                      l = this.z,
                      c = this.w,
                      u = c * n + a * o - l * r,
                      h = c * r + l * n - s * o,
                      d = c * o + s * r - a * n,
                      p = -s * n - a * r - l * o;
                    return (
                      (e.x = u * c + p * -s + h * -l - d * -a),
                      (e.y = h * c + p * -a + d * -s - u * -l),
                      (e.z = d * c + p * -l + u * -a - h * -s),
                      e
                    );
                  }),
                  (n.prototype.copy = function (t) {
                    return (
                      (this.x = t.x),
                      (this.y = t.y),
                      (this.z = t.z),
                      (this.w = t.w),
                      this
                    );
                  }),
                  (n.prototype.toEuler = function (t, e) {
                    e = e || "YZX";
                    var n,
                      i,
                      r,
                      o = this.x,
                      s = this.y,
                      a = this.z,
                      l = this.w;
                    switch (e) {
                      case "YZX":
                        var c = o * s + a * l;
                        if (
                          (c > 0.499 &&
                            ((n = 2 * Math.atan2(o, l)),
                            (i = Math.PI / 2),
                            (r = 0)),
                          -0.499 > c &&
                            ((n = -2 * Math.atan2(o, l)),
                            (i = -Math.PI / 2),
                            (r = 0)),
                          isNaN(n))
                        ) {
                          var u = o * o,
                            h = s * s,
                            d = a * a;
                          (n = Math.atan2(
                            2 * s * l - 2 * o * a,
                            1 - 2 * h - 2 * d
                          )),
                            (i = Math.asin(2 * c)),
                            (r = Math.atan2(
                              2 * o * l - 2 * s * a,
                              1 - 2 * u - 2 * d
                            ));
                        }
                        break;
                      default:
                        throw new Error(
                          "Euler order " + e + " not supported yet."
                        );
                    }
                    (t.y = n), (t.z = i), (t.x = r);
                  }),
                  (n.prototype.setFromEuler = function (t, e, n, i) {
                    i = i || "XYZ";
                    var r = Math.cos(t / 2),
                      o = Math.cos(e / 2),
                      s = Math.cos(n / 2),
                      a = Math.sin(t / 2),
                      l = Math.sin(e / 2),
                      c = Math.sin(n / 2);
                    return (
                      "XYZ" === i
                        ? ((this.x = a * o * s + r * l * c),
                          (this.y = r * l * s - a * o * c),
                          (this.z = r * o * c + a * l * s),
                          (this.w = r * o * s - a * l * c))
                        : "YXZ" === i
                        ? ((this.x = a * o * s + r * l * c),
                          (this.y = r * l * s - a * o * c),
                          (this.z = r * o * c - a * l * s),
                          (this.w = r * o * s + a * l * c))
                        : "ZXY" === i
                        ? ((this.x = a * o * s - r * l * c),
                          (this.y = r * l * s + a * o * c),
                          (this.z = r * o * c + a * l * s),
                          (this.w = r * o * s - a * l * c))
                        : "ZYX" === i
                        ? ((this.x = a * o * s - r * l * c),
                          (this.y = r * l * s + a * o * c),
                          (this.z = r * o * c - a * l * s),
                          (this.w = r * o * s + a * l * c))
                        : "YZX" === i
                        ? ((this.x = a * o * s + r * l * c),
                          (this.y = r * l * s + a * o * c),
                          (this.z = r * o * c - a * l * s),
                          (this.w = r * o * s - a * l * c))
                        : "XZY" === i &&
                          ((this.x = a * o * s - r * l * c),
                          (this.y = r * l * s - a * o * c),
                          (this.z = r * o * c + a * l * s),
                          (this.w = r * o * s + a * l * c)),
                      this
                    );
                  }),
                  (n.prototype.clone = function () {
                    return new n(this.x, this.y, this.z, this.w);
                  });
              },
              { "./Vec3": 30 },
            ],
            29: [
              function (t, e) {
                function n(t) {
                  (t = t || {}),
                    (this.position = new i()),
                    t.position && this.position.copy(t.position),
                    (this.quaternion = new r()),
                    t.quaternion && this.quaternion.copy(t.quaternion);
                }
                var i = t("./Vec3"),
                  r = t("./Quaternion");
                e.exports = n;
                var o = new r();
                (n.pointToLocalFrame = function (t, e, n, r) {
                  return (
                    (r = r || new i()),
                    n.vsub(t, r),
                    e.conjugate(o),
                    o.vmult(r, r),
                    r
                  );
                }),
                  (n.prototype.pointToLocal = function (t, e) {
                    return n.pointToLocalFrame(
                      this.position,
                      this.quaternion,
                      t,
                      e
                    );
                  }),
                  (n.pointToWorldFrame = function (t, e, n, r) {
                    return (r = r || new i()), e.vmult(n, r), r.vadd(t, r), r;
                  }),
                  (n.prototype.pointToWorld = function (t, e) {
                    return n.pointToWorldFrame(
                      this.position,
                      this.quaternion,
                      t,
                      e
                    );
                  }),
                  (n.prototype.vectorToWorldFrame = function (t, e) {
                    return (e = e || new i()), this.quaternion.vmult(t, e), e;
                  }),
                  (n.vectorToWorldFrame = function (t, e, n) {
                    return t.vmult(e, n), n;
                  }),
                  (n.vectorToLocalFrame = function (t, e, n, r) {
                    return (
                      (r = r || new i()),
                      (e.w *= -1),
                      e.vmult(n, r),
                      (e.w *= -1),
                      r
                    );
                  });
              },
              { "./Quaternion": 28, "./Vec3": 30 },
            ],
            30: [
              function (t, e) {
                function n(t, e, n) {
                  (this.x = t || 0), (this.y = e || 0), (this.z = n || 0);
                }
                e.exports = n;
                var i = t("./Mat3");
                (n.ZERO = new n(0, 0, 0)),
                  (n.UNIT_X = new n(1, 0, 0)),
                  (n.UNIT_Y = new n(0, 1, 0)),
                  (n.UNIT_Z = new n(0, 0, 1)),
                  (n.prototype.cross = function (t, e) {
                    var i = t.x,
                      r = t.y,
                      o = t.z,
                      s = this.x,
                      a = this.y,
                      l = this.z;
                    return (
                      ((e = e || new n()).x = a * o - l * r),
                      (e.y = l * i - s * o),
                      (e.z = s * r - a * i),
                      e
                    );
                  }),
                  (n.prototype.set = function (t, e, n) {
                    return (this.x = t), (this.y = e), (this.z = n), this;
                  }),
                  (n.prototype.setZero = function () {
                    this.x = this.y = this.z = 0;
                  }),
                  (n.prototype.vadd = function (t, e) {
                    return e
                      ? ((e.x = t.x + this.x),
                        (e.y = t.y + this.y),
                        void (e.z = t.z + this.z))
                      : new n(this.x + t.x, this.y + t.y, this.z + t.z);
                  }),
                  (n.prototype.vsub = function (t, e) {
                    return e
                      ? ((e.x = this.x - t.x),
                        (e.y = this.y - t.y),
                        void (e.z = this.z - t.z))
                      : new n(this.x - t.x, this.y - t.y, this.z - t.z);
                  }),
                  (n.prototype.crossmat = function () {
                    return new i([
                      0,
                      -this.z,
                      this.y,
                      this.z,
                      0,
                      -this.x,
                      -this.y,
                      this.x,
                      0,
                    ]);
                  }),
                  (n.prototype.normalize = function () {
                    var t = this.x,
                      e = this.y,
                      n = this.z,
                      i = Math.sqrt(t * t + e * e + n * n);
                    if (i > 0) {
                      var r = 1 / i;
                      (this.x *= r), (this.y *= r), (this.z *= r);
                    } else (this.x = 0), (this.y = 0), (this.z = 0);
                    return i;
                  }),
                  (n.prototype.unit = function (t) {
                    t = t || new n();
                    var e = this.x,
                      i = this.y,
                      r = this.z,
                      o = Math.sqrt(e * e + i * i + r * r);
                    return (
                      o > 0
                        ? ((o = 1 / o),
                          (t.x = e * o),
                          (t.y = i * o),
                          (t.z = r * o))
                        : ((t.x = 1), (t.y = 0), (t.z = 0)),
                      t
                    );
                  }),
                  (n.prototype.norm = function () {
                    var t = this.x,
                      e = this.y,
                      n = this.z;
                    return Math.sqrt(t * t + e * e + n * n);
                  }),
                  (n.prototype.length = n.prototype.norm),
                  (n.prototype.norm2 = function () {
                    return this.dot(this);
                  }),
                  (n.prototype.lengthSquared = n.prototype.norm2),
                  (n.prototype.distanceTo = function (t) {
                    var e = this.x,
                      n = this.y,
                      i = this.z,
                      r = t.x,
                      o = t.y,
                      s = t.z;
                    return Math.sqrt(
                      (r - e) * (r - e) + (o - n) * (o - n) + (s - i) * (s - i)
                    );
                  }),
                  (n.prototype.distanceSquared = function (t) {
                    var e = this.x,
                      n = this.y,
                      i = this.z,
                      r = t.x,
                      o = t.y,
                      s = t.z;
                    return (
                      (r - e) * (r - e) + (o - n) * (o - n) + (s - i) * (s - i)
                    );
                  }),
                  (n.prototype.mult = function (t, e) {
                    e = e || new n();
                    var i = this.x,
                      r = this.y,
                      o = this.z;
                    return (e.x = t * i), (e.y = t * r), (e.z = t * o), e;
                  }),
                  (n.prototype.scale = n.prototype.mult),
                  (n.prototype.dot = function (t) {
                    return this.x * t.x + this.y * t.y + this.z * t.z;
                  }),
                  (n.prototype.isZero = function () {
                    return 0 === this.x && 0 === this.y && 0 === this.z;
                  }),
                  (n.prototype.negate = function (t) {
                    return (
                      ((t = t || new n()).x = -this.x),
                      (t.y = -this.y),
                      (t.z = -this.z),
                      t
                    );
                  });
                var r = new n(),
                  o = new n();
                (n.prototype.tangents = function (t, e) {
                  var n = this.norm();
                  if (n > 0) {
                    var i = r,
                      s = 1 / n;
                    i.set(this.x * s, this.y * s, this.z * s);
                    var a = o;
                    Math.abs(i.x) < 0.9
                      ? (a.set(1, 0, 0), i.cross(a, t))
                      : (a.set(0, 1, 0), i.cross(a, t)),
                      i.cross(t, e);
                  } else t.set(1, 0, 0), e.set(0, 1, 0);
                }),
                  (n.prototype.toString = function () {
                    return this.x + "," + this.y + "," + this.z;
                  }),
                  (n.prototype.toArray = function () {
                    return [this.x, this.y, this.z];
                  }),
                  (n.prototype.copy = function (t) {
                    return (this.x = t.x), (this.y = t.y), (this.z = t.z), this;
                  }),
                  (n.prototype.lerp = function (t, e, n) {
                    var i = this.x,
                      r = this.y,
                      o = this.z;
                    (n.x = i + (t.x - i) * e),
                      (n.y = r + (t.y - r) * e),
                      (n.z = o + (t.z - o) * e);
                  }),
                  (n.prototype.almostEquals = function (t, e) {
                    return (
                      void 0 === e && (e = 1e-6),
                      !(
                        Math.abs(this.x - t.x) > e ||
                        Math.abs(this.y - t.y) > e ||
                        Math.abs(this.z - t.z) > e
                      )
                    );
                  }),
                  (n.prototype.almostZero = function (t) {
                    return (
                      void 0 === t && (t = 1e-6),
                      !(
                        Math.abs(this.x) > t ||
                        Math.abs(this.y) > t ||
                        Math.abs(this.z) > t
                      )
                    );
                  });
                var s = new n();
                (n.prototype.isAntiparallelTo = function (t, e) {
                  return this.negate(s), s.almostEquals(t, e);
                }),
                  (n.prototype.clone = function () {
                    return new n(this.x, this.y, this.z);
                  });
              },
              { "./Mat3": 27 },
            ],
            31: [
              function (t, e) {
                function n(t) {
                  (t = t || {}),
                    i.apply(this),
                    (this.id = n.idCounter++),
                    (this.world = null),
                    (this.preStep = null),
                    (this.postStep = null),
                    (this.vlambda = new r()),
                    (this.collisionFilterGroup =
                      "number" == typeof t.collisionFilterGroup
                        ? t.collisionFilterGroup
                        : 1),
                    (this.collisionFilterMask =
                      "number" == typeof t.collisionFilterMask
                        ? t.collisionFilterMask
                        : 1),
                    (this.collisionResponse = !0),
                    (this.position = new r()),
                    t.position && this.position.copy(t.position),
                    (this.previousPosition = new r()),
                    (this.initPosition = new r()),
                    (this.velocity = new r()),
                    t.velocity && this.velocity.copy(t.velocity),
                    (this.initVelocity = new r()),
                    (this.force = new r());
                  var e = "number" == typeof t.mass ? t.mass : 0;
                  (this.mass = e),
                    (this.invMass = e > 0 ? 1 / e : 0),
                    (this.material = t.material || null),
                    (this.linearDamping =
                      "number" == typeof t.linearDamping
                        ? t.linearDamping
                        : 0.01),
                    (this.type = 0 >= e ? n.STATIC : n.DYNAMIC),
                    typeof t.type == typeof n.STATIC && (this.type = t.type),
                    (this.allowSleep = void 0 === t.allowSleep || t.allowSleep),
                    (this.sleepState = 0),
                    (this.sleepSpeedLimit =
                      void 0 !== t.sleepSpeedLimit ? t.sleepSpeedLimit : 0.1),
                    (this.sleepTimeLimit =
                      void 0 !== t.sleepTimeLimit ? t.sleepTimeLimit : 1),
                    (this.timeLastSleepy = 0),
                    (this._wakeUpAfterNarrowphase = !1),
                    (this.torque = new r()),
                    (this.quaternion = new s()),
                    t.quaternion && this.quaternion.copy(t.quaternion),
                    (this.initQuaternion = new s()),
                    (this.angularVelocity = new r()),
                    t.angularVelocity &&
                      this.angularVelocity.copy(t.angularVelocity),
                    (this.initAngularVelocity = new r()),
                    (this.interpolatedPosition = new r()),
                    (this.interpolatedQuaternion = new s()),
                    (this.shapes = []),
                    (this.shapeOffsets = []),
                    (this.shapeOrientations = []),
                    (this.inertia = new r()),
                    (this.invInertia = new r()),
                    (this.invInertiaWorld = new o()),
                    (this.invMassSolve = 0),
                    (this.invInertiaSolve = new r()),
                    (this.invInertiaWorldSolve = new o()),
                    (this.fixedRotation =
                      void 0 !== t.fixedRotation && t.fixedRotation),
                    (this.angularDamping =
                      void 0 !== t.angularDamping ? t.angularDamping : 0.01),
                    (this.aabb = new a()),
                    (this.aabbNeedsUpdate = !0),
                    (this.wlambda = new r()),
                    t.shape && this.addShape(t.shape),
                    this.updateMassProperties();
                }
                e.exports = n;
                var i = t("../utils/EventTarget"),
                  r = (t("../shapes/Shape"), t("../math/Vec3")),
                  o = t("../math/Mat3"),
                  s = t("../math/Quaternion"),
                  a = (t("../material/Material"), t("../collision/AABB")),
                  l = t("../shapes/Box");
                (n.prototype = new i()),
                  (n.prototype.constructor = n),
                  (n.DYNAMIC = 1),
                  (n.STATIC = 2),
                  (n.KINEMATIC = 4),
                  (n.AWAKE = 0),
                  (n.SLEEPY = 1),
                  (n.SLEEPING = 2),
                  (n.idCounter = 0),
                  (n.prototype.wakeUp = function () {
                    var t = this.sleepState;
                    (this.sleepState = 0),
                      t === n.SLEEPING &&
                        this.dispatchEvent({ type: "wakeup" });
                  }),
                  (n.prototype.sleep = function () {
                    (this.sleepState = n.SLEEPING),
                      this.velocity.set(0, 0, 0),
                      this.angularVelocity.set(0, 0, 0);
                  }),
                  (n.sleepyEvent = { type: "sleepy" }),
                  (n.sleepEvent = { type: "sleep" }),
                  (n.prototype.sleepTick = function (t) {
                    if (this.allowSleep) {
                      var e = this.sleepState,
                        i =
                          this.velocity.norm2() + this.angularVelocity.norm2(),
                        r = Math.pow(this.sleepSpeedLimit, 2);
                      e === n.AWAKE && r > i
                        ? ((this.sleepState = n.SLEEPY),
                          (this.timeLastSleepy = t),
                          this.dispatchEvent(n.sleepyEvent))
                        : e === n.SLEEPY && i > r
                        ? this.wakeUp()
                        : e === n.SLEEPY &&
                          t - this.timeLastSleepy > this.sleepTimeLimit &&
                          (this.sleep(), this.dispatchEvent(n.sleepEvent));
                    }
                  }),
                  (n.prototype.updateSolveMassProperties = function () {
                    this.sleepState === n.SLEEPING || this.type === n.KINEMATIC
                      ? ((this.invMassSolve = 0),
                        this.invInertiaSolve.setZero(),
                        this.invInertiaWorldSolve.setZero())
                      : ((this.invMassSolve = this.invMass),
                        this.invInertiaSolve.copy(this.invInertia),
                        this.invInertiaWorldSolve.copy(this.invInertiaWorld));
                  }),
                  (n.prototype.pointToLocalFrame = function (t, e) {
                    return (
                      (e = e || new r()),
                      t.vsub(this.position, e),
                      this.quaternion.conjugate().vmult(e, e),
                      e
                    );
                  }),
                  (n.prototype.vectorToLocalFrame = function (t, e) {
                    return (
                      (e = e || new r()),
                      this.quaternion.conjugate().vmult(t, e),
                      e
                    );
                  }),
                  (n.prototype.pointToWorldFrame = function (t, e) {
                    return (
                      (e = e || new r()),
                      this.quaternion.vmult(t, e),
                      e.vadd(this.position, e),
                      e
                    );
                  }),
                  (n.prototype.vectorToWorldFrame = function (t, e) {
                    return (e = e || new r()), this.quaternion.vmult(t, e), e;
                  });
                var c = new r(),
                  u = new s();
                (n.prototype.addShape = function (t, e, n) {
                  var i = new r(),
                    o = new s();
                  return (
                    e && i.copy(e),
                    n && o.copy(n),
                    this.shapes.push(t),
                    this.shapeOffsets.push(i),
                    this.shapeOrientations.push(o),
                    this.updateMassProperties(),
                    this.updateBoundingRadius(),
                    (this.aabbNeedsUpdate = !0),
                    this
                  );
                }),
                  (n.prototype.updateBoundingRadius = function () {
                    for (
                      var t = this.shapes,
                        e = this.shapeOffsets,
                        n = t.length,
                        i = 0,
                        r = 0;
                      r !== n;
                      r++
                    ) {
                      var o = t[r];
                      o.updateBoundingSphereRadius();
                      var s = e[r].norm(),
                        a = o.boundingSphereRadius;
                      s + a > i && (i = s + a);
                    }
                    this.boundingRadius = i;
                  });
                var h = new a();
                n.prototype.computeAABB = function () {
                  for (
                    var t = this.shapes,
                      e = this.shapeOffsets,
                      n = this.shapeOrientations,
                      i = t.length,
                      r = c,
                      o = u,
                      s = this.quaternion,
                      a = this.aabb,
                      l = h,
                      d = 0;
                    d !== i;
                    d++
                  ) {
                    var p = t[d];
                    n[d].mult(s, o),
                      o.vmult(e[d], r),
                      r.vadd(this.position, r),
                      p.calculateWorldAABB(r, o, l.lowerBound, l.upperBound),
                      0 === d ? a.copy(l) : a.extend(l);
                  }
                  this.aabbNeedsUpdate = !1;
                };
                var d = new o(),
                  p = new o();
                new o(),
                  (n.prototype.updateInertiaWorld = function (t) {
                    var e = this.invInertia;
                    if (e.x !== e.y || e.y !== e.z || t) {
                      var n = d,
                        i = p;
                      n.setRotationFromQuaternion(this.quaternion),
                        n.transpose(i),
                        n.scale(e, n),
                        n.mmult(i, this.invInertiaWorld);
                    }
                  });
                var f = new r(),
                  m = new r();
                n.prototype.applyForce = function (t, e) {
                  if (this.type === n.DYNAMIC) {
                    var i = f;
                    e.vsub(this.position, i);
                    var r = m;
                    i.cross(t, r),
                      this.force.vadd(t, this.force),
                      this.torque.vadd(r, this.torque);
                  }
                };
                var g = new r(),
                  v = new r();
                n.prototype.applyLocalForce = function (t, e) {
                  if (this.type === n.DYNAMIC) {
                    var i = g,
                      r = v;
                    this.vectorToWorldFrame(t, i),
                      this.pointToWorldFrame(e, r),
                      this.applyForce(i, r);
                  }
                };
                var y = new r(),
                  x = new r(),
                  _ = new r();
                n.prototype.applyImpulse = function (t, e) {
                  if (this.type === n.DYNAMIC) {
                    var i = y;
                    e.vsub(this.position, i);
                    var r = x;
                    r.copy(t),
                      r.mult(this.invMass, r),
                      this.velocity.vadd(r, this.velocity);
                    var o = _;
                    i.cross(t, o),
                      this.invInertiaWorld.vmult(o, o),
                      this.angularVelocity.vadd(o, this.angularVelocity);
                  }
                };
                var b = new r(),
                  w = new r();
                n.prototype.applyLocalImpulse = function (t, e) {
                  if (this.type === n.DYNAMIC) {
                    var i = b,
                      r = w;
                    this.vectorToWorldFrame(t, i),
                      this.pointToWorldFrame(e, r),
                      this.applyImpulse(i, r);
                  }
                };
                var M = new r();
                (n.prototype.updateMassProperties = function () {
                  var t = M;
                  this.invMass = this.mass > 0 ? 1 / this.mass : 0;
                  var e = this.inertia,
                    n = this.fixedRotation;
                  this.computeAABB(),
                    t.set(
                      (this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2,
                      (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2,
                      (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2
                    ),
                    l.calculateInertia(t, this.mass, e),
                    this.invInertia.set(
                      e.x > 0 && !n ? 1 / e.x : 0,
                      e.y > 0 && !n ? 1 / e.y : 0,
                      e.z > 0 && !n ? 1 / e.z : 0
                    ),
                    this.updateInertiaWorld(!0);
                }),
                  (n.prototype.getVelocityAtWorldPoint = function (t, e) {
                    var n = new r();
                    return (
                      t.vsub(this.position, n),
                      this.angularVelocity.cross(n, e),
                      this.velocity.vadd(e, e),
                      e
                    );
                  });
              },
              {
                "../collision/AABB": 3,
                "../material/Material": 25,
                "../math/Mat3": 27,
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "../shapes/Box": 37,
                "../shapes/Shape": 43,
                "../utils/EventTarget": 49,
              },
            ],
            32: [
              function (t, e) {
                function n(t) {
                  (this.chassisBody = t.chassisBody),
                    (this.wheelInfos = []),
                    (this.sliding = !1),
                    (this.world = null),
                    (this.indexRightAxis =
                      void 0 !== t.indexRightAxis ? t.indexRightAxis : 1),
                    (this.indexForwardAxis =
                      void 0 !== t.indexForwardAxis ? t.indexForwardAxis : 0),
                    (this.indexUpAxis =
                      void 0 !== t.indexUpAxis ? t.indexUpAxis : 2);
                }
                function i(t, e, n, i, o) {
                  var s = 0,
                    a = n,
                    l = x,
                    c = _,
                    u = b;
                  return (
                    t.getVelocityAtWorldPoint(a, l),
                    e.getVelocityAtWorldPoint(a, c),
                    l.vsub(c, u),
                    (s = -i.dot(u) * (1 / (r(t, n, i) + r(e, n, i)))) > o &&
                      (s = o),
                    -o > s && (s = -o),
                    s
                  );
                }
                function r(t, e, n) {
                  var i = w,
                    r = M,
                    o = S,
                    s = E;
                  return (
                    e.vsub(t.position, i),
                    i.cross(n, r),
                    t.invInertiaWorld.vmult(r, s),
                    s.cross(i, o),
                    t.invMass + n.dot(o)
                  );
                }
                function o(t, e, n, i, r, o) {
                  if (r.norm2() > 1.1) return 0;
                  var s = T,
                    a = A,
                    l = C;
                  return (
                    t.getVelocityAtWorldPoint(e, s),
                    n.getVelocityAtWorldPoint(i, a),
                    s.vsub(a, l),
                    -0.2 * r.dot(l) * (1 / (t.invMass + n.invMass))
                  );
                }
                var s = (t("./Body"), t("../math/Vec3")),
                  a = t("../math/Quaternion"),
                  l = (t("../collision/RaycastResult"), t("../collision/Ray")),
                  c = t("../objects/WheelInfo");
                e.exports = n;
                var u = (new s(), new s(), new s(), new s()),
                  h = new s(),
                  d = new s();
                new l(),
                  (n.prototype.addWheel = function (t) {
                    var e = new c((t = t || {})),
                      n = this.wheelInfos.length;
                    return this.wheelInfos.push(e), n;
                  }),
                  (n.prototype.setSteeringValue = function (t, e) {
                    this.wheelInfos[e].steering = t;
                  }),
                  new s(),
                  (n.prototype.applyEngineForce = function (t, e) {
                    this.wheelInfos[e].engineForce = t;
                  }),
                  (n.prototype.setBrake = function (t, e) {
                    this.wheelInfos[e].brake = t;
                  }),
                  (n.prototype.addToWorld = function (t) {
                    this.constraints, t.add(this.chassisBody);
                    var e = this;
                    (this.preStepCallback = function () {
                      e.updateVehicle(t.dt);
                    }),
                      t.addEventListener("preStep", this.preStepCallback),
                      (this.world = t);
                  }),
                  (n.prototype.getVehicleAxisWorld = function (t, e) {
                    e.set(0 === t ? 1 : 0, 1 === t ? 1 : 0, 2 === t ? 1 : 0),
                      this.chassisBody.vectorToWorldFrame(e, e);
                  }),
                  (n.prototype.updateVehicle = function (t) {
                    for (
                      var e = this.wheelInfos,
                        n = e.length,
                        i = this.chassisBody,
                        r = 0;
                      n > r;
                      r++
                    )
                      this.updateWheelTransform(r);
                    this.currentVehicleSpeedKmHour = 3.6 * i.velocity.norm();
                    var o = new s();
                    for (
                      this.getVehicleAxisWorld(this.indexForwardAxis, o),
                        o.dot(i.velocity) < 0 &&
                          (this.currentVehicleSpeedKmHour *= -1),
                        r = 0;
                      n > r;
                      r++
                    )
                      this.castRay(e[r]);
                    this.updateSuspension(t);
                    var a = new s(),
                      l = new s();
                    for (r = 0; n > r; r++) {
                      var c = (p = e[r]).suspensionForce;
                      c > p.maxSuspensionForce && (c = p.maxSuspensionForce),
                        p.raycastResult.hitNormalWorld.scale(c * t, a),
                        p.raycastResult.hitPointWorld.vsub(i.position, l),
                        i.applyImpulse(a, p.raycastResult.hitPointWorld);
                    }
                    this.updateFriction(t);
                    var u = new s(),
                      h = new s(),
                      d = new s();
                    for (r = 0; n > r; r++) {
                      var p = e[r];
                      i.getVelocityAtWorldPoint(
                        p.chassisConnectionPointWorld,
                        d
                      );
                      var f = 1;
                      switch (this.indexUpAxis) {
                        case 1:
                          f = -1;
                      }
                      if (p.isInContact) {
                        this.getVehicleAxisWorld(this.indexForwardAxis, h);
                        var m = h.dot(p.raycastResult.hitNormalWorld);
                        p.raycastResult.hitNormalWorld.scale(m, u),
                          h.vsub(u, h);
                        var g = h.dot(d);
                        p.deltaRotation = (f * g * t) / p.radius;
                      }
                      (!p.sliding && p.isInContact) ||
                        0 === p.engineForce ||
                        !p.useCustomSlidingRotationalSpeed ||
                        (p.deltaRotation =
                          (p.engineForce > 0 ? 1 : -1) *
                          p.customSlidingRotationalSpeed *
                          t),
                        Math.abs(p.brake) > Math.abs(p.engineForce) &&
                          (p.deltaRotation = 0),
                        (p.rotation += p.deltaRotation),
                        (p.deltaRotation *= 0.99);
                    }
                  }),
                  (n.prototype.updateSuspension = function () {
                    for (
                      var t = this.chassisBody.mass,
                        e = this.wheelInfos,
                        n = e.length,
                        i = 0;
                      n > i;
                      i++
                    ) {
                      var r = e[i];
                      if (r.isInContact) {
                        var o,
                          s = r.suspensionRestLength - r.suspensionLength;
                        o =
                          r.suspensionStiffness *
                          s *
                          r.clippedInvContactDotSuspension;
                        var a = r.suspensionRelativeVelocity;
                        (o -=
                          (0 > a ? r.dampingCompression : r.dampingRelaxation) *
                          a),
                          (r.suspensionForce = o * t),
                          r.suspensionForce < 0 && (r.suspensionForce = 0);
                      } else r.suspensionForce = 0;
                    }
                  }),
                  (n.prototype.removeFromWorld = function (t) {
                    this.constraints,
                      t.remove(this.chassisBody),
                      t.removeEventListener("preStep", this.preStepCallback),
                      (this.world = null);
                  });
                var p = new s(),
                  f = new s();
                (n.prototype.castRay = function (t) {
                  var e = p,
                    n = f;
                  this.updateWheelTransformWorld(t);
                  var i = this.chassisBody,
                    r = -1,
                    o = t.suspensionRestLength + t.radius;
                  t.directionWorld.scale(o, e);
                  var a = t.chassisConnectionPointWorld;
                  a.vadd(e, n);
                  var l = t.raycastResult;
                  l.reset();
                  var c = i.collisionResponse;
                  (i.collisionResponse = !1),
                    this.world.rayTest(a, n, l),
                    (i.collisionResponse = c);
                  var u = l.body;
                  if (((t.raycastResult.groundObject = 0), u)) {
                    (r = l.distance),
                      (t.raycastResult.hitNormalWorld = l.hitNormalWorld),
                      (t.isInContact = !0);
                    var h = l.distance;
                    t.suspensionLength = h - t.radius;
                    var d = t.suspensionRestLength - t.maxSuspensionTravel,
                      m = t.suspensionRestLength + t.maxSuspensionTravel;
                    t.suspensionLength < d && (t.suspensionLength = d),
                      t.suspensionLength > m &&
                        ((t.suspensionLength = m), t.raycastResult.reset());
                    var g = t.raycastResult.hitNormalWorld.dot(
                        t.directionWorld
                      ),
                      v = new s();
                    i.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld, v);
                    var y = t.raycastResult.hitNormalWorld.dot(v);
                    if (g >= -0.1)
                      (t.suspensionRelativeVelocity = 0),
                        (t.clippedInvContactDotSuspension = 10);
                    else {
                      var x = -1 / g;
                      (t.suspensionRelativeVelocity = y * x),
                        (t.clippedInvContactDotSuspension = x);
                    }
                  } else
                    (t.suspensionLength =
                      t.suspensionRestLength + 0 * t.maxSuspensionTravel),
                      (t.suspensionRelativeVelocity = 0),
                      t.directionWorld.scale(
                        -1,
                        t.raycastResult.hitNormalWorld
                      ),
                      (t.clippedInvContactDotSuspension = 1);
                  return r;
                }),
                  (n.prototype.updateWheelTransformWorld = function (t) {
                    t.isInContact = !1;
                    var e = this.chassisBody;
                    e.pointToWorldFrame(
                      t.chassisConnectionPointLocal,
                      t.chassisConnectionPointWorld
                    ),
                      e.vectorToWorldFrame(t.directionLocal, t.directionWorld),
                      e.vectorToWorldFrame(t.axleLocal, t.axleWorld);
                  }),
                  (n.prototype.updateWheelTransform = function (t) {
                    var e = u,
                      n = h,
                      i = d,
                      r = this.wheelInfos[t];
                    this.updateWheelTransformWorld(r),
                      r.directionLocal.scale(-1, e),
                      n.copy(r.axleLocal),
                      e.cross(n, i),
                      i.normalize(),
                      n.normalize();
                    var o = r.steering,
                      s = new a();
                    s.setFromAxisAngle(e, o);
                    var l = new a();
                    l.setFromAxisAngle(n, r.rotation);
                    var c = r.worldTransform.quaternion;
                    this.chassisBody.quaternion.mult(s, c),
                      c.mult(l, c),
                      c.normalize();
                    var p = r.worldTransform.position;
                    p.copy(r.directionWorld),
                      p.scale(r.suspensionLength, p),
                      p.vadd(r.chassisConnectionPointWorld, p);
                  });
                var m = [new s(1, 0, 0), new s(0, 1, 0), new s(0, 0, 1)];
                n.prototype.getWheelTransformWorld = function (t) {
                  return this.wheelInfos[t].worldTransform;
                };
                var g = new s(),
                  v = [],
                  y = [];
                n.prototype.updateFriction = function (t) {
                  for (
                    var e = g,
                      n = this.wheelInfos,
                      r = n.length,
                      a = this.chassisBody,
                      l = y,
                      c = v,
                      u = 0;
                    r > u;
                    u++
                  )
                    (f = (A = n[u]).raycastResult.body),
                      (A.sideImpulse = 0),
                      (A.forwardImpulse = 0),
                      l[u] || (l[u] = new s()),
                      c[u] || (c[u] = new s());
                  for (u = 0; r > u; u++)
                    if ((f = (A = n[u]).raycastResult.body)) {
                      var h = c[u];
                      this.getWheelTransformWorld(u).vectorToWorldFrame(
                        m[this.indexRightAxis],
                        h
                      );
                      var d = A.raycastResult.hitNormalWorld,
                        p = h.dot(d);
                      d.scale(p, e),
                        h.vsub(e, h),
                        h.normalize(),
                        d.cross(h, l[u]),
                        l[u].normalize(),
                        (A.sideImpulse = o(
                          a,
                          A.raycastResult.hitPointWorld,
                          f,
                          A.raycastResult.hitPointWorld,
                          h
                        )),
                        (A.sideImpulse *= 1);
                    }
                  for (this.sliding = !1, u = 0; r > u; u++) {
                    var f = (A = n[u]).raycastResult.body,
                      x = 0;
                    if (((A.slipInfo = 1), f)) {
                      var _ = A.brake ? A.brake : 0;
                      x = i(a, f, A.raycastResult.hitPointWorld, l[u], _);
                      var b = _ / (x += A.engineForce * t);
                      A.slipInfo *= b;
                    }
                    if (((A.forwardImpulse = 0), (A.skidInfo = 1), f)) {
                      A.skidInfo = 1;
                      var w = A.suspensionForce * t * A.frictionSlip,
                        M = w * w;
                      A.forwardImpulse = x;
                      var S = 0.5 * A.forwardImpulse,
                        E = 1 * A.sideImpulse,
                        T = S * S + E * E;
                      (A.sliding = !1),
                        T > M &&
                          ((this.sliding = !0),
                          (A.sliding = !0),
                          (b = w / Math.sqrt(T)),
                          (A.skidInfo *= b));
                    }
                  }
                  if (this.sliding)
                    for (u = 0; r > u; u++)
                      0 !== (A = n[u]).sideImpulse &&
                        A.skidInfo < 1 &&
                        ((A.forwardImpulse *= A.skidInfo),
                        (A.sideImpulse *= A.skidInfo));
                  for (u = 0; r > u; u++) {
                    var A = n[u],
                      C = new s();
                    if (
                      (C.copy(A.raycastResult.hitPointWorld),
                      0 !== A.forwardImpulse)
                    ) {
                      var L = new s();
                      l[u].scale(A.forwardImpulse, L), a.applyImpulse(L, C);
                    }
                    if (0 !== A.sideImpulse) {
                      f = A.raycastResult.body;
                      var R = new s();
                      R.copy(A.raycastResult.hitPointWorld);
                      var P = new s();
                      c[u].scale(A.sideImpulse, P),
                        a.pointToLocalFrame(C, C),
                        (C["xyz"[this.indexUpAxis]] *= A.rollInfluence),
                        a.pointToWorldFrame(C, C),
                        a.applyImpulse(P, C),
                        P.scale(-1, P),
                        f.applyImpulse(P, R);
                    }
                  }
                };
                var x = new s(),
                  _ = new s(),
                  b = new s(),
                  w = new s(),
                  M = new s(),
                  S = new s(),
                  E = new s(),
                  T = new s(),
                  A = new s(),
                  C = new s();
              },
              {
                "../collision/Ray": 9,
                "../collision/RaycastResult": 10,
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "../objects/WheelInfo": 36,
                "./Body": 31,
              },
            ],
            33: [
              function (t, e) {
                function n(t) {
                  if (
                    ((this.wheelBodies = []),
                    (this.coordinateSystem =
                      void 0 === t.coordinateSystem
                        ? new s(1, 2, 3)
                        : t.coordinateSystem.clone()),
                    (this.chassisBody = t.chassisBody),
                    !this.chassisBody)
                  ) {
                    var e = new o(new s(5, 2, 0.5));
                    this.chassisBody = new i(1, e);
                  }
                  (this.constraints = []),
                    (this.wheelAxes = []),
                    (this.wheelForces = []);
                }
                var i = t("./Body"),
                  r = t("../shapes/Sphere"),
                  o = t("../shapes/Box"),
                  s = t("../math/Vec3"),
                  a = t("../constraints/HingeConstraint");
                (e.exports = n),
                  (n.prototype.addWheel = function (t) {
                    var e = (t = t || {}).body;
                    e || (e = new i(1, new r(1.2))),
                      this.wheelBodies.push(e),
                      this.wheelForces.push(0);
                    var n =
                        (new s(),
                        void 0 !== t.position ? t.position.clone() : new s()),
                      o = new s();
                    this.chassisBody.pointToWorldFrame(n, o),
                      e.position.set(o.x, o.y, o.z);
                    var l = void 0 !== t.axis ? t.axis.clone() : new s(0, 1, 0);
                    this.wheelAxes.push(l);
                    var c = new a(this.chassisBody, e, {
                      pivotA: n,
                      axisA: l,
                      pivotB: s.ZERO,
                      axisB: l,
                      collideConnected: !1,
                    });
                    return (
                      this.constraints.push(c), this.wheelBodies.length - 1
                    );
                  }),
                  (n.prototype.setSteeringValue = function (t, e) {
                    var n = this.wheelAxes[e],
                      i = Math.cos(t),
                      r = Math.sin(t),
                      o = n.x,
                      s = n.y;
                    this.constraints[e].axisA.set(
                      i * o - r * s,
                      r * o + i * s,
                      0
                    );
                  }),
                  (n.prototype.setMotorSpeed = function (t, e) {
                    var n = this.constraints[e];
                    n.enableMotor(), (n.motorTargetVelocity = t);
                  }),
                  (n.prototype.disableMotor = function (t) {
                    this.constraints[t].disableMotor();
                  });
                var l = new s();
                (n.prototype.setWheelForce = function (t, e) {
                  this.wheelForces[e] = t;
                }),
                  (n.prototype.applyWheelForce = function (t, e) {
                    var n = this.wheelAxes[e],
                      i = this.wheelBodies[e],
                      r = i.torque;
                    n.scale(t, l), i.vectorToWorldFrame(l, l), r.vadd(l, r);
                  }),
                  (n.prototype.addToWorld = function (t) {
                    for (
                      var e = this.constraints,
                        n = this.wheelBodies.concat([this.chassisBody]),
                        i = 0;
                      i < n.length;
                      i++
                    )
                      t.add(n[i]);
                    for (i = 0; i < e.length; i++) t.addConstraint(e[i]);
                    t.addEventListener("preStep", this._update.bind(this));
                  }),
                  (n.prototype._update = function () {
                    for (var t = this.wheelForces, e = 0; e < t.length; e++)
                      this.applyWheelForce(t[e], e);
                  }),
                  (n.prototype.removeFromWorld = function (t) {
                    for (
                      var e = this.constraints,
                        n = this.wheelBodies.concat([this.chassisBody]),
                        i = 0;
                      i < n.length;
                      i++
                    )
                      t.remove(n[i]);
                    for (i = 0; i < e.length; i++) t.removeConstraint(e[i]);
                  });
                var c = new s();
                n.prototype.getWheelSpeed = function (t) {
                  var e = this.wheelAxes[t],
                    n = this.wheelBodies[t].angularVelocity;
                  return this.chassisBody.vectorToWorldFrame(e, c), n.dot(c);
                };
              },
              {
                "../constraints/HingeConstraint": 15,
                "../math/Vec3": 30,
                "../shapes/Box": 37,
                "../shapes/Sphere": 44,
                "./Body": 31,
              },
            ],
            34: [
              function (t, e) {
                function n() {
                  (this.particles = []),
                    (this.density = 1),
                    (this.smoothingRadius = 1),
                    (this.speedOfSound = 1),
                    (this.viscosity = 0.01),
                    (this.eps = 1e-6),
                    (this.pressures = []),
                    (this.densities = []),
                    (this.neighbors = []);
                }
                e.exports = n;
                var i = (t("../shapes/Shape"), t("../math/Vec3"));
                t("../math/Quaternion"),
                  t("../shapes/Particle"),
                  t("../objects/Body"),
                  t("../material/Material"),
                  (n.prototype.add = function (t) {
                    this.particles.push(t),
                      this.neighbors.length < this.particles.length &&
                        this.neighbors.push([]);
                  }),
                  (n.prototype.remove = function (t) {
                    var e = this.particles.indexOf(t);
                    -1 !== e &&
                      (this.particles.splice(e, 1),
                      this.neighbors.length > this.particles.length &&
                        this.neighbors.pop());
                  });
                var r = new i();
                n.prototype.getNeighbors = function (t, e) {
                  for (
                    var n = this.particles.length,
                      i = t.id,
                      o = this.smoothingRadius * this.smoothingRadius,
                      s = r,
                      a = 0;
                    a !== n;
                    a++
                  ) {
                    var l = this.particles[a];
                    l.position.vsub(t.position, s),
                      i !== l.id && s.norm2() < o && e.push(l);
                  }
                };
                var o = new i(),
                  s = new i(),
                  a = new i(),
                  l = new i(),
                  c = new i(),
                  u = new i();
                (n.prototype.update = function () {
                  for (
                    var t = this.particles.length,
                      e = o,
                      n = this.speedOfSound,
                      i = this.eps,
                      r = 0;
                    r !== t;
                    r++
                  ) {
                    var h = this.particles[r];
                    ((S = this.neighbors[r]).length = 0),
                      this.getNeighbors(h, S),
                      S.push(this.particles[r]);
                    for (var d = S.length, p = 0, f = 0; f !== d; f++) {
                      h.position.vsub(S[f].position, e);
                      var m = e.norm(),
                        g = this.w(m);
                      p += S[f].mass * g;
                    }
                    (this.densities[r] = p),
                      (this.pressures[r] =
                        n * n * (this.densities[r] - this.density));
                  }
                  var v = s,
                    y = a,
                    x = l,
                    _ = c,
                    b = u;
                  for (r = 0; r !== t; r++) {
                    var w,
                      M,
                      S,
                      E = this.particles[r];
                    for (
                      v.set(0, 0, 0),
                        y.set(0, 0, 0),
                        d = (S = this.neighbors[r]).length,
                        f = 0;
                      f !== d;
                      f++
                    ) {
                      var T = S[f];
                      E.position.vsub(T.position, _);
                      var A = _.norm();
                      (w =
                        -T.mass *
                        (this.pressures[r] /
                          (this.densities[r] * this.densities[r] + i) +
                          this.pressures[f] /
                            (this.densities[f] * this.densities[f] + i))),
                        this.gradw(_, x),
                        x.mult(w, x),
                        v.vadd(x, v),
                        T.velocity.vsub(E.velocity, b),
                        b.mult(
                          (1 / (1e-4 + this.densities[r] * this.densities[f])) *
                            this.viscosity *
                            T.mass,
                          b
                        ),
                        (M = this.nablaw(A)),
                        b.mult(M, b),
                        y.vadd(b, y);
                    }
                    y.mult(E.mass, y),
                      v.mult(E.mass, v),
                      E.force.vadd(y, E.force),
                      E.force.vadd(v, E.force);
                  }
                }),
                  (n.prototype.w = function (t) {
                    var e = this.smoothingRadius;
                    return (
                      (315 / (64 * Math.PI * Math.pow(e, 9))) *
                      Math.pow(e * e - t * t, 3)
                    );
                  }),
                  (n.prototype.gradw = function (t, e) {
                    var n = t.norm(),
                      i = this.smoothingRadius;
                    t.mult(
                      (945 / (32 * Math.PI * Math.pow(i, 9))) *
                        Math.pow(i * i - n * n, 2),
                      e
                    );
                  }),
                  (n.prototype.nablaw = function (t) {
                    var e = this.smoothingRadius;
                    return (
                      (945 / (32 * Math.PI * Math.pow(e, 9))) *
                      (e * e - t * t) *
                      (7 * t * t - 3 * e * e)
                    );
                  });
              },
              {
                "../material/Material": 25,
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "../objects/Body": 31,
                "../shapes/Particle": 41,
                "../shapes/Shape": 43,
              },
            ],
            35: [
              function (t, e) {
                function n(t, e, n) {
                  (n = n || {}),
                    (this.restLength =
                      "number" == typeof n.restLength ? n.restLength : 1),
                    (this.stiffness = n.stiffness || 100),
                    (this.damping = n.damping || 1),
                    (this.bodyA = t),
                    (this.bodyB = e),
                    (this.localAnchorA = new i()),
                    (this.localAnchorB = new i()),
                    n.localAnchorA && this.localAnchorA.copy(n.localAnchorA),
                    n.localAnchorB && this.localAnchorB.copy(n.localAnchorB),
                    n.worldAnchorA && this.setWorldAnchorA(n.worldAnchorA),
                    n.worldAnchorB && this.setWorldAnchorB(n.worldAnchorB);
                }
                var i = t("../math/Vec3");
                (e.exports = n),
                  (n.prototype.setWorldAnchorA = function (t) {
                    this.bodyA.pointToLocalFrame(t, this.localAnchorA);
                  }),
                  (n.prototype.setWorldAnchorB = function (t) {
                    this.bodyB.pointToLocalFrame(t, this.localAnchorB);
                  }),
                  (n.prototype.getWorldAnchorA = function (t) {
                    this.bodyA.pointToWorldFrame(this.localAnchorA, t);
                  }),
                  (n.prototype.getWorldAnchorB = function (t) {
                    this.bodyB.pointToWorldFrame(this.localAnchorB, t);
                  });
                var r = new i(),
                  o = new i(),
                  s = new i(),
                  a = new i(),
                  l = new i(),
                  c = new i(),
                  u = new i(),
                  h = new i(),
                  d = new i(),
                  p = new i(),
                  f = new i();
                n.prototype.applyForce = function () {
                  var t = this.stiffness,
                    e = this.damping,
                    n = this.restLength,
                    i = this.bodyA,
                    m = this.bodyB,
                    g = r,
                    v = o,
                    y = s,
                    x = a,
                    _ = f,
                    b = l,
                    w = c,
                    M = u,
                    S = h,
                    E = d,
                    T = p;
                  this.getWorldAnchorA(b),
                    this.getWorldAnchorB(w),
                    b.vsub(i.position, M),
                    w.vsub(m.position, S),
                    w.vsub(b, g);
                  var A = g.norm();
                  v.copy(g),
                    v.normalize(),
                    m.velocity.vsub(i.velocity, y),
                    m.angularVelocity.cross(S, _),
                    y.vadd(_, y),
                    i.angularVelocity.cross(M, _),
                    y.vsub(_, y),
                    v.mult(-t * (A - n) - e * y.dot(v), x),
                    i.force.vsub(x, i.force),
                    m.force.vadd(x, m.force),
                    M.cross(x, E),
                    S.cross(x, T),
                    i.torque.vsub(E, i.torque),
                    m.torque.vadd(T, m.torque);
                };
              },
              { "../math/Vec3": 30 },
            ],
            36: [
              function (t, e) {
                function n(t) {
                  (t = s.defaults(t, {
                    chassisConnectionPointLocal: new i(),
                    chassisConnectionPointWorld: new i(),
                    directionLocal: new i(),
                    directionWorld: new i(),
                    axleLocal: new i(),
                    axleWorld: new i(),
                    suspensionRestLength: 1,
                    suspensionMaxLength: 2,
                    radius: 1,
                    suspensionStiffness: 100,
                    dampingCompression: 10,
                    dampingRelaxation: 10,
                    frictionSlip: 1e4,
                    steering: 0,
                    rotation: 0,
                    deltaRotation: 0,
                    rollInfluence: 0.01,
                    maxSuspensionForce: Number.MAX_VALUE,
                    isFrontWheel: !0,
                    clippedInvContactDotSuspension: 1,
                    suspensionRelativeVelocity: 0,
                    suspensionForce: 0,
                    skidInfo: 0,
                    suspensionLength: 0,
                    maxSuspensionTravel: 1,
                    useCustomSlidingRotationalSpeed: !1,
                    customSlidingRotationalSpeed: -0.1,
                  })),
                    (this.maxSuspensionTravel = t.maxSuspensionTravel),
                    (this.customSlidingRotationalSpeed =
                      t.customSlidingRotationalSpeed),
                    (this.useCustomSlidingRotationalSpeed =
                      t.useCustomSlidingRotationalSpeed),
                    (this.sliding = !1),
                    (this.chassisConnectionPointLocal =
                      t.chassisConnectionPointLocal.clone()),
                    (this.chassisConnectionPointWorld =
                      t.chassisConnectionPointWorld.clone()),
                    (this.directionLocal = t.directionLocal.clone()),
                    (this.directionWorld = t.directionWorld.clone()),
                    (this.axleLocal = t.axleLocal.clone()),
                    (this.axleWorld = t.axleWorld.clone()),
                    (this.suspensionRestLength = t.suspensionRestLength),
                    (this.suspensionMaxLength = t.suspensionMaxLength),
                    (this.radius = t.radius),
                    (this.suspensionStiffness = t.suspensionStiffness),
                    (this.dampingCompression = t.dampingCompression),
                    (this.dampingRelaxation = t.dampingRelaxation),
                    (this.frictionSlip = t.frictionSlip),
                    (this.steering = 0),
                    (this.rotation = 0),
                    (this.deltaRotation = 0),
                    (this.rollInfluence = t.rollInfluence),
                    (this.maxSuspensionForce = t.maxSuspensionForce),
                    (this.engineForce = 0),
                    (this.brake = 0),
                    (this.isFrontWheel = t.isFrontWheel),
                    (this.clippedInvContactDotSuspension = 1),
                    (this.suspensionRelativeVelocity = 0),
                    (this.suspensionForce = 0),
                    (this.skidInfo = 0),
                    (this.suspensionLength = 0),
                    (this.sideImpulse = 0),
                    (this.forwardImpulse = 0),
                    (this.raycastResult = new o()),
                    (this.worldTransform = new r()),
                    (this.isInContact = !1);
                }
                var i = t("../math/Vec3"),
                  r = t("../math/Transform"),
                  o = t("../collision/RaycastResult"),
                  s = t("../utils/Utils");
                e.exports = n;
                var a = new i(),
                  l = new i();
                (a = new i()),
                  (n.prototype.updateWheel = function (t) {
                    var e = this.raycastResult;
                    if (this.isInContact) {
                      var n = e.hitNormalWorld.dot(e.directionWorld);
                      e.hitPointWorld.vsub(t.position, l),
                        t.getVelocityAtWorldPoint(l, a);
                      var i = e.hitNormalWorld.dot(a);
                      if (n >= -0.1)
                        (this.suspensionRelativeVelocity = 0),
                          (this.clippedInvContactDotSuspension = 10);
                      else {
                        var r = -1 / n;
                        (this.suspensionRelativeVelocity = i * r),
                          (this.clippedInvContactDotSuspension = r);
                      }
                    } else
                      (e.suspensionLength = this.suspensionRestLength),
                        (this.suspensionRelativeVelocity = 0),
                        e.directionWorld.scale(-1, e.hitNormalWorld),
                        (this.clippedInvContactDotSuspension = 1);
                  });
              },
              {
                "../collision/RaycastResult": 10,
                "../math/Transform": 29,
                "../math/Vec3": 30,
                "../utils/Utils": 53,
              },
            ],
            37: [
              function (t, e) {
                function n(t) {
                  i.call(this),
                    (this.type = i.types.BOX),
                    (this.halfExtents = t),
                    (this.convexPolyhedronRepresentation = null),
                    this.updateConvexPolyhedronRepresentation(),
                    this.updateBoundingSphereRadius();
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3"),
                  o = t("./ConvexPolyhedron");
                (n.prototype = new i()),
                  (n.prototype.constructor = n),
                  (n.prototype.updateConvexPolyhedronRepresentation =
                    function () {
                      var t = this.halfExtents.x,
                        e = this.halfExtents.y,
                        n = this.halfExtents.z,
                        i = r,
                        s = [
                          new i(-t, -e, -n),
                          new i(t, -e, -n),
                          new i(t, e, -n),
                          new i(-t, e, -n),
                          new i(-t, -e, n),
                          new i(t, -e, n),
                          new i(t, e, n),
                          new i(-t, e, n),
                        ],
                        a =
                          (new i(0, 0, 1),
                          new i(0, 1, 0),
                          new i(1, 0, 0),
                          new o(s, [
                            [3, 2, 1, 0],
                            [4, 5, 6, 7],
                            [5, 4, 0, 1],
                            [2, 3, 7, 6],
                            [0, 4, 7, 3],
                            [1, 2, 6, 5],
                          ]));
                      (this.convexPolyhedronRepresentation = a),
                        (a.material = this.material);
                    }),
                  (n.prototype.calculateLocalInertia = function (t, e) {
                    return (
                      (e = e || new r()),
                      n.calculateInertia(this.halfExtents, t, e),
                      e
                    );
                  }),
                  (n.calculateInertia = function (t, e, n) {
                    var i = t;
                    (n.x =
                      (1 / 12) * e * (2 * i.y * 2 * i.y + 2 * i.z * 2 * i.z)),
                      (n.y =
                        (1 / 12) * e * (2 * i.x * 2 * i.x + 2 * i.z * 2 * i.z)),
                      (n.z =
                        (1 / 12) * e * (2 * i.y * 2 * i.y + 2 * i.x * 2 * i.x));
                  }),
                  (n.prototype.getSideNormals = function (t, e) {
                    var n = t,
                      i = this.halfExtents;
                    if (
                      (n[0].set(i.x, 0, 0),
                      n[1].set(0, i.y, 0),
                      n[2].set(0, 0, i.z),
                      n[3].set(-i.x, 0, 0),
                      n[4].set(0, -i.y, 0),
                      n[5].set(0, 0, -i.z),
                      void 0 !== e)
                    )
                      for (var r = 0; r !== n.length; r++) e.vmult(n[r], n[r]);
                    return n;
                  }),
                  (n.prototype.volume = function () {
                    return (
                      8 *
                      this.halfExtents.x *
                      this.halfExtents.y *
                      this.halfExtents.z
                    );
                  }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    this.boundingSphereRadius = this.halfExtents.norm();
                  });
                var s = new r();
                new r(),
                  (n.prototype.forEachWorldCorner = function (t, e, n) {
                    for (
                      var i = this.halfExtents,
                        r = [
                          [i.x, i.y, i.z],
                          [-i.x, i.y, i.z],
                          [-i.x, -i.y, i.z],
                          [-i.x, -i.y, -i.z],
                          [i.x, -i.y, -i.z],
                          [i.x, i.y, -i.z],
                          [-i.x, i.y, -i.z],
                          [i.x, -i.y, i.z],
                        ],
                        o = 0;
                      o < r.length;
                      o++
                    )
                      s.set(r[o][0], r[o][1], r[o][2]),
                        e.vmult(s, s),
                        t.vadd(s, s),
                        n(s.x, s.y, s.z);
                  });
                var a = [
                  new r(),
                  new r(),
                  new r(),
                  new r(),
                  new r(),
                  new r(),
                  new r(),
                  new r(),
                ];
                n.prototype.calculateWorldAABB = function (t, e, n, i) {
                  var r = this.halfExtents;
                  a[0].set(r.x, r.y, r.z),
                    a[1].set(-r.x, r.y, r.z),
                    a[2].set(-r.x, -r.y, r.z),
                    a[3].set(-r.x, -r.y, -r.z),
                    a[4].set(r.x, -r.y, -r.z),
                    a[5].set(r.x, r.y, -r.z),
                    a[6].set(-r.x, r.y, -r.z),
                    a[7].set(r.x, -r.y, r.z);
                  var o = a[0];
                  e.vmult(o, o), t.vadd(o, o), i.copy(o), n.copy(o);
                  for (var s = 1; 8 > s; s++) {
                    (o = a[s]), e.vmult(o, o), t.vadd(o, o);
                    var l = o.x,
                      c = o.y,
                      u = o.z;
                    l > i.x && (i.x = l),
                      c > i.y && (i.y = c),
                      u > i.z && (i.z = u),
                      l < n.x && (n.x = l),
                      c < n.y && (n.y = c),
                      u < n.z && (n.z = u);
                  }
                };
              },
              { "../math/Vec3": 30, "./ConvexPolyhedron": 38, "./Shape": 43 },
            ],
            38: [
              function (t, e) {
                function n(t, e, n) {
                  i.call(this),
                    (this.type = i.types.CONVEXPOLYHEDRON),
                    (this.vertices = t || []),
                    (this.worldVertices = []),
                    (this.worldVerticesNeedsUpdate = !0),
                    (this.faces = e || []),
                    (this.faceNormals = []),
                    this.computeNormals(),
                    (this.worldFaceNormalsNeedsUpdate = !0),
                    (this.worldFaceNormals = []),
                    (this.uniqueEdges = []),
                    (this.uniqueAxes = n ? n.slice() : null),
                    this.computeEdges(),
                    this.updateBoundingSphereRadius();
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3"),
                  o = (t("../math/Quaternion"), t("../math/Transform"));
                (n.prototype = new i()), (n.prototype.constructor = n);
                var s = new r();
                (n.prototype.computeEdges = function () {
                  var t = this.faces,
                    e = this.vertices,
                    n = (e.length, this.uniqueEdges);
                  n.length = 0;
                  for (var i = s, r = 0; r !== t.length; r++)
                    for (var o = t[r], a = o.length, l = 0; l !== a; l++) {
                      var c = (l + 1) % a;
                      e[o[l]].vsub(e[o[c]], i), i.normalize();
                      for (var u = !1, h = 0; h !== n.length; h++)
                        if (n[h].almostEquals(i) || n[h].almostEquals(i)) {
                          u = !0;
                          break;
                        }
                      u || n.push(i.clone());
                    }
                }),
                  (n.prototype.computeNormals = function () {
                    this.faceNormals.length = this.faces.length;
                    for (var t = 0; t < this.faces.length; t++) {
                      for (var e = 0; e < this.faces[t].length; e++)
                        if (!this.vertices[this.faces[t][e]])
                          throw new Error(
                            "Vertex " + this.faces[t][e] + " not found!"
                          );
                      var n = this.faceNormals[t] || new r();
                      this.getFaceNormal(t, n),
                        n.negate(n),
                        (this.faceNormals[t] = n);
                      var i = this.vertices[this.faces[t][0]];
                      if (n.dot(i) < 0)
                        for (
                          console.error(
                            ".faceNormals[" +
                              t +
                              "] = Vec3(" +
                              n.toString() +
                              ") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."
                          ),
                            e = 0;
                          e < this.faces[t].length;
                          e++
                        )
                          console.warn(
                            ".vertices[" +
                              this.faces[t][e] +
                              "] = Vec3(" +
                              this.vertices[this.faces[t][e]].toString() +
                              ")"
                          );
                    }
                  });
                var a = new r(),
                  l = new r();
                (n.computeNormal = function (t, e, n, i) {
                  e.vsub(t, l),
                    n.vsub(e, a),
                    a.cross(l, i),
                    i.isZero() || i.normalize();
                }),
                  (n.prototype.getFaceNormal = function (t, e) {
                    var i = this.faces[t],
                      r = this.vertices[i[0]],
                      o = this.vertices[i[1]],
                      s = this.vertices[i[2]];
                    return n.computeNormal(r, o, s, e);
                  });
                var c = new r();
                n.prototype.clipAgainstHull = function (
                  t,
                  e,
                  n,
                  i,
                  o,
                  s,
                  a,
                  l,
                  u
                ) {
                  for (
                    var h = c, d = -1, p = -Number.MAX_VALUE, f = 0;
                    f < n.faces.length;
                    f++
                  ) {
                    h.copy(n.faceNormals[f]), o.vmult(h, h);
                    var m = h.dot(s);
                    m > p && ((p = m), (d = f));
                  }
                  for (
                    var g = [], v = n.faces[d], y = v.length, x = 0;
                    y > x;
                    x++
                  ) {
                    var _ = n.vertices[v[x]],
                      b = new r();
                    b.copy(_), o.vmult(b, b), i.vadd(b, b), g.push(b);
                  }
                  d >= 0 && this.clipFaceAgainstHull(s, t, e, g, a, l, u);
                };
                var u = new r(),
                  h = new r(),
                  d = new r(),
                  p = new r(),
                  f = new r(),
                  m = new r();
                n.prototype.findSeparatingAxis = function (
                  t,
                  e,
                  n,
                  i,
                  r,
                  o,
                  s,
                  a
                ) {
                  var l = u,
                    c = h,
                    g = d,
                    v = p,
                    y = f,
                    x = m,
                    _ = Number.MAX_VALUE,
                    b = this;
                  if (b.uniqueAxes)
                    for (var w = 0; w !== b.uniqueAxes.length; w++) {
                      if (
                        (n.vmult(b.uniqueAxes[w], l),
                        !1 === (T = b.testSepAxis(l, t, e, n, i, r)))
                      )
                        return !1;
                      _ > T && ((_ = T), o.copy(l));
                    }
                  else {
                    var M = s ? s.length : b.faces.length;
                    for (w = 0; M > w; w++) {
                      var S = s ? s[w] : w;
                      if (
                        (l.copy(b.faceNormals[S]),
                        n.vmult(l, l),
                        !1 === (T = b.testSepAxis(l, t, e, n, i, r)))
                      )
                        return !1;
                      _ > T && ((_ = T), o.copy(l));
                    }
                  }
                  if (t.uniqueAxes)
                    for (w = 0; w !== t.uniqueAxes.length; w++) {
                      if (
                        (r.vmult(t.uniqueAxes[w], c),
                        !1 === (T = b.testSepAxis(c, t, e, n, i, r)))
                      )
                        return !1;
                      _ > T && ((_ = T), o.copy(c));
                    }
                  else {
                    var E = a ? a.length : t.faces.length;
                    for (w = 0; E > w; w++) {
                      var T;
                      if (
                        ((S = a ? a[w] : w),
                        c.copy(t.faceNormals[S]),
                        r.vmult(c, c),
                        !1 === (T = b.testSepAxis(c, t, e, n, i, r)))
                      )
                        return !1;
                      _ > T && ((_ = T), o.copy(c));
                    }
                  }
                  for (var A = 0; A !== b.uniqueEdges.length; A++) {
                    n.vmult(b.uniqueEdges[A], v);
                    for (var C = 0; C !== t.uniqueEdges.length; C++)
                      if (
                        (r.vmult(t.uniqueEdges[C], y),
                        v.cross(y, x),
                        !x.almostZero())
                      ) {
                        x.normalize();
                        var L = b.testSepAxis(x, t, e, n, i, r);
                        if (!1 === L) return !1;
                        _ > L && ((_ = L), o.copy(x));
                      }
                  }
                  return i.vsub(e, g), g.dot(o) > 0 && o.negate(o), !0;
                };
                var g = [],
                  v = [];
                n.prototype.testSepAxis = function (t, e, i, r, o, s) {
                  n.project(this, t, i, r, g), n.project(e, t, o, s, v);
                  var a = g[0],
                    l = g[1],
                    c = v[0],
                    u = v[1];
                  if (u > a || l > c) return !1;
                  var h = a - u,
                    d = c - l;
                  return d > h ? h : d;
                };
                var y = new r(),
                  x = new r();
                (n.prototype.calculateLocalInertia = function (t, e) {
                  this.computeLocalAABB(y, x);
                  var n = x.x - y.x,
                    i = x.y - y.y,
                    r = x.z - y.z;
                  (e.x = (1 / 12) * t * (2 * i * 2 * i + 2 * r * 2 * r)),
                    (e.y = (1 / 12) * t * (2 * n * 2 * n + 2 * r * 2 * r)),
                    (e.z = (1 / 12) * t * (2 * i * 2 * i + 2 * n * 2 * n));
                }),
                  (n.prototype.getPlaneConstantOfFace = function (t) {
                    var e = this.faces[t],
                      n = this.faceNormals[t],
                      i = this.vertices[e[0]];
                    return -n.dot(i);
                  });
                var _ = new r(),
                  b = new r(),
                  w = new r(),
                  M = new r(),
                  S = new r(),
                  E = new r(),
                  T = new r(),
                  A = new r();
                (n.prototype.clipFaceAgainstHull = function (
                  t,
                  e,
                  n,
                  i,
                  r,
                  o,
                  s
                ) {
                  for (
                    var a = _,
                      l = b,
                      c = w,
                      u = M,
                      h = S,
                      d = E,
                      p = T,
                      f = A,
                      m = this,
                      g = i,
                      v = [],
                      y = -1,
                      x = Number.MAX_VALUE,
                      C = 0;
                    C < m.faces.length;
                    C++
                  ) {
                    a.copy(m.faceNormals[C]), n.vmult(a, a);
                    var L = a.dot(t);
                    x > L && ((x = L), (y = C));
                  }
                  if (!(0 > y)) {
                    var R = m.faces[y];
                    R.connectedFaces = [];
                    for (var P = 0; P < m.faces.length; P++)
                      for (var O = 0; O < m.faces[P].length; O++)
                        -1 !== R.indexOf(m.faces[P][O]) &&
                          P !== y &&
                          -1 === R.connectedFaces.indexOf(P) &&
                          R.connectedFaces.push(P);
                    for (var k = (g.length, R.length), I = 0; k > I; I++) {
                      var D = m.vertices[R[I]],
                        B = m.vertices[R[(I + 1) % k]];
                      D.vsub(B, l),
                        c.copy(l),
                        n.vmult(c, c),
                        e.vadd(c, c),
                        u.copy(this.faceNormals[y]),
                        n.vmult(u, u),
                        e.vadd(u, u),
                        c.cross(u, h),
                        h.negate(h),
                        d.copy(D),
                        n.vmult(d, d),
                        e.vadd(d, d);
                      var N = (d.dot(h), R.connectedFaces[I]);
                      p.copy(this.faceNormals[N]);
                      var F = this.getPlaneConstantOfFace(N);
                      f.copy(p), n.vmult(f, f);
                      var z = F - f.dot(e);
                      for (this.clipFaceAgainstPlane(g, v, f, z); g.length; )
                        g.shift();
                      for (; v.length; ) g.push(v.shift());
                    }
                    for (
                      p.copy(this.faceNormals[y]),
                        F = this.getPlaneConstantOfFace(y),
                        f.copy(p),
                        n.vmult(f, f),
                        z = F - f.dot(e),
                        P = 0;
                      P < g.length;
                      P++
                    ) {
                      var H = f.dot(g[P]) + z;
                      if (
                        (r >= H &&
                          (console.log(
                            "clamped: depth=" + H + " to minDist=" + r
                          ),
                          (H = r)),
                        o >= H)
                      ) {
                        var j = g[P];
                        if (0 >= H) {
                          var U = { point: j, normal: f, depth: H };
                          s.push(U);
                        }
                      }
                    }
                  }
                }),
                  (n.prototype.clipFaceAgainstPlane = function (t, e, n, i) {
                    var o,
                      s,
                      a = t.length;
                    if (2 > a) return e;
                    var l = t[t.length - 1],
                      c = t[0];
                    o = n.dot(l) + i;
                    for (var u = 0; a > u; u++) {
                      if (((c = t[u]), (s = n.dot(c) + i), 0 > o))
                        if (0 > s) (h = new r()).copy(c), e.push(h);
                        else {
                          var h = new r();
                          l.lerp(c, o / (o - s), h), e.push(h);
                        }
                      else
                        0 > s &&
                          ((h = new r()),
                          l.lerp(c, o / (o - s), h),
                          e.push(h),
                          e.push(c));
                      (l = c), (o = s);
                    }
                    return e;
                  }),
                  (n.prototype.computeWorldVertices = function (t, e) {
                    for (
                      var n = this.vertices.length;
                      this.worldVertices.length < n;

                    )
                      this.worldVertices.push(new r());
                    for (
                      var i = this.vertices, o = this.worldVertices, s = 0;
                      s !== n;
                      s++
                    )
                      e.vmult(i[s], o[s]), t.vadd(o[s], o[s]);
                    this.worldVerticesNeedsUpdate = !1;
                  }),
                  new r(),
                  (n.prototype.computeLocalAABB = function (t, e) {
                    var n = this.vertices.length,
                      i = this.vertices;
                    t.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE),
                      e.set(
                        -Number.MAX_VALUE,
                        -Number.MAX_VALUE,
                        -Number.MAX_VALUE
                      );
                    for (var r = 0; n > r; r++) {
                      var o = i[r];
                      o.x < t.x ? (t.x = o.x) : o.x > e.x && (e.x = o.x),
                        o.y < t.y ? (t.y = o.y) : o.y > e.y && (e.y = o.y),
                        o.z < t.z ? (t.z = o.z) : o.z > e.z && (e.z = o.z);
                    }
                  }),
                  (n.prototype.computeWorldFaceNormals = function (t) {
                    for (
                      var e = this.faceNormals.length;
                      this.worldFaceNormals.length < e;

                    )
                      this.worldFaceNormals.push(new r());
                    for (
                      var n = this.faceNormals,
                        i = this.worldFaceNormals,
                        o = 0;
                      o !== e;
                      o++
                    )
                      t.vmult(n[o], i[o]);
                    this.worldFaceNormalsNeedsUpdate = !1;
                  }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    for (
                      var t = 0, e = this.vertices, n = 0, i = e.length;
                      n !== i;
                      n++
                    ) {
                      var r = e[n].norm2();
                      r > t && (t = r);
                    }
                    this.boundingSphereRadius = Math.sqrt(t);
                  });
                var C = new r();
                (n.prototype.calculateWorldAABB = function (t, e, n, i) {
                  for (
                    var r,
                      o,
                      s,
                      a,
                      l,
                      c,
                      u = this.vertices.length,
                      h = this.vertices,
                      d = 0;
                    u > d;
                    d++
                  ) {
                    C.copy(h[d]), e.vmult(C, C), t.vadd(C, C);
                    var p = C;
                    p.x < r || void 0 === r
                      ? (r = p.x)
                      : (p.x > a || void 0 === a) && (a = p.x),
                      p.y < o || void 0 === o
                        ? (o = p.y)
                        : (p.y > l || void 0 === l) && (l = p.y),
                      p.z < s || void 0 === s
                        ? (s = p.z)
                        : (p.z > c || void 0 === c) && (c = p.z);
                  }
                  n.set(r, o, s), i.set(a, l, c);
                }),
                  (n.prototype.volume = function () {
                    return (4 * Math.PI * this.boundingSphereRadius) / 3;
                  }),
                  (n.prototype.getAveragePointLocal = function (t) {
                    t = t || new r();
                    for (
                      var e = this.vertices.length, n = this.vertices, i = 0;
                      e > i;
                      i++
                    )
                      t.vadd(n[i], t);
                    return t.mult(1 / e, t), t;
                  }),
                  (n.prototype.transformAllPoints = function (t, e) {
                    var n = this.vertices.length,
                      i = this.vertices;
                    if (e) {
                      for (var r = 0; n > r; r++) {
                        var o = i[r];
                        e.vmult(o, o);
                      }
                      for (r = 0; r < this.faceNormals.length; r++)
                        (o = this.faceNormals[r]), e.vmult(o, o);
                    }
                    if (t) for (r = 0; n > r; r++) (o = i[r]).vadd(t, o);
                  });
                var L = new r(),
                  R = new r(),
                  P = new r();
                n.prototype.pointIsInside = function (t) {
                  var e = this.vertices.length,
                    n = this.vertices,
                    i = this.faces,
                    r = this.faceNormals,
                    o = this.faces.length,
                    s = L;
                  this.getAveragePointLocal(s);
                  for (var a = 0; o > a; a++) {
                    this.faces[a].length, (e = r[a]);
                    var l = n[i[a][0]],
                      c = R;
                    t.vsub(l, c);
                    var u = e.dot(c),
                      h = P;
                    s.vsub(l, h);
                    var d = e.dot(h);
                    if ((0 > u && d > 0) || (u > 0 && 0 > d)) return !1;
                  }
                  return -1;
                };
                var O = (new r(), new r()),
                  k = new r();
                n.project = function (t, e, n, i, r) {
                  var s = t.vertices.length,
                    a = O,
                    l = 0,
                    c = 0,
                    u = k,
                    h = t.vertices;
                  u.setZero(),
                    o.vectorToLocalFrame(n, i, e, a),
                    o.pointToLocalFrame(n, i, u, u);
                  var d = u.dot(a);
                  c = l = h[0].dot(a);
                  for (var p = 1; s > p; p++) {
                    var f = h[p].dot(a);
                    f > l && (l = f), c > f && (c = f);
                  }
                  if ((c -= d) > (l -= d)) {
                    var m = c;
                    (c = l), (l = m);
                  }
                  (r[0] = l), (r[1] = c);
                };
              },
              {
                "../math/Quaternion": 28,
                "../math/Transform": 29,
                "../math/Vec3": 30,
                "./Shape": 43,
              },
            ],
            39: [
              function (t, e) {
                function n(t, e, n, s) {
                  var a = s,
                    l = [],
                    c = [],
                    u = [],
                    h = [],
                    d = [],
                    p = Math.cos,
                    f = Math.sin;
                  l.push(new r(e * p(0), e * f(0), 0.5 * -n)),
                    h.push(0),
                    l.push(new r(t * p(0), t * f(0), 0.5 * n)),
                    d.push(1);
                  for (var m = 0; a > m; m++) {
                    var g = ((2 * Math.PI) / a) * (m + 1),
                      v = ((2 * Math.PI) / a) * (m + 0.5);
                    a - 1 > m
                      ? (l.push(new r(e * p(g), e * f(g), 0.5 * -n)),
                        h.push(2 * m + 2),
                        l.push(new r(t * p(g), t * f(g), 0.5 * n)),
                        d.push(2 * m + 3),
                        u.push([2 * m + 2, 2 * m + 3, 2 * m + 1, 2 * m]))
                      : u.push([0, 1, 2 * m + 1, 2 * m]),
                      (a % 2 == 1 || a / 2 > m) && c.push(new r(p(v), f(v), 0));
                  }
                  u.push(d), c.push(new r(0, 0, 1));
                  var y = [];
                  for (m = 0; m < h.length; m++) y.push(h[h.length - m - 1]);
                  u.push(y),
                    (this.type = i.types.CONVEXPOLYHEDRON),
                    o.call(this, l, u, c);
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3"),
                  o = (t("../math/Quaternion"), t("./ConvexPolyhedron"));
                n.prototype = new o();
              },
              {
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "./ConvexPolyhedron": 38,
                "./Shape": 43,
              },
            ],
            40: [
              function (t, e) {
                function n(t, e) {
                  (e = s.defaults(e, {
                    maxValue: null,
                    minValue: null,
                    elementSize: 1,
                  })),
                    (this.data = t),
                    (this.maxValue = e.maxValue),
                    (this.minValue = e.minValue),
                    (this.elementSize = e.elementSize),
                    null === e.minValue && this.updateMinValue(),
                    null === e.maxValue && this.updateMaxValue(),
                    (this.cacheEnabled = !0),
                    i.call(this),
                    (this.pillarConvex = new r()),
                    (this.pillarOffset = new o()),
                    (this.type = i.types.HEIGHTFIELD),
                    this.updateBoundingSphereRadius(),
                    (this._cachedPillars = {});
                }
                var i = t("./Shape"),
                  r = t("./ConvexPolyhedron"),
                  o = t("../math/Vec3"),
                  s = t("../utils/Utils");
                (e.exports = n),
                  (n.prototype = new i()),
                  (n.prototype.update = function () {
                    this._cachedPillars = {};
                  }),
                  (n.prototype.updateMinValue = function () {
                    for (
                      var t = this.data, e = t[0][0], n = 0;
                      n !== t.length;
                      n++
                    )
                      for (var i = 0; i !== t[n].length; i++) {
                        var r = t[n][i];
                        e > r && (e = r);
                      }
                    this.minValue = e;
                  }),
                  (n.prototype.updateMaxValue = function () {
                    for (
                      var t = this.data, e = t[0][0], n = 0;
                      n !== t.length;
                      n++
                    )
                      for (var i = 0; i !== t[n].length; i++) {
                        var r = t[n][i];
                        r > e && (e = r);
                      }
                    this.maxValue = e;
                  }),
                  (n.prototype.setHeightValueAtIndex = function (t, e, n) {
                    (this.data[t][e] = n),
                      this.clearCachedConvexTrianglePillar(t, e, !1),
                      t > 0 &&
                        (this.clearCachedConvexTrianglePillar(t - 1, e, !0),
                        this.clearCachedConvexTrianglePillar(t - 1, e, !1)),
                      e > 0 &&
                        (this.clearCachedConvexTrianglePillar(t, e - 1, !0),
                        this.clearCachedConvexTrianglePillar(t, e - 1, !1)),
                      e > 0 &&
                        t > 0 &&
                        this.clearCachedConvexTrianglePillar(t - 1, e - 1, !0);
                  }),
                  (n.prototype.getRectMinMax = function (t, e, n, i, r) {
                    r = r || [];
                    for (
                      var o = this.data, s = this.minValue, a = t;
                      n >= a;
                      a++
                    )
                      for (var l = e; i >= l; l++) {
                        var c = o[a][l];
                        c > s && (s = c);
                      }
                    (r[0] = this.minValue), (r[1] = s);
                  }),
                  (n.prototype.getIndexOfPosition = function (t, e, n, i) {
                    var r = this.elementSize,
                      o = this.data,
                      s = Math.floor(t / r),
                      a = Math.floor(e / r);
                    return (
                      (n[0] = s),
                      (n[1] = a),
                      i &&
                        (0 > s && (s = 0),
                        0 > a && (a = 0),
                        s >= o.length - 1 && (s = o.length - 1),
                        a >= o[0].length - 1 && (a = o[0].length - 1)),
                      !(
                        0 > s ||
                        0 > a ||
                        s >= o.length - 1 ||
                        a >= o[0].length - 1
                      )
                    );
                  }),
                  (n.prototype.getHeightAt = function (t, e, n) {
                    var i = [];
                    this.getIndexOfPosition(t, e, i, n);
                    var r = [];
                    return (
                      this.getRectMinMax(i[0], i[1] + 1, i[0], i[1] + 1, r),
                      (r[0] + r[1]) / 2
                    );
                  }),
                  (n.prototype.getCacheConvexTrianglePillarKey = function (
                    t,
                    e,
                    n
                  ) {
                    return t + "_" + e + "_" + (n ? 1 : 0);
                  }),
                  (n.prototype.getCachedConvexTrianglePillar = function (
                    t,
                    e,
                    n
                  ) {
                    return this._cachedPillars[
                      this.getCacheConvexTrianglePillarKey(t, e, n)
                    ];
                  }),
                  (n.prototype.setCachedConvexTrianglePillar = function (
                    t,
                    e,
                    n,
                    i,
                    r
                  ) {
                    this._cachedPillars[
                      this.getCacheConvexTrianglePillarKey(t, e, n)
                    ] = { convex: i, offset: r };
                  }),
                  (n.prototype.clearCachedConvexTrianglePillar = function (
                    t,
                    e,
                    n
                  ) {
                    delete this._cachedPillars[
                      this.getCacheConvexTrianglePillarKey(t, e, n)
                    ];
                  }),
                  (n.prototype.getConvexTrianglePillar = function (t, e, n) {
                    var i = this.pillarConvex,
                      s = this.pillarOffset;
                    if (this.cacheEnabled) {
                      if ((a = this.getCachedConvexTrianglePillar(t, e, n)))
                        return (
                          (this.pillarConvex = a.convex),
                          void (this.pillarOffset = a.offset)
                        );
                      (i = new r()),
                        (s = new o()),
                        (this.pillarConvex = i),
                        (this.pillarOffset = s);
                    }
                    var a = this.data,
                      l = this.elementSize,
                      c = i.faces;
                    i.vertices.length = 6;
                    for (var u = 0; 6 > u; u++)
                      i.vertices[u] || (i.vertices[u] = new o());
                    for (c.length = 5, u = 0; 5 > u; u++) c[u] || (c[u] = []);
                    var h = i.vertices,
                      d =
                        (Math.min(
                          a[t][e],
                          a[t + 1][e],
                          a[t][e + 1],
                          a[t + 1][e + 1]
                        ) -
                          this.minValue) /
                          2 +
                        this.minValue;
                    n
                      ? (s.set((t + 0.75) * l, (e + 0.75) * l, d),
                        h[0].set(0.25 * l, 0.25 * l, a[t + 1][e + 1] - d),
                        h[1].set(-0.75 * l, 0.25 * l, a[t][e + 1] - d),
                        h[2].set(0.25 * l, -0.75 * l, a[t + 1][e] - d),
                        h[3].set(0.25 * l, 0.25 * l, -d - 1),
                        h[4].set(-0.75 * l, 0.25 * l, -d - 1),
                        h[5].set(0.25 * l, -0.75 * l, -d - 1),
                        (c[0][0] = 0),
                        (c[0][1] = 1),
                        (c[0][2] = 2),
                        (c[1][0] = 5),
                        (c[1][1] = 4),
                        (c[1][2] = 3),
                        (c[2][0] = 2),
                        (c[2][1] = 5),
                        (c[2][2] = 3),
                        (c[2][3] = 0),
                        (c[3][0] = 3),
                        (c[3][1] = 4),
                        (c[3][2] = 1),
                        (c[3][3] = 0),
                        (c[4][0] = 1),
                        (c[4][1] = 4),
                        (c[4][2] = 5),
                        (c[4][3] = 2))
                      : (s.set((t + 0.25) * l, (e + 0.25) * l, d),
                        h[0].set(-0.25 * l, -0.25 * l, a[t][e] - d),
                        h[1].set(0.75 * l, -0.25 * l, a[t + 1][e] - d),
                        h[2].set(-0.25 * l, 0.75 * l, a[t][e + 1] - d),
                        h[3].set(-0.25 * l, -0.25 * l, -d - 1),
                        h[4].set(0.75 * l, -0.25 * l, -d - 1),
                        h[5].set(-0.25 * l, 0.75 * l, -d - 1),
                        (c[0][0] = 0),
                        (c[0][1] = 1),
                        (c[0][2] = 2),
                        (c[1][0] = 5),
                        (c[1][1] = 4),
                        (c[1][2] = 3),
                        (c[2][0] = 0),
                        (c[2][1] = 2),
                        (c[2][2] = 5),
                        (c[2][3] = 3),
                        (c[3][0] = 1),
                        (c[3][1] = 0),
                        (c[3][2] = 3),
                        (c[3][3] = 4),
                        (c[4][0] = 4),
                        (c[4][1] = 5),
                        (c[4][2] = 2),
                        (c[4][3] = 1)),
                      i.computeNormals(),
                      i.computeEdges(),
                      i.updateBoundingSphereRadius(),
                      this.setCachedConvexTrianglePillar(t, e, n, i, s);
                  }),
                  (n.prototype.calculateLocalInertia = function (t, e) {
                    return (e = e || new o()).set(0, 0, 0), e;
                  }),
                  (n.prototype.volume = function () {
                    return Number.MAX_VALUE;
                  }),
                  (n.prototype.calculateWorldAABB = function (t, e, n, i) {
                    n.set(
                      -Number.MAX_VALUE,
                      -Number.MAX_VALUE,
                      -Number.MAX_VALUE
                    ),
                      i.set(
                        Number.MAX_VALUE,
                        Number.MAX_VALUE,
                        Number.MAX_VALUE
                      );
                  }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    var t = this.data,
                      e = this.elementSize;
                    this.boundingSphereRadius = new o(
                      t.length * e,
                      t[0].length * e,
                      Math.max(Math.abs(this.maxValue), Math.abs(this.minValue))
                    ).norm();
                  });
              },
              {
                "../math/Vec3": 30,
                "../utils/Utils": 53,
                "./ConvexPolyhedron": 38,
                "./Shape": 43,
              },
            ],
            41: [
              function (t, e) {
                function n() {
                  i.call(this), (this.type = i.types.PARTICLE);
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3");
                (n.prototype = new i()),
                  (n.prototype.constructor = n),
                  (n.prototype.calculateLocalInertia = function (t, e) {
                    return (e = e || new r()).set(0, 0, 0), e;
                  }),
                  (n.prototype.volume = function () {
                    return 0;
                  }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    this.boundingSphereRadius = 0;
                  }),
                  (n.prototype.calculateWorldAABB = function (t, e, n, i) {
                    n.copy(t), i.copy(t);
                  });
              },
              { "../math/Vec3": 30, "./Shape": 43 },
            ],
            42: [
              function (t, e) {
                function n() {
                  i.call(this),
                    (this.type = i.types.PLANE),
                    (this.worldNormal = new r()),
                    (this.worldNormalNeedsUpdate = !0),
                    (this.boundingSphereRadius = Number.MAX_VALUE);
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3");
                (n.prototype = new i()),
                  (n.prototype.constructor = n),
                  (n.prototype.computeWorldNormal = function (t) {
                    var e = this.worldNormal;
                    e.set(0, 0, 1),
                      t.vmult(e, e),
                      (this.worldNormalNeedsUpdate = !1);
                  }),
                  (n.prototype.calculateLocalInertia = function (t, e) {
                    return e || new r();
                  }),
                  (n.prototype.volume = function () {
                    return Number.MAX_VALUE;
                  });
                var o = new r();
                (n.prototype.calculateWorldAABB = function (t, e, n, i) {
                  o.set(0, 0, 1), e.vmult(o, o);
                  var r = Number.MAX_VALUE;
                  n.set(-r, -r, -r),
                    i.set(r, r, r),
                    1 === o.x && (i.x = t.x),
                    1 === o.y && (i.y = t.y),
                    1 === o.z && (i.z = t.z),
                    -1 === o.x && (n.x = t.x),
                    -1 === o.y && (n.y = t.y),
                    -1 === o.z && (n.z = t.z);
                }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    this.boundingSphereRadius = Number.MAX_VALUE;
                  });
              },
              { "../math/Vec3": 30, "./Shape": 43 },
            ],
            43: [
              function (t, e) {
                function n() {
                  (this.id = n.idCounter++),
                    (this.type = 0),
                    (this.boundingSphereRadius = 0),
                    (this.collisionResponse = !0),
                    (this.material = null);
                }
                e.exports = n;
                var n = t("./Shape");
                t("../math/Vec3"),
                  t("../math/Quaternion"),
                  t("../material/Material"),
                  (n.prototype.constructor = n),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    throw (
                      "computeBoundingSphereRadius() not implemented for shape type " +
                      this.type
                    );
                  }),
                  (n.prototype.volume = function () {
                    throw (
                      "volume() not implemented for shape type " + this.type
                    );
                  }),
                  (n.prototype.calculateLocalInertia = function () {
                    throw (
                      "calculateLocalInertia() not implemented for shape type " +
                      this.type
                    );
                  }),
                  (n.idCounter = 0),
                  (n.types = {
                    SPHERE: 1,
                    PLANE: 2,
                    BOX: 4,
                    COMPOUND: 8,
                    CONVEXPOLYHEDRON: 16,
                    HEIGHTFIELD: 32,
                    PARTICLE: 64,
                    CYLINDER: 128,
                    TRIMESH: 256,
                  });
              },
              {
                "../material/Material": 25,
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "./Shape": 43,
              },
            ],
            44: [
              function (t, e) {
                function n(t) {
                  if (
                    (i.call(this),
                    (this.radius = void 0 !== t ? Number(t) : 1),
                    (this.type = i.types.SPHERE),
                    this.radius < 0)
                  )
                    throw new Error("The sphere radius cannot be negative.");
                  this.updateBoundingSphereRadius();
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3");
                (n.prototype = new i()),
                  (n.prototype.constructor = n),
                  (n.prototype.calculateLocalInertia = function (t, e) {
                    e = e || new r();
                    var n = (2 * t * this.radius * this.radius) / 5;
                    return (e.x = n), (e.y = n), (e.z = n), e;
                  }),
                  (n.prototype.volume = function () {
                    return (4 * Math.PI * this.radius) / 3;
                  }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    this.boundingSphereRadius = this.radius;
                  }),
                  (n.prototype.calculateWorldAABB = function (t, e, n, i) {
                    for (
                      var r = this.radius, o = ["x", "y", "z"], s = 0;
                      s < o.length;
                      s++
                    ) {
                      var a = o[s];
                      (n[a] = t[a] - r), (i[a] = t[a] + r);
                    }
                  });
              },
              { "../math/Vec3": 30, "./Shape": 43 },
            ],
            45: [
              function (t, e) {
                function n(t, e) {
                  i.call(this),
                    (this.type = i.types.TRIMESH),
                    (this.vertices = new Float32Array(t)),
                    (this.indices = new Int16Array(e)),
                    (this.normals = new Float32Array(e.length)),
                    (this.aabb = new s()),
                    (this.edges = null),
                    (this.scale = new r(1, 1, 1)),
                    (this.tree = new a()),
                    this.updateEdges(),
                    this.updateNormals(),
                    this.updateAABB(),
                    this.updateBoundingSphereRadius(),
                    this.updateTree();
                }
                e.exports = n;
                var i = t("./Shape"),
                  r = t("../math/Vec3"),
                  o = (t("../math/Quaternion"), t("../math/Transform")),
                  s = t("../collision/AABB"),
                  a = t("../utils/Octree");
                (n.prototype = new i()), (n.prototype.constructor = n);
                var l = new r();
                n.prototype.updateTree = function () {
                  var t = this.tree;
                  t.reset(), t.aabb.copy(this.aabb);
                  var e = this.scale;
                  (t.aabb.lowerBound.x *= 1 / e.x),
                    (t.aabb.lowerBound.y *= 1 / e.y),
                    (t.aabb.lowerBound.z *= 1 / e.z),
                    (t.aabb.upperBound.x *= 1 / e.x),
                    (t.aabb.upperBound.y *= 1 / e.y),
                    (t.aabb.upperBound.z *= 1 / e.z);
                  for (
                    var n = new s(),
                      i = new r(),
                      o = new r(),
                      a = new r(),
                      l = [i, o, a],
                      c = 0;
                    c < this.indices.length / 3;
                    c++
                  ) {
                    var u = 3 * c;
                    this._getUnscaledVertex(this.indices[u], i),
                      this._getUnscaledVertex(this.indices[u + 1], o),
                      this._getUnscaledVertex(this.indices[u + 2], a),
                      n.setFromPoints(l),
                      t.insert(n, c);
                  }
                  t.removeEmptyNodes();
                };
                var c = new s();
                (n.prototype.getTrianglesInAABB = function (t, e) {
                  c.copy(t);
                  var n = this.scale,
                    i = n.x,
                    r = n.y,
                    o = n.z,
                    s = c.lowerBound,
                    a = c.upperBound;
                  return (
                    (s.x /= i),
                    (s.y /= r),
                    (s.z /= o),
                    (a.x /= i),
                    (a.y /= r),
                    (a.z /= o),
                    this.tree.aabbQuery(c, e)
                  );
                }),
                  (n.prototype.setScale = function (t) {
                    var e = (this.scale.x === this.scale.y) === this.scale.z,
                      n = (t.x === t.y) === t.z;
                    (e && n) || this.updateNormals(),
                      this.scale.copy(t),
                      this.updateAABB(),
                      this.updateBoundingSphereRadius();
                  }),
                  (n.prototype.updateNormals = function () {
                    for (
                      var t = l, e = this.normals, i = 0;
                      i < this.indices.length / 3;
                      i++
                    ) {
                      var r = 3 * i,
                        o = this.indices[r],
                        s = this.indices[r + 1],
                        a = this.indices[r + 2];
                      this.getVertex(o, f),
                        this.getVertex(s, m),
                        this.getVertex(a, g),
                        n.computeNormal(m, f, g, t),
                        (e[r] = t.x),
                        (e[r + 1] = t.y),
                        (e[r + 2] = t.z);
                    }
                  }),
                  (n.prototype.updateEdges = function () {
                    for (
                      var t = {},
                        e = function () {
                          t[o > r ? r + "_" + o : o + "_" + r] = !0;
                        },
                        n = 0;
                      n < this.indices.length / 3;
                      n++
                    ) {
                      var i = 3 * n,
                        r = this.indices[i],
                        o = this.indices[i + 1];
                      this.indices[i + 2];
                      e(), e(), e();
                    }
                    var s = Object.keys(t);
                    for (
                      this.edges = new Int16Array(2 * s.length), n = 0;
                      n < s.length;
                      n++
                    ) {
                      var a = s[n].split("_");
                      (this.edges[2 * n] = parseInt(a[0], 10)),
                        (this.edges[2 * n + 1] = parseInt(a[1], 10));
                    }
                  }),
                  (n.prototype.getEdgeVertex = function (t, e, n) {
                    var i = this.edges[2 * t + (e ? 1 : 0)];
                    this.getVertex(i, n);
                  });
                var u = new r(),
                  h = new r();
                n.prototype.getEdgeVector = function (t, e) {
                  var n = u,
                    i = h;
                  this.getEdgeVertex(t, 0, n),
                    this.getEdgeVertex(t, 1, i),
                    i.vsub(n, e);
                };
                var d = new r(),
                  p = new r();
                n.computeNormal = function (t, e, n, i) {
                  e.vsub(t, p),
                    n.vsub(e, d),
                    d.cross(p, i),
                    i.isZero() || i.normalize();
                };
                var f = new r(),
                  m = new r(),
                  g = new r();
                (n.prototype.getVertex = function (t, e) {
                  var n = this.scale;
                  return (
                    this._getUnscaledVertex(t, e),
                    (e.x *= n.x),
                    (e.y *= n.y),
                    (e.z *= n.z),
                    e
                  );
                }),
                  (n.prototype._getUnscaledVertex = function (t, e) {
                    var n = 3 * t,
                      i = this.vertices;
                    return e.set(i[n], i[n + 1], i[n + 2]);
                  }),
                  (n.prototype.getWorldVertex = function (t, e, n, i) {
                    return (
                      this.getVertex(t, i), o.pointToWorldFrame(e, n, i, i), i
                    );
                  }),
                  (n.prototype.getTriangleVertices = function (t, e, n, i) {
                    var r = 3 * t;
                    this.getVertex(this.indices[r], e),
                      this.getVertex(this.indices[r + 1], n),
                      this.getVertex(this.indices[r + 2], i);
                  }),
                  (n.prototype.getNormal = function (t, e) {
                    var n = 3 * t;
                    return e.set(
                      this.normals[n],
                      this.normals[n + 1],
                      this.normals[n + 2]
                    );
                  });
                var v = new s();
                n.prototype.calculateLocalInertia = function (t, e) {
                  this.computeLocalAABB(v);
                  var n = v.upperBound.x - v.lowerBound.x,
                    i = v.upperBound.y - v.lowerBound.y,
                    r = v.upperBound.z - v.lowerBound.z;
                  return e.set(
                    (1 / 12) * t * (2 * i * 2 * i + 2 * r * 2 * r),
                    (1 / 12) * t * (2 * n * 2 * n + 2 * r * 2 * r),
                    (1 / 12) * t * (2 * i * 2 * i + 2 * n * 2 * n)
                  );
                };
                var y = new r();
                (n.prototype.computeLocalAABB = function (t) {
                  var e = t.lowerBound,
                    n = t.upperBound,
                    i = this.vertices.length,
                    r = (this.vertices, y);
                  this.getVertex(0, r), e.copy(r), n.copy(r);
                  for (var o = 0; o !== i; o++)
                    this.getVertex(o, r),
                      r.x < e.x ? (e.x = r.x) : r.x > n.x && (n.x = r.x),
                      r.y < e.y ? (e.y = r.y) : r.y > n.y && (n.y = r.y),
                      r.z < e.z ? (e.z = r.z) : r.z > n.z && (n.z = r.z);
                }),
                  (n.prototype.updateAABB = function () {
                    this.computeLocalAABB(this.aabb);
                  }),
                  (n.prototype.updateBoundingSphereRadius = function () {
                    for (
                      var t = 0,
                        e = this.vertices,
                        n = new r(),
                        i = 0,
                        o = e.length / 3;
                      i !== o;
                      i++
                    ) {
                      this.getVertex(i, n);
                      var s = n.norm2();
                      s > t && (t = s);
                    }
                    this.boundingSphereRadius = Math.sqrt(t);
                  });
                var x = (new r(), new o()),
                  _ = new s();
                (n.prototype.calculateWorldAABB = function (t, e, n, i) {
                  var r = x,
                    o = _;
                  (r.position = t),
                    (r.quaternion = e),
                    this.aabb.toWorldFrame(r, o),
                    n.copy(o.lowerBound),
                    i.copy(o.upperBound);
                }),
                  (n.prototype.volume = function () {
                    return (4 * Math.PI * this.boundingSphereRadius) / 3;
                  }),
                  (n.createTorus = function (t, e, i, r, o) {
                    (t = t || 1),
                      (e = e || 0.5),
                      (i = i || 8),
                      (r = r || 6),
                      (o = o || 2 * Math.PI);
                    for (var s = [], a = [], l = 0; i >= l; l++)
                      for (var c = 0; r >= c; c++) {
                        var u = (c / r) * o,
                          h = (l / i) * Math.PI * 2,
                          d = (t + e * Math.cos(h)) * Math.cos(u),
                          p = (t + e * Math.cos(h)) * Math.sin(u),
                          f = e * Math.sin(h);
                        s.push(d, p, f);
                      }
                    for (l = 1; i >= l; l++)
                      for (c = 1; r >= c; c++) {
                        var m = (r + 1) * l + c - 1,
                          g = (r + 1) * (l - 1) + c - 1,
                          v = (r + 1) * (l - 1) + c,
                          y = (r + 1) * l + c;
                        a.push(m, g, y), a.push(g, v, y);
                      }
                    return new n(s, a);
                  });
              },
              {
                "../collision/AABB": 3,
                "../math/Quaternion": 28,
                "../math/Transform": 29,
                "../math/Vec3": 30,
                "../utils/Octree": 50,
                "./Shape": 43,
              },
            ],
            46: [
              function (t, e) {
                function n() {
                  i.call(this), (this.iterations = 10), (this.tolerance = 1e-7);
                }
                e.exports = n;
                var i =
                  (t("../math/Vec3"), t("../math/Quaternion"), t("./Solver"));
                n.prototype = new i();
                var r = [],
                  o = [],
                  s = [];
                n.prototype.solve = function (t, e) {
                  var n,
                    i,
                    a,
                    l,
                    c,
                    u = 0,
                    h = this.iterations,
                    d = this.tolerance * this.tolerance,
                    p = this.equations,
                    f = p.length,
                    m = e.bodies,
                    g = m.length,
                    v = t;
                  if (0 !== f)
                    for (var y = 0; y !== g; y++)
                      m[y].updateSolveMassProperties();
                  var x = o,
                    _ = s,
                    b = r;
                  for (
                    x.length = f, _.length = f, b.length = f, y = 0;
                    y !== f;
                    y++
                  ) {
                    var w = p[y];
                    (b[y] = 0),
                      (_[y] = w.computeB(v)),
                      (x[y] = 1 / w.computeC());
                  }
                  if (0 !== f) {
                    for (y = 0; y !== g; y++) {
                      var M = (T = m[y]).vlambda,
                        S = T.wlambda;
                      M.set(0, 0, 0), S && S.set(0, 0, 0);
                    }
                    for (u = 0; u !== h; u++) {
                      l = 0;
                      for (var E = 0; E !== f; E++)
                        (w = p[E]),
                          (n = _[E]),
                          (i = x[E]),
                          (c = b[E]) +
                            (a = i * (n - w.computeGWlambda() - w.eps * c)) <
                          w.minForce
                            ? (a = w.minForce - c)
                            : c + a > w.maxForce && (a = w.maxForce - c),
                          (b[E] += a),
                          (l += a > 0 ? a : -a),
                          w.addToWlambda(a);
                      if (d > l * l) break;
                    }
                    for (y = 0; y !== g; y++) {
                      var T,
                        A = (T = m[y]).velocity,
                        C = T.angularVelocity;
                      A.vadd(T.vlambda, A), C && C.vadd(T.wlambda, C);
                    }
                  }
                  return u;
                };
              },
              { "../math/Quaternion": 28, "../math/Vec3": 30, "./Solver": 47 },
            ],
            47: [
              function (t, e) {
                function n() {
                  this.equations = [];
                }
                (e.exports = n),
                  (n.prototype.solve = function () {
                    return 0;
                  }),
                  (n.prototype.addEquation = function (t) {
                    t.enabled && this.equations.push(t);
                  }),
                  (n.prototype.removeEquation = function (t) {
                    var e = this.equations,
                      n = e.indexOf(t);
                    -1 !== n && e.splice(n, 1);
                  }),
                  (n.prototype.removeAllEquations = function () {
                    this.equations.length = 0;
                  });
              },
              {},
            ],
            48: [
              function (t, e) {
                function n(t) {
                  for (
                    a.call(this),
                      this.iterations = 10,
                      this.tolerance = 1e-7,
                      this.subsolver = t,
                      this.nodes = [],
                      this.nodePool = [];
                    this.nodePool.length < 128;

                  )
                    this.nodePool.push(this.createNode());
                }
                function i(t) {
                  for (var e = t.length, n = 0; n !== e; n++) {
                    var i = t[n];
                    if (!(i.visited || i.body.type & d)) return i;
                  }
                  return !1;
                }
                function r(t, e, n, r) {
                  for (p.push(t), t.visited = !0, e(t, n, r); p.length; )
                    for (var o, s = p.pop(); (o = i(s.children)); )
                      (o.visited = !0), e(o, n, r), p.push(o);
                }
                function o(t, e, n) {
                  e.push(t.body);
                  for (var i = t.eqs.length, r = 0; r !== i; r++) {
                    var o = t.eqs[r];
                    -1 === n.indexOf(o) && n.push(o);
                  }
                }
                function s(t, e) {
                  return e.id - t.id;
                }
                e.exports = n;
                var a =
                    (t("../math/Vec3"), t("../math/Quaternion"), t("./Solver")),
                  l = t("../objects/Body");
                n.prototype = new a();
                var c = [],
                  u = [],
                  h = { bodies: [] },
                  d = l.STATIC,
                  p = [];
                (n.prototype.createNode = function () {
                  return { body: null, children: [], eqs: [], visited: !1 };
                }),
                  (n.prototype.solve = function (t, e) {
                    for (
                      var n = c,
                        a = this.nodePool,
                        l = e.bodies,
                        d = this.equations,
                        p = d.length,
                        f = l.length,
                        m = this.subsolver;
                      a.length < f;

                    )
                      a.push(this.createNode());
                    n.length = f;
                    for (var g = 0; f > g; g++) n[g] = a[g];
                    for (g = 0; g !== f; g++) {
                      var v = n[g];
                      (v.body = l[g]),
                        (v.children.length = 0),
                        (v.eqs.length = 0),
                        (v.visited = !1);
                    }
                    for (var y = 0; y !== p; y++) {
                      var x = d[y],
                        _ = ((g = l.indexOf(x.bi)), l.indexOf(x.bj)),
                        b = n[g],
                        w = n[_];
                      b.children.push(w),
                        b.eqs.push(x),
                        w.children.push(b),
                        w.eqs.push(x);
                    }
                    var M,
                      S = 0,
                      E = u;
                    (m.tolerance = this.tolerance),
                      (m.iterations = this.iterations);
                    for (var T = h; (M = i(n)); ) {
                      (E.length = 0),
                        (T.bodies.length = 0),
                        r(M, o, T.bodies, E);
                      var A = E.length;
                      for (E = E.sort(s), g = 0; g !== A; g++)
                        m.addEquation(E[g]);
                      m.solve(t, T), m.removeAllEquations(), S++;
                    }
                    return S;
                  });
              },
              {
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "../objects/Body": 31,
                "./Solver": 47,
              },
            ],
            49: [
              function (t, e) {
                var n = function () {};
                (e.exports = n),
                  (n.prototype = {
                    constructor: n,
                    addEventListener: function (t, e) {
                      void 0 === this._listeners && (this._listeners = {});
                      var n = this._listeners;
                      return (
                        void 0 === n[t] && (n[t] = []),
                        -1 === n[t].indexOf(e) && n[t].push(e),
                        this
                      );
                    },
                    hasEventListener: function (t, e) {
                      if (void 0 === this._listeners) return !1;
                      var n = this._listeners;
                      return void 0 !== n[t] && -1 !== n[t].indexOf(e);
                    },
                    removeEventListener: function (t, e) {
                      if (void 0 === this._listeners) return this;
                      var n = this._listeners;
                      if (void 0 === n[t]) return this;
                      var i = n[t].indexOf(e);
                      return -1 !== i && n[t].splice(i, 1), this;
                    },
                    dispatchEvent: function (t) {
                      if (void 0 === this._listeners) return this;
                      var e = this._listeners[t.type];
                      if (void 0 !== e) {
                        t.target = this;
                        for (var n = 0, i = e.length; i > n; n++)
                          e[n].call(this, t);
                      }
                      return this;
                    },
                  });
              },
              {},
            ],
            50: [
              function (t, e) {
                function n(t) {
                  (t = t || {}),
                    (this.root = t.root || null),
                    (this.aabb = t.aabb ? t.aabb.clone() : new r()),
                    (this.data = []),
                    (this.children = []);
                }
                function i(t, e) {
                  ((e = e || {}).root = null),
                    (e.aabb = t),
                    n.call(this, e),
                    (this.maxDepth = void 0 !== e.maxDepth ? e.maxDepth : 8);
                }
                var r = t("../collision/AABB"),
                  o = t("../math/Vec3");
                (e.exports = i),
                  (i.prototype = new n()),
                  (n.prototype.reset = function () {
                    this.children.length = this.data.length = 0;
                  }),
                  (n.prototype.insert = function (t, e, n) {
                    var i = this.data;
                    if (((n = n || 0), !this.aabb.contains(t))) return !1;
                    var r = this.children;
                    if (n < (this.maxDepth || this.root.maxDepth)) {
                      var o = !1;
                      r.length || (this.subdivide(), (o = !0));
                      for (var s = 0; 8 !== s; s++)
                        if (r[s].insert(t, e, n + 1)) return !0;
                      o && (r.length = 0);
                    }
                    return i.push(e), !0;
                  });
                var s = new o();
                (n.prototype.subdivide = function () {
                  var t = this.aabb,
                    e = t.lowerBound,
                    i = t.upperBound,
                    a = this.children;
                  a.push(
                    new n({ aabb: new r({ lowerBound: new o(0, 0, 0) }) }),
                    new n({ aabb: new r({ lowerBound: new o(1, 0, 0) }) }),
                    new n({ aabb: new r({ lowerBound: new o(1, 1, 0) }) }),
                    new n({ aabb: new r({ lowerBound: new o(1, 1, 1) }) }),
                    new n({ aabb: new r({ lowerBound: new o(0, 1, 1) }) }),
                    new n({ aabb: new r({ lowerBound: new o(0, 0, 1) }) }),
                    new n({ aabb: new r({ lowerBound: new o(1, 0, 1) }) }),
                    new n({ aabb: new r({ lowerBound: new o(0, 1, 0) }) })
                  ),
                    i.vsub(e, s),
                    s.scale(0.5, s);
                  for (var l = this.root || this, c = 0; 8 !== c; c++) {
                    var u = a[c];
                    u.root = l;
                    var h = u.aabb.lowerBound;
                    (h.x *= s.x),
                      (h.y *= s.y),
                      (h.z *= s.z),
                      h.vadd(e, h),
                      h.vadd(s, u.aabb.upperBound);
                  }
                }),
                  (n.prototype.aabbQuery = function (t, e) {
                    for (
                      var n = (this.data, this.children, [this]);
                      n.length;

                    ) {
                      var i = n.pop();
                      i.aabb.overlaps(t) &&
                        Array.prototype.push.apply(e, i.data),
                        Array.prototype.push.apply(n, i.children);
                    }
                    return e;
                  });
                var a = new r();
                (n.prototype.rayQuery = function (t, e, n) {
                  return (
                    t.getAABB(a), a.toLocalFrame(e, a), this.aabbQuery(a, n), n
                  );
                }),
                  (n.prototype.removeEmptyNodes = function () {
                    for (var t = [this]; t.length; ) {
                      for (
                        var e = t.pop(), n = e.children.length - 1;
                        n >= 0;
                        n--
                      )
                        e.children[n].data.length || e.children.splice(n, 1);
                      Array.prototype.push.apply(t, e.children);
                    }
                  });
              },
              { "../collision/AABB": 3, "../math/Vec3": 30 },
            ],
            51: [
              function (t, e) {
                function n() {
                  (this.objects = []), (this.type = Object);
                }
                (e.exports = n),
                  (n.prototype.release = function () {
                    for (var t = arguments.length, e = 0; e !== t; e++)
                      this.objects.push(arguments[e]);
                  }),
                  (n.prototype.get = function () {
                    return 0 === this.objects.length
                      ? this.constructObject()
                      : this.objects.pop();
                  }),
                  (n.prototype.constructObject = function () {
                    throw new Error(
                      "constructObject() not implemented in this Pool subclass yet!"
                    );
                  });
              },
              {},
            ],
            52: [
              function (t, e) {
                function n() {
                  this.data = { keys: [] };
                }
                (e.exports = n),
                  (n.prototype.get = function (t, e) {
                    if (t > e) {
                      var n = e;
                      (e = t), (t = n);
                    }
                    return this.data[t + "-" + e];
                  }),
                  (n.prototype.set = function (t, e, n) {
                    if (t > e) {
                      var i = e;
                      (e = t), (t = i);
                    }
                    var r = t + "-" + e;
                    this.get(t, e) || this.data.keys.push(r),
                      (this.data[r] = n);
                  }),
                  (n.prototype.reset = function () {
                    for (var t = this.data, e = t.keys; e.length > 0; )
                      delete t[e.pop()];
                  });
              },
              {},
            ],
            53: [
              function (t, e) {
                function n() {}
                (e.exports = n),
                  (n.defaults = function (t, e) {
                    for (var n in ((t = t || {}), e)) n in t || (t[n] = e[n]);
                    return t;
                  });
              },
              {},
            ],
            54: [
              function (t, e) {
                function n() {
                  r.call(this), (this.type = i);
                }
                e.exports = n;
                var i = t("../math/Vec3"),
                  r = t("./Pool");
                (n.prototype = new r()),
                  (n.prototype.constructObject = function () {
                    return new i();
                  });
              },
              { "../math/Vec3": 30, "./Pool": 51 },
            ],
            55: [
              function (t, e) {
                function n(t) {
                  (this.contactPointPool = []),
                    (this.frictionEquationPool = []),
                    (this.result = []),
                    (this.frictionResult = []),
                    (this.v3pool = new u()),
                    (this.world = t),
                    (this.currentContactMaterial = null),
                    (this.enableFrictionReduction = !1);
                }
                function i(t, e, n) {
                  for (var i = null, r = t.length, o = 0; o !== r; o++) {
                    var s = t[o],
                      a = H;
                    t[(o + 1) % r].vsub(s, a);
                    var l = j;
                    a.cross(e, l);
                    var c = U;
                    n.vsub(s, c);
                    var u = l.dot(c);
                    if (
                      !(
                        null === i ||
                        (u > 0 && !0 === i) ||
                        (0 >= u && !1 === i)
                      )
                    )
                      return !1;
                    null === i && (i = u > 0);
                  }
                  return !0;
                }
                e.exports = n;
                var r = t("../collision/AABB"),
                  o = t("../shapes/Shape"),
                  s = t("../collision/Ray"),
                  a = t("../math/Vec3"),
                  l = t("../math/Transform"),
                  c =
                    (t("../shapes/ConvexPolyhedron"), t("../math/Quaternion")),
                  u = (t("../solver/Solver"), t("../utils/Vec3Pool")),
                  h = t("../equations/ContactEquation"),
                  d = t("../equations/FrictionEquation");
                (n.prototype.createContactEquation = function (
                  t,
                  e,
                  n,
                  i,
                  r,
                  o
                ) {
                  var s;
                  this.contactPointPool.length
                    ? (((s = this.contactPointPool.pop()).bi = t), (s.bj = e))
                    : (s = new h(t, e)),
                    (s.enabled =
                      t.collisionResponse &&
                      e.collisionResponse &&
                      n.collisionResponse &&
                      i.collisionResponse);
                  var a = this.currentContactMaterial;
                  (s.restitution = a.restitution),
                    s.setSpookParams(
                      a.contactEquationStiffness,
                      a.contactEquationRelaxation,
                      this.world.dt
                    );
                  var l = n.material || t.material,
                    c = i.material || e.material;
                  return (
                    l &&
                      c &&
                      l.restitution >= 0 &&
                      c.restitution >= 0 &&
                      (s.restitution = l.restitution * c.restitution),
                    (s.si = r || n),
                    (s.sj = o || i),
                    s
                  );
                }),
                  (n.prototype.createFrictionEquationsFromContact = function (
                    t,
                    e
                  ) {
                    var n = t.bi,
                      i = t.bj,
                      r = t.si,
                      o = t.sj,
                      s = this.world,
                      a = this.currentContactMaterial,
                      l = a.friction,
                      c = r.material || n.material,
                      u = o.material || i.material;
                    if (
                      (c &&
                        u &&
                        c.friction >= 0 &&
                        u.friction >= 0 &&
                        (l = c.friction * u.friction),
                      l > 0)
                    ) {
                      var h = l * s.gravity.length(),
                        p = n.invMass + i.invMass;
                      p > 0 && (p = 1 / p);
                      var f = this.frictionEquationPool,
                        m = f.length ? f.pop() : new d(n, i, h * p),
                        g = f.length ? f.pop() : new d(n, i, h * p);
                      return (
                        (m.bi = g.bi = n),
                        (m.bj = g.bj = i),
                        (m.minForce = g.minForce = -h * p),
                        (m.maxForce = g.maxForce = h * p),
                        m.ri.copy(t.ri),
                        m.rj.copy(t.rj),
                        g.ri.copy(t.ri),
                        g.rj.copy(t.rj),
                        t.ni.tangents(m.t, g.t),
                        m.setSpookParams(
                          a.frictionEquationStiffness,
                          a.frictionEquationRelaxation,
                          s.dt
                        ),
                        g.setSpookParams(
                          a.frictionEquationStiffness,
                          a.frictionEquationRelaxation,
                          s.dt
                        ),
                        (m.enabled = g.enabled = t.enabled),
                        e.push(m, g),
                        !0
                      );
                    }
                    return !1;
                  });
                var p = new a(),
                  f = new a(),
                  m = new a();
                n.prototype.createFrictionFromAverage = function (t) {
                  var e = this.result[this.result.length - 1];
                  if (
                    this.createFrictionEquationsFromContact(
                      e,
                      this.frictionResult
                    ) &&
                    1 !== t
                  ) {
                    var n = this.frictionResult[this.frictionResult.length - 2],
                      i = this.frictionResult[this.frictionResult.length - 1];
                    p.setZero(), f.setZero(), m.setZero();
                    for (var r = e.bi, o = (e.bj, 0); o !== t; o++)
                      (e = this.result[this.result.length - 1 - o]).bodyA !== r
                        ? (p.vadd(e.ni, p), f.vadd(e.ri, f), m.vadd(e.rj, m))
                        : (p.vsub(e.ni, p), f.vadd(e.rj, f), m.vadd(e.ri, m));
                    var s = 1 / t;
                    f.scale(s, n.ri),
                      m.scale(s, n.rj),
                      i.ri.copy(n.ri),
                      i.rj.copy(n.rj),
                      p.normalize(),
                      p.tangents(n.t, i.t);
                  }
                };
                var g = new a(),
                  v = new a(),
                  y = new c(),
                  x = new c();
                (n.prototype.getContacts = function (t, e, n, i, r, o, s) {
                  (this.contactPointPool = r),
                    (this.frictionEquationPool = s),
                    (this.result = i),
                    (this.frictionResult = o);
                  for (
                    var a = y, l = x, c = g, u = v, h = 0, d = t.length;
                    h !== d;
                    h++
                  ) {
                    var p = t[h],
                      f = e[h],
                      m = null;
                    p.material &&
                      f.material &&
                      (m =
                        n.getContactMaterial(p.material, f.material) || null);
                    for (var _ = 0; _ < p.shapes.length; _++) {
                      p.quaternion.mult(p.shapeOrientations[_], a),
                        p.quaternion.vmult(p.shapeOffsets[_], c),
                        c.vadd(p.position, c);
                      for (
                        var b = p.shapes[_], w = 0;
                        w < f.shapes.length;
                        w++
                      ) {
                        f.quaternion.mult(f.shapeOrientations[w], l),
                          f.quaternion.vmult(f.shapeOffsets[w], u),
                          u.vadd(f.position, u);
                        var M = f.shapes[w];
                        if (
                          !(
                            c.distanceTo(u) >
                            b.boundingSphereRadius + M.boundingSphereRadius
                          )
                        ) {
                          var S = null;
                          b.material &&
                            M.material &&
                            (S =
                              n.getContactMaterial(b.material, M.material) ||
                              null),
                            (this.currentContactMaterial =
                              S || m || n.defaultContactMaterial);
                          var E = this[b.type | M.type];
                          E &&
                            (b.type < M.type
                              ? E.call(this, b, M, c, u, a, l, p, f, b, M)
                              : E.call(this, M, b, u, c, l, a, f, p, b, M));
                        }
                      }
                    }
                  }
                }),
                  (n.prototype[o.types.BOX | o.types.BOX] = n.prototype.boxBox =
                    function (t, e, n, i, r, o, s, a) {
                      (t.convexPolyhedronRepresentation.material = t.material),
                        (e.convexPolyhedronRepresentation.material =
                          e.material),
                        (t.convexPolyhedronRepresentation.collisionResponse =
                          t.collisionResponse),
                        (e.convexPolyhedronRepresentation.collisionResponse =
                          e.collisionResponse),
                        this.convexConvex(
                          t.convexPolyhedronRepresentation,
                          e.convexPolyhedronRepresentation,
                          n,
                          i,
                          r,
                          o,
                          s,
                          a,
                          t,
                          e
                        );
                    }),
                  (n.prototype[o.types.BOX | o.types.CONVEXPOLYHEDRON] =
                    n.prototype.boxConvex =
                      function (t, e, n, i, r, o, s, a) {
                        (t.convexPolyhedronRepresentation.material =
                          t.material),
                          (t.convexPolyhedronRepresentation.collisionResponse =
                            t.collisionResponse),
                          this.convexConvex(
                            t.convexPolyhedronRepresentation,
                            e,
                            n,
                            i,
                            r,
                            o,
                            s,
                            a,
                            t,
                            e
                          );
                      }),
                  (n.prototype[o.types.BOX | o.types.PARTICLE] =
                    n.prototype.boxParticle =
                      function (t, e, n, i, r, o, s, a) {
                        (t.convexPolyhedronRepresentation.material =
                          t.material),
                          (t.convexPolyhedronRepresentation.collisionResponse =
                            t.collisionResponse),
                          this.convexParticle(
                            t.convexPolyhedronRepresentation,
                            e,
                            n,
                            i,
                            r,
                            o,
                            s,
                            a,
                            t,
                            e
                          );
                      }),
                  (n.prototype[o.types.SPHERE] = n.prototype.sphereSphere =
                    function (t, e, n, i, r, o, s, a) {
                      var l = this.createContactEquation(s, a, t, e);
                      i.vsub(n, l.ni),
                        l.ni.normalize(),
                        l.ri.copy(l.ni),
                        l.rj.copy(l.ni),
                        l.ri.mult(t.radius, l.ri),
                        l.rj.mult(-e.radius, l.rj),
                        l.ri.vadd(n, l.ri),
                        l.ri.vsub(s.position, l.ri),
                        l.rj.vadd(i, l.rj),
                        l.rj.vsub(a.position, l.rj),
                        this.result.push(l),
                        this.createFrictionEquationsFromContact(
                          l,
                          this.frictionResult
                        );
                    });
                var _ = new a(),
                  b = new a(),
                  w = new a();
                n.prototype[o.types.PLANE | o.types.TRIMESH] =
                  n.prototype.planeTrimesh = function (t, e, n, i, r, o, s, c) {
                    var u = new a(),
                      h = _;
                    h.set(0, 0, 1), r.vmult(h, h);
                    for (var d = 0; d < e.vertices.length / 3; d++) {
                      e.getVertex(d, u);
                      var p = new a();
                      p.copy(u), l.pointToWorldFrame(i, o, p, u);
                      var f = b;
                      if ((u.vsub(n, f), 0 >= h.dot(f))) {
                        var m = this.createContactEquation(s, c, t, e);
                        m.ni.copy(h);
                        var g = w;
                        h.scale(f.dot(h), g),
                          u.vsub(g, g),
                          m.ri.copy(g),
                          m.ri.vsub(s.position, m.ri),
                          m.rj.copy(u),
                          m.rj.vsub(c.position, m.rj),
                          this.result.push(m),
                          this.createFrictionEquationsFromContact(
                            m,
                            this.frictionResult
                          );
                      }
                    }
                  };
                var M = new a(),
                  S = new a(),
                  E = (new a(), new a()),
                  T = new a(),
                  A = new a(),
                  C = new a(),
                  L = new a(),
                  R = new a(),
                  P = new a(),
                  O = new a(),
                  k = new a(),
                  I = new a(),
                  D = new a(),
                  B = new r(),
                  N = [];
                n.prototype[o.types.SPHERE | o.types.TRIMESH] =
                  n.prototype.sphereTrimesh = function (
                    t,
                    e,
                    n,
                    i,
                    r,
                    o,
                    a,
                    c
                  ) {
                    var u = A,
                      h = C,
                      d = L,
                      p = R,
                      f = P,
                      m = O,
                      g = B,
                      v = T,
                      y = S,
                      x = N;
                    l.pointToLocalFrame(i, o, n, f);
                    var _ = t.radius;
                    g.lowerBound.set(f.x - _, f.y - _, f.z - _),
                      g.upperBound.set(f.x + _, f.y + _, f.z + _),
                      e.getTrianglesInAABB(g, x);
                    for (
                      var b = E, w = t.radius * t.radius, F = 0;
                      F < x.length;
                      F++
                    )
                      for (var z = 0; 3 > z; z++)
                        e.getVertex(e.indices[3 * x[F] + z], b),
                          b.vsub(f, y),
                          y.norm2() <= w &&
                            (v.copy(b),
                            l.pointToWorldFrame(i, o, v, b),
                            b.vsub(n, y),
                            (U = this.createContactEquation(
                              a,
                              c,
                              t,
                              e
                            )).ni.copy(y),
                            U.ni.normalize(),
                            U.ri.copy(U.ni),
                            U.ri.scale(t.radius, U.ri),
                            U.ri.vadd(n, U.ri),
                            U.ri.vsub(a.position, U.ri),
                            U.rj.copy(b),
                            U.rj.vsub(c.position, U.rj),
                            this.result.push(U),
                            this.createFrictionEquationsFromContact(
                              U,
                              this.frictionResult
                            ));
                    for (F = 0; F < x.length; F++)
                      for (z = 0; 3 > z; z++) {
                        e.getVertex(e.indices[3 * x[F] + z], u),
                          e.getVertex(e.indices[3 * x[F] + ((z + 1) % 3)], h),
                          h.vsub(u, d),
                          f.vsub(h, m);
                        var H = m.dot(d);
                        f.vsub(u, m);
                        var j = m.dot(d);
                        if (
                          j > 0 &&
                          0 > H &&
                          (f.vsub(u, m),
                          p.copy(d),
                          p.normalize(),
                          (j = m.dot(p)),
                          p.scale(j, m),
                          m.vadd(u, m),
                          (Y = m.distanceTo(f)) < t.radius)
                        ) {
                          var U = this.createContactEquation(a, c, t, e);
                          m.vsub(f, U.ni),
                            U.ni.normalize(),
                            U.ni.scale(t.radius, U.ri),
                            l.pointToWorldFrame(i, o, m, m),
                            m.vsub(c.position, U.rj),
                            l.vectorToWorldFrame(o, U.ni, U.ni),
                            l.vectorToWorldFrame(o, U.ri, U.ri),
                            this.result.push(U),
                            this.createFrictionEquationsFromContact(
                              U,
                              this.frictionResult
                            );
                        }
                      }
                    for (
                      var V = k, G = I, W = D, q = M, X = ((F = 0), x.length);
                      F !== X;
                      F++
                    ) {
                      e.getTriangleVertices(x[F], V, G, W),
                        e.getNormal(x[F], q),
                        f.vsub(V, m);
                      var Y = m.dot(q);
                      q.scale(Y, m),
                        f.vsub(m, m),
                        (Y = m.distanceTo(f)),
                        s.pointInTriangle(m, V, G, W) &&
                          Y < t.radius &&
                          ((U = this.createContactEquation(a, c, t, e)),
                          m.vsub(f, U.ni),
                          U.ni.normalize(),
                          U.ni.scale(t.radius, U.ri),
                          l.pointToWorldFrame(i, o, m, m),
                          m.vsub(c.position, U.rj),
                          l.vectorToWorldFrame(o, U.ni, U.ni),
                          l.vectorToWorldFrame(o, U.ri, U.ri),
                          this.result.push(U),
                          this.createFrictionEquationsFromContact(
                            U,
                            this.frictionResult
                          ));
                    }
                    x.length = 0;
                  };
                var F = new a(),
                  z = new a();
                n.prototype[o.types.SPHERE | o.types.PLANE] =
                  n.prototype.spherePlane = function (t, e, n, i, r, o, s, a) {
                    var l = this.createContactEquation(s, a, t, e);
                    if (
                      (l.ni.set(0, 0, 1),
                      o.vmult(l.ni, l.ni),
                      l.ni.negate(l.ni),
                      l.ni.normalize(),
                      l.ni.mult(t.radius, l.ri),
                      n.vsub(i, F),
                      l.ni.mult(l.ni.dot(F), z),
                      F.vsub(z, l.rj),
                      -F.dot(l.ni) <= t.radius)
                    ) {
                      var c = l.ri,
                        u = l.rj;
                      c.vadd(n, c),
                        c.vsub(s.position, c),
                        u.vadd(i, u),
                        u.vsub(a.position, u),
                        this.result.push(l),
                        this.createFrictionEquationsFromContact(
                          l,
                          this.frictionResult
                        );
                    }
                  };
                var H = new a(),
                  j = new a(),
                  U = new a(),
                  V = new a(),
                  G = new a(),
                  W = new a(),
                  q = new a(),
                  X = [new a(), new a(), new a(), new a(), new a(), new a()],
                  Y = new a(),
                  $ = new a(),
                  K = new a(),
                  J = new a();
                n.prototype[o.types.SPHERE | o.types.BOX] =
                  n.prototype.sphereBox = function (t, e, n, i, r, o, s, a) {
                    var l = this.v3pool,
                      c = X;
                    n.vsub(i, V), e.getSideNormals(c, o);
                    for (
                      var u = t.radius,
                        h = !1,
                        d = $,
                        p = K,
                        f = J,
                        m = null,
                        g = 0,
                        v = 0,
                        y = 0,
                        x = null,
                        _ = 0,
                        b = c.length;
                      _ !== b && !1 === h;
                      _++
                    ) {
                      var w = G;
                      w.copy(c[_]);
                      var M = w.norm();
                      w.normalize();
                      var S = V.dot(w);
                      if (M + u > S && S > 0) {
                        var E = W,
                          T = q;
                        E.copy(c[(_ + 1) % 3]), T.copy(c[(_ + 2) % 3]);
                        var A = E.norm(),
                          C = T.norm();
                        E.normalize(), T.normalize();
                        var L = V.dot(E),
                          R = V.dot(T);
                        if (A > L && L > -A && C > R && R > -C) {
                          var P = Math.abs(S - M - u);
                          (null === x || x > P) &&
                            ((x = P),
                            (v = L),
                            (y = R),
                            (m = M),
                            d.copy(w),
                            p.copy(E),
                            f.copy(T),
                            g++);
                        }
                      }
                    }
                    if (g) {
                      h = !0;
                      var O = this.createContactEquation(s, a, t, e);
                      d.mult(-u, O.ri),
                        O.ni.copy(d),
                        O.ni.negate(O.ni),
                        d.mult(m, d),
                        p.mult(v, p),
                        d.vadd(p, d),
                        f.mult(y, f),
                        d.vadd(f, O.rj),
                        O.ri.vadd(n, O.ri),
                        O.ri.vsub(s.position, O.ri),
                        O.rj.vadd(i, O.rj),
                        O.rj.vsub(a.position, O.rj),
                        this.result.push(O),
                        this.createFrictionEquationsFromContact(
                          O,
                          this.frictionResult
                        );
                    }
                    for (var k = l.get(), I = Y, D = 0; 2 !== D && !h; D++)
                      for (var B = 0; 2 !== B && !h; B++)
                        for (var N = 0; 2 !== N && !h; N++)
                          k.set(0, 0, 0),
                            D ? k.vadd(c[0], k) : k.vsub(c[0], k),
                            B ? k.vadd(c[1], k) : k.vsub(c[1], k),
                            N ? k.vadd(c[2], k) : k.vsub(c[2], k),
                            i.vadd(k, I),
                            I.vsub(n, I),
                            I.norm2() < u * u &&
                              ((h = !0),
                              (O = this.createContactEquation(
                                s,
                                a,
                                t,
                                e
                              )).ri.copy(I),
                              O.ri.normalize(),
                              O.ni.copy(O.ri),
                              O.ri.mult(u, O.ri),
                              O.rj.copy(k),
                              O.ri.vadd(n, O.ri),
                              O.ri.vsub(s.position, O.ri),
                              O.rj.vadd(i, O.rj),
                              O.rj.vsub(a.position, O.rj),
                              this.result.push(O),
                              this.createFrictionEquationsFromContact(
                                O,
                                this.frictionResult
                              ));
                    l.release(k), (k = null);
                    var F = l.get(),
                      z = l.get(),
                      H = ((O = l.get()), l.get()),
                      j = ((P = l.get()), c.length);
                    for (D = 0; D !== j && !h; D++)
                      for (B = 0; B !== j && !h; B++)
                        if (D % 3 != B % 3) {
                          c[B].cross(c[D], F),
                            F.normalize(),
                            c[D].vadd(c[B], z),
                            O.copy(n),
                            O.vsub(z, O),
                            O.vsub(i, O);
                          var U = O.dot(F);
                          for (
                            F.mult(U, H), N = 0;
                            N === D % 3 || N === B % 3;

                          )
                            N++;
                          P.copy(n), P.vsub(H, P), P.vsub(z, P), P.vsub(i, P);
                          var Z = Math.abs(U),
                            Q = P.norm();
                          if (Z < c[N].norm() && u > Q) {
                            h = !0;
                            var tt = this.createContactEquation(s, a, t, e);
                            z.vadd(H, tt.rj),
                              tt.rj.copy(tt.rj),
                              P.negate(tt.ni),
                              tt.ni.normalize(),
                              tt.ri.copy(tt.rj),
                              tt.ri.vadd(i, tt.ri),
                              tt.ri.vsub(n, tt.ri),
                              tt.ri.normalize(),
                              tt.ri.mult(u, tt.ri),
                              tt.ri.vadd(n, tt.ri),
                              tt.ri.vsub(s.position, tt.ri),
                              tt.rj.vadd(i, tt.rj),
                              tt.rj.vsub(a.position, tt.rj),
                              this.result.push(tt),
                              this.createFrictionEquationsFromContact(
                                tt,
                                this.frictionResult
                              );
                          }
                        }
                    l.release(F, z, O, H, P);
                  };
                var Z = new a(),
                  Q = new a(),
                  tt = new a(),
                  et = new a(),
                  nt = new a(),
                  it = new a(),
                  rt = new a(),
                  ot = new a(),
                  st = new a(),
                  at = new a();
                (n.prototype[o.types.SPHERE | o.types.CONVEXPOLYHEDRON] =
                  n.prototype.sphereConvex =
                    function (t, e, n, r, o, s, a, l) {
                      var c = this.v3pool;
                      n.vsub(r, Z);
                      for (
                        var u = e.faceNormals,
                          h = e.faces,
                          d = e.vertices,
                          p = t.radius,
                          f = 0;
                        f !== d.length;
                        f++
                      ) {
                        var m = d[f],
                          g = nt;
                        s.vmult(m, g), r.vadd(g, g);
                        var v = et;
                        if ((g.vsub(n, v), v.norm2() < p * p))
                          return (
                            (y = !0),
                            (O = this.createContactEquation(
                              a,
                              l,
                              t,
                              e
                            )).ri.copy(v),
                            O.ri.normalize(),
                            O.ni.copy(O.ri),
                            O.ri.mult(p, O.ri),
                            g.vsub(r, O.rj),
                            O.ri.vadd(n, O.ri),
                            O.ri.vsub(a.position, O.ri),
                            O.rj.vadd(r, O.rj),
                            O.rj.vsub(l.position, O.rj),
                            this.result.push(O),
                            void this.createFrictionEquationsFromContact(
                              O,
                              this.frictionResult
                            )
                          );
                      }
                      for (
                        var y = !1, x = ((f = 0), h.length);
                        f !== x && !1 === y;
                        f++
                      ) {
                        var _ = u[f],
                          b = h[f],
                          w = it;
                        s.vmult(_, w);
                        var M = rt;
                        s.vmult(d[b[0]], M), M.vadd(r, M);
                        var S = ot;
                        w.mult(-p, S), n.vadd(S, S);
                        var E = st;
                        S.vsub(M, E);
                        var T = E.dot(w),
                          A = at;
                        if ((n.vsub(M, A), 0 > T && A.dot(w) > 0)) {
                          for (var C = [], L = 0, R = b.length; L !== R; L++) {
                            var P = c.get();
                            s.vmult(d[b[L]], P), r.vadd(P, P), C.push(P);
                          }
                          if (i(C, w, n)) {
                            y = !0;
                            var O = this.createContactEquation(a, l, t, e);
                            w.mult(-p, O.ri), w.negate(O.ni);
                            var k = c.get();
                            w.mult(-T, k);
                            var I = c.get();
                            w.mult(-p, I),
                              n.vsub(r, O.rj),
                              O.rj.vadd(I, O.rj),
                              O.rj.vadd(k, O.rj),
                              O.rj.vadd(r, O.rj),
                              O.rj.vsub(l.position, O.rj),
                              O.ri.vadd(n, O.ri),
                              O.ri.vsub(a.position, O.ri),
                              c.release(k),
                              c.release(I),
                              this.result.push(O),
                              this.createFrictionEquationsFromContact(
                                O,
                                this.frictionResult
                              ),
                              (L = 0);
                            for (var D = C.length; L !== D; L++)
                              c.release(C[L]);
                            return;
                          }
                          for (L = 0; L !== b.length; L++) {
                            var B = c.get(),
                              N = c.get();
                            s.vmult(d[b[(L + 1) % b.length]], B),
                              s.vmult(d[b[(L + 2) % b.length]], N),
                              r.vadd(B, B),
                              r.vadd(N, N);
                            var F = Q;
                            N.vsub(B, F);
                            var z = tt;
                            F.unit(z);
                            var H = c.get(),
                              j = c.get();
                            n.vsub(B, j);
                            var U = j.dot(z);
                            z.mult(U, H), H.vadd(B, H);
                            var V = c.get();
                            if (
                              (H.vsub(n, V),
                              U > 0 && U * U < F.norm2() && V.norm2() < p * p)
                            ) {
                              for (
                                O = this.createContactEquation(a, l, t, e),
                                  H.vsub(r, O.rj),
                                  H.vsub(n, O.ni),
                                  O.ni.normalize(),
                                  O.ni.mult(p, O.ri),
                                  O.rj.vadd(r, O.rj),
                                  O.rj.vsub(l.position, O.rj),
                                  O.ri.vadd(n, O.ri),
                                  O.ri.vsub(a.position, O.ri),
                                  this.result.push(O),
                                  this.createFrictionEquationsFromContact(
                                    O,
                                    this.frictionResult
                                  ),
                                  L = 0,
                                  D = C.length;
                                L !== D;
                                L++
                              )
                                c.release(C[L]);
                              return (
                                c.release(B),
                                c.release(N),
                                c.release(H),
                                c.release(V),
                                void c.release(j)
                              );
                            }
                            c.release(B),
                              c.release(N),
                              c.release(H),
                              c.release(V),
                              c.release(j);
                          }
                          for (L = 0, D = C.length; L !== D; L++)
                            c.release(C[L]);
                        }
                      }
                    }),
                  new a(),
                  new a(),
                  (n.prototype[o.types.PLANE | o.types.BOX] =
                    n.prototype.planeBox =
                      function (t, e, n, i, r, o, s, a) {
                        (e.convexPolyhedronRepresentation.material =
                          e.material),
                          (e.convexPolyhedronRepresentation.collisionResponse =
                            e.collisionResponse),
                          this.planeConvex(
                            t,
                            e.convexPolyhedronRepresentation,
                            n,
                            i,
                            r,
                            o,
                            s,
                            a
                          );
                      });
                var lt = new a(),
                  ct = new a(),
                  ut = new a(),
                  ht = new a();
                n.prototype[o.types.PLANE | o.types.CONVEXPOLYHEDRON] =
                  n.prototype.planeConvex = function (t, e, n, i, r, o, s, a) {
                    var l = lt,
                      c = ct;
                    c.set(0, 0, 1), r.vmult(c, c);
                    for (var u = 0, h = ut, d = 0; d !== e.vertices.length; d++)
                      if (
                        (l.copy(e.vertices[d]),
                        o.vmult(l, l),
                        i.vadd(l, l),
                        l.vsub(n, h),
                        0 >= c.dot(h))
                      ) {
                        var p = this.createContactEquation(s, a, t, e),
                          f = ht;
                        c.mult(c.dot(h), f),
                          l.vsub(f, f),
                          f.vsub(n, p.ri),
                          p.ni.copy(c),
                          l.vsub(i, p.rj),
                          p.ri.vadd(n, p.ri),
                          p.ri.vsub(s.position, p.ri),
                          p.rj.vadd(i, p.rj),
                          p.rj.vsub(a.position, p.rj),
                          this.result.push(p),
                          u++,
                          this.enableFrictionReduction ||
                            this.createFrictionEquationsFromContact(
                              p,
                              this.frictionResult
                            );
                      }
                    this.enableFrictionReduction &&
                      u &&
                      this.createFrictionFromAverage(u);
                  };
                var dt = new a(),
                  pt = new a();
                n.prototype[o.types.CONVEXPOLYHEDRON] =
                  n.prototype.convexConvex = function (
                    t,
                    e,
                    n,
                    i,
                    r,
                    o,
                    s,
                    a,
                    l,
                    c,
                    u,
                    h
                  ) {
                    var d = dt;
                    if (
                      !(
                        n.distanceTo(i) >
                        t.boundingSphereRadius + e.boundingSphereRadius
                      ) &&
                      t.findSeparatingAxis(e, n, r, i, o, d, u, h)
                    ) {
                      var p = [],
                        f = pt;
                      t.clipAgainstHull(n, r, e, i, o, d, -100, 100, p);
                      for (var m = 0, g = 0; g !== p.length; g++) {
                        var v = this.createContactEquation(s, a, t, e, l, c),
                          y = v.ri,
                          x = v.rj;
                        d.negate(v.ni),
                          p[g].normal.negate(f),
                          f.mult(p[g].depth, f),
                          p[g].point.vadd(f, y),
                          x.copy(p[g].point),
                          y.vsub(n, y),
                          x.vsub(i, x),
                          y.vadd(n, y),
                          y.vsub(s.position, y),
                          x.vadd(i, x),
                          x.vsub(a.position, x),
                          this.result.push(v),
                          m++,
                          this.enableFrictionReduction ||
                            this.createFrictionEquationsFromContact(
                              v,
                              this.frictionResult
                            );
                      }
                      this.enableFrictionReduction &&
                        m &&
                        this.createFrictionFromAverage(m);
                    }
                  };
                var ft = new a(),
                  mt = new a(),
                  gt = new a();
                n.prototype[o.types.PLANE | o.types.PARTICLE] =
                  n.prototype.planeParticle = function (
                    t,
                    e,
                    n,
                    i,
                    r,
                    o,
                    s,
                    a
                  ) {
                    var l = ft;
                    l.set(0, 0, 1), s.quaternion.vmult(l, l);
                    var c = mt;
                    if ((i.vsub(s.position, c), 0 >= l.dot(c))) {
                      var u = this.createContactEquation(a, s, e, t);
                      u.ni.copy(l), u.ni.negate(u.ni), u.ri.set(0, 0, 0);
                      var h = gt;
                      l.mult(l.dot(i), h),
                        i.vsub(h, h),
                        u.rj.copy(h),
                        this.result.push(u),
                        this.createFrictionEquationsFromContact(
                          u,
                          this.frictionResult
                        );
                    }
                  };
                var vt = new a();
                n.prototype[o.types.PARTICLE | o.types.SPHERE] =
                  n.prototype.sphereParticle = function (
                    t,
                    e,
                    n,
                    i,
                    r,
                    o,
                    s,
                    a
                  ) {
                    var l = vt;
                    if (
                      (l.set(0, 0, 1),
                      i.vsub(n, l),
                      l.norm2() <= t.radius * t.radius)
                    ) {
                      var c = this.createContactEquation(a, s, e, t);
                      l.normalize(),
                        c.rj.copy(l),
                        c.rj.mult(t.radius, c.rj),
                        c.ni.copy(l),
                        c.ni.negate(c.ni),
                        c.ri.set(0, 0, 0),
                        this.result.push(c),
                        this.createFrictionEquationsFromContact(
                          c,
                          this.frictionResult
                        );
                    }
                  };
                var yt = new c(),
                  xt = new a(),
                  _t = (new a(), new a()),
                  bt = new a(),
                  wt = new a();
                (n.prototype[o.types.PARTICLE | o.types.CONVEXPOLYHEDRON] =
                  n.prototype.convexParticle =
                    function (t, e, n, i, r, o, s, a) {
                      var l = -1,
                        c = _t,
                        u = wt,
                        h = null,
                        d = xt;
                      if (
                        (d.copy(i),
                        d.vsub(n, d),
                        r.conjugate(yt),
                        yt.vmult(d, d),
                        t.pointIsInside(d))
                      ) {
                        t.worldVerticesNeedsUpdate &&
                          t.computeWorldVertices(n, r),
                          t.worldFaceNormalsNeedsUpdate &&
                            t.computeWorldFaceNormals(r);
                        for (var p = 0, f = t.faces.length; p !== f; p++) {
                          var m = [t.worldVertices[t.faces[p][0]]],
                            g = t.worldFaceNormals[p];
                          i.vsub(m[0], bt);
                          var v = -g.dot(bt);
                          (null === h || Math.abs(v) < Math.abs(h)) &&
                            ((h = v), (l = p), c.copy(g));
                        }
                        if (-1 !== l) {
                          var y = this.createContactEquation(a, s, e, t);
                          c.mult(h, u),
                            u.vadd(i, u),
                            u.vsub(n, u),
                            y.rj.copy(u),
                            c.negate(y.ni),
                            y.ri.set(0, 0, 0);
                          var x = y.ri,
                            _ = y.rj;
                          x.vadd(i, x),
                            x.vsub(a.position, x),
                            _.vadd(n, _),
                            _.vsub(s.position, _),
                            this.result.push(y),
                            this.createFrictionEquationsFromContact(
                              y,
                              this.frictionResult
                            );
                        } else
                          console.warn(
                            "Point found inside convex, but did not find penetrating face!"
                          );
                      }
                    }),
                  (n.prototype[o.types.BOX | o.types.HEIGHTFIELD] =
                    n.prototype.boxHeightfield =
                      function (t, e, n, i, r, o, s, a) {
                        (t.convexPolyhedronRepresentation.material =
                          t.material),
                          (t.convexPolyhedronRepresentation.collisionResponse =
                            t.collisionResponse),
                          this.convexHeightfield(
                            t.convexPolyhedronRepresentation,
                            e,
                            n,
                            i,
                            r,
                            o,
                            s,
                            a
                          );
                      });
                var Mt = new a(),
                  St = new a(),
                  Et = [0];
                n.prototype[o.types.CONVEXPOLYHEDRON | o.types.HEIGHTFIELD] =
                  n.prototype.convexHeightfield = function (
                    t,
                    e,
                    n,
                    i,
                    r,
                    o,
                    s,
                    a
                  ) {
                    var c = e.data,
                      u = e.elementSize,
                      h = t.boundingSphereRadius,
                      d = St,
                      p = Et,
                      f = Mt;
                    l.pointToLocalFrame(i, o, n, f);
                    var m = Math.floor((f.x - h) / u) - 1,
                      g = Math.ceil((f.x + h) / u) + 1,
                      v = Math.floor((f.y - h) / u) - 1,
                      y = Math.ceil((f.y + h) / u) + 1;
                    if (!(0 > g || 0 > y || m > c.length || v > c[0].length)) {
                      0 > m && (m = 0),
                        0 > g && (g = 0),
                        0 > v && (v = 0),
                        0 > y && (y = 0),
                        m >= c.length && (m = c.length - 1),
                        g >= c.length && (g = c.length - 1),
                        y >= c[0].length && (y = c[0].length - 1),
                        v >= c[0].length && (v = c[0].length - 1);
                      var x = [];
                      e.getRectMinMax(m, v, g, y, x);
                      var _ = x[0],
                        b = x[1];
                      if (!(f.z - h > b || f.z + h < _))
                        for (var w = m; g > w; w++)
                          for (var M = v; y > M; M++)
                            e.getConvexTrianglePillar(w, M, !1),
                              l.pointToWorldFrame(i, o, e.pillarOffset, d),
                              n.distanceTo(d) <
                                e.pillarConvex.boundingSphereRadius +
                                  t.boundingSphereRadius &&
                                this.convexConvex(
                                  t,
                                  e.pillarConvex,
                                  n,
                                  d,
                                  r,
                                  o,
                                  s,
                                  a,
                                  null,
                                  null,
                                  p,
                                  null
                                ),
                              e.getConvexTrianglePillar(w, M, !0),
                              l.pointToWorldFrame(i, o, e.pillarOffset, d),
                              n.distanceTo(d) <
                                e.pillarConvex.boundingSphereRadius +
                                  t.boundingSphereRadius &&
                                this.convexConvex(
                                  t,
                                  e.pillarConvex,
                                  n,
                                  d,
                                  r,
                                  o,
                                  s,
                                  a,
                                  null,
                                  null,
                                  p,
                                  null
                                );
                    }
                  };
                var Tt = new a(),
                  At = new a();
                n.prototype[o.types.SPHERE | o.types.HEIGHTFIELD] =
                  n.prototype.sphereHeightfield = function (
                    t,
                    e,
                    n,
                    i,
                    r,
                    o,
                    s,
                    a
                  ) {
                    var c = e.data,
                      u = t.radius,
                      h = e.elementSize,
                      d = At,
                      p = Tt;
                    l.pointToLocalFrame(i, o, n, p);
                    var f = Math.floor((p.x - u) / h) - 1,
                      m = Math.ceil((p.x + u) / h) + 1,
                      g = Math.floor((p.y - u) / h) - 1,
                      v = Math.ceil((p.y + u) / h) + 1;
                    if (!(0 > m || 0 > v || f > c.length || v > c[0].length)) {
                      0 > f && (f = 0),
                        0 > m && (m = 0),
                        0 > g && (g = 0),
                        0 > v && (v = 0),
                        f >= c.length && (f = c.length - 1),
                        m >= c.length && (m = c.length - 1),
                        v >= c[0].length && (v = c[0].length - 1),
                        g >= c[0].length && (g = c[0].length - 1);
                      var y = [];
                      e.getRectMinMax(f, g, m, v, y);
                      var x = y[0],
                        _ = y[1];
                      if (!(p.z - u > _ || p.z + u < x))
                        for (var b = this.result, w = f; m > w; w++)
                          for (var M = g; v > M; M++) {
                            var S = b.length;
                            if (
                              (e.getConvexTrianglePillar(w, M, !1),
                              l.pointToWorldFrame(i, o, e.pillarOffset, d),
                              n.distanceTo(d) <
                                e.pillarConvex.boundingSphereRadius +
                                  t.boundingSphereRadius &&
                                this.sphereConvex(
                                  t,
                                  e.pillarConvex,
                                  n,
                                  d,
                                  r,
                                  o,
                                  s,
                                  a
                                ),
                              e.getConvexTrianglePillar(w, M, !0),
                              l.pointToWorldFrame(i, o, e.pillarOffset, d),
                              n.distanceTo(d) <
                                e.pillarConvex.boundingSphereRadius +
                                  t.boundingSphereRadius &&
                                this.sphereConvex(
                                  t,
                                  e.pillarConvex,
                                  n,
                                  d,
                                  r,
                                  o,
                                  s,
                                  a
                                ),
                              b.length - S > 2)
                            )
                              return;
                          }
                    }
                  };
              },
              {
                "../collision/AABB": 3,
                "../collision/Ray": 9,
                "../equations/ContactEquation": 19,
                "../equations/FrictionEquation": 21,
                "../math/Quaternion": 28,
                "../math/Transform": 29,
                "../math/Vec3": 30,
                "../shapes/ConvexPolyhedron": 38,
                "../shapes/Shape": 43,
                "../solver/Solver": 47,
                "../utils/Vec3Pool": 54,
              },
            ],
            56: [
              function (t, e) {
                function n() {
                  l.apply(this),
                    (this.dt = -1),
                    (this.allowSleep = !1),
                    (this.contacts = []),
                    (this.frictionEquations = []),
                    (this.quatNormalizeSkip = 0),
                    (this.quatNormalizeFast = !1),
                    (this.time = 0),
                    (this.stepnumber = 0),
                    (this.default_dt = 1 / 60),
                    (this.nextId = 0),
                    (this.gravity = new r()),
                    (this.broadphase = new v()),
                    (this.bodies = []),
                    (this.solver = new s()),
                    (this.constraints = []),
                    (this.narrowphase = new a(this)),
                    (this.collisionMatrix = new c()),
                    (this.collisionMatrixPrevious = new c()),
                    (this.materials = []),
                    (this.contactmaterials = []),
                    (this.contactMaterialTable = new p()),
                    (this.defaultMaterial = new u("default")),
                    (this.defaultContactMaterial = new h(
                      this.defaultMaterial,
                      this.defaultMaterial,
                      { friction: 0.3, restitution: 0 }
                    )),
                    (this.doProfiling = !1),
                    (this.profile = {
                      solve: 0,
                      makeContactConstraints: 0,
                      broadphase: 0,
                      integrate: 0,
                      narrowphase: 0,
                    }),
                    (this.subsystems = []),
                    (this.addBodyEvent = { type: "addBody", body: null }),
                    (this.removeBodyEvent = { type: "removeBody", body: null });
                }
                e.exports = n;
                var i = t("../shapes/Shape"),
                  r = t("../math/Vec3"),
                  o = t("../math/Quaternion"),
                  s = t("../solver/GSSolver"),
                  a =
                    (t("../utils/Vec3Pool"),
                    t("../equations/ContactEquation"),
                    t("../equations/FrictionEquation"),
                    t("./Narrowphase")),
                  l = t("../utils/EventTarget"),
                  c = t("../collision/ArrayCollisionMatrix"),
                  u = t("../material/Material"),
                  h = t("../material/ContactMaterial"),
                  d = t("../objects/Body"),
                  p = t("../utils/TupleDictionary"),
                  f = t("../collision/RaycastResult"),
                  m = t("../collision/AABB"),
                  g = t("../collision/Ray"),
                  v = t("../collision/NaiveBroadphase");
                n.prototype = new l();
                var y = (new m(), new g());
                if (
                  ((n.prototype.getContactMaterial = function (t, e) {
                    return this.contactMaterialTable.get(t.id, e.id);
                  }),
                  (n.prototype.numObjects = function () {
                    return this.bodies.length;
                  }),
                  (n.prototype.collisionMatrixTick = function () {
                    var t = this.collisionMatrixPrevious;
                    (this.collisionMatrixPrevious = this.collisionMatrix),
                      (this.collisionMatrix = t),
                      this.collisionMatrix.reset();
                  }),
                  (n.prototype.add = n.prototype.addBody =
                    function (t) {
                      -1 === this.bodies.indexOf(t) &&
                        ((t.index = this.bodies.length),
                        this.bodies.push(t),
                        (t.world = this),
                        t.initPosition.copy(t.position),
                        t.initVelocity.copy(t.velocity),
                        (t.timeLastSleepy = this.time),
                        t instanceof d &&
                          (t.initAngularVelocity.copy(t.angularVelocity),
                          t.initQuaternion.copy(t.quaternion)),
                        this.collisionMatrix.setNumObjects(this.bodies.length),
                        (this.addBodyEvent.body = t),
                        this.dispatchEvent(this.addBodyEvent));
                    }),
                  (n.prototype.addConstraint = function (t) {
                    this.constraints.push(t);
                  }),
                  (n.prototype.removeConstraint = function (t) {
                    var e = this.constraints.indexOf(t);
                    -1 !== e && this.constraints.splice(e, 1);
                  }),
                  (n.prototype.rayTest = function (t, e, n) {
                    n instanceof f
                      ? this.raycastClosest(t, e, { skipBackfaces: !0 }, n)
                      : this.raycastAll(t, e, { skipBackfaces: !0 }, n);
                  }),
                  (n.prototype.raycastAll = function (t, e, n, i) {
                    return (
                      (n.mode = g.ALL),
                      (n.from = t),
                      (n.to = e),
                      (n.callback = i),
                      y.intersectWorld(this, n)
                    );
                  }),
                  (n.prototype.raycastAny = function (t, e, n, i) {
                    return (
                      (n.mode = g.ANY),
                      (n.from = t),
                      (n.to = e),
                      (n.result = i),
                      y.intersectWorld(this, n)
                    );
                  }),
                  (n.prototype.raycastClosest = function (t, e, n, i) {
                    return (
                      (n.mode = g.CLOSEST),
                      (n.from = t),
                      (n.to = e),
                      (n.result = i),
                      y.intersectWorld(this, n)
                    );
                  }),
                  (n.prototype.remove = function (t) {
                    t.world = null;
                    var e = this.bodies.length - 1,
                      n = this.bodies,
                      i = n.indexOf(t);
                    if (-1 !== i) {
                      n.splice(i, 1);
                      for (var r = 0; r !== n.length; r++) n[r].index = r;
                      this.collisionMatrix.setNumObjects(e),
                        (this.removeBodyEvent.body = t),
                        this.dispatchEvent(this.removeBodyEvent);
                    }
                  }),
                  (n.prototype.removeBody = n.prototype.remove),
                  (n.prototype.addMaterial = function (t) {
                    this.materials.push(t);
                  }),
                  (n.prototype.addContactMaterial = function (t) {
                    this.contactmaterials.push(t),
                      this.contactMaterialTable.set(
                        t.materials[0].id,
                        t.materials[1].id,
                        t
                      );
                  }),
                  "undefined" == typeof performance && (performance = {}),
                  !performance.now)
                ) {
                  var x = Date.now();
                  performance.timing &&
                    performance.timing.navigationStart &&
                    (x = performance.timing.navigationStart),
                    (performance.now = function () {
                      return Date.now() - x;
                    });
                }
                var _ = new r();
                n.prototype.step = function (t, e, n) {
                  if (((n = n || 10), 0 === (e = e || 0)))
                    this.internalStep(t), (this.time += t);
                  else {
                    var i =
                      Math.floor((this.time + e) / t) -
                      Math.floor(this.time / t);
                    i = Math.min(i, n);
                    for (
                      var r = performance.now(), o = 0;
                      o !== i &&
                      (this.internalStep(t),
                      !(performance.now() - r > 1e3 * t));
                      o++
                    );
                    this.time += e;
                    for (
                      var s = (this.time % t) / t,
                        a = _,
                        l = this.bodies,
                        c = 0;
                      c !== l.length;
                      c++
                    ) {
                      var u = l[c];
                      u.type !== d.STATIC && u.sleepState !== d.SLEEPING
                        ? (u.position.vsub(u.previousPosition, a),
                          a.scale(s, a),
                          u.position.vadd(a, u.interpolatedPosition))
                        : (u.interpolatedPosition.copy(u.position),
                          u.interpolatedQuaternion.copy(u.quaternion));
                    }
                  }
                };
                var b = { type: "postStep" },
                  w = { type: "preStep" },
                  M = { type: "collide", body: null, contact: null },
                  S = [],
                  E = [],
                  T = [],
                  A = [],
                  C =
                    (new r(),
                    new r(),
                    new r(),
                    new r(),
                    new r(),
                    new r(),
                    new r(),
                    new r(),
                    new r(),
                    new o(),
                    new o()),
                  L = new o(),
                  R = new r();
                (n.prototype.internalStep = function (t) {
                  this.dt = t;
                  var e,
                    n = this.contacts,
                    r = T,
                    o = A,
                    s = this.numObjects(),
                    a = this.bodies,
                    l = this.solver,
                    c = this.gravity,
                    u = this.doProfiling,
                    h = this.profile,
                    p = d.DYNAMIC,
                    f = this.constraints,
                    m = E,
                    g = (c.norm(), c.x),
                    v = c.y,
                    y = c.z,
                    x = 0;
                  for (u && (e = performance.now()), x = 0; x !== s; x++)
                    if ((H = a[x]).type & p) {
                      var _ = H.force,
                        P = H.mass;
                      (_.x += P * g), (_.y += P * v), (_.z += P * y);
                    }
                  x = 0;
                  for (var O = this.subsystems.length; x !== O; x++)
                    this.subsystems[x].update();
                  u && (e = performance.now()),
                    (r.length = 0),
                    (o.length = 0),
                    this.broadphase.collisionPairs(this, r, o),
                    u && (h.broadphase = performance.now() - e);
                  var k = f.length;
                  for (x = 0; x !== k; x++)
                    if (!(U = f[x]).collideConnected)
                      for (var I = r.length - 1; I >= 0; I -= 1)
                        ((U.bodyA === r[I] && U.bodyB === o[I]) ||
                          (U.bodyB === r[I] && U.bodyA === o[I])) &&
                          (r.splice(I, 1), o.splice(I, 1));
                  this.collisionMatrixTick(), u && (e = performance.now());
                  var D = S,
                    B = n.length;
                  for (x = 0; x !== B; x++) D.push(n[x]);
                  n.length = 0;
                  var N = this.frictionEquations.length;
                  for (x = 0; x !== N; x++) m.push(this.frictionEquations[x]);
                  for (
                    this.frictionEquations.length = 0,
                      this.narrowphase.getContacts(
                        r,
                        o,
                        this,
                        n,
                        D,
                        this.frictionEquations,
                        m
                      ),
                      u && (h.narrowphase = performance.now() - e),
                      u && (e = performance.now()),
                      x = 0;
                    x < this.frictionEquations.length;
                    x++
                  )
                    l.addEquation(this.frictionEquations[x]);
                  for (var F = n.length, z = 0; z !== F; z++) {
                    var H = (U = n[z]).bi,
                      j = U.bj;
                    U.si,
                      U.sj,
                      (
                        (H.material &&
                          j.material &&
                          this.getContactMaterial(H.material, j.material)) ||
                        this.defaultContactMaterial
                      ).friction,
                      H.material &&
                        j.material &&
                        (H.material.friction >= 0 &&
                          j.material.friction >= 0 &&
                          (H.material.friction, j.material.friction),
                        H.material.restitution >= 0 &&
                          j.material.restitution >= 0 &&
                          (U.restitution =
                            H.material.restitution * j.material.restitution)),
                      l.addEquation(U),
                      H.allowSleep &&
                        H.type === d.DYNAMIC &&
                        H.sleepState === d.SLEEPING &&
                        j.sleepState === d.AWAKE &&
                        j.type !== d.STATIC &&
                        j.velocity.norm2() + j.angularVelocity.norm2() >=
                          2 * Math.pow(j.sleepSpeedLimit, 2) &&
                        (H._wakeUpAfterNarrowphase = !0),
                      j.allowSleep &&
                        j.type === d.DYNAMIC &&
                        j.sleepState === d.SLEEPING &&
                        H.sleepState === d.AWAKE &&
                        H.type !== d.STATIC &&
                        H.velocity.norm2() + H.angularVelocity.norm2() >=
                          2 * Math.pow(H.sleepSpeedLimit, 2) &&
                        (j._wakeUpAfterNarrowphase = !0),
                      this.collisionMatrix.set(H, j, !0),
                      this.collisionMatrixPrevious.get(H, j) ||
                        ((M.body = j),
                        (M.contact = U),
                        H.dispatchEvent(M),
                        (M.body = H),
                        j.dispatchEvent(M));
                  }
                  for (
                    u &&
                      ((h.makeContactConstraints = performance.now() - e),
                      (e = performance.now())),
                      x = 0;
                    x !== s;
                    x++
                  )
                    (H = a[x])._wakeUpAfterNarrowphase &&
                      (H.wakeUp(), (H._wakeUpAfterNarrowphase = !1));
                  for (k = f.length, x = 0; x !== k; x++) {
                    var U;
                    (U = f[x]).update(), (I = 0);
                    for (var V = U.equations.length; I !== V; I++) {
                      var G = U.equations[I];
                      l.addEquation(G);
                    }
                  }
                  l.solve(t, this),
                    u && (h.solve = performance.now() - e),
                    l.removeAllEquations();
                  var W = Math.pow;
                  for (x = 0; x !== s; x++)
                    if ((H = a[x]).type & p) {
                      var q = W(1 - H.linearDamping, t),
                        X = H.velocity;
                      X.mult(q, X);
                      var Y = H.angularVelocity;
                      if (Y) {
                        var $ = W(1 - H.angularDamping, t);
                        Y.mult($, Y);
                      }
                    }
                  for (this.dispatchEvent(w), x = 0; x !== s; x++)
                    (H = a[x]).preStep && H.preStep.call(H);
                  u && (e = performance.now());
                  var K = C,
                    J = L,
                    Z = this.stepnumber,
                    Q = d.DYNAMIC | d.KINEMATIC,
                    tt = Z % (this.quatNormalizeSkip + 1) == 0,
                    et = this.quatNormalizeFast,
                    nt = 0.5 * t;
                  for (
                    i.types.PLANE, i.types.CONVEXPOLYHEDRON, x = 0;
                    x !== s;
                    x++
                  ) {
                    var it = a[x],
                      rt = it.force,
                      ot = it.torque;
                    if (it.type & Q && it.sleepState !== d.SLEEPING) {
                      var st = it.velocity,
                        at = it.angularVelocity,
                        lt = it.position,
                        ct = it.quaternion,
                        ut = it.invMass,
                        ht = it.invInertiaWorld;
                      (st.x += rt.x * ut * t),
                        (st.y += rt.y * ut * t),
                        (st.z += rt.z * ut * t),
                        it.angularVelocity &&
                          (ht.vmult(ot, R), R.mult(t, R), R.vadd(at, at)),
                        (lt.x += st.x * t),
                        (lt.y += st.y * t),
                        (lt.z += st.z * t),
                        it.angularVelocity &&
                          (K.set(at.x, at.y, at.z, 0),
                          K.mult(ct, J),
                          (ct.x += nt * J.x),
                          (ct.y += nt * J.y),
                          (ct.z += nt * J.z),
                          (ct.w += nt * J.w),
                          tt && (et ? ct.normalizeFast() : ct.normalize())),
                        it.aabb && (it.aabbNeedsUpdate = !0),
                        it.updateInertiaWorld && it.updateInertiaWorld();
                    }
                  }
                  for (
                    this.clearForces(),
                      this.broadphase.dirty = !0,
                      u && (h.integrate = performance.now() - e),
                      this.time += t,
                      this.stepnumber += 1,
                      this.dispatchEvent(b),
                      x = 0;
                    x !== s;
                    x++
                  ) {
                    var dt = (H = a[x]).postStep;
                    dt && dt.call(H);
                  }
                  if (this.allowSleep)
                    for (x = 0; x !== s; x++) a[x].sleepTick(this.time);
                }),
                  (n.prototype.clearForces = function () {
                    for (
                      var t = this.bodies, e = t.length, n = 0;
                      n !== e;
                      n++
                    ) {
                      var i = t[n];
                      i.force,
                        i.torque,
                        i.force.set(0, 0, 0),
                        i.torque.set(0, 0, 0);
                    }
                  });
              },
              {
                "../collision/AABB": 3,
                "../collision/ArrayCollisionMatrix": 4,
                "../collision/NaiveBroadphase": 7,
                "../collision/Ray": 9,
                "../collision/RaycastResult": 10,
                "../equations/ContactEquation": 19,
                "../equations/FrictionEquation": 21,
                "../material/ContactMaterial": 24,
                "../material/Material": 25,
                "../math/Quaternion": 28,
                "../math/Vec3": 30,
                "../objects/Body": 31,
                "../shapes/Shape": 43,
                "../solver/GSSolver": 46,
                "../utils/EventTarget": 49,
                "../utils/TupleDictionary": 52,
                "../utils/Vec3Pool": 54,
                "./Narrowphase": 55,
              },
            ],
          },
          {},
          [2]
        )(2);
      },
      496: (t, e, n) => {
        "use strict";
        function i(t, e) {
          var n = t.__state.conversionName.toString(),
            i = Math.round(t.r),
            r = Math.round(t.g),
            o = Math.round(t.b),
            s = t.a,
            a = Math.round(t.h),
            l = t.s.toFixed(1),
            c = t.v.toFixed(1);
          if (e || "THREE_CHAR_HEX" === n || "SIX_CHAR_HEX" === n) {
            for (var u = t.hex.toString(16); u.length < 6; ) u = "0" + u;
            return "#" + u;
          }
          return "CSS_RGB" === n
            ? "rgb(" + i + "," + r + "," + o + ")"
            : "CSS_RGBA" === n
            ? "rgba(" + i + "," + r + "," + o + "," + s + ")"
            : "HEX" === n
            ? "0x" + t.hex.toString(16)
            : "RGB_ARRAY" === n
            ? "[" + i + "," + r + "," + o + "]"
            : "RGBA_ARRAY" === n
            ? "[" + i + "," + r + "," + o + "," + s + "]"
            : "RGB_OBJ" === n
            ? "{r:" + i + ",g:" + r + ",b:" + o + "}"
            : "RGBA_OBJ" === n
            ? "{r:" + i + ",g:" + r + ",b:" + o + ",a:" + s + "}"
            : "HSV_OBJ" === n
            ? "{h:" + a + ",s:" + l + ",v:" + c + "}"
            : "HSVA_OBJ" === n
            ? "{h:" + a + ",s:" + l + ",v:" + c + ",a:" + s + "}"
            : "unknown format";
        }
        n.d(e, { XS: () => ut });
        var r = Array.prototype.forEach,
          o = Array.prototype.slice,
          s = {
            BREAK: {},
            extend: function (t) {
              return (
                this.each(
                  o.call(arguments, 1),
                  function (e) {
                    (this.isObject(e) ? Object.keys(e) : []).forEach(
                      function (n) {
                        this.isUndefined(e[n]) || (t[n] = e[n]);
                      }.bind(this)
                    );
                  },
                  this
                ),
                t
              );
            },
            defaults: function (t) {
              return (
                this.each(
                  o.call(arguments, 1),
                  function (e) {
                    (this.isObject(e) ? Object.keys(e) : []).forEach(
                      function (n) {
                        this.isUndefined(t[n]) && (t[n] = e[n]);
                      }.bind(this)
                    );
                  },
                  this
                ),
                t
              );
            },
            compose: function () {
              var t = o.call(arguments);
              return function () {
                for (var e = o.call(arguments), n = t.length - 1; n >= 0; n--)
                  e = [t[n].apply(this, e)];
                return e[0];
              };
            },
            each: function (t, e, n) {
              if (t)
                if (r && t.forEach && t.forEach === r) t.forEach(e, n);
                else if (t.length === t.length + 0) {
                  var i,
                    o = void 0;
                  for (o = 0, i = t.length; o < i; o++)
                    if (o in t && e.call(n, t[o], o) === this.BREAK) return;
                } else
                  for (var s in t)
                    if (e.call(n, t[s], s) === this.BREAK) return;
            },
            defer: function (t) {
              setTimeout(t, 0);
            },
            debounce: function (t, e, n) {
              var i = void 0;
              return function () {
                var r = this,
                  o = arguments;
                function s() {
                  (i = null), n || t.apply(r, o);
                }
                var a = n || !i;
                clearTimeout(i), (i = setTimeout(s, e)), a && t.apply(r, o);
              };
            },
            toArray: function (t) {
              return t.toArray ? t.toArray() : o.call(t);
            },
            isUndefined: function (t) {
              return void 0 === t;
            },
            isNull: function (t) {
              return null === t;
            },
            isNaN: (function (t) {
              function e() {
                return t.apply(this, arguments);
              }
              return (
                (e.toString = function () {
                  return t.toString();
                }),
                e
              );
            })(function (t) {
              return isNaN(t);
            }),
            isArray:
              Array.isArray ||
              function (t) {
                return t.constructor === Array;
              },
            isObject: function (t) {
              return t === Object(t);
            },
            isNumber: function (t) {
              return t === t + 0;
            },
            isString: function (t) {
              return t === t + "";
            },
            isBoolean: function (t) {
              return !1 === t || !0 === t;
            },
            isFunction: function (t) {
              return t instanceof Function;
            },
          },
          a = [
            {
              litmus: s.isString,
              conversions: {
                THREE_CHAR_HEX: {
                  read: function (t) {
                    var e = t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                    return (
                      null !== e && {
                        space: "HEX",
                        hex: parseInt(
                          "0x" +
                            e[1].toString() +
                            e[1].toString() +
                            e[2].toString() +
                            e[2].toString() +
                            e[3].toString() +
                            e[3].toString(),
                          0
                        ),
                      }
                    );
                  },
                  write: i,
                },
                SIX_CHAR_HEX: {
                  read: function (t) {
                    var e = t.match(/^#([A-F0-9]{6})$/i);
                    return (
                      null !== e && {
                        space: "HEX",
                        hex: parseInt("0x" + e[1].toString(), 0),
                      }
                    );
                  },
                  write: i,
                },
                CSS_RGB: {
                  read: function (t) {
                    var e = t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                    return (
                      null !== e && {
                        space: "RGB",
                        r: parseFloat(e[1]),
                        g: parseFloat(e[2]),
                        b: parseFloat(e[3]),
                      }
                    );
                  },
                  write: i,
                },
                CSS_RGBA: {
                  read: function (t) {
                    var e = t.match(
                      /^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/
                    );
                    return (
                      null !== e && {
                        space: "RGB",
                        r: parseFloat(e[1]),
                        g: parseFloat(e[2]),
                        b: parseFloat(e[3]),
                        a: parseFloat(e[4]),
                      }
                    );
                  },
                  write: i,
                },
              },
            },
            {
              litmus: s.isNumber,
              conversions: {
                HEX: {
                  read: function (t) {
                    return { space: "HEX", hex: t, conversionName: "HEX" };
                  },
                  write: function (t) {
                    return t.hex;
                  },
                },
              },
            },
            {
              litmus: s.isArray,
              conversions: {
                RGB_ARRAY: {
                  read: function (t) {
                    return (
                      3 === t.length && {
                        space: "RGB",
                        r: t[0],
                        g: t[1],
                        b: t[2],
                      }
                    );
                  },
                  write: function (t) {
                    return [t.r, t.g, t.b];
                  },
                },
                RGBA_ARRAY: {
                  read: function (t) {
                    return (
                      4 === t.length && {
                        space: "RGB",
                        r: t[0],
                        g: t[1],
                        b: t[2],
                        a: t[3],
                      }
                    );
                  },
                  write: function (t) {
                    return [t.r, t.g, t.b, t.a];
                  },
                },
              },
            },
            {
              litmus: s.isObject,
              conversions: {
                RGBA_OBJ: {
                  read: function (t) {
                    return (
                      !!(
                        s.isNumber(t.r) &&
                        s.isNumber(t.g) &&
                        s.isNumber(t.b) &&
                        s.isNumber(t.a)
                      ) && { space: "RGB", r: t.r, g: t.g, b: t.b, a: t.a }
                    );
                  },
                  write: function (t) {
                    return { r: t.r, g: t.g, b: t.b, a: t.a };
                  },
                },
                RGB_OBJ: {
                  read: function (t) {
                    return (
                      !!(
                        s.isNumber(t.r) &&
                        s.isNumber(t.g) &&
                        s.isNumber(t.b)
                      ) && { space: "RGB", r: t.r, g: t.g, b: t.b }
                    );
                  },
                  write: function (t) {
                    return { r: t.r, g: t.g, b: t.b };
                  },
                },
                HSVA_OBJ: {
                  read: function (t) {
                    return (
                      !!(
                        s.isNumber(t.h) &&
                        s.isNumber(t.s) &&
                        s.isNumber(t.v) &&
                        s.isNumber(t.a)
                      ) && { space: "HSV", h: t.h, s: t.s, v: t.v, a: t.a }
                    );
                  },
                  write: function (t) {
                    return { h: t.h, s: t.s, v: t.v, a: t.a };
                  },
                },
                HSV_OBJ: {
                  read: function (t) {
                    return (
                      !!(
                        s.isNumber(t.h) &&
                        s.isNumber(t.s) &&
                        s.isNumber(t.v)
                      ) && { space: "HSV", h: t.h, s: t.s, v: t.v }
                    );
                  },
                  write: function (t) {
                    return { h: t.h, s: t.s, v: t.v };
                  },
                },
              },
            },
          ],
          l = void 0,
          c = void 0,
          u = function () {
            c = !1;
            var t = arguments.length > 1 ? s.toArray(arguments) : arguments[0];
            return (
              s.each(a, function (e) {
                if (e.litmus(t))
                  return (
                    s.each(e.conversions, function (e, n) {
                      if (((l = e.read(t)), !1 === c && !1 !== l))
                        return (
                          (c = l),
                          (l.conversionName = n),
                          (l.conversion = e),
                          s.BREAK
                        );
                    }),
                    s.BREAK
                  );
              }),
              c
            );
          },
          h = void 0,
          d = {
            hsv_to_rgb: function (t, e, n) {
              var i = Math.floor(t / 60) % 6,
                r = t / 60 - Math.floor(t / 60),
                o = n * (1 - e),
                s = n * (1 - r * e),
                a = n * (1 - (1 - r) * e),
                l = [
                  [n, a, o],
                  [s, n, o],
                  [o, n, a],
                  [o, s, n],
                  [a, o, n],
                  [n, o, s],
                ][i];
              return { r: 255 * l[0], g: 255 * l[1], b: 255 * l[2] };
            },
            rgb_to_hsv: function (t, e, n) {
              var i = Math.min(t, e, n),
                r = Math.max(t, e, n),
                o = r - i,
                s = void 0;
              return 0 === r
                ? { h: NaN, s: 0, v: 0 }
                : ((s =
                    t === r
                      ? (e - n) / o
                      : e === r
                      ? 2 + (n - t) / o
                      : 4 + (t - e) / o),
                  (s /= 6) < 0 && (s += 1),
                  { h: 360 * s, s: o / r, v: r / 255 });
            },
            rgb_to_hex: function (t, e, n) {
              var i = this.hex_with_component(0, 2, t);
              return (
                (i = this.hex_with_component(i, 1, e)),
                this.hex_with_component(i, 0, n)
              );
            },
            component_from_hex: function (t, e) {
              return (t >> (8 * e)) & 255;
            },
            hex_with_component: function (t, e, n) {
              return (n << (h = 8 * e)) | (t & ~(255 << h));
            },
          },
          p =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (t) {
                  return typeof t;
                }
              : function (t) {
                  return t &&
                    "function" == typeof Symbol &&
                    t.constructor === Symbol &&
                    t !== Symbol.prototype
                    ? "symbol"
                    : typeof t;
                },
          f = function (t, e) {
            if (!(t instanceof e))
              throw new TypeError("Cannot call a class as a function");
          },
          m = (function () {
            function t(t, e) {
              for (var n = 0; n < e.length; n++) {
                var i = e[n];
                (i.enumerable = i.enumerable || !1),
                  (i.configurable = !0),
                  "value" in i && (i.writable = !0),
                  Object.defineProperty(t, i.key, i);
              }
            }
            return function (e, n, i) {
              return n && t(e.prototype, n), i && t(e, i), e;
            };
          })(),
          g = function t(e, n, i) {
            null === e && (e = Function.prototype);
            var r = Object.getOwnPropertyDescriptor(e, n);
            if (void 0 === r) {
              var o = Object.getPrototypeOf(e);
              return null === o ? void 0 : t(o, n, i);
            }
            if ("value" in r) return r.value;
            var s = r.get;
            return void 0 !== s ? s.call(i) : void 0;
          },
          v = function (t, e) {
            if ("function" != typeof e && null !== e)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          },
          y = function (t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ("object" != typeof e && "function" != typeof e)
              ? t
              : e;
          },
          x = (function () {
            function t() {
              if (
                (f(this, t),
                (this.__state = u.apply(this, arguments)),
                !1 === this.__state)
              )
                throw new Error("Failed to interpret color arguments");
              this.__state.a = this.__state.a || 1;
            }
            return (
              m(t, [
                {
                  key: "toString",
                  value: function () {
                    return i(this);
                  },
                },
                {
                  key: "toHexString",
                  value: function () {
                    return i(this, !0);
                  },
                },
                {
                  key: "toOriginal",
                  value: function () {
                    return this.__state.conversion.write(this);
                  },
                },
              ]),
              t
            );
          })();
        function _(t, e, n) {
          Object.defineProperty(t, e, {
            get: function () {
              return (
                "RGB" === this.__state.space || x.recalculateRGB(this, e, n),
                this.__state[e]
              );
            },
            set: function (t) {
              "RGB" !== this.__state.space &&
                (x.recalculateRGB(this, e, n), (this.__state.space = "RGB")),
                (this.__state[e] = t);
            },
          });
        }
        function b(t, e) {
          Object.defineProperty(t, e, {
            get: function () {
              return (
                "HSV" === this.__state.space || x.recalculateHSV(this),
                this.__state[e]
              );
            },
            set: function (t) {
              "HSV" !== this.__state.space &&
                (x.recalculateHSV(this), (this.__state.space = "HSV")),
                (this.__state[e] = t);
            },
          });
        }
        (x.recalculateRGB = function (t, e, n) {
          if ("HEX" === t.__state.space)
            t.__state[e] = d.component_from_hex(t.__state.hex, n);
          else {
            if ("HSV" !== t.__state.space)
              throw new Error("Corrupted color state");
            s.extend(
              t.__state,
              d.hsv_to_rgb(t.__state.h, t.__state.s, t.__state.v)
            );
          }
        }),
          (x.recalculateHSV = function (t) {
            var e = d.rgb_to_hsv(t.r, t.g, t.b);
            s.extend(t.__state, { s: e.s, v: e.v }),
              s.isNaN(e.h)
                ? s.isUndefined(t.__state.h) && (t.__state.h = 0)
                : (t.__state.h = e.h);
          }),
          (x.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"]),
          _(x.prototype, "r", 2),
          _(x.prototype, "g", 1),
          _(x.prototype, "b", 0),
          b(x.prototype, "h"),
          b(x.prototype, "s"),
          b(x.prototype, "v"),
          Object.defineProperty(x.prototype, "a", {
            get: function () {
              return this.__state.a;
            },
            set: function (t) {
              this.__state.a = t;
            },
          }),
          Object.defineProperty(x.prototype, "hex", {
            get: function () {
              return (
                "HEX" !== this.__state.space &&
                  ((this.__state.hex = d.rgb_to_hex(this.r, this.g, this.b)),
                  (this.__state.space = "HEX")),
                this.__state.hex
              );
            },
            set: function (t) {
              (this.__state.space = "HEX"), (this.__state.hex = t);
            },
          });
        var w = (function () {
            function t(e, n) {
              f(this, t),
                (this.initialValue = e[n]),
                (this.domElement = document.createElement("div")),
                (this.object = e),
                (this.property = n),
                (this.__onChange = void 0),
                (this.__onFinishChange = void 0);
            }
            return (
              m(t, [
                {
                  key: "onChange",
                  value: function (t) {
                    return (this.__onChange = t), this;
                  },
                },
                {
                  key: "onFinishChange",
                  value: function (t) {
                    return (this.__onFinishChange = t), this;
                  },
                },
                {
                  key: "setValue",
                  value: function (t) {
                    return (
                      (this.object[this.property] = t),
                      this.__onChange && this.__onChange.call(this, t),
                      this.updateDisplay(),
                      this
                    );
                  },
                },
                {
                  key: "getValue",
                  value: function () {
                    return this.object[this.property];
                  },
                },
                {
                  key: "updateDisplay",
                  value: function () {
                    return this;
                  },
                },
                {
                  key: "isModified",
                  value: function () {
                    return this.initialValue !== this.getValue();
                  },
                },
              ]),
              t
            );
          })(),
          M = {};
        s.each(
          {
            HTMLEvents: ["change"],
            MouseEvents: [
              "click",
              "mousemove",
              "mousedown",
              "mouseup",
              "mouseover",
            ],
            KeyboardEvents: ["keydown"],
          },
          function (t, e) {
            s.each(t, function (t) {
              M[t] = e;
            });
          }
        );
        var S = /(\d+(\.\d+)?)px/;
        function E(t) {
          if ("0" === t || s.isUndefined(t)) return 0;
          var e = t.match(S);
          return s.isNull(e) ? 0 : parseFloat(e[1]);
        }
        var T = {
            makeSelectable: function (t, e) {
              void 0 !== t &&
                void 0 !== t.style &&
                ((t.onselectstart = e
                  ? function () {
                      return !1;
                    }
                  : function () {}),
                (t.style.MozUserSelect = e ? "auto" : "none"),
                (t.style.KhtmlUserSelect = e ? "auto" : "none"),
                (t.unselectable = e ? "on" : "off"));
            },
            makeFullscreen: function (t, e, n) {
              var i = n,
                r = e;
              s.isUndefined(r) && (r = !0),
                s.isUndefined(i) && (i = !0),
                (t.style.position = "absolute"),
                r && ((t.style.left = 0), (t.style.right = 0)),
                i && ((t.style.top = 0), (t.style.bottom = 0));
            },
            fakeEvent: function (t, e, n, i) {
              var r = n || {},
                o = M[e];
              if (!o) throw new Error("Event type " + e + " not supported.");
              var a = document.createEvent(o);
              switch (o) {
                case "MouseEvents":
                  var l = r.x || r.clientX || 0,
                    c = r.y || r.clientY || 0;
                  a.initMouseEvent(
                    e,
                    r.bubbles || !1,
                    r.cancelable || !0,
                    window,
                    r.clickCount || 1,
                    0,
                    0,
                    l,
                    c,
                    !1,
                    !1,
                    !1,
                    !1,
                    0,
                    null
                  );
                  break;
                case "KeyboardEvents":
                  var u = a.initKeyboardEvent || a.initKeyEvent;
                  s.defaults(r, {
                    cancelable: !0,
                    ctrlKey: !1,
                    altKey: !1,
                    shiftKey: !1,
                    metaKey: !1,
                    keyCode: void 0,
                    charCode: void 0,
                  }),
                    u(
                      e,
                      r.bubbles || !1,
                      r.cancelable,
                      window,
                      r.ctrlKey,
                      r.altKey,
                      r.shiftKey,
                      r.metaKey,
                      r.keyCode,
                      r.charCode
                    );
                  break;
                default:
                  a.initEvent(e, r.bubbles || !1, r.cancelable || !0);
              }
              s.defaults(a, i), t.dispatchEvent(a);
            },
            bind: function (t, e, n, i) {
              var r = i || !1;
              return (
                t.addEventListener
                  ? t.addEventListener(e, n, r)
                  : t.attachEvent && t.attachEvent("on" + e, n),
                T
              );
            },
            unbind: function (t, e, n, i) {
              var r = i || !1;
              return (
                t.removeEventListener
                  ? t.removeEventListener(e, n, r)
                  : t.detachEvent && t.detachEvent("on" + e, n),
                T
              );
            },
            addClass: function (t, e) {
              if (void 0 === t.className) t.className = e;
              else if (t.className !== e) {
                var n = t.className.split(/ +/);
                -1 === n.indexOf(e) &&
                  (n.push(e),
                  (t.className = n
                    .join(" ")
                    .replace(/^\s+/, "")
                    .replace(/\s+$/, "")));
              }
              return T;
            },
            removeClass: function (t, e) {
              if (e)
                if (t.className === e) t.removeAttribute("class");
                else {
                  var n = t.className.split(/ +/),
                    i = n.indexOf(e);
                  -1 !== i && (n.splice(i, 1), (t.className = n.join(" ")));
                }
              else t.className = void 0;
              return T;
            },
            hasClass: function (t, e) {
              return (
                new RegExp("(?:^|\\s+)" + e + "(?:\\s+|$)").test(t.className) ||
                !1
              );
            },
            getWidth: function (t) {
              var e = getComputedStyle(t);
              return (
                E(e["border-left-width"]) +
                E(e["border-right-width"]) +
                E(e["padding-left"]) +
                E(e["padding-right"]) +
                E(e.width)
              );
            },
            getHeight: function (t) {
              var e = getComputedStyle(t);
              return (
                E(e["border-top-width"]) +
                E(e["border-bottom-width"]) +
                E(e["padding-top"]) +
                E(e["padding-bottom"]) +
                E(e.height)
              );
            },
            getOffset: function (t) {
              var e = t,
                n = { left: 0, top: 0 };
              if (e.offsetParent)
                do {
                  (n.left += e.offsetLeft),
                    (n.top += e.offsetTop),
                    (e = e.offsetParent);
                } while (e);
              return n;
            },
            isActive: function (t) {
              return t === document.activeElement && (t.type || t.href);
            },
          },
          A = (function (t) {
            function e(t, n) {
              f(this, e);
              var i = y(
                  this,
                  (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)
                ),
                r = i;
              return (
                (i.__prev = i.getValue()),
                (i.__checkbox = document.createElement("input")),
                i.__checkbox.setAttribute("type", "checkbox"),
                T.bind(
                  i.__checkbox,
                  "change",
                  function () {
                    r.setValue(!r.__prev);
                  },
                  !1
                ),
                i.domElement.appendChild(i.__checkbox),
                i.updateDisplay(),
                i
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "setValue",
                  value: function (t) {
                    var n = g(
                      e.prototype.__proto__ ||
                        Object.getPrototypeOf(e.prototype),
                      "setValue",
                      this
                    ).call(this, t);
                    return (
                      this.__onFinishChange &&
                        this.__onFinishChange.call(this, this.getValue()),
                      (this.__prev = this.getValue()),
                      n
                    );
                  },
                },
                {
                  key: "updateDisplay",
                  value: function () {
                    return (
                      !0 === this.getValue()
                        ? (this.__checkbox.setAttribute("checked", "checked"),
                          (this.__checkbox.checked = !0),
                          (this.__prev = !0))
                        : ((this.__checkbox.checked = !1), (this.__prev = !1)),
                      g(
                        e.prototype.__proto__ ||
                          Object.getPrototypeOf(e.prototype),
                        "updateDisplay",
                        this
                      ).call(this)
                    );
                  },
                },
              ]),
              e
            );
          })(w),
          C = (function (t) {
            function e(t, n, i) {
              f(this, e);
              var r = y(
                  this,
                  (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)
                ),
                o = i,
                a = r;
              if (
                ((r.__select = document.createElement("select")), s.isArray(o))
              ) {
                var l = {};
                s.each(o, function (t) {
                  l[t] = t;
                }),
                  (o = l);
              }
              return (
                s.each(o, function (t, e) {
                  var n = document.createElement("option");
                  (n.innerHTML = e),
                    n.setAttribute("value", t),
                    a.__select.appendChild(n);
                }),
                r.updateDisplay(),
                T.bind(r.__select, "change", function () {
                  var t = this.options[this.selectedIndex].value;
                  a.setValue(t);
                }),
                r.domElement.appendChild(r.__select),
                r
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "setValue",
                  value: function (t) {
                    var n = g(
                      e.prototype.__proto__ ||
                        Object.getPrototypeOf(e.prototype),
                      "setValue",
                      this
                    ).call(this, t);
                    return (
                      this.__onFinishChange &&
                        this.__onFinishChange.call(this, this.getValue()),
                      n
                    );
                  },
                },
                {
                  key: "updateDisplay",
                  value: function () {
                    return T.isActive(this.__select)
                      ? this
                      : ((this.__select.value = this.getValue()),
                        g(
                          e.prototype.__proto__ ||
                            Object.getPrototypeOf(e.prototype),
                          "updateDisplay",
                          this
                        ).call(this));
                  },
                },
              ]),
              e
            );
          })(w),
          L = (function (t) {
            function e(t, n) {
              f(this, e);
              var i = y(
                  this,
                  (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)
                ),
                r = i;
              function o() {
                r.setValue(r.__input.value);
              }
              return (
                (i.__input = document.createElement("input")),
                i.__input.setAttribute("type", "text"),
                T.bind(i.__input, "keyup", o),
                T.bind(i.__input, "change", o),
                T.bind(i.__input, "blur", function () {
                  r.__onFinishChange &&
                    r.__onFinishChange.call(r, r.getValue());
                }),
                T.bind(i.__input, "keydown", function (t) {
                  13 === t.keyCode && this.blur();
                }),
                i.updateDisplay(),
                i.domElement.appendChild(i.__input),
                i
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "updateDisplay",
                  value: function () {
                    return (
                      T.isActive(this.__input) ||
                        (this.__input.value = this.getValue()),
                      g(
                        e.prototype.__proto__ ||
                          Object.getPrototypeOf(e.prototype),
                        "updateDisplay",
                        this
                      ).call(this)
                    );
                  },
                },
              ]),
              e
            );
          })(w);
        function R(t) {
          var e = t.toString();
          return e.indexOf(".") > -1 ? e.length - e.indexOf(".") - 1 : 0;
        }
        var P = (function (t) {
            function e(t, n, i) {
              f(this, e);
              var r = y(
                  this,
                  (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)
                ),
                o = i || {};
              return (
                (r.__min = o.min),
                (r.__max = o.max),
                (r.__step = o.step),
                s.isUndefined(r.__step)
                  ? 0 === r.initialValue
                    ? (r.__impliedStep = 1)
                    : (r.__impliedStep =
                        Math.pow(
                          10,
                          Math.floor(
                            Math.log(Math.abs(r.initialValue)) / Math.LN10
                          )
                        ) / 10)
                  : (r.__impliedStep = r.__step),
                (r.__precision = R(r.__impliedStep)),
                r
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "setValue",
                  value: function (t) {
                    var n = t;
                    return (
                      void 0 !== this.__min && n < this.__min
                        ? (n = this.__min)
                        : void 0 !== this.__max &&
                          n > this.__max &&
                          (n = this.__max),
                      void 0 !== this.__step &&
                        n % this.__step != 0 &&
                        (n = Math.round(n / this.__step) * this.__step),
                      g(
                        e.prototype.__proto__ ||
                          Object.getPrototypeOf(e.prototype),
                        "setValue",
                        this
                      ).call(this, n)
                    );
                  },
                },
                {
                  key: "min",
                  value: function (t) {
                    return (this.__min = t), this;
                  },
                },
                {
                  key: "max",
                  value: function (t) {
                    return (this.__max = t), this;
                  },
                },
                {
                  key: "step",
                  value: function (t) {
                    return (
                      (this.__step = t),
                      (this.__impliedStep = t),
                      (this.__precision = R(t)),
                      this
                    );
                  },
                },
              ]),
              e
            );
          })(w),
          O = (function (t) {
            function e(t, n, i) {
              f(this, e);
              var r = y(
                this,
                (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n, i)
              );
              r.__truncationSuspended = !1;
              var o = r,
                a = void 0;
              function l() {
                o.__onFinishChange && o.__onFinishChange.call(o, o.getValue());
              }
              function c(t) {
                var e = a - t.clientY;
                o.setValue(o.getValue() + e * o.__impliedStep), (a = t.clientY);
              }
              function u() {
                T.unbind(window, "mousemove", c),
                  T.unbind(window, "mouseup", u),
                  l();
              }
              return (
                (r.__input = document.createElement("input")),
                r.__input.setAttribute("type", "text"),
                T.bind(r.__input, "change", function () {
                  var t = parseFloat(o.__input.value);
                  s.isNaN(t) || o.setValue(t);
                }),
                T.bind(r.__input, "blur", function () {
                  l();
                }),
                T.bind(r.__input, "mousedown", function (t) {
                  T.bind(window, "mousemove", c),
                    T.bind(window, "mouseup", u),
                    (a = t.clientY);
                }),
                T.bind(r.__input, "keydown", function (t) {
                  13 === t.keyCode &&
                    ((o.__truncationSuspended = !0),
                    this.blur(),
                    (o.__truncationSuspended = !1),
                    l());
                }),
                r.updateDisplay(),
                r.domElement.appendChild(r.__input),
                r
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "updateDisplay",
                  value: function () {
                    var t, n, i;
                    return (
                      (this.__input.value = this.__truncationSuspended
                        ? this.getValue()
                        : ((t = this.getValue()),
                          (n = this.__precision),
                          (i = Math.pow(10, n)),
                          Math.round(t * i) / i)),
                      g(
                        e.prototype.__proto__ ||
                          Object.getPrototypeOf(e.prototype),
                        "updateDisplay",
                        this
                      ).call(this)
                    );
                  },
                },
              ]),
              e
            );
          })(P);
        function k(t, e, n, i, r) {
          return i + ((t - e) / (n - e)) * (r - i);
        }
        var I = (function (t) {
            function e(t, n, i, r, o) {
              f(this, e);
              var s = y(
                  this,
                  (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n, {
                    min: i,
                    max: r,
                    step: o,
                  })
                ),
                a = s;
              function l(t) {
                t.preventDefault();
                var e = a.__background.getBoundingClientRect();
                return (
                  a.setValue(k(t.clientX, e.left, e.right, a.__min, a.__max)),
                  !1
                );
              }
              function c() {
                T.unbind(window, "mousemove", l),
                  T.unbind(window, "mouseup", c),
                  a.__onFinishChange &&
                    a.__onFinishChange.call(a, a.getValue());
              }
              function u(t) {
                var e = t.touches[0].clientX,
                  n = a.__background.getBoundingClientRect();
                a.setValue(k(e, n.left, n.right, a.__min, a.__max));
              }
              function h() {
                T.unbind(window, "touchmove", u),
                  T.unbind(window, "touchend", h),
                  a.__onFinishChange &&
                    a.__onFinishChange.call(a, a.getValue());
              }
              return (
                (s.__background = document.createElement("div")),
                (s.__foreground = document.createElement("div")),
                T.bind(s.__background, "mousedown", function (t) {
                  document.activeElement.blur(),
                    T.bind(window, "mousemove", l),
                    T.bind(window, "mouseup", c),
                    l(t);
                }),
                T.bind(s.__background, "touchstart", function (t) {
                  1 === t.touches.length &&
                    (T.bind(window, "touchmove", u),
                    T.bind(window, "touchend", h),
                    u(t));
                }),
                T.addClass(s.__background, "slider"),
                T.addClass(s.__foreground, "slider-fg"),
                s.updateDisplay(),
                s.__background.appendChild(s.__foreground),
                s.domElement.appendChild(s.__background),
                s
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "updateDisplay",
                  value: function () {
                    var t =
                      (this.getValue() - this.__min) /
                      (this.__max - this.__min);
                    return (
                      (this.__foreground.style.width = 100 * t + "%"),
                      g(
                        e.prototype.__proto__ ||
                          Object.getPrototypeOf(e.prototype),
                        "updateDisplay",
                        this
                      ).call(this)
                    );
                  },
                },
              ]),
              e
            );
          })(P),
          D = (function (t) {
            function e(t, n, i) {
              f(this, e);
              var r = y(
                  this,
                  (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)
                ),
                o = r;
              return (
                (r.__button = document.createElement("div")),
                (r.__button.innerHTML = void 0 === i ? "Fire" : i),
                T.bind(r.__button, "click", function (t) {
                  return t.preventDefault(), o.fire(), !1;
                }),
                T.addClass(r.__button, "button"),
                r.domElement.appendChild(r.__button),
                r
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "fire",
                  value: function () {
                    this.__onChange && this.__onChange.call(this),
                      this.getValue().call(this.object),
                      this.__onFinishChange &&
                        this.__onFinishChange.call(this, this.getValue());
                  },
                },
              ]),
              e
            );
          })(w),
          B = (function (t) {
            function e(t, n) {
              f(this, e);
              var i = y(
                this,
                (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)
              );
              (i.__color = new x(i.getValue())), (i.__temp = new x(0));
              var r = i;
              (i.domElement = document.createElement("div")),
                T.makeSelectable(i.domElement, !1),
                (i.__selector = document.createElement("div")),
                (i.__selector.className = "selector"),
                (i.__saturation_field = document.createElement("div")),
                (i.__saturation_field.className = "saturation-field"),
                (i.__field_knob = document.createElement("div")),
                (i.__field_knob.className = "field-knob"),
                (i.__field_knob_border = "2px solid "),
                (i.__hue_knob = document.createElement("div")),
                (i.__hue_knob.className = "hue-knob"),
                (i.__hue_field = document.createElement("div")),
                (i.__hue_field.className = "hue-field"),
                (i.__input = document.createElement("input")),
                (i.__input.type = "text"),
                (i.__input_textShadow = "0 1px 1px "),
                T.bind(i.__input, "keydown", function (t) {
                  13 === t.keyCode && p.call(this);
                }),
                T.bind(i.__input, "blur", p),
                T.bind(i.__selector, "mousedown", function () {
                  T.addClass(this, "drag").bind(window, "mouseup", function () {
                    T.removeClass(r.__selector, "drag");
                  });
                }),
                T.bind(i.__selector, "touchstart", function () {
                  T.addClass(this, "drag").bind(
                    window,
                    "touchend",
                    function () {
                      T.removeClass(r.__selector, "drag");
                    }
                  );
                });
              var o,
                a = document.createElement("div");
              function l(t) {
                g(t),
                  T.bind(window, "mousemove", g),
                  T.bind(window, "touchmove", g),
                  T.bind(window, "mouseup", h),
                  T.bind(window, "touchend", h);
              }
              function c(t) {
                v(t),
                  T.bind(window, "mousemove", v),
                  T.bind(window, "touchmove", v),
                  T.bind(window, "mouseup", d),
                  T.bind(window, "touchend", d);
              }
              function h() {
                T.unbind(window, "mousemove", g),
                  T.unbind(window, "touchmove", g),
                  T.unbind(window, "mouseup", h),
                  T.unbind(window, "touchend", h),
                  m();
              }
              function d() {
                T.unbind(window, "mousemove", v),
                  T.unbind(window, "touchmove", v),
                  T.unbind(window, "mouseup", d),
                  T.unbind(window, "touchend", d),
                  m();
              }
              function p() {
                var t = u(this.value);
                !1 !== t
                  ? ((r.__color.__state = t),
                    r.setValue(r.__color.toOriginal()))
                  : (this.value = r.__color.toString());
              }
              function m() {
                r.__onFinishChange &&
                  r.__onFinishChange.call(r, r.__color.toOriginal());
              }
              function g(t) {
                -1 === t.type.indexOf("touch") && t.preventDefault();
                var e = r.__saturation_field.getBoundingClientRect(),
                  n = (t.touches && t.touches[0]) || t,
                  i = n.clientX,
                  o = n.clientY,
                  s = (i - e.left) / (e.right - e.left),
                  a = 1 - (o - e.top) / (e.bottom - e.top);
                return (
                  a > 1 ? (a = 1) : a < 0 && (a = 0),
                  s > 1 ? (s = 1) : s < 0 && (s = 0),
                  (r.__color.v = a),
                  (r.__color.s = s),
                  r.setValue(r.__color.toOriginal()),
                  !1
                );
              }
              function v(t) {
                -1 === t.type.indexOf("touch") && t.preventDefault();
                var e = r.__hue_field.getBoundingClientRect(),
                  n =
                    1 -
                    (((t.touches && t.touches[0]) || t).clientY - e.top) /
                      (e.bottom - e.top);
                return (
                  n > 1 ? (n = 1) : n < 0 && (n = 0),
                  (r.__color.h = 360 * n),
                  r.setValue(r.__color.toOriginal()),
                  !1
                );
              }
              return (
                s.extend(i.__selector.style, {
                  width: "122px",
                  height: "102px",
                  padding: "3px",
                  backgroundColor: "#222",
                  boxShadow: "0px 1px 3px rgba(0,0,0,0.3)",
                }),
                s.extend(i.__field_knob.style, {
                  position: "absolute",
                  width: "12px",
                  height: "12px",
                  border:
                    i.__field_knob_border +
                    (i.__color.v < 0.5 ? "#fff" : "#000"),
                  boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                  borderRadius: "12px",
                  zIndex: 1,
                }),
                s.extend(i.__hue_knob.style, {
                  position: "absolute",
                  width: "15px",
                  height: "2px",
                  borderRight: "4px solid #fff",
                  zIndex: 1,
                }),
                s.extend(i.__saturation_field.style, {
                  width: "100px",
                  height: "100px",
                  border: "1px solid #555",
                  marginRight: "3px",
                  display: "inline-block",
                  cursor: "pointer",
                }),
                s.extend(a.style, {
                  width: "100%",
                  height: "100%",
                  background: "none",
                }),
                F(a, "top", "rgba(0,0,0,0)", "#000"),
                s.extend(i.__hue_field.style, {
                  width: "15px",
                  height: "100px",
                  border: "1px solid #555",
                  cursor: "ns-resize",
                  position: "absolute",
                  top: "3px",
                  right: "3px",
                }),
                ((o = i.__hue_field).style.background = ""),
                (o.style.cssText +=
                  "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"),
                (o.style.cssText +=
                  "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                (o.style.cssText +=
                  "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                (o.style.cssText +=
                  "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                (o.style.cssText +=
                  "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
                s.extend(i.__input.style, {
                  outline: "none",
                  textAlign: "center",
                  color: "#fff",
                  border: 0,
                  fontWeight: "bold",
                  textShadow: i.__input_textShadow + "rgba(0,0,0,0.7)",
                }),
                T.bind(i.__saturation_field, "mousedown", l),
                T.bind(i.__saturation_field, "touchstart", l),
                T.bind(i.__field_knob, "mousedown", l),
                T.bind(i.__field_knob, "touchstart", l),
                T.bind(i.__hue_field, "mousedown", c),
                T.bind(i.__hue_field, "touchstart", c),
                i.__saturation_field.appendChild(a),
                i.__selector.appendChild(i.__field_knob),
                i.__selector.appendChild(i.__saturation_field),
                i.__selector.appendChild(i.__hue_field),
                i.__hue_field.appendChild(i.__hue_knob),
                i.domElement.appendChild(i.__input),
                i.domElement.appendChild(i.__selector),
                i.updateDisplay(),
                i
              );
            }
            return (
              v(e, t),
              m(e, [
                {
                  key: "updateDisplay",
                  value: function () {
                    var t = u(this.getValue());
                    if (!1 !== t) {
                      var e = !1;
                      s.each(
                        x.COMPONENTS,
                        function (n) {
                          if (
                            !s.isUndefined(t[n]) &&
                            !s.isUndefined(this.__color.__state[n]) &&
                            t[n] !== this.__color.__state[n]
                          )
                            return (e = !0), {};
                        },
                        this
                      ),
                        e && s.extend(this.__color.__state, t);
                    }
                    s.extend(this.__temp.__state, this.__color.__state),
                      (this.__temp.a = 1);
                    var n =
                        this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0,
                      i = 255 - n;
                    s.extend(this.__field_knob.style, {
                      marginLeft: 100 * this.__color.s - 7 + "px",
                      marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                      backgroundColor: this.__temp.toHexString(),
                      border:
                        this.__field_knob_border +
                        "rgb(" +
                        n +
                        "," +
                        n +
                        "," +
                        n +
                        ")",
                    }),
                      (this.__hue_knob.style.marginTop =
                        100 * (1 - this.__color.h / 360) + "px"),
                      (this.__temp.s = 1),
                      (this.__temp.v = 1),
                      F(
                        this.__saturation_field,
                        "left",
                        "#fff",
                        this.__temp.toHexString()
                      ),
                      (this.__input.value = this.__color.toString()),
                      s.extend(this.__input.style, {
                        backgroundColor: this.__color.toHexString(),
                        color: "rgb(" + n + "," + n + "," + n + ")",
                        textShadow:
                          this.__input_textShadow +
                          "rgba(" +
                          i +
                          "," +
                          i +
                          "," +
                          i +
                          ",.7)",
                      });
                  },
                },
              ]),
              e
            );
          })(w),
          N = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
        function F(t, e, n, i) {
          (t.style.background = ""),
            s.each(N, function (r) {
              t.style.cssText +=
                "background: " +
                r +
                "linear-gradient(" +
                e +
                ", " +
                n +
                " 0%, " +
                i +
                " 100%); ";
            });
        }
        var z =
            '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',
          H = function (t, e) {
            var n = t[e];
            return s.isArray(arguments[2]) || s.isObject(arguments[2])
              ? new C(t, e, arguments[2])
              : s.isNumber(n)
              ? s.isNumber(arguments[2]) && s.isNumber(arguments[3])
                ? s.isNumber(arguments[4])
                  ? new I(t, e, arguments[2], arguments[3], arguments[4])
                  : new I(t, e, arguments[2], arguments[3])
                : s.isNumber(arguments[4])
                ? new O(t, e, {
                    min: arguments[2],
                    max: arguments[3],
                    step: arguments[4],
                  })
                : new O(t, e, { min: arguments[2], max: arguments[3] })
              : s.isString(n)
              ? new L(t, e)
              : s.isFunction(n)
              ? new D(t, e, "")
              : s.isBoolean(n)
              ? new A(t, e)
              : null;
          },
          j =
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function (t) {
              setTimeout(t, 1e3 / 60);
            },
          U = (function () {
            function t() {
              f(this, t),
                (this.backgroundElement = document.createElement("div")),
                s.extend(this.backgroundElement.style, {
                  backgroundColor: "rgba(0,0,0,0.8)",
                  top: 0,
                  left: 0,
                  display: "none",
                  zIndex: "1000",
                  opacity: 0,
                  WebkitTransition: "opacity 0.2s linear",
                  transition: "opacity 0.2s linear",
                }),
                T.makeFullscreen(this.backgroundElement),
                (this.backgroundElement.style.position = "fixed"),
                (this.domElement = document.createElement("div")),
                s.extend(this.domElement.style, {
                  position: "fixed",
                  display: "none",
                  zIndex: "1001",
                  opacity: 0,
                  WebkitTransition:
                    "-webkit-transform 0.2s ease-out, opacity 0.2s linear",
                  transition: "transform 0.2s ease-out, opacity 0.2s linear",
                }),
                document.body.appendChild(this.backgroundElement),
                document.body.appendChild(this.domElement);
              var e = this;
              T.bind(this.backgroundElement, "click", function () {
                e.hide();
              });
            }
            return (
              m(t, [
                {
                  key: "show",
                  value: function () {
                    var t = this;
                    (this.backgroundElement.style.display = "block"),
                      (this.domElement.style.display = "block"),
                      (this.domElement.style.opacity = 0),
                      (this.domElement.style.webkitTransform = "scale(1.1)"),
                      this.layout(),
                      s.defer(function () {
                        (t.backgroundElement.style.opacity = 1),
                          (t.domElement.style.opacity = 1),
                          (t.domElement.style.webkitTransform = "scale(1)");
                      });
                  },
                },
                {
                  key: "hide",
                  value: function () {
                    var t = this,
                      e = function e() {
                        (t.domElement.style.display = "none"),
                          (t.backgroundElement.style.display = "none"),
                          T.unbind(t.domElement, "webkitTransitionEnd", e),
                          T.unbind(t.domElement, "transitionend", e),
                          T.unbind(t.domElement, "oTransitionEnd", e);
                      };
                    T.bind(this.domElement, "webkitTransitionEnd", e),
                      T.bind(this.domElement, "transitionend", e),
                      T.bind(this.domElement, "oTransitionEnd", e),
                      (this.backgroundElement.style.opacity = 0),
                      (this.domElement.style.opacity = 0),
                      (this.domElement.style.webkitTransform = "scale(1.1)");
                  },
                },
                {
                  key: "layout",
                  value: function () {
                    (this.domElement.style.left =
                      window.innerWidth / 2 -
                      T.getWidth(this.domElement) / 2 +
                      "px"),
                      (this.domElement.style.top =
                        window.innerHeight / 2 -
                        T.getHeight(this.domElement) / 2 +
                        "px");
                  },
                },
              ]),
              t
            );
          })();
        !(function (t, e) {
          var n = e || document,
            i = document.createElement("style");
          (i.type = "text/css"), (i.innerHTML = t);
          var r = n.getElementsByTagName("head")[0];
          try {
            r.appendChild(i);
          } catch (t) {}
        })(
          (function (t) {
            if ("undefined" != typeof window) {
              var e = document.createElement("style");
              return (
                e.setAttribute("type", "text/css"),
                (e.innerHTML = t),
                document.head.appendChild(e),
                t
              );
            }
          })(
            ".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"
          )
        );
        var V = "Default",
          G = (function () {
            try {
              return !!window.localStorage;
            } catch (t) {
              return !1;
            }
          })(),
          W = void 0,
          q = !0,
          X = void 0,
          Y = !1,
          $ = [],
          K = function t(e) {
            var n = this,
              i = e || {};
            (this.domElement = document.createElement("div")),
              (this.__ul = document.createElement("ul")),
              this.domElement.appendChild(this.__ul),
              T.addClass(this.domElement, "dg"),
              (this.__folders = {}),
              (this.__controllers = []),
              (this.__rememberedObjects = []),
              (this.__rememberedObjectIndecesToControllers = []),
              (this.__listening = []),
              (i = s.defaults(i, {
                closeOnTop: !1,
                autoPlace: !0,
                width: t.DEFAULT_WIDTH,
              })),
              (i = s.defaults(i, {
                resizable: i.autoPlace,
                hideable: i.autoPlace,
              })),
              s.isUndefined(i.load)
                ? (i.load = { preset: V })
                : i.preset && (i.load.preset = i.preset),
              s.isUndefined(i.parent) && i.hideable && $.push(this),
              (i.resizable = s.isUndefined(i.parent) && i.resizable),
              i.autoPlace && s.isUndefined(i.scrollable) && (i.scrollable = !0);
            var r,
              o = G && "true" === localStorage.getItem(nt(0, "isLocal")),
              a = void 0,
              l = void 0;
            if (
              (Object.defineProperties(this, {
                parent: {
                  get: function () {
                    return i.parent;
                  },
                },
                scrollable: {
                  get: function () {
                    return i.scrollable;
                  },
                },
                autoPlace: {
                  get: function () {
                    return i.autoPlace;
                  },
                },
                closeOnTop: {
                  get: function () {
                    return i.closeOnTop;
                  },
                },
                preset: {
                  get: function () {
                    return n.parent ? n.getRoot().preset : i.load.preset;
                  },
                  set: function (t) {
                    n.parent ? (n.getRoot().preset = t) : (i.load.preset = t),
                      (function (t) {
                        for (var e = 0; e < t.__preset_select.length; e++)
                          t.__preset_select[e].value === t.preset &&
                            (t.__preset_select.selectedIndex = e);
                      })(this),
                      n.revert();
                  },
                },
                width: {
                  get: function () {
                    return i.width;
                  },
                  set: function (t) {
                    (i.width = t), at(n, t);
                  },
                },
                name: {
                  get: function () {
                    return i.name;
                  },
                  set: function (t) {
                    (i.name = t), l && (l.innerHTML = i.name);
                  },
                },
                closed: {
                  get: function () {
                    return i.closed;
                  },
                  set: function (e) {
                    (i.closed = e),
                      i.closed
                        ? T.addClass(n.__ul, t.CLASS_CLOSED)
                        : T.removeClass(n.__ul, t.CLASS_CLOSED),
                      this.onResize(),
                      n.__closeButton &&
                        (n.__closeButton.innerHTML = e
                          ? t.TEXT_OPEN
                          : t.TEXT_CLOSED);
                  },
                },
                load: {
                  get: function () {
                    return i.load;
                  },
                },
                useLocalStorage: {
                  get: function () {
                    return o;
                  },
                  set: function (t) {
                    G &&
                      ((o = t),
                      t
                        ? T.bind(window, "unload", a)
                        : T.unbind(window, "unload", a),
                      localStorage.setItem(nt(0, "isLocal"), t));
                  },
                },
              }),
              s.isUndefined(i.parent))
            ) {
              if (
                ((this.closed = i.closed || !1),
                T.addClass(this.domElement, t.CLASS_MAIN),
                T.makeSelectable(this.domElement, !1),
                G && o)
              ) {
                n.useLocalStorage = !0;
                var c = localStorage.getItem(nt(0, "gui"));
                c && (i.load = JSON.parse(c));
              }
              (this.__closeButton = document.createElement("div")),
                (this.__closeButton.innerHTML = t.TEXT_CLOSED),
                T.addClass(this.__closeButton, t.CLASS_CLOSE_BUTTON),
                i.closeOnTop
                  ? (T.addClass(this.__closeButton, t.CLASS_CLOSE_TOP),
                    this.domElement.insertBefore(
                      this.__closeButton,
                      this.domElement.childNodes[0]
                    ))
                  : (T.addClass(this.__closeButton, t.CLASS_CLOSE_BOTTOM),
                    this.domElement.appendChild(this.__closeButton)),
                T.bind(this.__closeButton, "click", function () {
                  n.closed = !n.closed;
                });
            } else {
              void 0 === i.closed && (i.closed = !0);
              var u = document.createTextNode(i.name);
              T.addClass(u, "controller-name"),
                (l = J(n, u)),
                T.addClass(this.__ul, t.CLASS_CLOSED),
                T.addClass(l, "title"),
                T.bind(l, "click", function (t) {
                  return t.preventDefault(), (n.closed = !n.closed), !1;
                }),
                i.closed || (this.closed = !1);
            }
            i.autoPlace &&
              (s.isUndefined(i.parent) &&
                (q &&
                  ((X = document.createElement("div")),
                  T.addClass(X, "dg"),
                  T.addClass(X, t.CLASS_AUTO_PLACE_CONTAINER),
                  document.body.appendChild(X),
                  (q = !1)),
                X.appendChild(this.domElement),
                T.addClass(this.domElement, t.CLASS_AUTO_PLACE)),
              this.parent || at(n, i.width)),
              (this.__resizeHandler = function () {
                n.onResizeDebounced();
              }),
              T.bind(window, "resize", this.__resizeHandler),
              T.bind(this.__ul, "webkitTransitionEnd", this.__resizeHandler),
              T.bind(this.__ul, "transitionend", this.__resizeHandler),
              T.bind(this.__ul, "oTransitionEnd", this.__resizeHandler),
              this.onResize(),
              i.resizable && st(this),
              (a = function () {
                G &&
                  "true" === localStorage.getItem(nt(0, "isLocal")) &&
                  localStorage.setItem(
                    nt(0, "gui"),
                    JSON.stringify(n.getSaveObject())
                  );
              }),
              (this.saveToLocalStorageIfPossible = a),
              i.parent ||
                (((r = n.getRoot()).width += 1),
                s.defer(function () {
                  r.width -= 1;
                }));
          };
        function J(t, e, n) {
          var i = document.createElement("li");
          return (
            e && i.appendChild(e),
            n ? t.__ul.insertBefore(i, n) : t.__ul.appendChild(i),
            t.onResize(),
            i
          );
        }
        function Z(t) {
          T.unbind(window, "resize", t.__resizeHandler),
            t.saveToLocalStorageIfPossible &&
              T.unbind(window, "unload", t.saveToLocalStorageIfPossible);
        }
        function Q(t, e) {
          var n = t.__preset_select[t.__preset_select.selectedIndex];
          n.innerHTML = e ? n.value + "*" : n.value;
        }
        function tt(t, e) {
          var n = t.getRoot(),
            i = n.__rememberedObjects.indexOf(e.object);
          if (-1 !== i) {
            var r = n.__rememberedObjectIndecesToControllers[i];
            if (
              (void 0 === r &&
                ((r = {}), (n.__rememberedObjectIndecesToControllers[i] = r)),
              (r[e.property] = e),
              n.load && n.load.remembered)
            ) {
              var o = n.load.remembered,
                s = void 0;
              if (o[t.preset]) s = o[t.preset];
              else {
                if (!o.Default) return;
                s = o.Default;
              }
              if (s[i] && void 0 !== s[i][e.property]) {
                var a = s[i][e.property];
                (e.initialValue = a), e.setValue(a);
              }
            }
          }
        }
        function et(t, e, n, i) {
          if (void 0 === e[n])
            throw new Error('Object "' + e + '" has no property "' + n + '"');
          var r = void 0;
          if (i.color) r = new B(e, n);
          else {
            var o = [e, n].concat(i.factoryArgs);
            r = H.apply(t, o);
          }
          i.before instanceof w && (i.before = i.before.__li),
            tt(t, r),
            T.addClass(r.domElement, "c");
          var a = document.createElement("span");
          T.addClass(a, "property-name"), (a.innerHTML = r.property);
          var l = document.createElement("div");
          l.appendChild(a), l.appendChild(r.domElement);
          var c = J(t, l, i.before);
          return (
            T.addClass(c, K.CLASS_CONTROLLER_ROW),
            r instanceof B
              ? T.addClass(c, "color")
              : T.addClass(c, p(r.getValue())),
            (function (t, e, n) {
              if (
                ((n.__li = e),
                (n.__gui = t),
                s.extend(n, {
                  options: function (e) {
                    if (arguments.length > 1) {
                      var i = n.__li.nextElementSibling;
                      return (
                        n.remove(),
                        et(t, n.object, n.property, {
                          before: i,
                          factoryArgs: [s.toArray(arguments)],
                        })
                      );
                    }
                    if (s.isArray(e) || s.isObject(e)) {
                      var r = n.__li.nextElementSibling;
                      return (
                        n.remove(),
                        et(t, n.object, n.property, {
                          before: r,
                          factoryArgs: [e],
                        })
                      );
                    }
                  },
                  name: function (t) {
                    return (
                      (n.__li.firstElementChild.firstElementChild.innerHTML =
                        t),
                      n
                    );
                  },
                  listen: function () {
                    return n.__gui.listen(n), n;
                  },
                  remove: function () {
                    return n.__gui.remove(n), n;
                  },
                }),
                n instanceof I)
              ) {
                var i = new O(n.object, n.property, {
                  min: n.__min,
                  max: n.__max,
                  step: n.__step,
                });
                s.each(
                  [
                    "updateDisplay",
                    "onChange",
                    "onFinishChange",
                    "step",
                    "min",
                    "max",
                  ],
                  function (t) {
                    var e = n[t],
                      r = i[t];
                    n[t] = i[t] = function () {
                      var t = Array.prototype.slice.call(arguments);
                      return r.apply(i, t), e.apply(n, t);
                    };
                  }
                ),
                  T.addClass(e, "has-slider"),
                  n.domElement.insertBefore(
                    i.domElement,
                    n.domElement.firstElementChild
                  );
              } else if (n instanceof O) {
                var r = function (e) {
                  if (s.isNumber(n.__min) && s.isNumber(n.__max)) {
                    var i =
                        n.__li.firstElementChild.firstElementChild.innerHTML,
                      r = n.__gui.__listening.indexOf(n) > -1;
                    n.remove();
                    var o = et(t, n.object, n.property, {
                      before: n.__li.nextElementSibling,
                      factoryArgs: [n.__min, n.__max, n.__step],
                    });
                    return o.name(i), r && o.listen(), o;
                  }
                  return e;
                };
                (n.min = s.compose(r, n.min)), (n.max = s.compose(r, n.max));
              } else
                n instanceof A
                  ? (T.bind(e, "click", function () {
                      T.fakeEvent(n.__checkbox, "click");
                    }),
                    T.bind(n.__checkbox, "click", function (t) {
                      t.stopPropagation();
                    }))
                  : n instanceof D
                  ? (T.bind(e, "click", function () {
                      T.fakeEvent(n.__button, "click");
                    }),
                    T.bind(e, "mouseover", function () {
                      T.addClass(n.__button, "hover");
                    }),
                    T.bind(e, "mouseout", function () {
                      T.removeClass(n.__button, "hover");
                    }))
                  : n instanceof B &&
                    (T.addClass(e, "color"),
                    (n.updateDisplay = s.compose(function (t) {
                      return (
                        (e.style.borderLeftColor = n.__color.toString()), t
                      );
                    }, n.updateDisplay)),
                    n.updateDisplay());
              n.setValue = s.compose(function (e) {
                return (
                  t.getRoot().__preset_select &&
                    n.isModified() &&
                    Q(t.getRoot(), !0),
                  e
                );
              }, n.setValue);
            })(t, c, r),
            t.__controllers.push(r),
            r
          );
        }
        function nt(t, e) {
          return document.location.href + "." + e;
        }
        function it(t, e, n) {
          var i = document.createElement("option");
          (i.innerHTML = e),
            (i.value = e),
            t.__preset_select.appendChild(i),
            n &&
              (t.__preset_select.selectedIndex = t.__preset_select.length - 1);
        }
        function rt(t, e) {
          e.style.display = t.useLocalStorage ? "block" : "none";
        }
        function ot(t) {
          var e = (t.__save_row = document.createElement("li"));
          T.addClass(t.domElement, "has-save"),
            t.__ul.insertBefore(e, t.__ul.firstChild),
            T.addClass(e, "save-row");
          var n = document.createElement("span");
          (n.innerHTML = "&nbsp;"), T.addClass(n, "button gears");
          var i = document.createElement("span");
          (i.innerHTML = "Save"),
            T.addClass(i, "button"),
            T.addClass(i, "save");
          var r = document.createElement("span");
          (r.innerHTML = "New"),
            T.addClass(r, "button"),
            T.addClass(r, "save-as");
          var o = document.createElement("span");
          (o.innerHTML = "Revert"),
            T.addClass(o, "button"),
            T.addClass(o, "revert");
          var a = (t.__preset_select = document.createElement("select"));
          if (
            (t.load && t.load.remembered
              ? s.each(t.load.remembered, function (e, n) {
                  it(t, n, n === t.preset);
                })
              : it(t, V, !1),
            T.bind(a, "change", function () {
              for (var e = 0; e < t.__preset_select.length; e++)
                t.__preset_select[e].innerHTML = t.__preset_select[e].value;
              t.preset = this.value;
            }),
            e.appendChild(a),
            e.appendChild(n),
            e.appendChild(i),
            e.appendChild(r),
            e.appendChild(o),
            G)
          ) {
            var l = document.getElementById("dg-local-explain"),
              c = document.getElementById("dg-local-storage");
            (document.getElementById("dg-save-locally").style.display =
              "block"),
              "true" === localStorage.getItem(nt(0, "isLocal")) &&
                c.setAttribute("checked", "checked"),
              rt(t, l),
              T.bind(c, "change", function () {
                (t.useLocalStorage = !t.useLocalStorage), rt(t, l);
              });
          }
          var u = document.getElementById("dg-new-constructor");
          T.bind(u, "keydown", function (t) {
            !t.metaKey || (67 !== t.which && 67 !== t.keyCode) || W.hide();
          }),
            T.bind(n, "click", function () {
              (u.innerHTML = JSON.stringify(t.getSaveObject(), void 0, 2)),
                W.show(),
                u.focus(),
                u.select();
            }),
            T.bind(i, "click", function () {
              t.save();
            }),
            T.bind(r, "click", function () {
              var e = prompt("Enter a new preset name.");
              e && t.saveAs(e);
            }),
            T.bind(o, "click", function () {
              t.revert();
            });
        }
        function st(t) {
          var e = void 0;
          function n(n) {
            return (
              n.preventDefault(),
              (t.width += e - n.clientX),
              t.onResize(),
              (e = n.clientX),
              !1
            );
          }
          function i() {
            T.removeClass(t.__closeButton, K.CLASS_DRAG),
              T.unbind(window, "mousemove", n),
              T.unbind(window, "mouseup", i);
          }
          function r(r) {
            return (
              r.preventDefault(),
              (e = r.clientX),
              T.addClass(t.__closeButton, K.CLASS_DRAG),
              T.bind(window, "mousemove", n),
              T.bind(window, "mouseup", i),
              !1
            );
          }
          (t.__resize_handle = document.createElement("div")),
            s.extend(t.__resize_handle.style, {
              width: "6px",
              marginLeft: "-3px",
              height: "200px",
              cursor: "ew-resize",
              position: "absolute",
            }),
            T.bind(t.__resize_handle, "mousedown", r),
            T.bind(t.__closeButton, "mousedown", r),
            t.domElement.insertBefore(
              t.__resize_handle,
              t.domElement.firstElementChild
            );
        }
        function at(t, e) {
          (t.domElement.style.width = e + "px"),
            t.__save_row &&
              t.autoPlace &&
              (t.__save_row.style.width = e + "px"),
            t.__closeButton && (t.__closeButton.style.width = e + "px");
        }
        function lt(t, e) {
          var n = {};
          return (
            s.each(t.__rememberedObjects, function (i, r) {
              var o = {},
                a = t.__rememberedObjectIndecesToControllers[r];
              s.each(a, function (t, n) {
                o[n] = e ? t.initialValue : t.getValue();
              }),
                (n[r] = o);
            }),
            n
          );
        }
        function ct(t) {
          0 !== t.length &&
            j.call(window, function () {
              ct(t);
            }),
            s.each(t, function (t) {
              t.updateDisplay();
            });
        }
        (K.toggleHide = function () {
          (Y = !Y),
            s.each($, function (t) {
              t.domElement.style.display = Y ? "none" : "";
            });
        }),
          (K.CLASS_AUTO_PLACE = "a"),
          (K.CLASS_AUTO_PLACE_CONTAINER = "ac"),
          (K.CLASS_MAIN = "main"),
          (K.CLASS_CONTROLLER_ROW = "cr"),
          (K.CLASS_TOO_TALL = "taller-than-window"),
          (K.CLASS_CLOSED = "closed"),
          (K.CLASS_CLOSE_BUTTON = "close-button"),
          (K.CLASS_CLOSE_TOP = "close-top"),
          (K.CLASS_CLOSE_BOTTOM = "close-bottom"),
          (K.CLASS_DRAG = "drag"),
          (K.DEFAULT_WIDTH = 245),
          (K.TEXT_CLOSED = "Close Controls"),
          (K.TEXT_OPEN = "Open Controls"),
          (K._keydownHandler = function (t) {
            "text" === document.activeElement.type ||
              (72 !== t.which && 72 !== t.keyCode) ||
              K.toggleHide();
          }),
          T.bind(window, "keydown", K._keydownHandler, !1),
          s.extend(K.prototype, {
            add: function (t, e) {
              return et(this, t, e, {
                factoryArgs: Array.prototype.slice.call(arguments, 2),
              });
            },
            addColor: function (t, e) {
              return et(this, t, e, { color: !0 });
            },
            remove: function (t) {
              this.__ul.removeChild(t.__li),
                this.__controllers.splice(this.__controllers.indexOf(t), 1);
              var e = this;
              s.defer(function () {
                e.onResize();
              });
            },
            destroy: function () {
              if (this.parent)
                throw new Error(
                  "Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead."
                );
              this.autoPlace && X.removeChild(this.domElement);
              var t = this;
              s.each(this.__folders, function (e) {
                t.removeFolder(e);
              }),
                T.unbind(window, "keydown", K._keydownHandler, !1),
                Z(this);
            },
            addFolder: function (t) {
              if (void 0 !== this.__folders[t])
                throw new Error(
                  'You already have a folder in this GUI by the name "' +
                    t +
                    '"'
                );
              var e = { name: t, parent: this };
              (e.autoPlace = this.autoPlace),
                this.load &&
                  this.load.folders &&
                  this.load.folders[t] &&
                  ((e.closed = this.load.folders[t].closed),
                  (e.load = this.load.folders[t]));
              var n = new K(e);
              this.__folders[t] = n;
              var i = J(this, n.domElement);
              return T.addClass(i, "folder"), n;
            },
            removeFolder: function (t) {
              this.__ul.removeChild(t.domElement.parentElement),
                delete this.__folders[t.name],
                this.load &&
                  this.load.folders &&
                  this.load.folders[t.name] &&
                  delete this.load.folders[t.name],
                Z(t);
              var e = this;
              s.each(t.__folders, function (e) {
                t.removeFolder(e);
              }),
                s.defer(function () {
                  e.onResize();
                });
            },
            open: function () {
              this.closed = !1;
            },
            close: function () {
              this.closed = !0;
            },
            hide: function () {
              this.domElement.style.display = "none";
            },
            show: function () {
              this.domElement.style.display = "";
            },
            onResize: function () {
              var t = this.getRoot();
              if (t.scrollable) {
                var e = T.getOffset(t.__ul).top,
                  n = 0;
                s.each(t.__ul.childNodes, function (e) {
                  (t.autoPlace && e === t.__save_row) || (n += T.getHeight(e));
                }),
                  window.innerHeight - e - 20 < n
                    ? (T.addClass(t.domElement, K.CLASS_TOO_TALL),
                      (t.__ul.style.height =
                        window.innerHeight - e - 20 + "px"))
                    : (T.removeClass(t.domElement, K.CLASS_TOO_TALL),
                      (t.__ul.style.height = "auto"));
              }
              t.__resize_handle &&
                s.defer(function () {
                  t.__resize_handle.style.height = t.__ul.offsetHeight + "px";
                }),
                t.__closeButton &&
                  (t.__closeButton.style.width = t.width + "px");
            },
            onResizeDebounced: s.debounce(function () {
              this.onResize();
            }, 50),
            remember: function () {
              if (
                (s.isUndefined(W) && ((W = new U()).domElement.innerHTML = z),
                this.parent)
              )
                throw new Error(
                  "You can only call remember on a top level GUI."
                );
              var t = this;
              s.each(Array.prototype.slice.call(arguments), function (e) {
                0 === t.__rememberedObjects.length && ot(t),
                  -1 === t.__rememberedObjects.indexOf(e) &&
                    t.__rememberedObjects.push(e);
              }),
                this.autoPlace && at(this, this.width);
            },
            getRoot: function () {
              for (var t = this; t.parent; ) t = t.parent;
              return t;
            },
            getSaveObject: function () {
              var t = this.load;
              return (
                (t.closed = this.closed),
                this.__rememberedObjects.length > 0 &&
                  ((t.preset = this.preset),
                  t.remembered || (t.remembered = {}),
                  (t.remembered[this.preset] = lt(this))),
                (t.folders = {}),
                s.each(this.__folders, function (e, n) {
                  t.folders[n] = e.getSaveObject();
                }),
                t
              );
            },
            save: function () {
              this.load.remembered || (this.load.remembered = {}),
                (this.load.remembered[this.preset] = lt(this)),
                Q(this, !1),
                this.saveToLocalStorageIfPossible();
            },
            saveAs: function (t) {
              this.load.remembered ||
                ((this.load.remembered = {}),
                (this.load.remembered.Default = lt(this, !0))),
                (this.load.remembered[t] = lt(this)),
                (this.preset = t),
                it(this, t, !0),
                this.saveToLocalStorageIfPossible();
            },
            revert: function (t) {
              s.each(
                this.__controllers,
                function (e) {
                  this.getRoot().load.remembered
                    ? tt(t || this.getRoot(), e)
                    : e.setValue(e.initialValue),
                    e.__onFinishChange &&
                      e.__onFinishChange.call(e, e.getValue());
                },
                this
              ),
                s.each(this.__folders, function (t) {
                  t.revert(t);
                }),
                t || Q(this.getRoot(), !1);
            },
            listen: function (t) {
              var e = 0 === this.__listening.length;
              this.__listening.push(t), e && ct(this.__listening);
            },
            updateDisplay: function () {
              s.each(this.__controllers, function (t) {
                t.updateDisplay();
              }),
                s.each(this.__folders, function (t) {
                  t.updateDisplay();
                });
            },
          });
        var ut = K;
      },
      31: function () {
        (function () {
          var t,
            e = window,
            n = document,
            i = function (t) {
              return encodeURIComponent
                ? encodeURIComponent(t)
                    .replace(/\(/g, "%28")
                    .replace(/\)/g, "%29")
                : t;
            },
            r = /^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,
            o = /(^|\.)doubleclick\.net$/i;
          function s(t, e) {
            switch (e) {
              case 0:
                return "" + t;
              case 1:
                return 1 * t;
              case 2:
                return !!t;
              case 3:
                return 1e3 * t;
            }
            return t;
          }
          function a(t) {
            return "function" == typeof t;
          }
          function l(t) {
            return null != t && -1 < (t.constructor + "").indexOf("String");
          }
          function c(t, e) {
            return null == t || ("-" == t && !e) || "" == t;
          }
          function u(t) {
            if (!t || "" == t) return "";
            for (; t && -1 < " \n\r\t".indexOf(t.charAt(0)); )
              t = t.substring(1);
            for (; t && -1 < " \n\r\t".indexOf(t.charAt(t.length - 1)); )
              t = t.substring(0, t.length - 1);
            return t;
          }
          function h() {
            return Math.round(2147483647 * Math.random());
          }
          function d() {}
          function p(t, e) {
            return encodeURIComponent instanceof Function
              ? e
                ? encodeURI(t)
                : encodeURIComponent(t)
              : (hn(68), escape(t));
          }
          function f(t) {
            if (
              ((t = t.split("+").join(" ")),
              decodeURIComponent instanceof Function)
            )
              try {
                return decodeURIComponent(t);
              } catch (t) {
                hn(17);
              }
            else hn(68);
            return unescape(t);
          }
          var m = function (t, e, n, i) {
            t.addEventListener
              ? t.addEventListener(e, n, !!i)
              : t.attachEvent && t.attachEvent("on" + e, n);
          };
          function g(t, e) {
            if (t) {
              var n = gn.createElement("script");
              return (
                (n.type = "text/javascript"),
                (n.async = !0),
                (n.src = t),
                (n.id = e),
                (t =
                  gn.getElementsByTagName("script")[0]).parentNode.insertBefore(
                  n,
                  t
                ),
                n
              );
            }
          }
          function v(t) {
            return t && 0 < t.length ? t[0] : "";
          }
          function y(t) {
            var e = t ? t.length : 0;
            return 0 < e ? t[e - 1] : "";
          }
          var x = function () {
            (this.prefix = "ga."), (this.values = {});
          };
          function _(t) {
            return (
              0 == t.indexOf("www.") && (t = t.substring(4)), t.toLowerCase()
            );
          }
          function b(t, e) {
            var n = {
              url: t,
              protocol: "http",
              host: "",
              path: "",
              R: new x(),
              anchor: "",
            };
            if (!t) return n;
            var i = t.indexOf("://");
            return (
              0 <= i &&
                ((n.protocol = t.substring(0, i)), (t = t.substring(i + 3))),
              0 <= (i = t.search("/|\\?|#"))
                ? ((n.host = t.substring(0, i).toLowerCase()),
                  0 <= (i = (t = t.substring(i)).indexOf("#")) &&
                    ((n.anchor = t.substring(i + 1)), (t = t.substring(0, i))),
                  0 <= (i = t.indexOf("?")) &&
                    (M(n.R, t.substring(i + 1)), (t = t.substring(0, i))),
                  n.anchor && e && M(n.R, n.anchor),
                  t && "/" == t.charAt(0) && (t = t.substring(1)),
                  (n.path = t),
                  n)
                : ((n.host = t.toLowerCase()), n)
            );
          }
          function w(t, e) {
            function n(t) {
              var e = (t.hostname || "").split(":")[0].toLowerCase(),
                n = (t.protocol || "").toLowerCase();
              return (
                (n =
                  1 * t.port || ("http:" == n ? 80 : "https:" == n ? 443 : "")),
                0 == (t = t.pathname || "").indexOf("/") || (t = "/" + t),
                [e, "" + n, t]
              );
            }
            (e = e || gn.createElement("a")).href = gn.location.href;
            var i = (e.protocol || "").toLowerCase(),
              r = n(e),
              o = e.search || "",
              s = i + "//" + r[0] + (r[1] ? ":" + r[1] : "");
            return (
              0 == t.indexOf("//")
                ? (t = i + t)
                : 0 == t.indexOf("/")
                ? (t = s + t)
                : t && 0 != t.indexOf("?")
                ? 0 > t.split("/")[0].indexOf(":") &&
                  (t = s + r[2].substring(0, r[2].lastIndexOf("/")) + "/" + t)
                : (t = s + r[2] + (t || o)),
              (e.href = t),
              (i = n(e)),
              {
                protocol: (e.protocol || "").toLowerCase(),
                host: i[0],
                port: i[1],
                path: i[2],
                query: e.search || "",
                url: t || "",
              }
            );
          }
          function M(t, e) {
            function n(e, n) {
              t.contains(e) || t.set(e, []), t.get(e).push(n);
            }
            e = u(e).split("&");
            for (var i = 0; i < e.length; i++)
              if (e[i]) {
                var r = e[i].indexOf("=");
                0 > r
                  ? n(e[i], "1")
                  : n(e[i].substring(0, r), e[i].substring(r + 1));
              }
          }
          function S(t, e) {
            return c(t) || ("[" == t.charAt(0) && "]" == t.charAt(t.length - 1))
              ? "-"
              : t.indexOf(gn.domain + (e && "/" != e ? e : "")) ==
                (0 == t.indexOf("http://")
                  ? 7
                  : 0 == t.indexOf("https://")
                  ? 8
                  : 0)
              ? "0"
              : t;
          }
          (x.prototype.set = function (t, e) {
            this.values[this.prefix + t] = e;
          }),
            (x.prototype.get = function (t) {
              return this.values[this.prefix + t];
            }),
            (x.prototype.contains = function (t) {
              return void 0 !== this.get(t);
            });
          var E = 0;
          function T(t, e, n) {
            1 <= E ||
              1 <= 100 * Math.random() ||
              vn() ||
              ((t = [
                "utmt=error",
                "utmerr=" + t,
                "utmwv=5.7.2",
                "utmn=" + h(),
                "utmsp=1",
              ]),
              e && t.push("api=" + e),
              n && t.push("msg=" + p(n.substring(0, 100))),
              er.w && t.push("aip=1"),
              Yi(t.join("&")),
              E++);
          }
          var A = 0,
            C = {};
          function L(t) {
            return R("x" + A++, t);
          }
          function R(t, e) {
            return (C[t] = !!e), t;
          }
          var P = L(),
            O = R("anonymizeIp"),
            k = L(),
            I = L(),
            D = L(),
            B = L(),
            N = L(),
            F = L(),
            z = L(),
            H = L(),
            j = L(),
            U = L(),
            V = L(),
            G = L(),
            W = L(),
            q = L(),
            X = L(),
            Y = L(),
            $ = L(),
            K = L(),
            J = L(),
            Z = L(),
            Q = L(),
            tt = L(),
            et = L(),
            nt = L(),
            it = L(),
            rt = L(),
            ot = L(),
            st = L(),
            at = L(),
            lt = L(),
            ct = L(),
            ut = L(),
            ht = L(),
            dt = L(),
            pt = L(!0),
            ft = R("currencyCode"),
            mt = R("storeGac"),
            gt = R("page"),
            vt = R("title"),
            yt = L(),
            xt = L(),
            _t = L(),
            bt = L(),
            wt = L(),
            Mt = L(),
            St = L(),
            Et = L(),
            Tt = L(),
            At = L(!0),
            Ct = L(!0),
            Lt = L(!0),
            Rt = L(!0),
            Pt = L(!0),
            Ot = L(!0),
            kt = L(!0),
            It = L(!0),
            Dt = L(!0),
            Bt = L(!0),
            Nt = L(!0),
            Ft = L(!0),
            zt = L(!0),
            Ht = L(!0),
            jt = L(!0),
            Ut = L(!0),
            Vt = L(!0),
            Gt = L(!0),
            Wt = L(!0),
            qt = L(!0),
            Xt = L(!0),
            Yt = L(!0),
            $t = L(!0),
            Kt = L(!0),
            Jt = L(!0),
            Zt = L(!0),
            Qt = L(!0),
            te = R("campaignParams"),
            ee = L(),
            ne = R("hitCallback"),
            ie = L();
          L();
          var re = L(),
            oe = L(),
            se = L(),
            ae = L(),
            le = L(),
            ce = L(),
            ue = L(),
            he = L(),
            de = L(),
            pe = L(),
            fe = L(),
            me = L(),
            ge = L(),
            ve = L();
          L();
          var ye = L(),
            xe = L(),
            _e = L(),
            be = L(),
            we = L(),
            Me = R("utmtCookieName"),
            Se = R("displayFeatures"),
            Ee = L(),
            Te = R("gtmid"),
            Ae = R("uaName"),
            Ce = R("uaDomain"),
            Le = R("uaPath"),
            Re = R("linkid"),
            Pe = L(),
            Oe = L(),
            ke = L(),
            Ie = L();
          function De(t) {
            var e = this.plugins_;
            if (e) return e.get(t);
          }
          var Be = function (t, e, n, i) {
              t[e] = function () {
                try {
                  return null != i && hn(i), n.apply(this, arguments);
                } catch (t) {
                  throw (T("exc", e, t && t.name), t);
                }
              };
            },
            Ne = function (t, e, n, i) {
              Li.prototype[t] = function () {
                try {
                  return hn(n), s(this.a.get(e), i);
                } catch (e) {
                  throw (T("exc", t, e && e.name), e);
                }
              };
            },
            Fe = function (t, e, n, i, r) {
              Li.prototype[t] = function (o) {
                try {
                  hn(n), null == r ? this.a.set(e, s(o, i)) : this.a.set(e, r);
                } catch (e) {
                  throw (T("exc", t, e && e.name), e);
                }
              };
            },
            ze = new RegExp(/(^|\.)doubleclick\.net$/i),
            He = function (t, e) {
              return (
                !!ze.test(gn.location.hostname) ||
                ("/" === e &&
                  !(
                    (0 != t.indexOf("www.google.") &&
                      0 != t.indexOf(".google.") &&
                      0 != t.indexOf("google.")) ||
                    -1 < t.indexOf("google.org")
                  ))
              );
            },
            je = function (t) {
              var e = t.get(B),
                n = t.c(F, "/");
              He(e, n) && t.stopPropagation();
            },
            Ue = function () {
              var t = {},
                e = {},
                n = new nn();
              this.g = function (t, e) {
                n.add(t, e);
              };
              var i = new nn();
              this.v = function (t, e) {
                i.add(t, e);
              };
              var r = !1,
                o = !1,
                s = !0;
              (this.T = function () {
                r = !0;
              }),
                (this.j = function (t) {
                  this.load(),
                    this.set(ee, t, !0),
                    (t = new Ve(this)),
                    (r = !1),
                    i.cb(this),
                    (r = !0),
                    (e = {}),
                    this.store(),
                    t.Ja();
                }),
                (this.load = function () {
                  r &&
                    ((r = !1),
                    this.Ka(),
                    Fn(this),
                    o || ((o = !0), n.cb(this), Nn(this), Fn(this)),
                    (r = !0));
                }),
                (this.store = function () {
                  r && (o ? ((r = !1), Nn(this), (r = !0)) : this.load());
                }),
                (this.get = function (n) {
                  return C[n] && this.load(), void 0 !== e[n] ? e[n] : t[n];
                }),
                (this.set = function (n, i, r) {
                  C[n] && this.load(),
                    r ? (e[n] = i) : (t[n] = i),
                    C[n] && this.store();
                }),
                (this.Za = function (e) {
                  t[e] = this.b(e, 0) + 1;
                }),
                (this.b = function (t, e) {
                  return null == (t = this.get(t)) || "" === t ? e : 1 * t;
                }),
                (this.c = function (t, e) {
                  return null == (t = this.get(t)) ? e : t + "";
                }),
                (this.Ka = function () {
                  if (s) {
                    var e = this.c(B, ""),
                      n = this.c(F, "/");
                    He(e, n) ||
                      ((t[N] = t[G] && "" != e ? rr(e) : 1), (s = !1));
                  }
                });
            };
          Ue.prototype.stopPropagation = function () {
            throw "aborted";
          };
          var Ve = function (t) {
            var e = this;
            this.fb = 0;
            var n = t.get(ne);
            (this.Ua = function () {
              0 < e.fb && n && (e.fb--, e.fb || n());
            }),
              (this.Ja = function () {
                !e.fb && n && setTimeout(n, 10);
              }),
              t.set(ie, e, !0);
          };
          function Ge(t, e) {
            e = e || [];
            for (var n = 0; n < e.length; n++) {
              var i = e[n];
              if ("" + t == i || 0 == i.indexOf(t + ".")) return i;
            }
            return "-";
          }
          var We = function (t, e, n) {
              if (
                ((n = n ? "" : t.c(N, "1")),
                6 !== (e = e.split(".")).length || en(e[0], n))
              )
                return !1;
              n = 1 * e[1];
              var i = 1 * e[2],
                r = 1 * e[3],
                o = 1 * e[4];
              return (
                (e = 1 * e[5]),
                0 <= n &&
                  0 < i &&
                  0 < r &&
                  0 < o &&
                  0 <= e &&
                  (t.set(At, n),
                  t.set(Pt, i),
                  t.set(Ot, r),
                  t.set(kt, o),
                  t.set(It, e),
                  !0)
              );
            },
            qe = function (t) {
              var e = t.get(At),
                n = t.get(Pt),
                i = t.get(Ot),
                r = t.get(kt),
                o = t.b(It, 1);
              return [
                t.b(N, 1),
                null != e ? e : "-",
                n || "-",
                i || "-",
                r || "-",
                o,
              ].join(".");
            },
            Xe = function (t) {
              return [t.b(N, 1), t.b(Nt, 0), t.b(Ft, 1), t.b(zt, 0)].join(".");
            },
            Ye = function (t, e, n) {
              n = n ? "" : t.c(N, "1");
              var i = e.split(".");
              return (
                (4 !== i.length || en(i[0], n)) && (i = null),
                t.set(Nt, i ? 1 * i[1] : 0),
                t.set(Ft, i ? 1 * i[2] : 10),
                t.set(zt, i ? 1 * i[3] : t.get(D)),
                null != i || !en(e, n)
              );
            },
            $e = function (t, e) {
              var n = p(t.c(Lt, "")),
                i = [],
                r = t.get(pt);
              if (!e && r) {
                for (e = 0; e < r.length; e++) {
                  var o = r[e];
                  o &&
                    1 == o.scope &&
                    i.push(e + "=" + p(o.name) + "=" + p(o.value) + "=1");
                }
                0 < i.length && (n += "|" + i.join("^"));
              }
              return n ? t.b(N, 1) + "." + n : null;
            },
            Ke = function (t, e, n) {
              if (
                ((n = n ? "" : t.c(N, "1")),
                2 > (e = e.split(".")).length || en(e[0], n))
              )
                return !1;
              if (
                (0 < (e = e.slice(1).join(".").split("|")).length &&
                  t.set(Lt, f(e[0])),
                1 >= e.length)
              )
                return !0;
              for (
                e = e[1].split(-1 == e[1].indexOf(",") ? "^" : ","), n = 0;
                n < e.length;
                n++
              ) {
                var i = e[n].split("=");
                if (4 == i.length) {
                  var r = {};
                  (r.name = f(i[1])),
                    (r.value = f(i[2])),
                    (r.scope = 1),
                    (t.get(pt)[i[0]] = r);
                }
              }
              return !0;
            },
            Je = function (t, e) {
              return (e = Ze(t, e))
                ? [t.b(N, 1), t.b(Ht, 0), t.b(jt, 1), t.b(Ut, 1), e].join(".")
                : "";
            },
            Ze = function (t) {
              function e(e, i) {
                c(t.get(e)) ||
                  ((e = (e = (e = t.c(e, "")).split(" ").join("%20"))
                    .split("+")
                    .join("%20")),
                  n.push(i + "=" + e));
              }
              var n = [];
              return (
                e(Gt, "utmcid"),
                e(Kt, "utmcsr"),
                e(qt, "utmgclid"),
                e(Xt, "utmgclsrc"),
                e(Yt, "utmdclid"),
                e($t, "utmdsid"),
                e(Wt, "utmccn"),
                e(Jt, "utmcmd"),
                e(Zt, "utmctr"),
                e(Qt, "utmcct"),
                n.join("|")
              );
            },
            Qe = function (t, e, n) {
              return (
                (n = n ? "" : t.c(N, "1")),
                5 > (e = e.split(".")).length || en(e[0], n)
                  ? (t.set(Ht, void 0),
                    t.set(jt, void 0),
                    t.set(Ut, void 0),
                    t.set(Gt, void 0),
                    t.set(Wt, void 0),
                    t.set(Kt, void 0),
                    t.set(Jt, void 0),
                    t.set(Zt, void 0),
                    t.set(Qt, void 0),
                    t.set(qt, void 0),
                    t.set(Xt, void 0),
                    t.set(Yt, void 0),
                    t.set($t, void 0),
                    !1)
                  : (t.set(Ht, 1 * e[1]),
                    t.set(jt, 1 * e[2]),
                    t.set(Ut, 1 * e[3]),
                    tn(t, e.slice(4).join(".")),
                    !0)
              );
            },
            tn = function (t, e) {
              function n(t) {
                return (t = e.match(t + "=(.*?)(?:\\|utm|$)")) && 2 == t.length
                  ? t[1]
                  : void 0;
              }
              function i(e, n) {
                n
                  ? ((n = r ? f(n) : n.split("%20").join(" ")), t.set(e, n))
                  : t.set(e, void 0);
              }
              -1 == e.indexOf("=") && (e = f(e));
              var r = "2" == n("utmcvr");
              i(Gt, n("utmcid")),
                i(Wt, n("utmccn")),
                i(Kt, n("utmcsr")),
                i(Jt, n("utmcmd")),
                i(Zt, n("utmctr")),
                i(Qt, n("utmcct")),
                i(qt, n("utmgclid")),
                i(Xt, n("utmgclsrc")),
                i(Yt, n("utmdclid")),
                i($t, n("utmdsid"));
            },
            en = function (t, e) {
              return e ? t != e : !/^\d+$/.test(t);
            },
            nn = function () {
              this.filters = [];
            };
          function rn(t) {
            100 != t.get(it) &&
              t.get(At) % 1e4 >= 100 * t.get(it) &&
              t.stopPropagation();
          }
          function on(t) {
            vn(t.get(P)) && t.stopPropagation();
          }
          function sn(t) {
            "file:" == gn.location.protocol && t.stopPropagation();
          }
          function an(t) {
            yn() && t.stopPropagation();
          }
          function ln(t) {
            t.get(vt) || t.set(vt, gn.title, !0),
              t.get(gt) ||
                t.set(gt, gn.location.pathname + gn.location.search, !0);
          }
          function cn(t) {
            (t.get(P) && "UA-XXXXX-X" != t.get(P)) || t.stopPropagation();
          }
          (nn.prototype.add = function (t, e) {
            this.filters.push({ name: t, s: e });
          }),
            (nn.prototype.cb = function (t) {
              try {
                for (var e = 0; e < this.filters.length; e++)
                  this.filters[e].s.call(mn, t);
              } catch (t) {}
            });
          var un = new (function () {
            var t = [];
            (this.set = function (e) {
              t[e] = !0;
            }),
              (this.encode = function () {
                for (var e = [], n = 0; n < t.length; n++)
                  t[n] && (e[Math.floor(n / 6)] ^= 1 << n % 6);
                for (n = 0; n < e.length; n++)
                  e[n] =
                    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(
                      e[n] || 0
                    );
                return e.join("") + "~";
              });
          })();
          function hn(t) {
            un.set(t);
          }
          var dn,
            pn,
            fn,
            mn = window,
            gn = document,
            vn = function (t) {
              var e = mn._gaUserPrefs;
              if (
                (e && e.ioo && e.ioo()) ||
                (t && !0 === mn["ga-disable-" + t])
              )
                return !0;
              try {
                var n = mn.external;
                if (n && n._gaUserPrefs && "oo" == n._gaUserPrefs) return !0;
              } catch (t) {}
              return !1;
            },
            yn = function () {
              return mn.navigator && "preview" == mn.navigator.loadPurpose;
            },
            xn = function (t) {
              var e = [],
                n = gn.cookie.split(";");
              t = new RegExp("^\\s*" + t + "=\\s*(.*?)\\s*$");
              for (var i = 0; i < n.length; i++) {
                var r = n[i].match(t);
                r && e.push(r[1]);
              }
              return e;
            },
            _n = function (t, e, n, i, r, o) {
              (r = !vn(r) && !He(i, n) && !yn()) &&
                ((e = bn(e)) &&
                  2e3 < e.length &&
                  ((e = e.substring(0, 2e3)), hn(69)),
                (t = t + "=" + e + "; path=" + n + "; "),
                o &&
                  (t +=
                    "expires=" +
                    new Date(new Date().getTime() + o).toGMTString() +
                    "; "),
                i && (t += "domain=" + i + ";"),
                (gn.cookie = t));
            },
            bn = function (t) {
              if (!t) return t;
              var e = t.indexOf(";");
              if (
                (-1 != e && ((t = t.substring(0, e)), hn(141)),
                !(0 <= mn.navigator.userAgent.indexOf("Firefox")))
              )
                return t;
              e = 0;
              for (var n = (t = t.replace(/\n|\r/g, " ")).length; e < n; ++e) {
                var i = 255 & t.charCodeAt(e);
                (10 != i && 13 != i) ||
                  (t = t.substring(0, e) + "?" + t.substring(e + 1));
              }
              return t;
            },
            wn = /^.*Version\/?(\d+)[^\d].*$/i,
            Mn = function () {
              if (!pn) {
                var t = {},
                  e = mn.navigator,
                  n = mn.screen;
                (t.jb = n ? n.width + "x" + n.height : "-"),
                  (t.P = n ? n.colorDepth + "-bit" : "-"),
                  (t.language = (
                    (e && (e.language || e.browserLanguage)) ||
                    "-"
                  ).toLowerCase()),
                  (t.javaEnabled = e && e.javaEnabled() ? 1 : 0),
                  (t.characterSet = gn.characterSet || gn.charset || "-");
                try {
                  var i = gn.documentElement,
                    r = gn.body,
                    o = r && r.clientWidth && r.clientHeight;
                  (e = []),
                    i &&
                    i.clientWidth &&
                    i.clientHeight &&
                    ("CSS1Compat" === gn.compatMode || !o)
                      ? (e = [i.clientWidth, i.clientHeight])
                      : o && (e = [r.clientWidth, r.clientHeight]);
                  var s = 0 >= e[0] || 0 >= e[1] ? "" : e.join("x");
                  t.Wa = s;
                } catch (t) {
                  hn(135);
                }
                pn = t;
              }
            },
            Sn = function (t) {
              Mn();
              var e = pn;
              if (
                (t.set(_t, e.jb),
                t.set(bt, e.P),
                t.set(St, e.language),
                t.set(Et, e.characterSet),
                t.set(wt, e.javaEnabled),
                t.set(Tt, e.Wa),
                t.get(W) && t.get(q))
              ) {
                if (!(e = fn)) {
                  var n,
                    i,
                    r = "ShockwaveFlash";
                  if (
                    (e = (e = mn.navigator) ? e.plugins : void 0) &&
                    0 < e.length
                  )
                    for (n = 0; n < e.length && !i; n++)
                      -1 < (r = e[n]).name.indexOf("Shockwave Flash") &&
                        (i = r.description.split("Shockwave Flash ")[1]);
                  else {
                    r = r + "." + r;
                    try {
                      i = (n = new ActiveXObject(r + ".7")).GetVariable(
                        "$version"
                      );
                    } catch (t) {}
                    if (!i)
                      try {
                        (n = new ActiveXObject(r + ".6")),
                          (i = "WIN 6,0,21,0"),
                          (n.AllowScriptAccess = "always"),
                          (i = n.GetVariable("$version"));
                      } catch (t) {}
                    if (!i)
                      try {
                        i = (n = new ActiveXObject(r)).GetVariable("$version");
                      } catch (t) {}
                    i &&
                      (i =
                        (i = i.split(" ")[1].split(","))[0] +
                        "." +
                        i[1] +
                        " r" +
                        i[2]);
                  }
                  e = i || "-";
                }
                (fn = e), t.set(Mt, fn);
              } else t.set(Mt, "-");
            },
            En = function (t) {
              if (a(t)) this.s = t;
              else {
                var e = t[0],
                  n = e.lastIndexOf(":"),
                  i = e.lastIndexOf(".");
                (this.h = this.i = this.l = ""),
                  -1 == n && -1 == i
                    ? (this.h = e)
                    : -1 == n && -1 != i
                    ? ((this.i = e.substring(0, i)),
                      (this.h = e.substring(i + 1)))
                    : -1 != n && -1 == i
                    ? ((this.l = e.substring(0, n)),
                      (this.h = e.substring(n + 1)))
                    : n > i
                    ? ((this.i = e.substring(0, i)),
                      (this.l = e.substring(i + 1, n)),
                      (this.h = e.substring(n + 1)))
                    : ((this.i = e.substring(0, i)),
                      (this.h = e.substring(i + 1))),
                  (this.Xa = t.slice(1)),
                  (this.Ma = !this.l && "_require" == this.h),
                  (this.J = !this.i && !this.l && "_provide" == this.h);
              }
            },
            Tn = function () {
              Be(Tn.prototype, "push", Tn.prototype.push, 5),
                Be(Tn.prototype, "_getPlugin", De, 121),
                Be(Tn.prototype, "_createAsyncTracker", Tn.prototype.Sa, 33),
                Be(Tn.prototype, "_getAsyncTracker", Tn.prototype.Ta, 34),
                (this.I = new x()),
                (this.eb = []);
            };
          ((t = Tn.prototype).Na = function (t, e, n) {
            var i = this.I.get(t);
            return (
              !!a(i) &&
              ((e.plugins_ = e.plugins_ || new x()),
              e.plugins_.set(t, new i(e, n || {})),
              !0)
            );
          }),
            (t.push = function (t) {
              var e = ir.Va.apply(this, arguments);
              for (
                e = ir.eb.concat(e), ir.eb = [];
                0 < e.length && !ir.O(e[0]) && (e.shift(), !(0 < ir.eb.length));

              );
              return (ir.eb = ir.eb.concat(e)), 0;
            }),
            (t.Va = function (t) {
              for (var e = [], n = 0; n < arguments.length; n++)
                try {
                  var i = new En(arguments[n]);
                  i.J ? this.O(i) : e.push(i);
                } catch (t) {}
              return e;
            }),
            (t.O = function (t) {
              try {
                if (t.s) t.s.apply(mn);
                else if (t.J) this.I.set(t.Xa[0], t.Xa[1]);
                else {
                  var e = "_gat" == t.i ? er : "_gaq" == t.i ? ir : er.u(t.i);
                  if (t.Ma) {
                    if (!this.Na(t.Xa[0], e, t.Xa[2])) {
                      if (!t.Pa) {
                        var n,
                          i = w("" + t.Xa[1]),
                          r = i.protocol,
                          o = gn.location.protocol;
                        if (
                          (n =
                            "https:" == r ||
                            r == o ||
                            ("http:" == r && "http:" == o))
                        )
                          t: {
                            var s = w(gn.location.href);
                            if (
                              !(
                                i.query ||
                                0 <= i.url.indexOf("?") ||
                                0 <= i.path.indexOf("://") ||
                                (i.host == s.host && i.port == s.port)
                              )
                            ) {
                              var a = "http:" == i.protocol ? 80 : 443,
                                l = er.S;
                              for (e = 0; e < l.length; e++)
                                if (
                                  i.host == l[e][0] &&
                                  (i.port || a) == (l[e][1] || a) &&
                                  0 == i.path.indexOf(l[e][2])
                                ) {
                                  n = !0;
                                  break t;
                                }
                            }
                            n = !1;
                          }
                        n && !vn() && (t.Pa = g(i.url));
                      }
                      return !0;
                    }
                  } else
                    t.l && (e = e.plugins_.get(t.l)), e[t.h].apply(e, t.Xa);
                }
              } catch (t) {}
            }),
            (t.Sa = function (t, e) {
              return er.hb(t, e || "");
            }),
            (t.Ta = function (t) {
              return er.u(t);
            });
          var An = function () {
            function t(t, e, n, i) {
              null == o[t] && (o[t] = {}),
                null == o[t][e] && (o[t][e] = []),
                (o[t][e][n] = i);
            }
            function e(t, e, n) {
              if (null != o[t] && null != o[t][e]) return o[t][e][n];
            }
            function n(t, e) {
              if (null != o[t] && null != o[t][e]) {
                var n;
                for (o[t][e] = void 0, e = !0, n = 0; n < s.length; n++)
                  if (null != o[t][s[n]]) {
                    e = !1;
                    break;
                  }
                e && (o[t] = void 0);
              }
            }
            function i(t) {
              var e,
                n = "",
                i = !1;
              for (e = 0; e < s.length; e++) {
                var r = t[s[e]];
                if (null != r) {
                  i && (n += s[e]);
                  var o = r,
                    l = [];
                  for (r = 0; r < o.length; r++)
                    if (null != o[r]) {
                      (i = ""),
                        1 != r && null == o[r - 1] && (i += r.toString() + "!");
                      var c,
                        u = o[r],
                        h = "";
                      for (c = 0; c < u.length; c++) {
                        var d = u.charAt(c),
                          p = a[d];
                        h += null != p ? p : d;
                      }
                      (i += h), l.push(i);
                    }
                  (n += "(" + l.join("*") + ")"), (i = !1);
                } else i = !0;
              }
              return n;
            }
            var r = this,
              o = [],
              s = ["k", "v"],
              a = { "'": "'0", ")": "'1", "*": "'2", "!": "'3" };
            (r.Ra = function (t) {
              return null != o[t];
            }),
              (r.A = function () {
                for (var t = "", e = 0; e < o.length; e++)
                  null != o[e] && (t += e.toString() + i(o[e]));
                return t;
              }),
              (r.Qa = function (t) {
                if (null == t) return r.A();
                for (var e = t.A(), n = 0; n < o.length; n++)
                  null == o[n] || t.Ra(n) || (e += n.toString() + i(o[n]));
                return e;
              }),
              (r.f = function (e, n, i) {
                return !!Cn(i) && (t(e, "k", n, i), !0);
              }),
              (r.o = function (e, n, i) {
                return !!Ln(i) && (t(e, "v", n, i.toString()), !0);
              }),
              (r.getKey = function (t, n) {
                return e(t, "k", n);
              }),
              (r.N = function (t, n) {
                return e(t, "v", n);
              }),
              (r.L = function (t) {
                n(t, "k");
              }),
              (r.M = function (t) {
                n(t, "v");
              }),
              Be(r, "_setKey", r.f, 89),
              Be(r, "_setValue", r.o, 90),
              Be(r, "_getKey", r.getKey, 87),
              Be(r, "_getValue", r.N, 88),
              Be(r, "_clearKey", r.L, 85),
              Be(r, "_clearValue", r.M, 86);
          };
          function Cn(t) {
            return "string" == typeof t;
          }
          function Ln(t) {
            return (
              ("number" == typeof t ||
                (null != Number && t instanceof Number)) &&
              Math.round(t) == t &&
              !isNaN(t) &&
              1 / 0 != t
            );
          }
          var Rn,
            Pn,
            On,
            kn,
            In = function (t) {
              var e = mn.gaGlobal;
              return t && !e && (mn.gaGlobal = e = {}), e;
            },
            Dn = function (t) {
              t.set(
                xt,
                (function () {
                  var t = In(!0).hid;
                  return null == t && ((t = h()), (In(!0).hid = t)), t;
                })()
              );
              var e = In();
              if (e && e.dh == t.get(N)) {
                var n = e.sid;
                n &&
                  (t.get(Dt) ? hn(112) : hn(132),
                  t.set(kt, n),
                  t.get(Ct) && t.set(Ot, n)),
                  (e = e.vid),
                  t.get(Ct) &&
                    e &&
                    ((e = e.split(".")),
                    t.set(At, 1 * e[0]),
                    t.set(Pt, 1 * e[1]));
              }
            },
            Bn = function (t, e, n, i) {
              var r = t.c(B, ""),
                o = t.c(F, "/");
              (i = null != i ? i : t.b(z, 0)),
                (t = t.c(P, "")),
                _n(e, n, o, r, t, i);
            },
            Nn = function (t) {
              var s = t.c(B, ""),
                a = t.c(F, "/"),
                l = t.c(P, "");
              _n("__utma", qe(t), a, s, l, t.get(z)),
                _n("__utmb", Xe(t), a, s, l, t.get(H)),
                _n("__utmc", "" + t.b(N, 1), a, s, l);
              var c = Je(t, !0);
              if (
                (c
                  ? _n("__utmz", c, a, s, l, t.get(j))
                  : _n("__utmz", "", a, s, "", -1),
                (c = $e(t, !1))
                  ? _n("__utmv", c, a, s, l, t.get(z))
                  : _n("__utmv", "", a, s, "", -1),
                1 == t.get(mt) && (c = t.get(Pe)))
              ) {
                var u = t.get(Oe);
                (s = t.c(B, "")), (a = t.c(F, "/")), (l = t.c(P, ""));
                var h = t.b(ke, 0);
                if (
                  ((t = Math.min(t.b(z, 7776e6), t.b(j, 7776e6), 7776e6)),
                  (t = Math.min(t, 1e3 * h + t - new Date().getTime())),
                  (!u || "aw.ds" == u) &&
                    ((u = ["1", h + "", i(c)].join(".")),
                    0 < t &&
                      ((c = "_gac_" + i(l)),
                      !(
                        (function (t) {
                          var i = e._gaUserPrefs;
                          if (
                            (i && i.ioo && i.ioo()) ||
                            (t && !0 === e["ga-disable-" + t])
                          )
                            return !0;
                          try {
                            var r = e.external;
                            if (r && r._gaUserPrefs && "oo" == r._gaUserPrefs)
                              return !0;
                          } catch (t) {}
                          (t = []),
                            (i = n.cookie.split(";")),
                            (r = /^\s*AMP_TOKEN=\s*(.*?)\s*$/);
                          for (var o = 0; o < i.length; o++) {
                            var s = i[o].match(r);
                            s && t.push(s[1]);
                          }
                          for (i = 0; i < t.length; i++)
                            if ("$OPT_OUT" == decodeURIComponent(t[i]))
                              return !0;
                          return !1;
                        })(l) ||
                        o.test(gn.location.hostname) ||
                        ("/" == a && r.test(s))
                      ) &&
                        ((l = u) &&
                          1200 < l.length &&
                          (l = l.substring(0, 1200)),
                        (a = c + "=" + l + "; path=" + a + "; "),
                        t &&
                          (a +=
                            "expires=" +
                            new Date(new Date().getTime() + t).toGMTString() +
                            "; "),
                        s && "none" !== s && (a += "domain=" + s + ";"),
                        (s = gn.cookie),
                        (gn.cookie = a),
                        s == gn.cookie))))
                )
                  for (
                    s = [],
                      a = gn.cookie.split(";"),
                      t = new RegExp("^\\s*" + c + "=\\s*(.*?)\\s*$"),
                      l = 0;
                    l < a.length;
                    l++
                  )
                    (c = a[l].match(t)) && s.push(c[1]);
              }
            },
            Fn = function (t) {
              var e = t.b(N, 1);
              if (!We(t, Ge(e, xn("__utma")))) return t.set(Rt, !0), !1;
              var n = !Ye(t, Ge(e, xn("__utmb")));
              if (
                (t.set(Bt, n),
                Qe(t, Ge(e, xn("__utmz"))),
                Ke(t, Ge(e, xn("__utmv"))),
                1 == t.get(mt))
              ) {
                e = t.get(Pe);
                var i = t.get(Oe);
                if (!e || (i && "aw.ds" != i)) {
                  if (gn) {
                    (e = []), (i = gn.cookie.split(";"));
                    for (
                      var r = /^\s*_gac_(UA-\d+-\d+)=\s*(.+?)\s*$/, o = 0;
                      o < i.length;
                      o++
                    ) {
                      var s = i[o].match(r);
                      s && e.push({ Oa: s[1], value: s[2] });
                    }
                    if (((i = {}), e && e.length))
                      for (r = 0; r < e.length; r++)
                        "1" == (o = e[r].value.split("."))[0] &&
                          3 == o.length &&
                          o[1] &&
                          (i[e[r].Oa] || (i[e[r].Oa] = []),
                          i[e[r].Oa].push({ timestamp: o[1], kb: o[2] }));
                    e = i;
                  } else e = {};
                  (e = e[t.get(P)]) &&
                    0 < e.length &&
                    ((e = e[0]),
                    t.set(ke, e.timestamp),
                    t.set(Pe, e.kb),
                    t.set(Oe, void 0));
                }
              }
              return (Rn = !n), !0;
            },
            zn = function (t) {
              Rn ||
                0 < xn("__utmb").length ||
                (_n("__utmd", "1", t.c(F, "/"), t.c(B, ""), t.c(P, ""), 1e4),
                0 == xn("__utmd").length && t.stopPropagation());
            },
            Hn = 0,
            jn = function (t) {
              null == t.get(At) || (t.get(Rt) && !t.get(ye))
                ? Vn(t)
                : t.get(Bt) && Gn(t);
            },
            Un = function (t) {
              t.get(Vt) && !t.get(Dt) && (Gn(t), t.set(jt, t.get(It)));
            },
            Vn = function (t) {
              1 < ++Hn && hn(137);
              var e = t.get(D);
              t.set(Ct, !0),
                t.set(
                  At,
                  h() ^
                    (2147483647 &
                      (function () {
                        Mn();
                        var t = pn,
                          e = mn.navigator;
                        e = (t =
                          e.appName +
                          e.version +
                          t.language +
                          e.platform +
                          e.userAgent +
                          t.javaEnabled +
                          t.jb +
                          t.P +
                          (gn.cookie ? gn.cookie : "") +
                          (gn.referrer ? gn.referrer : "")).length;
                        for (var n = mn.history.length; 0 < n; ) t += n-- ^ e++;
                        return rr(t);
                      })())
                ),
                t.set(Lt, ""),
                t.set(Pt, e),
                t.set(Ot, e),
                t.set(kt, e),
                t.set(It, 1),
                t.set(Dt, !0),
                t.set(Nt, 0),
                t.set(Ft, 10),
                t.set(zt, e),
                t.set(pt, []),
                t.set(Rt, !1),
                t.set(Bt, !1);
            },
            Gn = function (t) {
              1 < ++Hn && hn(137),
                t.set(Ot, t.get(kt)),
                t.set(kt, t.get(D)),
                t.Za(It),
                t.set(Dt, !0),
                t.set(Nt, 0),
                t.set(Ft, 10),
                t.set(zt, t.get(D)),
                t.set(Bt, !1);
            },
            Wn =
              "daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p yahoo:q msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q".split(
                " "
              ),
            qn = function (t) {
              if (t.get(X) && !t.get(ye)) {
                for (
                  var e = !(
                      c(t.get(Gt)) &&
                      c(t.get(Kt)) &&
                      c(t.get(qt)) &&
                      c(t.get(Yt))
                    ),
                    n = {},
                    i = 0;
                  i < Jn.length;
                  i++
                ) {
                  var r = Jn[i];
                  n[r] = t.get(r);
                }
                (i = t.get(te))
                  ? (hn(149), M((r = new x()), i), (i = r))
                  : (i = b(gn.location.href, t.get(V)).R),
                  ("1" == y(i.get(t.get(nt))) && e) ||
                    ((i = Xn(t, i) || Yn(t)) ||
                      e ||
                      !t.get(Dt) ||
                      (Kn(
                        t,
                        void 0,
                        "(direct)",
                        void 0,
                        void 0,
                        void 0,
                        "(direct)",
                        "(none)",
                        void 0,
                        void 0
                      ),
                      (i = !0)),
                    i &&
                      (t.set(Vt, Zn(t, n)),
                      (e =
                        "(direct)" == t.get(Kt) &&
                        "(direct)" == t.get(Wt) &&
                        "(none)" == t.get(Jt)),
                      t.get(Vt) || (t.get(Dt) && !e)) &&
                      (t.set(Ht, t.get(D)), t.set(jt, t.get(It)), t.Za(Ut)));
              }
            },
            Xn = function (t, e) {
              function n(n, i) {
                return (
                  (i = i || "-"),
                  (n = y(e.get(t.get(n)))) && "-" != n ? f(n) : i
                );
              }
              var i = y(e.get(t.get($))) || "-",
                r = y(e.get(t.get(Z))) || "-",
                o = y(e.get(t.get(J))) || "-",
                s = y(e.get("gclsrc")) || "-",
                a = y(e.get("dclid")) || "-";
              "-" != o && t.set(Pe, o), "-" != s && t.set(Oe, s);
              var l = n(K, "(not set)"),
                u = n(Q, "(not set)"),
                h = n(tt),
                d = n(et);
              if (c(i) && c(o) && c(a) && c(r)) return !1;
              var p = !c(o) && !c(s);
              p = c(r) && (!c(a) || p);
              var m = c(h);
              if (p || m) {
                var g = ni(t);
                (g = b(g, !0)),
                  (g = $n(t, g)) &&
                    !c(g[1] && !g[2]) &&
                    (p && (r = g[0]), m && (h = g[1]));
              }
              return Kn(t, i, r, o, s, a, l, u, h, d), !0;
            },
            Yn = function (t) {
              var e = ni(t),
                n = b(e, !0);
              if (
                ((e = !(
                  null != e &&
                  null != e &&
                  "" != e &&
                  "0" != e &&
                  "-" != e &&
                  0 <= e.indexOf("://")
                )) ||
                  (e =
                    n &&
                    -1 < n.host.indexOf("google") &&
                    n.R.contains("q") &&
                    "cse" == n.path),
                e)
              )
                return !1;
              if ((e = $n(t, n)) && !e[2])
                return (
                  Kn(
                    t,
                    void 0,
                    e[0],
                    void 0,
                    void 0,
                    void 0,
                    "(organic)",
                    "organic",
                    e[1],
                    void 0
                  ),
                  !0
                );
              if (e || !t.get(Dt)) return !1;
              t: {
                e = t.get(ct);
                for (var i = _(n.host), r = 0; r < e.length; ++r)
                  if (-1 < i.indexOf(e[r])) {
                    t = !1;
                    break t;
                  }
                Kn(
                  t,
                  void 0,
                  i,
                  void 0,
                  void 0,
                  void 0,
                  "(referral)",
                  "referral",
                  void 0,
                  "/" + n.path
                ),
                  (t = !0);
              }
              return t;
            },
            $n = function (t, e) {
              for (var n = t.get(at), i = 0; i < n.length; ++i) {
                var r = n[i].split(":");
                if (-1 < e.host.indexOf(r[0].toLowerCase())) {
                  var o = e.R.get(r[1]);
                  if (
                    o &&
                    (!(o = v(o)) &&
                      -1 < e.host.indexOf("google.") &&
                      (o = "(not provided)"),
                    !r[3] || -1 < e.url.indexOf(r[3]))
                  ) {
                    o || hn(151);
                    t: {
                      for (
                        e = o, t = t.get(lt), e = f(e).toLowerCase(), n = 0;
                        n < t.length;
                        ++n
                      )
                        if (e == t[n]) {
                          t = !0;
                          break t;
                        }
                      t = !1;
                    }
                    return [r[2] || r[0], o, t];
                  }
                }
              }
              return null;
            },
            Kn = function (t, e, n, i, r, o, s, a, l, c) {
              t.set(Gt, e),
                t.set(Kt, n),
                t.set(qt, i),
                t.set(Xt, r),
                t.set(Yt, o),
                t.set(Wt, s),
                t.set(Jt, a),
                t.set(Zt, l),
                t.set(Qt, c);
            },
            Jn = [Wt, Gt, qt, Yt, Kt, Jt, Zt, Qt],
            Zn = function (t, e) {
              function n(t) {
                return (t = ("" + t).split("+").join("%20"))
                  .split(" ")
                  .join("%20");
              }
              function i(n) {
                var i = "" + (t.get(n) || "");
                return (n = "" + (e[n] || "")), 0 < i.length && i == n;
              }
              if (i(qt) || i(Yt)) return hn(131), !1;
              for (var r = 0; r < Jn.length; r++) {
                var o = Jn[r],
                  s = e[o] || "-";
                if (((o = t.get(o) || "-"), n(s) != n(o))) return !0;
              }
              return !1;
            },
            Qn = new RegExp(
              /^https?:\/\/(www\.)?google(\.com?)?(\.[a-z]{2}t?)?\/?$/i
            ),
            ti = /^https?:\/\/(r\.)?search\.yahoo\.com?(\.jp)?\/?[^?]*$/i,
            ei = /^https?:\/\/(www\.)?bing\.com\/?$/i,
            ni = function (t) {
              t = S(t.get(yt), t.get(F));
              try {
                if (Qn.test(t)) return hn(136), t + "?q=";
                if (ti.test(t)) return hn(150), t + "?p=(not provided)";
                if (ei.test(t)) return t + "?q=(not provided)";
              } catch (t) {
                hn(145);
              }
              return t;
            },
            ii = function (t) {
              (Pn = t.c(qt, "")), (On = t.c(Xt, ""));
            },
            ri = function (t) {
              var e = t.c(qt, ""),
                n = t.c(Xt, "");
              e != Pn &&
                (-1 < n.indexOf("ds")
                  ? t.set($t, void 0)
                  : !c(Pn) && -1 < On.indexOf("ds") && t.set($t, Pn));
            },
            oi = function (t) {
              si(t, gn.location.href) ? (t.set(ye, !0), hn(12)) : t.set(ye, !1);
            },
            si = function (t, e) {
              if (!t.get(U)) return !1;
              var n = b(e, t.get(V));
              e = v(n.R.get("__utma"));
              var i = v(n.R.get("__utmb")),
                r = v(n.R.get("__utmc")),
                o = v(n.R.get("__utmx")),
                s = v(n.R.get("__utmz")),
                a = v(n.R.get("__utmv"));
              if (
                ((n = v(n.R.get("__utmk"))),
                rr("" + e + i + r + o + s + a) != n)
              ) {
                if (
                  ((e = f(e)),
                  (i = f(i)),
                  (r = f(r)),
                  (o = f(o)),
                  !(r = li(e + i + r + o, s, a, n)))
                )
                  return !1;
                (s = r[0]), (a = r[1]);
              }
              return (
                !!We(t, e, !0) &&
                (Ye(t, i, !0), Qe(t, s, !0), Ke(t, a, !0), fi(t, o, !0), !0)
              );
            },
            ai = function (t, e, n) {
              var i = qe(t) || "-",
                r = Xe(t) || "-",
                o = "" + t.b(N, 1) || "-",
                s = mi(t) || "-",
                a = Je(t, !1) || "-",
                l = rr("" + i + r + o + s + a + (t = $e(t, !1) || "-")),
                c = [];
              return (
                c.push("__utma=" + i),
                c.push("__utmb=" + r),
                c.push("__utmc=" + o),
                c.push("__utmx=" + s),
                c.push("__utmz=" + a),
                c.push("__utmv=" + t),
                c.push("__utmk=" + l),
                (i = c.join("&"))
                  ? ((r = e.indexOf("#")),
                    n
                      ? 0 > r
                        ? e + "#" + i
                        : e + "&" + i
                      : ((n = ""),
                        0 < r &&
                          ((n = e.substring(r)), (e = e.substring(0, r))),
                        0 > e.indexOf("?") ? e + "?" + i + n : e + "&" + i + n))
                  : e
              );
            },
            li = function (t, e, n, i) {
              for (var r = 0; 3 > r; r++) {
                for (var o = 0; 3 > o; o++) {
                  if (i == rr(t + e + n)) return hn(127), [e, n];
                  var s = e.replace(/ /g, "%20"),
                    a = n.replace(/ /g, "%20");
                  if (i == rr(t + s + a)) return hn(128), [s, a];
                  if (
                    i ==
                    rr(
                      t +
                        (s = s.replace(/\+/g, "%20")) +
                        (a = a.replace(/\+/g, "%20"))
                    )
                  )
                    return hn(129), [s, a];
                  try {
                    var l = e.match("utmctr=(.*?)(?:\\|utm|$)");
                    if (
                      l &&
                      2 == l.length &&
                      i == rr(t + (s = e.replace(l[1], p(f(l[1])))) + n)
                    )
                      return hn(139), [s, n];
                  } catch (t) {}
                  e = f(e);
                }
                n = f(n);
              }
            },
            ci = "|",
            ui = function (t, e, n, i, r, o, s, a, l) {
              var c = di(t, e);
              return (
                c || ((c = {}), t.get(ut).push(c)),
                (c.id_ = e),
                (c.affiliation_ = n),
                (c.total_ = i),
                (c.tax_ = r),
                (c.shipping_ = o),
                (c.city_ = s),
                (c.state_ = a),
                (c.country_ = l),
                (c.items_ = c.items_ || []),
                c
              );
            },
            hi = function (t, e, n, i, r, o, s) {
              t: {
                if (
                  (t = di(t, e) || ui(t, e, "", 0, 0, 0, "", "", "")) &&
                  t.items_
                )
                  for (var a = t.items_, l = 0; l < a.length; l++)
                    if (a[l].sku_ == n) {
                      a = a[l];
                      break t;
                    }
                a = null;
              }
              return (
                ((l = a || {}).transId_ = e),
                (l.sku_ = n),
                (l.name_ = i),
                (l.category_ = r),
                (l.price_ = o),
                (l.quantity_ = s),
                a || t.items_.push(l),
                l
              );
            },
            di = function (t, e) {
              t = t.get(ut);
              for (var n = 0; n < t.length; n++) if (t[n].id_ == e) return t[n];
              return null;
            },
            pi = function (t) {
              if (!kn) {
                var e = gn.location.hash,
                  n = mn.name,
                  i = /^#?gaso=([^&]*)/;
                (n =
                  (e = (e = (e && e.match(i)) || (n && n.match(i)))
                    ? e[1]
                    : v(xn("GASO"))) &&
                  e.match(/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i)) &&
                  (Bn(t, "GASO", "" + e, 0),
                  (er._gasoDomain = t.get(B)),
                  (er._gasoCPath = t.get(F)),
                  g(
                    "https://www.google.com/analytics/web/inpage/pub/inpage.js?" +
                      ((t = n[1]) ? "prefix=" + t + "&" : "") +
                      h(),
                    "_gasojs"
                  )),
                  (kn = !0);
              }
            },
            fi = function (t, e, n) {
              n && (e = f(e)),
                (n = t.b(N, 1)),
                2 > (e = e.split(".")).length ||
                  !/^\d+$/.test(e[0]) ||
                  ((e[0] = "" + n), Bn(t, "__utmx", e.join("."), void 0));
            },
            mi = function (t, e) {
              return (
                "-" == (t = Ge(t.get(N), xn("__utmx"))) && (t = ""),
                e ? p(t) : t
              );
            },
            gi = function (t) {
              var e = mn.gaData && mn.gaData.expId;
              e && t.set(Ee, "" + e);
            },
            vi = function (t, e) {
              var n = Math.min(t.b(de, 0), 100);
              if (t.b(At, 0) % 100 >= n) return !1;
              if (null == (n = bi() || wi())) return !1;
              var i = n[0];
              return (
                null != i &&
                1 / 0 != i &&
                !isNaN(i) &&
                (0 < i
                  ? yi(n)
                    ? e(_i(n))
                    : e(_i(n.slice(0, 1)))
                  : m(
                      mn,
                      "load",
                      function () {
                        vi(t, e);
                      },
                      !1
                    ),
                !0)
              );
            },
            yi = function (t) {
              for (var e = 1; e < t.length; e++)
                if (isNaN(t[e]) || 1 / 0 == t[e] || 0 > t[e]) return !1;
              return !0;
            },
            xi = function (t) {
              return isNaN(t) || 0 > t
                ? 0
                : 5e3 > t
                ? 10 * Math.floor(t / 10)
                : 5e4 > t
                ? 100 * Math.floor(t / 100)
                : 41e5 > t
                ? 1e3 * Math.floor(t / 1e3)
                : 41e5;
            },
            _i = function (t) {
              for (var e = new An(), n = 0; n < t.length; n++)
                e.f(14, n + 1, "" + xi(t[n])), e.o(14, n + 1, t[n]);
              return e;
            },
            bi = function () {
              var t = mn.performance || mn.webkitPerformance;
              if ((t = t && t.timing)) {
                var e = t.navigationStart;
                if (0 != e)
                  return [
                    t.loadEventStart - e,
                    t.domainLookupEnd - t.domainLookupStart,
                    t.connectEnd - t.connectStart,
                    t.responseStart - t.requestStart,
                    t.responseEnd - t.responseStart,
                    t.fetchStart - e,
                    t.domInteractive - e,
                    t.domContentLoadedEventStart - e,
                  ];
                hn(133);
              }
            },
            wi = function () {
              if (mn.top == mn) {
                var t = mn.external,
                  e = t && t.onloadT;
                if (
                  (t && !t.isValidLoadTime && (e = void 0),
                  2147483648 < e && (e = void 0),
                  0 < e && t.setPageReadyTime(),
                  null != e)
                )
                  return [e];
              }
            },
            Mi = function (t) {
              if (t.get(Ct))
                try {
                  t: {
                    var e = xn(t.get(Ae) || "_ga");
                    if (e && !(1 > e.length)) {
                      for (var n = [], i = 0; i < e.length; i++) {
                        var r = e[i].split("."),
                          o = r.shift();
                        if (("GA1" == o || "1" == o) && 1 < r.length) {
                          var s = r.shift().split("-");
                          1 == s.length && (s[1] = "1"),
                            (s[0] *= 1),
                            (s[1] *= 1);
                          var a = { Ya: s, $a: r.join(".") };
                        } else a = void 0;
                        a && n.push(a);
                      }
                      if (1 == n.length) {
                        var l = n[0].$a;
                        break t;
                      }
                      if (0 != n.length) {
                        var c = t.get(Ce) || t.get(B);
                        if (
                          1 ==
                          (n = Si(
                            n,
                            (0 == c.indexOf(".") ? c.substr(1) : c).split(".")
                              .length,
                            0
                          )).length
                        ) {
                          l = n[0].$a;
                          break t;
                        }
                        var u = t.get(Le) || t.get(F);
                        (e = u)
                          ? (1 < e.length &&
                              "/" == e.charAt(e.length - 1) &&
                              (e = e.substr(0, e.length - 1)),
                            0 != e.indexOf("/") && (e = "/" + e),
                            (u = e))
                          : (u = "/"),
                          (l = (n = Si(
                            n,
                            "/" == u ? 1 : u.split("/").length,
                            1
                          ))[0].$a);
                        break t;
                      }
                    }
                    l = void 0;
                  }
                  if (l) {
                    var h = ("" + l).split(".");
                    2 == h.length &&
                      /[0-9.]/.test(h) &&
                      (hn(114),
                      t.set(At, h[0]),
                      t.set(Pt, h[1]),
                      t.set(Ct, !1));
                  }
                } catch (t) {
                  hn(115);
                }
            },
            Si = function (t, e, n) {
              for (var i = [], r = [], o = 128, s = 0; s < t.length; s++) {
                var a = t[s];
                a.Ya[n] == e
                  ? i.push(a)
                  : a.Ya[n] == o
                  ? r.push(a)
                  : a.Ya[n] < o && ((r = [a]), (o = a.Ya[n]));
              }
              return 0 < i.length ? i : r;
            },
            Ei = /^gtm\d+$/,
            Ti = function (t) {
              var e = !!t.b(Se, 1);
              if (e)
                if ((hn(140), "page" != t.get(ee))) t.set(we, "", !0);
                else if (
                  ((e = t.c(Me, "")) ||
                    (e =
                      (e = t.c(I, "")) && "~0" != e
                        ? Ei.test(e)
                          ? "__utmt_" + p(t.c(P, ""))
                          : "__utmt_" + p(e)
                        : "__utmt"),
                  0 < xn(e).length)
                )
                  t.set(we, "", !0);
                else if (
                  (_n(e, "1", t.c(F, "/"), t.c(B, ""), t.c(P, ""), 6e5),
                  0 < xn(e).length)
                ) {
                  if (
                    (t.set(we, h(), !0),
                    t.set(_e, 1, !0),
                    void 0 !== mn.__ga4__)
                  )
                    e = mn.__ga4__;
                  else {
                    if (void 0 === dn) {
                      var n = mn.navigator.userAgent;
                      if (n) {
                        e = n;
                        try {
                          e = decodeURIComponent(n);
                        } catch (t) {}
                        (n = !(
                          0 <= e.indexOf("Chrome") ||
                          0 <= e.indexOf("CriOS") ||
                          !(
                            0 <= e.indexOf("Safari/") ||
                            0 <= e.indexOf("Safari,")
                          )
                        )) &&
                          (n = 11 <= ((e = wn.exec(e)) ? Number(e[1]) : -1)),
                          (dn = n);
                      } else dn = !1;
                    }
                    e = dn;
                  }
                  e
                    ? (t.set(Ie, Ai(t), !0),
                      t.set(
                        be,
                        "https://ssl.google-analytics.com/j/__utm.gif",
                        !0
                      ))
                    : t.set(be, Wi() + "/r/__utm.gif?", !0);
                }
            },
            Ai = function (t) {
              return {
                gb: "t=dc&_r=3&" + (t = Ci(t)),
                google: "t=sr&slf_rd=1&_r=4&" + t,
                count: 0,
              };
            },
            Ci = function (t) {
              function e(t, e) {
                n.push(t + "=" + p(e));
              }
              var n = [];
              return (
                e("v", "1"),
                e("_v", "5.7.2"),
                e("tid", t.get(P)),
                e("cid", t.get(At) + "." + t.get(Pt)),
                e("jid", t.get(we)),
                e("aip", "1"),
                n.join("&") + "&z=" + h()
              );
            },
            Li = function (t, e, n) {
              function i(t) {
                return function (e) {
                  if ((e = e.get(xe)[t]) && e.length)
                    for (
                      var n = (function (t, e) {
                          return {
                            type: e,
                            target: t,
                            stopPropagation: function () {
                              throw "aborted";
                            },
                          };
                        })(r, t),
                        i = 0;
                      i < e.length;
                      i++
                    )
                      e[i].call(r, n);
                };
              }
              var r = this;
              (this.a = new Ue()),
                (this.get = function (t) {
                  return this.a.get(t);
                }),
                (this.set = function (t, e, n) {
                  this.a.set(t, e, n);
                }),
                this.set(P, e || "UA-XXXXX-X"),
                this.set(I, t || ""),
                this.set(k, n || ""),
                this.set(D, Math.round(new Date().getTime() / 1e3)),
                this.set(F, "/"),
                this.set(z, 63072e6),
                this.set(j, 15768e6),
                this.set(H, 18e5),
                this.set(U, !1),
                this.set(st, 50),
                this.set(V, !1),
                this.set(G, !0),
                this.set(W, !0),
                this.set(q, !0),
                this.set(X, !0),
                this.set(Y, !0),
                this.set(K, "utm_campaign"),
                this.set($, "utm_id"),
                this.set(J, "gclid"),
                this.set(Z, "utm_source"),
                this.set(Q, "utm_medium"),
                this.set(tt, "utm_term"),
                this.set(et, "utm_content"),
                this.set(nt, "utm_nooverride"),
                this.set(it, 100),
                this.set(de, 1),
                this.set(pe, !1),
                this.set(rt, "/__utm.gif"),
                this.set(ot, 1),
                this.set(ut, []),
                this.set(pt, []),
                this.set(at, Wn.slice(0)),
                this.set(lt, []),
                this.set(ct, []),
                this.B("auto"),
                this.set(yt, gn.referrer),
                this.set(mt, !0),
                this.set(ke, Math.round(new Date().getTime() / 1e3)),
                (function (t) {
                  try {
                    var e = b(gn.location.href, !1),
                      n = decodeURIComponent(y(e.R.get("utm_referrer"))) || "";
                    n && t.set(yt, n);
                    var i = decodeURIComponent(v(e.R.get("utm_expid"))) || "";
                    i && ((i = i.split(".")[0]), t.set(Ee, "" + i));
                  } catch (t) {
                    hn(146);
                  }
                })(this.a),
                this.set(xe, { hit: [], load: [] }),
                this.a.g("0", oi),
                this.a.g("1", ii),
                this.a.g("2", jn),
                this.a.g("3", Mi),
                this.a.g("4", qn),
                this.a.g("5", ri),
                this.a.g("6", Un),
                this.a.g("7", i("load")),
                this.a.g("8", pi),
                this.a.v("A", on),
                this.a.v("B", sn),
                this.a.v("C", an),
                this.a.v("D", jn),
                this.a.v("E", rn),
                this.a.v("F", je),
                this.a.v("G", Ri),
                this.a.v("H", cn),
                this.a.v("I", zn),
                this.a.v("J", ln),
                this.a.v("K", Sn),
                this.a.v("L", Dn),
                this.a.v("M", gi),
                this.a.v("N", Ti),
                this.a.v("O", i("hit")),
                this.a.v("P", Gi),
                this.a.v("Q", Pi),
                0 === this.get(D) && hn(111),
                this.a.T(),
                (this.H = void 0);
            };
          ((t = Li.prototype).m = function () {
            var t = this.get(ht);
            return t || ((t = new An()), this.set(ht, t)), t;
          }),
            (t.La = function (t) {
              for (var e in t) {
                var n = t[e];
                t.hasOwnProperty(e) && this.set(e, n, !0);
              }
            }),
            (t.K = function (t) {
              if (this.get(pe)) return !1;
              var e = this,
                n = vi(this.a, function (n) {
                  e.set(gt, t, !0), e.ib(n);
                });
              return this.set(pe, n), n;
            }),
            (t.Fa = function (t) {
              t && l(t)
                ? (hn(13), this.set(gt, t, !0))
                : "object" == typeof t && null !== t && this.La(t),
                (this.H = t = this.get(gt)),
                this.a.j("page"),
                this.K(t);
            }),
            (t.F = function (t, e, n, i, r) {
              return !(
                "" == t ||
                !Cn(t) ||
                "" == e ||
                !Cn(e) ||
                (null != n && !Cn(n)) ||
                (null != i && !Ln(i)) ||
                (this.set(oe, t, !0),
                this.set(se, e, !0),
                this.set(ae, n, !0),
                this.set(le, i, !0),
                this.set(re, !!r, !0),
                this.a.j("event"),
                0)
              );
            }),
            (t.Ha = function (t, e, n, i, r) {
              var o = this.a.b(de, 0);
              return (
                1 * r === r && (o = r),
                !(
                  this.a.b(At, 0) % 100 >= o ||
                  ((n = 1 * ("" + n)),
                  "" == t ||
                    !Cn(t) ||
                    "" == e ||
                    !Cn(e) ||
                    !Ln(n) ||
                    isNaN(n) ||
                    0 > n ||
                    0 > o ||
                    100 < o ||
                    !(null == i || ("" != i && Cn(i))) ||
                    (this.ib(
                      (function (t, e, n, i) {
                        var r = new An();
                        return (
                          r.f(14, 90, e.substring(0, 500)),
                          r.f(14, 91, t.substring(0, 150)),
                          r.f(14, 92, "" + xi(n)),
                          null != i && r.f(14, 93, i.substring(0, 500)),
                          r.o(14, 90, n),
                          r
                        );
                      })(t, e, n, i)
                    ),
                    0))
                )
              );
            }),
            (t.Ga = function (t, e, n, i) {
              return !(
                !t ||
                !e ||
                (this.set(ce, t, !0),
                this.set(ue, e, !0),
                this.set(he, n || gn.location.href, !0),
                i && this.set(gt, i, !0),
                this.a.j("social"),
                0)
              );
            }),
            (t.Ea = function () {
              this.set(de, 10), this.K(this.H);
            }),
            (t.Ia = function () {
              this.a.j("trans");
            }),
            (t.ib = function (t) {
              this.set(dt, t, !0), this.a.j("event");
            }),
            (t.ia = function (t) {
              this.initData();
              var e = this;
              return {
                _trackEvent: function (n, i, r) {
                  hn(91), e.F(t, n, i, r);
                },
              };
            }),
            (t.ma = function (t) {
              return this.get(t);
            }),
            (t.xa = function (t, e) {
              if (t)
                if (l(t)) this.set(t, e);
                else if ("object" == typeof t)
                  for (var n in t) t.hasOwnProperty(n) && this.set(n, t[n]);
            }),
            (t.addEventListener = function (t, e) {
              (t = this.get(xe)[t]) && t.push(e);
            }),
            (t.removeEventListener = function (t, e) {
              t = this.get(xe)[t];
              for (var n = 0; t && n < t.length; n++)
                if (t[n] == e) {
                  t.splice(n, 1);
                  break;
                }
            }),
            (t.qa = function () {
              return "5.7.2";
            }),
            (t.B = function (t) {
              this.get(G),
                (t =
                  "auto" == t
                    ? _(gn.domain)
                    : t && "-" != t && "none" != t
                    ? t.toLowerCase()
                    : ""),
                this.set(B, t);
            }),
            (t.va = function (t) {
              this.set(G, !!t);
            }),
            (t.na = function (t, e) {
              return ai(this.a, t, e);
            }),
            (t.link = function (t, e) {
              this.a.get(U) && t && (gn.location.href = ai(this.a, t, e));
            }),
            (t.ua = function (t, e) {
              this.a.get(U) &&
                t &&
                t.action &&
                (t.action = ai(this.a, t.action, e));
            }),
            (t.za = function () {
              this.initData();
              var t = this.a,
                e = gn.getElementById
                  ? gn.getElementById("utmtrans")
                  : gn.utmform && gn.utmform.utmtrans
                  ? gn.utmform.utmtrans
                  : null;
              if (e && e.value) {
                t.set(ut, []), (e = e.value.split("UTM:"));
                for (var n = 0; n < e.length; n++) {
                  e[n] = u(e[n]);
                  for (var i = e[n].split(ci), r = 0; r < i.length; r++)
                    i[r] = u(i[r]);
                  "T" == i[0]
                    ? ui(t, i[1], i[2], i[3], i[4], i[5], i[6], i[7], i[8])
                    : "I" == i[0] && hi(t, i[1], i[2], i[3], i[4], i[5], i[6]);
                }
              }
            }),
            (t.$ = function (t, e, n, i, r, o, s, a) {
              return ui(this.a, t, e, n, i, r, o, s, a);
            }),
            (t.Y = function (t, e, n, i, r, o) {
              return hi(this.a, t, e, n, i, r, o);
            }),
            (t.Aa = function (t) {
              ci = t || "|";
            }),
            (t.ea = function () {
              this.set(ut, []);
            }),
            (t.wa = function (t, e, n, i) {
              var r = this.a;
              if (0 >= t || t > r.get(st)) t = !1;
              else if (!e || !n || 128 < e.length + n.length) t = !1;
              else {
                1 != i && 2 != i && (i = 3);
                var o = {};
                (o.name = e),
                  (o.value = n),
                  (o.scope = i),
                  (r.get(pt)[t] = o),
                  (t = !0);
              }
              return t && this.a.store(), t;
            }),
            (t.ka = function (t) {
              (this.a.get(pt)[t] = void 0), this.a.store();
            }),
            (t.ra = function (t) {
              return (t = this.a.get(pt)[t]) && 1 == t.scope ? t.value : void 0;
            }),
            (t.Ca = function (t, e, n) {
              12 == t && 1 == e ? this.set(Re, n) : this.m().f(t, e, n);
            }),
            (t.Da = function (t, e, n) {
              this.m().o(t, e, n);
            }),
            (t.sa = function (t, e) {
              return this.m().getKey(t, e);
            }),
            (t.ta = function (t, e) {
              return this.m().N(t, e);
            }),
            (t.fa = function (t) {
              this.m().L(t);
            }),
            (t.ga = function (t) {
              this.m().M(t);
            }),
            (t.ja = function () {
              return new An();
            }),
            (t.W = function (t) {
              t && this.get(lt).push(t.toLowerCase());
            }),
            (t.ba = function () {
              this.set(lt, []);
            }),
            (t.X = function (t) {
              t && this.get(ct).push(t.toLowerCase());
            }),
            (t.ca = function () {
              this.set(ct, []);
            }),
            (t.Z = function (t, e, n, i, r) {
              t &&
                e &&
                ((t = [t, e.toLowerCase()].join(":")),
                (i || r) && (t = [t, i, r].join(":")),
                (i = this.get(at)).splice(n ? 0 : i.length, 0, t));
            }),
            (t.da = function () {
              this.set(at, []);
            }),
            (t.ha = function (t) {
              this.a.load();
              var e = this.get(F),
                n = mi(this.a);
              this.set(F, t), this.a.store(), fi(this.a, n), this.set(F, e);
            }),
            (t.ya = function (t, e) {
              if (0 < t && 5 >= t && l(e) && "" != e) {
                var n = this.get(fe) || [];
                (n[t] = e), this.set(fe, n);
              }
            }),
            (t.V = function (t) {
              if ((t = "" + t).match(/^[A-Za-z0-9]{1,5}$/)) {
                var e = this.get(ve) || [];
                e.push(t), this.set(ve, e);
              }
            }),
            (t.initData = function () {
              this.a.load();
            }),
            (t.Ba = function (t) {
              t && "" != t && (this.set(Lt, t), this.a.j("var"));
            });
          var Ri = function (t) {
              if (
                ("trans" !== t.get(ee) &&
                  500 <= t.b(Nt, 0) &&
                  t.stopPropagation(),
                "event" === t.get(ee))
              ) {
                var e = new Date().getTime(),
                  n = t.b(zt, 0),
                  i = t.b(kt, 0);
                0 < (n = Math.floor((e - (n != i ? n : 1e3 * n)) / 1e3)) &&
                  (t.set(zt, e), t.set(Ft, Math.min(10, t.b(Ft, 0) + n))),
                  0 >= t.b(Ft, 0) && t.stopPropagation();
              }
            },
            Pi = function (t) {
              "event" === t.get(ee) && t.set(Ft, Math.max(0, t.b(Ft, 10) - 1));
            },
            Oi = function () {
              var t = [];
              (this.add = function (e, n, i) {
                i && (n = p("" + n)), t.push(e + "=" + n);
              }),
                (this.toString = function () {
                  return t.join("&");
                });
            },
            ki = function (t, e) {
              (e || 2 != t.get(ot)) && t.Za(Nt);
            },
            Ii = function (t, e) {
              e.add("utmwv", "5.7.2"),
                e.add("utms", t.get(Nt)),
                e.add("utmn", h());
              var n = gn.location.hostname;
              c(n) || e.add("utmhn", n, !0),
                100 != (t = t.get(it)) && e.add("utmsp", t, !0);
            },
            Di = function (t, e) {
              e.add("utmht", new Date().getTime()),
                e.add("utmac", u(t.get(P))),
                t.get(Ee) && e.add("utmxkey", t.get(Ee), !0),
                t.get(re) && e.add("utmni", 1),
                t.get(Te) && e.add("utmgtm", t.get(Te), !0);
              var n = t.get(ve);
              n && 0 < n.length && e.add("utmdid", n.join(".")),
                Ni(t, e),
                !1 !== t.get(O) && (t.get(O) || er.w) && e.add("aip", 1),
                void 0 !== t.get(we) && e.add("utmjid", t.c(we, ""), !0),
                t.b(_e, 0) && e.add("utmredir", t.b(_e, 0), !0),
                er.bb || (er.bb = t.get(P)),
                (1 < er.ab() || er.bb != t.get(P)) && e.add("utmmt", 1),
                e.add("utmu", un.encode());
            },
            Bi = function (t, e) {
              t = t.get(fe) || [];
              for (var n = [], i = 1; i < t.length; i++)
                t[i] &&
                  n.push(
                    i +
                      ":" +
                      p(
                        t[i]
                          .replace(/%/g, "%25")
                          .replace(/:/g, "%3A")
                          .replace(/,/g, "%2C")
                      )
                  );
              n.length && e.add("utmpg", n.join(","));
            },
            Ni = function (t, e) {
              function n(t, e) {
                e && i.push(t + "=" + e + ";");
              }
              var i = [];
              n("__utma", qe(t)),
                n("__utmz", Je(t, !1)),
                n("__utmv", $e(t, !0)),
                n("__utmx", mi(t)),
                e.add("utmcc", i.join("+"), !0);
            },
            Fi = function (t, e) {
              t.get(W) &&
                (e.add("utmcs", t.get(Et), !0),
                e.add("utmsr", t.get(_t)),
                t.get(Tt) && e.add("utmvp", t.get(Tt)),
                e.add("utmsc", t.get(bt)),
                e.add("utmul", t.get(St)),
                e.add("utmje", t.get(wt)),
                e.add("utmfl", t.get(Mt), !0));
            },
            zi = function (t, e) {
              t.get(Y) && t.get(vt) && e.add("utmdt", t.get(vt), !0),
                e.add("utmhid", t.get(xt)),
                e.add("utmr", S(t.get(yt), t.get(F)), !0),
                e.add("utmp", p(t.get(gt), !0), !0);
            },
            Hi = function (t, e) {
              for (
                var n = t.get(ht), i = t.get(dt), r = t.get(pt) || [], o = 0;
                o < r.length;
                o++
              ) {
                var s = r[o];
                s &&
                  (n || (n = new An()),
                  n.f(8, o, s.name),
                  n.f(9, o, s.value),
                  3 != s.scope && n.f(11, o, "" + s.scope));
              }
              c(t.get(oe)) ||
                c(t.get(se), !0) ||
                (n || (n = new An()),
                n.f(5, 1, t.get(oe)),
                n.f(5, 2, t.get(se)),
                null != (r = t.get(ae)) && n.f(5, 3, r),
                null != (r = t.get(le)) && n.o(5, 1, r)),
                c(t.get(Re)) || (n || (n = new An()), n.f(12, 1, t.get(Re))),
                n ? e.add("utme", n.Qa(i), !0) : i && e.add("utme", i.A(), !0);
            },
            ji = function (t, e, n) {
              var i = new Oi();
              return (
                ki(t, n),
                Ii(t, i),
                i.add("utmt", "tran"),
                i.add("utmtid", e.id_, !0),
                i.add("utmtst", e.affiliation_, !0),
                i.add("utmtto", e.total_, !0),
                i.add("utmttx", e.tax_, !0),
                i.add("utmtsp", e.shipping_, !0),
                i.add("utmtci", e.city_, !0),
                i.add("utmtrg", e.state_, !0),
                i.add("utmtco", e.country_, !0),
                Hi(t, i),
                Fi(t, i),
                zi(t, i),
                (e = t.get(ft)) && i.add("utmcu", e, !0),
                n || (Bi(t, i), Di(t, i)),
                i.toString()
              );
            },
            Ui = function (t, e, n) {
              var i = new Oi();
              return (
                ki(t, n),
                Ii(t, i),
                i.add("utmt", "item"),
                i.add("utmtid", e.transId_, !0),
                i.add("utmipc", e.sku_, !0),
                i.add("utmipn", e.name_, !0),
                i.add("utmiva", e.category_, !0),
                i.add("utmipr", e.price_, !0),
                i.add("utmiqt", e.quantity_, !0),
                Hi(t, i),
                Fi(t, i),
                zi(t, i),
                (e = t.get(ft)) && i.add("utmcu", e, !0),
                n || (Bi(t, i), Di(t, i)),
                i.toString()
              );
            },
            Vi = function (t, e) {
              var n = t.get(ee);
              if ("page" == n)
                (n = new Oi()),
                  ki(t, e),
                  Ii(t, n),
                  Hi(t, n),
                  Fi(t, n),
                  zi(t, n),
                  e || (Bi(t, n), Di(t, n)),
                  (t = [n.toString()]);
              else if ("event" == n)
                (n = new Oi()),
                  ki(t, e),
                  Ii(t, n),
                  n.add("utmt", "event"),
                  Hi(t, n),
                  Fi(t, n),
                  zi(t, n),
                  e || (Bi(t, n), Di(t, n)),
                  (t = [n.toString()]);
              else if ("var" == n)
                (n = new Oi()),
                  ki(t, e),
                  Ii(t, n),
                  n.add("utmt", "var"),
                  !e && Di(t, n),
                  (t = [n.toString()]);
              else if ("trans" == n) {
                n = [];
                for (var i = t.get(ut), r = 0; r < i.length; ++r) {
                  n.push(ji(t, i[r], e));
                  for (var o = i[r].items_, s = 0; s < o.length; ++s)
                    n.push(Ui(t, o[s], e));
                }
                t = n;
              } else
                "social" == n
                  ? e
                    ? (t = [])
                    : ((n = new Oi()),
                      ki(t, e),
                      Ii(t, n),
                      n.add("utmt", "social"),
                      n.add("utmsn", t.get(ce), !0),
                      n.add("utmsa", t.get(ue), !0),
                      n.add("utmsid", t.get(he), !0),
                      Hi(t, n),
                      Fi(t, n),
                      zi(t, n),
                      Bi(t, n),
                      Di(t, n),
                      (t = [n.toString()]))
                  : "feedback" == n
                  ? e
                    ? (t = [])
                    : ((n = new Oi()),
                      ki(t, e),
                      Ii(t, n),
                      n.add("utmt", "feedback"),
                      n.add("utmfbid", t.get(me), !0),
                      n.add("utmfbpr", t.get(ge), !0),
                      Hi(t, n),
                      Fi(t, n),
                      zi(t, n),
                      Bi(t, n),
                      Di(t, n),
                      (t = [n.toString()]))
                  : (t = []);
              return t;
            },
            Gi = function (t) {
              var e = t.get(ot),
                n = t.get(ie),
                i = n && n.Ua,
                r = 0,
                o = t.get(Ie);
              if (0 == e || 2 == e)
                for (
                  var s = t.get(rt) + "?", a = Vi(t, !0), l = 0, c = a.length;
                  l < c;
                  l++
                )
                  Yi(a[l], i, s, !0), r++;
              if (1 == e || 2 == e)
                for (
                  a = Vi(t), t = t.c(be, ""), l = 0, c = a.length;
                  l < c;
                  l++
                )
                  try {
                    if (o) {
                      var u = a[l];
                      (e = (e = i) || d), Ji("", e, t + "?" + u, o);
                    } else Yi(a[l], i, t);
                    r++;
                  } catch (t) {
                    t && T(t.name, void 0, t.message);
                  }
              n && (n.fb = r);
            },
            Wi = function () {
              return "https:" == gn.location.protocol || er.G
                ? "https://ssl.google-analytics.com"
                : "http://www.google-analytics.com";
            },
            qi = function (t) {
              (this.name = "len"), (this.message = t + "-8192");
            },
            Xi = function (t) {
              (this.name = "ff2post"), (this.message = t + "-2036");
            },
            Yi = function (t, e, n, i) {
              if (((e = e || d), i || 2036 >= t.length)) $i(t, e, n);
              else {
                if (!(8192 >= t.length)) throw new qi(t.length);
                if (
                  0 <= mn.navigator.userAgent.indexOf("Firefox") &&
                  ![].reduce
                )
                  throw new Xi(t.length);
                Ji(t, e) || Ki(t, e) || Zi(t, e) || e();
              }
            },
            $i = function (t, e, n) {
              n = n || Wi() + "/__utm.gif?";
              var i = new Image(1, 1);
              (i.src = n + t),
                (i.onload = function () {
                  (i.onload = null), (i.onerror = null), e();
                }),
                (i.onerror = function () {
                  (i.onload = null), (i.onerror = null), e();
                });
            },
            Ki = function (t, e) {
              if (0 != Wi().indexOf(gn.location.protocol)) return !1;
              var n = mn.XDomainRequest;
              return (
                !!n &&
                ((n = new n()).open("POST", Wi() + "/p/__utm.gif"),
                (n.onerror = function () {
                  e();
                }),
                (n.onload = e),
                n.send(t),
                !0)
              );
            },
            Ji = function (t, e, n, i) {
              var r = mn.XMLHttpRequest;
              if (!r) return !1;
              var o = new r();
              return (
                "withCredentials" in o &&
                (o.open("POST", n || Wi() + "/p/__utm.gif", !0),
                (o.withCredentials = !0),
                o.setRequestHeader("Content-Type", "text/plain"),
                (o.onreadystatechange = function () {
                  if (4 == o.readyState) {
                    if (i)
                      try {
                        var t = o.responseText;
                        if (1 > t.length || "1" != t.charAt(0))
                          T("xhr", "ver", t), e();
                        else if (3 < i.count++)
                          T("xhr", "tmr", "" + i.count), e();
                        else if (1 == t.length) e();
                        else {
                          var n = t.charAt(1);
                          if ("d" == n) {
                            var r = i.gb;
                            (t = (t = e) || d),
                              Ji(
                                "",
                                t,
                                "https://stats.g.doubleclick.net/j/collect?" +
                                  r,
                                i
                              );
                          } else if ("g" == n) {
                            var s =
                              "https://www.google.%/ads/ga-audiences?".replace(
                                "%",
                                "com"
                              );
                            $i(i.google, e, s);
                            var a = t.substring(2);
                            if (a)
                              if (/^[a-z.]{1,6}$/.test(a)) {
                                var l =
                                  "https://www.google.%/ads/ga-audiences?".replace(
                                    "%",
                                    a
                                  );
                                $i(i.google, d, l);
                              } else T("tld", "bcc", a);
                          } else T("xhr", "brc", n), e();
                        }
                      } catch (t) {
                        e();
                      }
                    else e();
                    o = null;
                  }
                }),
                o.send(t),
                !0)
              );
            },
            Zi = function (t, e) {
              if (!gn.body)
                return (
                  (function (t, e) {
                    setTimeout(t, 100);
                  })(function () {
                    Zi(t, e);
                  }),
                  !0
                );
              t = encodeURIComponent(t);
              try {
                var n = gn.createElement('<iframe name="' + t + '"></iframe>');
              } catch (e) {
                (n = gn.createElement("iframe")).name = t;
              }
              (n.height = "0"),
                (n.width = "0"),
                (n.style.display = "none"),
                (n.style.visibility = "hidden");
              var i = Wi() + "/u/post_iframe.html";
              return (
                m(mn, "beforeunload", function () {
                  (n.src = ""), n.parentNode && n.parentNode.removeChild(n);
                }),
                setTimeout(e, 1e3),
                gn.body.appendChild(n),
                (n.src = i),
                !0
              );
            },
            Qi = function () {
              (this.G = this.w = !1),
                0 == h() % 1e4 && (hn(142), (this.G = !0)),
                (this.C = {}),
                (this.D = []),
                (this.U = 0),
                (this.S = [["www.google-analytics.com", "", "/plugins/"]]),
                (this._gasoCPath = this._gasoDomain = this.bb = void 0),
                (function () {
                  function t(t, e, n) {
                    Be(Qi.prototype, t, e, n);
                  }
                  t("_createTracker", Qi.prototype.hb, 55),
                    t("_getTracker", Qi.prototype.oa, 0),
                    t("_getTrackerByName", Qi.prototype.u, 51),
                    t("_getTrackers", Qi.prototype.pa, 130),
                    t("_anonymizeIp", Qi.prototype.aa, 16),
                    t("_forceSSL", Qi.prototype.la, 125),
                    t("_getPlugin", De, 120);
                })(),
                (function () {
                  function t(t, e, n) {
                    Be(Li.prototype, t, e, n);
                  }
                  Ne("_getName", I, 58),
                    Ne("_getAccount", P, 64),
                    Ne("_visitCode", At, 54),
                    Ne("_getClientInfo", W, 53, 1),
                    Ne("_getDetectTitle", Y, 56, 1),
                    Ne("_getDetectFlash", q, 65, 1),
                    Ne("_getLocalGifPath", rt, 57),
                    Ne("_getServiceMode", ot, 59),
                    Fe("_setClientInfo", W, 66, 2),
                    Fe("_setAccount", P, 3),
                    Fe("_setNamespace", k, 48),
                    Fe("_setAllowLinker", U, 11, 2),
                    Fe("_setDetectFlash", q, 61, 2),
                    Fe("_setDetectTitle", Y, 62, 2),
                    Fe("_setLocalGifPath", rt, 46, 0),
                    Fe("_setLocalServerMode", ot, 92, void 0, 0),
                    Fe("_setRemoteServerMode", ot, 63, void 0, 1),
                    Fe("_setLocalRemoteServerMode", ot, 47, void 0, 2),
                    Fe("_setSampleRate", it, 45, 1),
                    Fe("_setCampaignTrack", X, 36, 2),
                    Fe("_setAllowAnchor", V, 7, 2),
                    Fe("_setCampNameKey", K, 41),
                    Fe("_setCampContentKey", et, 38),
                    Fe("_setCampIdKey", $, 39),
                    Fe("_setCampMediumKey", Q, 40),
                    Fe("_setCampNOKey", nt, 42),
                    Fe("_setCampSourceKey", Z, 43),
                    Fe("_setCampTermKey", tt, 44),
                    Fe("_setCampCIdKey", J, 37),
                    Fe("_setCookiePath", F, 9, 0),
                    Fe("_setMaxCustomVariables", st, 0, 1),
                    Fe("_setVisitorCookieTimeout", z, 28, 1),
                    Fe("_setSessionCookieTimeout", H, 26, 1),
                    Fe("_setCampaignCookieTimeout", j, 29, 1),
                    Fe("_setReferrerOverride", yt, 49),
                    Fe("_setSiteSpeedSampleRate", de, 132),
                    Fe("_storeGac", mt, 143),
                    t("_trackPageview", Li.prototype.Fa, 1),
                    t("_trackEvent", Li.prototype.F, 4),
                    t("_trackPageLoadTime", Li.prototype.Ea, 100),
                    t("_trackSocial", Li.prototype.Ga, 104),
                    t("_trackTrans", Li.prototype.Ia, 18),
                    t("_sendXEvent", Li.prototype.ib, 78),
                    t("_createEventTracker", Li.prototype.ia, 74),
                    t("_getVersion", Li.prototype.qa, 60),
                    t("_setDomainName", Li.prototype.B, 6),
                    t("_setAllowHash", Li.prototype.va, 8),
                    t("_getLinkerUrl", Li.prototype.na, 52),
                    t("_link", Li.prototype.link, 101),
                    t("_linkByPost", Li.prototype.ua, 102),
                    t("_setTrans", Li.prototype.za, 20),
                    t("_addTrans", Li.prototype.$, 21),
                    t("_addItem", Li.prototype.Y, 19),
                    t("_clearTrans", Li.prototype.ea, 105),
                    t("_setTransactionDelim", Li.prototype.Aa, 82),
                    t("_setCustomVar", Li.prototype.wa, 10),
                    t("_deleteCustomVar", Li.prototype.ka, 35),
                    t("_getVisitorCustomVar", Li.prototype.ra, 50),
                    t("_setXKey", Li.prototype.Ca, 83),
                    t("_setXValue", Li.prototype.Da, 84),
                    t("_getXKey", Li.prototype.sa, 76),
                    t("_getXValue", Li.prototype.ta, 77),
                    t("_clearXKey", Li.prototype.fa, 72),
                    t("_clearXValue", Li.prototype.ga, 73),
                    t("_createXObj", Li.prototype.ja, 75),
                    t("_addIgnoredOrganic", Li.prototype.W, 15),
                    t("_clearIgnoredOrganic", Li.prototype.ba, 97),
                    t("_addIgnoredRef", Li.prototype.X, 31),
                    t("_clearIgnoredRef", Li.prototype.ca, 32),
                    t("_addOrganic", Li.prototype.Z, 14),
                    t("_clearOrganic", Li.prototype.da, 70),
                    t("_cookiePathCopy", Li.prototype.ha, 30),
                    t("_get", Li.prototype.ma, 106),
                    t("_set", Li.prototype.xa, 107),
                    t("_addEventListener", Li.prototype.addEventListener, 108),
                    t(
                      "_removeEventListener",
                      Li.prototype.removeEventListener,
                      109
                    ),
                    t("_addDevId", Li.prototype.V),
                    t("_getPlugin", De, 122),
                    t("_setPageGroup", Li.prototype.ya, 126),
                    t("_trackTiming", Li.prototype.Ha, 124),
                    t("_initData", Li.prototype.initData, 2),
                    t("_setVar", Li.prototype.Ba, 22),
                    Fe("_setSessionTimeout", H, 27, 3),
                    Fe("_setCookieTimeout", j, 25, 3),
                    Fe("_setCookiePersistence", z, 24, 1),
                    t("_setAutoTrackOutbound", d, 79),
                    t("_setTrackOutboundSubdomains", d, 81),
                    t("_setHrefExamineLimit", d, 80);
                })();
            };
          ((t = Qi.prototype).oa = function (t, e) {
            return this.hb(t, void 0, e);
          }),
            (t.hb = function (t, e, n) {
              return (
                e && hn(23),
                n && hn(67),
                null == e && (e = "~" + er.U++),
                (t = new Li(e, t, n)),
                (er.C[e] = t),
                er.D.push(t),
                t
              );
            }),
            (t.u = function (t) {
              return (t = t || ""), er.C[t] || er.hb(void 0, t);
            }),
            (t.pa = function () {
              return er.D.slice(0);
            }),
            (t.ab = function () {
              return er.D.length;
            }),
            (t.aa = function () {
              this.w = !0;
            }),
            (t.la = function () {
              this.G = !0;
            });
          var tr = function (t) {
              return "prerender" != gn.visibilityState && (t(), !0);
            },
            er = new Qi(),
            nr = mn._gat;
          nr && a(nr._getTracker) ? (er = nr) : (mn._gat = er);
          var ir = new Tn();
          function rr(t) {
            var e,
              n = 1;
            if (t)
              for (n = 0, e = t.length - 1; 0 <= e; e--) {
                var i = t.charCodeAt(e);
                n =
                  0 !=
                  (i = 266338304 & (n = ((n << 6) & 268435455) + i + (i << 14)))
                    ? n ^ (i >> 21)
                    : n;
              }
            return n;
          }
          !(function (t) {
            if (!tr(t)) {
              hn(123);
              var e = !1,
                n = function () {
                  if (!e && tr(t)) {
                    e = !0;
                    var i = gn,
                      r = n;
                    i.removeEventListener
                      ? i.removeEventListener("visibilitychange", r, !1)
                      : i.detachEvent && i.detachEvent("onvisibilitychange", r);
                  }
                };
              m(gn, "visibilitychange", n);
            }
          })(function () {
            var t = mn._gaq,
              e = !1;
            t &&
            a(t.push) &&
            !(e = "[object Array]" == Object.prototype.toString.call(Object(t)))
              ? (ir = t)
              : ((mn._gaq = ir), e && ir.push.apply(ir, t));
          });
        }.call(this));
      },
      191: function (t, e) {
        var n;
        !(function (e, n) {
          "use strict";
          "object" == typeof t.exports
            ? (t.exports = e.document
                ? n(e, !0)
                : function (t) {
                    if (!t.document)
                      throw new Error(
                        "jQuery requires a window with a document"
                      );
                    return n(t);
                  })
            : n(e);
        })("undefined" != typeof window ? window : this, function (i, r) {
          "use strict";
          var o = [],
            s = Object.getPrototypeOf,
            a = o.slice,
            l = o.flat
              ? function (t) {
                  return o.flat.call(t);
                }
              : function (t) {
                  return o.concat.apply([], t);
                },
            c = o.push,
            u = o.indexOf,
            h = {},
            d = h.toString,
            p = h.hasOwnProperty,
            f = p.toString,
            m = f.call(Object),
            g = {},
            v = function (t) {
              return (
                "function" == typeof t &&
                "number" != typeof t.nodeType &&
                "function" != typeof t.item
              );
            },
            y = function (t) {
              return null != t && t === t.window;
            },
            x = i.document,
            _ = { type: !0, src: !0, nonce: !0, noModule: !0 };
          function b(t, e, n) {
            var i,
              r,
              o = (n = n || x).createElement("script");
            if (((o.text = t), e))
              for (i in _)
                (r = e[i] || (e.getAttribute && e.getAttribute(i))) &&
                  o.setAttribute(i, r);
            n.head.appendChild(o).parentNode.removeChild(o);
          }
          function w(t) {
            return null == t
              ? t + ""
              : "object" == typeof t || "function" == typeof t
              ? h[d.call(t)] || "object"
              : typeof t;
          }
          var M = "3.6.0",
            S = function (t, e) {
              return new S.fn.init(t, e);
            };
          function E(t) {
            var e = !!t && "length" in t && t.length,
              n = w(t);
            return (
              !v(t) &&
              !y(t) &&
              ("array" === n ||
                0 === e ||
                ("number" == typeof e && e > 0 && e - 1 in t))
            );
          }
          (S.fn = S.prototype =
            {
              jquery: M,
              constructor: S,
              length: 0,
              toArray: function () {
                return a.call(this);
              },
              get: function (t) {
                return null == t
                  ? a.call(this)
                  : t < 0
                  ? this[t + this.length]
                  : this[t];
              },
              pushStack: function (t) {
                var e = S.merge(this.constructor(), t);
                return (e.prevObject = this), e;
              },
              each: function (t) {
                return S.each(this, t);
              },
              map: function (t) {
                return this.pushStack(
                  S.map(this, function (e, n) {
                    return t.call(e, n, e);
                  })
                );
              },
              slice: function () {
                return this.pushStack(a.apply(this, arguments));
              },
              first: function () {
                return this.eq(0);
              },
              last: function () {
                return this.eq(-1);
              },
              even: function () {
                return this.pushStack(
                  S.grep(this, function (t, e) {
                    return (e + 1) % 2;
                  })
                );
              },
              odd: function () {
                return this.pushStack(
                  S.grep(this, function (t, e) {
                    return e % 2;
                  })
                );
              },
              eq: function (t) {
                var e = this.length,
                  n = +t + (t < 0 ? e : 0);
                return this.pushStack(n >= 0 && n < e ? [this[n]] : []);
              },
              end: function () {
                return this.prevObject || this.constructor();
              },
              push: c,
              sort: o.sort,
              splice: o.splice,
            }),
            (S.extend = S.fn.extend =
              function () {
                var t,
                  e,
                  n,
                  i,
                  r,
                  o,
                  s = arguments[0] || {},
                  a = 1,
                  l = arguments.length,
                  c = !1;
                for (
                  "boolean" == typeof s &&
                    ((c = s), (s = arguments[a] || {}), a++),
                    "object" == typeof s || v(s) || (s = {}),
                    a === l && ((s = this), a--);
                  a < l;
                  a++
                )
                  if (null != (t = arguments[a]))
                    for (e in t)
                      (i = t[e]),
                        "__proto__" !== e &&
                          s !== i &&
                          (c &&
                          i &&
                          (S.isPlainObject(i) || (r = Array.isArray(i)))
                            ? ((n = s[e]),
                              (o =
                                r && !Array.isArray(n)
                                  ? []
                                  : r || S.isPlainObject(n)
                                  ? n
                                  : {}),
                              (r = !1),
                              (s[e] = S.extend(c, o, i)))
                            : void 0 !== i && (s[e] = i));
                return s;
              }),
            S.extend({
              expando: "jQuery" + (M + Math.random()).replace(/\D/g, ""),
              isReady: !0,
              error: function (t) {
                throw new Error(t);
              },
              noop: function () {},
              isPlainObject: function (t) {
                var e, n;
                return !(
                  !t ||
                  "[object Object]" !== d.call(t) ||
                  ((e = s(t)) &&
                    ("function" !=
                      typeof (n = p.call(e, "constructor") && e.constructor) ||
                      f.call(n) !== m))
                );
              },
              isEmptyObject: function (t) {
                var e;
                for (e in t) return !1;
                return !0;
              },
              globalEval: function (t, e, n) {
                b(t, { nonce: e && e.nonce }, n);
              },
              each: function (t, e) {
                var n,
                  i = 0;
                if (E(t))
                  for (
                    n = t.length;
                    i < n && !1 !== e.call(t[i], i, t[i]);
                    i++
                  );
                else for (i in t) if (!1 === e.call(t[i], i, t[i])) break;
                return t;
              },
              makeArray: function (t, e) {
                var n = e || [];
                return (
                  null != t &&
                    (E(Object(t))
                      ? S.merge(n, "string" == typeof t ? [t] : t)
                      : c.call(n, t)),
                  n
                );
              },
              inArray: function (t, e, n) {
                return null == e ? -1 : u.call(e, t, n);
              },
              merge: function (t, e) {
                for (var n = +e.length, i = 0, r = t.length; i < n; i++)
                  t[r++] = e[i];
                return (t.length = r), t;
              },
              grep: function (t, e, n) {
                for (var i = [], r = 0, o = t.length, s = !n; r < o; r++)
                  !e(t[r], r) !== s && i.push(t[r]);
                return i;
              },
              map: function (t, e, n) {
                var i,
                  r,
                  o = 0,
                  s = [];
                if (E(t))
                  for (i = t.length; o < i; o++)
                    null != (r = e(t[o], o, n)) && s.push(r);
                else for (o in t) null != (r = e(t[o], o, n)) && s.push(r);
                return l(s);
              },
              guid: 1,
              support: g,
            }),
            "function" == typeof Symbol &&
              (S.fn[Symbol.iterator] = o[Symbol.iterator]),
            S.each(
              "Boolean Number String Function Array Date RegExp Object Error Symbol".split(
                " "
              ),
              function (t, e) {
                h["[object " + e + "]"] = e.toLowerCase();
              }
            );
          var T = (function (t) {
            var e,
              n,
              i,
              r,
              o,
              s,
              a,
              l,
              c,
              u,
              h,
              d,
              p,
              f,
              m,
              g,
              v,
              y,
              x,
              _ = "sizzle" + 1 * new Date(),
              b = t.document,
              w = 0,
              M = 0,
              S = lt(),
              E = lt(),
              T = lt(),
              A = lt(),
              C = function (t, e) {
                return t === e && (h = !0), 0;
              },
              L = {}.hasOwnProperty,
              R = [],
              P = R.pop,
              O = R.push,
              k = R.push,
              I = R.slice,
              D = function (t, e) {
                for (var n = 0, i = t.length; n < i; n++)
                  if (t[n] === e) return n;
                return -1;
              },
              B =
                "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
              N = "[\\x20\\t\\r\\n\\f]",
              F =
                "(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",
              z =
                "\\[[\\x20\\t\\r\\n\\f]*(" +
                F +
                ")(?:" +
                N +
                "*([*^$|!~]?=)" +
                N +
                "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" +
                F +
                "))|)" +
                N +
                "*\\]",
              H =
                ":(" +
                F +
                ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" +
                z +
                ")*)|.*)\\)|)",
              j = new RegExp(N + "+", "g"),
              U = new RegExp(
                "^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
                "g"
              ),
              V = new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),
              G = new RegExp(
                "^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"
              ),
              W = new RegExp(N + "|>"),
              q = new RegExp(H),
              X = new RegExp("^" + F + "$"),
              Y = {
                ID: new RegExp("^#(" + F + ")"),
                CLASS: new RegExp("^\\.(" + F + ")"),
                TAG: new RegExp("^(" + F + "|[*])"),
                ATTR: new RegExp("^" + z),
                PSEUDO: new RegExp("^" + H),
                CHILD: new RegExp(
                  "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
                  "i"
                ),
                bool: new RegExp("^(?:" + B + ")$", "i"),
                needsContext: new RegExp(
                  "^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
                  "i"
                ),
              },
              $ = /HTML$/i,
              K = /^(?:input|select|textarea|button)$/i,
              J = /^h\d$/i,
              Z = /^[^{]+\{\s*\[native \w/,
              Q = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
              tt = /[+~]/,
              et = new RegExp(
                "\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])",
                "g"
              ),
              nt = function (t, e) {
                var n = "0x" + t.slice(1) - 65536;
                return (
                  e ||
                  (n < 0
                    ? String.fromCharCode(n + 65536)
                    : String.fromCharCode(
                        (n >> 10) | 55296,
                        (1023 & n) | 56320
                      ))
                );
              },
              it = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
              rt = function (t, e) {
                return e
                  ? "\0" === t
                    ? "�"
                    : t.slice(0, -1) +
                      "\\" +
                      t.charCodeAt(t.length - 1).toString(16) +
                      " "
                  : "\\" + t;
              },
              ot = function () {
                d();
              },
              st = _t(
                function (t) {
                  return (
                    !0 === t.disabled && "fieldset" === t.nodeName.toLowerCase()
                  );
                },
                { dir: "parentNode", next: "legend" }
              );
            try {
              k.apply((R = I.call(b.childNodes)), b.childNodes),
                R[b.childNodes.length].nodeType;
            } catch (t) {
              k = {
                apply: R.length
                  ? function (t, e) {
                      O.apply(t, I.call(e));
                    }
                  : function (t, e) {
                      for (var n = t.length, i = 0; (t[n++] = e[i++]); );
                      t.length = n - 1;
                    },
              };
            }
            function at(t, e, i, r) {
              var o,
                a,
                c,
                u,
                h,
                f,
                v,
                y = e && e.ownerDocument,
                b = e ? e.nodeType : 9;
              if (
                ((i = i || []),
                "string" != typeof t || !t || (1 !== b && 9 !== b && 11 !== b))
              )
                return i;
              if (!r && (d(e), (e = e || p), m)) {
                if (11 !== b && (h = Q.exec(t)))
                  if ((o = h[1])) {
                    if (9 === b) {
                      if (!(c = e.getElementById(o))) return i;
                      if (c.id === o) return i.push(c), i;
                    } else if (
                      y &&
                      (c = y.getElementById(o)) &&
                      x(e, c) &&
                      c.id === o
                    )
                      return i.push(c), i;
                  } else {
                    if (h[2]) return k.apply(i, e.getElementsByTagName(t)), i;
                    if (
                      (o = h[3]) &&
                      n.getElementsByClassName &&
                      e.getElementsByClassName
                    )
                      return k.apply(i, e.getElementsByClassName(o)), i;
                  }
                if (
                  n.qsa &&
                  !A[t + " "] &&
                  (!g || !g.test(t)) &&
                  (1 !== b || "object" !== e.nodeName.toLowerCase())
                ) {
                  if (((v = t), (y = e), 1 === b && (W.test(t) || G.test(t)))) {
                    for (
                      ((y = (tt.test(t) && vt(e.parentNode)) || e) === e &&
                        n.scope) ||
                        ((u = e.getAttribute("id"))
                          ? (u = u.replace(it, rt))
                          : e.setAttribute("id", (u = _))),
                        a = (f = s(t)).length;
                      a--;

                    )
                      f[a] = (u ? "#" + u : ":scope") + " " + xt(f[a]);
                    v = f.join(",");
                  }
                  try {
                    return k.apply(i, y.querySelectorAll(v)), i;
                  } catch (e) {
                    A(t, !0);
                  } finally {
                    u === _ && e.removeAttribute("id");
                  }
                }
              }
              return l(t.replace(U, "$1"), e, i, r);
            }
            function lt() {
              var t = [];
              return function e(n, r) {
                return (
                  t.push(n + " ") > i.cacheLength && delete e[t.shift()],
                  (e[n + " "] = r)
                );
              };
            }
            function ct(t) {
              return (t[_] = !0), t;
            }
            function ut(t) {
              var e = p.createElement("fieldset");
              try {
                return !!t(e);
              } catch (t) {
                return !1;
              } finally {
                e.parentNode && e.parentNode.removeChild(e), (e = null);
              }
            }
            function ht(t, e) {
              for (var n = t.split("|"), r = n.length; r--; )
                i.attrHandle[n[r]] = e;
            }
            function dt(t, e) {
              var n = e && t,
                i =
                  n &&
                  1 === t.nodeType &&
                  1 === e.nodeType &&
                  t.sourceIndex - e.sourceIndex;
              if (i) return i;
              if (n) for (; (n = n.nextSibling); ) if (n === e) return -1;
              return t ? 1 : -1;
            }
            function pt(t) {
              return function (e) {
                return "input" === e.nodeName.toLowerCase() && e.type === t;
              };
            }
            function ft(t) {
              return function (e) {
                var n = e.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && e.type === t;
              };
            }
            function mt(t) {
              return function (e) {
                return "form" in e
                  ? e.parentNode && !1 === e.disabled
                    ? "label" in e
                      ? "label" in e.parentNode
                        ? e.parentNode.disabled === t
                        : e.disabled === t
                      : e.isDisabled === t ||
                        (e.isDisabled !== !t && st(e) === t)
                    : e.disabled === t
                  : "label" in e && e.disabled === t;
              };
            }
            function gt(t) {
              return ct(function (e) {
                return (
                  (e = +e),
                  ct(function (n, i) {
                    for (var r, o = t([], n.length, e), s = o.length; s--; )
                      n[(r = o[s])] && (n[r] = !(i[r] = n[r]));
                  })
                );
              });
            }
            function vt(t) {
              return t && void 0 !== t.getElementsByTagName && t;
            }
            for (e in ((n = at.support = {}),
            (o = at.isXML =
              function (t) {
                var e = t && t.namespaceURI,
                  n = t && (t.ownerDocument || t).documentElement;
                return !$.test(e || (n && n.nodeName) || "HTML");
              }),
            (d = at.setDocument =
              function (t) {
                var e,
                  r,
                  s = t ? t.ownerDocument || t : b;
                return s != p && 9 === s.nodeType && s.documentElement
                  ? ((f = (p = s).documentElement),
                    (m = !o(p)),
                    b != p &&
                      (r = p.defaultView) &&
                      r.top !== r &&
                      (r.addEventListener
                        ? r.addEventListener("unload", ot, !1)
                        : r.attachEvent && r.attachEvent("onunload", ot)),
                    (n.scope = ut(function (t) {
                      return (
                        f.appendChild(t).appendChild(p.createElement("div")),
                        void 0 !== t.querySelectorAll &&
                          !t.querySelectorAll(":scope fieldset div").length
                      );
                    })),
                    (n.attributes = ut(function (t) {
                      return (t.className = "i"), !t.getAttribute("className");
                    })),
                    (n.getElementsByTagName = ut(function (t) {
                      return (
                        t.appendChild(p.createComment("")),
                        !t.getElementsByTagName("*").length
                      );
                    })),
                    (n.getElementsByClassName = Z.test(
                      p.getElementsByClassName
                    )),
                    (n.getById = ut(function (t) {
                      return (
                        (f.appendChild(t).id = _),
                        !p.getElementsByName || !p.getElementsByName(_).length
                      );
                    })),
                    n.getById
                      ? ((i.filter.ID = function (t) {
                          var e = t.replace(et, nt);
                          return function (t) {
                            return t.getAttribute("id") === e;
                          };
                        }),
                        (i.find.ID = function (t, e) {
                          if (void 0 !== e.getElementById && m) {
                            var n = e.getElementById(t);
                            return n ? [n] : [];
                          }
                        }))
                      : ((i.filter.ID = function (t) {
                          var e = t.replace(et, nt);
                          return function (t) {
                            var n =
                              void 0 !== t.getAttributeNode &&
                              t.getAttributeNode("id");
                            return n && n.value === e;
                          };
                        }),
                        (i.find.ID = function (t, e) {
                          if (void 0 !== e.getElementById && m) {
                            var n,
                              i,
                              r,
                              o = e.getElementById(t);
                            if (o) {
                              if (
                                (n = o.getAttributeNode("id")) &&
                                n.value === t
                              )
                                return [o];
                              for (
                                r = e.getElementsByName(t), i = 0;
                                (o = r[i++]);

                              )
                                if (
                                  (n = o.getAttributeNode("id")) &&
                                  n.value === t
                                )
                                  return [o];
                            }
                            return [];
                          }
                        })),
                    (i.find.TAG = n.getElementsByTagName
                      ? function (t, e) {
                          return void 0 !== e.getElementsByTagName
                            ? e.getElementsByTagName(t)
                            : n.qsa
                            ? e.querySelectorAll(t)
                            : void 0;
                        }
                      : function (t, e) {
                          var n,
                            i = [],
                            r = 0,
                            o = e.getElementsByTagName(t);
                          if ("*" === t) {
                            for (; (n = o[r++]); )
                              1 === n.nodeType && i.push(n);
                            return i;
                          }
                          return o;
                        }),
                    (i.find.CLASS =
                      n.getElementsByClassName &&
                      function (t, e) {
                        if (void 0 !== e.getElementsByClassName && m)
                          return e.getElementsByClassName(t);
                      }),
                    (v = []),
                    (g = []),
                    (n.qsa = Z.test(p.querySelectorAll)) &&
                      (ut(function (t) {
                        var e;
                        (f.appendChild(t).innerHTML =
                          "<a id='" +
                          _ +
                          "'></a><select id='" +
                          _ +
                          "-\r\\' msallowcapture=''><option selected=''></option></select>"),
                          t.querySelectorAll("[msallowcapture^='']").length &&
                            g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),
                          t.querySelectorAll("[selected]").length ||
                            g.push(
                              "\\[[\\x20\\t\\r\\n\\f]*(?:value|" + B + ")"
                            ),
                          t.querySelectorAll("[id~=" + _ + "-]").length ||
                            g.push("~="),
                          (e = p.createElement("input")).setAttribute(
                            "name",
                            ""
                          ),
                          t.appendChild(e),
                          t.querySelectorAll("[name='']").length ||
                            g.push(
                              "\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"
                            ),
                          t.querySelectorAll(":checked").length ||
                            g.push(":checked"),
                          t.querySelectorAll("a#" + _ + "+*").length ||
                            g.push(".#.+[+~]"),
                          t.querySelectorAll("\\\f"),
                          g.push("[\\r\\n\\f]");
                      }),
                      ut(function (t) {
                        t.innerHTML =
                          "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                        var e = p.createElement("input");
                        e.setAttribute("type", "hidden"),
                          t.appendChild(e).setAttribute("name", "D"),
                          t.querySelectorAll("[name=d]").length &&
                            g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),
                          2 !== t.querySelectorAll(":enabled").length &&
                            g.push(":enabled", ":disabled"),
                          (f.appendChild(t).disabled = !0),
                          2 !== t.querySelectorAll(":disabled").length &&
                            g.push(":enabled", ":disabled"),
                          t.querySelectorAll("*,:x"),
                          g.push(",.*:");
                      })),
                    (n.matchesSelector = Z.test(
                      (y =
                        f.matches ||
                        f.webkitMatchesSelector ||
                        f.mozMatchesSelector ||
                        f.oMatchesSelector ||
                        f.msMatchesSelector)
                    )) &&
                      ut(function (t) {
                        (n.disconnectedMatch = y.call(t, "*")),
                          y.call(t, "[s!='']:x"),
                          v.push("!=", H);
                      }),
                    (g = g.length && new RegExp(g.join("|"))),
                    (v = v.length && new RegExp(v.join("|"))),
                    (e = Z.test(f.compareDocumentPosition)),
                    (x =
                      e || Z.test(f.contains)
                        ? function (t, e) {
                            var n = 9 === t.nodeType ? t.documentElement : t,
                              i = e && e.parentNode;
                            return (
                              t === i ||
                              !(
                                !i ||
                                1 !== i.nodeType ||
                                !(n.contains
                                  ? n.contains(i)
                                  : t.compareDocumentPosition &&
                                    16 & t.compareDocumentPosition(i))
                              )
                            );
                          }
                        : function (t, e) {
                            if (e)
                              for (; (e = e.parentNode); )
                                if (e === t) return !0;
                            return !1;
                          }),
                    (C = e
                      ? function (t, e) {
                          if (t === e) return (h = !0), 0;
                          var i =
                            !t.compareDocumentPosition -
                            !e.compareDocumentPosition;
                          return (
                            i ||
                            (1 &
                              (i =
                                (t.ownerDocument || t) == (e.ownerDocument || e)
                                  ? t.compareDocumentPosition(e)
                                  : 1) ||
                            (!n.sortDetached &&
                              e.compareDocumentPosition(t) === i)
                              ? t == p || (t.ownerDocument == b && x(b, t))
                                ? -1
                                : e == p || (e.ownerDocument == b && x(b, e))
                                ? 1
                                : u
                                ? D(u, t) - D(u, e)
                                : 0
                              : 4 & i
                              ? -1
                              : 1)
                          );
                        }
                      : function (t, e) {
                          if (t === e) return (h = !0), 0;
                          var n,
                            i = 0,
                            r = t.parentNode,
                            o = e.parentNode,
                            s = [t],
                            a = [e];
                          if (!r || !o)
                            return t == p
                              ? -1
                              : e == p
                              ? 1
                              : r
                              ? -1
                              : o
                              ? 1
                              : u
                              ? D(u, t) - D(u, e)
                              : 0;
                          if (r === o) return dt(t, e);
                          for (n = t; (n = n.parentNode); ) s.unshift(n);
                          for (n = e; (n = n.parentNode); ) a.unshift(n);
                          for (; s[i] === a[i]; ) i++;
                          return i
                            ? dt(s[i], a[i])
                            : s[i] == b
                            ? -1
                            : a[i] == b
                            ? 1
                            : 0;
                        }),
                    p)
                  : p;
              }),
            (at.matches = function (t, e) {
              return at(t, null, null, e);
            }),
            (at.matchesSelector = function (t, e) {
              if (
                (d(t),
                n.matchesSelector &&
                  m &&
                  !A[e + " "] &&
                  (!v || !v.test(e)) &&
                  (!g || !g.test(e)))
              )
                try {
                  var i = y.call(t, e);
                  if (
                    i ||
                    n.disconnectedMatch ||
                    (t.document && 11 !== t.document.nodeType)
                  )
                    return i;
                } catch (t) {
                  A(e, !0);
                }
              return at(e, p, null, [t]).length > 0;
            }),
            (at.contains = function (t, e) {
              return (t.ownerDocument || t) != p && d(t), x(t, e);
            }),
            (at.attr = function (t, e) {
              (t.ownerDocument || t) != p && d(t);
              var r = i.attrHandle[e.toLowerCase()],
                o =
                  r && L.call(i.attrHandle, e.toLowerCase())
                    ? r(t, e, !m)
                    : void 0;
              return void 0 !== o
                ? o
                : n.attributes || !m
                ? t.getAttribute(e)
                : (o = t.getAttributeNode(e)) && o.specified
                ? o.value
                : null;
            }),
            (at.escape = function (t) {
              return (t + "").replace(it, rt);
            }),
            (at.error = function (t) {
              throw new Error("Syntax error, unrecognized expression: " + t);
            }),
            (at.uniqueSort = function (t) {
              var e,
                i = [],
                r = 0,
                o = 0;
              if (
                ((h = !n.detectDuplicates),
                (u = !n.sortStable && t.slice(0)),
                t.sort(C),
                h)
              ) {
                for (; (e = t[o++]); ) e === t[o] && (r = i.push(o));
                for (; r--; ) t.splice(i[r], 1);
              }
              return (u = null), t;
            }),
            (r = at.getText =
              function (t) {
                var e,
                  n = "",
                  i = 0,
                  o = t.nodeType;
                if (o) {
                  if (1 === o || 9 === o || 11 === o) {
                    if ("string" == typeof t.textContent) return t.textContent;
                    for (t = t.firstChild; t; t = t.nextSibling) n += r(t);
                  } else if (3 === o || 4 === o) return t.nodeValue;
                } else for (; (e = t[i++]); ) n += r(e);
                return n;
              }),
            ((i = at.selectors =
              {
                cacheLength: 50,
                createPseudo: ct,
                match: Y,
                attrHandle: {},
                find: {},
                relative: {
                  ">": { dir: "parentNode", first: !0 },
                  " ": { dir: "parentNode" },
                  "+": { dir: "previousSibling", first: !0 },
                  "~": { dir: "previousSibling" },
                },
                preFilter: {
                  ATTR: function (t) {
                    return (
                      (t[1] = t[1].replace(et, nt)),
                      (t[3] = (t[3] || t[4] || t[5] || "").replace(et, nt)),
                      "~=" === t[2] && (t[3] = " " + t[3] + " "),
                      t.slice(0, 4)
                    );
                  },
                  CHILD: function (t) {
                    return (
                      (t[1] = t[1].toLowerCase()),
                      "nth" === t[1].slice(0, 3)
                        ? (t[3] || at.error(t[0]),
                          (t[4] = +(t[4]
                            ? t[5] + (t[6] || 1)
                            : 2 * ("even" === t[3] || "odd" === t[3]))),
                          (t[5] = +(t[7] + t[8] || "odd" === t[3])))
                        : t[3] && at.error(t[0]),
                      t
                    );
                  },
                  PSEUDO: function (t) {
                    var e,
                      n = !t[6] && t[2];
                    return Y.CHILD.test(t[0])
                      ? null
                      : (t[3]
                          ? (t[2] = t[4] || t[5] || "")
                          : n &&
                            q.test(n) &&
                            (e = s(n, !0)) &&
                            (e = n.indexOf(")", n.length - e) - n.length) &&
                            ((t[0] = t[0].slice(0, e)), (t[2] = n.slice(0, e))),
                        t.slice(0, 3));
                  },
                },
                filter: {
                  TAG: function (t) {
                    var e = t.replace(et, nt).toLowerCase();
                    return "*" === t
                      ? function () {
                          return !0;
                        }
                      : function (t) {
                          return t.nodeName && t.nodeName.toLowerCase() === e;
                        };
                  },
                  CLASS: function (t) {
                    var e = S[t + " "];
                    return (
                      e ||
                      ((e = new RegExp(
                        "(^|[\\x20\\t\\r\\n\\f])" + t + "(" + N + "|$)"
                      )) &&
                        S(t, function (t) {
                          return e.test(
                            ("string" == typeof t.className && t.className) ||
                              (void 0 !== t.getAttribute &&
                                t.getAttribute("class")) ||
                              ""
                          );
                        }))
                    );
                  },
                  ATTR: function (t, e, n) {
                    return function (i) {
                      var r = at.attr(i, t);
                      return null == r
                        ? "!=" === e
                        : !e ||
                            ((r += ""),
                            "=" === e
                              ? r === n
                              : "!=" === e
                              ? r !== n
                              : "^=" === e
                              ? n && 0 === r.indexOf(n)
                              : "*=" === e
                              ? n && r.indexOf(n) > -1
                              : "$=" === e
                              ? n && r.slice(-n.length) === n
                              : "~=" === e
                              ? (" " + r.replace(j, " ") + " ").indexOf(n) > -1
                              : "|=" === e &&
                                (r === n ||
                                  r.slice(0, n.length + 1) === n + "-"));
                    };
                  },
                  CHILD: function (t, e, n, i, r) {
                    var o = "nth" !== t.slice(0, 3),
                      s = "last" !== t.slice(-4),
                      a = "of-type" === e;
                    return 1 === i && 0 === r
                      ? function (t) {
                          return !!t.parentNode;
                        }
                      : function (e, n, l) {
                          var c,
                            u,
                            h,
                            d,
                            p,
                            f,
                            m = o !== s ? "nextSibling" : "previousSibling",
                            g = e.parentNode,
                            v = a && e.nodeName.toLowerCase(),
                            y = !l && !a,
                            x = !1;
                          if (g) {
                            if (o) {
                              for (; m; ) {
                                for (d = e; (d = d[m]); )
                                  if (
                                    a
                                      ? d.nodeName.toLowerCase() === v
                                      : 1 === d.nodeType
                                  )
                                    return !1;
                                f = m = "only" === t && !f && "nextSibling";
                              }
                              return !0;
                            }
                            if (
                              ((f = [s ? g.firstChild : g.lastChild]), s && y)
                            ) {
                              for (
                                x =
                                  (p =
                                    (c =
                                      (u =
                                        (h = (d = g)[_] || (d[_] = {}))[
                                          d.uniqueID
                                        ] || (h[d.uniqueID] = {}))[t] ||
                                      [])[0] === w && c[1]) && c[2],
                                  d = p && g.childNodes[p];
                                (d =
                                  (++p && d && d[m]) || (x = p = 0) || f.pop());

                              )
                                if (1 === d.nodeType && ++x && d === e) {
                                  u[t] = [w, p, x];
                                  break;
                                }
                            } else if (
                              (y &&
                                (x = p =
                                  (c =
                                    (u =
                                      (h = (d = e)[_] || (d[_] = {}))[
                                        d.uniqueID
                                      ] || (h[d.uniqueID] = {}))[t] ||
                                    [])[0] === w && c[1]),
                              !1 === x)
                            )
                              for (
                                ;
                                (d =
                                  (++p && d && d[m]) ||
                                  (x = p = 0) ||
                                  f.pop()) &&
                                ((a
                                  ? d.nodeName.toLowerCase() !== v
                                  : 1 !== d.nodeType) ||
                                  !++x ||
                                  (y &&
                                    ((u =
                                      (h = d[_] || (d[_] = {}))[d.uniqueID] ||
                                      (h[d.uniqueID] = {}))[t] = [w, x]),
                                  d !== e));

                              );
                            return (x -= r) === i || (x % i == 0 && x / i >= 0);
                          }
                        };
                  },
                  PSEUDO: function (t, e) {
                    var n,
                      r =
                        i.pseudos[t] ||
                        i.setFilters[t.toLowerCase()] ||
                        at.error("unsupported pseudo: " + t);
                    return r[_]
                      ? r(e)
                      : r.length > 1
                      ? ((n = [t, t, "", e]),
                        i.setFilters.hasOwnProperty(t.toLowerCase())
                          ? ct(function (t, n) {
                              for (var i, o = r(t, e), s = o.length; s--; )
                                t[(i = D(t, o[s]))] = !(n[i] = o[s]);
                            })
                          : function (t) {
                              return r(t, 0, n);
                            })
                      : r;
                  },
                },
                pseudos: {
                  not: ct(function (t) {
                    var e = [],
                      n = [],
                      i = a(t.replace(U, "$1"));
                    return i[_]
                      ? ct(function (t, e, n, r) {
                          for (
                            var o, s = i(t, null, r, []), a = t.length;
                            a--;

                          )
                            (o = s[a]) && (t[a] = !(e[a] = o));
                        })
                      : function (t, r, o) {
                          return (
                            (e[0] = t),
                            i(e, null, o, n),
                            (e[0] = null),
                            !n.pop()
                          );
                        };
                  }),
                  has: ct(function (t) {
                    return function (e) {
                      return at(t, e).length > 0;
                    };
                  }),
                  contains: ct(function (t) {
                    return (
                      (t = t.replace(et, nt)),
                      function (e) {
                        return (e.textContent || r(e)).indexOf(t) > -1;
                      }
                    );
                  }),
                  lang: ct(function (t) {
                    return (
                      X.test(t || "") || at.error("unsupported lang: " + t),
                      (t = t.replace(et, nt).toLowerCase()),
                      function (e) {
                        var n;
                        do {
                          if (
                            (n = m
                              ? e.lang
                              : e.getAttribute("xml:lang") ||
                                e.getAttribute("lang"))
                          )
                            return (
                              (n = n.toLowerCase()) === t ||
                              0 === n.indexOf(t + "-")
                            );
                        } while ((e = e.parentNode) && 1 === e.nodeType);
                        return !1;
                      }
                    );
                  }),
                  target: function (e) {
                    var n = t.location && t.location.hash;
                    return n && n.slice(1) === e.id;
                  },
                  root: function (t) {
                    return t === f;
                  },
                  focus: function (t) {
                    return (
                      t === p.activeElement &&
                      (!p.hasFocus || p.hasFocus()) &&
                      !!(t.type || t.href || ~t.tabIndex)
                    );
                  },
                  enabled: mt(!1),
                  disabled: mt(!0),
                  checked: function (t) {
                    var e = t.nodeName.toLowerCase();
                    return (
                      ("input" === e && !!t.checked) ||
                      ("option" === e && !!t.selected)
                    );
                  },
                  selected: function (t) {
                    return (
                      t.parentNode && t.parentNode.selectedIndex,
                      !0 === t.selected
                    );
                  },
                  empty: function (t) {
                    for (t = t.firstChild; t; t = t.nextSibling)
                      if (t.nodeType < 6) return !1;
                    return !0;
                  },
                  parent: function (t) {
                    return !i.pseudos.empty(t);
                  },
                  header: function (t) {
                    return J.test(t.nodeName);
                  },
                  input: function (t) {
                    return K.test(t.nodeName);
                  },
                  button: function (t) {
                    var e = t.nodeName.toLowerCase();
                    return (
                      ("input" === e && "button" === t.type) || "button" === e
                    );
                  },
                  text: function (t) {
                    var e;
                    return (
                      "input" === t.nodeName.toLowerCase() &&
                      "text" === t.type &&
                      (null == (e = t.getAttribute("type")) ||
                        "text" === e.toLowerCase())
                    );
                  },
                  first: gt(function () {
                    return [0];
                  }),
                  last: gt(function (t, e) {
                    return [e - 1];
                  }),
                  eq: gt(function (t, e, n) {
                    return [n < 0 ? n + e : n];
                  }),
                  even: gt(function (t, e) {
                    for (var n = 0; n < e; n += 2) t.push(n);
                    return t;
                  }),
                  odd: gt(function (t, e) {
                    for (var n = 1; n < e; n += 2) t.push(n);
                    return t;
                  }),
                  lt: gt(function (t, e, n) {
                    for (var i = n < 0 ? n + e : n > e ? e : n; --i >= 0; )
                      t.push(i);
                    return t;
                  }),
                  gt: gt(function (t, e, n) {
                    for (var i = n < 0 ? n + e : n; ++i < e; ) t.push(i);
                    return t;
                  }),
                },
              }).pseudos.nth = i.pseudos.eq),
            { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }))
              i.pseudos[e] = pt(e);
            for (e in { submit: !0, reset: !0 }) i.pseudos[e] = ft(e);
            function yt() {}
            function xt(t) {
              for (var e = 0, n = t.length, i = ""; e < n; e++) i += t[e].value;
              return i;
            }
            function _t(t, e, n) {
              var i = e.dir,
                r = e.next,
                o = r || i,
                s = n && "parentNode" === o,
                a = M++;
              return e.first
                ? function (e, n, r) {
                    for (; (e = e[i]); )
                      if (1 === e.nodeType || s) return t(e, n, r);
                    return !1;
                  }
                : function (e, n, l) {
                    var c,
                      u,
                      h,
                      d = [w, a];
                    if (l) {
                      for (; (e = e[i]); )
                        if ((1 === e.nodeType || s) && t(e, n, l)) return !0;
                    } else
                      for (; (e = e[i]); )
                        if (1 === e.nodeType || s)
                          if (
                            ((u =
                              (h = e[_] || (e[_] = {}))[e.uniqueID] ||
                              (h[e.uniqueID] = {})),
                            r && r === e.nodeName.toLowerCase())
                          )
                            e = e[i] || e;
                          else {
                            if ((c = u[o]) && c[0] === w && c[1] === a)
                              return (d[2] = c[2]);
                            if (((u[o] = d), (d[2] = t(e, n, l)))) return !0;
                          }
                    return !1;
                  };
            }
            function bt(t) {
              return t.length > 1
                ? function (e, n, i) {
                    for (var r = t.length; r--; ) if (!t[r](e, n, i)) return !1;
                    return !0;
                  }
                : t[0];
            }
            function wt(t, e, n, i, r) {
              for (
                var o, s = [], a = 0, l = t.length, c = null != e;
                a < l;
                a++
              )
                (o = t[a]) &&
                  ((n && !n(o, i, r)) || (s.push(o), c && e.push(a)));
              return s;
            }
            function Mt(t, e, n, i, r, o) {
              return (
                i && !i[_] && (i = Mt(i)),
                r && !r[_] && (r = Mt(r, o)),
                ct(function (o, s, a, l) {
                  var c,
                    u,
                    h,
                    d = [],
                    p = [],
                    f = s.length,
                    m =
                      o ||
                      (function (t, e, n) {
                        for (var i = 0, r = e.length; i < r; i++)
                          at(t, e[i], n);
                        return n;
                      })(e || "*", a.nodeType ? [a] : a, []),
                    g = !t || (!o && e) ? m : wt(m, d, t, a, l),
                    v = n ? (r || (o ? t : f || i) ? [] : s) : g;
                  if ((n && n(g, v, a, l), i))
                    for (c = wt(v, p), i(c, [], a, l), u = c.length; u--; )
                      (h = c[u]) && (v[p[u]] = !(g[p[u]] = h));
                  if (o) {
                    if (r || t) {
                      if (r) {
                        for (c = [], u = v.length; u--; )
                          (h = v[u]) && c.push((g[u] = h));
                        r(null, (v = []), c, l);
                      }
                      for (u = v.length; u--; )
                        (h = v[u]) &&
                          (c = r ? D(o, h) : d[u]) > -1 &&
                          (o[c] = !(s[c] = h));
                    }
                  } else (v = wt(v === s ? v.splice(f, v.length) : v)), r ? r(null, s, v, l) : k.apply(s, v);
                })
              );
            }
            function St(t) {
              for (
                var e,
                  n,
                  r,
                  o = t.length,
                  s = i.relative[t[0].type],
                  a = s || i.relative[" "],
                  l = s ? 1 : 0,
                  u = _t(
                    function (t) {
                      return t === e;
                    },
                    a,
                    !0
                  ),
                  h = _t(
                    function (t) {
                      return D(e, t) > -1;
                    },
                    a,
                    !0
                  ),
                  d = [
                    function (t, n, i) {
                      var r =
                        (!s && (i || n !== c)) ||
                        ((e = n).nodeType ? u(t, n, i) : h(t, n, i));
                      return (e = null), r;
                    },
                  ];
                l < o;
                l++
              )
                if ((n = i.relative[t[l].type])) d = [_t(bt(d), n)];
                else {
                  if ((n = i.filter[t[l].type].apply(null, t[l].matches))[_]) {
                    for (r = ++l; r < o && !i.relative[t[r].type]; r++);
                    return Mt(
                      l > 1 && bt(d),
                      l > 1 &&
                        xt(
                          t
                            .slice(0, l - 1)
                            .concat({ value: " " === t[l - 2].type ? "*" : "" })
                        ).replace(U, "$1"),
                      n,
                      l < r && St(t.slice(l, r)),
                      r < o && St((t = t.slice(r))),
                      r < o && xt(t)
                    );
                  }
                  d.push(n);
                }
              return bt(d);
            }
            return (
              (yt.prototype = i.filters = i.pseudos),
              (i.setFilters = new yt()),
              (s = at.tokenize =
                function (t, e) {
                  var n,
                    r,
                    o,
                    s,
                    a,
                    l,
                    c,
                    u = E[t + " "];
                  if (u) return e ? 0 : u.slice(0);
                  for (a = t, l = [], c = i.preFilter; a; ) {
                    for (s in ((n && !(r = V.exec(a))) ||
                      (r && (a = a.slice(r[0].length) || a), l.push((o = []))),
                    (n = !1),
                    (r = G.exec(a)) &&
                      ((n = r.shift()),
                      o.push({ value: n, type: r[0].replace(U, " ") }),
                      (a = a.slice(n.length))),
                    i.filter))
                      !(r = Y[s].exec(a)) ||
                        (c[s] && !(r = c[s](r))) ||
                        ((n = r.shift()),
                        o.push({ value: n, type: s, matches: r }),
                        (a = a.slice(n.length)));
                    if (!n) break;
                  }
                  return e ? a.length : a ? at.error(t) : E(t, l).slice(0);
                }),
              (a = at.compile =
                function (t, e) {
                  var n,
                    r = [],
                    o = [],
                    a = T[t + " "];
                  if (!a) {
                    for (e || (e = s(t)), n = e.length; n--; )
                      (a = St(e[n]))[_] ? r.push(a) : o.push(a);
                    (a = T(
                      t,
                      (function (t, e) {
                        var n = e.length > 0,
                          r = t.length > 0,
                          o = function (o, s, a, l, u) {
                            var h,
                              f,
                              g,
                              v = 0,
                              y = "0",
                              x = o && [],
                              _ = [],
                              b = c,
                              M = o || (r && i.find.TAG("*", u)),
                              S = (w += null == b ? 1 : Math.random() || 0.1),
                              E = M.length;
                            for (
                              u && (c = s == p || s || u);
                              y !== E && null != (h = M[y]);
                              y++
                            ) {
                              if (r && h) {
                                for (
                                  f = 0,
                                    s ||
                                      h.ownerDocument == p ||
                                      (d(h), (a = !m));
                                  (g = t[f++]);

                                )
                                  if (g(h, s || p, a)) {
                                    l.push(h);
                                    break;
                                  }
                                u && (w = S);
                              }
                              n && ((h = !g && h) && v--, o && x.push(h));
                            }
                            if (((v += y), n && y !== v)) {
                              for (f = 0; (g = e[f++]); ) g(x, _, s, a);
                              if (o) {
                                if (v > 0)
                                  for (; y--; )
                                    x[y] || _[y] || (_[y] = P.call(l));
                                _ = wt(_);
                              }
                              k.apply(l, _),
                                u &&
                                  !o &&
                                  _.length > 0 &&
                                  v + e.length > 1 &&
                                  at.uniqueSort(l);
                            }
                            return u && ((w = S), (c = b)), x;
                          };
                        return n ? ct(o) : o;
                      })(o, r)
                    )).selector = t;
                  }
                  return a;
                }),
              (l = at.select =
                function (t, e, n, r) {
                  var o,
                    l,
                    c,
                    u,
                    h,
                    d = "function" == typeof t && t,
                    p = !r && s((t = d.selector || t));
                  if (((n = n || []), 1 === p.length)) {
                    if (
                      (l = p[0] = p[0].slice(0)).length > 2 &&
                      "ID" === (c = l[0]).type &&
                      9 === e.nodeType &&
                      m &&
                      i.relative[l[1].type]
                    ) {
                      if (
                        !(e = (i.find.ID(c.matches[0].replace(et, nt), e) ||
                          [])[0])
                      )
                        return n;
                      d && (e = e.parentNode),
                        (t = t.slice(l.shift().value.length));
                    }
                    for (
                      o = Y.needsContext.test(t) ? 0 : l.length;
                      o-- && ((c = l[o]), !i.relative[(u = c.type)]);

                    )
                      if (
                        (h = i.find[u]) &&
                        (r = h(
                          c.matches[0].replace(et, nt),
                          (tt.test(l[0].type) && vt(e.parentNode)) || e
                        ))
                      ) {
                        if ((l.splice(o, 1), !(t = r.length && xt(l))))
                          return k.apply(n, r), n;
                        break;
                      }
                  }
                  return (
                    (d || a(t, p))(
                      r,
                      e,
                      !m,
                      n,
                      !e || (tt.test(t) && vt(e.parentNode)) || e
                    ),
                    n
                  );
                }),
              (n.sortStable = _.split("").sort(C).join("") === _),
              (n.detectDuplicates = !!h),
              d(),
              (n.sortDetached = ut(function (t) {
                return (
                  1 & t.compareDocumentPosition(p.createElement("fieldset"))
                );
              })),
              ut(function (t) {
                return (
                  (t.innerHTML = "<a href='#'></a>"),
                  "#" === t.firstChild.getAttribute("href")
                );
              }) ||
                ht("type|href|height|width", function (t, e, n) {
                  if (!n)
                    return t.getAttribute(
                      e,
                      "type" === e.toLowerCase() ? 1 : 2
                    );
                }),
              (n.attributes &&
                ut(function (t) {
                  return (
                    (t.innerHTML = "<input/>"),
                    t.firstChild.setAttribute("value", ""),
                    "" === t.firstChild.getAttribute("value")
                  );
                })) ||
                ht("value", function (t, e, n) {
                  if (!n && "input" === t.nodeName.toLowerCase())
                    return t.defaultValue;
                }),
              ut(function (t) {
                return null == t.getAttribute("disabled");
              }) ||
                ht(B, function (t, e, n) {
                  var i;
                  if (!n)
                    return !0 === t[e]
                      ? e.toLowerCase()
                      : (i = t.getAttributeNode(e)) && i.specified
                      ? i.value
                      : null;
                }),
              at
            );
          })(i);
          (S.find = T),
            (S.expr = T.selectors),
            (S.expr[":"] = S.expr.pseudos),
            (S.uniqueSort = S.unique = T.uniqueSort),
            (S.text = T.getText),
            (S.isXMLDoc = T.isXML),
            (S.contains = T.contains),
            (S.escapeSelector = T.escape);
          var A = function (t, e, n) {
              for (
                var i = [], r = void 0 !== n;
                (t = t[e]) && 9 !== t.nodeType;

              )
                if (1 === t.nodeType) {
                  if (r && S(t).is(n)) break;
                  i.push(t);
                }
              return i;
            },
            C = function (t, e) {
              for (var n = []; t; t = t.nextSibling)
                1 === t.nodeType && t !== e && n.push(t);
              return n;
            },
            L = S.expr.match.needsContext;
          function R(t, e) {
            return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase();
          }
          var P =
            /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;
          function O(t, e, n) {
            return v(e)
              ? S.grep(t, function (t, i) {
                  return !!e.call(t, i, t) !== n;
                })
              : e.nodeType
              ? S.grep(t, function (t) {
                  return (t === e) !== n;
                })
              : "string" != typeof e
              ? S.grep(t, function (t) {
                  return u.call(e, t) > -1 !== n;
                })
              : S.filter(e, t, n);
          }
          (S.filter = function (t, e, n) {
            var i = e[0];
            return (
              n && (t = ":not(" + t + ")"),
              1 === e.length && 1 === i.nodeType
                ? S.find.matchesSelector(i, t)
                  ? [i]
                  : []
                : S.find.matches(
                    t,
                    S.grep(e, function (t) {
                      return 1 === t.nodeType;
                    })
                  )
            );
          }),
            S.fn.extend({
              find: function (t) {
                var e,
                  n,
                  i = this.length,
                  r = this;
                if ("string" != typeof t)
                  return this.pushStack(
                    S(t).filter(function () {
                      for (e = 0; e < i; e++)
                        if (S.contains(r[e], this)) return !0;
                    })
                  );
                for (n = this.pushStack([]), e = 0; e < i; e++)
                  S.find(t, r[e], n);
                return i > 1 ? S.uniqueSort(n) : n;
              },
              filter: function (t) {
                return this.pushStack(O(this, t || [], !1));
              },
              not: function (t) {
                return this.pushStack(O(this, t || [], !0));
              },
              is: function (t) {
                return !!O(
                  this,
                  "string" == typeof t && L.test(t) ? S(t) : t || [],
                  !1
                ).length;
              },
            });
          var k,
            I = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
          ((S.fn.init = function (t, e, n) {
            var i, r;
            if (!t) return this;
            if (((n = n || k), "string" == typeof t)) {
              if (
                !(i =
                  "<" === t[0] && ">" === t[t.length - 1] && t.length >= 3
                    ? [null, t, null]
                    : I.exec(t)) ||
                (!i[1] && e)
              )
                return !e || e.jquery
                  ? (e || n).find(t)
                  : this.constructor(e).find(t);
              if (i[1]) {
                if (
                  ((e = e instanceof S ? e[0] : e),
                  S.merge(
                    this,
                    S.parseHTML(
                      i[1],
                      e && e.nodeType ? e.ownerDocument || e : x,
                      !0
                    )
                  ),
                  P.test(i[1]) && S.isPlainObject(e))
                )
                  for (i in e) v(this[i]) ? this[i](e[i]) : this.attr(i, e[i]);
                return this;
              }
              return (
                (r = x.getElementById(i[2])) &&
                  ((this[0] = r), (this.length = 1)),
                this
              );
            }
            return t.nodeType
              ? ((this[0] = t), (this.length = 1), this)
              : v(t)
              ? void 0 !== n.ready
                ? n.ready(t)
                : t(S)
              : S.makeArray(t, this);
          }).prototype = S.fn),
            (k = S(x));
          var D = /^(?:parents|prev(?:Until|All))/,
            B = { children: !0, contents: !0, next: !0, prev: !0 };
          function N(t, e) {
            for (; (t = t[e]) && 1 !== t.nodeType; );
            return t;
          }
          S.fn.extend({
            has: function (t) {
              var e = S(t, this),
                n = e.length;
              return this.filter(function () {
                for (var t = 0; t < n; t++)
                  if (S.contains(this, e[t])) return !0;
              });
            },
            closest: function (t, e) {
              var n,
                i = 0,
                r = this.length,
                o = [],
                s = "string" != typeof t && S(t);
              if (!L.test(t))
                for (; i < r; i++)
                  for (n = this[i]; n && n !== e; n = n.parentNode)
                    if (
                      n.nodeType < 11 &&
                      (s
                        ? s.index(n) > -1
                        : 1 === n.nodeType && S.find.matchesSelector(n, t))
                    ) {
                      o.push(n);
                      break;
                    }
              return this.pushStack(o.length > 1 ? S.uniqueSort(o) : o);
            },
            index: function (t) {
              return t
                ? "string" == typeof t
                  ? u.call(S(t), this[0])
                  : u.call(this, t.jquery ? t[0] : t)
                : this[0] && this[0].parentNode
                ? this.first().prevAll().length
                : -1;
            },
            add: function (t, e) {
              return this.pushStack(S.uniqueSort(S.merge(this.get(), S(t, e))));
            },
            addBack: function (t) {
              return this.add(
                null == t ? this.prevObject : this.prevObject.filter(t)
              );
            },
          }),
            S.each(
              {
                parent: function (t) {
                  var e = t.parentNode;
                  return e && 11 !== e.nodeType ? e : null;
                },
                parents: function (t) {
                  return A(t, "parentNode");
                },
                parentsUntil: function (t, e, n) {
                  return A(t, "parentNode", n);
                },
                next: function (t) {
                  return N(t, "nextSibling");
                },
                prev: function (t) {
                  return N(t, "previousSibling");
                },
                nextAll: function (t) {
                  return A(t, "nextSibling");
                },
                prevAll: function (t) {
                  return A(t, "previousSibling");
                },
                nextUntil: function (t, e, n) {
                  return A(t, "nextSibling", n);
                },
                prevUntil: function (t, e, n) {
                  return A(t, "previousSibling", n);
                },
                siblings: function (t) {
                  return C((t.parentNode || {}).firstChild, t);
                },
                children: function (t) {
                  return C(t.firstChild);
                },
                contents: function (t) {
                  return null != t.contentDocument && s(t.contentDocument)
                    ? t.contentDocument
                    : (R(t, "template") && (t = t.content || t),
                      S.merge([], t.childNodes));
                },
              },
              function (t, e) {
                S.fn[t] = function (n, i) {
                  var r = S.map(this, e, n);
                  return (
                    "Until" !== t.slice(-5) && (i = n),
                    i && "string" == typeof i && (r = S.filter(i, r)),
                    this.length > 1 &&
                      (B[t] || S.uniqueSort(r), D.test(t) && r.reverse()),
                    this.pushStack(r)
                  );
                };
              }
            );
          var F = /[^\x20\t\r\n\f]+/g;
          function z(t) {
            return t;
          }
          function H(t) {
            throw t;
          }
          function j(t, e, n, i) {
            var r;
            try {
              t && v((r = t.promise))
                ? r.call(t).done(e).fail(n)
                : t && v((r = t.then))
                ? r.call(t, e, n)
                : e.apply(void 0, [t].slice(i));
            } catch (t) {
              n.apply(void 0, [t]);
            }
          }
          (S.Callbacks = function (t) {
            t =
              "string" == typeof t
                ? (function (t) {
                    var e = {};
                    return (
                      S.each(t.match(F) || [], function (t, n) {
                        e[n] = !0;
                      }),
                      e
                    );
                  })(t)
                : S.extend({}, t);
            var e,
              n,
              i,
              r,
              o = [],
              s = [],
              a = -1,
              l = function () {
                for (r = r || t.once, i = e = !0; s.length; a = -1)
                  for (n = s.shift(); ++a < o.length; )
                    !1 === o[a].apply(n[0], n[1]) &&
                      t.stopOnFalse &&
                      ((a = o.length), (n = !1));
                t.memory || (n = !1), (e = !1), r && (o = n ? [] : "");
              },
              c = {
                add: function () {
                  return (
                    o &&
                      (n && !e && ((a = o.length - 1), s.push(n)),
                      (function e(n) {
                        S.each(n, function (n, i) {
                          v(i)
                            ? (t.unique && c.has(i)) || o.push(i)
                            : i && i.length && "string" !== w(i) && e(i);
                        });
                      })(arguments),
                      n && !e && l()),
                    this
                  );
                },
                remove: function () {
                  return (
                    S.each(arguments, function (t, e) {
                      for (var n; (n = S.inArray(e, o, n)) > -1; )
                        o.splice(n, 1), n <= a && a--;
                    }),
                    this
                  );
                },
                has: function (t) {
                  return t ? S.inArray(t, o) > -1 : o.length > 0;
                },
                empty: function () {
                  return o && (o = []), this;
                },
                disable: function () {
                  return (r = s = []), (o = n = ""), this;
                },
                disabled: function () {
                  return !o;
                },
                lock: function () {
                  return (r = s = []), n || e || (o = n = ""), this;
                },
                locked: function () {
                  return !!r;
                },
                fireWith: function (t, n) {
                  return (
                    r ||
                      ((n = [t, (n = n || []).slice ? n.slice() : n]),
                      s.push(n),
                      e || l()),
                    this
                  );
                },
                fire: function () {
                  return c.fireWith(this, arguments), this;
                },
                fired: function () {
                  return !!i;
                },
              };
            return c;
          }),
            S.extend({
              Deferred: function (t) {
                var e = [
                    [
                      "notify",
                      "progress",
                      S.Callbacks("memory"),
                      S.Callbacks("memory"),
                      2,
                    ],
                    [
                      "resolve",
                      "done",
                      S.Callbacks("once memory"),
                      S.Callbacks("once memory"),
                      0,
                      "resolved",
                    ],
                    [
                      "reject",
                      "fail",
                      S.Callbacks("once memory"),
                      S.Callbacks("once memory"),
                      1,
                      "rejected",
                    ],
                  ],
                  n = "pending",
                  r = {
                    state: function () {
                      return n;
                    },
                    always: function () {
                      return o.done(arguments).fail(arguments), this;
                    },
                    catch: function (t) {
                      return r.then(null, t);
                    },
                    pipe: function () {
                      var t = arguments;
                      return S.Deferred(function (n) {
                        S.each(e, function (e, i) {
                          var r = v(t[i[4]]) && t[i[4]];
                          o[i[1]](function () {
                            var t = r && r.apply(this, arguments);
                            t && v(t.promise)
                              ? t
                                  .promise()
                                  .progress(n.notify)
                                  .done(n.resolve)
                                  .fail(n.reject)
                              : n[i[0] + "With"](this, r ? [t] : arguments);
                          });
                        }),
                          (t = null);
                      }).promise();
                    },
                    then: function (t, n, r) {
                      var o = 0;
                      function s(t, e, n, r) {
                        return function () {
                          var a = this,
                            l = arguments,
                            c = function () {
                              var i, c;
                              if (!(t < o)) {
                                if ((i = n.apply(a, l)) === e.promise())
                                  throw new TypeError(
                                    "Thenable self-resolution"
                                  );
                                (c =
                                  i &&
                                  ("object" == typeof i ||
                                    "function" == typeof i) &&
                                  i.then),
                                  v(c)
                                    ? r
                                      ? c.call(i, s(o, e, z, r), s(o, e, H, r))
                                      : (o++,
                                        c.call(
                                          i,
                                          s(o, e, z, r),
                                          s(o, e, H, r),
                                          s(o, e, z, e.notifyWith)
                                        ))
                                    : (n !== z && ((a = void 0), (l = [i])),
                                      (r || e.resolveWith)(a, l));
                              }
                            },
                            u = r
                              ? c
                              : function () {
                                  try {
                                    c();
                                  } catch (i) {
                                    S.Deferred.exceptionHook &&
                                      S.Deferred.exceptionHook(i, u.stackTrace),
                                      t + 1 >= o &&
                                        (n !== H && ((a = void 0), (l = [i])),
                                        e.rejectWith(a, l));
                                  }
                                };
                          t
                            ? u()
                            : (S.Deferred.getStackHook &&
                                (u.stackTrace = S.Deferred.getStackHook()),
                              i.setTimeout(u));
                        };
                      }
                      return S.Deferred(function (i) {
                        e[0][3].add(s(0, i, v(r) ? r : z, i.notifyWith)),
                          e[1][3].add(s(0, i, v(t) ? t : z)),
                          e[2][3].add(s(0, i, v(n) ? n : H));
                      }).promise();
                    },
                    promise: function (t) {
                      return null != t ? S.extend(t, r) : r;
                    },
                  },
                  o = {};
                return (
                  S.each(e, function (t, i) {
                    var s = i[2],
                      a = i[5];
                    (r[i[1]] = s.add),
                      a &&
                        s.add(
                          function () {
                            n = a;
                          },
                          e[3 - t][2].disable,
                          e[3 - t][3].disable,
                          e[0][2].lock,
                          e[0][3].lock
                        ),
                      s.add(i[3].fire),
                      (o[i[0]] = function () {
                        return (
                          o[i[0] + "With"](
                            this === o ? void 0 : this,
                            arguments
                          ),
                          this
                        );
                      }),
                      (o[i[0] + "With"] = s.fireWith);
                  }),
                  r.promise(o),
                  t && t.call(o, o),
                  o
                );
              },
              when: function (t) {
                var e = arguments.length,
                  n = e,
                  i = Array(n),
                  r = a.call(arguments),
                  o = S.Deferred(),
                  s = function (t) {
                    return function (n) {
                      (i[t] = this),
                        (r[t] = arguments.length > 1 ? a.call(arguments) : n),
                        --e || o.resolveWith(i, r);
                    };
                  };
                if (
                  e <= 1 &&
                  (j(t, o.done(s(n)).resolve, o.reject, !e),
                  "pending" === o.state() || v(r[n] && r[n].then))
                )
                  return o.then();
                for (; n--; ) j(r[n], s(n), o.reject);
                return o.promise();
              },
            });
          var U = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
          (S.Deferred.exceptionHook = function (t, e) {
            i.console &&
              i.console.warn &&
              t &&
              U.test(t.name) &&
              i.console.warn(
                "jQuery.Deferred exception: " + t.message,
                t.stack,
                e
              );
          }),
            (S.readyException = function (t) {
              i.setTimeout(function () {
                throw t;
              });
            });
          var V = S.Deferred();
          function G() {
            x.removeEventListener("DOMContentLoaded", G),
              i.removeEventListener("load", G),
              S.ready();
          }
          (S.fn.ready = function (t) {
            return (
              V.then(t).catch(function (t) {
                S.readyException(t);
              }),
              this
            );
          }),
            S.extend({
              isReady: !1,
              readyWait: 1,
              ready: function (t) {
                (!0 === t ? --S.readyWait : S.isReady) ||
                  ((S.isReady = !0),
                  (!0 !== t && --S.readyWait > 0) || V.resolveWith(x, [S]));
              },
            }),
            (S.ready.then = V.then),
            "complete" === x.readyState ||
            ("loading" !== x.readyState && !x.documentElement.doScroll)
              ? i.setTimeout(S.ready)
              : (x.addEventListener("DOMContentLoaded", G),
                i.addEventListener("load", G));
          var W = function (t, e, n, i, r, o, s) {
              var a = 0,
                l = t.length,
                c = null == n;
              if ("object" === w(n))
                for (a in ((r = !0), n)) W(t, e, a, n[a], !0, o, s);
              else if (
                void 0 !== i &&
                ((r = !0),
                v(i) || (s = !0),
                c &&
                  (s
                    ? (e.call(t, i), (e = null))
                    : ((c = e),
                      (e = function (t, e, n) {
                        return c.call(S(t), n);
                      }))),
                e)
              )
                for (; a < l; a++)
                  e(t[a], n, s ? i : i.call(t[a], a, e(t[a], n)));
              return r ? t : c ? e.call(t) : l ? e(t[0], n) : o;
            },
            q = /^-ms-/,
            X = /-([a-z])/g;
          function Y(t, e) {
            return e.toUpperCase();
          }
          function $(t) {
            return t.replace(q, "ms-").replace(X, Y);
          }
          var K = function (t) {
            return 1 === t.nodeType || 9 === t.nodeType || !+t.nodeType;
          };
          function J() {
            this.expando = S.expando + J.uid++;
          }
          (J.uid = 1),
            (J.prototype = {
              cache: function (t) {
                var e = t[this.expando];
                return (
                  e ||
                    ((e = {}),
                    K(t) &&
                      (t.nodeType
                        ? (t[this.expando] = e)
                        : Object.defineProperty(t, this.expando, {
                            value: e,
                            configurable: !0,
                          }))),
                  e
                );
              },
              set: function (t, e, n) {
                var i,
                  r = this.cache(t);
                if ("string" == typeof e) r[$(e)] = n;
                else for (i in e) r[$(i)] = e[i];
                return r;
              },
              get: function (t, e) {
                return void 0 === e
                  ? this.cache(t)
                  : t[this.expando] && t[this.expando][$(e)];
              },
              access: function (t, e, n) {
                return void 0 === e ||
                  (e && "string" == typeof e && void 0 === n)
                  ? this.get(t, e)
                  : (this.set(t, e, n), void 0 !== n ? n : e);
              },
              remove: function (t, e) {
                var n,
                  i = t[this.expando];
                if (void 0 !== i) {
                  if (void 0 !== e) {
                    n = (e = Array.isArray(e)
                      ? e.map($)
                      : (e = $(e)) in i
                      ? [e]
                      : e.match(F) || []).length;
                    for (; n--; ) delete i[e[n]];
                  }
                  (void 0 === e || S.isEmptyObject(i)) &&
                    (t.nodeType
                      ? (t[this.expando] = void 0)
                      : delete t[this.expando]);
                }
              },
              hasData: function (t) {
                var e = t[this.expando];
                return void 0 !== e && !S.isEmptyObject(e);
              },
            });
          var Z = new J(),
            Q = new J(),
            tt = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            et = /[A-Z]/g;
          function nt(t, e, n) {
            var i;
            if (void 0 === n && 1 === t.nodeType)
              if (
                ((i = "data-" + e.replace(et, "-$&").toLowerCase()),
                "string" == typeof (n = t.getAttribute(i)))
              ) {
                try {
                  n = (function (t) {
                    return (
                      "true" === t ||
                      ("false" !== t &&
                        ("null" === t
                          ? null
                          : t === +t + ""
                          ? +t
                          : tt.test(t)
                          ? JSON.parse(t)
                          : t))
                    );
                  })(n);
                } catch (t) {}
                Q.set(t, e, n);
              } else n = void 0;
            return n;
          }
          S.extend({
            hasData: function (t) {
              return Q.hasData(t) || Z.hasData(t);
            },
            data: function (t, e, n) {
              return Q.access(t, e, n);
            },
            removeData: function (t, e) {
              Q.remove(t, e);
            },
            _data: function (t, e, n) {
              return Z.access(t, e, n);
            },
            _removeData: function (t, e) {
              Z.remove(t, e);
            },
          }),
            S.fn.extend({
              data: function (t, e) {
                var n,
                  i,
                  r,
                  o = this[0],
                  s = o && o.attributes;
                if (void 0 === t) {
                  if (
                    this.length &&
                    ((r = Q.get(o)),
                    1 === o.nodeType && !Z.get(o, "hasDataAttrs"))
                  ) {
                    for (n = s.length; n--; )
                      s[n] &&
                        0 === (i = s[n].name).indexOf("data-") &&
                        ((i = $(i.slice(5))), nt(o, i, r[i]));
                    Z.set(o, "hasDataAttrs", !0);
                  }
                  return r;
                }
                return "object" == typeof t
                  ? this.each(function () {
                      Q.set(this, t);
                    })
                  : W(
                      this,
                      function (e) {
                        var n;
                        if (o && void 0 === e)
                          return void 0 !== (n = Q.get(o, t)) ||
                            void 0 !== (n = nt(o, t))
                            ? n
                            : void 0;
                        this.each(function () {
                          Q.set(this, t, e);
                        });
                      },
                      null,
                      e,
                      arguments.length > 1,
                      null,
                      !0
                    );
              },
              removeData: function (t) {
                return this.each(function () {
                  Q.remove(this, t);
                });
              },
            }),
            S.extend({
              queue: function (t, e, n) {
                var i;
                if (t)
                  return (
                    (e = (e || "fx") + "queue"),
                    (i = Z.get(t, e)),
                    n &&
                      (!i || Array.isArray(n)
                        ? (i = Z.access(t, e, S.makeArray(n)))
                        : i.push(n)),
                    i || []
                  );
              },
              dequeue: function (t, e) {
                e = e || "fx";
                var n = S.queue(t, e),
                  i = n.length,
                  r = n.shift(),
                  o = S._queueHooks(t, e);
                "inprogress" === r && ((r = n.shift()), i--),
                  r &&
                    ("fx" === e && n.unshift("inprogress"),
                    delete o.stop,
                    r.call(
                      t,
                      function () {
                        S.dequeue(t, e);
                      },
                      o
                    )),
                  !i && o && o.empty.fire();
              },
              _queueHooks: function (t, e) {
                var n = e + "queueHooks";
                return (
                  Z.get(t, n) ||
                  Z.access(t, n, {
                    empty: S.Callbacks("once memory").add(function () {
                      Z.remove(t, [e + "queue", n]);
                    }),
                  })
                );
              },
            }),
            S.fn.extend({
              queue: function (t, e) {
                var n = 2;
                return (
                  "string" != typeof t && ((e = t), (t = "fx"), n--),
                  arguments.length < n
                    ? S.queue(this[0], t)
                    : void 0 === e
                    ? this
                    : this.each(function () {
                        var n = S.queue(this, t, e);
                        S._queueHooks(this, t),
                          "fx" === t &&
                            "inprogress" !== n[0] &&
                            S.dequeue(this, t);
                      })
                );
              },
              dequeue: function (t) {
                return this.each(function () {
                  S.dequeue(this, t);
                });
              },
              clearQueue: function (t) {
                return this.queue(t || "fx", []);
              },
              promise: function (t, e) {
                var n,
                  i = 1,
                  r = S.Deferred(),
                  o = this,
                  s = this.length,
                  a = function () {
                    --i || r.resolveWith(o, [o]);
                  };
                for (
                  "string" != typeof t && ((e = t), (t = void 0)),
                    t = t || "fx";
                  s--;

                )
                  (n = Z.get(o[s], t + "queueHooks")) &&
                    n.empty &&
                    (i++, n.empty.add(a));
                return a(), r.promise(e);
              },
            });
          var it = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            rt = new RegExp("^(?:([+-])=|)(" + it + ")([a-z%]*)$", "i"),
            ot = ["Top", "Right", "Bottom", "Left"],
            st = x.documentElement,
            at = function (t) {
              return S.contains(t.ownerDocument, t);
            },
            lt = { composed: !0 };
          st.getRootNode &&
            (at = function (t) {
              return (
                S.contains(t.ownerDocument, t) ||
                t.getRootNode(lt) === t.ownerDocument
              );
            });
          var ct = function (t, e) {
            return (
              "none" === (t = e || t).style.display ||
              ("" === t.style.display &&
                at(t) &&
                "none" === S.css(t, "display"))
            );
          };
          function ut(t, e, n, i) {
            var r,
              o,
              s = 20,
              a = i
                ? function () {
                    return i.cur();
                  }
                : function () {
                    return S.css(t, e, "");
                  },
              l = a(),
              c = (n && n[3]) || (S.cssNumber[e] ? "" : "px"),
              u =
                t.nodeType &&
                (S.cssNumber[e] || ("px" !== c && +l)) &&
                rt.exec(S.css(t, e));
            if (u && u[3] !== c) {
              for (l /= 2, c = c || u[3], u = +l || 1; s--; )
                S.style(t, e, u + c),
                  (1 - o) * (1 - (o = a() / l || 0.5)) <= 0 && (s = 0),
                  (u /= o);
              (u *= 2), S.style(t, e, u + c), (n = n || []);
            }
            return (
              n &&
                ((u = +u || +l || 0),
                (r = n[1] ? u + (n[1] + 1) * n[2] : +n[2]),
                i && ((i.unit = c), (i.start = u), (i.end = r))),
              r
            );
          }
          var ht = {};
          function dt(t) {
            var e,
              n = t.ownerDocument,
              i = t.nodeName,
              r = ht[i];
            return (
              r ||
              ((e = n.body.appendChild(n.createElement(i))),
              (r = S.css(e, "display")),
              e.parentNode.removeChild(e),
              "none" === r && (r = "block"),
              (ht[i] = r),
              r)
            );
          }
          function pt(t, e) {
            for (var n, i, r = [], o = 0, s = t.length; o < s; o++)
              (i = t[o]).style &&
                ((n = i.style.display),
                e
                  ? ("none" === n &&
                      ((r[o] = Z.get(i, "display") || null),
                      r[o] || (i.style.display = "")),
                    "" === i.style.display && ct(i) && (r[o] = dt(i)))
                  : "none" !== n && ((r[o] = "none"), Z.set(i, "display", n)));
            for (o = 0; o < s; o++) null != r[o] && (t[o].style.display = r[o]);
            return t;
          }
          S.fn.extend({
            show: function () {
              return pt(this, !0);
            },
            hide: function () {
              return pt(this);
            },
            toggle: function (t) {
              return "boolean" == typeof t
                ? t
                  ? this.show()
                  : this.hide()
                : this.each(function () {
                    ct(this) ? S(this).show() : S(this).hide();
                  });
            },
          });
          var ft,
            mt,
            gt = /^(?:checkbox|radio)$/i,
            vt = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i,
            yt = /^$|^module$|\/(?:java|ecma)script/i;
          (ft = x.createDocumentFragment().appendChild(x.createElement("div"))),
            (mt = x.createElement("input")).setAttribute("type", "radio"),
            mt.setAttribute("checked", "checked"),
            mt.setAttribute("name", "t"),
            ft.appendChild(mt),
            (g.checkClone = ft.cloneNode(!0).cloneNode(!0).lastChild.checked),
            (ft.innerHTML = "<textarea>x</textarea>"),
            (g.noCloneChecked = !!ft.cloneNode(!0).lastChild.defaultValue),
            (ft.innerHTML = "<option></option>"),
            (g.option = !!ft.lastChild);
          var xt = {
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""],
          };
          function _t(t, e) {
            var n;
            return (
              (n =
                void 0 !== t.getElementsByTagName
                  ? t.getElementsByTagName(e || "*")
                  : void 0 !== t.querySelectorAll
                  ? t.querySelectorAll(e || "*")
                  : []),
              void 0 === e || (e && R(t, e)) ? S.merge([t], n) : n
            );
          }
          function bt(t, e) {
            for (var n = 0, i = t.length; n < i; n++)
              Z.set(t[n], "globalEval", !e || Z.get(e[n], "globalEval"));
          }
          (xt.tbody = xt.tfoot = xt.colgroup = xt.caption = xt.thead),
            (xt.th = xt.td),
            g.option ||
              (xt.optgroup = xt.option =
                [1, "<select multiple='multiple'>", "</select>"]);
          var wt = /<|&#?\w+;/;
          function Mt(t, e, n, i, r) {
            for (
              var o,
                s,
                a,
                l,
                c,
                u,
                h = e.createDocumentFragment(),
                d = [],
                p = 0,
                f = t.length;
              p < f;
              p++
            )
              if ((o = t[p]) || 0 === o)
                if ("object" === w(o)) S.merge(d, o.nodeType ? [o] : o);
                else if (wt.test(o)) {
                  for (
                    s = s || h.appendChild(e.createElement("div")),
                      a = (vt.exec(o) || ["", ""])[1].toLowerCase(),
                      l = xt[a] || xt._default,
                      s.innerHTML = l[1] + S.htmlPrefilter(o) + l[2],
                      u = l[0];
                    u--;

                  )
                    s = s.lastChild;
                  S.merge(d, s.childNodes),
                    ((s = h.firstChild).textContent = "");
                } else d.push(e.createTextNode(o));
            for (h.textContent = "", p = 0; (o = d[p++]); )
              if (i && S.inArray(o, i) > -1) r && r.push(o);
              else if (
                ((c = at(o)),
                (s = _t(h.appendChild(o), "script")),
                c && bt(s),
                n)
              )
                for (u = 0; (o = s[u++]); ) yt.test(o.type || "") && n.push(o);
            return h;
          }
          var St = /^([^.]*)(?:\.(.+)|)/;
          function Et() {
            return !0;
          }
          function Tt() {
            return !1;
          }
          function At(t, e) {
            return (
              (t ===
                (function () {
                  try {
                    return x.activeElement;
                  } catch (t) {}
                })()) ==
              ("focus" === e)
            );
          }
          function Ct(t, e, n, i, r, o) {
            var s, a;
            if ("object" == typeof e) {
              for (a in ("string" != typeof n && ((i = i || n), (n = void 0)),
              e))
                Ct(t, a, n, i, e[a], o);
              return t;
            }
            if (
              (null == i && null == r
                ? ((r = n), (i = n = void 0))
                : null == r &&
                  ("string" == typeof n
                    ? ((r = i), (i = void 0))
                    : ((r = i), (i = n), (n = void 0))),
              !1 === r)
            )
              r = Tt;
            else if (!r) return t;
            return (
              1 === o &&
                ((s = r),
                ((r = function (t) {
                  return S().off(t), s.apply(this, arguments);
                }).guid = s.guid || (s.guid = S.guid++))),
              t.each(function () {
                S.event.add(this, e, r, i, n);
              })
            );
          }
          function Lt(t, e, n) {
            n
              ? (Z.set(t, e, !1),
                S.event.add(t, e, {
                  namespace: !1,
                  handler: function (t) {
                    var i,
                      r,
                      o = Z.get(this, e);
                    if (1 & t.isTrigger && this[e]) {
                      if (o.length)
                        (S.event.special[e] || {}).delegateType &&
                          t.stopPropagation();
                      else if (
                        ((o = a.call(arguments)),
                        Z.set(this, e, o),
                        (i = n(this, e)),
                        this[e](),
                        o !== (r = Z.get(this, e)) || i
                          ? Z.set(this, e, !1)
                          : (r = {}),
                        o !== r)
                      )
                        return (
                          t.stopImmediatePropagation(),
                          t.preventDefault(),
                          r && r.value
                        );
                    } else
                      o.length &&
                        (Z.set(this, e, {
                          value: S.event.trigger(
                            S.extend(o[0], S.Event.prototype),
                            o.slice(1),
                            this
                          ),
                        }),
                        t.stopImmediatePropagation());
                  },
                }))
              : void 0 === Z.get(t, e) && S.event.add(t, e, Et);
          }
          (S.event = {
            global: {},
            add: function (t, e, n, i, r) {
              var o,
                s,
                a,
                l,
                c,
                u,
                h,
                d,
                p,
                f,
                m,
                g = Z.get(t);
              if (K(t))
                for (
                  n.handler && ((n = (o = n).handler), (r = o.selector)),
                    r && S.find.matchesSelector(st, r),
                    n.guid || (n.guid = S.guid++),
                    (l = g.events) || (l = g.events = Object.create(null)),
                    (s = g.handle) ||
                      (s = g.handle =
                        function (e) {
                          return void 0 !== S && S.event.triggered !== e.type
                            ? S.event.dispatch.apply(t, arguments)
                            : void 0;
                        }),
                    c = (e = (e || "").match(F) || [""]).length;
                  c--;

                )
                  (p = m = (a = St.exec(e[c]) || [])[1]),
                    (f = (a[2] || "").split(".").sort()),
                    p &&
                      ((h = S.event.special[p] || {}),
                      (p = (r ? h.delegateType : h.bindType) || p),
                      (h = S.event.special[p] || {}),
                      (u = S.extend(
                        {
                          type: p,
                          origType: m,
                          data: i,
                          handler: n,
                          guid: n.guid,
                          selector: r,
                          needsContext: r && S.expr.match.needsContext.test(r),
                          namespace: f.join("."),
                        },
                        o
                      )),
                      (d = l[p]) ||
                        (((d = l[p] = []).delegateCount = 0),
                        (h.setup && !1 !== h.setup.call(t, i, f, s)) ||
                          (t.addEventListener && t.addEventListener(p, s))),
                      h.add &&
                        (h.add.call(t, u),
                        u.handler.guid || (u.handler.guid = n.guid)),
                      r ? d.splice(d.delegateCount++, 0, u) : d.push(u),
                      (S.event.global[p] = !0));
            },
            remove: function (t, e, n, i, r) {
              var o,
                s,
                a,
                l,
                c,
                u,
                h,
                d,
                p,
                f,
                m,
                g = Z.hasData(t) && Z.get(t);
              if (g && (l = g.events)) {
                for (c = (e = (e || "").match(F) || [""]).length; c--; )
                  if (
                    ((p = m = (a = St.exec(e[c]) || [])[1]),
                    (f = (a[2] || "").split(".").sort()),
                    p)
                  ) {
                    for (
                      h = S.event.special[p] || {},
                        d =
                          l[(p = (i ? h.delegateType : h.bindType) || p)] || [],
                        a =
                          a[2] &&
                          new RegExp(
                            "(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"
                          ),
                        s = o = d.length;
                      o--;

                    )
                      (u = d[o]),
                        (!r && m !== u.origType) ||
                          (n && n.guid !== u.guid) ||
                          (a && !a.test(u.namespace)) ||
                          (i &&
                            i !== u.selector &&
                            ("**" !== i || !u.selector)) ||
                          (d.splice(o, 1),
                          u.selector && d.delegateCount--,
                          h.remove && h.remove.call(t, u));
                    s &&
                      !d.length &&
                      ((h.teardown && !1 !== h.teardown.call(t, f, g.handle)) ||
                        S.removeEvent(t, p, g.handle),
                      delete l[p]);
                  } else for (p in l) S.event.remove(t, p + e[c], n, i, !0);
                S.isEmptyObject(l) && Z.remove(t, "handle events");
              }
            },
            dispatch: function (t) {
              var e,
                n,
                i,
                r,
                o,
                s,
                a = new Array(arguments.length),
                l = S.event.fix(t),
                c =
                  (Z.get(this, "events") || Object.create(null))[l.type] || [],
                u = S.event.special[l.type] || {};
              for (a[0] = l, e = 1; e < arguments.length; e++)
                a[e] = arguments[e];
              if (
                ((l.delegateTarget = this),
                !u.preDispatch || !1 !== u.preDispatch.call(this, l))
              ) {
                for (
                  s = S.event.handlers.call(this, l, c), e = 0;
                  (r = s[e++]) && !l.isPropagationStopped();

                )
                  for (
                    l.currentTarget = r.elem, n = 0;
                    (o = r.handlers[n++]) && !l.isImmediatePropagationStopped();

                  )
                    (l.rnamespace &&
                      !1 !== o.namespace &&
                      !l.rnamespace.test(o.namespace)) ||
                      ((l.handleObj = o),
                      (l.data = o.data),
                      void 0 !==
                        (i = (
                          (S.event.special[o.origType] || {}).handle ||
                          o.handler
                        ).apply(r.elem, a)) &&
                        !1 === (l.result = i) &&
                        (l.preventDefault(), l.stopPropagation()));
                return u.postDispatch && u.postDispatch.call(this, l), l.result;
              }
            },
            handlers: function (t, e) {
              var n,
                i,
                r,
                o,
                s,
                a = [],
                l = e.delegateCount,
                c = t.target;
              if (l && c.nodeType && !("click" === t.type && t.button >= 1))
                for (; c !== this; c = c.parentNode || this)
                  if (
                    1 === c.nodeType &&
                    ("click" !== t.type || !0 !== c.disabled)
                  ) {
                    for (o = [], s = {}, n = 0; n < l; n++)
                      void 0 === s[(r = (i = e[n]).selector + " ")] &&
                        (s[r] = i.needsContext
                          ? S(r, this).index(c) > -1
                          : S.find(r, this, null, [c]).length),
                        s[r] && o.push(i);
                    o.length && a.push({ elem: c, handlers: o });
                  }
              return (
                (c = this),
                l < e.length && a.push({ elem: c, handlers: e.slice(l) }),
                a
              );
            },
            addProp: function (t, e) {
              Object.defineProperty(S.Event.prototype, t, {
                enumerable: !0,
                configurable: !0,
                get: v(e)
                  ? function () {
                      if (this.originalEvent) return e(this.originalEvent);
                    }
                  : function () {
                      if (this.originalEvent) return this.originalEvent[t];
                    },
                set: function (e) {
                  Object.defineProperty(this, t, {
                    enumerable: !0,
                    configurable: !0,
                    writable: !0,
                    value: e,
                  });
                },
              });
            },
            fix: function (t) {
              return t[S.expando] ? t : new S.Event(t);
            },
            special: {
              load: { noBubble: !0 },
              click: {
                setup: function (t) {
                  var e = this || t;
                  return (
                    gt.test(e.type) &&
                      e.click &&
                      R(e, "input") &&
                      Lt(e, "click", Et),
                    !1
                  );
                },
                trigger: function (t) {
                  var e = this || t;
                  return (
                    gt.test(e.type) &&
                      e.click &&
                      R(e, "input") &&
                      Lt(e, "click"),
                    !0
                  );
                },
                _default: function (t) {
                  var e = t.target;
                  return (
                    (gt.test(e.type) &&
                      e.click &&
                      R(e, "input") &&
                      Z.get(e, "click")) ||
                    R(e, "a")
                  );
                },
              },
              beforeunload: {
                postDispatch: function (t) {
                  void 0 !== t.result &&
                    t.originalEvent &&
                    (t.originalEvent.returnValue = t.result);
                },
              },
            },
          }),
            (S.removeEvent = function (t, e, n) {
              t.removeEventListener && t.removeEventListener(e, n);
            }),
            (S.Event = function (t, e) {
              if (!(this instanceof S.Event)) return new S.Event(t, e);
              t && t.type
                ? ((this.originalEvent = t),
                  (this.type = t.type),
                  (this.isDefaultPrevented =
                    t.defaultPrevented ||
                    (void 0 === t.defaultPrevented && !1 === t.returnValue)
                      ? Et
                      : Tt),
                  (this.target =
                    t.target && 3 === t.target.nodeType
                      ? t.target.parentNode
                      : t.target),
                  (this.currentTarget = t.currentTarget),
                  (this.relatedTarget = t.relatedTarget))
                : (this.type = t),
                e && S.extend(this, e),
                (this.timeStamp = (t && t.timeStamp) || Date.now()),
                (this[S.expando] = !0);
            }),
            (S.Event.prototype = {
              constructor: S.Event,
              isDefaultPrevented: Tt,
              isPropagationStopped: Tt,
              isImmediatePropagationStopped: Tt,
              isSimulated: !1,
              preventDefault: function () {
                var t = this.originalEvent;
                (this.isDefaultPrevented = Et),
                  t && !this.isSimulated && t.preventDefault();
              },
              stopPropagation: function () {
                var t = this.originalEvent;
                (this.isPropagationStopped = Et),
                  t && !this.isSimulated && t.stopPropagation();
              },
              stopImmediatePropagation: function () {
                var t = this.originalEvent;
                (this.isImmediatePropagationStopped = Et),
                  t && !this.isSimulated && t.stopImmediatePropagation(),
                  this.stopPropagation();
              },
            }),
            S.each(
              {
                altKey: !0,
                bubbles: !0,
                cancelable: !0,
                changedTouches: !0,
                ctrlKey: !0,
                detail: !0,
                eventPhase: !0,
                metaKey: !0,
                pageX: !0,
                pageY: !0,
                shiftKey: !0,
                view: !0,
                char: !0,
                code: !0,
                charCode: !0,
                key: !0,
                keyCode: !0,
                button: !0,
                buttons: !0,
                clientX: !0,
                clientY: !0,
                offsetX: !0,
                offsetY: !0,
                pointerId: !0,
                pointerType: !0,
                screenX: !0,
                screenY: !0,
                targetTouches: !0,
                toElement: !0,
                touches: !0,
                which: !0,
              },
              S.event.addProp
            ),
            S.each({ focus: "focusin", blur: "focusout" }, function (t, e) {
              S.event.special[t] = {
                setup: function () {
                  return Lt(this, t, At), !1;
                },
                trigger: function () {
                  return Lt(this, t), !0;
                },
                _default: function () {
                  return !0;
                },
                delegateType: e,
              };
            }),
            S.each(
              {
                mouseenter: "mouseover",
                mouseleave: "mouseout",
                pointerenter: "pointerover",
                pointerleave: "pointerout",
              },
              function (t, e) {
                S.event.special[t] = {
                  delegateType: e,
                  bindType: e,
                  handle: function (t) {
                    var n,
                      i = this,
                      r = t.relatedTarget,
                      o = t.handleObj;
                    return (
                      (r && (r === i || S.contains(i, r))) ||
                        ((t.type = o.origType),
                        (n = o.handler.apply(this, arguments)),
                        (t.type = e)),
                      n
                    );
                  },
                };
              }
            ),
            S.fn.extend({
              on: function (t, e, n, i) {
                return Ct(this, t, e, n, i);
              },
              one: function (t, e, n, i) {
                return Ct(this, t, e, n, i, 1);
              },
              off: function (t, e, n) {
                var i, r;
                if (t && t.preventDefault && t.handleObj)
                  return (
                    (i = t.handleObj),
                    S(t.delegateTarget).off(
                      i.namespace ? i.origType + "." + i.namespace : i.origType,
                      i.selector,
                      i.handler
                    ),
                    this
                  );
                if ("object" == typeof t) {
                  for (r in t) this.off(r, e, t[r]);
                  return this;
                }
                return (
                  (!1 !== e && "function" != typeof e) ||
                    ((n = e), (e = void 0)),
                  !1 === n && (n = Tt),
                  this.each(function () {
                    S.event.remove(this, t, n, e);
                  })
                );
              },
            });
          var Rt = /<script|<style|<link/i,
            Pt = /checked\s*(?:[^=]|=\s*.checked.)/i,
            Ot = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
          function kt(t, e) {
            return (
              (R(t, "table") &&
                R(11 !== e.nodeType ? e : e.firstChild, "tr") &&
                S(t).children("tbody")[0]) ||
              t
            );
          }
          function It(t) {
            return (
              (t.type = (null !== t.getAttribute("type")) + "/" + t.type), t
            );
          }
          function Dt(t) {
            return (
              "true/" === (t.type || "").slice(0, 5)
                ? (t.type = t.type.slice(5))
                : t.removeAttribute("type"),
              t
            );
          }
          function Bt(t, e) {
            var n, i, r, o, s, a;
            if (1 === e.nodeType) {
              if (Z.hasData(t) && (a = Z.get(t).events))
                for (r in (Z.remove(e, "handle events"), a))
                  for (n = 0, i = a[r].length; n < i; n++)
                    S.event.add(e, r, a[r][n]);
              Q.hasData(t) &&
                ((o = Q.access(t)), (s = S.extend({}, o)), Q.set(e, s));
            }
          }
          function Nt(t, e) {
            var n = e.nodeName.toLowerCase();
            "input" === n && gt.test(t.type)
              ? (e.checked = t.checked)
              : ("input" !== n && "textarea" !== n) ||
                (e.defaultValue = t.defaultValue);
          }
          function Ft(t, e, n, i) {
            e = l(e);
            var r,
              o,
              s,
              a,
              c,
              u,
              h = 0,
              d = t.length,
              p = d - 1,
              f = e[0],
              m = v(f);
            if (
              m ||
              (d > 1 && "string" == typeof f && !g.checkClone && Pt.test(f))
            )
              return t.each(function (r) {
                var o = t.eq(r);
                m && (e[0] = f.call(this, r, o.html())), Ft(o, e, n, i);
              });
            if (
              d &&
              ((o = (r = Mt(e, t[0].ownerDocument, !1, t, i)).firstChild),
              1 === r.childNodes.length && (r = o),
              o || i)
            ) {
              for (a = (s = S.map(_t(r, "script"), It)).length; h < d; h++)
                (c = r),
                  h !== p &&
                    ((c = S.clone(c, !0, !0)),
                    a && S.merge(s, _t(c, "script"))),
                  n.call(t[h], c, h);
              if (a)
                for (
                  u = s[s.length - 1].ownerDocument, S.map(s, Dt), h = 0;
                  h < a;
                  h++
                )
                  (c = s[h]),
                    yt.test(c.type || "") &&
                      !Z.access(c, "globalEval") &&
                      S.contains(u, c) &&
                      (c.src && "module" !== (c.type || "").toLowerCase()
                        ? S._evalUrl &&
                          !c.noModule &&
                          S._evalUrl(
                            c.src,
                            { nonce: c.nonce || c.getAttribute("nonce") },
                            u
                          )
                        : b(c.textContent.replace(Ot, ""), c, u));
            }
            return t;
          }
          function zt(t, e, n) {
            for (
              var i, r = e ? S.filter(e, t) : t, o = 0;
              null != (i = r[o]);
              o++
            )
              n || 1 !== i.nodeType || S.cleanData(_t(i)),
                i.parentNode &&
                  (n && at(i) && bt(_t(i, "script")),
                  i.parentNode.removeChild(i));
            return t;
          }
          S.extend({
            htmlPrefilter: function (t) {
              return t;
            },
            clone: function (t, e, n) {
              var i,
                r,
                o,
                s,
                a = t.cloneNode(!0),
                l = at(t);
              if (
                !(
                  g.noCloneChecked ||
                  (1 !== t.nodeType && 11 !== t.nodeType) ||
                  S.isXMLDoc(t)
                )
              )
                for (s = _t(a), i = 0, r = (o = _t(t)).length; i < r; i++)
                  Nt(o[i], s[i]);
              if (e)
                if (n)
                  for (
                    o = o || _t(t), s = s || _t(a), i = 0, r = o.length;
                    i < r;
                    i++
                  )
                    Bt(o[i], s[i]);
                else Bt(t, a);
              return (
                (s = _t(a, "script")).length > 0 &&
                  bt(s, !l && _t(t, "script")),
                a
              );
            },
            cleanData: function (t) {
              for (
                var e, n, i, r = S.event.special, o = 0;
                void 0 !== (n = t[o]);
                o++
              )
                if (K(n)) {
                  if ((e = n[Z.expando])) {
                    if (e.events)
                      for (i in e.events)
                        r[i]
                          ? S.event.remove(n, i)
                          : S.removeEvent(n, i, e.handle);
                    n[Z.expando] = void 0;
                  }
                  n[Q.expando] && (n[Q.expando] = void 0);
                }
            },
          }),
            S.fn.extend({
              detach: function (t) {
                return zt(this, t, !0);
              },
              remove: function (t) {
                return zt(this, t);
              },
              text: function (t) {
                return W(
                  this,
                  function (t) {
                    return void 0 === t
                      ? S.text(this)
                      : this.empty().each(function () {
                          (1 !== this.nodeType &&
                            11 !== this.nodeType &&
                            9 !== this.nodeType) ||
                            (this.textContent = t);
                        });
                  },
                  null,
                  t,
                  arguments.length
                );
              },
              append: function () {
                return Ft(this, arguments, function (t) {
                  (1 !== this.nodeType &&
                    11 !== this.nodeType &&
                    9 !== this.nodeType) ||
                    kt(this, t).appendChild(t);
                });
              },
              prepend: function () {
                return Ft(this, arguments, function (t) {
                  if (
                    1 === this.nodeType ||
                    11 === this.nodeType ||
                    9 === this.nodeType
                  ) {
                    var e = kt(this, t);
                    e.insertBefore(t, e.firstChild);
                  }
                });
              },
              before: function () {
                return Ft(this, arguments, function (t) {
                  this.parentNode && this.parentNode.insertBefore(t, this);
                });
              },
              after: function () {
                return Ft(this, arguments, function (t) {
                  this.parentNode &&
                    this.parentNode.insertBefore(t, this.nextSibling);
                });
              },
              empty: function () {
                for (var t, e = 0; null != (t = this[e]); e++)
                  1 === t.nodeType &&
                    (S.cleanData(_t(t, !1)), (t.textContent = ""));
                return this;
              },
              clone: function (t, e) {
                return (
                  (t = null != t && t),
                  (e = null == e ? t : e),
                  this.map(function () {
                    return S.clone(this, t, e);
                  })
                );
              },
              html: function (t) {
                return W(
                  this,
                  function (t) {
                    var e = this[0] || {},
                      n = 0,
                      i = this.length;
                    if (void 0 === t && 1 === e.nodeType) return e.innerHTML;
                    if (
                      "string" == typeof t &&
                      !Rt.test(t) &&
                      !xt[(vt.exec(t) || ["", ""])[1].toLowerCase()]
                    ) {
                      t = S.htmlPrefilter(t);
                      try {
                        for (; n < i; n++)
                          1 === (e = this[n] || {}).nodeType &&
                            (S.cleanData(_t(e, !1)), (e.innerHTML = t));
                        e = 0;
                      } catch (t) {}
                    }
                    e && this.empty().append(t);
                  },
                  null,
                  t,
                  arguments.length
                );
              },
              replaceWith: function () {
                var t = [];
                return Ft(
                  this,
                  arguments,
                  function (e) {
                    var n = this.parentNode;
                    S.inArray(this, t) < 0 &&
                      (S.cleanData(_t(this)), n && n.replaceChild(e, this));
                  },
                  t
                );
              },
            }),
            S.each(
              {
                appendTo: "append",
                prependTo: "prepend",
                insertBefore: "before",
                insertAfter: "after",
                replaceAll: "replaceWith",
              },
              function (t, e) {
                S.fn[t] = function (t) {
                  for (
                    var n, i = [], r = S(t), o = r.length - 1, s = 0;
                    s <= o;
                    s++
                  )
                    (n = s === o ? this : this.clone(!0)),
                      S(r[s])[e](n),
                      c.apply(i, n.get());
                  return this.pushStack(i);
                };
              }
            );
          var Ht = new RegExp("^(" + it + ")(?!px)[a-z%]+$", "i"),
            jt = function (t) {
              var e = t.ownerDocument.defaultView;
              return (e && e.opener) || (e = i), e.getComputedStyle(t);
            },
            Ut = function (t, e, n) {
              var i,
                r,
                o = {};
              for (r in e) (o[r] = t.style[r]), (t.style[r] = e[r]);
              for (r in ((i = n.call(t)), e)) t.style[r] = o[r];
              return i;
            },
            Vt = new RegExp(ot.join("|"), "i");
          function Gt(t, e, n) {
            var i,
              r,
              o,
              s,
              a = t.style;
            return (
              (n = n || jt(t)) &&
                ("" !== (s = n.getPropertyValue(e) || n[e]) ||
                  at(t) ||
                  (s = S.style(t, e)),
                !g.pixelBoxStyles() &&
                  Ht.test(s) &&
                  Vt.test(e) &&
                  ((i = a.width),
                  (r = a.minWidth),
                  (o = a.maxWidth),
                  (a.minWidth = a.maxWidth = a.width = s),
                  (s = n.width),
                  (a.width = i),
                  (a.minWidth = r),
                  (a.maxWidth = o))),
              void 0 !== s ? s + "" : s
            );
          }
          function Wt(t, e) {
            return {
              get: function () {
                if (!t()) return (this.get = e).apply(this, arguments);
                delete this.get;
              },
            };
          }
          !(function () {
            function t() {
              if (u) {
                (c.style.cssText =
                  "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0"),
                  (u.style.cssText =
                    "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%"),
                  st.appendChild(c).appendChild(u);
                var t = i.getComputedStyle(u);
                (n = "1%" !== t.top),
                  (l = 12 === e(t.marginLeft)),
                  (u.style.right = "60%"),
                  (s = 36 === e(t.right)),
                  (r = 36 === e(t.width)),
                  (u.style.position = "absolute"),
                  (o = 12 === e(u.offsetWidth / 3)),
                  st.removeChild(c),
                  (u = null);
              }
            }
            function e(t) {
              return Math.round(parseFloat(t));
            }
            var n,
              r,
              o,
              s,
              a,
              l,
              c = x.createElement("div"),
              u = x.createElement("div");
            u.style &&
              ((u.style.backgroundClip = "content-box"),
              (u.cloneNode(!0).style.backgroundClip = ""),
              (g.clearCloneStyle = "content-box" === u.style.backgroundClip),
              S.extend(g, {
                boxSizingReliable: function () {
                  return t(), r;
                },
                pixelBoxStyles: function () {
                  return t(), s;
                },
                pixelPosition: function () {
                  return t(), n;
                },
                reliableMarginLeft: function () {
                  return t(), l;
                },
                scrollboxSize: function () {
                  return t(), o;
                },
                reliableTrDimensions: function () {
                  var t, e, n, r;
                  return (
                    null == a &&
                      ((t = x.createElement("table")),
                      (e = x.createElement("tr")),
                      (n = x.createElement("div")),
                      (t.style.cssText =
                        "position:absolute;left:-11111px;border-collapse:separate"),
                      (e.style.cssText = "border:1px solid"),
                      (e.style.height = "1px"),
                      (n.style.height = "9px"),
                      (n.style.display = "block"),
                      st.appendChild(t).appendChild(e).appendChild(n),
                      (r = i.getComputedStyle(e)),
                      (a =
                        parseInt(r.height, 10) +
                          parseInt(r.borderTopWidth, 10) +
                          parseInt(r.borderBottomWidth, 10) ===
                        e.offsetHeight),
                      st.removeChild(t)),
                    a
                  );
                },
              }));
          })();
          var qt = ["Webkit", "Moz", "ms"],
            Xt = x.createElement("div").style,
            Yt = {};
          function $t(t) {
            return (
              S.cssProps[t] ||
              Yt[t] ||
              (t in Xt
                ? t
                : (Yt[t] =
                    (function (t) {
                      for (
                        var e = t[0].toUpperCase() + t.slice(1), n = qt.length;
                        n--;

                      )
                        if ((t = qt[n] + e) in Xt) return t;
                    })(t) || t))
            );
          }
          var Kt = /^(none|table(?!-c[ea]).+)/,
            Jt = /^--/,
            Zt = {
              position: "absolute",
              visibility: "hidden",
              display: "block",
            },
            Qt = { letterSpacing: "0", fontWeight: "400" };
          function te(t, e, n) {
            var i = rt.exec(e);
            return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : e;
          }
          function ee(t, e, n, i, r, o) {
            var s = "width" === e ? 1 : 0,
              a = 0,
              l = 0;
            if (n === (i ? "border" : "content")) return 0;
            for (; s < 4; s += 2)
              "margin" === n && (l += S.css(t, n + ot[s], !0, r)),
                i
                  ? ("content" === n &&
                      (l -= S.css(t, "padding" + ot[s], !0, r)),
                    "margin" !== n &&
                      (l -= S.css(t, "border" + ot[s] + "Width", !0, r)))
                  : ((l += S.css(t, "padding" + ot[s], !0, r)),
                    "padding" !== n
                      ? (l += S.css(t, "border" + ot[s] + "Width", !0, r))
                      : (a += S.css(t, "border" + ot[s] + "Width", !0, r)));
            return (
              !i &&
                o >= 0 &&
                (l +=
                  Math.max(
                    0,
                    Math.ceil(
                      t["offset" + e[0].toUpperCase() + e.slice(1)] -
                        o -
                        l -
                        a -
                        0.5
                    )
                  ) || 0),
              l
            );
          }
          function ne(t, e, n) {
            var i = jt(t),
              r =
                (!g.boxSizingReliable() || n) &&
                "border-box" === S.css(t, "boxSizing", !1, i),
              o = r,
              s = Gt(t, e, i),
              a = "offset" + e[0].toUpperCase() + e.slice(1);
            if (Ht.test(s)) {
              if (!n) return s;
              s = "auto";
            }
            return (
              ((!g.boxSizingReliable() && r) ||
                (!g.reliableTrDimensions() && R(t, "tr")) ||
                "auto" === s ||
                (!parseFloat(s) && "inline" === S.css(t, "display", !1, i))) &&
                t.getClientRects().length &&
                ((r = "border-box" === S.css(t, "boxSizing", !1, i)),
                (o = a in t) && (s = t[a])),
              (s = parseFloat(s) || 0) +
                ee(t, e, n || (r ? "border" : "content"), o, i, s) +
                "px"
            );
          }
          function ie(t, e, n, i, r) {
            return new ie.prototype.init(t, e, n, i, r);
          }
          S.extend({
            cssHooks: {
              opacity: {
                get: function (t, e) {
                  if (e) {
                    var n = Gt(t, "opacity");
                    return "" === n ? "1" : n;
                  }
                },
              },
            },
            cssNumber: {
              animationIterationCount: !0,
              columnCount: !0,
              fillOpacity: !0,
              flexGrow: !0,
              flexShrink: !0,
              fontWeight: !0,
              gridArea: !0,
              gridColumn: !0,
              gridColumnEnd: !0,
              gridColumnStart: !0,
              gridRow: !0,
              gridRowEnd: !0,
              gridRowStart: !0,
              lineHeight: !0,
              opacity: !0,
              order: !0,
              orphans: !0,
              widows: !0,
              zIndex: !0,
              zoom: !0,
            },
            cssProps: {},
            style: function (t, e, n, i) {
              if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                var r,
                  o,
                  s,
                  a = $(e),
                  l = Jt.test(e),
                  c = t.style;
                if (
                  (l || (e = $t(a)),
                  (s = S.cssHooks[e] || S.cssHooks[a]),
                  void 0 === n)
                )
                  return s && "get" in s && void 0 !== (r = s.get(t, !1, i))
                    ? r
                    : c[e];
                "string" == (o = typeof n) &&
                  (r = rt.exec(n)) &&
                  r[1] &&
                  ((n = ut(t, e, r)), (o = "number")),
                  null != n &&
                    n == n &&
                    ("number" !== o ||
                      l ||
                      (n += (r && r[3]) || (S.cssNumber[a] ? "" : "px")),
                    g.clearCloneStyle ||
                      "" !== n ||
                      0 !== e.indexOf("background") ||
                      (c[e] = "inherit"),
                    (s && "set" in s && void 0 === (n = s.set(t, n, i))) ||
                      (l ? c.setProperty(e, n) : (c[e] = n)));
              }
            },
            css: function (t, e, n, i) {
              var r,
                o,
                s,
                a = $(e);
              return (
                Jt.test(e) || (e = $t(a)),
                (s = S.cssHooks[e] || S.cssHooks[a]) &&
                  "get" in s &&
                  (r = s.get(t, !0, n)),
                void 0 === r && (r = Gt(t, e, i)),
                "normal" === r && e in Qt && (r = Qt[e]),
                "" === n || n
                  ? ((o = parseFloat(r)), !0 === n || isFinite(o) ? o || 0 : r)
                  : r
              );
            },
          }),
            S.each(["height", "width"], function (t, e) {
              S.cssHooks[e] = {
                get: function (t, n, i) {
                  if (n)
                    return !Kt.test(S.css(t, "display")) ||
                      (t.getClientRects().length &&
                        t.getBoundingClientRect().width)
                      ? ne(t, e, i)
                      : Ut(t, Zt, function () {
                          return ne(t, e, i);
                        });
                },
                set: function (t, n, i) {
                  var r,
                    o = jt(t),
                    s = !g.scrollboxSize() && "absolute" === o.position,
                    a =
                      (s || i) && "border-box" === S.css(t, "boxSizing", !1, o),
                    l = i ? ee(t, e, i, a, o) : 0;
                  return (
                    a &&
                      s &&
                      (l -= Math.ceil(
                        t["offset" + e[0].toUpperCase() + e.slice(1)] -
                          parseFloat(o[e]) -
                          ee(t, e, "border", !1, o) -
                          0.5
                      )),
                    l &&
                      (r = rt.exec(n)) &&
                      "px" !== (r[3] || "px") &&
                      ((t.style[e] = n), (n = S.css(t, e))),
                    te(0, n, l)
                  );
                },
              };
            }),
            (S.cssHooks.marginLeft = Wt(g.reliableMarginLeft, function (t, e) {
              if (e)
                return (
                  (parseFloat(Gt(t, "marginLeft")) ||
                    t.getBoundingClientRect().left -
                      Ut(t, { marginLeft: 0 }, function () {
                        return t.getBoundingClientRect().left;
                      })) + "px"
                );
            })),
            S.each(
              { margin: "", padding: "", border: "Width" },
              function (t, e) {
                (S.cssHooks[t + e] = {
                  expand: function (n) {
                    for (
                      var i = 0,
                        r = {},
                        o = "string" == typeof n ? n.split(" ") : [n];
                      i < 4;
                      i++
                    )
                      r[t + ot[i] + e] = o[i] || o[i - 2] || o[0];
                    return r;
                  },
                }),
                  "margin" !== t && (S.cssHooks[t + e].set = te);
              }
            ),
            S.fn.extend({
              css: function (t, e) {
                return W(
                  this,
                  function (t, e, n) {
                    var i,
                      r,
                      o = {},
                      s = 0;
                    if (Array.isArray(e)) {
                      for (i = jt(t), r = e.length; s < r; s++)
                        o[e[s]] = S.css(t, e[s], !1, i);
                      return o;
                    }
                    return void 0 !== n ? S.style(t, e, n) : S.css(t, e);
                  },
                  t,
                  e,
                  arguments.length > 1
                );
              },
            }),
            (S.Tween = ie),
            (ie.prototype = {
              constructor: ie,
              init: function (t, e, n, i, r, o) {
                (this.elem = t),
                  (this.prop = n),
                  (this.easing = r || S.easing._default),
                  (this.options = e),
                  (this.start = this.now = this.cur()),
                  (this.end = i),
                  (this.unit = o || (S.cssNumber[n] ? "" : "px"));
              },
              cur: function () {
                var t = ie.propHooks[this.prop];
                return t && t.get
                  ? t.get(this)
                  : ie.propHooks._default.get(this);
              },
              run: function (t) {
                var e,
                  n = ie.propHooks[this.prop];
                return (
                  this.options.duration
                    ? (this.pos = e =
                        S.easing[this.easing](
                          t,
                          this.options.duration * t,
                          0,
                          1,
                          this.options.duration
                        ))
                    : (this.pos = e = t),
                  (this.now = (this.end - this.start) * e + this.start),
                  this.options.step &&
                    this.options.step.call(this.elem, this.now, this),
                  n && n.set ? n.set(this) : ie.propHooks._default.set(this),
                  this
                );
              },
            }),
            (ie.prototype.init.prototype = ie.prototype),
            (ie.propHooks = {
              _default: {
                get: function (t) {
                  var e;
                  return 1 !== t.elem.nodeType ||
                    (null != t.elem[t.prop] && null == t.elem.style[t.prop])
                    ? t.elem[t.prop]
                    : (e = S.css(t.elem, t.prop, "")) && "auto" !== e
                    ? e
                    : 0;
                },
                set: function (t) {
                  S.fx.step[t.prop]
                    ? S.fx.step[t.prop](t)
                    : 1 !== t.elem.nodeType ||
                      (!S.cssHooks[t.prop] && null == t.elem.style[$t(t.prop)])
                    ? (t.elem[t.prop] = t.now)
                    : S.style(t.elem, t.prop, t.now + t.unit);
                },
              },
            }),
            (ie.propHooks.scrollTop = ie.propHooks.scrollLeft =
              {
                set: function (t) {
                  t.elem.nodeType &&
                    t.elem.parentNode &&
                    (t.elem[t.prop] = t.now);
                },
              }),
            (S.easing = {
              linear: function (t) {
                return t;
              },
              swing: function (t) {
                return 0.5 - Math.cos(t * Math.PI) / 2;
              },
              _default: "swing",
            }),
            (S.fx = ie.prototype.init),
            (S.fx.step = {});
          var re,
            oe,
            se = /^(?:toggle|show|hide)$/,
            ae = /queueHooks$/;
          function le() {
            oe &&
              (!1 === x.hidden && i.requestAnimationFrame
                ? i.requestAnimationFrame(le)
                : i.setTimeout(le, S.fx.interval),
              S.fx.tick());
          }
          function ce() {
            return (
              i.setTimeout(function () {
                re = void 0;
              }),
              (re = Date.now())
            );
          }
          function ue(t, e) {
            var n,
              i = 0,
              r = { height: t };
            for (e = e ? 1 : 0; i < 4; i += 2 - e)
              r["margin" + (n = ot[i])] = r["padding" + n] = t;
            return e && (r.opacity = r.width = t), r;
          }
          function he(t, e, n) {
            for (
              var i,
                r = (de.tweeners[e] || []).concat(de.tweeners["*"]),
                o = 0,
                s = r.length;
              o < s;
              o++
            )
              if ((i = r[o].call(n, e, t))) return i;
          }
          function de(t, e, n) {
            var i,
              r,
              o = 0,
              s = de.prefilters.length,
              a = S.Deferred().always(function () {
                delete l.elem;
              }),
              l = function () {
                if (r) return !1;
                for (
                  var e = re || ce(),
                    n = Math.max(0, c.startTime + c.duration - e),
                    i = 1 - (n / c.duration || 0),
                    o = 0,
                    s = c.tweens.length;
                  o < s;
                  o++
                )
                  c.tweens[o].run(i);
                return (
                  a.notifyWith(t, [c, i, n]),
                  i < 1 && s
                    ? n
                    : (s || a.notifyWith(t, [c, 1, 0]),
                      a.resolveWith(t, [c]),
                      !1)
                );
              },
              c = a.promise({
                elem: t,
                props: S.extend({}, e),
                opts: S.extend(
                  !0,
                  { specialEasing: {}, easing: S.easing._default },
                  n
                ),
                originalProperties: e,
                originalOptions: n,
                startTime: re || ce(),
                duration: n.duration,
                tweens: [],
                createTween: function (e, n) {
                  var i = S.Tween(
                    t,
                    c.opts,
                    e,
                    n,
                    c.opts.specialEasing[e] || c.opts.easing
                  );
                  return c.tweens.push(i), i;
                },
                stop: function (e) {
                  var n = 0,
                    i = e ? c.tweens.length : 0;
                  if (r) return this;
                  for (r = !0; n < i; n++) c.tweens[n].run(1);
                  return (
                    e
                      ? (a.notifyWith(t, [c, 1, 0]), a.resolveWith(t, [c, e]))
                      : a.rejectWith(t, [c, e]),
                    this
                  );
                },
              }),
              u = c.props;
            for (
              (function (t, e) {
                var n, i, r, o, s;
                for (n in t)
                  if (
                    ((r = e[(i = $(n))]),
                    (o = t[n]),
                    Array.isArray(o) && ((r = o[1]), (o = t[n] = o[0])),
                    n !== i && ((t[i] = o), delete t[n]),
                    (s = S.cssHooks[i]) && ("expand" in s))
                  )
                    for (n in ((o = s.expand(o)), delete t[i], o))
                      (n in t) || ((t[n] = o[n]), (e[n] = r));
                  else e[i] = r;
              })(u, c.opts.specialEasing);
              o < s;
              o++
            )
              if ((i = de.prefilters[o].call(c, t, u, c.opts)))
                return (
                  v(i.stop) &&
                    (S._queueHooks(c.elem, c.opts.queue).stop = i.stop.bind(i)),
                  i
                );
            return (
              S.map(u, he, c),
              v(c.opts.start) && c.opts.start.call(t, c),
              c
                .progress(c.opts.progress)
                .done(c.opts.done, c.opts.complete)
                .fail(c.opts.fail)
                .always(c.opts.always),
              S.fx.timer(
                S.extend(l, { elem: t, anim: c, queue: c.opts.queue })
              ),
              c
            );
          }
          (S.Animation = S.extend(de, {
            tweeners: {
              "*": [
                function (t, e) {
                  var n = this.createTween(t, e);
                  return ut(n.elem, t, rt.exec(e), n), n;
                },
              ],
            },
            tweener: function (t, e) {
              v(t) ? ((e = t), (t = ["*"])) : (t = t.match(F));
              for (var n, i = 0, r = t.length; i < r; i++)
                (n = t[i]),
                  (de.tweeners[n] = de.tweeners[n] || []),
                  de.tweeners[n].unshift(e);
            },
            prefilters: [
              function (t, e, n) {
                var i,
                  r,
                  o,
                  s,
                  a,
                  l,
                  c,
                  u,
                  h = "width" in e || "height" in e,
                  d = this,
                  p = {},
                  f = t.style,
                  m = t.nodeType && ct(t),
                  g = Z.get(t, "fxshow");
                for (i in (n.queue ||
                  (null == (s = S._queueHooks(t, "fx")).unqueued &&
                    ((s.unqueued = 0),
                    (a = s.empty.fire),
                    (s.empty.fire = function () {
                      s.unqueued || a();
                    })),
                  s.unqueued++,
                  d.always(function () {
                    d.always(function () {
                      s.unqueued--, S.queue(t, "fx").length || s.empty.fire();
                    });
                  })),
                e))
                  if (((r = e[i]), se.test(r))) {
                    if (
                      (delete e[i],
                      (o = o || "toggle" === r),
                      r === (m ? "hide" : "show"))
                    ) {
                      if ("show" !== r || !g || void 0 === g[i]) continue;
                      m = !0;
                    }
                    p[i] = (g && g[i]) || S.style(t, i);
                  }
                if ((l = !S.isEmptyObject(e)) || !S.isEmptyObject(p))
                  for (i in (h &&
                    1 === t.nodeType &&
                    ((n.overflow = [f.overflow, f.overflowX, f.overflowY]),
                    null == (c = g && g.display) && (c = Z.get(t, "display")),
                    "none" === (u = S.css(t, "display")) &&
                      (c
                        ? (u = c)
                        : (pt([t], !0),
                          (c = t.style.display || c),
                          (u = S.css(t, "display")),
                          pt([t]))),
                    ("inline" === u || ("inline-block" === u && null != c)) &&
                      "none" === S.css(t, "float") &&
                      (l ||
                        (d.done(function () {
                          f.display = c;
                        }),
                        null == c &&
                          ((u = f.display), (c = "none" === u ? "" : u))),
                      (f.display = "inline-block"))),
                  n.overflow &&
                    ((f.overflow = "hidden"),
                    d.always(function () {
                      (f.overflow = n.overflow[0]),
                        (f.overflowX = n.overflow[1]),
                        (f.overflowY = n.overflow[2]);
                    })),
                  (l = !1),
                  p))
                    l ||
                      (g
                        ? "hidden" in g && (m = g.hidden)
                        : (g = Z.access(t, "fxshow", { display: c })),
                      o && (g.hidden = !m),
                      m && pt([t], !0),
                      d.done(function () {
                        for (i in (m || pt([t]), Z.remove(t, "fxshow"), p))
                          S.style(t, i, p[i]);
                      })),
                      (l = he(m ? g[i] : 0, i, d)),
                      i in g ||
                        ((g[i] = l.start),
                        m && ((l.end = l.start), (l.start = 0)));
              },
            ],
            prefilter: function (t, e) {
              e ? de.prefilters.unshift(t) : de.prefilters.push(t);
            },
          })),
            (S.speed = function (t, e, n) {
              var i =
                t && "object" == typeof t
                  ? S.extend({}, t)
                  : {
                      complete: n || (!n && e) || (v(t) && t),
                      duration: t,
                      easing: (n && e) || (e && !v(e) && e),
                    };
              return (
                S.fx.off
                  ? (i.duration = 0)
                  : "number" != typeof i.duration &&
                    (i.duration in S.fx.speeds
                      ? (i.duration = S.fx.speeds[i.duration])
                      : (i.duration = S.fx.speeds._default)),
                (null != i.queue && !0 !== i.queue) || (i.queue = "fx"),
                (i.old = i.complete),
                (i.complete = function () {
                  v(i.old) && i.old.call(this),
                    i.queue && S.dequeue(this, i.queue);
                }),
                i
              );
            }),
            S.fn.extend({
              fadeTo: function (t, e, n, i) {
                return this.filter(ct)
                  .css("opacity", 0)
                  .show()
                  .end()
                  .animate({ opacity: e }, t, n, i);
              },
              animate: function (t, e, n, i) {
                var r = S.isEmptyObject(t),
                  o = S.speed(e, n, i),
                  s = function () {
                    var e = de(this, S.extend({}, t), o);
                    (r || Z.get(this, "finish")) && e.stop(!0);
                  };
                return (
                  (s.finish = s),
                  r || !1 === o.queue ? this.each(s) : this.queue(o.queue, s)
                );
              },
              stop: function (t, e, n) {
                var i = function (t) {
                  var e = t.stop;
                  delete t.stop, e(n);
                };
                return (
                  "string" != typeof t && ((n = e), (e = t), (t = void 0)),
                  e && this.queue(t || "fx", []),
                  this.each(function () {
                    var e = !0,
                      r = null != t && t + "queueHooks",
                      o = S.timers,
                      s = Z.get(this);
                    if (r) s[r] && s[r].stop && i(s[r]);
                    else
                      for (r in s) s[r] && s[r].stop && ae.test(r) && i(s[r]);
                    for (r = o.length; r--; )
                      o[r].elem !== this ||
                        (null != t && o[r].queue !== t) ||
                        (o[r].anim.stop(n), (e = !1), o.splice(r, 1));
                    (!e && n) || S.dequeue(this, t);
                  })
                );
              },
              finish: function (t) {
                return (
                  !1 !== t && (t = t || "fx"),
                  this.each(function () {
                    var e,
                      n = Z.get(this),
                      i = n[t + "queue"],
                      r = n[t + "queueHooks"],
                      o = S.timers,
                      s = i ? i.length : 0;
                    for (
                      n.finish = !0,
                        S.queue(this, t, []),
                        r && r.stop && r.stop.call(this, !0),
                        e = o.length;
                      e--;

                    )
                      o[e].elem === this &&
                        o[e].queue === t &&
                        (o[e].anim.stop(!0), o.splice(e, 1));
                    for (e = 0; e < s; e++)
                      i[e] && i[e].finish && i[e].finish.call(this);
                    delete n.finish;
                  })
                );
              },
            }),
            S.each(["toggle", "show", "hide"], function (t, e) {
              var n = S.fn[e];
              S.fn[e] = function (t, i, r) {
                return null == t || "boolean" == typeof t
                  ? n.apply(this, arguments)
                  : this.animate(ue(e, !0), t, i, r);
              };
            }),
            S.each(
              {
                slideDown: ue("show"),
                slideUp: ue("hide"),
                slideToggle: ue("toggle"),
                fadeIn: { opacity: "show" },
                fadeOut: { opacity: "hide" },
                fadeToggle: { opacity: "toggle" },
              },
              function (t, e) {
                S.fn[t] = function (t, n, i) {
                  return this.animate(e, t, n, i);
                };
              }
            ),
            (S.timers = []),
            (S.fx.tick = function () {
              var t,
                e = 0,
                n = S.timers;
              for (re = Date.now(); e < n.length; e++)
                (t = n[e])() || n[e] !== t || n.splice(e--, 1);
              n.length || S.fx.stop(), (re = void 0);
            }),
            (S.fx.timer = function (t) {
              S.timers.push(t), S.fx.start();
            }),
            (S.fx.interval = 13),
            (S.fx.start = function () {
              oe || ((oe = !0), le());
            }),
            (S.fx.stop = function () {
              oe = null;
            }),
            (S.fx.speeds = { slow: 600, fast: 200, _default: 400 }),
            (S.fn.delay = function (t, e) {
              return (
                (t = (S.fx && S.fx.speeds[t]) || t),
                (e = e || "fx"),
                this.queue(e, function (e, n) {
                  var r = i.setTimeout(e, t);
                  n.stop = function () {
                    i.clearTimeout(r);
                  };
                })
              );
            }),
            (function () {
              var t = x.createElement("input"),
                e = x
                  .createElement("select")
                  .appendChild(x.createElement("option"));
              (t.type = "checkbox"),
                (g.checkOn = "" !== t.value),
                (g.optSelected = e.selected),
                ((t = x.createElement("input")).value = "t"),
                (t.type = "radio"),
                (g.radioValue = "t" === t.value);
            })();
          var pe,
            fe = S.expr.attrHandle;
          S.fn.extend({
            attr: function (t, e) {
              return W(this, S.attr, t, e, arguments.length > 1);
            },
            removeAttr: function (t) {
              return this.each(function () {
                S.removeAttr(this, t);
              });
            },
          }),
            S.extend({
              attr: function (t, e, n) {
                var i,
                  r,
                  o = t.nodeType;
                if (3 !== o && 8 !== o && 2 !== o)
                  return void 0 === t.getAttribute
                    ? S.prop(t, e, n)
                    : ((1 === o && S.isXMLDoc(t)) ||
                        (r =
                          S.attrHooks[e.toLowerCase()] ||
                          (S.expr.match.bool.test(e) ? pe : void 0)),
                      void 0 !== n
                        ? null === n
                          ? void S.removeAttr(t, e)
                          : r && "set" in r && void 0 !== (i = r.set(t, n, e))
                          ? i
                          : (t.setAttribute(e, n + ""), n)
                        : r && "get" in r && null !== (i = r.get(t, e))
                        ? i
                        : null == (i = S.find.attr(t, e))
                        ? void 0
                        : i);
              },
              attrHooks: {
                type: {
                  set: function (t, e) {
                    if (!g.radioValue && "radio" === e && R(t, "input")) {
                      var n = t.value;
                      return t.setAttribute("type", e), n && (t.value = n), e;
                    }
                  },
                },
              },
              removeAttr: function (t, e) {
                var n,
                  i = 0,
                  r = e && e.match(F);
                if (r && 1 === t.nodeType)
                  for (; (n = r[i++]); ) t.removeAttribute(n);
              },
            }),
            (pe = {
              set: function (t, e, n) {
                return !1 === e ? S.removeAttr(t, n) : t.setAttribute(n, n), n;
              },
            }),
            S.each(S.expr.match.bool.source.match(/\w+/g), function (t, e) {
              var n = fe[e] || S.find.attr;
              fe[e] = function (t, e, i) {
                var r,
                  o,
                  s = e.toLowerCase();
                return (
                  i ||
                    ((o = fe[s]),
                    (fe[s] = r),
                    (r = null != n(t, e, i) ? s : null),
                    (fe[s] = o)),
                  r
                );
              };
            });
          var me = /^(?:input|select|textarea|button)$/i,
            ge = /^(?:a|area)$/i;
          function ve(t) {
            return (t.match(F) || []).join(" ");
          }
          function ye(t) {
            return (t.getAttribute && t.getAttribute("class")) || "";
          }
          function xe(t) {
            return Array.isArray(t)
              ? t
              : ("string" == typeof t && t.match(F)) || [];
          }
          S.fn.extend({
            prop: function (t, e) {
              return W(this, S.prop, t, e, arguments.length > 1);
            },
            removeProp: function (t) {
              return this.each(function () {
                delete this[S.propFix[t] || t];
              });
            },
          }),
            S.extend({
              prop: function (t, e, n) {
                var i,
                  r,
                  o = t.nodeType;
                if (3 !== o && 8 !== o && 2 !== o)
                  return (
                    (1 === o && S.isXMLDoc(t)) ||
                      ((e = S.propFix[e] || e), (r = S.propHooks[e])),
                    void 0 !== n
                      ? r && "set" in r && void 0 !== (i = r.set(t, n, e))
                        ? i
                        : (t[e] = n)
                      : r && "get" in r && null !== (i = r.get(t, e))
                      ? i
                      : t[e]
                  );
              },
              propHooks: {
                tabIndex: {
                  get: function (t) {
                    var e = S.find.attr(t, "tabindex");
                    return e
                      ? parseInt(e, 10)
                      : me.test(t.nodeName) || (ge.test(t.nodeName) && t.href)
                      ? 0
                      : -1;
                  },
                },
              },
              propFix: { for: "htmlFor", class: "className" },
            }),
            g.optSelected ||
              (S.propHooks.selected = {
                get: function (t) {
                  var e = t.parentNode;
                  return e && e.parentNode && e.parentNode.selectedIndex, null;
                },
                set: function (t) {
                  var e = t.parentNode;
                  e &&
                    (e.selectedIndex,
                    e.parentNode && e.parentNode.selectedIndex);
                },
              }),
            S.each(
              [
                "tabIndex",
                "readOnly",
                "maxLength",
                "cellSpacing",
                "cellPadding",
                "rowSpan",
                "colSpan",
                "useMap",
                "frameBorder",
                "contentEditable",
              ],
              function () {
                S.propFix[this.toLowerCase()] = this;
              }
            ),
            S.fn.extend({
              addClass: function (t) {
                var e,
                  n,
                  i,
                  r,
                  o,
                  s,
                  a,
                  l = 0;
                if (v(t))
                  return this.each(function (e) {
                    S(this).addClass(t.call(this, e, ye(this)));
                  });
                if ((e = xe(t)).length)
                  for (; (n = this[l++]); )
                    if (
                      ((r = ye(n)), (i = 1 === n.nodeType && " " + ve(r) + " "))
                    ) {
                      for (s = 0; (o = e[s++]); )
                        i.indexOf(" " + o + " ") < 0 && (i += o + " ");
                      r !== (a = ve(i)) && n.setAttribute("class", a);
                    }
                return this;
              },
              removeClass: function (t) {
                var e,
                  n,
                  i,
                  r,
                  o,
                  s,
                  a,
                  l = 0;
                if (v(t))
                  return this.each(function (e) {
                    S(this).removeClass(t.call(this, e, ye(this)));
                  });
                if (!arguments.length) return this.attr("class", "");
                if ((e = xe(t)).length)
                  for (; (n = this[l++]); )
                    if (
                      ((r = ye(n)), (i = 1 === n.nodeType && " " + ve(r) + " "))
                    ) {
                      for (s = 0; (o = e[s++]); )
                        for (; i.indexOf(" " + o + " ") > -1; )
                          i = i.replace(" " + o + " ", " ");
                      r !== (a = ve(i)) && n.setAttribute("class", a);
                    }
                return this;
              },
              toggleClass: function (t, e) {
                var n = typeof t,
                  i = "string" === n || Array.isArray(t);
                return "boolean" == typeof e && i
                  ? e
                    ? this.addClass(t)
                    : this.removeClass(t)
                  : v(t)
                  ? this.each(function (n) {
                      S(this).toggleClass(t.call(this, n, ye(this), e), e);
                    })
                  : this.each(function () {
                      var e, r, o, s;
                      if (i)
                        for (r = 0, o = S(this), s = xe(t); (e = s[r++]); )
                          o.hasClass(e) ? o.removeClass(e) : o.addClass(e);
                      else
                        (void 0 !== t && "boolean" !== n) ||
                          ((e = ye(this)) && Z.set(this, "__className__", e),
                          this.setAttribute &&
                            this.setAttribute(
                              "class",
                              e || !1 === t
                                ? ""
                                : Z.get(this, "__className__") || ""
                            ));
                    });
              },
              hasClass: function (t) {
                var e,
                  n,
                  i = 0;
                for (e = " " + t + " "; (n = this[i++]); )
                  if (
                    1 === n.nodeType &&
                    (" " + ve(ye(n)) + " ").indexOf(e) > -1
                  )
                    return !0;
                return !1;
              },
            });
          var _e = /\r/g;
          S.fn.extend({
            val: function (t) {
              var e,
                n,
                i,
                r = this[0];
              return arguments.length
                ? ((i = v(t)),
                  this.each(function (n) {
                    var r;
                    1 === this.nodeType &&
                      (null == (r = i ? t.call(this, n, S(this).val()) : t)
                        ? (r = "")
                        : "number" == typeof r
                        ? (r += "")
                        : Array.isArray(r) &&
                          (r = S.map(r, function (t) {
                            return null == t ? "" : t + "";
                          })),
                      ((e =
                        S.valHooks[this.type] ||
                        S.valHooks[this.nodeName.toLowerCase()]) &&
                        "set" in e &&
                        void 0 !== e.set(this, r, "value")) ||
                        (this.value = r));
                  }))
                : r
                ? (e =
                    S.valHooks[r.type] ||
                    S.valHooks[r.nodeName.toLowerCase()]) &&
                  "get" in e &&
                  void 0 !== (n = e.get(r, "value"))
                  ? n
                  : "string" == typeof (n = r.value)
                  ? n.replace(_e, "")
                  : null == n
                  ? ""
                  : n
                : void 0;
            },
          }),
            S.extend({
              valHooks: {
                option: {
                  get: function (t) {
                    var e = S.find.attr(t, "value");
                    return null != e ? e : ve(S.text(t));
                  },
                },
                select: {
                  get: function (t) {
                    var e,
                      n,
                      i,
                      r = t.options,
                      o = t.selectedIndex,
                      s = "select-one" === t.type,
                      a = s ? null : [],
                      l = s ? o + 1 : r.length;
                    for (i = o < 0 ? l : s ? o : 0; i < l; i++)
                      if (
                        ((n = r[i]).selected || i === o) &&
                        !n.disabled &&
                        (!n.parentNode.disabled || !R(n.parentNode, "optgroup"))
                      ) {
                        if (((e = S(n).val()), s)) return e;
                        a.push(e);
                      }
                    return a;
                  },
                  set: function (t, e) {
                    for (
                      var n, i, r = t.options, o = S.makeArray(e), s = r.length;
                      s--;

                    )
                      ((i = r[s]).selected =
                        S.inArray(S.valHooks.option.get(i), o) > -1) &&
                        (n = !0);
                    return n || (t.selectedIndex = -1), o;
                  },
                },
              },
            }),
            S.each(["radio", "checkbox"], function () {
              (S.valHooks[this] = {
                set: function (t, e) {
                  if (Array.isArray(e))
                    return (t.checked = S.inArray(S(t).val(), e) > -1);
                },
              }),
                g.checkOn ||
                  (S.valHooks[this].get = function (t) {
                    return null === t.getAttribute("value") ? "on" : t.value;
                  });
            }),
            (g.focusin = "onfocusin" in i);
          var be = /^(?:focusinfocus|focusoutblur)$/,
            we = function (t) {
              t.stopPropagation();
            };
          S.extend(S.event, {
            trigger: function (t, e, n, r) {
              var o,
                s,
                a,
                l,
                c,
                u,
                h,
                d,
                f = [n || x],
                m = p.call(t, "type") ? t.type : t,
                g = p.call(t, "namespace") ? t.namespace.split(".") : [];
              if (
                ((s = d = a = n = n || x),
                3 !== n.nodeType &&
                  8 !== n.nodeType &&
                  !be.test(m + S.event.triggered) &&
                  (m.indexOf(".") > -1 &&
                    ((g = m.split(".")), (m = g.shift()), g.sort()),
                  (c = m.indexOf(":") < 0 && "on" + m),
                  ((t = t[S.expando]
                    ? t
                    : new S.Event(m, "object" == typeof t && t)).isTrigger = r
                    ? 2
                    : 3),
                  (t.namespace = g.join(".")),
                  (t.rnamespace = t.namespace
                    ? new RegExp(
                        "(^|\\.)" + g.join("\\.(?:.*\\.|)") + "(\\.|$)"
                      )
                    : null),
                  (t.result = void 0),
                  t.target || (t.target = n),
                  (e = null == e ? [t] : S.makeArray(e, [t])),
                  (h = S.event.special[m] || {}),
                  r || !h.trigger || !1 !== h.trigger.apply(n, e)))
              ) {
                if (!r && !h.noBubble && !y(n)) {
                  for (
                    l = h.delegateType || m,
                      be.test(l + m) || (s = s.parentNode);
                    s;
                    s = s.parentNode
                  )
                    f.push(s), (a = s);
                  a === (n.ownerDocument || x) &&
                    f.push(a.defaultView || a.parentWindow || i);
                }
                for (o = 0; (s = f[o++]) && !t.isPropagationStopped(); )
                  (d = s),
                    (t.type = o > 1 ? l : h.bindType || m),
                    (u =
                      (Z.get(s, "events") || Object.create(null))[t.type] &&
                      Z.get(s, "handle")) && u.apply(s, e),
                    (u = c && s[c]) &&
                      u.apply &&
                      K(s) &&
                      ((t.result = u.apply(s, e)),
                      !1 === t.result && t.preventDefault());
                return (
                  (t.type = m),
                  r ||
                    t.isDefaultPrevented() ||
                    (h._default && !1 !== h._default.apply(f.pop(), e)) ||
                    !K(n) ||
                    (c &&
                      v(n[m]) &&
                      !y(n) &&
                      ((a = n[c]) && (n[c] = null),
                      (S.event.triggered = m),
                      t.isPropagationStopped() && d.addEventListener(m, we),
                      n[m](),
                      t.isPropagationStopped() && d.removeEventListener(m, we),
                      (S.event.triggered = void 0),
                      a && (n[c] = a))),
                  t.result
                );
              }
            },
            simulate: function (t, e, n) {
              var i = S.extend(new S.Event(), n, { type: t, isSimulated: !0 });
              S.event.trigger(i, null, e);
            },
          }),
            S.fn.extend({
              trigger: function (t, e) {
                return this.each(function () {
                  S.event.trigger(t, e, this);
                });
              },
              triggerHandler: function (t, e) {
                var n = this[0];
                if (n) return S.event.trigger(t, e, n, !0);
              },
            }),
            g.focusin ||
              S.each({ focus: "focusin", blur: "focusout" }, function (t, e) {
                var n = function (t) {
                  S.event.simulate(e, t.target, S.event.fix(t));
                };
                S.event.special[e] = {
                  setup: function () {
                    var i = this.ownerDocument || this.document || this,
                      r = Z.access(i, e);
                    r || i.addEventListener(t, n, !0),
                      Z.access(i, e, (r || 0) + 1);
                  },
                  teardown: function () {
                    var i = this.ownerDocument || this.document || this,
                      r = Z.access(i, e) - 1;
                    r
                      ? Z.access(i, e, r)
                      : (i.removeEventListener(t, n, !0), Z.remove(i, e));
                  },
                };
              });
          var Me = i.location,
            Se = { guid: Date.now() },
            Ee = /\?/;
          S.parseXML = function (t) {
            var e, n;
            if (!t || "string" != typeof t) return null;
            try {
              e = new i.DOMParser().parseFromString(t, "text/xml");
            } catch (t) {}
            return (
              (n = e && e.getElementsByTagName("parsererror")[0]),
              (e && !n) ||
                S.error(
                  "Invalid XML: " +
                    (n
                      ? S.map(n.childNodes, function (t) {
                          return t.textContent;
                        }).join("\n")
                      : t)
                ),
              e
            );
          };
          var Te = /\[\]$/,
            Ae = /\r?\n/g,
            Ce = /^(?:submit|button|image|reset|file)$/i,
            Le = /^(?:input|select|textarea|keygen)/i;
          function Re(t, e, n, i) {
            var r;
            if (Array.isArray(e))
              S.each(e, function (e, r) {
                n || Te.test(t)
                  ? i(t, r)
                  : Re(
                      t +
                        "[" +
                        ("object" == typeof r && null != r ? e : "") +
                        "]",
                      r,
                      n,
                      i
                    );
              });
            else if (n || "object" !== w(e)) i(t, e);
            else for (r in e) Re(t + "[" + r + "]", e[r], n, i);
          }
          (S.param = function (t, e) {
            var n,
              i = [],
              r = function (t, e) {
                var n = v(e) ? e() : e;
                i[i.length] =
                  encodeURIComponent(t) +
                  "=" +
                  encodeURIComponent(null == n ? "" : n);
              };
            if (null == t) return "";
            if (Array.isArray(t) || (t.jquery && !S.isPlainObject(t)))
              S.each(t, function () {
                r(this.name, this.value);
              });
            else for (n in t) Re(n, t[n], e, r);
            return i.join("&");
          }),
            S.fn.extend({
              serialize: function () {
                return S.param(this.serializeArray());
              },
              serializeArray: function () {
                return this.map(function () {
                  var t = S.prop(this, "elements");
                  return t ? S.makeArray(t) : this;
                })
                  .filter(function () {
                    var t = this.type;
                    return (
                      this.name &&
                      !S(this).is(":disabled") &&
                      Le.test(this.nodeName) &&
                      !Ce.test(t) &&
                      (this.checked || !gt.test(t))
                    );
                  })
                  .map(function (t, e) {
                    var n = S(this).val();
                    return null == n
                      ? null
                      : Array.isArray(n)
                      ? S.map(n, function (t) {
                          return { name: e.name, value: t.replace(Ae, "\r\n") };
                        })
                      : { name: e.name, value: n.replace(Ae, "\r\n") };
                  })
                  .get();
              },
            });
          var Pe = /%20/g,
            Oe = /#.*$/,
            ke = /([?&])_=[^&]*/,
            Ie = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            De = /^(?:GET|HEAD)$/,
            Be = /^\/\//,
            Ne = {},
            Fe = {},
            ze = "*/".concat("*"),
            He = x.createElement("a");
          function je(t) {
            return function (e, n) {
              "string" != typeof e && ((n = e), (e = "*"));
              var i,
                r = 0,
                o = e.toLowerCase().match(F) || [];
              if (v(n))
                for (; (i = o[r++]); )
                  "+" === i[0]
                    ? ((i = i.slice(1) || "*"), (t[i] = t[i] || []).unshift(n))
                    : (t[i] = t[i] || []).push(n);
            };
          }
          function Ue(t, e, n, i) {
            var r = {},
              o = t === Fe;
            function s(a) {
              var l;
              return (
                (r[a] = !0),
                S.each(t[a] || [], function (t, a) {
                  var c = a(e, n, i);
                  return "string" != typeof c || o || r[c]
                    ? o
                      ? !(l = c)
                      : void 0
                    : (e.dataTypes.unshift(c), s(c), !1);
                }),
                l
              );
            }
            return s(e.dataTypes[0]) || (!r["*"] && s("*"));
          }
          function Ve(t, e) {
            var n,
              i,
              r = S.ajaxSettings.flatOptions || {};
            for (n in e)
              void 0 !== e[n] && ((r[n] ? t : i || (i = {}))[n] = e[n]);
            return i && S.extend(!0, t, i), t;
          }
          (He.href = Me.href),
            S.extend({
              active: 0,
              lastModified: {},
              etag: {},
              ajaxSettings: {
                url: Me.href,
                type: "GET",
                isLocal:
                  /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(
                    Me.protocol
                  ),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                  "*": ze,
                  text: "text/plain",
                  html: "text/html",
                  xml: "application/xml, text/xml",
                  json: "application/json, text/javascript",
                },
                contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ },
                responseFields: {
                  xml: "responseXML",
                  text: "responseText",
                  json: "responseJSON",
                },
                converters: {
                  "* text": String,
                  "text html": !0,
                  "text json": JSON.parse,
                  "text xml": S.parseXML,
                },
                flatOptions: { url: !0, context: !0 },
              },
              ajaxSetup: function (t, e) {
                return e ? Ve(Ve(t, S.ajaxSettings), e) : Ve(S.ajaxSettings, t);
              },
              ajaxPrefilter: je(Ne),
              ajaxTransport: je(Fe),
              ajax: function (t, e) {
                "object" == typeof t && ((e = t), (t = void 0)), (e = e || {});
                var n,
                  r,
                  o,
                  s,
                  a,
                  l,
                  c,
                  u,
                  h,
                  d,
                  p = S.ajaxSetup({}, e),
                  f = p.context || p,
                  m = p.context && (f.nodeType || f.jquery) ? S(f) : S.event,
                  g = S.Deferred(),
                  v = S.Callbacks("once memory"),
                  y = p.statusCode || {},
                  _ = {},
                  b = {},
                  w = "canceled",
                  M = {
                    readyState: 0,
                    getResponseHeader: function (t) {
                      var e;
                      if (c) {
                        if (!s)
                          for (s = {}; (e = Ie.exec(o)); )
                            s[e[1].toLowerCase() + " "] = (
                              s[e[1].toLowerCase() + " "] || []
                            ).concat(e[2]);
                        e = s[t.toLowerCase() + " "];
                      }
                      return null == e ? null : e.join(", ");
                    },
                    getAllResponseHeaders: function () {
                      return c ? o : null;
                    },
                    setRequestHeader: function (t, e) {
                      return (
                        null == c &&
                          ((t = b[t.toLowerCase()] = b[t.toLowerCase()] || t),
                          (_[t] = e)),
                        this
                      );
                    },
                    overrideMimeType: function (t) {
                      return null == c && (p.mimeType = t), this;
                    },
                    statusCode: function (t) {
                      var e;
                      if (t)
                        if (c) M.always(t[M.status]);
                        else for (e in t) y[e] = [y[e], t[e]];
                      return this;
                    },
                    abort: function (t) {
                      var e = t || w;
                      return n && n.abort(e), E(0, e), this;
                    },
                  };
                if (
                  (g.promise(M),
                  (p.url = ((t || p.url || Me.href) + "").replace(
                    Be,
                    Me.protocol + "//"
                  )),
                  (p.type = e.method || e.type || p.method || p.type),
                  (p.dataTypes = (p.dataType || "*").toLowerCase().match(F) || [
                    "",
                  ]),
                  null == p.crossDomain)
                ) {
                  l = x.createElement("a");
                  try {
                    (l.href = p.url),
                      (l.href = l.href),
                      (p.crossDomain =
                        He.protocol + "//" + He.host !=
                        l.protocol + "//" + l.host);
                  } catch (t) {
                    p.crossDomain = !0;
                  }
                }
                if (
                  (p.data &&
                    p.processData &&
                    "string" != typeof p.data &&
                    (p.data = S.param(p.data, p.traditional)),
                  Ue(Ne, p, e, M),
                  c)
                )
                  return M;
                for (h in ((u = S.event && p.global) &&
                  0 == S.active++ &&
                  S.event.trigger("ajaxStart"),
                (p.type = p.type.toUpperCase()),
                (p.hasContent = !De.test(p.type)),
                (r = p.url.replace(Oe, "")),
                p.hasContent
                  ? p.data &&
                    p.processData &&
                    0 ===
                      (p.contentType || "").indexOf(
                        "application/x-www-form-urlencoded"
                      ) &&
                    (p.data = p.data.replace(Pe, "+"))
                  : ((d = p.url.slice(r.length)),
                    p.data &&
                      (p.processData || "string" == typeof p.data) &&
                      ((r += (Ee.test(r) ? "&" : "?") + p.data), delete p.data),
                    !1 === p.cache &&
                      ((r = r.replace(ke, "$1")),
                      (d = (Ee.test(r) ? "&" : "?") + "_=" + Se.guid++ + d)),
                    (p.url = r + d)),
                p.ifModified &&
                  (S.lastModified[r] &&
                    M.setRequestHeader("If-Modified-Since", S.lastModified[r]),
                  S.etag[r] && M.setRequestHeader("If-None-Match", S.etag[r])),
                ((p.data && p.hasContent && !1 !== p.contentType) ||
                  e.contentType) &&
                  M.setRequestHeader("Content-Type", p.contentType),
                M.setRequestHeader(
                  "Accept",
                  p.dataTypes[0] && p.accepts[p.dataTypes[0]]
                    ? p.accepts[p.dataTypes[0]] +
                        ("*" !== p.dataTypes[0] ? ", " + ze + "; q=0.01" : "")
                    : p.accepts["*"]
                ),
                p.headers))
                  M.setRequestHeader(h, p.headers[h]);
                if (p.beforeSend && (!1 === p.beforeSend.call(f, M, p) || c))
                  return M.abort();
                if (
                  ((w = "abort"),
                  v.add(p.complete),
                  M.done(p.success),
                  M.fail(p.error),
                  (n = Ue(Fe, p, e, M)))
                ) {
                  if (
                    ((M.readyState = 1), u && m.trigger("ajaxSend", [M, p]), c)
                  )
                    return M;
                  p.async &&
                    p.timeout > 0 &&
                    (a = i.setTimeout(function () {
                      M.abort("timeout");
                    }, p.timeout));
                  try {
                    (c = !1), n.send(_, E);
                  } catch (t) {
                    if (c) throw t;
                    E(-1, t);
                  }
                } else E(-1, "No Transport");
                function E(t, e, s, l) {
                  var h,
                    d,
                    x,
                    _,
                    b,
                    w = e;
                  c ||
                    ((c = !0),
                    a && i.clearTimeout(a),
                    (n = void 0),
                    (o = l || ""),
                    (M.readyState = t > 0 ? 4 : 0),
                    (h = (t >= 200 && t < 300) || 304 === t),
                    s &&
                      (_ = (function (t, e, n) {
                        for (
                          var i, r, o, s, a = t.contents, l = t.dataTypes;
                          "*" === l[0];

                        )
                          l.shift(),
                            void 0 === i &&
                              (i =
                                t.mimeType ||
                                e.getResponseHeader("Content-Type"));
                        if (i)
                          for (r in a)
                            if (a[r] && a[r].test(i)) {
                              l.unshift(r);
                              break;
                            }
                        if (l[0] in n) o = l[0];
                        else {
                          for (r in n) {
                            if (!l[0] || t.converters[r + " " + l[0]]) {
                              o = r;
                              break;
                            }
                            s || (s = r);
                          }
                          o = o || s;
                        }
                        if (o) return o !== l[0] && l.unshift(o), n[o];
                      })(p, M, s)),
                    !h &&
                      S.inArray("script", p.dataTypes) > -1 &&
                      S.inArray("json", p.dataTypes) < 0 &&
                      (p.converters["text script"] = function () {}),
                    (_ = (function (t, e, n, i) {
                      var r,
                        o,
                        s,
                        a,
                        l,
                        c = {},
                        u = t.dataTypes.slice();
                      if (u[1])
                        for (s in t.converters)
                          c[s.toLowerCase()] = t.converters[s];
                      for (o = u.shift(); o; )
                        if (
                          (t.responseFields[o] && (n[t.responseFields[o]] = e),
                          !l &&
                            i &&
                            t.dataFilter &&
                            (e = t.dataFilter(e, t.dataType)),
                          (l = o),
                          (o = u.shift()))
                        )
                          if ("*" === o) o = l;
                          else if ("*" !== l && l !== o) {
                            if (!(s = c[l + " " + o] || c["* " + o]))
                              for (r in c)
                                if (
                                  (a = r.split(" "))[1] === o &&
                                  (s = c[l + " " + a[0]] || c["* " + a[0]])
                                ) {
                                  !0 === s
                                    ? (s = c[r])
                                    : !0 !== c[r] &&
                                      ((o = a[0]), u.unshift(a[1]));
                                  break;
                                }
                            if (!0 !== s)
                              if (s && t.throws) e = s(e);
                              else
                                try {
                                  e = s(e);
                                } catch (t) {
                                  return {
                                    state: "parsererror",
                                    error: s
                                      ? t
                                      : "No conversion from " + l + " to " + o,
                                  };
                                }
                          }
                      return { state: "success", data: e };
                    })(p, _, M, h)),
                    h
                      ? (p.ifModified &&
                          ((b = M.getResponseHeader("Last-Modified")) &&
                            (S.lastModified[r] = b),
                          (b = M.getResponseHeader("etag")) && (S.etag[r] = b)),
                        204 === t || "HEAD" === p.type
                          ? (w = "nocontent")
                          : 304 === t
                          ? (w = "notmodified")
                          : ((w = _.state), (d = _.data), (h = !(x = _.error))))
                      : ((x = w),
                        (!t && w) || ((w = "error"), t < 0 && (t = 0))),
                    (M.status = t),
                    (M.statusText = (e || w) + ""),
                    h
                      ? g.resolveWith(f, [d, w, M])
                      : g.rejectWith(f, [M, w, x]),
                    M.statusCode(y),
                    (y = void 0),
                    u &&
                      m.trigger(h ? "ajaxSuccess" : "ajaxError", [
                        M,
                        p,
                        h ? d : x,
                      ]),
                    v.fireWith(f, [M, w]),
                    u &&
                      (m.trigger("ajaxComplete", [M, p]),
                      --S.active || S.event.trigger("ajaxStop")));
                }
                return M;
              },
              getJSON: function (t, e, n) {
                return S.get(t, e, n, "json");
              },
              getScript: function (t, e) {
                return S.get(t, void 0, e, "script");
              },
            }),
            S.each(["get", "post"], function (t, e) {
              S[e] = function (t, n, i, r) {
                return (
                  v(n) && ((r = r || i), (i = n), (n = void 0)),
                  S.ajax(
                    S.extend(
                      { url: t, type: e, dataType: r, data: n, success: i },
                      S.isPlainObject(t) && t
                    )
                  )
                );
              };
            }),
            S.ajaxPrefilter(function (t) {
              var e;
              for (e in t.headers)
                "content-type" === e.toLowerCase() &&
                  (t.contentType = t.headers[e] || "");
            }),
            (S._evalUrl = function (t, e, n) {
              return S.ajax({
                url: t,
                type: "GET",
                dataType: "script",
                cache: !0,
                async: !1,
                global: !1,
                converters: { "text script": function () {} },
                dataFilter: function (t) {
                  S.globalEval(t, e, n);
                },
              });
            }),
            S.fn.extend({
              wrapAll: function (t) {
                var e;
                return (
                  this[0] &&
                    (v(t) && (t = t.call(this[0])),
                    (e = S(t, this[0].ownerDocument).eq(0).clone(!0)),
                    this[0].parentNode && e.insertBefore(this[0]),
                    e
                      .map(function () {
                        for (var t = this; t.firstElementChild; )
                          t = t.firstElementChild;
                        return t;
                      })
                      .append(this)),
                  this
                );
              },
              wrapInner: function (t) {
                return v(t)
                  ? this.each(function (e) {
                      S(this).wrapInner(t.call(this, e));
                    })
                  : this.each(function () {
                      var e = S(this),
                        n = e.contents();
                      n.length ? n.wrapAll(t) : e.append(t);
                    });
              },
              wrap: function (t) {
                var e = v(t);
                return this.each(function (n) {
                  S(this).wrapAll(e ? t.call(this, n) : t);
                });
              },
              unwrap: function (t) {
                return (
                  this.parent(t)
                    .not("body")
                    .each(function () {
                      S(this).replaceWith(this.childNodes);
                    }),
                  this
                );
              },
            }),
            (S.expr.pseudos.hidden = function (t) {
              return !S.expr.pseudos.visible(t);
            }),
            (S.expr.pseudos.visible = function (t) {
              return !!(
                t.offsetWidth ||
                t.offsetHeight ||
                t.getClientRects().length
              );
            }),
            (S.ajaxSettings.xhr = function () {
              try {
                return new i.XMLHttpRequest();
              } catch (t) {}
            });
          var Ge = { 0: 200, 1223: 204 },
            We = S.ajaxSettings.xhr();
          (g.cors = !!We && "withCredentials" in We),
            (g.ajax = We = !!We),
            S.ajaxTransport(function (t) {
              var e, n;
              if (g.cors || (We && !t.crossDomain))
                return {
                  send: function (r, o) {
                    var s,
                      a = t.xhr();
                    if (
                      (a.open(t.type, t.url, t.async, t.username, t.password),
                      t.xhrFields)
                    )
                      for (s in t.xhrFields) a[s] = t.xhrFields[s];
                    for (s in (t.mimeType &&
                      a.overrideMimeType &&
                      a.overrideMimeType(t.mimeType),
                    t.crossDomain ||
                      r["X-Requested-With"] ||
                      (r["X-Requested-With"] = "XMLHttpRequest"),
                    r))
                      a.setRequestHeader(s, r[s]);
                    (e = function (t) {
                      return function () {
                        e &&
                          ((e =
                            n =
                            a.onload =
                            a.onerror =
                            a.onabort =
                            a.ontimeout =
                            a.onreadystatechange =
                              null),
                          "abort" === t
                            ? a.abort()
                            : "error" === t
                            ? "number" != typeof a.status
                              ? o(0, "error")
                              : o(a.status, a.statusText)
                            : o(
                                Ge[a.status] || a.status,
                                a.statusText,
                                "text" !== (a.responseType || "text") ||
                                  "string" != typeof a.responseText
                                  ? { binary: a.response }
                                  : { text: a.responseText },
                                a.getAllResponseHeaders()
                              ));
                      };
                    }),
                      (a.onload = e()),
                      (n = a.onerror = a.ontimeout = e("error")),
                      void 0 !== a.onabort
                        ? (a.onabort = n)
                        : (a.onreadystatechange = function () {
                            4 === a.readyState &&
                              i.setTimeout(function () {
                                e && n();
                              });
                          }),
                      (e = e("abort"));
                    try {
                      a.send((t.hasContent && t.data) || null);
                    } catch (t) {
                      if (e) throw t;
                    }
                  },
                  abort: function () {
                    e && e();
                  },
                };
            }),
            S.ajaxPrefilter(function (t) {
              t.crossDomain && (t.contents.script = !1);
            }),
            S.ajaxSetup({
              accepts: {
                script:
                  "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
              },
              contents: { script: /\b(?:java|ecma)script\b/ },
              converters: {
                "text script": function (t) {
                  return S.globalEval(t), t;
                },
              },
            }),
            S.ajaxPrefilter("script", function (t) {
              void 0 === t.cache && (t.cache = !1),
                t.crossDomain && (t.type = "GET");
            }),
            S.ajaxTransport("script", function (t) {
              var e, n;
              if (t.crossDomain || t.scriptAttrs)
                return {
                  send: function (i, r) {
                    (e = S("<script>")
                      .attr(t.scriptAttrs || {})
                      .prop({ charset: t.scriptCharset, src: t.url })
                      .on(
                        "load error",
                        (n = function (t) {
                          e.remove(),
                            (n = null),
                            t && r("error" === t.type ? 404 : 200, t.type);
                        })
                      )),
                      x.head.appendChild(e[0]);
                  },
                  abort: function () {
                    n && n();
                  },
                };
            });
          var qe,
            Xe = [],
            Ye = /(=)\?(?=&|$)|\?\?/;
          S.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function () {
              var t = Xe.pop() || S.expando + "_" + Se.guid++;
              return (this[t] = !0), t;
            },
          }),
            S.ajaxPrefilter("json jsonp", function (t, e, n) {
              var r,
                o,
                s,
                a =
                  !1 !== t.jsonp &&
                  (Ye.test(t.url)
                    ? "url"
                    : "string" == typeof t.data &&
                      0 ===
                        (t.contentType || "").indexOf(
                          "application/x-www-form-urlencoded"
                        ) &&
                      Ye.test(t.data) &&
                      "data");
              if (a || "jsonp" === t.dataTypes[0])
                return (
                  (r = t.jsonpCallback =
                    v(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback),
                  a
                    ? (t[a] = t[a].replace(Ye, "$1" + r))
                    : !1 !== t.jsonp &&
                      (t.url +=
                        (Ee.test(t.url) ? "&" : "?") + t.jsonp + "=" + r),
                  (t.converters["script json"] = function () {
                    return s || S.error(r + " was not called"), s[0];
                  }),
                  (t.dataTypes[0] = "json"),
                  (o = i[r]),
                  (i[r] = function () {
                    s = arguments;
                  }),
                  n.always(function () {
                    void 0 === o ? S(i).removeProp(r) : (i[r] = o),
                      t[r] && ((t.jsonpCallback = e.jsonpCallback), Xe.push(r)),
                      s && v(o) && o(s[0]),
                      (s = o = void 0);
                  }),
                  "script"
                );
            }),
            (g.createHTMLDocument =
              (((qe = x.implementation.createHTMLDocument("").body).innerHTML =
                "<form></form><form></form>"),
              2 === qe.childNodes.length)),
            (S.parseHTML = function (t, e, n) {
              return "string" != typeof t
                ? []
                : ("boolean" == typeof e && ((n = e), (e = !1)),
                  e ||
                    (g.createHTMLDocument
                      ? (((i = (e =
                          x.implementation.createHTMLDocument(
                            ""
                          )).createElement("base")).href = x.location.href),
                        e.head.appendChild(i))
                      : (e = x)),
                  (o = !n && []),
                  (r = P.exec(t))
                    ? [e.createElement(r[1])]
                    : ((r = Mt([t], e, o)),
                      o && o.length && S(o).remove(),
                      S.merge([], r.childNodes)));
              var i, r, o;
            }),
            (S.fn.load = function (t, e, n) {
              var i,
                r,
                o,
                s = this,
                a = t.indexOf(" ");
              return (
                a > -1 && ((i = ve(t.slice(a))), (t = t.slice(0, a))),
                v(e)
                  ? ((n = e), (e = void 0))
                  : e && "object" == typeof e && (r = "POST"),
                s.length > 0 &&
                  S.ajax({
                    url: t,
                    type: r || "GET",
                    dataType: "html",
                    data: e,
                  })
                    .done(function (t) {
                      (o = arguments),
                        s.html(
                          i ? S("<div>").append(S.parseHTML(t)).find(i) : t
                        );
                    })
                    .always(
                      n &&
                        function (t, e) {
                          s.each(function () {
                            n.apply(this, o || [t.responseText, e, t]);
                          });
                        }
                    ),
                this
              );
            }),
            (S.expr.pseudos.animated = function (t) {
              return S.grep(S.timers, function (e) {
                return t === e.elem;
              }).length;
            }),
            (S.offset = {
              setOffset: function (t, e, n) {
                var i,
                  r,
                  o,
                  s,
                  a,
                  l,
                  c = S.css(t, "position"),
                  u = S(t),
                  h = {};
                "static" === c && (t.style.position = "relative"),
                  (a = u.offset()),
                  (o = S.css(t, "top")),
                  (l = S.css(t, "left")),
                  ("absolute" === c || "fixed" === c) &&
                  (o + l).indexOf("auto") > -1
                    ? ((s = (i = u.position()).top), (r = i.left))
                    : ((s = parseFloat(o) || 0), (r = parseFloat(l) || 0)),
                  v(e) && (e = e.call(t, n, S.extend({}, a))),
                  null != e.top && (h.top = e.top - a.top + s),
                  null != e.left && (h.left = e.left - a.left + r),
                  "using" in e ? e.using.call(t, h) : u.css(h);
              },
            }),
            S.fn.extend({
              offset: function (t) {
                if (arguments.length)
                  return void 0 === t
                    ? this
                    : this.each(function (e) {
                        S.offset.setOffset(this, t, e);
                      });
                var e,
                  n,
                  i = this[0];
                return i
                  ? i.getClientRects().length
                    ? ((e = i.getBoundingClientRect()),
                      (n = i.ownerDocument.defaultView),
                      {
                        top: e.top + n.pageYOffset,
                        left: e.left + n.pageXOffset,
                      })
                    : { top: 0, left: 0 }
                  : void 0;
              },
              position: function () {
                if (this[0]) {
                  var t,
                    e,
                    n,
                    i = this[0],
                    r = { top: 0, left: 0 };
                  if ("fixed" === S.css(i, "position"))
                    e = i.getBoundingClientRect();
                  else {
                    for (
                      e = this.offset(),
                        n = i.ownerDocument,
                        t = i.offsetParent || n.documentElement;
                      t &&
                      (t === n.body || t === n.documentElement) &&
                      "static" === S.css(t, "position");

                    )
                      t = t.parentNode;
                    t &&
                      t !== i &&
                      1 === t.nodeType &&
                      (((r = S(t).offset()).top += S.css(
                        t,
                        "borderTopWidth",
                        !0
                      )),
                      (r.left += S.css(t, "borderLeftWidth", !0)));
                  }
                  return {
                    top: e.top - r.top - S.css(i, "marginTop", !0),
                    left: e.left - r.left - S.css(i, "marginLeft", !0),
                  };
                }
              },
              offsetParent: function () {
                return this.map(function () {
                  for (
                    var t = this.offsetParent;
                    t && "static" === S.css(t, "position");

                  )
                    t = t.offsetParent;
                  return t || st;
                });
              },
            }),
            S.each(
              { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" },
              function (t, e) {
                var n = "pageYOffset" === e;
                S.fn[t] = function (i) {
                  return W(
                    this,
                    function (t, i, r) {
                      var o;
                      if (
                        (y(t)
                          ? (o = t)
                          : 9 === t.nodeType && (o = t.defaultView),
                        void 0 === r)
                      )
                        return o ? o[e] : t[i];
                      o
                        ? o.scrollTo(
                            n ? o.pageXOffset : r,
                            n ? r : o.pageYOffset
                          )
                        : (t[i] = r);
                    },
                    t,
                    i,
                    arguments.length
                  );
                };
              }
            ),
            S.each(["top", "left"], function (t, e) {
              S.cssHooks[e] = Wt(g.pixelPosition, function (t, n) {
                if (n)
                  return (
                    (n = Gt(t, e)), Ht.test(n) ? S(t).position()[e] + "px" : n
                  );
              });
            }),
            S.each({ Height: "height", Width: "width" }, function (t, e) {
              S.each(
                { padding: "inner" + t, content: e, "": "outer" + t },
                function (n, i) {
                  S.fn[i] = function (r, o) {
                    var s = arguments.length && (n || "boolean" != typeof r),
                      a = n || (!0 === r || !0 === o ? "margin" : "border");
                    return W(
                      this,
                      function (e, n, r) {
                        var o;
                        return y(e)
                          ? 0 === i.indexOf("outer")
                            ? e["inner" + t]
                            : e.document.documentElement["client" + t]
                          : 9 === e.nodeType
                          ? ((o = e.documentElement),
                            Math.max(
                              e.body["scroll" + t],
                              o["scroll" + t],
                              e.body["offset" + t],
                              o["offset" + t],
                              o["client" + t]
                            ))
                          : void 0 === r
                          ? S.css(e, n, a)
                          : S.style(e, n, r, a);
                      },
                      e,
                      s ? r : void 0,
                      s
                    );
                  };
                }
              );
            }),
            S.each(
              [
                "ajaxStart",
                "ajaxStop",
                "ajaxComplete",
                "ajaxError",
                "ajaxSuccess",
                "ajaxSend",
              ],
              function (t, e) {
                S.fn[e] = function (t) {
                  return this.on(e, t);
                };
              }
            ),
            S.fn.extend({
              bind: function (t, e, n) {
                return this.on(t, null, e, n);
              },
              unbind: function (t, e) {
                return this.off(t, null, e);
              },
              delegate: function (t, e, n, i) {
                return this.on(e, t, n, i);
              },
              undelegate: function (t, e, n) {
                return 1 === arguments.length
                  ? this.off(t, "**")
                  : this.off(e, t || "**", n);
              },
              hover: function (t, e) {
                return this.mouseenter(t).mouseleave(e || t);
              },
            }),
            S.each(
              "blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(
                " "
              ),
              function (t, e) {
                S.fn[e] = function (t, n) {
                  return arguments.length > 0
                    ? this.on(e, null, t, n)
                    : this.trigger(e);
                };
              }
            );
          var $e = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
          (S.proxy = function (t, e) {
            var n, i, r;
            if (("string" == typeof e && ((n = t[e]), (e = t), (t = n)), v(t)))
              return (
                (i = a.call(arguments, 2)),
                ((r = function () {
                  return t.apply(e || this, i.concat(a.call(arguments)));
                }).guid = t.guid =
                  t.guid || S.guid++),
                r
              );
          }),
            (S.holdReady = function (t) {
              t ? S.readyWait++ : S.ready(!0);
            }),
            (S.isArray = Array.isArray),
            (S.parseJSON = JSON.parse),
            (S.nodeName = R),
            (S.isFunction = v),
            (S.isWindow = y),
            (S.camelCase = $),
            (S.type = w),
            (S.now = Date.now),
            (S.isNumeric = function (t) {
              var e = S.type(t);
              return (
                ("number" === e || "string" === e) && !isNaN(t - parseFloat(t))
              );
            }),
            (S.trim = function (t) {
              return null == t ? "" : (t + "").replace($e, "");
            }),
            void 0 ===
              (n = function () {
                return S;
              }.apply(e, [])) || (t.exports = n);
          var Ke = i.jQuery,
            Je = i.$;
          return (
            (S.noConflict = function (t) {
              return (
                i.$ === S && (i.$ = Je),
                t && i.jQuery === S && (i.jQuery = Ke),
                S
              );
            }),
            void 0 === r && (i.jQuery = i.$ = S),
            S
          );
        });
      },
      684: (t, e, n) => {
        (t = n.nmd(t)),
          (function () {
            function e(t, i) {
              return i
                ? n(735)(t)
                : t.slice
                ? e[r(t)]
                : function (n, i) {
                    t((n = { exports: {} })), (e[r(i)] = n.exports);
                  };
              function r(t) {
                return t.split("/").slice(-1).toString().replace(".js", "");
              }
            }
            var i = t;
            e(function (t) {
              (String.random = function (t, e) {
                var n = "";
                for (
                  t = t || 24,
                    e =
                      e ||
                      "0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";
                  t-- > 0;

                )
                  n += e.charAt(Math.floor(Math.random() * e.length));
                return n;
              }),
                (String.match = function (t, e) {
                  var n, i;
                  return (
                    "string" == typeof t &&
                    ("string" == typeof e && (e = { "=": e }),
                    t ===
                      (n = (e = e || {})["="] || e["*"] || e[">"] || e["<"]) ||
                      (i === e["="] &&
                        ((n = e["*"] || e[">"]),
                        t.slice(0, (n || "").length) === n ||
                          (i === e["*"] &&
                            (i !== e[">"] && i !== e["<"]
                              ? t >= e[">"] && t <= e["<"]
                              : (i !== e[">"] && t >= e[">"]) ||
                                (i !== e["<"] && t <= e["<"]))))))
                  );
                }),
                (String.hash = function (t, e) {
                  if ("string" == typeof t) {
                    if (((e = e || 0), !t.length)) return e;
                    for (var n = 0, i = t.length; n < i; ++n)
                      (e = (e << 5) - e + t.charCodeAt(n)), (e |= 0);
                    return e;
                  }
                });
              var e,
                n,
                i,
                r,
                o = Object.prototype.hasOwnProperty;
              (Object.plain = function (t) {
                return (
                  !!t &&
                  ((t instanceof Object && t.constructor === Object) ||
                    "Object" ===
                      Object.prototype.toString
                        .call(t)
                        .match(/^\[object (\w+)\]$/)[1])
                );
              }),
                (Object.empty = function (t, e) {
                  for (var n in t)
                    if (o.call(t, n) && (!e || -1 == e.indexOf(n))) return !1;
                  return !0;
                }),
                (Object.keys =
                  Object.keys ||
                  function (t) {
                    var e = [];
                    for (var n in t) o.call(t, n) && e.push(n);
                    return e;
                  }),
                (e = setTimeout),
                (n = 0),
                (i = 0),
                (r = (typeof setImmediate != "" + void 0 && setImmediate) || e),
                (e.poll =
                  e.poll ||
                  function (t) {
                    1 >= +new Date() - n && i++ < 3333
                      ? t()
                      : r(function () {
                          (n = +new Date()), t();
                        }, (i = 0));
                  }),
                (function () {
                  var t,
                    e = setTimeout,
                    n = (e.turn =
                      e.turn ||
                      function (t) {
                        1 == i.push(t) && r(s);
                      }),
                    i = (n.s = []),
                    r = e.poll,
                    o = 0,
                    s = function () {
                      (t = i[o++]) && t(),
                        (o != i.length && 99 != o) ||
                          ((i = n.s = i.slice(o)), (o = 0)),
                        i.length && r(s);
                    };
                })(),
                (function () {
                  var t,
                    e = setTimeout,
                    n = e.turn;
                  (e.each =
                    e.each ||
                    function (e, i, r, o) {
                      (o = o || 9),
                        (function s(a, l, c) {
                          if ((l = (a = (e || []).splice(0, o)).length)) {
                            for (var u = 0; u < l && t === (c = i(a[u])); u++);
                            if (t === c) return void n(s);
                          }
                          r && r(c);
                        })();
                    })();
                })();
            })(e, "./shim"),
              e(function (t) {
                t.exports = function t(e, n, i) {
                  if (!e) return { to: t };
                  var r = "function" == typeof n;
                  if (
                    ((e =
                      (this.tag || (this.tag = {}))[e] ||
                      (r &&
                        (this.tag[e] = {
                          tag: e,
                          to: (t._ = {
                            next: function (t) {
                              var e;
                              (e = this.to) && e.next(t);
                            },
                          }),
                        }))),
                    r)
                  ) {
                    var o = {
                      off:
                        t.off ||
                        (t.off = function () {
                          if (this.next === t._.next) return !0;
                          this === this.the.last && (this.the.last = this.back),
                            (this.to.back = this.back),
                            (this.next = t._.next),
                            (this.back.to = this.to),
                            this.the.last === this.the &&
                              delete this.on.tag[this.the.tag];
                        }),
                      to: t._,
                      next: n,
                      the: e,
                      on: this,
                      as: i,
                    };
                    return ((o.back = e.last || e).to = o), (e.last = o);
                  }
                  return (e = e.to) && void 0 !== n && e.next(n), e;
                };
              })(e, "./onto"),
              e(function (t) {
                e("./shim"),
                  (t.exports = function (t) {
                    return (
                      void 0 !== t &&
                      (null === t ||
                        (t !== 1 / 0 &&
                          t == t &&
                          ("string" == typeof t ||
                            "boolean" == typeof t ||
                            "number" == typeof t ||
                            (!(
                              !t ||
                              "string" != typeof (t["#"] || 0) ||
                              !Object.empty(t, ["#"])
                            ) &&
                              t["#"]))))
                    );
                  });
              })(e, "./valid"),
              e(function (t) {
                function n() {
                  var t = +new Date();
                  return a < t
                    ? ((o = 0), (a = t + n.drift))
                    : (a = t + (o += 1) / s + n.drift);
                }
                e("./shim"), (n.drift = 0);
                var i,
                  r = -1 / 0,
                  o = 0,
                  s = 999,
                  a = r;
                (n.is = function (t, e, n) {
                  var i = (e && t && t._ && t._[">"]) || n;
                  if (i) return "number" == typeof (i = i[e]) ? i : r;
                }),
                  (n.ify = function (t, e, n, r, o) {
                    ((t = t || {})._ = t._ || {}), o && (t._["#"] = o);
                    var s = t._[">"] || (t._[">"] = {});
                    return (
                      i !== e &&
                        "_" !== e &&
                        ("number" == typeof n && (s[e] = n),
                        i !== r && (t[e] = r)),
                      t
                    );
                  }),
                  (t.exports = n);
              })(e, "./state"),
              e(function (t) {
                e("./shim"),
                  (t.exports = function (t) {
                    var e = { s: {} },
                      n = e.s;
                    (t = t || { max: 999, age: 9e3 }),
                      (e.check = function (t) {
                        return !!n[t] && i(t);
                      });
                    var i = (e.track = function (i) {
                      var r = n[i] || (n[i] = {});
                      return (
                        (r.was = e.now = +new Date()),
                        e.to || (e.to = setTimeout(e.drop, t.age + 9)),
                        r
                      );
                    });
                    return (
                      (e.drop = function (i) {
                        (e.to = null), (e.now = +new Date());
                        var r = Object.keys(n);
                        console.STAT &&
                          console.STAT(
                            e.now,
                            +new Date() - e.now,
                            "dup drop keys"
                          ),
                          setTimeout.each(
                            r,
                            function (r) {
                              var o = n[r];
                              (o && (i || t.age) > e.now - o.was) ||
                                delete n[r];
                            },
                            0,
                            99
                          );
                      }),
                      e
                    );
                  });
              })(e, "./dup"),
              e(function (t) {
                e("./onto"),
                  (t.exports = function (t, e) {
                    if (this.on) {
                      var i = (this.opt || {}).lack || 9e3;
                      if ("function" != typeof t) {
                        if (!t) return;
                        var r = t["#"] || t,
                          o = (this.tag || "")[r];
                        if (!o) return;
                        return (
                          e &&
                            ((o = this.on(r, e)),
                            clearTimeout(o.err),
                            (o.err = setTimeout(function () {
                              o.off();
                            }, i))),
                          !0
                        );
                      }
                      if (((r = (e && e["#"]) || n(9)), !t)) return r;
                      var s = this.on(r, t, e);
                      return (
                        (s.err =
                          s.err ||
                          setTimeout(function () {
                            s.off(),
                              s.next({ err: "Error: No ACK yet.", lack: !0 });
                          }, i)),
                        r
                      );
                    }
                  });
                var n =
                  String.random ||
                  function () {
                    return Math.random().toString(36).slice(2);
                  };
              })(e, "./ask"),
              e(function (t) {
                function n(t) {
                  return t instanceof n
                    ? (this._ = { $: this }).$
                    : this instanceof n
                    ? n.create((this._ = { $: this, opt: t }))
                    : new n(t);
                }
                (n.is = function (t) {
                  return t instanceof n || (t && t._ && t === t._.$) || !1;
                }),
                  (n.version = 0.202),
                  (n.chain = n.prototype),
                  (n.chain.toJSON = function () {}),
                  e("./shim"),
                  (n.valid = e("./valid")),
                  (n.state = e("./state")),
                  (n.on = e("./onto")),
                  (n.dup = e("./dup")),
                  (n.ask = e("./ask")),
                  (function () {
                    function t(i) {
                      if (i)
                        if (i.out !== t) {
                          var r,
                            o = this.as,
                            l = o.at || o,
                            c = l.$,
                            u = l.dup,
                            h = i.DBG;
                          if (
                            ((r = i["#"]) || (r = i["#"] = a(9)), !u.check(r))
                          ) {
                            if (
                              (u.track(r),
                              (r = i._),
                              (i._ =
                                "function" == typeof r ? r : function () {}),
                              (i.$ && i.$ === (i.$._ || "").$) || (i.$ = c),
                              i["@"] &&
                                !i.put &&
                                (function (t) {
                                  var e,
                                    n = t["@"] || "";
                                  (e = n._) &&
                                    ((e.acks = (e.acks || 0) + 1),
                                    (e.err = t.err) &&
                                      ((t["@"] = e["#"]), s(e)),
                                    e.stop ||
                                      e.crack ||
                                      (e.crack =
                                        e.match &&
                                        e.match.push(function () {
                                          p(e);
                                        })),
                                    p(e));
                                })(i),
                              !l.ask(i["@"], i))
                            ) {
                              if ((h && (h.u = +new Date()), i.put))
                                return void e(i);
                              i.get && n.on.get(i, c);
                            }
                            h && (h.uc = +new Date()),
                              this.to.next(i),
                              h && (h.ua = +new Date()),
                              i.nts ||
                                i.NTS ||
                                ((i.out = t),
                                l.on("out", i),
                                h && (h.ue = +new Date()));
                          }
                        } else this.to.next(i);
                    }
                    function e(e) {
                      if (e) {
                        var n = e._ || "",
                          o = (n.root = ((n.$ = e.$ || "")._ || "").root);
                        if (e["@"] && n.faith && !n.miss)
                          return (e.out = t), void o.on("out", e);
                        (n.latch = o.hatch), (n.match = o.hatch = []);
                        var a = e.put,
                          u = (n.DBG = e.DBG),
                          h = +new Date();
                        if (!a["#"] || !a["."]) {
                          u && (u.p = h),
                            (n["#"] = e["#"]),
                            (n.msg = e),
                            (n.all = 0),
                            (n.stun = 1);
                          var d = Object.keys(a);
                          console.STAT &&
                            console.STAT(
                              h,
                              ((u || n).pk = +new Date()) - h,
                              "put sort"
                            );
                          var p,
                            g,
                            v,
                            y,
                            x,
                            _,
                            b,
                            w = 0;
                          !(function t(o) {
                            if (p != w) {
                              if (((p = w), !(v = d[w])))
                                return (
                                  console.STAT &&
                                    console.STAT(
                                      h,
                                      ((u || n).pd = +new Date()) - h,
                                      "put"
                                    ),
                                  void s(n)
                                );
                              (y = a[v])
                                ? (b = y._)
                                  ? v !== b["#"]
                                    ? (_ = f + m(v) + "soul not same.")
                                    : (x = b[">"]) ||
                                      (_ = f + m(v) + "no state.")
                                  : (_ = f + m(v) + "no meta.")
                                : (_ = f + m(v) + "no node."),
                                (g = Object.keys(y || {}));
                            }
                            if (_) return (e.err = n.err = _), void s(n);
                            var M,
                              S = 0;
                            for (o = o || 0; o++ < 9 && (M = g[S++]); )
                              if ("_" !== M) {
                                var E = y[M],
                                  T = x[M];
                                if (r === T) {
                                  _ = f + m(M) + "on" + m(v) + "no state.";
                                  break;
                                }
                                if (!c(E)) {
                                  _ =
                                    f +
                                    m(M) +
                                    "on" +
                                    m(v) +
                                    "bad " +
                                    typeof E +
                                    m(E);
                                  break;
                                }
                                i(E, M, v, T, e);
                              }
                            (g = g.slice(S)).length
                              ? l(t)
                              : (++w, (g = null), t(o));
                          })();
                        }
                      }
                    }
                    function i(t, e, n, r, o) {
                      var s,
                        a = o._ || "",
                        l = a.root,
                        c = l.graph,
                        h = c[n] || d,
                        p = u(h, e, 1),
                        f = h[e],
                        m = a.DBG;
                      (s = console.STAT) &&
                        ((c[n] && f) || (s.has = (s.has || 0) + 1));
                      var x = y();
                      if (r > x)
                        return (
                          setTimeout(
                            function () {
                              i(t, e, n, r, o);
                            },
                            (s = r - x) > v ? v : s
                          ),
                          void (
                            console.STAT &&
                            console.STAT(
                              ((m || a).Hf = +new Date()),
                              s,
                              "future"
                            )
                          )
                        );
                      if (
                        (!(r < p) || a.miss) &&
                        (a.faith ||
                          r !== p ||
                          !(t === f || g(t) <= g(f)) ||
                          a.miss)
                      ) {
                        a.stun++;
                        var _ = o["#"] + a.all++,
                          b = {
                            toString: function () {
                              return _;
                            },
                            _: a,
                          };
                        (b.toJSON = b.toString),
                          m && (m.ph = m.ph || +new Date()),
                          l.on("put", {
                            "#": b,
                            "@": o["@"],
                            put: { "#": n, ".": e, ":": t, ">": r },
                            _: a,
                          });
                      }
                    }
                    function o(t) {
                      var e;
                      (e = (t._ || "").DBG) &&
                        ((e.pa = +new Date()), (e.pm = e.pm || +new Date()));
                      var n,
                        i = this.as,
                        r = i.graph,
                        o = t._,
                        a = t.put,
                        l = a["#"],
                        c = a["."],
                        u = a[":"],
                        d = a[">"];
                      t["#"],
                        (n = o.msg) &&
                          (n = n.put) &&
                          (n = n[l]) &&
                          h(n, c, d, u, l),
                        (r[l] = h(r[l], c, d, u, l)),
                        (n = (i.next || "")[l]) && n.on("in", t),
                        s(o),
                        this.to.next(t);
                    }
                    function s(e, n) {
                      var i;
                      if (
                        !e.stop &&
                        (e.err || !(0 < --e.stun)) &&
                        ((e.stop = 1), (i = e.root))
                      ) {
                        var r = e.match;
                        (r.end = 1),
                          r === i.hatch &&
                            (!(r = e.latch) || r.end
                              ? delete i.hatch
                              : (i.hatch = r)),
                          e.hatch && e.hatch(),
                          setTimeout.each(e.match, function (t) {
                            t && t();
                          }),
                          !(n = e.msg) ||
                            e.err ||
                            n.err ||
                            ((n.out = t), e.root.on("out", n));
                      }
                    }
                    function p(t) {
                      t &&
                        t.root &&
                        (t.stun ||
                          t.acks !== t.all ||
                          t.root.on("in", {
                            "@": t["#"],
                            err: t.err,
                            ok: t.err ? r : { "": 1 },
                          }));
                    }
                    (n.create = function (e) {
                      (e.root = e.root || e),
                        (e.graph = e.graph || {}),
                        (e.on = e.on || n.on),
                        (e.ask = e.ask || n.ask),
                        (e.dup = e.dup || n.dup());
                      var i = e.$.opt(e.opt);
                      return (
                        e.once ||
                          (e.on("in", t, e),
                          e.on("out", t, e),
                          e.on("put", o, e),
                          n.on("create", e),
                          e.on("create", e)),
                        (e.once = 1),
                        i
                      );
                    }),
                      (n.on.put = e),
                      console.log(
                        "BEWARE: BETA VERSION OF NEW GUN! NOT ALL FEATURES FINISHED!"
                      );
                    var f = "Error: Invalid graph!",
                      m = function (t) {
                        return " '" + ("" + t).slice(0, 9) + "...' ";
                      },
                      g = JSON.stringify,
                      v = 2147483647,
                      y = n.state;
                  })(),
                  (function () {
                    function t(t, e) {
                      var n = +new Date(),
                        i = t._ || {},
                        o = (i.DBG = t.DBG),
                        s = t["#"],
                        l = a(9),
                        c = Object.keys(e || "").sort(),
                        d = ((e || "")._ || "")["#"],
                        p = (c.length, t.$._.root),
                        f = e === p.graph[d];
                      console.STAT &&
                        console.STAT(
                          n,
                          ((o || i).gk = +new Date()) - n,
                          "got keys"
                        ),
                        e &&
                          (function t() {
                            n = +new Date();
                            for (
                              var i, m, g, v = 0, y = {};
                              v < 9 && (i = c[v++]);

                            )
                              h(y, i, u(e, i), e[i], d);
                            (c = c.slice(v)),
                              ((m = {})[d] = y),
                              (y = m),
                              f && ((g = function () {}).ram = g.faith = !0),
                              (m = c.length),
                              console.STAT &&
                                console.STAT(
                                  n,
                                  -(n - (n = +new Date())),
                                  "got copied some"
                                ),
                              o && (o.ga = +new Date()),
                              p.on("in", {
                                "@": s,
                                "#": l,
                                put: y,
                                "%": m ? (l = a(9)) : r,
                                $: p.$,
                                _: g,
                                DBG: o,
                              }),
                              console.STAT &&
                                console.STAT(n, +new Date() - n, "got in"),
                              m && setTimeout.turn(t);
                          })(),
                        e || p.on("in", { "@": t["#"] });
                    }
                    (n.on.get = function (e, n) {
                      var i = n._,
                        o = e.get,
                        s = o["#"],
                        a = i.graph[s],
                        l = o["."],
                        c =
                          ((i.next || (i.next = {}))[s],
                          ((e._ || {}).DBG = e.DBG));
                      if ((c && (c.g = +new Date()), !a)) return i.on("get", e);
                      if (l) {
                        if ("string" != typeof l || r === a[l])
                          return i.on("get", e);
                        a = h({}, l, u(a, l), a[l], s);
                      }
                      a && t(e, a), i.on("get", e);
                    }),
                      (n.on.get.ack = t);
                  })(),
                  (n.chain.opt = function (t) {
                    t = t || {};
                    var e = this._,
                      i = t.peers || t;
                    return (
                      Object.plain(t) || (t = {}),
                      Object.plain(e.opt) || (e.opt = t),
                      "string" == typeof i && (i = [i]),
                      i instanceof Array &&
                        (Object.plain(e.opt.peers) || (e.opt.peers = {}),
                        i.forEach(function (t) {
                          var n = {};
                          (n.id = n.url = t),
                            (e.opt.peers[t] = e.opt.peers[t] || n);
                        })),
                      (e.opt.peers = e.opt.peers || {}),
                      s(t, function t(e) {
                        var n = this[e];
                        (this && this.hasOwnProperty(e)) ||
                        "string" == typeof n ||
                        Object.empty(n)
                          ? (this[e] = n)
                          : (!n ||
                              n.constructor === Object ||
                              n instanceof Array) &&
                            s(n, t);
                      }),
                      n.on("opt", e),
                      (e.opt.uuid =
                        e.opt.uuid ||
                        function (t) {
                          return (
                            n.state().toString(36).replace(".", "") +
                            String.random(t || 12)
                          );
                        }),
                      this
                    );
                  });
                var r,
                  o,
                  s = function (t, e) {
                    Object.keys(t).forEach(e, t);
                  },
                  a = String.random,
                  l = setTimeout.turn,
                  c = n.valid,
                  u = n.state.is,
                  h = n.state.ify,
                  d = {};
                (n.log = function () {
                  return (
                    !n.log.off && o.log.apply(o, arguments),
                    [].slice.call(arguments).join(" ")
                  );
                }),
                  (n.log.once = function (t, e, i) {
                    return (
                      ((i = n.log.once)[t] = i[t] || 0), i[t]++ || n.log(e)
                    );
                  }),
                  "undefined" != typeof window &&
                    ((window.GUN = window.Gun = n).window = window);
                try {
                  void 0 !== i && (i.exports = n);
                } catch (t) {}
                (t.exports = n),
                  ((n.window || {}).console = (n.window || {}).console || {
                    log: function () {},
                  }),
                  ((o = console).only = function (t, e) {
                    return (
                      o.only.i &&
                      t === o.only.i &&
                      o.only.i++ &&
                      (o.log.apply(o, arguments) || e)
                    );
                  }),
                  n.log.once(
                    "welcome",
                    "Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!"
                  );
              })(e, "./root"),
              e(function (t) {
                e("./root").chain.back = function (t, e) {
                  if (-1 === (t = t || 1) || 1 / 0 === t) return this._.root.$;
                  if (1 === t) return (this._.back || this._).$;
                  var r = this._;
                  if (
                    ("string" == typeof t && (t = t.split(".")),
                    t instanceof Array)
                  ) {
                    for (var o = 0, s = t.length, a = r; o < s; o++)
                      a = (a || i)[t[o]];
                    return n !== a
                      ? e
                        ? this
                        : a
                      : (a = r.back)
                      ? a.$.back(t, e)
                      : void 0;
                  }
                  if ("function" == typeof t) {
                    var l;
                    for (
                      a = { back: r };
                      (a = a.back) && n === (l = t(a, e));

                    );
                    return l;
                  }
                  return "number" == typeof t
                    ? (r.back || r).$.back(t - 1)
                    : this;
                };
                var n,
                  i = {};
              })(e, "./back"),
              e(function (t) {
                var n = e("./root");
                function i(t, e) {
                  if (
                    ((e = e || this.as || t.$._),
                    (!t.$$ || this === n.on) && t.put && !e.soul)
                  ) {
                    var i = t.put || "",
                      r = i["="] || i[":"],
                      o = e.root,
                      s = o.$.get(i["#"]).get(i["."])._;
                    if ("string" == typeof (r = c(r))) {
                      if (
                        !(s.echo || (s.echo = {}))[e.id] ||
                        (o.pass || "")[e.id]
                      ) {
                        if ((a = o.pass)) {
                          if (a[r + e.id]) return;
                          a[r + e.id] = 1;
                        }
                        ((s.echo || (s.echo = {}))[e.id] = e),
                          e.has && (e.link = r);
                        var a,
                          l = o.$.get((s.link = r))._;
                        ((l.echo || (l.echo = {}))[s.id] = s),
                          ((a = e.ask || "")[""] || e.lex) &&
                            l.on("out", { get: { "#": r } }),
                          setTimeout.each(
                            Object.keys(a),
                            function (t, e) {
                              t &&
                                (e = a[t]) &&
                                e.on("out", { get: { "#": r, ".": t } });
                            },
                            0,
                            99
                          );
                      }
                    } else
                      this === n.on && ((s.echo || (s.echo = {}))[e.id] = e);
                  }
                }
                function r(t, e) {
                  var n,
                    i,
                    o = t.put || "",
                    a = s !== o["="] ? o["="] : o[":"],
                    l = e.root;
                  if (s === a) {
                    if (e.soul && s !== e.put) return;
                    if (
                      ((i = (t.$$ || t.$ || "")._ || ""),
                      t["@"] && (s !== i.put || s !== e.put))
                    )
                      return;
                    return (
                      (n = e.link || t.linked) &&
                        delete (l.$.get(n)._.echo || "")[e.id],
                      e.has && (e.link = null),
                      (e.put = s),
                      void setTimeout.each(
                        Object.keys(e.next || ""),
                        function (t, i) {
                          (i = e.next[t]) &&
                            (n && delete (l.$.get(n).get(t)._.echo || "")[i.id],
                            i.on("in", { get: t, put: s, $: i.$ }));
                        },
                        0,
                        99
                      )
                    );
                  }
                  e.soul ||
                    t.$$ ||
                    ((n = c(a)),
                    (i = t.$._ || ""),
                    ((n !== i.link && (!e.has || i.link)) ||
                      ((l.pass || "")[e.id] && "string" != typeof n)) &&
                      (delete (i.echo || "")[e.id],
                      r(
                        {
                          get: e.get,
                          put: s,
                          $: t.$,
                          linked: (t.linked = t.linked || i.link),
                        },
                        e
                      )));
                }
                function o(t, e) {
                  var i = this.as,
                    r = i.$._,
                    o = (r.root, i.get || ""),
                    a = (t.put || "")[o["#"]] || "";
                  if (
                    !t.put ||
                    ("string" == typeof o["."] && s === a[o["."]])
                  ) {
                    if (s !== r.put) return;
                    if (!r.soul && !r.has) return;
                    return (
                      (r.ack = (r.ack || 0) + 1),
                      void r.on("in", {
                        get: r.get,
                        put: (r.put = s),
                        $: r.$,
                        "@": t["@"],
                      })
                    );
                  }
                  ((t._ || {}).miss = 1), n.on.put(t);
                }
                (n.chain.chain = function (t) {
                  var e,
                    i = this,
                    r = i._,
                    o = new (t || i).constructor(i),
                    s = o._;
                  return (
                    (s.root = e = r.root),
                    (s.id = ++e.once),
                    (s.back = i._),
                    (s.on = n.on),
                    s.on("in", n.on.in, s),
                    s.on("out", n.on.out, s),
                    o
                  );
                }),
                  (n.on.out = function (t) {
                    var e,
                      n,
                      i = this.as,
                      r = i.back,
                      a = i.root;
                    if ((t.$ || (t.$ = i.$), this.to.next(t), !i.err)) {
                      if ((e = t.get)) {
                        if (
                          (a.pass && (a.pass[i.id] = i),
                          i.lex &&
                            Object.keys(i.lex).forEach(function (t) {
                              n[t] = i.lex[t];
                            }, (n = t.get = t.get || {})),
                          e["#"] || i.soul)
                        ) {
                          if (
                            ((e["#"] = e["#"] || i.soul),
                            t["#"] || (t["#"] = l(9)),
                            (r = a.$.get(e["#"])._),
                            (e = e["."]))
                          ) {
                            if (
                              u(r.put, e) &&
                              ((n = r.ask && r.ask[e]),
                              ((r.ask || (r.ask = {}))[e] = r.$.get(e)._),
                              r.on("in", {
                                get: e,
                                put: {
                                  "#": r.soul,
                                  ".": e,
                                  ":": r.put[e],
                                  ">": d(a.graph[r.soul], e),
                                },
                              }),
                              n)
                            )
                              return;
                          } else {
                            if (
                              ((n = r.ask && r.ask[""]),
                              ((r.ask || (r.ask = {}))[""] = r),
                              s !== r.put && (r.on("in", r), n))
                            )
                              return;
                            t.$ = r.$;
                          }
                          return a.ask(o, t), a.on("in", t);
                        }
                        if (e["."])
                          return i.get
                            ? ((t = { get: { ".": i.get }, $: i.$ }),
                              ((r.ask || (r.ask = {}))[i.get] = t.$._),
                              r.on("out", t))
                            : ((t = { get: i.lex ? t.get : {}, $: i.$ }),
                              r.on("out", t));
                        if ((((i.ask || (i.ask = {}))[""] = i), i.get))
                          return (
                            (e["."] = i.get),
                            ((r.ask || (r.ask = {}))[i.get] = t.$._),
                            r.on("out", t)
                          );
                      }
                      return r.on("out", t);
                    }
                    i.on("in", { put: (i.put = s), $: i.$ });
                  }),
                  (n.on.in = function (t, e) {
                    var n,
                      o = (e = e || this.as).root,
                      l = t.$ || (t.$ = e.$),
                      u = (l || "")._ || a,
                      h = t.put || "",
                      f = h["#"],
                      m = h["."],
                      g = s !== h["="] ? h["="] : h[":"],
                      v = h[">"] || -1 / 0;
                    if (
                      s !== t.put &&
                      (s === h["#"] ||
                        s === h["."] ||
                        (s === h[":"] && s === h["="]) ||
                        s === h[">"])
                    )
                      return c(h)
                        ? void e.on("in", {
                            $: u.back.$,
                            put: {
                              "#": (f = u.back.soul),
                              ".": (m = u.has || u.get),
                              "=": h,
                              ">": d(u.back.put, m),
                            },
                            via: t,
                          })
                        : (f = ((h || "")._ || "")["#"])
                        ? ((l = e.root.$.get(f)),
                          setTimeout.each(Object.keys(h).sort(), function (n) {
                            "_" != n &&
                              s !== (v = d(h, n)) &&
                              e.on("in", {
                                $: l,
                                put: { "#": f, ".": n, "=": h[n], ">": v },
                                VIA: t,
                              });
                          }))
                        : void console.log(
                            "chain not yet supported for",
                            h,
                            "...",
                            t,
                            e
                          );
                    (t.seen || "")[e.id] ||
                      (((t.seen || (t.seen = function () {}))[e.id] = e),
                      e !== u &&
                        (Object.keys(t).forEach(function (e) {
                          h[e] = t[e];
                        }, (h = {})),
                        (h.get = e.get || h.get),
                        e.soul || e.has
                          ? u.soul && ((h.$ = e.$), (h.$$ = h.$$ || u.$))
                          : (h.$$$ = h.$$$ || e.$),
                        (t = h)),
                      r(t, e),
                      (e.soul || t.$$) &&
                        v >= d(o.graph[f], m) &&
                        ((h = o.$.get(f)._).put = p(h.put, m, v, g, f)),
                      !u.soul &&
                        v >= d(o.graph[f], m) &&
                        (n = (o.$.get(f)._.next || "")[m]) &&
                        ((n.put = g),
                        "string" == typeof (h = c(g)) &&
                          (n.put = o.$.get(h)._.put || g)),
                      this.to && this.to.next(t),
                      e.any &&
                        setTimeout.each(
                          Object.keys(e.any),
                          function (n) {
                            (n = e.any[n]) && n(t);
                          },
                          0,
                          99
                        ),
                      e.echo &&
                        setTimeout.each(
                          Object.keys(e.echo),
                          function (n) {
                            (n = e.echo[n]) && n.on("in", t);
                          },
                          0,
                          99
                        ),
                      ((t.$$ || "")._ || u).soul &&
                        (n = e.next) &&
                        (n = n[m]) &&
                        ((h = {}),
                        Object.keys(t).forEach(function (e) {
                          h[e] = t[e];
                        }),
                        (h.$ = (t.$$ || t.$).get((h.get = m))),
                        delete h.$$,
                        delete h.$$$,
                        n.on("in", h)),
                      i(t, e));
                  }),
                  (n.on.link = i),
                  (n.on.unlink = r);
                var s,
                  a = {},
                  l = String.random,
                  c = n.valid,
                  u = function (t, e) {
                    return t && Object.prototype.hasOwnProperty.call(t, e);
                  },
                  h = n.state,
                  d = h.is,
                  p = h.ify;
              })(e, "./chain"),
              e(function (t) {
                var n = e("./root");
                function i(t) {
                  var e = this.at || this.on;
                  if (!t || e.soul || e.has) return this.off();
                  if ((t = (t = (t = t.$ || t)._ || t).id)) {
                    var n;
                    if ((e.map, (n = this.seen || (this.seen = {}))[t]))
                      return !0;
                    n[t] = !0;
                  }
                }
                n.chain.get = function (t, e, a) {
                  var l, c;
                  if ("string" == typeof t) {
                    if (0 == t.length)
                      return (
                        ((l = this.chain())._.err = {
                          err: n.log("0 length key!", t),
                        }),
                        e && e.call(l, l._.err),
                        l
                      );
                    (l = ((h = this._).next || o)[t]) ||
                      (l =
                        t &&
                        (function (t, e) {
                          var n = e._,
                            i = n.next,
                            r = e.chain()._;
                          return (
                            i || (i = n.next = {}),
                            (i[(r.get = t)] = r),
                            e === n.root.$
                              ? (r.soul = t)
                              : (n.soul || n.has) && (r.has = t),
                            r
                          );
                        })(t, this)),
                      (l = l && l.$);
                  } else {
                    if ("function" == typeof t) {
                      if (!0 === e)
                        return (
                          (function (t, e, i, o) {
                            var s,
                              a = t._,
                              l = 0;
                            (s = a.soul || a.link)
                              ? e(s, o, a)
                              : a.jam
                              ? a.jam.push([e, o])
                              : ((a.jam = [[e, o]]),
                                t.get(
                                  function (t, e) {
                                    if (
                                      !(
                                        r === t.put &&
                                        !a.root.opt.super &&
                                        (s = Object.keys(
                                          a.root.opt.peers
                                        ).length) &&
                                        ++l <= s
                                      )
                                    ) {
                                      e.rid(t);
                                      var i,
                                        o = ((o = t.$) && o._) || {},
                                        c = 0;
                                      for (
                                        s = a.jam, delete a.jam;
                                        (i = s[c++]);

                                      ) {
                                        var u = i[0];
                                        (i = i[1]),
                                          u &&
                                            u(
                                              o.link ||
                                                o.soul ||
                                                n.valid(t.put) ||
                                                ((t.put || {})._ || {})["#"],
                                              i,
                                              t,
                                              e
                                            );
                                      }
                                    }
                                  },
                                  { out: { get: { ".": !0 } } }
                                ));
                          })(this, t, 0, a),
                          this
                        );
                      var u,
                        h = (l = this)._,
                        d = e || {},
                        p = h.root;
                      (d.at = h), (d.ok = t);
                      var f = {};
                      function m(t, e, i) {
                        if (!m.stun && (!(o = p.pass) || o[u])) {
                          var o,
                            s = t.$._,
                            a = (t.$$ || "")._,
                            l = (a || s).put,
                            c = !s.has && !s.soul,
                            g = {};
                          if (
                            ((c || r === l) &&
                              (l =
                                r === ((o = t.put) || "")["="]
                                  ? r === (o || "")[":"]
                                    ? o
                                    : o[":"]
                                  : o["="]),
                            "string" == typeof (o = n.valid(l)) &&
                              (l =
                                r === (o = p.$.get(o)._.put)
                                  ? d.not
                                    ? r
                                    : l
                                  : o),
                            !d.not || r !== l)
                          ) {
                            if (r === d.stun) {
                              if (
                                (o = p.stun) &&
                                o.on &&
                                (h.$.back(function (t) {
                                  if (
                                    (o.on("" + t.id, (g = {})),
                                    (g.run || 0) < m.id)
                                  )
                                    return g;
                                }),
                                !g.run && o.on("" + s.id, (g = {})),
                                !g.run && a && o.on("" + a.id, (g = {})),
                                m.id > g.run &&
                                  ((g.stun && !g.stun.end) ||
                                    ((g.stun = o.on("stun")),
                                    (g.stun = g.stun && g.stun.last)),
                                  g.stun && !g.stun.end))
                              )
                                return void ((g.stun.add || (g.stun.add = {}))[
                                  u
                                ] = function () {
                                  m(t, e, 1);
                                });
                              if (
                                (r === l && (i = 0),
                                (o = p.hatch) && !o.end && r === d.hatch && !i)
                              ) {
                                if (f[s.$._.id]) return;
                                return (
                                  (f[s.$._.id] = 1),
                                  void o.push(function () {
                                    m(t, e, 1);
                                  })
                                );
                              }
                              f = {};
                            }
                            if (p.pass) {
                              if (p.pass[u + s.id]) return;
                              p.pass[u + s.id] = 1;
                            }
                            d.on
                              ? d.ok.call(s.$, l, s.get, t, e || m)
                              : d.v2020
                              ? d.ok(t, e || m)
                              : (Object.keys(t).forEach(function (e) {
                                  o[e] = t[e];
                                }, (o = {})),
                                ((t = o).put = l),
                                d.ok.call(d.as, t, e || m));
                          }
                        }
                      }
                      return (
                        (m.at = h),
                        ((h.any || (h.any = {}))[(u = String.random(7))] = m),
                        (m.off = function () {
                          (m.stun = 1), h.any && delete h.any[u];
                        }),
                        (m.rid = i),
                        (m.id = d.run || ++p.once),
                        (c = p.pass),
                        ((p.pass = {})[u] = 1),
                        (d.out = d.out || { get: {} }),
                        h.on("out", d.out),
                        (p.pass = c),
                        l
                      );
                    }
                    if ("number" == typeof t) return this.get("" + t, e, a);
                    if ("string" == typeof (c = s(t))) return this.get(c, e, a);
                    (c = this.get.next) && (l = c(this, t));
                  }
                  return l
                    ? (e && "function" == typeof e && l.get(e, a), l)
                    : (((l = this.chain())._.err = {
                        err: n.log("Invalid get request!", t),
                      }),
                      e && e.call(l, l._.err),
                      l);
                };
                var r,
                  o = {},
                  s = n.valid;
              })(e, "./get"),
              e(function (t) {
                var n = e("./root");
                function i(t, e) {
                  if (e) {
                    e = (e._ || "").id || e;
                    var i,
                      r = t.root.stun || (t.root.stun = { on: n.on }),
                      o = {};
                    t.stun || (t.stun = r.on("stun", function () {})),
                      (i = r.on("" + e)) && i.the.last.next(o),
                      o.run >= t.run ||
                        r.on("" + e, function (e) {
                          if (t.stun.end)
                            return this.off(), void this.to.next(e);
                          (e.run = e.run || t.run), (e.stun = e.stun || t.stun);
                        });
                  }
                }
                function r(t) {
                  if (t.err) r.end(t.stun, t.root);
                  else if (!t.todo.length && !t.end && Object.empty(t.wait)) {
                    t.end = 1;
                    var e,
                      i = t.$.back(-1)._,
                      o = i.root,
                      s = i.ask(function (e) {
                        o.on("ack", e),
                          e.err && n.log(e),
                          ++a > (t.acks || 0) && this.off(),
                          t.ack && t.ack(e, this);
                      }, t.opt),
                      a = 0,
                      l = t.stun;
                    ((e = function () {
                      l &&
                        (r.end(l, o),
                        setTimeout.each(
                          Object.keys((l = l.add || "")),
                          function (t) {
                            (t = l[t]) && t();
                          }
                        ));
                    }).hatch = e),
                      t.via._.on("out", {
                        put: (t.out = t.graph),
                        opt: t.opt,
                        "#": s,
                        _: e,
                      });
                  }
                }
                (n.chain.put = function (t, e, u) {
                  var h = this,
                    d = h._,
                    p = d.root;
                  ((u = u || {}).root = d.root),
                    u.run || (u.run = p.once),
                    i(u, d.id),
                    (u.ack = u.ack || e),
                    (u.via = u.via || h),
                    (u.data = u.data || t),
                    u.soul || (u.soul = d.soul || ("string" == typeof e && e));
                  var f = (u.state = u.state || n.state());
                  return "function" == typeof t
                    ? (t(function (t) {
                        (u.data = t), h.put(o, o, u);
                      }),
                      h)
                    : u.soul
                    ? ((u.$ = p.$.get(u.soul)),
                      (u.todo = [{ it: u.data, ref: u.$ }]),
                      (u.turn = u.turn || a),
                      (u.ran = u.ran || r),
                      (function t() {
                        var e,
                          r,
                          o,
                          a,
                          h,
                          d = u.todo,
                          p = d.pop(),
                          m = p.it;
                        if (
                          (p.ref && p.ref._.id,
                          i(u, p.ref),
                          (a = p.todo) &&
                            ((m = m[(r = a.pop())]), a.length && d.push(p)),
                          r && (d.path || (d.path = [])).push(r),
                          !(e = l(m)) && !(h = n.is(m)))
                        ) {
                          if (!Object.plain(m))
                            return (
                              (u.ack || s).call(
                                u,
                                (u.out = {
                                  err: (u.err = n.log(
                                    "Invalid data: " +
                                      ((m && (a = m.constructor) && a.name) ||
                                        typeof m) +
                                      " at " +
                                      (u.via.back(function (t) {
                                        t.get && a.push(t.get);
                                      }, (a = [])) || a.join(".")) +
                                      "." +
                                      (d.path || []).join(".")
                                  )),
                                })
                              ),
                              void u.ran(u)
                            );
                          for (
                            var g = u.seen || (u.seen = []), v = g.length;
                            v--;

                          )
                            if (m === (a = g[v]).it) {
                              e = m = a.link;
                              break;
                            }
                        }
                        if (r && e) p.node = c(p.node, r, f, m);
                        else {
                          u.seen.push(
                            (o = {
                              it: m,
                              link: {},
                              todo: h ? [] : Object.keys(m).sort().reverse(),
                              path: (d.path || []).slice(),
                              up: p,
                            })
                          ),
                            (p.node = c(p.node, r, f, o.link)),
                            !h && o.todo.length && d.push(o);
                          var y = u.seen.length;
                          function x(t, e) {
                            var n = o.link["#"];
                            e && (e.off(), e.rid(t));
                            var r =
                              n ||
                              t.soul ||
                              (a = (t.$$ || t.$)._ || "").soul ||
                              a.link ||
                              ((a = a.put || "")._ || "")["#"] ||
                              a["#"] ||
                              ((a = t.put || "") && t.$$
                                ? a["#"]
                                : (a["="] || a[":"] || "")["#"]);
                            !n && i(u, t.$),
                              r || p.link["#"]
                                ? (r ||
                                    ((r = []),
                                    (t.$$ || t.$).back(function (t) {
                                      if ((a = t.soul || t.link))
                                        return r.push(a);
                                      r.push(t.get);
                                    }),
                                    (r = r.reverse().join("/"))),
                                  (o.link["#"] = r),
                                  !h &&
                                    (((u.graph || (u.graph = {}))[r] =
                                      o.node || (o.node = { _: {} }))._["#"] =
                                      r),
                                  delete u.wait[y],
                                  o.wait &&
                                    setTimeout.each(o.wait, function (t) {
                                      t && t();
                                    }),
                                  u.ran(u))
                                : (p.wait || (p.wait = [])).push(function () {
                                    x(t, e);
                                  });
                          }
                          ((u.wait || (u.wait = {}))[y] = ""),
                            (a = (o.ref = h ? m : r ? p.ref.get(r) : p.ref)._),
                            (a = (m && (m._ || "")["#"]) || a.soul || a.link)
                              ? x({ soul: a })
                              : o.ref.get(x, {
                                  run: u.run,
                                  v2020: 1,
                                  out: { get: { ".": " " } },
                                });
                        }
                        if (!d.length) return u.ran(u);
                        u.turn(t);
                      })(),
                      h)
                    : ((function (t) {
                        var e,
                          n = t.via._;
                        (t.via = t.via.back(function (n) {
                          if (n.soul || !n.get) return n.$;
                          (e = t.data), ((t.data = {})[n.get] = e);
                        })),
                          (t.via && t.via._.soul) ||
                            (t.via = n.root.$.get(
                              ((t.data || "")._ || "")["#"] ||
                                n.$.back("opt.uuid")()
                            )),
                          t.via.put(t.data, t.ack, t);
                      })(u),
                      h);
                }),
                  (r.end = function (t, e) {
                    (t.end = s),
                      t.the.to === t && t === t.the.last && delete e.stun,
                      t.off();
                  });
                var o,
                  s = function () {},
                  a = setTimeout.turn,
                  l = n.valid,
                  c = n.state.ify;
              })(e, "./put"),
              e(function (t) {
                var n = e("./root");
                e("./chain"),
                  e("./back"),
                  e("./put"),
                  e("./get"),
                  (t.exports = n);
              })(e, "./index"),
              e(function (t) {
                var n,
                  i = e("./index");
                (i.chain.on = function (t, e, n, i) {
                  var r,
                    o = this,
                    s = o._;
                  if ((s.root, "string" == typeof t))
                    return e
                      ? ((r = s.on(t, e, n || s, i)),
                        n && n.$ && (n.subs || (n.subs = [])).push(r),
                        o)
                      : s.on(t);
                  var a = e;
                  return (
                    ((a = !0 === a ? { change: !0 } : a || {}).not = 1),
                    (a.on = 1),
                    o.get(t, a),
                    o
                  );
                }),
                  (i.chain.once = function (t, e) {
                    if (((e = e || {}), !t))
                      return (function (t, e, n) {
                        return (
                          i.log.once(
                            "valonce",
                            "Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."
                          ),
                          ((n = t.chain())._.nix = t.once(function (t, e) {
                            n._.on("in", this._);
                          })),
                          (n._.lex = t._.lex),
                          n
                        );
                      })(this);
                    var r,
                      o = this,
                      s = o._,
                      a = s.root,
                      l = (s.put, String.random(7));
                    return (
                      o.get(
                        function (o, c, u, h) {
                          var d = this,
                            p = d._,
                            f = p.one || (p.one = {});
                          function m() {
                            p.has || p.soul || (p = { put: o, get: c }),
                              n === (r = p.put) &&
                                (r = ((u.$$ || "")._ || "").put),
                              ("string" == typeof i.valid(r) &&
                                (r = a.$.get(r)._.put) === n) ||
                                h.stun ||
                                ("" !== f[l] &&
                                  ((f[l] = ""),
                                  (s.soul || s.has) && h.off(),
                                  t.call(d, r, p.get)));
                          }
                          h.stun ||
                            ("" !== f[l] &&
                              (!0 !== (r = i.valid(o))
                                ? "string" != typeof r &&
                                  (clearTimeout(f[l]),
                                  (f[l] = setTimeout(m, e.wait || 99)))
                                : m()));
                        },
                        { on: 1 }
                      ),
                      o
                    );
                  }),
                  (i.chain.off = function () {
                    var t,
                      e = this._,
                      n = e.back;
                    if (n)
                      return (
                        (e.ack = 0),
                        (t = n.next) && t[e.get] && delete t[e.get],
                        (t = n.ask) && delete t[e.get],
                        (t = n.put) && delete t[e.get],
                        (t = e.soul) && delete n.root.graph[t],
                        (t = e.map) &&
                          Object.keys(t).forEach(function (e, i) {
                            (i = t[e]).link && n.root.$.get(i.link).off();
                          }),
                        (t = e.next) &&
                          Object.keys(t).forEach(function (e, n) {
                            t[e].$.off();
                          }),
                        e.on("off", {}),
                        this
                      );
                  });
              })(e, "./on"),
              e(function (t) {
                var n = e("./index"),
                  i = n.chain.get.next;
                function r(t) {
                  this.to.next(t);
                  var e,
                    i = this.as,
                    r = t.$._,
                    o = t.put;
                  (r.soul || t.$$) &&
                    (((e = i.lex) &&
                      !String.match(
                        t.get || (o || "")["."],
                        e["."] || e["#"] || e
                      )) ||
                      n.on.link(t, i));
                }
                (n.chain.get.next = function (t, e) {
                  var n;
                  return Object.plain(e)
                    ? (n = ((n = e["#"]) || "")["="] || n)
                      ? t.get(n)
                      : (((n = t.chain()._).lex = e),
                        t.on("in", function (t) {
                          String.match(
                            t.get || (t.put || "")["."],
                            e["."] || e["#"] || e
                          ) && n.on("in", t),
                            this.to.next(t);
                        }),
                        n.$)
                    : (i || s)(t, e);
                }),
                  (n.chain.map = function (t, e, i) {
                    var a,
                      l,
                      c = this,
                      u = c._;
                    return (
                      Object.plain(t) &&
                        ((a = t["."] ? t : { ".": t }), (t = o)),
                      t
                        ? (n.log.once(
                            "mapfn",
                            "Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."
                          ),
                          (l = c.chain()),
                          c.map().on(function (e, i, r, a) {
                            var c = (t || s).call(this, e, i, r, a);
                            if (o !== c) {
                              if (e === c) return l._.on("in", r);
                              if (n.is(c)) return l._.on("in", c._);
                              var u = {};
                              Object.keys(r.put).forEach(function (t) {
                                u[t] = r.put[t];
                              }, u),
                                (u["="] = c),
                                l._.on("in", { get: i, put: u });
                            }
                          }),
                          l)
                        : ((l = u.each) ||
                            (((u.each = l = c.chain())._.lex =
                              a || l._.lex || u.lex),
                            (l._.nix = c.back("nix")),
                            c.on("in", r, l._)),
                          l)
                    );
                  });
                var o,
                  s = function () {};
              })(e, "./map"),
              e(function (t) {
                var n = e("./index");
                n.chain.set = function (t, e, i) {
                  var r,
                    o,
                    s = this,
                    a = s.back(-1);
                  return (
                    (e = e || function () {}),
                    ((i = i || {}).item = i.item || t),
                    (r = ((t || "")._ || "")["#"]) && ((t = {})["#"] = r),
                    "string" == typeof (o = n.valid(t))
                      ? s.get((r = o)).put(t, e, i)
                      : n.is(t)
                      ? (s.put(function (i) {
                          t.get(function (t, r, a) {
                            if (!t)
                              return e.call(s, {
                                err: n.log(
                                  'Only a node can be linked! Not "' +
                                    a.put +
                                    '"!'
                                ),
                              });
                            ((o = {})[t] = { "#": t }), i(o);
                          }, !0);
                        }),
                        t)
                      : (Object.plain(t) &&
                          (t = a.get((r = s.back("opt.uuid")())).put(t)),
                        s.get(r || a.back("opt.uuid")(7)).put(t, e, i))
                  );
                };
              })(e, "./set"),
              e(function (t) {
                var n;
                e("./shim");
                try {
                  t.exports = function (t) {
                    var e = function () {},
                      i = t.opt || {};
                    (i.log = i.log || console.log),
                      (i.gap = i.gap || i.wait || 0),
                      (i.max =
                        i.max || 0.3 * (i.memory ? 999 * i.memory * 999 : 3e8)),
                      (i.pack = i.pack || 0.01 * i.max * 0.01),
                      (i.puff = i.puff || 9);
                    var r = setTimeout.turn || setTimeout,
                      o =
                        JSON.parseAsync ||
                        function (t, e, n) {
                          try {
                            e(void 0, JSON.parse(t, n));
                          } catch (t) {
                            e(t);
                          }
                        },
                      s =
                        JSON.stringifyAsync ||
                        function (t, e, n, i) {
                          try {
                            e(void 0, JSON.stringify(t, n, i));
                          } catch (t) {
                            e(t);
                          }
                        },
                      a = t.dup,
                      l = a.check,
                      c = a.track,
                      u =
                        (new Date(),
                        (e.hear = function (t, n) {
                          if (t) {
                            if (i.max <= t.length)
                              return e.say(
                                { dam: "!", err: "Message too big!" },
                                n
                              );
                            e === this && ((u.d += t.length || 0), ++u.c);
                            var s,
                              a = (n.SH = +new Date()),
                              l = t[0];
                            return "[" === l
                              ? (o(t, function (t, o) {
                                  if (t || !o)
                                    return e.say(
                                      {
                                        dam: "!",
                                        err: "DAM JSON parse error.",
                                      },
                                      n
                                    );
                                  console.STAT &&
                                    console.STAT(
                                      +new Date(),
                                      o.length,
                                      "# on hear batch"
                                    );
                                  var s = i.puff;
                                  !(function t() {
                                    for (
                                      var e, i = +new Date(), a = 0;
                                      a < s && (e = o[a++]);

                                    )
                                      u(e, n);
                                    (o = o.slice(a)),
                                      console.STAT &&
                                        console.STAT(
                                          i,
                                          +new Date() - i,
                                          "hear loop"
                                        ),
                                      h(n),
                                      o.length && r(t, 0);
                                  })();
                                }),
                                void (t = ""))
                              : "{" === l ||
                                ((t["#"] || Object.plain(t)) && (s = t))
                              ? s
                                ? u.one(s, n, a)
                                : void o(t, function (t, i) {
                                    if (t || !i)
                                      return e.say(
                                        {
                                          dam: "!",
                                          err: "DAM JSON parse error.",
                                        },
                                        n
                                      );
                                    u.one(i, n, a);
                                  })
                              : void 0;
                          }
                        }));
                    function h(t) {
                      var e = t.batch,
                        n = "string" == typeof e;
                      if (
                        (n && (e += "]"),
                        (t.batch = t.tail = null),
                        e && !(n ? 3 > e.length : !e.length))
                      ) {
                        if (!n)
                          try {
                            e = 1 === e.length ? e[0] : JSON.stringify(e);
                          } catch (t) {
                            return i.log("DAM JSON stringify error", t);
                          }
                        e && d(e, t);
                      }
                    }
                    function d(t, n) {
                      try {
                        var i = n.wire;
                        n.say ? n.say(t) : i.send && i.send(t),
                          (e.say.d += t.length || 0),
                          ++e.say.c;
                      } catch (e) {
                        (n.queue = n.queue || []).push(t);
                      }
                    }
                    (u.one = function (n, i, r) {
                      var o, s, u, h, d;
                      if (
                        (n.DBG && (n.DBG = d = { DBG: n.DBG }),
                        d && (d.h = r),
                        d && (d.hp = +new Date()),
                        (o = n["#"]) || (o = n["#"] = String.random(9)),
                        !(
                          (u = l(o)) ||
                          ((s = n["##"]) &&
                            (u = n["@"] || (n.get && o)) &&
                            a.check((h = u + s)))
                        ))
                      ) {
                        if (
                          (((n._ = function () {}).via = e.leap = i),
                          (u = n["><"]) &&
                            "string" == typeof u &&
                            u
                              .slice(0, 99)
                              .split(",")
                              .forEach(function (t) {
                                this[t] = 1;
                              }, (n._.yo = {})),
                          (u = n.dam))
                        )
                          return (u = e.hear[u]) && u(n, i, t), void c(o);
                        (r = +new Date()),
                          d && (d.is = r),
                          (i.SI = o),
                          t.on("in", (e.last = n)),
                          d && (d.hd = +new Date()),
                          console.STAT &&
                            console.STAT(
                              r,
                              +new Date() - r,
                              n.get ? "msg get" : n.put ? "msg put" : "msg"
                            ),
                          ((u = c(o)).via = i),
                          n.get && (u.it = n),
                          h && c(h),
                          (e.leap = e.last = null);
                      }
                    }),
                      (u.c = u.d = 0),
                      (function () {
                        var t,
                          o = 0;
                        function u(t, e) {
                          var n;
                          return e instanceof Object
                            ? (Object.keys(e)
                                .sort()
                                .forEach(p, { to: (n = {}), on: e }),
                              n)
                            : e;
                        }
                        function p(t) {
                          this.to[t] = this.on[t];
                        }
                        e.hash = function (t, e) {
                          var n,
                            i,
                            o,
                            a = +new Date();
                          s(
                            t.put,
                            function s(l, c) {
                              var u = (i || (i = o = c || "")).slice(0, 32768);
                              (n = String.hash(u, n)),
                                (i = i.slice(32768))
                                  ? r(s, 0)
                                  : (console.STAT &&
                                      console.STAT(
                                        a,
                                        +new Date() - a,
                                        "say json+hash"
                                      ),
                                    (t._.$put = o),
                                    (t["##"] = n),
                                    f(t, e),
                                    delete t._.$put);
                            },
                            u
                          );
                        };
                        var f = (e.say = function (s, l) {
                          var u;
                          if (
                            ((u = this) && (u = u.to) && u.next && u.next(s),
                            !s)
                          )
                            return !1;
                          var p,
                            m,
                            g = s["@"],
                            v = s._ || (s._ = function () {}),
                            y = s.DBG,
                            x = +new Date();
                          if (
                            ((v.y = v.y || x),
                            l || (y && (y.y = x)),
                            (p = s["#"]) || (p = s["#"] = String.random(9)),
                            !t && c(p),
                            s.put && (s.err || (a.s[p] || "").err))
                          )
                            return !1;
                          if (s["##"] || n === s.put || v.via || !g) {
                            if (
                              (!l &&
                                g &&
                                (l =
                                  ((u = a.s[g]) &&
                                    (u.via ||
                                      ((u = u.it) && (u = u._) && u.via))) ||
                                  ((u = e.last) && g === u["#"] && e.leap)),
                              !l && g)
                            ) {
                              if (a.s[g]) return;
                              return (
                                console.STAT &&
                                  console.STAT(
                                    +new Date(),
                                    ++o,
                                    "total no peer to ack to"
                                  ),
                                !1
                              );
                            }
                            if (!l && e.way) return e.way(s);
                            if ((y && (y.yh = +new Date()), (m = v.raw))) {
                              if ((y && (y.yr = +new Date()), !l || !l.id)) {
                                if (!Object.plain(l || i.peers)) return !1;
                                (x = +new Date()), i.puff;
                                var _ = i.peers,
                                  b = Object.keys(l || i.peers || {});
                                return (
                                  console.STAT &&
                                    console.STAT(
                                      x,
                                      +new Date() - x,
                                      "peer keys"
                                    ),
                                  void (function e() {
                                    var n = +new Date();
                                    t = 1;
                                    var i = v.raw;
                                    v.raw = m;
                                    for (
                                      var o, a = 0;
                                      a < 9 && (o = (b || "")[a++]);

                                    )
                                      (o = _[o]) && f(s, o);
                                    (v.raw = i),
                                      (t = 0),
                                      (b = b.slice(a)),
                                      console.STAT &&
                                        console.STAT(
                                          n,
                                          +new Date() - n,
                                          "say loop"
                                        ),
                                      b.length && (r(e, 0), g && c(g));
                                  })()
                                );
                              }
                              if (
                                (!l.wire && e.wire && e.wire(l), p !== l.last)
                              ) {
                                if (((l.last = p), l === v.via)) return !1;
                                if (
                                  (u = v.yo) &&
                                  (u[l.url] || u[l.pid] || u[l.id])
                                )
                                  return !1;
                                if (
                                  (console.STAT &&
                                    console.STAT(
                                      x,
                                      ((y || v).yp = +new Date()) - (v.y || x),
                                      "say prep"
                                    ),
                                  !t && g && c(g),
                                  l.batch)
                                ) {
                                  if (
                                    ((l.tail = (u = l.tail || 0) + m.length),
                                    l.tail <= i.pack)
                                  )
                                    return void (l.batch += (u ? "," : "") + m);
                                  h(l);
                                }
                                l.batch = "[";
                                var w = +new Date();
                                setTimeout(function () {
                                  console.STAT &&
                                    console.STAT(w, +new Date() - w, "0ms TO"),
                                    h(l);
                                }, i.gap),
                                  d(m, l),
                                  console.STAT &&
                                    g === l.SI &&
                                    console.STAT(
                                      x,
                                      +new Date() - l.SH,
                                      "say ack"
                                    );
                              }
                            } else e.raw(s, l);
                          } else e.hash(s, l);
                        });
                        (e.say.c = e.say.d = 0),
                          (e.raw = function (t, r) {
                            if (!t) return "";
                            var o,
                              c,
                              u = t._ || {};
                            if ((c = u.raw)) return c;
                            if ("string" == typeof t) return t;
                            var h = t["##"],
                              d = t["@"];
                            if (h && d) {
                              if (!u.via && l(d + h)) return !1;
                              if (
                                (c = (a.s[d] || "").it) ||
                                ((c = e.last) && d === c["#"])
                              ) {
                                if (h === c["##"]) return !1;
                                c["##"] || (c["##"] = h);
                              }
                            }
                            if (!t.dam) {
                              var p = 0,
                                m = [];
                              for (var g in (c = i.peers)) {
                                var v = c[g];
                                if ((m.push(v.url || v.pid || v.id), ++p > 6))
                                  break;
                              }
                              p > 1 && (t["><"] = m.join());
                            }
                            if ((o = u.$put))
                              return (
                                (c = {}),
                                Object.keys(t).forEach(function (e) {
                                  c[e] = t[e];
                                }),
                                (c.put = ":])([:"),
                                void s(c, function (t, e) {
                                  if (!t) {
                                    var i = +new Date();
                                    (c = e.indexOf('"put":":])([:"')),
                                      y(
                                        n,
                                        (e =
                                          e.slice(0, c + 6) +
                                          o +
                                          e.slice(c + 14))
                                      ),
                                      console.STAT &&
                                        console.STAT(
                                          i,
                                          +new Date() - i,
                                          "say slice"
                                        );
                                  }
                                })
                              );
                            function y(e, n) {
                              e || ((u.raw = n), f(t, r));
                            }
                            s(t, y);
                          });
                      })(),
                      (e.hi = function (n) {
                        var r = n.wire || {};
                        n.id
                          ? (i.peers[n.url || n.id] = n)
                          : ((r = n.id = n.id || String.random(9)),
                            e.say(
                              { dam: "?", pid: t.opt.pid },
                              (i.peers[r] = n)
                            ),
                            delete a.s[n.last]),
                          (n.met = n.met || +new Date()),
                          r.hied || t.on((r.hied = "hi"), n),
                          (r = n.queue),
                          (n.queue = []),
                          setTimeout.each(
                            r || [],
                            function (t) {
                              d(t, n);
                            },
                            0,
                            9
                          );
                      }),
                      (e.bye = function (n) {
                        t.on("bye", n);
                        var i = +new Date();
                        (i -= n.met || i),
                          (e.bye.time = ((e.bye.time || i) + i) / 2);
                      }),
                      (e.hear["!"] = function (t, e) {
                        i.log("Error:", t.err);
                      }),
                      (e.hear["?"] = function (t, n) {
                        (t.pid && (n.pid || (n.pid = t.pid), t["@"])) ||
                          (e.say({ dam: "?", pid: i.pid, "@": t["#"] }, n),
                          delete a.s[n.last]);
                      }),
                      t.on("create", function (t) {
                        (t.opt.pid = t.opt.pid || String.random(9)),
                          this.to.next(t),
                          t.on("out", e.say);
                      }),
                      t.on("bye", function (t, e) {
                        (t = i.peers[t.id || t] || t),
                          this.to.next(t),
                          t.bye
                            ? t.bye()
                            : (e = t.wire) && e.close && e.close(),
                          delete i.peers[t.id],
                          (t.wire = null);
                      });
                    var p = {};
                    return (
                      t.on("bye", function (t, e) {
                        this.to.next(t),
                          (e = console.STAT) && (e.peers = (e.peers || 0) - 1),
                          (e = t.url) &&
                            ((p[e] = !0),
                            setTimeout(function () {
                              delete p[e];
                            }, i.lack || 9e3));
                      }),
                      t.on("hi", function (n, r) {
                        this.to.next(n),
                          (r = console.STAT) && (r.peers = (r.peers || 0) + 1),
                          (r = n.url) &&
                            p[r] &&
                            (delete p[r],
                            i.super ||
                              setTimeout.each(
                                Object.keys(t.next),
                                function (i) {
                                  t.next[i],
                                    ((r = {})[i] = t.graph[i]),
                                    (r = String.hash(r)),
                                    e.say({ "##": r, get: { "#": i } }, n);
                                }
                              ));
                      }),
                      e
                    );
                  };
                } catch (t) {}
              })(e, "./mesh"),
              e(function (t) {
                var n = e("../index");
                (n.Mesh = e("./mesh")),
                  n.on("opt", function (t) {
                    if ((this.to.next(t), !t.once)) {
                      var e = t.opt;
                      if (!1 !== e.WebSocket) {
                        var i = n.window || {},
                          r =
                            e.WebSocket ||
                            i.WebSocket ||
                            i.webkitWebSocket ||
                            i.mozWebSocket;
                        if (r) {
                          e.WebSocket = r;
                          var o = (e.mesh = e.mesh || n.Mesh(t));
                          o.wire || e.wire,
                            (o.wire = e.wire = l),
                            setTimeout(function () {
                              !e.super && t.on("out", { dam: "hi" });
                            }, 1);
                          var s = 1998,
                            a = "" + void 0 != typeof document && document;
                        }
                      }
                    }
                    function l(t) {
                      try {
                        if (!t || !t.url) return i && i(t);
                        var n = t.url.replace(/^http/, "ws"),
                          i = (t.wire = new e.WebSocket(n));
                        return (
                          (i.onclose = function () {
                            e.mesh.bye(t), c(t);
                          }),
                          (i.onerror = function (e) {
                            c(t);
                          }),
                          (i.onopen = function () {
                            e.mesh.hi(t);
                          }),
                          (i.onmessage = function (n) {
                            n && e.mesh.hear(n.data || n, t);
                          }),
                          i
                        );
                      } catch (t) {}
                    }
                    function c(t) {
                      clearTimeout(t.defer),
                        (a && t.retry <= 0) ||
                          ((t.retry =
                            (t.retry || e.retry + 1 || 60) -
                            (-t.tried + (t.tried = +new Date()) < 7992
                              ? 1
                              : 0)),
                          (t.defer = setTimeout(function e() {
                            if (a && a.hidden) return setTimeout(e, s);
                            l(t);
                          }, s)));
                    }
                  });
              })(e, "./websocket"),
              e(function (t) {
                if ("undefined" != typeof Gun) {
                  var e;
                  try {
                    e = (Gun.window || function () {}).localStorage;
                  } catch (t) {}
                  e ||
                    (Gun.log(
                      "Warning: No localStorage exists to persist data to!"
                    ),
                    (e = {
                      setItem: function (t, e) {
                        this[t] = e;
                      },
                      removeItem: function (t) {
                        delete this[t];
                      },
                      getItem: function (t) {
                        return this[t];
                      },
                    })),
                    Gun.on("create", function t(n) {
                      this.to.next(n);
                      var i,
                        r,
                        o = n.opt,
                        s = (n.graph, []);
                      if (!1 !== o.localStorage) {
                        o.prefix = o.file || "gun/";
                        try {
                          i = t[o.prefix] =
                            t[o.prefix] ||
                            JSON.parse(e.getItem(o.prefix)) ||
                            {};
                        } catch (e) {
                          i = t[o.prefix] = {};
                        }
                        n.on("get", function (t) {
                          this.to.next(t);
                          var e,
                            n,
                            r,
                            o = t.get;
                          o &&
                            (e = o["#"]) &&
                            ((n = i[e] || void 0) &&
                              (r = o["."]) &&
                              !Object.plain(r) &&
                              (n = Gun.state.ify(
                                {},
                                r,
                                Gun.state.is(n, r),
                                n[r],
                                e
                              )),
                            Gun.on.get.ack(t, n));
                        }),
                          n.on("put", function (t) {
                            this.to.next(t);
                            var e = t.put,
                              n = e["#"],
                              l = e["."];
                            (i[n] = Gun.state.ify(i[n], l, e[">"], e[":"], n)),
                              t["@"] || s.push(t["#"]),
                              r || (r = setTimeout(a, o.wait || 1));
                          });
                      }
                      function a() {
                        var t,
                          a = s;
                        clearTimeout(r), (r = !1), (s = []);
                        try {
                          e.setItem(o.prefix, JSON.stringify(i));
                        } catch (e) {
                          Gun.log(
                            (t = e || "localStorage failure") +
                              " Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"
                          ),
                            n.on("localStorage:error", {
                              err: t,
                              get: o.prefix,
                              put: i,
                            });
                        }
                        (t || Object.empty(o.peers)) &&
                          setTimeout.each(a, function (e) {
                            n.on("in", { "@": e, err: t, ok: 0 });
                          });
                      }
                    });
                }
              })(e, "./localStorage");
          })(),
          (function () {
            if ("" + w != typeof Gun) {
              var t = function (t) {
                  console.log(
                    "Warning! Deprecated internal utility will break in next version:",
                    t
                  );
                },
                e = Gun;
              (e.fn = e.fn || {
                is: function (e) {
                  return t("fn"), !!e && "function" == typeof e;
                },
              }),
                (e.bi = e.bi || {
                  is: function (e) {
                    return (
                      t("bi"), e instanceof Boolean || "boolean" == typeof e
                    );
                  },
                }),
                (e.num = e.num || {
                  is: function (e) {
                    return (
                      t("num"),
                      !i(e) &&
                        (e - parseFloat(e) + 1 >= 0 ||
                          1 / 0 === e ||
                          -1 / 0 === e)
                    );
                  },
                }),
                (e.text = e.text || {
                  is: function (e) {
                    return t("text"), "string" == typeof e;
                  },
                }),
                (e.text.ify =
                  e.text.ify ||
                  function (n) {
                    return (
                      t("text.ify"),
                      e.text.is(n)
                        ? n
                        : "undefined" != typeof JSON
                        ? JSON.stringify(n)
                        : n && n.toString
                        ? n.toString()
                        : n
                    );
                  }),
                (e.text.random =
                  e.text.random ||
                  function (e, n) {
                    t("text.random");
                    var i = "";
                    for (
                      e = e || 24,
                        n =
                          n ||
                          "0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";
                      e > 0;

                    )
                      (i += n.charAt(Math.floor(Math.random() * n.length))),
                        e--;
                    return i;
                  }),
                (e.text.match =
                  e.text.match ||
                  function (e, n) {
                    var i, r;
                    return (
                      t("text.match"),
                      "string" == typeof e &&
                        ("string" == typeof n && (n = { "=": n }),
                        e ===
                          (i =
                            (n = n || {})["="] || n["*"] || n[">"] || n["<"]) ||
                          (r === n["="] &&
                            ((i = n["*"] || n[">"] || n["<"]),
                            e.slice(0, (i || "").length) === i ||
                              (r === n["*"] &&
                                (r !== n[">"] && r !== n["<"]
                                  ? e >= n[">"] && e <= n["<"]
                                  : (r !== n[">"] && e >= n[">"]) ||
                                    (r !== n["<"] && e <= n["<"]))))))
                    );
                  }),
                (e.text.hash =
                  e.text.hash ||
                  function (e, n) {
                    if ((t("text.hash"), "string" == typeof e)) {
                      if (((n = n || 0), !e.length)) return n;
                      for (var i = 0, r = e.length; i < r; ++i)
                        (n = (n << 5) - n + e.charCodeAt(i)), (n |= 0);
                      return n;
                    }
                  }),
                (e.list = e.list || {
                  is: function (e) {
                    return t("list"), e instanceof Array;
                  },
                }),
                (e.list.slit = e.list.slit || Array.prototype.slice),
                (e.list.sort =
                  e.list.sort ||
                  function (e) {
                    return (
                      t("list.sort"),
                      function (t, n) {
                        return t && n
                          ? (t = t[e]) < (n = n[e])
                            ? -1
                            : t > n
                            ? 1
                            : 0
                          : 0;
                      }
                    );
                  }),
                (e.list.map =
                  e.list.map ||
                  function (e, n, i) {
                    return t("list.map"), s(e, n, i);
                  }),
                (e.list.index = 1),
                (e.obj = e.boj || {
                  is: function (e) {
                    return (
                      t("obj"),
                      !!e &&
                        ((e instanceof Object && e.constructor === Object) ||
                          "Object" ===
                            Object.prototype.toString
                              .call(e)
                              .match(/^\[object (\w+)\]$/)[1])
                    );
                  },
                }),
                (e.obj.put =
                  e.obj.put ||
                  function (e, n, i) {
                    return t("obj.put"), ((e || {})[n] = i), e;
                  }),
                (e.obj.has =
                  e.obj.has ||
                  function (e, n) {
                    return (
                      t("obj.has"),
                      e && Object.prototype.hasOwnProperty.call(e, n)
                    );
                  }),
                (e.obj.del =
                  e.obj.del ||
                  function (e, n) {
                    if ((t("obj.del"), e)) return (e[n] = null), delete e[n], e;
                  }),
                (e.obj.as =
                  e.obj.as ||
                  function (e, n, i, r) {
                    return t("obj.as"), (e[n] = e[n] || (r === i ? {} : i));
                  }),
                (e.obj.ify =
                  e.obj.ify ||
                  function (e) {
                    if ((t("obj.ify"), r(e))) return e;
                    try {
                      e = JSON.parse(e);
                    } catch (t) {
                      e = {};
                    }
                    return e;
                  }),
                (function () {
                  function n(t, e) {
                    (o(this, e) && void 0 !== this[e]) || (this[e] = t);
                  }
                  e.obj.to =
                    e.obj.to ||
                    function (e, i) {
                      return t("obj.to"), s(e, n, (i = i || {})), i;
                    };
                })(),
                (e.obj.copy =
                  e.obj.copy ||
                  function (e) {
                    return t("obj.copy"), e ? JSON.parse(JSON.stringify(e)) : e;
                  }),
                (function () {
                  function n(t, e) {
                    var n = this.n;
                    if (!n || !(e === n || (r(n) && o(n, e))))
                      return void 0 !== e || void 0;
                  }
                  e.obj.empty =
                    e.obj.empty ||
                    function (e, i) {
                      return t("obj.empty"), !e || !s(e, n, { n: i });
                    };
                })(),
                (function () {
                  function n(t, e) {
                    if (2 === arguments.length)
                      return (n.r = n.r || {}), void (n.r[t] = e);
                    (n.r = n.r || []), n.r.push(t);
                  }
                  var s,
                    a = Object.keys;
                  (Object.keys =
                    Object.keys ||
                    function (t) {
                      return s(t, function (t, e, n) {
                        n(e);
                      });
                    }),
                    (e.obj.map = s =
                      e.obj.map ||
                      function (s, l, c) {
                        t("obj.map");
                        var u,
                          h,
                          d,
                          p,
                          f,
                          m = 0,
                          g = "function" == typeof l;
                        if (
                          ((n.r = u),
                          a && r(s) && ((p = a(s)), (f = !0)),
                          (c = c || {}),
                          i(s) || p)
                        )
                          for (h = (p || s).length; m < h; m++) {
                            var v = m + e.list.index;
                            if (g) {
                              if (
                                (d = f
                                  ? l.call(c, s[p[m]], p[m], n)
                                  : l.call(c, s[m], v, n)) !== u
                              )
                                return d;
                            } else if (l === s[f ? p[m] : m])
                              return p ? p[m] : v;
                          }
                        else
                          for (m in s)
                            if (g) {
                              if (
                                o(s, m) &&
                                (d = c
                                  ? l.call(c, s[m], m, n)
                                  : l(s[m], m, n)) !== u
                              )
                                return d;
                            } else if (l === s[m]) return m;
                        return g ? n.r : e.list.index ? 0 : -1;
                      });
                })(),
                (e.time = e.time || {}),
                (e.time.is =
                  e.time.is ||
                  function (e) {
                    return (
                      t("time"), e ? e instanceof Date : +new Date().getTime()
                    );
                  });
              var n = e.fn.is,
                i = e.list.is,
                r = (b = e.obj).is,
                o = b.has,
                s = b.map,
                a = {
                  is: function (e) {
                    return (
                      t("val.is"),
                      e !== w &&
                        (null === e ||
                          (e !== 1 / 0 &&
                            (!!(h(e) || c(e) || u(e)) || a.link.is(e) || !1)))
                    );
                  },
                };
              (a.link = a.rel = { _: "#" }),
                (function () {
                  function e(t, e) {
                    var n = this;
                    return n.id
                      ? (n.id = !1)
                      : e == l && h(t)
                      ? void (n.id = t)
                      : (n.id = !1);
                  }
                  a.link.is = function (n) {
                    if ((t("val.link.is"), n && n[l] && !n._ && r(n))) {
                      var i = {};
                      if ((s(n, e, i), i.id)) return i.id;
                    }
                    return !1;
                  };
                })(),
                (a.link.ify = function (e) {
                  return t("val.link.ify"), d({}, l, e);
                }),
                (e.obj.has._ = ".");
              var l = a.link._,
                c = e.bi.is,
                u = e.num.is,
                h = e.text.is,
                d = ((r = (b = e.obj).is), b.put);
              (s = b.map), (e.val = e.val || a);
              var p = {
                _: "_",
                soul: function (e, n) {
                  return t("node.soul"), e && e._ && e._[n || g];
                },
              };
              (p.soul.ify = function (e, n) {
                return (
                  t("node.soul.ify"),
                  (n = "string" == typeof n ? { soul: n } : n || {}),
                  ((e = e || {})._ = e._ || {}),
                  (e._[g] = n.soul || e._[g] || m()),
                  e
                );
              }),
                (p.soul._ = a.link._),
                (function () {
                  function e(t, e) {
                    if (e !== p._)
                      return (
                        !a.is(t) ||
                        void (
                          this.cb && this.cb.call(this.as, t, e, this.n, this.s)
                        )
                      );
                  }
                  p.is = function (n, i, o) {
                    var a;
                    return (
                      t("node.is"),
                      !!r(n) &&
                        !!(a = p.soul(n)) &&
                        !s(n, e, { as: o, cb: i, s: a, n })
                    );
                  };
                })(),
                (function () {
                  function e(t, e) {
                    var n,
                      i = this.o;
                    i.map
                      ? void 0 === (n = i.map.call(this.as, t, "" + e, i.node))
                        ? f(i.node, e)
                        : i.node && (i.node[e] = n)
                      : a.is(t) && (i.node[e] = t);
                  }
                  p.ify = function (n, i, r) {
                    return (
                      t("node.ify"),
                      i
                        ? "string" == typeof i
                          ? (i = { soul: i })
                          : "function" == typeof i && (i = { map: i })
                        : (i = {}),
                      i.map && (i.node = i.map.call(r, n, w, i.node || {})),
                      (i.node = p.soul.ify(i.node || {}, i)) &&
                        s(n, e, { o: i, as: r }),
                      i.node
                    );
                  };
                })(),
                (r = (b = e.obj).is);
              var f = b.del,
                m = ((s = b.map), e.text.random),
                g = p.soul._;
              e.node = e.node || p;
              var v = e.state;
              (v.lex = function () {
                return t("state.lex"), v().toString(36).replace(".", "");
              }),
                (v.to = function (e, n, i) {
                  t("state.to");
                  var o = (e || {})[n];
                  return (
                    r(o) && (o = y(o)), v.ify(i, n, v.is(e, n), o, p.soul(e))
                  );
                }),
                (function () {
                  function e(t, e) {
                    x !== e && v.ify(this.o, e, this.s);
                  }
                  v.map = function (i, a, l) {
                    var c;
                    t("state.map");
                    var h = r((h = i || a)) ? h : null;
                    return (
                      (i = n((i = i || a)) ? i : null),
                      h && !i
                        ? ((a = u(a) ? a : v()),
                          (h[x] = h[x] || {}),
                          s(h, e, { o: h, s: a }),
                          h)
                        : ((l = l || r(a) ? a : c),
                          (a = u(a) ? a : v()),
                          function (t, n, r, s) {
                            if (!i) return e.call({ o: r, s: a }, t, n), t;
                            i.call(l || this || {}, t, n, r, s),
                              (o(r, n) && c === r[n]) ||
                                e.call({ o: r, s: a }, t, n);
                          })
                    );
                  };
                })(),
                (b = e.obj).as,
                (o = b.has),
                (r = b.is),
                (s = b.map);
              var y = b.copy,
                x = ((u = e.num.is), (n = e.fn.is), p._),
                _ = {};
              !(function () {
                function e(t, e) {
                  if (!t || e !== p.soul(t) || !p.is(t, this.fn, this.as))
                    return !0;
                  this.cb &&
                    ((n.n = t), (n.as = this.as), this.cb.call(n.as, t, e, n));
                }
                function n(t) {
                  t && p.is(n.n, t, n.as);
                }
                _.is = function (n, i, o, a) {
                  return (
                    t("graph.is"),
                    !(!n || !r(n) || M(n) || s(n, e, { cb: i, fn: o, as: a }))
                  );
                };
              })(),
                (function () {
                  function n(t, e) {
                    var n;
                    return (n = (function (t, e) {
                      for (var n, i = t.seen, r = i.length; r--; )
                        if (((n = i[r]), e.obj === n.obj)) return n;
                      i.push(e);
                    })(t, e))
                      ? n
                      : ((e.env = t),
                        (e.soul = s),
                        p.ify(e.obj, i, e) &&
                          ((e.link = e.link || a.link.ify(p.soul(e.node))),
                          e.obj !== t.shell &&
                            (t.graph[a.link.is(e.link)] = e.node)),
                        e);
                  }
                  function i(t, e, i) {
                    var r,
                      s,
                      c = this,
                      u = c.env;
                    if (p._ === e && o(t, a.link._)) return i._;
                    if ((r = l(t, e, i, c, u))) {
                      if (
                        (e ||
                          ((c.node = c.node || i || {}),
                          o(t, p._) && p.soul(t) && (c.node._ = y(t._)),
                          (c.node = p.soul.ify(c.node, a.link.is(c.link))),
                          (c.link = c.link || a.link.ify(p.soul(c.node)))),
                        (s = u.map) &&
                          (s.call(u.as || {}, t, e, i, c), o(i, e)))
                      ) {
                        if (((t = i[e]), w === t)) return void f(i, e);
                        if (!(r = l(t, e, i, c, u))) return;
                      }
                      if (!e) return c.node;
                      if (!0 === r) return t;
                      if ((s = n(u, { obj: t, path: c.path.concat(e) })).node)
                        return s.link;
                    }
                  }
                  function s(t) {
                    var e = this,
                      n = a.link.is(e.link),
                      i = e.env.graph;
                    (e.link = e.link || a.link.ify(t)),
                      (e.link[a.link._] = t),
                      e.node && e.node[p._] && (e.node[p._][a.link._] = t),
                      o(i, n) && ((i[t] = i[n]), f(i, n));
                  }
                  function l(t, n, i, o, s) {
                    var c;
                    return (
                      !!a.is(t) ||
                      (r(t)
                        ? 1
                        : (c = s.invalid)
                        ? l((t = c.call(s.as || {}, t, n, i)), n, i, o, s)
                        : ((s.err =
                            "Invalid value at '" +
                            o.path.concat(n).join(".") +
                            "'!"),
                          void (
                            e.list.is(t) &&
                            (s.err += " Use `.set(item)` instead of an Array.")
                          )))
                    );
                  }
                  _.ify = function (e, i, r) {
                    t("graph.ify");
                    var o = { path: [], obj: e };
                    return (
                      i
                        ? "string" == typeof i
                          ? (i = { soul: i })
                          : "function" == typeof i && (i.map = i)
                        : (i = {}),
                      "string" == typeof r && ((i.soul = i.soul || r), (r = w)),
                      i.soul && (o.link = a.link.ify(i.soul)),
                      (i.shell = (r || {}).shell),
                      (i.graph = i.graph || {}),
                      (i.seen = i.seen || []),
                      (i.as = i.as || r),
                      n(i, o),
                      (i.root = o.node),
                      i.graph
                    );
                  };
                })(),
                (_.node = function (e) {
                  t("graph.node");
                  var n = p.soul(e);
                  if (n) return d({}, n, e);
                }),
                (function () {
                  function e(t, e) {
                    var n, i;
                    if (p._ !== e)
                      (n = a.link.is(t))
                        ? (i = this.opt.seen[n])
                          ? (this.obj[e] = i)
                          : (this.obj[e] = this.opt.seen[n] =
                              _.to(this.graph, n, this.opt))
                        : (this.obj[e] = t);
                    else {
                      if (M(t, a.link._)) return;
                      this.obj[e] = y(t);
                    }
                  }
                  _.to = function (n, i, r) {
                    if ((t("graph.to"), n)) {
                      var o = {};
                      return (
                        (r = r || { seen: {} }),
                        s(n[i], e, { obj: o, graph: n, opt: r }),
                        o
                      );
                    }
                  };
                })(),
                (n = e.fn.is),
                (r = (b = e.obj).is),
                (f = b.del),
                (o = b.has);
              var b,
                w,
                M = b.empty;
              (d = b.put), (s = b.map), (y = b.copy), (e.graph = e.graph || _);
            }
          })();
      },
      735: (t) => {
        function e(t) {
          var e = new Error("Cannot find module '" + t + "'");
          throw ((e.code = "MODULE_NOT_FOUND"), e);
        }
        (e.keys = () => []), (e.resolve = e), (e.id = 735), (t.exports = e);
      },
      501: (t) => {
        var e;
        self,
          (e = function () {
            return (function (t) {
              var e = {};
              function n(i) {
                if (e[i]) return e[i].exports;
                var r = (e[i] = { i, l: !1, exports: {} });
                return (
                  t[i].call(r.exports, r, r.exports, n), (r.l = !0), r.exports
                );
              }
              return (
                (n.m = t),
                (n.c = e),
                (n.d = function (t, e, i) {
                  n.o(t, e) ||
                    Object.defineProperty(t, e, { enumerable: !0, get: i });
                }),
                (n.r = function (t) {
                  "undefined" != typeof Symbol &&
                    Symbol.toStringTag &&
                    Object.defineProperty(t, Symbol.toStringTag, {
                      value: "Module",
                    }),
                    Object.defineProperty(t, "__esModule", { value: !0 });
                }),
                (n.t = function (t, e) {
                  if ((1 & e && (t = n(t)), 8 & e)) return t;
                  if (4 & e && "object" == typeof t && t && t.__esModule)
                    return t;
                  var i = Object.create(null);
                  if (
                    (n.r(i),
                    Object.defineProperty(i, "default", {
                      enumerable: !0,
                      value: t,
                    }),
                    2 & e && "string" != typeof t)
                  )
                    for (var r in t)
                      n.d(
                        i,
                        r,
                        function (e) {
                          return t[e];
                        }.bind(null, r)
                      );
                  return i;
                }),
                (n.n = function (t) {
                  var e =
                    t && t.__esModule
                      ? function () {
                          return t.default;
                        }
                      : function () {
                          return t;
                        };
                  return n.d(e, "a", e), e;
                }),
                (n.o = function (t, e) {
                  return Object.prototype.hasOwnProperty.call(t, e);
                }),
                (n.p = ""),
                n((n.s = "./build/index.js"))
              );
            })({
              "./build/index.js": function (t, e, n) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.io = e.Socket = e.Manager = e.protocol = void 0);
                var r = n("./build/url.js"),
                  o = n("./build/manager.js"),
                  s = n("./node_modules/debug/src/browser.js")(
                    "socket.io-client"
                  );
                t.exports = e = l;
                var a = (e.managers = {});
                function l(t, e) {
                  "object" === i(t) && ((e = t), (t = void 0)), (e = e || {});
                  var n,
                    l = r.url(t, e.path || "/socket.io"),
                    c = l.source,
                    u = l.id,
                    h = l.path,
                    d = a[u] && h in a[u].nsps;
                  return (
                    e.forceNew ||
                    e["force new connection"] ||
                    !1 === e.multiplex ||
                    d
                      ? (s("ignoring socket cache for %s", c),
                        (n = new o.Manager(c, e)))
                      : (a[u] ||
                          (s("new io instance for %s", c),
                          (a[u] = new o.Manager(c, e))),
                        (n = a[u])),
                    l.query && !e.query && (e.query = l.queryKey),
                    n.socket(l.path, e)
                  );
                }
                e.io = l;
                var c = n("./node_modules/socket.io-parser/dist/index.js");
                Object.defineProperty(e, "protocol", {
                  enumerable: !0,
                  get: function () {
                    return c.protocol;
                  },
                }),
                  (e.connect = l);
                var u = n("./build/manager.js");
                Object.defineProperty(e, "Manager", {
                  enumerable: !0,
                  get: function () {
                    return u.Manager;
                  },
                });
                var h = n("./build/socket.js");
                Object.defineProperty(e, "Socket", {
                  enumerable: !0,
                  get: function () {
                    return h.Socket;
                  },
                }),
                  (e.default = l);
              },
              "./build/manager.js": function (t, e, n) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                function r(t, e) {
                  for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    (i.enumerable = i.enumerable || !1),
                      (i.configurable = !0),
                      "value" in i && (i.writable = !0),
                      Object.defineProperty(t, i.key, i);
                  }
                }
                function o(t, e) {
                  return (o =
                    Object.setPrototypeOf ||
                    function (t, e) {
                      return (t.__proto__ = e), t;
                    })(t, e);
                }
                function s(t, e) {
                  return !e || ("object" !== i(e) && "function" != typeof e)
                    ? (function (t) {
                        if (void 0 === t)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return t;
                      })(t)
                    : e;
                }
                function a(t) {
                  return (a = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (t) {
                        return t.__proto__ || Object.getPrototypeOf(t);
                      })(t);
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.Manager = void 0);
                var l = n("./node_modules/engine.io-client/lib/index.js"),
                  c = n("./build/socket.js"),
                  u = n("./node_modules/socket.io-parser/dist/index.js"),
                  h = n("./build/on.js"),
                  d = n("./node_modules/backo2/index.js"),
                  p = n("./build/typed-events.js"),
                  f = n("./node_modules/debug/src/browser.js")(
                    "socket.io-client:manager"
                  ),
                  m = (function (t) {
                    !(function (t, e) {
                      if ("function" != typeof e && null !== e)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                          value: t,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        e && o(t, e);
                    })(v, t);
                    var e,
                      n,
                      p,
                      m,
                      g =
                        ((p = v),
                        (m = (function () {
                          if (
                            "undefined" == typeof Reflect ||
                            !Reflect.construct
                          )
                            return !1;
                          if (Reflect.construct.sham) return !1;
                          if ("function" == typeof Proxy) return !0;
                          try {
                            return (
                              Boolean.prototype.valueOf.call(
                                Reflect.construct(Boolean, [], function () {})
                              ),
                              !0
                            );
                          } catch (t) {
                            return !1;
                          }
                        })()),
                        function () {
                          var t,
                            e = a(p);
                          if (m) {
                            var n = a(this).constructor;
                            t = Reflect.construct(e, arguments, n);
                          } else t = e.apply(this, arguments);
                          return s(this, t);
                        });
                    function v(t, e) {
                      var n;
                      !(function (t, e) {
                        if (!(t instanceof e))
                          throw new TypeError(
                            "Cannot call a class as a function"
                          );
                      })(this, v),
                        ((n = g.call(this)).nsps = {}),
                        (n.subs = []),
                        t && "object" === i(t) && ((e = t), (t = void 0)),
                        ((e = e || {}).path = e.path || "/socket.io"),
                        (n.opts = e),
                        n.reconnection(!1 !== e.reconnection),
                        n.reconnectionAttempts(e.reconnectionAttempts || 1 / 0),
                        n.reconnectionDelay(e.reconnectionDelay || 1e3),
                        n.reconnectionDelayMax(e.reconnectionDelayMax || 5e3),
                        n.randomizationFactor(e.randomizationFactor || 0.5),
                        (n.backoff = new d({
                          min: n.reconnectionDelay(),
                          max: n.reconnectionDelayMax(),
                          jitter: n.randomizationFactor(),
                        })),
                        n.timeout(null == e.timeout ? 2e4 : e.timeout),
                        (n._readyState = "closed"),
                        (n.uri = t);
                      var r = e.parser || u;
                      return (
                        (n.encoder = new r.Encoder()),
                        (n.decoder = new r.Decoder()),
                        (n._autoConnect = !1 !== e.autoConnect),
                        n._autoConnect && n.open(),
                        n
                      );
                    }
                    return (
                      (e = v),
                      (n = [
                        {
                          key: "reconnection",
                          value: function (t) {
                            return arguments.length
                              ? ((this._reconnection = !!t), this)
                              : this._reconnection;
                          },
                        },
                        {
                          key: "reconnectionAttempts",
                          value: function (t) {
                            return void 0 === t
                              ? this._reconnectionAttempts
                              : ((this._reconnectionAttempts = t), this);
                          },
                        },
                        {
                          key: "reconnectionDelay",
                          value: function (t) {
                            var e;
                            return void 0 === t
                              ? this._reconnectionDelay
                              : ((this._reconnectionDelay = t),
                                null === (e = this.backoff) ||
                                  void 0 === e ||
                                  e.setMin(t),
                                this);
                          },
                        },
                        {
                          key: "randomizationFactor",
                          value: function (t) {
                            var e;
                            return void 0 === t
                              ? this._randomizationFactor
                              : ((this._randomizationFactor = t),
                                null === (e = this.backoff) ||
                                  void 0 === e ||
                                  e.setJitter(t),
                                this);
                          },
                        },
                        {
                          key: "reconnectionDelayMax",
                          value: function (t) {
                            var e;
                            return void 0 === t
                              ? this._reconnectionDelayMax
                              : ((this._reconnectionDelayMax = t),
                                null === (e = this.backoff) ||
                                  void 0 === e ||
                                  e.setMax(t),
                                this);
                          },
                        },
                        {
                          key: "timeout",
                          value: function (t) {
                            return arguments.length
                              ? ((this._timeout = t), this)
                              : this._timeout;
                          },
                        },
                        {
                          key: "maybeReconnectOnOpen",
                          value: function () {
                            !this._reconnecting &&
                              this._reconnection &&
                              0 === this.backoff.attempts &&
                              this.reconnect();
                          },
                        },
                        {
                          key: "open",
                          value: function (t) {
                            var e = this;
                            if (
                              (f("readyState %s", this._readyState),
                              ~this._readyState.indexOf("open"))
                            )
                              return this;
                            f("opening %s", this.uri),
                              (this.engine = l(this.uri, this.opts));
                            var n = this.engine,
                              i = this;
                            (this._readyState = "opening"),
                              (this.skipReconnect = !1);
                            var r = h.on(n, "open", function () {
                                i.onopen(), t && t();
                              }),
                              o = h.on(n, "error", function (n) {
                                f("error"),
                                  i.cleanup(),
                                  (i._readyState = "closed"),
                                  e.emitReserved("error", n),
                                  t ? t(n) : i.maybeReconnectOnOpen();
                              });
                            if (!1 !== this._timeout) {
                              var s = this._timeout;
                              f("connect attempt will timeout after %d", s),
                                0 === s && r();
                              var a = setTimeout(function () {
                                f("connect attempt timed out after %d", s),
                                  r(),
                                  n.close(),
                                  n.emit("error", new Error("timeout"));
                              }, s);
                              this.opts.autoUnref && a.unref(),
                                this.subs.push(function () {
                                  clearTimeout(a);
                                });
                            }
                            return this.subs.push(r), this.subs.push(o), this;
                          },
                        },
                        {
                          key: "connect",
                          value: function (t) {
                            return this.open(t);
                          },
                        },
                        {
                          key: "onopen",
                          value: function () {
                            f("open"),
                              this.cleanup(),
                              (this._readyState = "open"),
                              this.emitReserved("open");
                            var t = this.engine;
                            this.subs.push(
                              h.on(t, "ping", this.onping.bind(this)),
                              h.on(t, "data", this.ondata.bind(this)),
                              h.on(t, "error", this.onerror.bind(this)),
                              h.on(t, "close", this.onclose.bind(this)),
                              h.on(
                                this.decoder,
                                "decoded",
                                this.ondecoded.bind(this)
                              )
                            );
                          },
                        },
                        {
                          key: "onping",
                          value: function () {
                            this.emitReserved("ping");
                          },
                        },
                        {
                          key: "ondata",
                          value: function (t) {
                            this.decoder.add(t);
                          },
                        },
                        {
                          key: "ondecoded",
                          value: function (t) {
                            this.emitReserved("packet", t);
                          },
                        },
                        {
                          key: "onerror",
                          value: function (t) {
                            f("error", t), this.emitReserved("error", t);
                          },
                        },
                        {
                          key: "socket",
                          value: function (t, e) {
                            var n = this.nsps[t];
                            return (
                              n ||
                                ((n = new c.Socket(this, t, e)),
                                (this.nsps[t] = n)),
                              n
                            );
                          },
                        },
                        {
                          key: "_destroy",
                          value: function (t) {
                            for (
                              var e = 0, n = Object.keys(this.nsps);
                              e < n.length;
                              e++
                            ) {
                              var i = n[e];
                              if (this.nsps[i].active)
                                return void f(
                                  "socket %s is still active, skipping close",
                                  i
                                );
                            }
                            this._close();
                          },
                        },
                        {
                          key: "_packet",
                          value: function (t) {
                            f("writing packet %j", t);
                            for (
                              var e = this.encoder.encode(t), n = 0;
                              n < e.length;
                              n++
                            )
                              this.engine.write(e[n], t.options);
                          },
                        },
                        {
                          key: "cleanup",
                          value: function () {
                            f("cleanup"),
                              this.subs.forEach(function (t) {
                                return t();
                              }),
                              (this.subs.length = 0),
                              this.decoder.destroy();
                          },
                        },
                        {
                          key: "_close",
                          value: function () {
                            f("disconnect"),
                              (this.skipReconnect = !0),
                              (this._reconnecting = !1),
                              "opening" === this._readyState && this.cleanup(),
                              this.backoff.reset(),
                              (this._readyState = "closed"),
                              this.engine && this.engine.close();
                          },
                        },
                        {
                          key: "disconnect",
                          value: function () {
                            return this._close();
                          },
                        },
                        {
                          key: "onclose",
                          value: function (t) {
                            f("onclose"),
                              this.cleanup(),
                              this.backoff.reset(),
                              (this._readyState = "closed"),
                              this.emitReserved("close", t),
                              this._reconnection &&
                                !this.skipReconnect &&
                                this.reconnect();
                          },
                        },
                        {
                          key: "reconnect",
                          value: function () {
                            var t = this;
                            if (this._reconnecting || this.skipReconnect)
                              return this;
                            var e = this;
                            if (
                              this.backoff.attempts >=
                              this._reconnectionAttempts
                            )
                              f("reconnect failed"),
                                this.backoff.reset(),
                                this.emitReserved("reconnect_failed"),
                                (this._reconnecting = !1);
                            else {
                              var n = this.backoff.duration();
                              f("will wait %dms before reconnect attempt", n),
                                (this._reconnecting = !0);
                              var i = setTimeout(function () {
                                e.skipReconnect ||
                                  (f("attempting reconnect"),
                                  t.emitReserved(
                                    "reconnect_attempt",
                                    e.backoff.attempts
                                  ),
                                  e.skipReconnect ||
                                    e.open(function (n) {
                                      n
                                        ? (f("reconnect attempt error"),
                                          (e._reconnecting = !1),
                                          e.reconnect(),
                                          t.emitReserved("reconnect_error", n))
                                        : (f("reconnect success"),
                                          e.onreconnect());
                                    }));
                              }, n);
                              this.opts.autoUnref && i.unref(),
                                this.subs.push(function () {
                                  clearTimeout(i);
                                });
                            }
                          },
                        },
                        {
                          key: "onreconnect",
                          value: function () {
                            var t = this.backoff.attempts;
                            (this._reconnecting = !1),
                              this.backoff.reset(),
                              this.emitReserved("reconnect", t);
                          },
                        },
                      ]) && r(e.prototype, n),
                      v
                    );
                  })(p.StrictEventEmitter);
                e.Manager = m;
              },
              "./build/on.js": function (t, e, n) {
                "use strict";
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.on = void 0),
                  (e.on = function (t, e, n) {
                    return (
                      t.on(e, n),
                      function () {
                        t.off(e, n);
                      }
                    );
                  });
              },
              "./build/socket.js": function (t, e, n) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                function r(t, e) {
                  (null == e || e > t.length) && (e = t.length);
                  for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
                  return i;
                }
                function o(t, e) {
                  for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    (i.enumerable = i.enumerable || !1),
                      (i.configurable = !0),
                      "value" in i && (i.writable = !0),
                      Object.defineProperty(t, i.key, i);
                  }
                }
                function s(t, e, n) {
                  return (s =
                    "undefined" != typeof Reflect && Reflect.get
                      ? Reflect.get
                      : function (t, e, n) {
                          var i = (function (t, e) {
                            for (
                              ;
                              !Object.prototype.hasOwnProperty.call(t, e) &&
                              null !== (t = c(t));

                            );
                            return t;
                          })(t, e);
                          if (i) {
                            var r = Object.getOwnPropertyDescriptor(i, e);
                            return r.get ? r.get.call(n) : r.value;
                          }
                        })(t, e, n || t);
                }
                function a(t, e) {
                  return (a =
                    Object.setPrototypeOf ||
                    function (t, e) {
                      return (t.__proto__ = e), t;
                    })(t, e);
                }
                function l(t, e) {
                  return !e || ("object" !== i(e) && "function" != typeof e)
                    ? (function (t) {
                        if (void 0 === t)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return t;
                      })(t)
                    : e;
                }
                function c(t) {
                  return (c = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (t) {
                        return t.__proto__ || Object.getPrototypeOf(t);
                      })(t);
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.Socket = void 0);
                var u = n("./node_modules/socket.io-parser/dist/index.js"),
                  h = n("./build/on.js"),
                  d = n("./build/typed-events.js"),
                  p = n("./node_modules/debug/src/browser.js")(
                    "socket.io-client:socket"
                  ),
                  f = Object.freeze({
                    connect: 1,
                    connect_error: 1,
                    disconnect: 1,
                    disconnecting: 1,
                    newListener: 1,
                    removeListener: 1,
                  }),
                  m = (function (t) {
                    !(function (t, e) {
                      if ("function" != typeof e && null !== e)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                          value: t,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        e && a(t, e);
                    })(g, t);
                    var e,
                      n,
                      i,
                      d,
                      m =
                        ((i = g),
                        (d = (function () {
                          if (
                            "undefined" == typeof Reflect ||
                            !Reflect.construct
                          )
                            return !1;
                          if (Reflect.construct.sham) return !1;
                          if ("function" == typeof Proxy) return !0;
                          try {
                            return (
                              Boolean.prototype.valueOf.call(
                                Reflect.construct(Boolean, [], function () {})
                              ),
                              !0
                            );
                          } catch (t) {
                            return !1;
                          }
                        })()),
                        function () {
                          var t,
                            e = c(i);
                          if (d) {
                            var n = c(this).constructor;
                            t = Reflect.construct(e, arguments, n);
                          } else t = e.apply(this, arguments);
                          return l(this, t);
                        });
                    function g(t, e, n) {
                      var i;
                      return (
                        (function (t, e) {
                          if (!(t instanceof e))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, g),
                        ((i = m.call(this)).receiveBuffer = []),
                        (i.sendBuffer = []),
                        (i.ids = 0),
                        (i.acks = {}),
                        (i.flags = {}),
                        (i.io = t),
                        (i.nsp = e),
                        (i.ids = 0),
                        (i.acks = {}),
                        (i.receiveBuffer = []),
                        (i.sendBuffer = []),
                        (i.connected = !1),
                        (i.disconnected = !0),
                        (i.flags = {}),
                        n && n.auth && (i.auth = n.auth),
                        i.io._autoConnect && i.open(),
                        i
                      );
                    }
                    return (
                      (e = g),
                      (n = [
                        {
                          key: "subEvents",
                          value: function () {
                            if (!this.subs) {
                              var t = this.io;
                              this.subs = [
                                h.on(t, "open", this.onopen.bind(this)),
                                h.on(t, "packet", this.onpacket.bind(this)),
                                h.on(t, "error", this.onerror.bind(this)),
                                h.on(t, "close", this.onclose.bind(this)),
                              ];
                            }
                          },
                        },
                        {
                          key: "active",
                          get: function () {
                            return !!this.subs;
                          },
                        },
                        {
                          key: "connect",
                          value: function () {
                            return (
                              this.connected ||
                                (this.subEvents(),
                                this.io._reconnecting || this.io.open(),
                                "open" === this.io._readyState &&
                                  this.onopen()),
                              this
                            );
                          },
                        },
                        {
                          key: "open",
                          value: function () {
                            return this.connect();
                          },
                        },
                        {
                          key: "send",
                          value: function () {
                            for (
                              var t = arguments.length, e = new Array(t), n = 0;
                              n < t;
                              n++
                            )
                              e[n] = arguments[n];
                            return (
                              e.unshift("message"),
                              this.emit.apply(this, e),
                              this
                            );
                          },
                        },
                        {
                          key: "emit",
                          value: function (t) {
                            if (f.hasOwnProperty(t))
                              throw new Error(
                                '"' + t + '" is a reserved event name'
                              );
                            for (
                              var e = arguments.length,
                                n = new Array(e > 1 ? e - 1 : 0),
                                i = 1;
                              i < e;
                              i++
                            )
                              n[i - 1] = arguments[i];
                            n.unshift(t);
                            var r = {
                              type: u.PacketType.EVENT,
                              data: n,
                              options: {},
                            };
                            (r.options.compress = !1 !== this.flags.compress),
                              "function" == typeof n[n.length - 1] &&
                                (p("emitting packet with ack id %d", this.ids),
                                (this.acks[this.ids] = n.pop()),
                                (r.id = this.ids++));
                            var o =
                                this.io.engine &&
                                this.io.engine.transport &&
                                this.io.engine.transport.writable,
                              s =
                                this.flags.volatile && (!o || !this.connected);
                            return (
                              s
                                ? p(
                                    "discard packet as the transport is not currently writable"
                                  )
                                : this.connected
                                ? this.packet(r)
                                : this.sendBuffer.push(r),
                              (this.flags = {}),
                              this
                            );
                          },
                        },
                        {
                          key: "packet",
                          value: function (t) {
                            (t.nsp = this.nsp), this.io._packet(t);
                          },
                        },
                        {
                          key: "onopen",
                          value: function () {
                            var t = this;
                            p("transport is open - connecting"),
                              "function" == typeof this.auth
                                ? this.auth(function (e) {
                                    t.packet({
                                      type: u.PacketType.CONNECT,
                                      data: e,
                                    });
                                  })
                                : this.packet({
                                    type: u.PacketType.CONNECT,
                                    data: this.auth,
                                  });
                          },
                        },
                        {
                          key: "onerror",
                          value: function (t) {
                            this.connected ||
                              this.emitReserved("connect_error", t);
                          },
                        },
                        {
                          key: "onclose",
                          value: function (t) {
                            p("close (%s)", t),
                              (this.connected = !1),
                              (this.disconnected = !0),
                              delete this.id,
                              this.emitReserved("disconnect", t);
                          },
                        },
                        {
                          key: "onpacket",
                          value: function (t) {
                            if (t.nsp === this.nsp)
                              switch (t.type) {
                                case u.PacketType.CONNECT:
                                  if (t.data && t.data.sid) {
                                    var e = t.data.sid;
                                    this.onconnect(e);
                                  } else
                                    this.emitReserved(
                                      "connect_error",
                                      new Error(
                                        "It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"
                                      )
                                    );
                                  break;
                                case u.PacketType.EVENT:
                                case u.PacketType.BINARY_EVENT:
                                  this.onevent(t);
                                  break;
                                case u.PacketType.ACK:
                                case u.PacketType.BINARY_ACK:
                                  this.onack(t);
                                  break;
                                case u.PacketType.DISCONNECT:
                                  this.ondisconnect();
                                  break;
                                case u.PacketType.CONNECT_ERROR:
                                  var n = new Error(t.data.message);
                                  (n.data = t.data.data),
                                    this.emitReserved("connect_error", n);
                              }
                          },
                        },
                        {
                          key: "onevent",
                          value: function (t) {
                            var e = t.data || [];
                            p("emitting event %j", e),
                              null != t.id &&
                                (p("attaching ack callback to event"),
                                e.push(this.ack(t.id))),
                              this.connected
                                ? this.emitEvent(e)
                                : this.receiveBuffer.push(Object.freeze(e));
                          },
                        },
                        {
                          key: "emitEvent",
                          value: function (t) {
                            if (
                              this._anyListeners &&
                              this._anyListeners.length
                            ) {
                              var e,
                                n = (function (t, e) {
                                  var n =
                                    ("undefined" != typeof Symbol &&
                                      t[Symbol.iterator]) ||
                                    t["@@iterator"];
                                  if (!n) {
                                    if (
                                      Array.isArray(t) ||
                                      (n = (function (t, e) {
                                        if (t) {
                                          if ("string" == typeof t)
                                            return r(t, e);
                                          var n = Object.prototype.toString
                                            .call(t)
                                            .slice(8, -1);
                                          return (
                                            "Object" === n &&
                                              t.constructor &&
                                              (n = t.constructor.name),
                                            "Map" === n || "Set" === n
                                              ? Array.from(t)
                                              : "Arguments" === n ||
                                                /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                                  n
                                                )
                                              ? r(t, e)
                                              : void 0
                                          );
                                        }
                                      })(t)) ||
                                      (e && t && "number" == typeof t.length)
                                    ) {
                                      n && (t = n);
                                      var i = 0,
                                        o = function () {};
                                      return {
                                        s: o,
                                        n: function () {
                                          return i >= t.length
                                            ? { done: !0 }
                                            : { done: !1, value: t[i++] };
                                        },
                                        e: function (t) {
                                          throw t;
                                        },
                                        f: o,
                                      };
                                    }
                                    throw new TypeError(
                                      "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                                    );
                                  }
                                  var s,
                                    a = !0,
                                    l = !1;
                                  return {
                                    s: function () {
                                      n = n.call(t);
                                    },
                                    n: function () {
                                      var t = n.next();
                                      return (a = t.done), t;
                                    },
                                    e: function (t) {
                                      (l = !0), (s = t);
                                    },
                                    f: function () {
                                      try {
                                        a || null == n.return || n.return();
                                      } finally {
                                        if (l) throw s;
                                      }
                                    },
                                  };
                                })(this._anyListeners.slice());
                              try {
                                for (n.s(); !(e = n.n()).done; )
                                  e.value.apply(this, t);
                              } catch (t) {
                                n.e(t);
                              } finally {
                                n.f();
                              }
                            }
                            s(c(g.prototype), "emit", this).apply(this, t);
                          },
                        },
                        {
                          key: "ack",
                          value: function (t) {
                            var e = this,
                              n = !1;
                            return function () {
                              if (!n) {
                                n = !0;
                                for (
                                  var i = arguments.length,
                                    r = new Array(i),
                                    o = 0;
                                  o < i;
                                  o++
                                )
                                  r[o] = arguments[o];
                                p("sending ack %j", r),
                                  e.packet({
                                    type: u.PacketType.ACK,
                                    id: t,
                                    data: r,
                                  });
                              }
                            };
                          },
                        },
                        {
                          key: "onack",
                          value: function (t) {
                            var e = this.acks[t.id];
                            "function" == typeof e
                              ? (p("calling ack %s with %j", t.id, t.data),
                                e.apply(this, t.data),
                                delete this.acks[t.id])
                              : p("bad ack %s", t.id);
                          },
                        },
                        {
                          key: "onconnect",
                          value: function (t) {
                            p("socket connected with id %s", t),
                              (this.id = t),
                              (this.connected = !0),
                              (this.disconnected = !1),
                              this.emitBuffered(),
                              this.emitReserved("connect");
                          },
                        },
                        {
                          key: "emitBuffered",
                          value: function () {
                            var t = this;
                            this.receiveBuffer.forEach(function (e) {
                              return t.emitEvent(e);
                            }),
                              (this.receiveBuffer = []),
                              this.sendBuffer.forEach(function (e) {
                                return t.packet(e);
                              }),
                              (this.sendBuffer = []);
                          },
                        },
                        {
                          key: "ondisconnect",
                          value: function () {
                            p("server disconnect (%s)", this.nsp),
                              this.destroy(),
                              this.onclose("io server disconnect");
                          },
                        },
                        {
                          key: "destroy",
                          value: function () {
                            this.subs &&
                              (this.subs.forEach(function (t) {
                                return t();
                              }),
                              (this.subs = void 0)),
                              this.io._destroy(this);
                          },
                        },
                        {
                          key: "disconnect",
                          value: function () {
                            return (
                              this.connected &&
                                (p("performing disconnect (%s)", this.nsp),
                                this.packet({ type: u.PacketType.DISCONNECT })),
                              this.destroy(),
                              this.connected &&
                                this.onclose("io client disconnect"),
                              this
                            );
                          },
                        },
                        {
                          key: "close",
                          value: function () {
                            return this.disconnect();
                          },
                        },
                        {
                          key: "compress",
                          value: function (t) {
                            return (this.flags.compress = t), this;
                          },
                        },
                        {
                          key: "volatile",
                          get: function () {
                            return (this.flags.volatile = !0), this;
                          },
                        },
                        {
                          key: "onAny",
                          value: function (t) {
                            return (
                              (this._anyListeners = this._anyListeners || []),
                              this._anyListeners.push(t),
                              this
                            );
                          },
                        },
                        {
                          key: "prependAny",
                          value: function (t) {
                            return (
                              (this._anyListeners = this._anyListeners || []),
                              this._anyListeners.unshift(t),
                              this
                            );
                          },
                        },
                        {
                          key: "offAny",
                          value: function (t) {
                            if (!this._anyListeners) return this;
                            if (t) {
                              for (
                                var e = this._anyListeners, n = 0;
                                n < e.length;
                                n++
                              )
                                if (t === e[n]) return e.splice(n, 1), this;
                            } else this._anyListeners = [];
                            return this;
                          },
                        },
                        {
                          key: "listenersAny",
                          value: function () {
                            return this._anyListeners || [];
                          },
                        },
                      ]) && o(e.prototype, n),
                      g
                    );
                  })(d.StrictEventEmitter);
                e.Socket = m;
              },
              "./build/typed-events.js": function (t, e, n) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                function r(t, e) {
                  if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function");
                }
                function o(t, e) {
                  for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    (i.enumerable = i.enumerable || !1),
                      (i.configurable = !0),
                      "value" in i && (i.writable = !0),
                      Object.defineProperty(t, i.key, i);
                  }
                }
                function s(t, e, n) {
                  return (s =
                    "undefined" != typeof Reflect && Reflect.get
                      ? Reflect.get
                      : function (t, e, n) {
                          var i = (function (t, e) {
                            for (
                              ;
                              !Object.prototype.hasOwnProperty.call(t, e) &&
                              null !== (t = c(t));

                            );
                            return t;
                          })(t, e);
                          if (i) {
                            var r = Object.getOwnPropertyDescriptor(i, e);
                            return r.get ? r.get.call(n) : r.value;
                          }
                        })(t, e, n || t);
                }
                function a(t, e) {
                  return (a =
                    Object.setPrototypeOf ||
                    function (t, e) {
                      return (t.__proto__ = e), t;
                    })(t, e);
                }
                function l(t, e) {
                  return !e || ("object" !== i(e) && "function" != typeof e)
                    ? (function (t) {
                        if (void 0 === t)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return t;
                      })(t)
                    : e;
                }
                function c(t) {
                  return (c = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (t) {
                        return t.__proto__ || Object.getPrototypeOf(t);
                      })(t);
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.StrictEventEmitter = void 0);
                var u = (function (t) {
                  !(function (t, e) {
                    if ("function" != typeof e && null !== e)
                      throw new TypeError(
                        "Super expression must either be null or a function"
                      );
                    (t.prototype = Object.create(e && e.prototype, {
                      constructor: { value: t, writable: !0, configurable: !0 },
                    })),
                      e && a(t, e);
                  })(d, t);
                  var e,
                    n,
                    i,
                    u,
                    h =
                      ((i = d),
                      (u = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (t) {
                          return !1;
                        }
                      })()),
                      function () {
                        var t,
                          e = c(i);
                        if (u) {
                          var n = c(this).constructor;
                          t = Reflect.construct(e, arguments, n);
                        } else t = e.apply(this, arguments);
                        return l(this, t);
                      });
                  function d() {
                    return r(this, d), h.apply(this, arguments);
                  }
                  return (
                    (e = d),
                    (n = [
                      {
                        key: "on",
                        value: function (t, e) {
                          return (
                            s(c(d.prototype), "on", this).call(this, t, e), this
                          );
                        },
                      },
                      {
                        key: "once",
                        value: function (t, e) {
                          return (
                            s(c(d.prototype), "once", this).call(this, t, e),
                            this
                          );
                        },
                      },
                      {
                        key: "emit",
                        value: function (t) {
                          for (
                            var e,
                              n = arguments.length,
                              i = new Array(n > 1 ? n - 1 : 0),
                              r = 1;
                            r < n;
                            r++
                          )
                            i[r - 1] = arguments[r];
                          return (
                            (e = s(c(d.prototype), "emit", this)).call.apply(
                              e,
                              [this, t].concat(i)
                            ),
                            this
                          );
                        },
                      },
                      {
                        key: "emitReserved",
                        value: function (t) {
                          for (
                            var e,
                              n = arguments.length,
                              i = new Array(n > 1 ? n - 1 : 0),
                              r = 1;
                            r < n;
                            r++
                          )
                            i[r - 1] = arguments[r];
                          return (
                            (e = s(c(d.prototype), "emit", this)).call.apply(
                              e,
                              [this, t].concat(i)
                            ),
                            this
                          );
                        },
                      },
                      {
                        key: "listeners",
                        value: function (t) {
                          return s(c(d.prototype), "listeners", this).call(
                            this,
                            t
                          );
                        },
                      },
                    ]) && o(e.prototype, n),
                    d
                  );
                })(n("./node_modules/component-emitter/index.js"));
                e.StrictEventEmitter = u;
              },
              "./build/url.js": function (t, e, n) {
                "use strict";
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.url = void 0);
                var i = n("./node_modules/parseuri/index.js"),
                  r = n("./node_modules/debug/src/browser.js")(
                    "socket.io-client:url"
                  );
                e.url = function (t) {
                  var e =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : "",
                    n = arguments.length > 2 ? arguments[2] : void 0,
                    o = t;
                  (n = n || ("undefined" != typeof location && location)),
                    null == t && (t = n.protocol + "//" + n.host),
                    "string" == typeof t &&
                      ("/" === t.charAt(0) &&
                        (t = "/" === t.charAt(1) ? n.protocol + t : n.host + t),
                      /^(https?|wss?):\/\//.test(t) ||
                        (r("protocol-less url %s", t),
                        (t =
                          void 0 !== n
                            ? n.protocol + "//" + t
                            : "https://" + t)),
                      r("parse %s", t),
                      (o = i(t))),
                    o.port ||
                      (/^(http|ws)$/.test(o.protocol)
                        ? (o.port = "80")
                        : /^(http|ws)s$/.test(o.protocol) && (o.port = "443")),
                    (o.path = o.path || "/");
                  var s = -1 !== o.host.indexOf(":"),
                    a = s ? "[" + o.host + "]" : o.host;
                  return (
                    (o.id = o.protocol + "://" + a + ":" + o.port + e),
                    (o.href =
                      o.protocol +
                      "://" +
                      a +
                      (n && n.port === o.port ? "" : ":" + o.port)),
                    o
                  );
                };
              },
              "./node_modules/backo2/index.js": function (t, e) {
                function n(t) {
                  (t = t || {}),
                    (this.ms = t.min || 100),
                    (this.max = t.max || 1e4),
                    (this.factor = t.factor || 2),
                    (this.jitter =
                      t.jitter > 0 && t.jitter <= 1 ? t.jitter : 0),
                    (this.attempts = 0);
                }
                (t.exports = n),
                  (n.prototype.duration = function () {
                    var t = this.ms * Math.pow(this.factor, this.attempts++);
                    if (this.jitter) {
                      var e = Math.random(),
                        n = Math.floor(e * this.jitter * t);
                      t = 0 == (1 & Math.floor(10 * e)) ? t - n : t + n;
                    }
                    return 0 | Math.min(t, this.max);
                  }),
                  (n.prototype.reset = function () {
                    this.attempts = 0;
                  }),
                  (n.prototype.setMin = function (t) {
                    this.ms = t;
                  }),
                  (n.prototype.setMax = function (t) {
                    this.max = t;
                  }),
                  (n.prototype.setJitter = function (t) {
                    this.jitter = t;
                  });
              },
              "./node_modules/component-emitter/index.js": function (t, e, n) {
                function i(t) {
                  if (t)
                    return (function (t) {
                      for (var e in i.prototype) t[e] = i.prototype[e];
                      return t;
                    })(t);
                }
                (t.exports = i),
                  (i.prototype.on = i.prototype.addEventListener =
                    function (t, e) {
                      return (
                        (this._callbacks = this._callbacks || {}),
                        (this._callbacks["$" + t] =
                          this._callbacks["$" + t] || []).push(e),
                        this
                      );
                    }),
                  (i.prototype.once = function (t, e) {
                    function n() {
                      this.off(t, n), e.apply(this, arguments);
                    }
                    return (n.fn = e), this.on(t, n), this;
                  }),
                  (i.prototype.off =
                    i.prototype.removeListener =
                    i.prototype.removeAllListeners =
                    i.prototype.removeEventListener =
                      function (t, e) {
                        if (
                          ((this._callbacks = this._callbacks || {}),
                          0 == arguments.length)
                        )
                          return (this._callbacks = {}), this;
                        var n,
                          i = this._callbacks["$" + t];
                        if (!i) return this;
                        if (1 == arguments.length)
                          return delete this._callbacks["$" + t], this;
                        for (var r = 0; r < i.length; r++)
                          if ((n = i[r]) === e || n.fn === e) {
                            i.splice(r, 1);
                            break;
                          }
                        return (
                          0 === i.length && delete this._callbacks["$" + t],
                          this
                        );
                      }),
                  (i.prototype.emit = function (t) {
                    this._callbacks = this._callbacks || {};
                    for (
                      var e = new Array(arguments.length - 1),
                        n = this._callbacks["$" + t],
                        i = 1;
                      i < arguments.length;
                      i++
                    )
                      e[i - 1] = arguments[i];
                    if (n) {
                      i = 0;
                      for (var r = (n = n.slice(0)).length; i < r; ++i)
                        n[i].apply(this, e);
                    }
                    return this;
                  }),
                  (i.prototype.listeners = function (t) {
                    return (
                      (this._callbacks = this._callbacks || {}),
                      this._callbacks["$" + t] || []
                    );
                  }),
                  (i.prototype.hasListeners = function (t) {
                    return !!this.listeners(t).length;
                  });
              },
              "./node_modules/debug/src/browser.js": function (t, e, n) {
                var i;
                (e.formatArgs = function (e) {
                  if (
                    ((e[0] =
                      (this.useColors ? "%c" : "") +
                      this.namespace +
                      (this.useColors ? " %c" : " ") +
                      e[0] +
                      (this.useColors ? "%c " : " ") +
                      "+" +
                      t.exports.humanize(this.diff)),
                    this.useColors)
                  ) {
                    var n = "color: " + this.color;
                    e.splice(1, 0, n, "color: inherit");
                    var i = 0,
                      r = 0;
                    e[0].replace(/%[a-zA-Z%]/g, function (t) {
                      "%%" !== t && (i++, "%c" === t && (r = i));
                    }),
                      e.splice(r, 0, n);
                  }
                }),
                  (e.save = function (t) {
                    try {
                      t
                        ? e.storage.setItem("debug", t)
                        : e.storage.removeItem("debug");
                    } catch (t) {}
                  }),
                  (e.load = function () {
                    var t;
                    try {
                      t = e.storage.getItem("debug");
                    } catch (t) {}
                    return (
                      !t &&
                        "undefined" != typeof process &&
                        "env" in process &&
                        (t = process.env.DEBUG),
                      t
                    );
                  }),
                  (e.useColors = function () {
                    return (
                      !(
                        "undefined" == typeof window ||
                        !window.process ||
                        ("renderer" !== window.process.type &&
                          !window.process.__nwjs)
                      ) ||
                      (("undefined" == typeof navigator ||
                        !navigator.userAgent ||
                        !navigator.userAgent
                          .toLowerCase()
                          .match(/(edge|trident)\/(\d+)/)) &&
                        (("undefined" != typeof document &&
                          document.documentElement &&
                          document.documentElement.style &&
                          document.documentElement.style.WebkitAppearance) ||
                          ("undefined" != typeof window &&
                            window.console &&
                            (window.console.firebug ||
                              (window.console.exception &&
                                window.console.table))) ||
                          ("undefined" != typeof navigator &&
                            navigator.userAgent &&
                            navigator.userAgent
                              .toLowerCase()
                              .match(/firefox\/(\d+)/) &&
                            parseInt(RegExp.$1, 10) >= 31) ||
                          ("undefined" != typeof navigator &&
                            navigator.userAgent &&
                            navigator.userAgent
                              .toLowerCase()
                              .match(/applewebkit\/(\d+)/))))
                    );
                  }),
                  (e.storage = (function () {
                    try {
                      return localStorage;
                    } catch (t) {}
                  })()),
                  (e.destroy =
                    ((i = !1),
                    function () {
                      i ||
                        ((i = !0),
                        console.warn(
                          "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
                        ));
                    })),
                  (e.colors = [
                    "#0000CC",
                    "#0000FF",
                    "#0033CC",
                    "#0033FF",
                    "#0066CC",
                    "#0066FF",
                    "#0099CC",
                    "#0099FF",
                    "#00CC00",
                    "#00CC33",
                    "#00CC66",
                    "#00CC99",
                    "#00CCCC",
                    "#00CCFF",
                    "#3300CC",
                    "#3300FF",
                    "#3333CC",
                    "#3333FF",
                    "#3366CC",
                    "#3366FF",
                    "#3399CC",
                    "#3399FF",
                    "#33CC00",
                    "#33CC33",
                    "#33CC66",
                    "#33CC99",
                    "#33CCCC",
                    "#33CCFF",
                    "#6600CC",
                    "#6600FF",
                    "#6633CC",
                    "#6633FF",
                    "#66CC00",
                    "#66CC33",
                    "#9900CC",
                    "#9900FF",
                    "#9933CC",
                    "#9933FF",
                    "#99CC00",
                    "#99CC33",
                    "#CC0000",
                    "#CC0033",
                    "#CC0066",
                    "#CC0099",
                    "#CC00CC",
                    "#CC00FF",
                    "#CC3300",
                    "#CC3333",
                    "#CC3366",
                    "#CC3399",
                    "#CC33CC",
                    "#CC33FF",
                    "#CC6600",
                    "#CC6633",
                    "#CC9900",
                    "#CC9933",
                    "#CCCC00",
                    "#CCCC33",
                    "#FF0000",
                    "#FF0033",
                    "#FF0066",
                    "#FF0099",
                    "#FF00CC",
                    "#FF00FF",
                    "#FF3300",
                    "#FF3333",
                    "#FF3366",
                    "#FF3399",
                    "#FF33CC",
                    "#FF33FF",
                    "#FF6600",
                    "#FF6633",
                    "#FF9900",
                    "#FF9933",
                    "#FFCC00",
                    "#FFCC33",
                  ]),
                  (e.log = console.debug || console.log || function () {}),
                  (t.exports = n("./node_modules/debug/src/common.js")(e)),
                  (t.exports.formatters.j = function (t) {
                    try {
                      return JSON.stringify(t);
                    } catch (t) {
                      return "[UnexpectedJSONParseError]: " + t.message;
                    }
                  });
              },
              "./node_modules/debug/src/common.js": function (t, e, n) {
                function i(t) {
                  return (
                    (function (t) {
                      if (Array.isArray(t)) return r(t);
                    })(t) ||
                    (function (t) {
                      if (
                        ("undefined" != typeof Symbol &&
                          null != t[Symbol.iterator]) ||
                        null != t["@@iterator"]
                      )
                        return Array.from(t);
                    })(t) ||
                    (function (t, e) {
                      if (t) {
                        if ("string" == typeof t) return r(t, e);
                        var n = Object.prototype.toString.call(t).slice(8, -1);
                        return (
                          "Object" === n &&
                            t.constructor &&
                            (n = t.constructor.name),
                          "Map" === n || "Set" === n
                            ? Array.from(t)
                            : "Arguments" === n ||
                              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                            ? r(t, e)
                            : void 0
                        );
                      }
                    })(t) ||
                    (function () {
                      throw new TypeError(
                        "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                      );
                    })()
                  );
                }
                function r(t, e) {
                  (null == e || e > t.length) && (e = t.length);
                  for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
                  return i;
                }
                t.exports = function (t) {
                  function e(t) {
                    var n,
                      i = null;
                    function o() {
                      for (
                        var t = arguments.length, i = new Array(t), r = 0;
                        r < t;
                        r++
                      )
                        i[r] = arguments[r];
                      if (o.enabled) {
                        var s = o,
                          a = Number(new Date()),
                          l = a - (n || a);
                        (s.diff = l),
                          (s.prev = n),
                          (s.curr = a),
                          (n = a),
                          (i[0] = e.coerce(i[0])),
                          "string" != typeof i[0] && i.unshift("%O");
                        var c = 0;
                        (i[0] = i[0].replace(/%([a-zA-Z%])/g, function (t, n) {
                          if ("%%" === t) return "%";
                          c++;
                          var r = e.formatters[n];
                          if ("function" == typeof r) {
                            var o = i[c];
                            (t = r.call(s, o)), i.splice(c, 1), c--;
                          }
                          return t;
                        })),
                          e.formatArgs.call(s, i);
                        var u = s.log || e.log;
                        u.apply(s, i);
                      }
                    }
                    return (
                      (o.namespace = t),
                      (o.useColors = e.useColors()),
                      (o.color = e.selectColor(t)),
                      (o.extend = r),
                      (o.destroy = e.destroy),
                      Object.defineProperty(o, "enabled", {
                        enumerable: !0,
                        configurable: !1,
                        get: function () {
                          return null === i ? e.enabled(t) : i;
                        },
                        set: function (t) {
                          i = t;
                        },
                      }),
                      "function" == typeof e.init && e.init(o),
                      o
                    );
                  }
                  function r(t, n) {
                    var i = e(this.namespace + (void 0 === n ? ":" : n) + t);
                    return (i.log = this.log), i;
                  }
                  function o(t) {
                    return t
                      .toString()
                      .substring(2, t.toString().length - 2)
                      .replace(/\.\*\?$/, "*");
                  }
                  return (
                    (e.debug = e),
                    (e.default = e),
                    (e.coerce = function (t) {
                      return t instanceof Error ? t.stack || t.message : t;
                    }),
                    (e.disable = function () {
                      var t = []
                        .concat(
                          i(e.names.map(o)),
                          i(
                            e.skips.map(o).map(function (t) {
                              return "-" + t;
                            })
                          )
                        )
                        .join(",");
                      return e.enable(""), t;
                    }),
                    (e.enable = function (t) {
                      var n;
                      e.save(t), (e.names = []), (e.skips = []);
                      var i = ("string" == typeof t ? t : "").split(/[\s,]+/),
                        r = i.length;
                      for (n = 0; n < r; n++)
                        i[n] &&
                          ("-" === (t = i[n].replace(/\*/g, ".*?"))[0]
                            ? e.skips.push(new RegExp("^" + t.substr(1) + "$"))
                            : e.names.push(new RegExp("^" + t + "$")));
                    }),
                    (e.enabled = function (t) {
                      if ("*" === t[t.length - 1]) return !0;
                      var n, i;
                      for (n = 0, i = e.skips.length; n < i; n++)
                        if (e.skips[n].test(t)) return !1;
                      for (n = 0, i = e.names.length; n < i; n++)
                        if (e.names[n].test(t)) return !0;
                      return !1;
                    }),
                    (e.humanize = n("./node_modules/ms/index.js")),
                    (e.destroy = function () {
                      console.warn(
                        "Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."
                      );
                    }),
                    Object.keys(t).forEach(function (n) {
                      e[n] = t[n];
                    }),
                    (e.names = []),
                    (e.skips = []),
                    (e.formatters = {}),
                    (e.selectColor = function (t) {
                      for (var n = 0, i = 0; i < t.length; i++)
                        (n = (n << 5) - n + t.charCodeAt(i)), (n |= 0);
                      return e.colors[Math.abs(n) % e.colors.length];
                    }),
                    e.enable(e.load()),
                    e
                  );
                };
              },
              "./node_modules/engine.io-client/lib/globalThis.browser.js":
                function (t, e) {
                  t.exports =
                    "undefined" != typeof self
                      ? self
                      : "undefined" != typeof window
                      ? window
                      : Function("return this")();
                },
              "./node_modules/engine.io-client/lib/index.js": function (
                t,
                e,
                n
              ) {
                var i = n("./node_modules/engine.io-client/lib/socket.js");
                (t.exports = function (t, e) {
                  return new i(t, e);
                }),
                  (t.exports.Socket = i),
                  (t.exports.protocol = i.protocol),
                  (t.exports.Transport = n(
                    "./node_modules/engine.io-client/lib/transport.js"
                  )),
                  (t.exports.transports = n(
                    "./node_modules/engine.io-client/lib/transports/index.js"
                  )),
                  (t.exports.parser = n(
                    "./node_modules/engine.io-parser/lib/index.js"
                  ));
              },
              "./node_modules/engine.io-client/lib/socket.js": function (
                t,
                e,
                n
              ) {
                function i() {
                  return (i =
                    Object.assign ||
                    function (t) {
                      for (var e = 1; e < arguments.length; e++) {
                        var n = arguments[e];
                        for (var i in n)
                          Object.prototype.hasOwnProperty.call(n, i) &&
                            (t[i] = n[i]);
                      }
                      return t;
                    }).apply(this, arguments);
                }
                function r(t) {
                  return (r =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                function o(t, e) {
                  if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function");
                }
                function s(t, e) {
                  for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    (i.enumerable = i.enumerable || !1),
                      (i.configurable = !0),
                      "value" in i && (i.writable = !0),
                      Object.defineProperty(t, i.key, i);
                  }
                }
                function a(t, e) {
                  return (a =
                    Object.setPrototypeOf ||
                    function (t, e) {
                      return (t.__proto__ = e), t;
                    })(t, e);
                }
                function l(t, e) {
                  return !e || ("object" !== r(e) && "function" != typeof e)
                    ? (function (t) {
                        if (void 0 === t)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return t;
                      })(t)
                    : e;
                }
                function c(t) {
                  return (c = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (t) {
                        return t.__proto__ || Object.getPrototypeOf(t);
                      })(t);
                }
                var u = n(
                    "./node_modules/engine.io-client/lib/transports/index.js"
                  ),
                  h = n("./node_modules/component-emitter/index.js"),
                  d = n("./node_modules/debug/src/browser.js")(
                    "engine.io-client:socket"
                  ),
                  p = n("./node_modules/engine.io-parser/lib/index.js"),
                  f = n("./node_modules/parseuri/index.js"),
                  m = n("./node_modules/parseqs/index.js"),
                  g = (function (t) {
                    !(function (t, e) {
                      if ("function" != typeof e && null !== e)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                          value: t,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        e && a(t, e);
                    })(y, t);
                    var e,
                      n,
                      h,
                      g,
                      v =
                        ((h = y),
                        (g = (function () {
                          if (
                            "undefined" == typeof Reflect ||
                            !Reflect.construct
                          )
                            return !1;
                          if (Reflect.construct.sham) return !1;
                          if ("function" == typeof Proxy) return !0;
                          try {
                            return (
                              Boolean.prototype.valueOf.call(
                                Reflect.construct(Boolean, [], function () {})
                              ),
                              !0
                            );
                          } catch (t) {
                            return !1;
                          }
                        })()),
                        function () {
                          var t,
                            e = c(h);
                          if (g) {
                            var n = c(this).constructor;
                            t = Reflect.construct(e, arguments, n);
                          } else t = e.apply(this, arguments);
                          return l(this, t);
                        });
                    function y(t) {
                      var e,
                        n =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : {};
                      return (
                        o(this, y),
                        (e = v.call(this)),
                        t && "object" === r(t) && ((n = t), (t = null)),
                        t
                          ? ((t = f(t)),
                            (n.hostname = t.host),
                            (n.secure =
                              "https" === t.protocol || "wss" === t.protocol),
                            (n.port = t.port),
                            t.query && (n.query = t.query))
                          : n.host && (n.hostname = f(n.host).host),
                        (e.secure =
                          null != n.secure
                            ? n.secure
                            : "undefined" != typeof location &&
                              "https:" === location.protocol),
                        n.hostname &&
                          !n.port &&
                          (n.port = e.secure ? "443" : "80"),
                        (e.hostname =
                          n.hostname ||
                          ("undefined" != typeof location
                            ? location.hostname
                            : "localhost")),
                        (e.port =
                          n.port ||
                          ("undefined" != typeof location && location.port
                            ? location.port
                            : e.secure
                            ? 443
                            : 80)),
                        (e.transports = n.transports || [
                          "polling",
                          "websocket",
                        ]),
                        (e.readyState = ""),
                        (e.writeBuffer = []),
                        (e.prevBufferLen = 0),
                        (e.opts = i(
                          {
                            path: "/engine.io",
                            agent: !1,
                            withCredentials: !1,
                            upgrade: !0,
                            jsonp: !0,
                            timestampParam: "t",
                            rememberUpgrade: !1,
                            rejectUnauthorized: !0,
                            perMessageDeflate: { threshold: 1024 },
                            transportOptions: {},
                            closeOnBeforeunload: !0,
                          },
                          n
                        )),
                        (e.opts.path = e.opts.path.replace(/\/$/, "") + "/"),
                        "string" == typeof e.opts.query &&
                          (e.opts.query = m.decode(e.opts.query)),
                        (e.id = null),
                        (e.upgrades = null),
                        (e.pingInterval = null),
                        (e.pingTimeout = null),
                        (e.pingTimeoutTimer = null),
                        "function" == typeof addEventListener &&
                          (e.opts.closeOnBeforeunload &&
                            addEventListener(
                              "beforeunload",
                              function () {
                                e.transport &&
                                  (e.transport.removeAllListeners(),
                                  e.transport.close());
                              },
                              !1
                            ),
                          "localhost" !== e.hostname &&
                            ((e.offlineEventListener = function () {
                              e.onClose("transport close");
                            }),
                            addEventListener(
                              "offline",
                              e.offlineEventListener,
                              !1
                            ))),
                        e.open(),
                        e
                      );
                    }
                    return (
                      (e = y),
                      (n = [
                        {
                          key: "createTransport",
                          value: function (t) {
                            d('creating transport "%s"', t);
                            var e = (function (t) {
                              var e = {};
                              for (var n in t)
                                t.hasOwnProperty(n) && (e[n] = t[n]);
                              return e;
                            })(this.opts.query);
                            (e.EIO = p.protocol),
                              (e.transport = t),
                              this.id && (e.sid = this.id);
                            var n = i(
                              {},
                              this.opts.transportOptions[t],
                              this.opts,
                              {
                                query: e,
                                socket: this,
                                hostname: this.hostname,
                                secure: this.secure,
                                port: this.port,
                              }
                            );
                            return d("options: %j", n), new u[t](n);
                          },
                        },
                        {
                          key: "open",
                          value: function () {
                            var t,
                              e = this;
                            if (
                              this.opts.rememberUpgrade &&
                              y.priorWebsocketSuccess &&
                              -1 !== this.transports.indexOf("websocket")
                            )
                              t = "websocket";
                            else {
                              if (0 === this.transports.length)
                                return void setTimeout(function () {
                                  e.emit("error", "No transports available");
                                }, 0);
                              t = this.transports[0];
                            }
                            this.readyState = "opening";
                            try {
                              t = this.createTransport(t);
                            } catch (t) {
                              return (
                                d("error while creating transport: %s", t),
                                this.transports.shift(),
                                void this.open()
                              );
                            }
                            t.open(), this.setTransport(t);
                          },
                        },
                        {
                          key: "setTransport",
                          value: function (t) {
                            var e = this;
                            d("setting transport %s", t.name),
                              this.transport &&
                                (d(
                                  "clearing existing transport %s",
                                  this.transport.name
                                ),
                                this.transport.removeAllListeners()),
                              (this.transport = t),
                              t
                                .on("drain", this.onDrain.bind(this))
                                .on("packet", this.onPacket.bind(this))
                                .on("error", this.onError.bind(this))
                                .on("close", function () {
                                  e.onClose("transport close");
                                });
                          },
                        },
                        {
                          key: "probe",
                          value: function (t) {
                            var e = this;
                            d('probing transport "%s"', t);
                            var n = this.createTransport(t, { probe: 1 }),
                              i = !1;
                            y.priorWebsocketSuccess = !1;
                            var r = function () {
                              i ||
                                (d('probe transport "%s" opened', t),
                                n.send([{ type: "ping", data: "probe" }]),
                                n.once("packet", function (r) {
                                  if (!i)
                                    if (
                                      "pong" === r.type &&
                                      "probe" === r.data
                                    ) {
                                      if (
                                        (d('probe transport "%s" pong', t),
                                        (e.upgrading = !0),
                                        e.emit("upgrading", n),
                                        !n)
                                      )
                                        return;
                                      (y.priorWebsocketSuccess =
                                        "websocket" === n.name),
                                        d(
                                          'pausing current transport "%s"',
                                          e.transport.name
                                        ),
                                        e.transport.pause(function () {
                                          i ||
                                            ("closed" !== e.readyState &&
                                              (d(
                                                "changing transport and sending upgrade packet"
                                              ),
                                              u(),
                                              e.setTransport(n),
                                              n.send([{ type: "upgrade" }]),
                                              e.emit("upgrade", n),
                                              (n = null),
                                              (e.upgrading = !1),
                                              e.flush()));
                                        });
                                    } else {
                                      d('probe transport "%s" failed', t);
                                      var o = new Error("probe error");
                                      (o.transport = n.name),
                                        e.emit("upgradeError", o);
                                    }
                                }));
                            };
                            function o() {
                              i || ((i = !0), u(), n.close(), (n = null));
                            }
                            var s = function (i) {
                              var r = new Error("probe error: " + i);
                              (r.transport = n.name),
                                o(),
                                d(
                                  'probe transport "%s" failed because of error: %s',
                                  t,
                                  i
                                ),
                                e.emit("upgradeError", r);
                            };
                            function a() {
                              s("transport closed");
                            }
                            function l() {
                              s("socket closed");
                            }
                            function c(t) {
                              n &&
                                t.name !== n.name &&
                                (d(
                                  '"%s" works - aborting "%s"',
                                  t.name,
                                  n.name
                                ),
                                o());
                            }
                            var u = function () {
                              n.removeListener("open", r),
                                n.removeListener("error", s),
                                n.removeListener("close", a),
                                e.removeListener("close", l),
                                e.removeListener("upgrading", c);
                            };
                            n.once("open", r),
                              n.once("error", s),
                              n.once("close", a),
                              this.once("close", l),
                              this.once("upgrading", c),
                              n.open();
                          },
                        },
                        {
                          key: "onOpen",
                          value: function () {
                            if (
                              (d("socket open"),
                              (this.readyState = "open"),
                              (y.priorWebsocketSuccess =
                                "websocket" === this.transport.name),
                              this.emit("open"),
                              this.flush(),
                              "open" === this.readyState &&
                                this.opts.upgrade &&
                                this.transport.pause)
                            ) {
                              d("starting upgrade probes");
                              for (
                                var t = 0, e = this.upgrades.length;
                                t < e;
                                t++
                              )
                                this.probe(this.upgrades[t]);
                            }
                          },
                        },
                        {
                          key: "onPacket",
                          value: function (t) {
                            if (
                              "opening" === this.readyState ||
                              "open" === this.readyState ||
                              "closing" === this.readyState
                            )
                              switch (
                                (d(
                                  'socket receive: type "%s", data "%s"',
                                  t.type,
                                  t.data
                                ),
                                this.emit("packet", t),
                                this.emit("heartbeat"),
                                t.type)
                              ) {
                                case "open":
                                  this.onHandshake(JSON.parse(t.data));
                                  break;
                                case "ping":
                                  this.resetPingTimeout(),
                                    this.sendPacket("pong"),
                                    this.emit("ping"),
                                    this.emit("pong");
                                  break;
                                case "error":
                                  var e = new Error("server error");
                                  (e.code = t.data), this.onError(e);
                                  break;
                                case "message":
                                  this.emit("data", t.data),
                                    this.emit("message", t.data);
                              }
                            else
                              d(
                                'packet received with socket readyState "%s"',
                                this.readyState
                              );
                          },
                        },
                        {
                          key: "onHandshake",
                          value: function (t) {
                            this.emit("handshake", t),
                              (this.id = t.sid),
                              (this.transport.query.sid = t.sid),
                              (this.upgrades = this.filterUpgrades(t.upgrades)),
                              (this.pingInterval = t.pingInterval),
                              (this.pingTimeout = t.pingTimeout),
                              this.onOpen(),
                              "closed" !== this.readyState &&
                                this.resetPingTimeout();
                          },
                        },
                        {
                          key: "resetPingTimeout",
                          value: function () {
                            var t = this;
                            clearTimeout(this.pingTimeoutTimer),
                              (this.pingTimeoutTimer = setTimeout(function () {
                                t.onClose("ping timeout");
                              }, this.pingInterval + this.pingTimeout)),
                              this.opts.autoUnref &&
                                this.pingTimeoutTimer.unref();
                          },
                        },
                        {
                          key: "onDrain",
                          value: function () {
                            this.writeBuffer.splice(0, this.prevBufferLen),
                              (this.prevBufferLen = 0),
                              0 === this.writeBuffer.length
                                ? this.emit("drain")
                                : this.flush();
                          },
                        },
                        {
                          key: "flush",
                          value: function () {
                            "closed" !== this.readyState &&
                              this.transport.writable &&
                              !this.upgrading &&
                              this.writeBuffer.length &&
                              (d(
                                "flushing %d packets in socket",
                                this.writeBuffer.length
                              ),
                              this.transport.send(this.writeBuffer),
                              (this.prevBufferLen = this.writeBuffer.length),
                              this.emit("flush"));
                          },
                        },
                        {
                          key: "write",
                          value: function (t, e, n) {
                            return this.sendPacket("message", t, e, n), this;
                          },
                        },
                        {
                          key: "send",
                          value: function (t, e, n) {
                            return this.sendPacket("message", t, e, n), this;
                          },
                        },
                        {
                          key: "sendPacket",
                          value: function (t, e, n, i) {
                            if (
                              ("function" == typeof e &&
                                ((i = e), (e = void 0)),
                              "function" == typeof n && ((i = n), (n = null)),
                              "closing" !== this.readyState &&
                                "closed" !== this.readyState)
                            ) {
                              (n = n || {}).compress = !1 !== n.compress;
                              var r = { type: t, data: e, options: n };
                              this.emit("packetCreate", r),
                                this.writeBuffer.push(r),
                                i && this.once("flush", i),
                                this.flush();
                            }
                          },
                        },
                        {
                          key: "close",
                          value: function () {
                            var t = this,
                              e = function () {
                                t.onClose("forced close"),
                                  d(
                                    "socket closing - telling transport to close"
                                  ),
                                  t.transport.close();
                              },
                              n = function n() {
                                t.removeListener("upgrade", n),
                                  t.removeListener("upgradeError", n),
                                  e();
                              },
                              i = function () {
                                t.once("upgrade", n), t.once("upgradeError", n);
                              };
                            return (
                              ("opening" !== this.readyState &&
                                "open" !== this.readyState) ||
                                ((this.readyState = "closing"),
                                this.writeBuffer.length
                                  ? this.once("drain", function () {
                                      t.upgrading ? i() : e();
                                    })
                                  : this.upgrading
                                  ? i()
                                  : e()),
                              this
                            );
                          },
                        },
                        {
                          key: "onError",
                          value: function (t) {
                            d("socket error %j", t),
                              (y.priorWebsocketSuccess = !1),
                              this.emit("error", t),
                              this.onClose("transport error", t);
                          },
                        },
                        {
                          key: "onClose",
                          value: function (t, e) {
                            ("opening" !== this.readyState &&
                              "open" !== this.readyState &&
                              "closing" !== this.readyState) ||
                              (d('socket close with reason: "%s"', t),
                              clearTimeout(this.pingIntervalTimer),
                              clearTimeout(this.pingTimeoutTimer),
                              this.transport.removeAllListeners("close"),
                              this.transport.close(),
                              this.transport.removeAllListeners(),
                              "function" == typeof removeEventListener &&
                                removeEventListener(
                                  "offline",
                                  this.offlineEventListener,
                                  !1
                                ),
                              (this.readyState = "closed"),
                              (this.id = null),
                              this.emit("close", t, e),
                              (this.writeBuffer = []),
                              (this.prevBufferLen = 0));
                          },
                        },
                        {
                          key: "filterUpgrades",
                          value: function (t) {
                            for (var e = [], n = 0, i = t.length; n < i; n++)
                              ~this.transports.indexOf(t[n]) && e.push(t[n]);
                            return e;
                          },
                        },
                      ]) && s(e.prototype, n),
                      y
                    );
                  })(h);
                (g.priorWebsocketSuccess = !1),
                  (g.protocol = p.protocol),
                  (t.exports = g);
              },
              "./node_modules/engine.io-client/lib/transport.js": function (
                t,
                e,
                n
              ) {
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                function r(t, e) {
                  for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    (i.enumerable = i.enumerable || !1),
                      (i.configurable = !0),
                      "value" in i && (i.writable = !0),
                      Object.defineProperty(t, i.key, i);
                  }
                }
                function o(t, e) {
                  return (o =
                    Object.setPrototypeOf ||
                    function (t, e) {
                      return (t.__proto__ = e), t;
                    })(t, e);
                }
                function s(t, e) {
                  return !e || ("object" !== i(e) && "function" != typeof e)
                    ? (function (t) {
                        if (void 0 === t)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return t;
                      })(t)
                    : e;
                }
                function a(t) {
                  return (a = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (t) {
                        return t.__proto__ || Object.getPrototypeOf(t);
                      })(t);
                }
                var l = n("./node_modules/engine.io-parser/lib/index.js"),
                  c = n("./node_modules/component-emitter/index.js"),
                  u = n("./node_modules/debug/src/browser.js")(
                    "engine.io-client:transport"
                  ),
                  h = (function (t) {
                    !(function (t, e) {
                      if ("function" != typeof e && null !== e)
                        throw new TypeError(
                          "Super expression must either be null or a function"
                        );
                      (t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                          value: t,
                          writable: !0,
                          configurable: !0,
                        },
                      })),
                        e && o(t, e);
                    })(d, t);
                    var e,
                      n,
                      i,
                      c,
                      h =
                        ((i = d),
                        (c = (function () {
                          if (
                            "undefined" == typeof Reflect ||
                            !Reflect.construct
                          )
                            return !1;
                          if (Reflect.construct.sham) return !1;
                          if ("function" == typeof Proxy) return !0;
                          try {
                            return (
                              Boolean.prototype.valueOf.call(
                                Reflect.construct(Boolean, [], function () {})
                              ),
                              !0
                            );
                          } catch (t) {
                            return !1;
                          }
                        })()),
                        function () {
                          var t,
                            e = a(i);
                          if (c) {
                            var n = a(this).constructor;
                            t = Reflect.construct(e, arguments, n);
                          } else t = e.apply(this, arguments);
                          return s(this, t);
                        });
                    function d(t) {
                      var e;
                      return (
                        (function (t, e) {
                          if (!(t instanceof e))
                            throw new TypeError(
                              "Cannot call a class as a function"
                            );
                        })(this, d),
                        ((e = h.call(this)).opts = t),
                        (e.query = t.query),
                        (e.readyState = ""),
                        (e.socket = t.socket),
                        e
                      );
                    }
                    return (
                      (e = d),
                      (n = [
                        {
                          key: "onError",
                          value: function (t, e) {
                            var n = new Error(t);
                            return (
                              (n.type = "TransportError"),
                              (n.description = e),
                              this.emit("error", n),
                              this
                            );
                          },
                        },
                        {
                          key: "open",
                          value: function () {
                            return (
                              ("closed" !== this.readyState &&
                                "" !== this.readyState) ||
                                ((this.readyState = "opening"), this.doOpen()),
                              this
                            );
                          },
                        },
                        {
                          key: "close",
                          value: function () {
                            return (
                              ("opening" !== this.readyState &&
                                "open" !== this.readyState) ||
                                (this.doClose(), this.onClose()),
                              this
                            );
                          },
                        },
                        {
                          key: "send",
                          value: function (t) {
                            "open" === this.readyState
                              ? this.write(t)
                              : u("transport is not open, discarding packets");
                          },
                        },
                        {
                          key: "onOpen",
                          value: function () {
                            (this.readyState = "open"),
                              (this.writable = !0),
                              this.emit("open");
                          },
                        },
                        {
                          key: "onData",
                          value: function (t) {
                            var e = l.decodePacket(t, this.socket.binaryType);
                            this.onPacket(e);
                          },
                        },
                        {
                          key: "onPacket",
                          value: function (t) {
                            this.emit("packet", t);
                          },
                        },
                        {
                          key: "onClose",
                          value: function () {
                            (this.readyState = "closed"), this.emit("close");
                          },
                        },
                      ]) && r(e.prototype, n),
                      d
                    );
                  })(c);
                t.exports = h;
              },
              "./node_modules/engine.io-client/lib/transports/index.js":
                function (t, e, n) {
                  var i = n(
                      "./node_modules/engine.io-client/lib/xmlhttprequest.js"
                    ),
                    r = n(
                      "./node_modules/engine.io-client/lib/transports/polling-xhr.js"
                    ),
                    o = n(
                      "./node_modules/engine.io-client/lib/transports/polling-jsonp.js"
                    ),
                    s = n(
                      "./node_modules/engine.io-client/lib/transports/websocket.js"
                    );
                  (e.polling = function (t) {
                    var e = !1,
                      n = !1,
                      s = !1 !== t.jsonp;
                    if ("undefined" != typeof location) {
                      var a = "https:" === location.protocol,
                        l = location.port;
                      l || (l = a ? 443 : 80),
                        (e = t.hostname !== location.hostname || l !== t.port),
                        (n = t.secure !== a);
                    }
                    if (
                      ((t.xdomain = e),
                      (t.xscheme = n),
                      "open" in new i(t) && !t.forceJSONP)
                    )
                      return new r(t);
                    if (!s) throw new Error("JSONP disabled");
                    return new o(t);
                  }),
                    (e.websocket = s);
                },
              "./node_modules/engine.io-client/lib/transports/polling-jsonp.js":
                function (t, e, n) {
                  function i(t) {
                    return (i =
                      "function" == typeof Symbol &&
                      "symbol" == typeof Symbol.iterator
                        ? function (t) {
                            return typeof t;
                          }
                        : function (t) {
                            return t &&
                              "function" == typeof Symbol &&
                              t.constructor === Symbol &&
                              t !== Symbol.prototype
                              ? "symbol"
                              : typeof t;
                          })(t);
                  }
                  function r(t, e) {
                    for (var n = 0; n < e.length; n++) {
                      var i = e[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(t, i.key, i);
                    }
                  }
                  function o(t, e, n) {
                    return (o =
                      "undefined" != typeof Reflect && Reflect.get
                        ? Reflect.get
                        : function (t, e, n) {
                            var i = (function (t, e) {
                              for (
                                ;
                                !Object.prototype.hasOwnProperty.call(t, e) &&
                                null !== (t = c(t));

                              );
                              return t;
                            })(t, e);
                            if (i) {
                              var r = Object.getOwnPropertyDescriptor(i, e);
                              return r.get ? r.get.call(n) : r.value;
                            }
                          })(t, e, n || t);
                  }
                  function s(t, e) {
                    return (s =
                      Object.setPrototypeOf ||
                      function (t, e) {
                        return (t.__proto__ = e), t;
                      })(t, e);
                  }
                  function a(t, e) {
                    return !e || ("object" !== i(e) && "function" != typeof e)
                      ? l(t)
                      : e;
                  }
                  function l(t) {
                    if (void 0 === t)
                      throw new ReferenceError(
                        "this hasn't been initialised - super() hasn't been called"
                      );
                    return t;
                  }
                  function c(t) {
                    return (c = Object.setPrototypeOf
                      ? Object.getPrototypeOf
                      : function (t) {
                          return t.__proto__ || Object.getPrototypeOf(t);
                        })(t);
                  }
                  var u,
                    h = n(
                      "./node_modules/engine.io-client/lib/transports/polling.js"
                    ),
                    d = n(
                      "./node_modules/engine.io-client/lib/globalThis.browser.js"
                    ),
                    p = /\n/g,
                    f = /\\n/g,
                    m = (function (t) {
                      !(function (t, e) {
                        if ("function" != typeof e && null !== e)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (t.prototype = Object.create(e && e.prototype, {
                          constructor: {
                            value: t,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          e && s(t, e);
                      })(g, t);
                      var e,
                        n,
                        i,
                        h,
                        m =
                          ((i = g),
                          (h = (function () {
                            if (
                              "undefined" == typeof Reflect ||
                              !Reflect.construct
                            )
                              return !1;
                            if (Reflect.construct.sham) return !1;
                            if ("function" == typeof Proxy) return !0;
                            try {
                              return (
                                Boolean.prototype.valueOf.call(
                                  Reflect.construct(Boolean, [], function () {})
                                ),
                                !0
                              );
                            } catch (t) {
                              return !1;
                            }
                          })()),
                          function () {
                            var t,
                              e = c(i);
                            if (h) {
                              var n = c(this).constructor;
                              t = Reflect.construct(e, arguments, n);
                            } else t = e.apply(this, arguments);
                            return a(this, t);
                          });
                      function g(t) {
                        var e;
                        return (
                          (function (t, e) {
                            if (!(t instanceof e))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, g),
                          ((e = m.call(this, t)).query = e.query || {}),
                          u || (u = d.___eio = d.___eio || []),
                          (e.index = u.length),
                          u.push(e.onData.bind(l(e))),
                          (e.query.j = e.index),
                          e
                        );
                      }
                      return (
                        (e = g),
                        (n = [
                          {
                            key: "supportsBinary",
                            get: function () {
                              return !1;
                            },
                          },
                          {
                            key: "doClose",
                            value: function () {
                              this.script &&
                                ((this.script.onerror = function () {}),
                                this.script.parentNode.removeChild(this.script),
                                (this.script = null)),
                                this.form &&
                                  (this.form.parentNode.removeChild(this.form),
                                  (this.form = null),
                                  (this.iframe = null)),
                                o(c(g.prototype), "doClose", this).call(this);
                            },
                          },
                          {
                            key: "doPoll",
                            value: function () {
                              var t = this,
                                e = document.createElement("script");
                              this.script &&
                                (this.script.parentNode.removeChild(
                                  this.script
                                ),
                                (this.script = null)),
                                (e.async = !0),
                                (e.src = this.uri()),
                                (e.onerror = function (e) {
                                  t.onError("jsonp poll error", e);
                                });
                              var n =
                                document.getElementsByTagName("script")[0];
                              n
                                ? n.parentNode.insertBefore(e, n)
                                : (document.head || document.body).appendChild(
                                    e
                                  ),
                                (this.script = e),
                                "undefined" != typeof navigator &&
                                  /gecko/i.test(navigator.userAgent) &&
                                  setTimeout(function () {
                                    var t = document.createElement("iframe");
                                    document.body.appendChild(t),
                                      document.body.removeChild(t);
                                  }, 100);
                            },
                          },
                          {
                            key: "doWrite",
                            value: function (t, e) {
                              var n,
                                i = this;
                              if (!this.form) {
                                var r = document.createElement("form"),
                                  o = document.createElement("textarea"),
                                  s = (this.iframeId =
                                    "eio_iframe_" + this.index);
                                (r.className = "socketio"),
                                  (r.style.position = "absolute"),
                                  (r.style.top = "-1000px"),
                                  (r.style.left = "-1000px"),
                                  (r.target = s),
                                  (r.method = "POST"),
                                  r.setAttribute("accept-charset", "utf-8"),
                                  (o.name = "d"),
                                  r.appendChild(o),
                                  document.body.appendChild(r),
                                  (this.form = r),
                                  (this.area = o);
                              }
                              function a() {
                                l(), e();
                              }
                              this.form.action = this.uri();
                              var l = function () {
                                if (i.iframe)
                                  try {
                                    i.form.removeChild(i.iframe);
                                  } catch (t) {
                                    i.onError(
                                      "jsonp polling iframe removal error",
                                      t
                                    );
                                  }
                                try {
                                  var t =
                                    '<iframe src="javascript:0" name="' +
                                    i.iframeId +
                                    '">';
                                  n = document.createElement(t);
                                } catch (t) {
                                  ((n = document.createElement("iframe")).name =
                                    i.iframeId),
                                    (n.src = "javascript:0");
                                }
                                (n.id = i.iframeId),
                                  i.form.appendChild(n),
                                  (i.iframe = n);
                              };
                              l(),
                                (t = t.replace(f, "\\\n")),
                                (this.area.value = t.replace(p, "\\n"));
                              try {
                                this.form.submit();
                              } catch (t) {}
                              this.iframe.attachEvent
                                ? (this.iframe.onreadystatechange =
                                    function () {
                                      "complete" === i.iframe.readyState && a();
                                    })
                                : (this.iframe.onload = a);
                            },
                          },
                        ]) && r(e.prototype, n),
                        g
                      );
                    })(h);
                  t.exports = m;
                },
              "./node_modules/engine.io-client/lib/transports/polling-xhr.js":
                function (t, e, n) {
                  function i(t) {
                    return (i =
                      "function" == typeof Symbol &&
                      "symbol" == typeof Symbol.iterator
                        ? function (t) {
                            return typeof t;
                          }
                        : function (t) {
                            return t &&
                              "function" == typeof Symbol &&
                              t.constructor === Symbol &&
                              t !== Symbol.prototype
                              ? "symbol"
                              : typeof t;
                          })(t);
                  }
                  function r() {
                    return (r =
                      Object.assign ||
                      function (t) {
                        for (var e = 1; e < arguments.length; e++) {
                          var n = arguments[e];
                          for (var i in n)
                            Object.prototype.hasOwnProperty.call(n, i) &&
                              (t[i] = n[i]);
                        }
                        return t;
                      }).apply(this, arguments);
                  }
                  function o(t, e) {
                    if (!(t instanceof e))
                      throw new TypeError("Cannot call a class as a function");
                  }
                  function s(t, e) {
                    for (var n = 0; n < e.length; n++) {
                      var i = e[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(t, i.key, i);
                    }
                  }
                  function a(t, e, n) {
                    return e && s(t.prototype, e), n && s(t, n), t;
                  }
                  function l(t, e) {
                    if ("function" != typeof e && null !== e)
                      throw new TypeError(
                        "Super expression must either be null or a function"
                      );
                    (t.prototype = Object.create(e && e.prototype, {
                      constructor: { value: t, writable: !0, configurable: !0 },
                    })),
                      e && c(t, e);
                  }
                  function c(t, e) {
                    return (c =
                      Object.setPrototypeOf ||
                      function (t, e) {
                        return (t.__proto__ = e), t;
                      })(t, e);
                  }
                  function u(t) {
                    var e = (function () {
                      if ("undefined" == typeof Reflect || !Reflect.construct)
                        return !1;
                      if (Reflect.construct.sham) return !1;
                      if ("function" == typeof Proxy) return !0;
                      try {
                        return (
                          Boolean.prototype.valueOf.call(
                            Reflect.construct(Boolean, [], function () {})
                          ),
                          !0
                        );
                      } catch (t) {
                        return !1;
                      }
                    })();
                    return function () {
                      var n,
                        i = d(t);
                      if (e) {
                        var r = d(this).constructor;
                        n = Reflect.construct(i, arguments, r);
                      } else n = i.apply(this, arguments);
                      return h(this, n);
                    };
                  }
                  function h(t, e) {
                    return !e || ("object" !== i(e) && "function" != typeof e)
                      ? (function (t) {
                          if (void 0 === t)
                            throw new ReferenceError(
                              "this hasn't been initialised - super() hasn't been called"
                            );
                          return t;
                        })(t)
                      : e;
                  }
                  function d(t) {
                    return (d = Object.setPrototypeOf
                      ? Object.getPrototypeOf
                      : function (t) {
                          return t.__proto__ || Object.getPrototypeOf(t);
                        })(t);
                  }
                  var p = n(
                      "./node_modules/engine.io-client/lib/xmlhttprequest.js"
                    ),
                    f = n(
                      "./node_modules/engine.io-client/lib/transports/polling.js"
                    ),
                    m = n("./node_modules/component-emitter/index.js"),
                    g = n("./node_modules/engine.io-client/lib/util.js").pick,
                    v = n(
                      "./node_modules/engine.io-client/lib/globalThis.browser.js"
                    ),
                    y = n("./node_modules/debug/src/browser.js")(
                      "engine.io-client:polling-xhr"
                    );
                  function x() {}
                  var _ = null != new p({ xdomain: !1 }).responseType,
                    b = (function (t) {
                      l(n, t);
                      var e = u(n);
                      function n(t) {
                        var i;
                        if (
                          (o(this, n),
                          (i = e.call(this, t)),
                          "undefined" != typeof location)
                        ) {
                          var r = "https:" === location.protocol,
                            s = location.port;
                          s || (s = r ? 443 : 80),
                            (i.xd =
                              ("undefined" != typeof location &&
                                t.hostname !== location.hostname) ||
                              s !== t.port),
                            (i.xs = t.secure !== r);
                        }
                        var a = t && t.forceBase64;
                        return (i.supportsBinary = _ && !a), i;
                      }
                      return (
                        a(n, [
                          {
                            key: "request",
                            value: function () {
                              var t =
                                arguments.length > 0 && void 0 !== arguments[0]
                                  ? arguments[0]
                                  : {};
                              return (
                                r(t, { xd: this.xd, xs: this.xs }, this.opts),
                                new w(this.uri(), t)
                              );
                            },
                          },
                          {
                            key: "doWrite",
                            value: function (t, e) {
                              var n = this,
                                i = this.request({ method: "POST", data: t });
                              i.on("success", e),
                                i.on("error", function (t) {
                                  n.onError("xhr post error", t);
                                });
                            },
                          },
                          {
                            key: "doPoll",
                            value: function () {
                              var t = this;
                              y("xhr poll");
                              var e = this.request();
                              e.on("data", this.onData.bind(this)),
                                e.on("error", function (e) {
                                  t.onError("xhr poll error", e);
                                }),
                                (this.pollXhr = e);
                            },
                          },
                        ]),
                        n
                      );
                    })(f),
                    w = (function (t) {
                      l(n, t);
                      var e = u(n);
                      function n(t, i) {
                        var r;
                        return (
                          o(this, n),
                          ((r = e.call(this)).opts = i),
                          (r.method = i.method || "GET"),
                          (r.uri = t),
                          (r.async = !1 !== i.async),
                          (r.data = void 0 !== i.data ? i.data : null),
                          r.create(),
                          r
                        );
                      }
                      return (
                        a(n, [
                          {
                            key: "create",
                            value: function () {
                              var t = this,
                                e = g(
                                  this.opts,
                                  "agent",
                                  "enablesXDR",
                                  "pfx",
                                  "key",
                                  "passphrase",
                                  "cert",
                                  "ca",
                                  "ciphers",
                                  "rejectUnauthorized",
                                  "autoUnref"
                                );
                              (e.xdomain = !!this.opts.xd),
                                (e.xscheme = !!this.opts.xs);
                              var i = (this.xhr = new p(e));
                              try {
                                y("xhr open %s: %s", this.method, this.uri),
                                  i.open(this.method, this.uri, this.async);
                                try {
                                  if (this.opts.extraHeaders)
                                    for (var r in (i.setDisableHeaderCheck &&
                                      i.setDisableHeaderCheck(!0),
                                    this.opts.extraHeaders))
                                      this.opts.extraHeaders.hasOwnProperty(
                                        r
                                      ) &&
                                        i.setRequestHeader(
                                          r,
                                          this.opts.extraHeaders[r]
                                        );
                                } catch (t) {}
                                if ("POST" === this.method)
                                  try {
                                    i.setRequestHeader(
                                      "Content-type",
                                      "text/plain;charset=UTF-8"
                                    );
                                  } catch (t) {}
                                try {
                                  i.setRequestHeader("Accept", "*/*");
                                } catch (t) {}
                                "withCredentials" in i &&
                                  (i.withCredentials =
                                    this.opts.withCredentials),
                                  this.opts.requestTimeout &&
                                    (i.timeout = this.opts.requestTimeout),
                                  this.hasXDR()
                                    ? ((i.onload = function () {
                                        t.onLoad();
                                      }),
                                      (i.onerror = function () {
                                        t.onError(i.responseText);
                                      }))
                                    : (i.onreadystatechange = function () {
                                        4 === i.readyState &&
                                          (200 === i.status || 1223 === i.status
                                            ? t.onLoad()
                                            : setTimeout(function () {
                                                t.onError(
                                                  "number" == typeof i.status
                                                    ? i.status
                                                    : 0
                                                );
                                              }, 0));
                                      }),
                                  y("xhr data %s", this.data),
                                  i.send(this.data);
                              } catch (e) {
                                return void setTimeout(function () {
                                  t.onError(e);
                                }, 0);
                              }
                              "undefined" != typeof document &&
                                ((this.index = n.requestsCount++),
                                (n.requests[this.index] = this));
                            },
                          },
                          {
                            key: "onSuccess",
                            value: function () {
                              this.emit("success"), this.cleanup();
                            },
                          },
                          {
                            key: "onData",
                            value: function (t) {
                              this.emit("data", t), this.onSuccess();
                            },
                          },
                          {
                            key: "onError",
                            value: function (t) {
                              this.emit("error", t), this.cleanup(!0);
                            },
                          },
                          {
                            key: "cleanup",
                            value: function (t) {
                              if (void 0 !== this.xhr && null !== this.xhr) {
                                if (
                                  (this.hasXDR()
                                    ? (this.xhr.onload = this.xhr.onerror = x)
                                    : (this.xhr.onreadystatechange = x),
                                  t)
                                )
                                  try {
                                    this.xhr.abort();
                                  } catch (t) {}
                                "undefined" != typeof document &&
                                  delete n.requests[this.index],
                                  (this.xhr = null);
                              }
                            },
                          },
                          {
                            key: "onLoad",
                            value: function () {
                              var t = this.xhr.responseText;
                              null !== t && this.onData(t);
                            },
                          },
                          {
                            key: "hasXDR",
                            value: function () {
                              return (
                                "undefined" != typeof XDomainRequest &&
                                !this.xs &&
                                this.enablesXDR
                              );
                            },
                          },
                          {
                            key: "abort",
                            value: function () {
                              this.cleanup();
                            },
                          },
                        ]),
                        n
                      );
                    })(m);
                  function M() {
                    for (var t in w.requests)
                      w.requests.hasOwnProperty(t) && w.requests[t].abort();
                  }
                  (w.requestsCount = 0),
                    (w.requests = {}),
                    "undefined" != typeof document &&
                      ("function" == typeof attachEvent
                        ? attachEvent("onunload", M)
                        : "function" == typeof addEventListener &&
                          addEventListener(
                            "onpagehide" in v ? "pagehide" : "unload",
                            M,
                            !1
                          )),
                    (t.exports = b),
                    (t.exports.Request = w);
                },
              "./node_modules/engine.io-client/lib/transports/polling.js":
                function (t, e, n) {
                  function i(t) {
                    return (i =
                      "function" == typeof Symbol &&
                      "symbol" == typeof Symbol.iterator
                        ? function (t) {
                            return typeof t;
                          }
                        : function (t) {
                            return t &&
                              "function" == typeof Symbol &&
                              t.constructor === Symbol &&
                              t !== Symbol.prototype
                              ? "symbol"
                              : typeof t;
                          })(t);
                  }
                  function r(t, e) {
                    if (!(t instanceof e))
                      throw new TypeError("Cannot call a class as a function");
                  }
                  function o(t, e) {
                    for (var n = 0; n < e.length; n++) {
                      var i = e[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(t, i.key, i);
                    }
                  }
                  function s(t, e) {
                    return (s =
                      Object.setPrototypeOf ||
                      function (t, e) {
                        return (t.__proto__ = e), t;
                      })(t, e);
                  }
                  function a(t, e) {
                    return !e || ("object" !== i(e) && "function" != typeof e)
                      ? (function (t) {
                          if (void 0 === t)
                            throw new ReferenceError(
                              "this hasn't been initialised - super() hasn't been called"
                            );
                          return t;
                        })(t)
                      : e;
                  }
                  function l(t) {
                    return (l = Object.setPrototypeOf
                      ? Object.getPrototypeOf
                      : function (t) {
                          return t.__proto__ || Object.getPrototypeOf(t);
                        })(t);
                  }
                  var c = n("./node_modules/engine.io-client/lib/transport.js"),
                    u = n("./node_modules/parseqs/index.js"),
                    h = n("./node_modules/engine.io-parser/lib/index.js"),
                    d = n("./node_modules/yeast/index.js"),
                    p = n("./node_modules/debug/src/browser.js")(
                      "engine.io-client:polling"
                    ),
                    f = (function (t) {
                      !(function (t, e) {
                        if ("function" != typeof e && null !== e)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (t.prototype = Object.create(e && e.prototype, {
                          constructor: {
                            value: t,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          e && s(t, e);
                      })(m, t);
                      var e,
                        n,
                        i,
                        c,
                        f =
                          ((i = m),
                          (c = (function () {
                            if (
                              "undefined" == typeof Reflect ||
                              !Reflect.construct
                            )
                              return !1;
                            if (Reflect.construct.sham) return !1;
                            if ("function" == typeof Proxy) return !0;
                            try {
                              return (
                                Boolean.prototype.valueOf.call(
                                  Reflect.construct(Boolean, [], function () {})
                                ),
                                !0
                              );
                            } catch (t) {
                              return !1;
                            }
                          })()),
                          function () {
                            var t,
                              e = l(i);
                            if (c) {
                              var n = l(this).constructor;
                              t = Reflect.construct(e, arguments, n);
                            } else t = e.apply(this, arguments);
                            return a(this, t);
                          });
                      function m() {
                        return r(this, m), f.apply(this, arguments);
                      }
                      return (
                        (e = m),
                        (n = [
                          {
                            key: "name",
                            get: function () {
                              return "polling";
                            },
                          },
                          {
                            key: "doOpen",
                            value: function () {
                              this.poll();
                            },
                          },
                          {
                            key: "pause",
                            value: function (t) {
                              var e = this;
                              this.readyState = "pausing";
                              var n = function () {
                                p("paused"), (e.readyState = "paused"), t();
                              };
                              if (this.polling || !this.writable) {
                                var i = 0;
                                this.polling &&
                                  (p(
                                    "we are currently polling - waiting to pause"
                                  ),
                                  i++,
                                  this.once("pollComplete", function () {
                                    p("pre-pause polling complete"), --i || n();
                                  })),
                                  this.writable ||
                                    (p(
                                      "we are currently writing - waiting to pause"
                                    ),
                                    i++,
                                    this.once("drain", function () {
                                      p("pre-pause writing complete"),
                                        --i || n();
                                    }));
                              } else n();
                            },
                          },
                          {
                            key: "poll",
                            value: function () {
                              p("polling"),
                                (this.polling = !0),
                                this.doPoll(),
                                this.emit("poll");
                            },
                          },
                          {
                            key: "onData",
                            value: function (t) {
                              var e = this;
                              p("polling got data %s", t),
                                h
                                  .decodePayload(t, this.socket.binaryType)
                                  .forEach(function (t) {
                                    if (
                                      ("opening" === e.readyState &&
                                        "open" === t.type &&
                                        e.onOpen(),
                                      "close" === t.type)
                                    )
                                      return e.onClose(), !1;
                                    e.onPacket(t);
                                  }),
                                "closed" !== this.readyState &&
                                  ((this.polling = !1),
                                  this.emit("pollComplete"),
                                  "open" === this.readyState
                                    ? this.poll()
                                    : p(
                                        'ignoring poll - transport state "%s"',
                                        this.readyState
                                      ));
                            },
                          },
                          {
                            key: "doClose",
                            value: function () {
                              var t = this,
                                e = function () {
                                  p("writing close packet"),
                                    t.write([{ type: "close" }]);
                                };
                              "open" === this.readyState
                                ? (p("transport open - closing"), e())
                                : (p("transport not open - deferring close"),
                                  this.once("open", e));
                            },
                          },
                          {
                            key: "write",
                            value: function (t) {
                              var e = this;
                              (this.writable = !1),
                                h.encodePayload(t, function (t) {
                                  e.doWrite(t, function () {
                                    (e.writable = !0), e.emit("drain");
                                  });
                                });
                            },
                          },
                          {
                            key: "uri",
                            value: function () {
                              var t = this.query || {},
                                e = this.opts.secure ? "https" : "http",
                                n = "";
                              return (
                                !1 !== this.opts.timestampRequests &&
                                  (t[this.opts.timestampParam] = d()),
                                this.supportsBinary || t.sid || (t.b64 = 1),
                                (t = u.encode(t)),
                                this.opts.port &&
                                  (("https" === e &&
                                    443 !== Number(this.opts.port)) ||
                                    ("http" === e &&
                                      80 !== Number(this.opts.port))) &&
                                  (n = ":" + this.opts.port),
                                t.length && (t = "?" + t),
                                e +
                                  "://" +
                                  (-1 !== this.opts.hostname.indexOf(":")
                                    ? "[" + this.opts.hostname + "]"
                                    : this.opts.hostname) +
                                  n +
                                  this.opts.path +
                                  t
                              );
                            },
                          },
                        ]) && o(e.prototype, n),
                        m
                      );
                    })(c);
                  t.exports = f;
                },
              "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js":
                function (t, e, n) {
                  var i = n(
                      "./node_modules/engine.io-client/lib/globalThis.browser.js"
                    ),
                    r =
                      "function" == typeof Promise &&
                      "function" == typeof Promise.resolve
                        ? function (t) {
                            return Promise.resolve().then(t);
                          }
                        : function (t) {
                            return setTimeout(t, 0);
                          };
                  t.exports = {
                    WebSocket: i.WebSocket || i.MozWebSocket,
                    usingBrowserWebSocket: !0,
                    defaultBinaryType: "arraybuffer",
                    nextTick: r,
                  };
                },
              "./node_modules/engine.io-client/lib/transports/websocket.js":
                function (t, e, n) {
                  function i(t) {
                    return (i =
                      "function" == typeof Symbol &&
                      "symbol" == typeof Symbol.iterator
                        ? function (t) {
                            return typeof t;
                          }
                        : function (t) {
                            return t &&
                              "function" == typeof Symbol &&
                              t.constructor === Symbol &&
                              t !== Symbol.prototype
                              ? "symbol"
                              : typeof t;
                          })(t);
                  }
                  function r(t, e) {
                    for (var n = 0; n < e.length; n++) {
                      var i = e[n];
                      (i.enumerable = i.enumerable || !1),
                        (i.configurable = !0),
                        "value" in i && (i.writable = !0),
                        Object.defineProperty(t, i.key, i);
                    }
                  }
                  function o(t, e) {
                    return (o =
                      Object.setPrototypeOf ||
                      function (t, e) {
                        return (t.__proto__ = e), t;
                      })(t, e);
                  }
                  function s(t, e) {
                    return !e || ("object" !== i(e) && "function" != typeof e)
                      ? (function (t) {
                          if (void 0 === t)
                            throw new ReferenceError(
                              "this hasn't been initialised - super() hasn't been called"
                            );
                          return t;
                        })(t)
                      : e;
                  }
                  function a(t) {
                    return (a = Object.setPrototypeOf
                      ? Object.getPrototypeOf
                      : function (t) {
                          return t.__proto__ || Object.getPrototypeOf(t);
                        })(t);
                  }
                  var l = n("./node_modules/engine.io-client/lib/transport.js"),
                    c = n("./node_modules/engine.io-parser/lib/index.js"),
                    u = n("./node_modules/parseqs/index.js"),
                    h = n("./node_modules/yeast/index.js"),
                    d = n("./node_modules/engine.io-client/lib/util.js").pick,
                    p = n(
                      "./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js"
                    ),
                    f = p.WebSocket,
                    m = p.usingBrowserWebSocket,
                    g = p.defaultBinaryType,
                    v = p.nextTick,
                    y = n("./node_modules/debug/src/browser.js")(
                      "engine.io-client:websocket"
                    ),
                    x =
                      "undefined" != typeof navigator &&
                      "string" == typeof navigator.product &&
                      "reactnative" === navigator.product.toLowerCase(),
                    _ = (function (t) {
                      !(function (t, e) {
                        if ("function" != typeof e && null !== e)
                          throw new TypeError(
                            "Super expression must either be null or a function"
                          );
                        (t.prototype = Object.create(e && e.prototype, {
                          constructor: {
                            value: t,
                            writable: !0,
                            configurable: !0,
                          },
                        })),
                          e && o(t, e);
                      })(b, t);
                      var e,
                        n,
                        i,
                        p,
                        _ =
                          ((i = b),
                          (p = (function () {
                            if (
                              "undefined" == typeof Reflect ||
                              !Reflect.construct
                            )
                              return !1;
                            if (Reflect.construct.sham) return !1;
                            if ("function" == typeof Proxy) return !0;
                            try {
                              return (
                                Boolean.prototype.valueOf.call(
                                  Reflect.construct(Boolean, [], function () {})
                                ),
                                !0
                              );
                            } catch (t) {
                              return !1;
                            }
                          })()),
                          function () {
                            var t,
                              e = a(i);
                            if (p) {
                              var n = a(this).constructor;
                              t = Reflect.construct(e, arguments, n);
                            } else t = e.apply(this, arguments);
                            return s(this, t);
                          });
                      function b(t) {
                        var e;
                        return (
                          (function (t, e) {
                            if (!(t instanceof e))
                              throw new TypeError(
                                "Cannot call a class as a function"
                              );
                          })(this, b),
                          ((e = _.call(this, t)).supportsBinary =
                            !t.forceBase64),
                          e
                        );
                      }
                      return (
                        (e = b),
                        (n = [
                          {
                            key: "name",
                            get: function () {
                              return "websocket";
                            },
                          },
                          {
                            key: "doOpen",
                            value: function () {
                              if (this.check()) {
                                var t = this.uri(),
                                  e = this.opts.protocols,
                                  n = x
                                    ? {}
                                    : d(
                                        this.opts,
                                        "agent",
                                        "perMessageDeflate",
                                        "pfx",
                                        "key",
                                        "passphrase",
                                        "cert",
                                        "ca",
                                        "ciphers",
                                        "rejectUnauthorized",
                                        "localAddress",
                                        "protocolVersion",
                                        "origin",
                                        "maxPayload",
                                        "family",
                                        "checkServerIdentity"
                                      );
                                this.opts.extraHeaders &&
                                  (n.headers = this.opts.extraHeaders);
                                try {
                                  this.ws =
                                    m && !x
                                      ? e
                                        ? new f(t, e)
                                        : new f(t)
                                      : new f(t, e, n);
                                } catch (t) {
                                  return this.emit("error", t);
                                }
                                (this.ws.binaryType =
                                  this.socket.binaryType || g),
                                  this.addEventListeners();
                              }
                            },
                          },
                          {
                            key: "addEventListeners",
                            value: function () {
                              var t = this;
                              (this.ws.onopen = function () {
                                t.opts.autoUnref && t.ws._socket.unref(),
                                  t.onOpen();
                              }),
                                (this.ws.onclose = this.onClose.bind(this)),
                                (this.ws.onmessage = function (e) {
                                  return t.onData(e.data);
                                }),
                                (this.ws.onerror = function (e) {
                                  return t.onError("websocket error", e);
                                });
                            },
                          },
                          {
                            key: "write",
                            value: function (t) {
                              var e = this;
                              this.writable = !1;
                              for (
                                var n = function (n) {
                                    var i = t[n],
                                      r = n === t.length - 1;
                                    c.encodePacket(
                                      i,
                                      e.supportsBinary,
                                      function (t) {
                                        var n = {};
                                        m ||
                                          (i.options &&
                                            (n.compress = i.options.compress),
                                          e.opts.perMessageDeflate &&
                                            ("string" == typeof t
                                              ? Buffer.byteLength(t)
                                              : t.length) <
                                              e.opts.perMessageDeflate
                                                .threshold &&
                                            (n.compress = !1));
                                        try {
                                          m ? e.ws.send(t) : e.ws.send(t, n);
                                        } catch (t) {
                                          y(
                                            "websocket closed before onclose event"
                                          );
                                        }
                                        r &&
                                          v(function () {
                                            (e.writable = !0), e.emit("drain");
                                          });
                                      }
                                    );
                                  },
                                  i = 0;
                                i < t.length;
                                i++
                              )
                                n(i);
                            },
                          },
                          {
                            key: "onClose",
                            value: function () {
                              l.prototype.onClose.call(this);
                            },
                          },
                          {
                            key: "doClose",
                            value: function () {
                              void 0 !== this.ws &&
                                (this.ws.close(), (this.ws = null));
                            },
                          },
                          {
                            key: "uri",
                            value: function () {
                              var t = this.query || {},
                                e = this.opts.secure ? "wss" : "ws",
                                n = "";
                              return (
                                this.opts.port &&
                                  (("wss" === e &&
                                    443 !== Number(this.opts.port)) ||
                                    ("ws" === e &&
                                      80 !== Number(this.opts.port))) &&
                                  (n = ":" + this.opts.port),
                                this.opts.timestampRequests &&
                                  (t[this.opts.timestampParam] = h()),
                                this.supportsBinary || (t.b64 = 1),
                                (t = u.encode(t)).length && (t = "?" + t),
                                e +
                                  "://" +
                                  (-1 !== this.opts.hostname.indexOf(":")
                                    ? "[" + this.opts.hostname + "]"
                                    : this.opts.hostname) +
                                  n +
                                  this.opts.path +
                                  t
                              );
                            },
                          },
                          {
                            key: "check",
                            value: function () {
                              return !(
                                !f ||
                                ("__initialize" in f &&
                                  this.name === b.prototype.name)
                              );
                            },
                          },
                        ]) && r(e.prototype, n),
                        b
                      );
                    })(l);
                  t.exports = _;
                },
              "./node_modules/engine.io-client/lib/util.js": function (t, e) {
                t.exports.pick = function (t) {
                  for (
                    var e = arguments.length,
                      n = new Array(e > 1 ? e - 1 : 0),
                      i = 1;
                    i < e;
                    i++
                  )
                    n[i - 1] = arguments[i];
                  return n.reduce(function (e, n) {
                    return t.hasOwnProperty(n) && (e[n] = t[n]), e;
                  }, {});
                };
              },
              "./node_modules/engine.io-client/lib/xmlhttprequest.js":
                function (t, e, n) {
                  var i = n("./node_modules/has-cors/index.js"),
                    r = n(
                      "./node_modules/engine.io-client/lib/globalThis.browser.js"
                    );
                  t.exports = function (t) {
                    var e = t.xdomain,
                      n = t.xscheme,
                      o = t.enablesXDR;
                    try {
                      if ("undefined" != typeof XMLHttpRequest && (!e || i))
                        return new XMLHttpRequest();
                    } catch (t) {}
                    try {
                      if ("undefined" != typeof XDomainRequest && !n && o)
                        return new XDomainRequest();
                    } catch (t) {}
                    if (!e)
                      try {
                        return new r[["Active"].concat("Object").join("X")](
                          "Microsoft.XMLHTTP"
                        );
                      } catch (t) {}
                  };
                },
              "./node_modules/engine.io-parser/lib/commons.js": function (
                t,
                e
              ) {
                var n = Object.create(null);
                (n.open = "0"),
                  (n.close = "1"),
                  (n.ping = "2"),
                  (n.pong = "3"),
                  (n.message = "4"),
                  (n.upgrade = "5"),
                  (n.noop = "6");
                var i = Object.create(null);
                Object.keys(n).forEach(function (t) {
                  i[n[t]] = t;
                }),
                  (t.exports = {
                    PACKET_TYPES: n,
                    PACKET_TYPES_REVERSE: i,
                    ERROR_PACKET: { type: "error", data: "parser error" },
                  });
              },
              "./node_modules/engine.io-parser/lib/decodePacket.browser.js":
                function (t, e, n) {
                  var i,
                    r = n("./node_modules/engine.io-parser/lib/commons.js"),
                    o = r.PACKET_TYPES_REVERSE,
                    s = r.ERROR_PACKET;
                  "function" == typeof ArrayBuffer &&
                    (i = n(
                      "./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"
                    ));
                  var a = function (t, e) {
                      if (i) {
                        var n = i.decode(t);
                        return l(n, e);
                      }
                      return { base64: !0, data: t };
                    },
                    l = function (t, e) {
                      switch (e) {
                        case "blob":
                          return t instanceof ArrayBuffer ? new Blob([t]) : t;
                        case "arraybuffer":
                        default:
                          return t;
                      }
                    };
                  t.exports = function (t, e) {
                    if ("string" != typeof t)
                      return { type: "message", data: l(t, e) };
                    var n = t.charAt(0);
                    return "b" === n
                      ? { type: "message", data: a(t.substring(1), e) }
                      : o[n]
                      ? t.length > 1
                        ? { type: o[n], data: t.substring(1) }
                        : { type: o[n] }
                      : s;
                  };
                },
              "./node_modules/engine.io-parser/lib/encodePacket.browser.js":
                function (t, e, n) {
                  var i = n(
                      "./node_modules/engine.io-parser/lib/commons.js"
                    ).PACKET_TYPES,
                    r =
                      "function" == typeof Blob ||
                      ("undefined" != typeof Blob &&
                        "[object BlobConstructor]" ===
                          Object.prototype.toString.call(Blob)),
                    o = "function" == typeof ArrayBuffer,
                    s = function (t, e) {
                      var n = new FileReader();
                      return (
                        (n.onload = function () {
                          var t = n.result.split(",")[1];
                          e("b" + t);
                        }),
                        n.readAsDataURL(t)
                      );
                    };
                  t.exports = function (t, e, n) {
                    var a,
                      l = t.type,
                      c = t.data;
                    return r && c instanceof Blob
                      ? e
                        ? n(c)
                        : s(c, n)
                      : o &&
                        (c instanceof ArrayBuffer ||
                          ((a = c),
                          "function" == typeof ArrayBuffer.isView
                            ? ArrayBuffer.isView(a)
                            : a && a.buffer instanceof ArrayBuffer))
                      ? e
                        ? n(c instanceof ArrayBuffer ? c : c.buffer)
                        : s(new Blob([c]), n)
                      : n(i[l] + (c || ""));
                  };
                },
              "./node_modules/engine.io-parser/lib/index.js": function (
                t,
                e,
                n
              ) {
                var i = n(
                    "./node_modules/engine.io-parser/lib/encodePacket.browser.js"
                  ),
                  r = n(
                    "./node_modules/engine.io-parser/lib/decodePacket.browser.js"
                  ),
                  o = String.fromCharCode(30);
                t.exports = {
                  protocol: 4,
                  encodePacket: i,
                  encodePayload: function (t, e) {
                    var n = t.length,
                      r = new Array(n),
                      s = 0;
                    t.forEach(function (t, a) {
                      i(t, !1, function (t) {
                        (r[a] = t), ++s === n && e(r.join(o));
                      });
                    });
                  },
                  decodePacket: r,
                  decodePayload: function (t, e) {
                    for (var n = t.split(o), i = [], s = 0; s < n.length; s++) {
                      var a = r(n[s], e);
                      if ((i.push(a), "error" === a.type)) break;
                    }
                    return i;
                  },
                };
              },
              "./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":
                function (t, e) {
                  !(function (t) {
                    "use strict";
                    (e.encode = function (e) {
                      var n,
                        i = new Uint8Array(e),
                        r = i.length,
                        o = "";
                      for (n = 0; n < r; n += 3)
                        (o += t[i[n] >> 2]),
                          (o += t[((3 & i[n]) << 4) | (i[n + 1] >> 4)]),
                          (o += t[((15 & i[n + 1]) << 2) | (i[n + 2] >> 6)]),
                          (o += t[63 & i[n + 2]]);
                      return (
                        r % 3 == 2
                          ? (o = o.substring(0, o.length - 1) + "=")
                          : r % 3 == 1 &&
                            (o = o.substring(0, o.length - 2) + "=="),
                        o
                      );
                    }),
                      (e.decode = function (e) {
                        var n,
                          i,
                          r,
                          o,
                          s,
                          a = 0.75 * e.length,
                          l = e.length,
                          c = 0;
                        "=" === e[e.length - 1] &&
                          (a--, "=" === e[e.length - 2] && a--);
                        var u = new ArrayBuffer(a),
                          h = new Uint8Array(u);
                        for (n = 0; n < l; n += 4)
                          (i = t.indexOf(e[n])),
                            (r = t.indexOf(e[n + 1])),
                            (o = t.indexOf(e[n + 2])),
                            (s = t.indexOf(e[n + 3])),
                            (h[c++] = (i << 2) | (r >> 4)),
                            (h[c++] = ((15 & r) << 4) | (o >> 2)),
                            (h[c++] = ((3 & o) << 6) | (63 & s));
                        return u;
                      });
                  })(
                    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
                  );
                },
              "./node_modules/has-cors/index.js": function (t, e) {
                try {
                  t.exports =
                    "undefined" != typeof XMLHttpRequest &&
                    "withCredentials" in new XMLHttpRequest();
                } catch (e) {
                  t.exports = !1;
                }
              },
              "./node_modules/ms/index.js": function (t, e) {
                function n(t) {
                  return (n =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                var i = 1e3,
                  r = 60 * i,
                  o = 60 * r,
                  s = 24 * o;
                function a(t, e, n, i) {
                  var r = e >= 1.5 * n;
                  return Math.round(t / n) + " " + i + (r ? "s" : "");
                }
                t.exports = function (t, e) {
                  e = e || {};
                  var l,
                    c,
                    u = n(t);
                  if ("string" === u && t.length > 0)
                    return (function (t) {
                      if (!((t = String(t)).length > 100)) {
                        var e =
                          /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
                            t
                          );
                        if (e) {
                          var n = parseFloat(e[1]);
                          switch ((e[2] || "ms").toLowerCase()) {
                            case "years":
                            case "year":
                            case "yrs":
                            case "yr":
                            case "y":
                              return 315576e5 * n;
                            case "weeks":
                            case "week":
                            case "w":
                              return 6048e5 * n;
                            case "days":
                            case "day":
                            case "d":
                              return n * s;
                            case "hours":
                            case "hour":
                            case "hrs":
                            case "hr":
                            case "h":
                              return n * o;
                            case "minutes":
                            case "minute":
                            case "mins":
                            case "min":
                            case "m":
                              return n * r;
                            case "seconds":
                            case "second":
                            case "secs":
                            case "sec":
                            case "s":
                              return n * i;
                            case "milliseconds":
                            case "millisecond":
                            case "msecs":
                            case "msec":
                            case "ms":
                              return n;
                            default:
                              return;
                          }
                        }
                      }
                    })(t);
                  if ("number" === u && isFinite(t))
                    return e.long
                      ? ((l = t),
                        (c = Math.abs(l)) >= s
                          ? a(l, c, s, "day")
                          : c >= o
                          ? a(l, c, o, "hour")
                          : c >= r
                          ? a(l, c, r, "minute")
                          : c >= i
                          ? a(l, c, i, "second")
                          : l + " ms")
                      : (function (t) {
                          var e = Math.abs(t);
                          return e >= s
                            ? Math.round(t / s) + "d"
                            : e >= o
                            ? Math.round(t / o) + "h"
                            : e >= r
                            ? Math.round(t / r) + "m"
                            : e >= i
                            ? Math.round(t / i) + "s"
                            : t + "ms";
                        })(t);
                  throw new Error(
                    "val is not a non-empty string or a valid number. val=" +
                      JSON.stringify(t)
                  );
                };
              },
              "./node_modules/parseqs/index.js": function (t, e) {
                (e.encode = function (t) {
                  var e = "";
                  for (var n in t)
                    t.hasOwnProperty(n) &&
                      (e.length && (e += "&"),
                      (e +=
                        encodeURIComponent(n) +
                        "=" +
                        encodeURIComponent(t[n])));
                  return e;
                }),
                  (e.decode = function (t) {
                    for (
                      var e = {}, n = t.split("&"), i = 0, r = n.length;
                      i < r;
                      i++
                    ) {
                      var o = n[i].split("=");
                      e[decodeURIComponent(o[0])] = decodeURIComponent(o[1]);
                    }
                    return e;
                  });
              },
              "./node_modules/parseuri/index.js": function (t, e) {
                var n =
                    /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
                  i = [
                    "source",
                    "protocol",
                    "authority",
                    "userInfo",
                    "user",
                    "password",
                    "host",
                    "port",
                    "relative",
                    "path",
                    "directory",
                    "file",
                    "query",
                    "anchor",
                  ];
                t.exports = function (t) {
                  var e,
                    r,
                    o,
                    s = t,
                    a = t.indexOf("["),
                    l = t.indexOf("]");
                  -1 != a &&
                    -1 != l &&
                    (t =
                      t.substring(0, a) +
                      t.substring(a, l).replace(/:/g, ";") +
                      t.substring(l, t.length));
                  for (var c, u, h = n.exec(t || ""), d = {}, p = 14; p--; )
                    d[i[p]] = h[p] || "";
                  return (
                    -1 != a &&
                      -1 != l &&
                      ((d.source = s),
                      (d.host = d.host
                        .substring(1, d.host.length - 1)
                        .replace(/;/g, ":")),
                      (d.authority = d.authority
                        .replace("[", "")
                        .replace("]", "")
                        .replace(/;/g, ":")),
                      (d.ipv6uri = !0)),
                    (d.pathNames =
                      ((r = /\/{2,9}/g),
                      (o = (e = d.path).replace(r, "/").split("/")),
                      ("/" != e.substr(0, 1) && 0 !== e.length) ||
                        o.splice(0, 1),
                      "/" == e.substr(e.length - 1, 1) &&
                        o.splice(o.length - 1, 1),
                      o)),
                    (d.queryKey =
                      ((c = d.query),
                      (u = {}),
                      c.replace(
                        /(?:^|&)([^&=]*)=?([^&]*)/g,
                        function (t, e, n) {
                          e && (u[e] = n);
                        }
                      ),
                      u)),
                    d
                  );
                };
              },
              "./node_modules/socket.io-parser/dist/binary.js": function (
                t,
                e,
                n
              ) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.reconstructPacket = e.deconstructPacket = void 0);
                var r = n("./node_modules/socket.io-parser/dist/is-binary.js");
                function o(t, e) {
                  if (!t) return t;
                  if (r.isBinary(t)) {
                    var n = { _placeholder: !0, num: e.length };
                    return e.push(t), n;
                  }
                  if (Array.isArray(t)) {
                    for (var s = new Array(t.length), a = 0; a < t.length; a++)
                      s[a] = o(t[a], e);
                    return s;
                  }
                  if ("object" === i(t) && !(t instanceof Date)) {
                    var l = {};
                    for (var c in t) t.hasOwnProperty(c) && (l[c] = o(t[c], e));
                    return l;
                  }
                  return t;
                }
                function s(t, e) {
                  if (!t) return t;
                  if (t && t._placeholder) return e[t.num];
                  if (Array.isArray(t))
                    for (var n = 0; n < t.length; n++) t[n] = s(t[n], e);
                  else if ("object" === i(t))
                    for (var r in t) t.hasOwnProperty(r) && (t[r] = s(t[r], e));
                  return t;
                }
                (e.deconstructPacket = function (t) {
                  var e = [],
                    n = t.data,
                    i = t;
                  return (
                    (i.data = o(n, e)),
                    (i.attachments = e.length),
                    { packet: i, buffers: e }
                  );
                }),
                  (e.reconstructPacket = function (t, e) {
                    return (t.data = s(t.data, e)), (t.attachments = void 0), t;
                  });
              },
              "./node_modules/socket.io-parser/dist/index.js": function (
                t,
                e,
                n
              ) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                function r(t, e, n) {
                  return (r =
                    "undefined" != typeof Reflect && Reflect.get
                      ? Reflect.get
                      : function (t, e, n) {
                          var i = (function (t, e) {
                            for (
                              ;
                              !Object.prototype.hasOwnProperty.call(t, e) &&
                              null !== (t = a(t));

                            );
                            return t;
                          })(t, e);
                          if (i) {
                            var r = Object.getOwnPropertyDescriptor(i, e);
                            return r.get ? r.get.call(n) : r.value;
                          }
                        })(t, e, n || t);
                }
                function o(t, e) {
                  return (o =
                    Object.setPrototypeOf ||
                    function (t, e) {
                      return (t.__proto__ = e), t;
                    })(t, e);
                }
                function s(t, e) {
                  return !e || ("object" !== i(e) && "function" != typeof e)
                    ? (function (t) {
                        if (void 0 === t)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return t;
                      })(t)
                    : e;
                }
                function a(t) {
                  return (a = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (t) {
                        return t.__proto__ || Object.getPrototypeOf(t);
                      })(t);
                }
                function l(t, e) {
                  if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function");
                }
                function c(t, e) {
                  for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    (i.enumerable = i.enumerable || !1),
                      (i.configurable = !0),
                      "value" in i && (i.writable = !0),
                      Object.defineProperty(t, i.key, i);
                  }
                }
                function u(t, e, n) {
                  return e && c(t.prototype, e), n && c(t, n), t;
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.Decoder = e.Encoder = e.PacketType = e.protocol = void 0);
                var h,
                  d = n("./node_modules/component-emitter/index.js"),
                  p = n("./node_modules/socket.io-parser/dist/binary.js"),
                  f = n("./node_modules/socket.io-parser/dist/is-binary.js"),
                  m = n("./node_modules/debug/src/browser.js")(
                    "socket.io-parser"
                  );
                (e.protocol = 5),
                  (function (t) {
                    (t[(t.CONNECT = 0)] = "CONNECT"),
                      (t[(t.DISCONNECT = 1)] = "DISCONNECT"),
                      (t[(t.EVENT = 2)] = "EVENT"),
                      (t[(t.ACK = 3)] = "ACK"),
                      (t[(t.CONNECT_ERROR = 4)] = "CONNECT_ERROR"),
                      (t[(t.BINARY_EVENT = 5)] = "BINARY_EVENT"),
                      (t[(t.BINARY_ACK = 6)] = "BINARY_ACK");
                  })((h = e.PacketType || (e.PacketType = {})));
                var g = (function () {
                  function t() {
                    l(this, t);
                  }
                  return (
                    u(t, [
                      {
                        key: "encode",
                        value: function (t) {
                          return (
                            m("encoding packet %j", t),
                            (t.type !== h.EVENT && t.type !== h.ACK) ||
                            !f.hasBinary(t)
                              ? [this.encodeAsString(t)]
                              : ((t.type =
                                  t.type === h.EVENT
                                    ? h.BINARY_EVENT
                                    : h.BINARY_ACK),
                                this.encodeAsBinary(t))
                          );
                        },
                      },
                      {
                        key: "encodeAsString",
                        value: function (t) {
                          var e = "" + t.type;
                          return (
                            (t.type !== h.BINARY_EVENT &&
                              t.type !== h.BINARY_ACK) ||
                              (e += t.attachments + "-"),
                            t.nsp && "/" !== t.nsp && (e += t.nsp + ","),
                            null != t.id && (e += t.id),
                            null != t.data && (e += JSON.stringify(t.data)),
                            m("encoded %j as %s", t, e),
                            e
                          );
                        },
                      },
                      {
                        key: "encodeAsBinary",
                        value: function (t) {
                          var e = p.deconstructPacket(t),
                            n = this.encodeAsString(e.packet),
                            i = e.buffers;
                          return i.unshift(n), i;
                        },
                      },
                    ]),
                    t
                  );
                })();
                e.Encoder = g;
                var v = (function (t) {
                  !(function (t, e) {
                    if ("function" != typeof e && null !== e)
                      throw new TypeError(
                        "Super expression must either be null or a function"
                      );
                    (t.prototype = Object.create(e && e.prototype, {
                      constructor: { value: t, writable: !0, configurable: !0 },
                    })),
                      e && o(t, e);
                  })(d, t);
                  var e,
                    n,
                    c =
                      ((e = d),
                      (n = (function () {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                          return !1;
                        if (Reflect.construct.sham) return !1;
                        if ("function" == typeof Proxy) return !0;
                        try {
                          return (
                            Boolean.prototype.valueOf.call(
                              Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                          );
                        } catch (t) {
                          return !1;
                        }
                      })()),
                      function () {
                        var t,
                          i = a(e);
                        if (n) {
                          var r = a(this).constructor;
                          t = Reflect.construct(i, arguments, r);
                        } else t = i.apply(this, arguments);
                        return s(this, t);
                      });
                  function d() {
                    return l(this, d), c.call(this);
                  }
                  return (
                    u(
                      d,
                      [
                        {
                          key: "add",
                          value: function (t) {
                            var e;
                            if ("string" == typeof t)
                              (e = this.decodeString(t)).type ===
                                h.BINARY_EVENT || e.type === h.BINARY_ACK
                                ? ((this.reconstructor = new y(e)),
                                  0 === e.attachments &&
                                    r(a(d.prototype), "emit", this).call(
                                      this,
                                      "decoded",
                                      e
                                    ))
                                : r(a(d.prototype), "emit", this).call(
                                    this,
                                    "decoded",
                                    e
                                  );
                            else {
                              if (!f.isBinary(t) && !t.base64)
                                throw new Error("Unknown type: " + t);
                              if (!this.reconstructor)
                                throw new Error(
                                  "got binary data when not reconstructing a packet"
                                );
                              (e = this.reconstructor.takeBinaryData(t)) &&
                                ((this.reconstructor = null),
                                r(a(d.prototype), "emit", this).call(
                                  this,
                                  "decoded",
                                  e
                                ));
                            }
                          },
                        },
                        {
                          key: "decodeString",
                          value: function (t) {
                            var e = 0,
                              n = { type: Number(t.charAt(0)) };
                            if (void 0 === h[n.type])
                              throw new Error("unknown packet type " + n.type);
                            if (
                              n.type === h.BINARY_EVENT ||
                              n.type === h.BINARY_ACK
                            ) {
                              for (
                                var i = e + 1;
                                "-" !== t.charAt(++e) && e != t.length;

                              );
                              var r = t.substring(i, e);
                              if (r != Number(r) || "-" !== t.charAt(e))
                                throw new Error("Illegal attachments");
                              n.attachments = Number(r);
                            }
                            if ("/" === t.charAt(e + 1)) {
                              for (
                                var o = e + 1;
                                ++e && "," !== t.charAt(e) && e !== t.length;

                              );
                              n.nsp = t.substring(o, e);
                            } else n.nsp = "/";
                            var s = t.charAt(e + 1);
                            if ("" !== s && Number(s) == s) {
                              for (var a = e + 1; ++e; ) {
                                var l = t.charAt(e);
                                if (null == l || Number(l) != l) {
                                  --e;
                                  break;
                                }
                                if (e === t.length) break;
                              }
                              n.id = Number(t.substring(a, e + 1));
                            }
                            if (t.charAt(++e)) {
                              var c = (function (t) {
                                try {
                                  return JSON.parse(t);
                                } catch (t) {
                                  return !1;
                                }
                              })(t.substr(e));
                              if (!d.isPayloadValid(n.type, c))
                                throw new Error("invalid payload");
                              n.data = c;
                            }
                            return m("decoded %s as %j", t, n), n;
                          },
                        },
                        {
                          key: "destroy",
                          value: function () {
                            this.reconstructor &&
                              this.reconstructor.finishedReconstruction();
                          },
                        },
                      ],
                      [
                        {
                          key: "isPayloadValid",
                          value: function (t, e) {
                            switch (t) {
                              case h.CONNECT:
                                return "object" === i(e);
                              case h.DISCONNECT:
                                return void 0 === e;
                              case h.CONNECT_ERROR:
                                return (
                                  "string" == typeof e || "object" === i(e)
                                );
                              case h.EVENT:
                              case h.BINARY_EVENT:
                                return Array.isArray(e) && e.length > 0;
                              case h.ACK:
                              case h.BINARY_ACK:
                                return Array.isArray(e);
                            }
                          },
                        },
                      ]
                    ),
                    d
                  );
                })(d);
                e.Decoder = v;
                var y = (function () {
                  function t(e) {
                    l(this, t),
                      (this.packet = e),
                      (this.buffers = []),
                      (this.reconPack = e);
                  }
                  return (
                    u(t, [
                      {
                        key: "takeBinaryData",
                        value: function (t) {
                          if (
                            (this.buffers.push(t),
                            this.buffers.length === this.reconPack.attachments)
                          ) {
                            var e = p.reconstructPacket(
                              this.reconPack,
                              this.buffers
                            );
                            return this.finishedReconstruction(), e;
                          }
                          return null;
                        },
                      },
                      {
                        key: "finishedReconstruction",
                        value: function () {
                          (this.reconPack = null), (this.buffers = []);
                        },
                      },
                    ]),
                    t
                  );
                })();
              },
              "./node_modules/socket.io-parser/dist/is-binary.js": function (
                t,
                e,
                n
              ) {
                "use strict";
                function i(t) {
                  return (i =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (t) {
                          return typeof t;
                        }
                      : function (t) {
                          return t &&
                            "function" == typeof Symbol &&
                            t.constructor === Symbol &&
                            t !== Symbol.prototype
                            ? "symbol"
                            : typeof t;
                        })(t);
                }
                Object.defineProperty(e, "__esModule", { value: !0 }),
                  (e.hasBinary = e.isBinary = void 0);
                var r = "function" == typeof ArrayBuffer,
                  o = Object.prototype.toString,
                  s =
                    "function" == typeof Blob ||
                    ("undefined" != typeof Blob &&
                      "[object BlobConstructor]" === o.call(Blob)),
                  a =
                    "function" == typeof File ||
                    ("undefined" != typeof File &&
                      "[object FileConstructor]" === o.call(File));
                function l(t) {
                  return (
                    (r &&
                      (t instanceof ArrayBuffer ||
                        (function (t) {
                          return "function" == typeof ArrayBuffer.isView
                            ? ArrayBuffer.isView(t)
                            : t.buffer instanceof ArrayBuffer;
                        })(t))) ||
                    (s && t instanceof Blob) ||
                    (a && t instanceof File)
                  );
                }
                (e.isBinary = l),
                  (e.hasBinary = function t(e, n) {
                    if (!e || "object" !== i(e)) return !1;
                    if (Array.isArray(e)) {
                      for (var r = 0, o = e.length; r < o; r++)
                        if (t(e[r])) return !0;
                      return !1;
                    }
                    if (l(e)) return !0;
                    if (
                      e.toJSON &&
                      "function" == typeof e.toJSON &&
                      1 === arguments.length
                    )
                      return t(e.toJSON(), !0);
                    for (var s in e)
                      if (Object.prototype.hasOwnProperty.call(e, s) && t(e[s]))
                        return !0;
                    return !1;
                  });
              },
              "./node_modules/yeast/index.js": function (t, e, n) {
                "use strict";
                var i,
                  r =
                    "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(
                      ""
                    ),
                  o = {},
                  s = 0,
                  a = 0;
                function l(t) {
                  var e = "";
                  do {
                    (e = r[t % 64] + e), (t = Math.floor(t / 64));
                  } while (t > 0);
                  return e;
                }
                function c() {
                  var t = l(+new Date());
                  return t !== i ? ((s = 0), (i = t)) : t + "." + l(s++);
                }
                for (; a < 64; a++) o[r[a]] = a;
                (c.encode = l),
                  (c.decode = function (t) {
                    var e = 0;
                    for (a = 0; a < t.length; a++) e = 64 * e + o[t.charAt(a)];
                    return e;
                  }),
                  (t.exports = c);
              },
            });
          }),
          (t.exports = e());
      },
      221: (t, e, n) => {
        "use strict";
        n.d(e, { j: () => i });
        var i = function () {
          var t = 0,
            e = document.createElement("div");
          function n(t) {
            return e.appendChild(t.dom), t;
          }
          function r(n) {
            for (var i = 0; i < e.children.length; i++)
              e.children[i].style.display = i === n ? "block" : "none";
            t = n;
          }
          (e.style.cssText =
            "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000"),
            e.addEventListener(
              "click",
              function (n) {
                n.preventDefault(), r(++t % e.children.length);
              },
              !1
            );
          var o = (performance || Date).now(),
            s = o,
            a = 0,
            l = n(new i.Panel("FPS", "#0ff", "#002")),
            c = n(new i.Panel("MS", "#0f0", "#020"));
          if (self.performance && self.performance.memory)
            var u = n(new i.Panel("MB", "#f08", "#201"));
          return (
            r(0),
            {
              REVISION: 16,
              dom: e,
              addPanel: n,
              showPanel: r,
              begin: function () {
                o = (performance || Date).now();
              },
              end: function () {
                a++;
                var t = (performance || Date).now();
                if (
                  (c.update(t - o, 200),
                  t >= s + 1e3 &&
                    (l.update((1e3 * a) / (t - s), 100), (s = t), (a = 0), u))
                ) {
                  var e = performance.memory;
                  u.update(
                    e.usedJSHeapSize / 1048576,
                    e.jsHeapSizeLimit / 1048576
                  );
                }
                return t;
              },
              update: function () {
                o = this.end();
              },
              domElement: e,
              setMode: r,
            }
          );
        };
        i.Panel = function (t, e, n) {
          var i = 1 / 0,
            r = 0,
            o = Math.round,
            s = o(window.devicePixelRatio || 1),
            a = 80 * s,
            l = 48 * s,
            c = 3 * s,
            u = 2 * s,
            h = 3 * s,
            d = 15 * s,
            p = 74 * s,
            f = 30 * s,
            m = document.createElement("canvas");
          (m.width = a),
            (m.height = l),
            (m.style.cssText = "width:80px;height:48px");
          var g = m.getContext("2d");
          return (
            (g.font = "bold " + 9 * s + "px Helvetica,Arial,sans-serif"),
            (g.textBaseline = "top"),
            (g.fillStyle = n),
            g.fillRect(0, 0, a, l),
            (g.fillStyle = e),
            g.fillText(t, c, u),
            g.fillRect(h, d, p, f),
            (g.fillStyle = n),
            (g.globalAlpha = 0.9),
            g.fillRect(h, d, p, f),
            {
              dom: m,
              update: function (l, v) {
                (i = Math.min(i, l)),
                  (r = Math.max(r, l)),
                  (g.fillStyle = n),
                  (g.globalAlpha = 1),
                  g.fillRect(0, 0, a, d),
                  (g.fillStyle = e),
                  g.fillText(
                    o(l) + " " + t + " (" + o(i) + "-" + o(r) + ")",
                    c,
                    u
                  ),
                  g.drawImage(m, h + s, d, p - s, f, h, d, p - s, f),
                  g.fillRect(h + p - s, d, s, f),
                  (g.fillStyle = n),
                  (g.globalAlpha = 0.9),
                  g.fillRect(h + p - s, d, s, o((1 - l / v) * f));
              },
            }
          );
        };
      },
      365: (t, e, n) => {
        "use strict";
        n.r(e),
          n.d(e, {
            ACESFilmicToneMapping: () => nt,
            AddEquation: () => E,
            AddOperation: () => J,
            AdditiveAnimationBlendMode: () => qe,
            AdditiveBlending: () => b,
            AlphaFormat: () => Bt,
            AlwaysDepth: () => U,
            AlwaysStencilFunc: () => Sn,
            AmbientLight: () => id,
            AmbientLightProbe: () => Ed,
            AnimationClip: () => Eh,
            AnimationLoader: () => kh,
            AnimationMixer: () => np,
            AnimationObjectGroup: () => tp,
            AnimationUtils: () => dh,
            ArcCurve: () => Yc,
            ArrayCamera: () => xl,
            ArrowHelper: () => qp,
            Audio: () => Bd,
            AudioAnalyser: () => Ud,
            AudioContext: () => wd,
            AudioListener: () => Dd,
            AudioLoader: () => Md,
            AxesHelper: () => Xp,
            AxisHelper: () => wf,
            BackSide: () => m,
            BasicDepthPacking: () => on,
            BasicShadowMap: () => u,
            BinaryTextureLoader: () => Af,
            Bone: () => rc,
            BooleanKeyframeTrack: () => yh,
            BoundingBoxHelper: () => Mf,
            Box2: () => dp,
            Box3: () => ui,
            Box3Helper: () => jp,
            BoxBufferGeometry: () => bo,
            BoxGeometry: () => bo,
            BoxHelper: () => Hp,
            BufferAttribute: () => kr,
            BufferGeometry: () => to,
            BufferGeometryLoader: () => hd,
            ByteType: () => Et,
            Cache: () => Ah,
            Camera: () => To,
            CameraHelper: () => Np,
            CanvasRenderer: () => Lf,
            CanvasTexture: () => Ic,
            CatmullRomCurve3: () => tu,
            CineonToneMapping: () => et,
            CircleBufferGeometry: () => Bc,
            CircleGeometry: () => Bc,
            ClampToEdgeWrapping: () => dt,
            Clock: () => Ld,
            Color: () => Lr,
            ColorKeyframeTrack: () => xh,
            CompressedTexture: () => kc,
            CompressedTextureLoader: () => Ih,
            ConeBufferGeometry: () => Fc,
            ConeGeometry: () => Fc,
            CubeCamera: () => Lo,
            CubeReflectionMapping: () => ot,
            CubeRefractionMapping: () => st,
            CubeTexture: () => Ro,
            CubeTextureLoader: () => Bh,
            CubeUVReflectionMapping: () => ct,
            CubeUVRefractionMapping: () => ut,
            CubicBezierCurve: () => ru,
            CubicBezierCurve3: () => ou,
            CubicInterpolant: () => fh,
            CullFaceBack: () => a,
            CullFaceFront: () => l,
            CullFaceFrontBack: () => c,
            CullFaceNone: () => s,
            Curve: () => qc,
            CurvePath: () => zh,
            CustomBlending: () => S,
            CustomToneMapping: () => it,
            CylinderBufferGeometry: () => Nc,
            CylinderGeometry: () => Nc,
            Cylindrical: () => up,
            DataTexture: () => oc,
            DataTexture2DArray: () => Ps,
            DataTexture3D: () => Os,
            DataTextureLoader: () => Nh,
            DataUtils: () => Kp,
            DecrementStencilOp: () => pn,
            DecrementWrapStencilOp: () => mn,
            DefaultLoadingManager: () => Lh,
            DepthFormat: () => Ut,
            DepthStencilFormat: () => Vt,
            DepthTexture: () => Dc,
            DirectionalLight: () => nd,
            DirectionalLightHelper: () => Ip,
            DiscreteInterpolant: () => gh,
            DodecahedronBufferGeometry: () => Hc,
            DodecahedronGeometry: () => Hc,
            DoubleSide: () => g,
            DstAlphaFactor: () => B,
            DstColorFactor: () => F,
            DynamicBufferAttribute: () => df,
            DynamicCopyUsage: () => On,
            DynamicDrawUsage: () => Tn,
            DynamicReadUsage: () => Ln,
            EdgesGeometry: () => Wc,
            EdgesHelper: () => Sf,
            EllipseCurve: () => Xc,
            EqualDepth: () => W,
            EqualStencilFunc: () => xn,
            EquirectangularReflectionMapping: () => at,
            EquirectangularRefractionMapping: () => lt,
            Euler: () => Yi,
            EventDispatcher: () => Bn,
            ExtrudeBufferGeometry: () => zu,
            ExtrudeGeometry: () => zu,
            FaceColors: () => tf,
            FileLoader: () => Oh,
            FlatShading: () => v,
            Float16BufferAttribute: () => jr,
            Float32Attribute: () => _f,
            Float32BufferAttribute: () => Ur,
            Float64Attribute: () => bf,
            Float64BufferAttribute: () => Vr,
            FloatType: () => Rt,
            Fog: () => Cl,
            FogExp2: () => Al,
            Font: () => yd,
            FontLoader: () => _d,
            FrontSide: () => f,
            Frustum: () => Fo,
            GLBufferAttribute: () => op,
            GLSL1: () => In,
            GLSL3: () => Dn,
            GammaEncoding: () => Ze,
            GreaterDepth: () => X,
            GreaterEqualDepth: () => q,
            GreaterEqualStencilFunc: () => Mn,
            GreaterStencilFunc: () => bn,
            GridHelper: () => Lp,
            Group: () => _l,
            HalfFloatType: () => Pt,
            HemisphereLight: () => Vh,
            HemisphereLightHelper: () => Cp,
            HemisphereLightProbe: () => Sd,
            IcosahedronBufferGeometry: () => ju,
            IcosahedronGeometry: () => ju,
            ImageBitmapLoader: () => gd,
            ImageLoader: () => Dh,
            ImageUtils: () => Zn,
            ImmediateRenderObject: () => gp,
            IncrementStencilOp: () => dn,
            IncrementWrapStencilOp: () => fn,
            InstancedBufferAttribute: () => ud,
            InstancedBufferGeometry: () => cd,
            InstancedInterleavedBuffer: () => rp,
            InstancedMesh: () => pc,
            Int16Attribute: () => gf,
            Int16BufferAttribute: () => Nr,
            Int32Attribute: () => yf,
            Int32BufferAttribute: () => zr,
            Int8Attribute: () => pf,
            Int8BufferAttribute: () => Ir,
            IntType: () => Ct,
            InterleavedBuffer: () => Rl,
            InterleavedBufferAttribute: () => Ol,
            Interpolant: () => ph,
            InterpolateDiscrete: () => ze,
            InterpolateLinear: () => He,
            InterpolateSmooth: () => je,
            InvertStencilOp: () => gn,
            JSONLoader: () => Rf,
            KeepStencilOp: () => un,
            KeyframeTrack: () => vh,
            LOD: () => Jl,
            LatheBufferGeometry: () => Uu,
            LatheGeometry: () => Uu,
            Layers: () => $i,
            LensFlare: () => Of,
            LessDepth: () => V,
            LessEqualDepth: () => G,
            LessEqualStencilFunc: () => _n,
            LessStencilFunc: () => yn,
            Light: () => Uh,
            LightProbe: () => sd,
            Line: () => _c,
            Line3: () => mp,
            LineBasicMaterial: () => fc,
            LineCurve: () => su,
            LineCurve3: () => au,
            LineDashedMaterial: () => uh,
            LineLoop: () => Sc,
            LinePieces: () => Zp,
            LineSegments: () => Mc,
            LineStrip: () => Jp,
            LinearEncoding: () => Ke,
            LinearFilter: () => xt,
            LinearInterpolant: () => mh,
            LinearMipMapLinearFilter: () => Mt,
            LinearMipMapNearestFilter: () => bt,
            LinearMipmapLinearFilter: () => wt,
            LinearMipmapNearestFilter: () => _t,
            LinearToneMapping: () => Q,
            Loader: () => Rh,
            LoaderUtils: () => ld,
            LoadingManager: () => Ch,
            LogLuvEncoding: () => tn,
            LoopOnce: () => Be,
            LoopPingPong: () => Fe,
            LoopRepeat: () => Ne,
            LuminanceAlphaFormat: () => Ht,
            LuminanceFormat: () => zt,
            MOUSE: () => r,
            Material: () => wr,
            MaterialLoader: () => ad,
            Math: () => Yn,
            MathUtils: () => Yn,
            Matrix3: () => Kn,
            Matrix4: () => Fi,
            MaxEquation: () => L,
            Mesh: () => xo,
            MeshBasicMaterial: () => Rr,
            MeshDepthMaterial: () => pl,
            MeshDistanceMaterial: () => fl,
            MeshFaceMaterial: () => nf,
            MeshLambertMaterial: () => lh,
            MeshMatcapMaterial: () => ch,
            MeshNormalMaterial: () => ah,
            MeshPhongMaterial: () => oh,
            MeshPhysicalMaterial: () => rh,
            MeshStandardMaterial: () => ih,
            MeshToonMaterial: () => sh,
            MinEquation: () => C,
            MirroredRepeatWrapping: () => pt,
            MixOperation: () => K,
            MultiMaterial: () => rf,
            MultiplyBlending: () => M,
            MultiplyOperation: () => $,
            NearestFilter: () => ft,
            NearestMipMapLinearFilter: () => yt,
            NearestMipMapNearestFilter: () => gt,
            NearestMipmapLinearFilter: () => vt,
            NearestMipmapNearestFilter: () => mt,
            NeverDepth: () => j,
            NeverStencilFunc: () => vn,
            NoBlending: () => x,
            NoColors: () => Qp,
            NoToneMapping: () => Z,
            NormalAnimationBlendMode: () => We,
            NormalBlending: () => _,
            NotEqualDepth: () => Y,
            NotEqualStencilFunc: () => wn,
            NumberKeyframeTrack: () => _h,
            Object3D: () => cr,
            ObjectLoader: () => dd,
            ObjectSpaceNormalMap: () => ln,
            OctahedronBufferGeometry: () => Vu,
            OctahedronGeometry: () => Vu,
            OneFactor: () => P,
            OneMinusDstAlphaFactor: () => N,
            OneMinusDstColorFactor: () => z,
            OneMinusSrcAlphaFactor: () => D,
            OneMinusSrcColorFactor: () => k,
            OrthographicCamera: () => Jo,
            PCFShadowMap: () => h,
            PCFSoftShadowMap: () => d,
            PMREMGenerator: () => ms,
            ParametricBufferGeometry: () => Gu,
            ParametricGeometry: () => Gu,
            Particle: () => sf,
            ParticleBasicMaterial: () => cf,
            ParticleSystem: () => af,
            ParticleSystemMaterial: () => uf,
            Path: () => Hh,
            PerspectiveCamera: () => Ao,
            Plane: () => Do,
            PlaneBufferGeometry: () => jo,
            PlaneGeometry: () => jo,
            PlaneHelper: () => Up,
            PointCloud: () => of,
            PointCloudMaterial: () => lf,
            PointLight: () => td,
            PointLightHelper: () => Sp,
            Points: () => Rc,
            PointsMaterial: () => Ec,
            PolarGridHelper: () => Rp,
            PolyhedronBufferGeometry: () => zc,
            PolyhedronGeometry: () => zc,
            PositionalAudio: () => jd,
            PropertyBinding: () => Qd,
            PropertyMixer: () => Vd,
            QuadraticBezierCurve: () => lu,
            QuadraticBezierCurve3: () => cu,
            Quaternion: () => si,
            QuaternionKeyframeTrack: () => wh,
            QuaternionLinearInterpolant: () => bh,
            REVISION: () => i,
            RGBADepthPacking: () => sn,
            RGBAFormat: () => Ft,
            RGBAIntegerFormat: () => $t,
            RGBA_ASTC_10x10_Format: () => ye,
            RGBA_ASTC_10x5_Format: () => me,
            RGBA_ASTC_10x6_Format: () => ge,
            RGBA_ASTC_10x8_Format: () => ve,
            RGBA_ASTC_12x10_Format: () => xe,
            RGBA_ASTC_12x12_Format: () => _e,
            RGBA_ASTC_4x4_Format: () => ae,
            RGBA_ASTC_5x4_Format: () => le,
            RGBA_ASTC_5x5_Format: () => ce,
            RGBA_ASTC_6x5_Format: () => ue,
            RGBA_ASTC_6x6_Format: () => he,
            RGBA_ASTC_8x5_Format: () => de,
            RGBA_ASTC_8x6_Format: () => pe,
            RGBA_ASTC_8x8_Format: () => fe,
            RGBA_BPTC_Format: () => be,
            RGBA_ETC2_EAC_Format: () => se,
            RGBA_PVRTC_2BPPV1_Format: () => ie,
            RGBA_PVRTC_4BPPV1_Format: () => ne,
            RGBA_S3TC_DXT1_Format: () => Jt,
            RGBA_S3TC_DXT3_Format: () => Zt,
            RGBA_S3TC_DXT5_Format: () => Qt,
            RGBDEncoding: () => rn,
            RGBEEncoding: () => Qe,
            RGBEFormat: () => jt,
            RGBFormat: () => Nt,
            RGBIntegerFormat: () => Yt,
            RGBM16Encoding: () => nn,
            RGBM7Encoding: () => en,
            RGB_ETC1_Format: () => re,
            RGB_ETC2_Format: () => oe,
            RGB_PVRTC_2BPPV1_Format: () => ee,
            RGB_PVRTC_4BPPV1_Format: () => te,
            RGB_S3TC_DXT1_Format: () => Kt,
            RGFormat: () => qt,
            RGIntegerFormat: () => Xt,
            RawShaderMaterial: () => Zo,
            Ray: () => Ni,
            Raycaster: () => sp,
            RectAreaLight: () => rd,
            RedFormat: () => Gt,
            RedIntegerFormat: () => Wt,
            ReinhardToneMapping: () => tt,
            RepeatWrapping: () => ht,
            ReplaceStencilOp: () => hn,
            ReverseSubtractEquation: () => A,
            RingBufferGeometry: () => Wu,
            RingGeometry: () => Wu,
            SRGB8_ALPHA8_ASTC_10x10_Format: () => ke,
            SRGB8_ALPHA8_ASTC_10x5_Format: () => Re,
            SRGB8_ALPHA8_ASTC_10x6_Format: () => Pe,
            SRGB8_ALPHA8_ASTC_10x8_Format: () => Oe,
            SRGB8_ALPHA8_ASTC_12x10_Format: () => Ie,
            SRGB8_ALPHA8_ASTC_12x12_Format: () => De,
            SRGB8_ALPHA8_ASTC_4x4_Format: () => we,
            SRGB8_ALPHA8_ASTC_5x4_Format: () => Me,
            SRGB8_ALPHA8_ASTC_5x5_Format: () => Se,
            SRGB8_ALPHA8_ASTC_6x5_Format: () => Ee,
            SRGB8_ALPHA8_ASTC_6x6_Format: () => Te,
            SRGB8_ALPHA8_ASTC_8x5_Format: () => Ae,
            SRGB8_ALPHA8_ASTC_8x6_Format: () => Ce,
            SRGB8_ALPHA8_ASTC_8x8_Format: () => Le,
            Scene: () => Ll,
            SceneUtils: () => Pf,
            ShaderChunk: () => Uo,
            ShaderLib: () => Go,
            ShaderMaterial: () => Eo,
            ShadowMaterial: () => nh,
            Shape: () => jh,
            ShapeBufferGeometry: () => qu,
            ShapeGeometry: () => qu,
            ShapePath: () => vd,
            ShapeUtils: () => Bu,
            ShortType: () => Tt,
            Skeleton: () => lc,
            SkeletonHelper: () => wp,
            SkinnedMesh: () => ic,
            SmoothShading: () => y,
            Sphere: () => Li,
            SphereBufferGeometry: () => Xu,
            SphereGeometry: () => Xu,
            Spherical: () => cp,
            SphericalHarmonics3: () => od,
            SplineCurve: () => uu,
            SpotLight: () => $h,
            SpotLightHelper: () => yp,
            Sprite: () => Xl,
            SpriteMaterial: () => kl,
            SrcAlphaFactor: () => I,
            SrcAlphaSaturateFactor: () => H,
            SrcColorFactor: () => O,
            StaticCopyUsage: () => Pn,
            StaticDrawUsage: () => En,
            StaticReadUsage: () => Cn,
            StereoCamera: () => Cd,
            StreamCopyUsage: () => kn,
            StreamDrawUsage: () => An,
            StreamReadUsage: () => Rn,
            StringKeyframeTrack: () => Mh,
            SubtractEquation: () => T,
            SubtractiveBlending: () => w,
            TOUCH: () => o,
            TangentSpaceNormalMap: () => an,
            TetrahedronBufferGeometry: () => Yu,
            TetrahedronGeometry: () => Yu,
            TextBufferGeometry: () => $u,
            TextGeometry: () => $u,
            Texture: () => ti,
            TextureLoader: () => Fh,
            TorusBufferGeometry: () => Ku,
            TorusGeometry: () => Ku,
            TorusKnotBufferGeometry: () => Ju,
            TorusKnotGeometry: () => Ju,
            Triangle: () => _r,
            TriangleFanDrawMode: () => $e,
            TriangleStripDrawMode: () => Ye,
            TrianglesDrawMode: () => Xe,
            TubeBufferGeometry: () => Zu,
            TubeGeometry: () => Zu,
            UVMapping: () => rt,
            Uint16Attribute: () => vf,
            Uint16BufferAttribute: () => Fr,
            Uint32Attribute: () => xf,
            Uint32BufferAttribute: () => Hr,
            Uint8Attribute: () => ff,
            Uint8BufferAttribute: () => Dr,
            Uint8ClampedAttribute: () => mf,
            Uint8ClampedBufferAttribute: () => Br,
            Uniform: () => ip,
            UniformsLib: () => Vo,
            UniformsUtils: () => So,
            UnsignedByteType: () => St,
            UnsignedInt248Type: () => Dt,
            UnsignedIntType: () => Lt,
            UnsignedShort4444Type: () => Ot,
            UnsignedShort5551Type: () => kt,
            UnsignedShort565Type: () => It,
            UnsignedShortType: () => At,
            VSMShadowMap: () => p,
            Vector2: () => $n,
            Vector3: () => ai,
            Vector4: () => ni,
            VectorKeyframeTrack: () => Sh,
            Vertex: () => hf,
            VertexColors: () => ef,
            VideoTexture: () => Oc,
            WebGL1Renderer: () => Tl,
            WebGLCubeRenderTarget: () => Po,
            WebGLMultipleRenderTargets: () => ri,
            WebGLMultisampleRenderTarget: () => oi,
            WebGLRenderTarget: () => ii,
            WebGLRenderTargetCube: () => Cf,
            WebGLRenderer: () => El,
            WebGLUtils: () => yl,
            WireframeGeometry: () => Qu,
            WireframeHelper: () => Ef,
            WrapAroundEnding: () => Ge,
            XHRLoader: () => Tf,
            ZeroCurvatureEnding: () => Ue,
            ZeroFactor: () => R,
            ZeroSlopeEnding: () => Ve,
            ZeroStencilOp: () => cn,
            sRGBEncoding: () => Je,
          });
        const i = "131";
        console.log(`THREE.js rev${i}`);
        const r = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 },
          o = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 },
          s = 0,
          a = 1,
          l = 2,
          c = 3,
          u = 0,
          h = 1,
          d = 2,
          p = 3,
          f = 0,
          m = 1,
          g = 2,
          v = 1,
          y = 2,
          x = 0,
          _ = 1,
          b = 2,
          w = 3,
          M = 4,
          S = 5,
          E = 100,
          T = 101,
          A = 102,
          C = 103,
          L = 104,
          R = 200,
          P = 201,
          O = 202,
          k = 203,
          I = 204,
          D = 205,
          B = 206,
          N = 207,
          F = 208,
          z = 209,
          H = 210,
          j = 0,
          U = 1,
          V = 2,
          G = 3,
          W = 4,
          q = 5,
          X = 6,
          Y = 7,
          $ = 0,
          K = 1,
          J = 2,
          Z = 0,
          Q = 1,
          tt = 2,
          et = 3,
          nt = 4,
          it = 5,
          rt = 300,
          ot = 301,
          st = 302,
          at = 303,
          lt = 304,
          ct = 306,
          ut = 307,
          ht = 1e3,
          dt = 1001,
          pt = 1002,
          ft = 1003,
          mt = 1004,
          gt = 1004,
          vt = 1005,
          yt = 1005,
          xt = 1006,
          _t = 1007,
          bt = 1007,
          wt = 1008,
          Mt = 1008,
          St = 1009,
          Et = 1010,
          Tt = 1011,
          At = 1012,
          Ct = 1013,
          Lt = 1014,
          Rt = 1015,
          Pt = 1016,
          Ot = 1017,
          kt = 1018,
          It = 1019,
          Dt = 1020,
          Bt = 1021,
          Nt = 1022,
          Ft = 1023,
          zt = 1024,
          Ht = 1025,
          jt = Ft,
          Ut = 1026,
          Vt = 1027,
          Gt = 1028,
          Wt = 1029,
          qt = 1030,
          Xt = 1031,
          Yt = 1032,
          $t = 1033,
          Kt = 33776,
          Jt = 33777,
          Zt = 33778,
          Qt = 33779,
          te = 35840,
          ee = 35841,
          ne = 35842,
          ie = 35843,
          re = 36196,
          oe = 37492,
          se = 37496,
          ae = 37808,
          le = 37809,
          ce = 37810,
          ue = 37811,
          he = 37812,
          de = 37813,
          pe = 37814,
          fe = 37815,
          me = 37816,
          ge = 37817,
          ve = 37818,
          ye = 37819,
          xe = 37820,
          _e = 37821,
          be = 36492,
          we = 37840,
          Me = 37841,
          Se = 37842,
          Ee = 37843,
          Te = 37844,
          Ae = 37845,
          Ce = 37846,
          Le = 37847,
          Re = 37848,
          Pe = 37849,
          Oe = 37850,
          ke = 37851,
          Ie = 37852,
          De = 37853,
          Be = 2200,
          Ne = 2201,
          Fe = 2202,
          ze = 2300,
          He = 2301,
          je = 2302,
          Ue = 2400,
          Ve = 2401,
          Ge = 2402,
          We = 2500,
          qe = 2501,
          Xe = 0,
          Ye = 1,
          $e = 2,
          Ke = 3e3,
          Je = 3001,
          Ze = 3007,
          Qe = 3002,
          tn = 3003,
          en = 3004,
          nn = 3005,
          rn = 3006,
          on = 3200,
          sn = 3201,
          an = 0,
          ln = 1,
          cn = 0,
          un = 7680,
          hn = 7681,
          dn = 7682,
          pn = 7683,
          fn = 34055,
          mn = 34056,
          gn = 5386,
          vn = 512,
          yn = 513,
          xn = 514,
          _n = 515,
          bn = 516,
          wn = 517,
          Mn = 518,
          Sn = 519,
          En = 35044,
          Tn = 35048,
          An = 35040,
          Cn = 35045,
          Ln = 35049,
          Rn = 35041,
          Pn = 35046,
          On = 35050,
          kn = 35042,
          In = "100",
          Dn = "300 es";
        class Bn {
          addEventListener(t, e) {
            void 0 === this._listeners && (this._listeners = {});
            const n = this._listeners;
            if ((void 0 === n[t] && (n[t] = []), !this))
              throw new Error("what tf did you do with three.js code");
            -1 === n[t].indexOf(e) && n[t].push(e);
          }
          hasEventListener(t, e) {
            if (void 0 === this._listeners) return !1;
            const n = this._listeners;
            return void 0 !== n[t] && -1 !== n[t].indexOf(e);
          }
          removeEventListener(t, e) {
            if (void 0 === this._listeners) return;
            const n = this._listeners[t];
            if (void 0 !== n) {
              const t = n.indexOf(e);
              -1 !== t && n.splice(t, 1);
            }
          }
          dispatchEvent(t) {
            if (void 0 === this._listeners) return;
            const e = this._listeners[t.type];
            if (void 0 !== e) {
              t.target = this;
              const n = e.slice(0);
              for (let e = 0, i = n.length; e < i; e++) n[e].call(this, t);
              t.target = null;
            }
          }
        }
        const Nn = [];
        for (let t = 0; t < 256; t++)
          Nn[t] = (t < 16 ? "0" : "") + t.toString(16);
        let Fn = 1234567;
        const zn = Math.PI / 180,
          Hn = 180 / Math.PI;
        function jn() {
          const t = (4294967295 * Math.random()) | 0,
            e = (4294967295 * Math.random()) | 0,
            n = (4294967295 * Math.random()) | 0,
            i = (4294967295 * Math.random()) | 0;
          return (
            Nn[255 & t] +
            Nn[(t >> 8) & 255] +
            Nn[(t >> 16) & 255] +
            Nn[(t >> 24) & 255] +
            "-" +
            Nn[255 & e] +
            Nn[(e >> 8) & 255] +
            "-" +
            Nn[((e >> 16) & 15) | 64] +
            Nn[(e >> 24) & 255] +
            "-" +
            Nn[(63 & n) | 128] +
            Nn[(n >> 8) & 255] +
            "-" +
            Nn[(n >> 16) & 255] +
            Nn[(n >> 24) & 255] +
            Nn[255 & i] +
            Nn[(i >> 8) & 255] +
            Nn[(i >> 16) & 255] +
            Nn[(i >> 24) & 255]
          ).toUpperCase();
        }
        function Un(t, e, n) {
          return Math.max(e, Math.min(n, t));
        }
        function Vn(t, e) {
          return ((t % e) + e) % e;
        }
        function Gn(t, e, n) {
          return (1 - n) * t + n * e;
        }
        function Wn(t) {
          return 0 == (t & (t - 1)) && 0 !== t;
        }
        function qn(t) {
          return Math.pow(2, Math.ceil(Math.log(t) / Math.LN2));
        }
        function Xn(t) {
          return Math.pow(2, Math.floor(Math.log(t) / Math.LN2));
        }
        var Yn = Object.freeze({
          __proto__: null,
          DEG2RAD: zn,
          RAD2DEG: Hn,
          generateUUID: jn,
          clamp: Un,
          euclideanModulo: Vn,
          mapLinear: function (t, e, n, i, r) {
            return i + ((t - e) * (r - i)) / (n - e);
          },
          inverseLerp: function (t, e, n) {
            return t !== e ? (n - t) / (e - t) : 0;
          },
          lerp: Gn,
          damp: function (t, e, n, i) {
            return Gn(t, e, 1 - Math.exp(-n * i));
          },
          pingpong: function (t, e = 1) {
            return e - Math.abs(Vn(t, 2 * e) - e);
          },
          smoothstep: function (t, e, n) {
            return t <= e
              ? 0
              : t >= n
              ? 1
              : (t = (t - e) / (n - e)) * t * (3 - 2 * t);
          },
          smootherstep: function (t, e, n) {
            return t <= e
              ? 0
              : t >= n
              ? 1
              : (t = (t - e) / (n - e)) * t * t * (t * (6 * t - 15) + 10);
          },
          randInt: function (t, e) {
            return t + Math.floor(Math.random() * (e - t + 1));
          },
          randFloat: function (t, e) {
            return t + Math.random() * (e - t);
          },
          randFloatSpread: function (t) {
            return t * (0.5 - Math.random());
          },
          seededRandom: function (t) {
            return (
              void 0 !== t && (Fn = t % 2147483647),
              (Fn = (16807 * Fn) % 2147483647),
              (Fn - 1) / 2147483646
            );
          },
          degToRad: function (t) {
            return t * zn;
          },
          radToDeg: function (t) {
            return t * Hn;
          },
          isPowerOfTwo: Wn,
          ceilPowerOfTwo: qn,
          floorPowerOfTwo: Xn,
          setQuaternionFromProperEuler: function (t, e, n, i, r) {
            const o = Math.cos,
              s = Math.sin,
              a = o(n / 2),
              l = s(n / 2),
              c = o((e + i) / 2),
              u = s((e + i) / 2),
              h = o((e - i) / 2),
              d = s((e - i) / 2),
              p = o((i - e) / 2),
              f = s((i - e) / 2);
            switch (r) {
              case "XYX":
                t.set(a * u, l * h, l * d, a * c);
                break;
              case "YZY":
                t.set(l * d, a * u, l * h, a * c);
                break;
              case "ZXZ":
                t.set(l * h, l * d, a * u, a * c);
                break;
              case "XZX":
                t.set(a * u, l * f, l * p, a * c);
                break;
              case "YXY":
                t.set(l * p, a * u, l * f, a * c);
                break;
              case "ZYZ":
                t.set(l * f, l * p, a * u, a * c);
                break;
              default:
                console.warn(
                  "THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " +
                    r
                );
            }
          },
        });
        class $n {
          constructor(t = 0, e = 0) {
            (this.x = t), (this.y = e);
          }
          get width() {
            return this.x;
          }
          set width(t) {
            this.x = t;
          }
          get height() {
            return this.y;
          }
          set height(t) {
            this.y = t;
          }
          set(t, e) {
            return (this.x = t), (this.y = e), this;
          }
          setScalar(t) {
            return (this.x = t), (this.y = t), this;
          }
          setX(t) {
            return (this.x = t), this;
          }
          setY(t) {
            return (this.y = t), this;
          }
          setComponent(t, e) {
            switch (t) {
              case 0:
                this.x = e;
                break;
              case 1:
                this.y = e;
                break;
              default:
                throw new Error("index is out of range: " + t);
            }
            return this;
          }
          getComponent(t) {
            switch (t) {
              case 0:
                return this.x;
              case 1:
                return this.y;
              default:
                throw new Error("index is out of range: " + t);
            }
          }
          clone() {
            return new this.constructor(this.x, this.y);
          }
          copy(t) {
            return (this.x = t.x), (this.y = t.y), this;
          }
          add(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
                ),
                this.addVectors(t, e))
              : ((this.x += t.x), (this.y += t.y), this);
          }
          addScalar(t) {
            return (this.x += t), (this.y += t), this;
          }
          addVectors(t, e) {
            return (this.x = t.x + e.x), (this.y = t.y + e.y), this;
          }
          addScaledVector(t, e) {
            return (this.x += t.x * e), (this.y += t.y * e), this;
          }
          sub(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
                ),
                this.subVectors(t, e))
              : ((this.x -= t.x), (this.y -= t.y), this);
          }
          subScalar(t) {
            return (this.x -= t), (this.y -= t), this;
          }
          subVectors(t, e) {
            return (this.x = t.x - e.x), (this.y = t.y - e.y), this;
          }
          multiply(t) {
            return (this.x *= t.x), (this.y *= t.y), this;
          }
          multiplyScalar(t) {
            return (this.x *= t), (this.y *= t), this;
          }
          divide(t) {
            return (this.x /= t.x), (this.y /= t.y), this;
          }
          divideScalar(t) {
            return this.multiplyScalar(1 / t);
          }
          applyMatrix3(t) {
            const e = this.x,
              n = this.y,
              i = t.elements;
            return (
              (this.x = i[0] * e + i[3] * n + i[6]),
              (this.y = i[1] * e + i[4] * n + i[7]),
              this
            );
          }
          min(t) {
            return (
              (this.x = Math.min(this.x, t.x)),
              (this.y = Math.min(this.y, t.y)),
              this
            );
          }
          max(t) {
            return (
              (this.x = Math.max(this.x, t.x)),
              (this.y = Math.max(this.y, t.y)),
              this
            );
          }
          clamp(t, e) {
            return (
              (this.x = Math.max(t.x, Math.min(e.x, this.x))),
              (this.y = Math.max(t.y, Math.min(e.y, this.y))),
              this
            );
          }
          clampScalar(t, e) {
            return (
              (this.x = Math.max(t, Math.min(e, this.x))),
              (this.y = Math.max(t, Math.min(e, this.y))),
              this
            );
          }
          clampLength(t, e) {
            const n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(
              Math.max(t, Math.min(e, n))
            );
          }
          floor() {
            return (
              (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), this
            );
          }
          ceil() {
            return (
              (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), this
            );
          }
          round() {
            return (
              (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
            );
          }
          roundToZero() {
            return (
              (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
              (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
              this
            );
          }
          negate() {
            return (this.x = -this.x), (this.y = -this.y), this;
          }
          dot(t) {
            return this.x * t.x + this.y * t.y;
          }
          cross(t) {
            return this.x * t.y - this.y * t.x;
          }
          lengthSq() {
            return this.x * this.x + this.y * this.y;
          }
          length() {
            return Math.sqrt(this.x * this.x + this.y * this.y);
          }
          manhattanLength() {
            return Math.abs(this.x) + Math.abs(this.y);
          }
          normalize() {
            return this.divideScalar(this.length() || 1);
          }
          angle() {
            return Math.atan2(-this.y, -this.x) + Math.PI;
          }
          distanceTo(t) {
            return Math.sqrt(this.distanceToSquared(t));
          }
          distanceToSquared(t) {
            const e = this.x - t.x,
              n = this.y - t.y;
            return e * e + n * n;
          }
          manhattanDistanceTo(t) {
            return Math.abs(this.x - t.x) + Math.abs(this.y - t.y);
          }
          setLength(t) {
            return this.normalize().multiplyScalar(t);
          }
          lerp(t, e) {
            return (
              (this.x += (t.x - this.x) * e),
              (this.y += (t.y - this.y) * e),
              this
            );
          }
          lerpVectors(t, e, n) {
            return (
              (this.x = t.x + (e.x - t.x) * n),
              (this.y = t.y + (e.y - t.y) * n),
              this
            );
          }
          equals(t) {
            return t.x === this.x && t.y === this.y;
          }
          fromArray(t, e = 0) {
            return (this.x = t[e]), (this.y = t[e + 1]), this;
          }
          toArray(t = [], e = 0) {
            return (t[e] = this.x), (t[e + 1] = this.y), t;
          }
          fromBufferAttribute(t, e, n) {
            return (
              void 0 !== n &&
                console.warn(
                  "THREE.Vector2: offset has been removed from .fromBufferAttribute()."
                ),
              (this.x = t.getX(e)),
              (this.y = t.getY(e)),
              this
            );
          }
          rotateAround(t, e) {
            const n = Math.cos(e),
              i = Math.sin(e),
              r = this.x - t.x,
              o = this.y - t.y;
            return (
              (this.x = r * n - o * i + t.x),
              (this.y = r * i + o * n + t.y),
              this
            );
          }
          random() {
            return (this.x = Math.random()), (this.y = Math.random()), this;
          }
        }
        $n.prototype.isVector2 = !0;
        class Kn {
          constructor() {
            (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
              arguments.length > 0 &&
                console.error(
                  "THREE.Matrix3: the constructor no longer reads arguments. use .set() instead."
                );
          }
          set(t, e, n, i, r, o, s, a, l) {
            const c = this.elements;
            return (
              (c[0] = t),
              (c[1] = i),
              (c[2] = s),
              (c[3] = e),
              (c[4] = r),
              (c[5] = a),
              (c[6] = n),
              (c[7] = o),
              (c[8] = l),
              this
            );
          }
          identity() {
            return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
          }
          copy(t) {
            const e = this.elements,
              n = t.elements;
            return (
              (e[0] = n[0]),
              (e[1] = n[1]),
              (e[2] = n[2]),
              (e[3] = n[3]),
              (e[4] = n[4]),
              (e[5] = n[5]),
              (e[6] = n[6]),
              (e[7] = n[7]),
              (e[8] = n[8]),
              this
            );
          }
          extractBasis(t, e, n) {
            return (
              t.setFromMatrix3Column(this, 0),
              e.setFromMatrix3Column(this, 1),
              n.setFromMatrix3Column(this, 2),
              this
            );
          }
          setFromMatrix4(t) {
            const e = t.elements;
            return (
              this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]),
              this
            );
          }
          multiply(t) {
            return this.multiplyMatrices(this, t);
          }
          premultiply(t) {
            return this.multiplyMatrices(t, this);
          }
          multiplyMatrices(t, e) {
            const n = t.elements,
              i = e.elements,
              r = this.elements,
              o = n[0],
              s = n[3],
              a = n[6],
              l = n[1],
              c = n[4],
              u = n[7],
              h = n[2],
              d = n[5],
              p = n[8],
              f = i[0],
              m = i[3],
              g = i[6],
              v = i[1],
              y = i[4],
              x = i[7],
              _ = i[2],
              b = i[5],
              w = i[8];
            return (
              (r[0] = o * f + s * v + a * _),
              (r[3] = o * m + s * y + a * b),
              (r[6] = o * g + s * x + a * w),
              (r[1] = l * f + c * v + u * _),
              (r[4] = l * m + c * y + u * b),
              (r[7] = l * g + c * x + u * w),
              (r[2] = h * f + d * v + p * _),
              (r[5] = h * m + d * y + p * b),
              (r[8] = h * g + d * x + p * w),
              this
            );
          }
          multiplyScalar(t) {
            const e = this.elements;
            return (
              (e[0] *= t),
              (e[3] *= t),
              (e[6] *= t),
              (e[1] *= t),
              (e[4] *= t),
              (e[7] *= t),
              (e[2] *= t),
              (e[5] *= t),
              (e[8] *= t),
              this
            );
          }
          determinant() {
            const t = this.elements,
              e = t[0],
              n = t[1],
              i = t[2],
              r = t[3],
              o = t[4],
              s = t[5],
              a = t[6],
              l = t[7],
              c = t[8];
            return (
              e * o * c -
              e * s * l -
              n * r * c +
              n * s * a +
              i * r * l -
              i * o * a
            );
          }
          invert() {
            const t = this.elements,
              e = t[0],
              n = t[1],
              i = t[2],
              r = t[3],
              o = t[4],
              s = t[5],
              a = t[6],
              l = t[7],
              c = t[8],
              u = c * o - s * l,
              h = s * a - c * r,
              d = l * r - o * a,
              p = e * u + n * h + i * d;
            if (0 === p) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
            const f = 1 / p;
            return (
              (t[0] = u * f),
              (t[1] = (i * l - c * n) * f),
              (t[2] = (s * n - i * o) * f),
              (t[3] = h * f),
              (t[4] = (c * e - i * a) * f),
              (t[5] = (i * r - s * e) * f),
              (t[6] = d * f),
              (t[7] = (n * a - l * e) * f),
              (t[8] = (o * e - n * r) * f),
              this
            );
          }
          transpose() {
            let t;
            const e = this.elements;
            return (
              (t = e[1]),
              (e[1] = e[3]),
              (e[3] = t),
              (t = e[2]),
              (e[2] = e[6]),
              (e[6] = t),
              (t = e[5]),
              (e[5] = e[7]),
              (e[7] = t),
              this
            );
          }
          getNormalMatrix(t) {
            return this.setFromMatrix4(t).invert().transpose();
          }
          transposeIntoArray(t) {
            const e = this.elements;
            return (
              (t[0] = e[0]),
              (t[1] = e[3]),
              (t[2] = e[6]),
              (t[3] = e[1]),
              (t[4] = e[4]),
              (t[5] = e[7]),
              (t[6] = e[2]),
              (t[7] = e[5]),
              (t[8] = e[8]),
              this
            );
          }
          setUvTransform(t, e, n, i, r, o, s) {
            const a = Math.cos(r),
              l = Math.sin(r);
            return (
              this.set(
                n * a,
                n * l,
                -n * (a * o + l * s) + o + t,
                -i * l,
                i * a,
                -i * (-l * o + a * s) + s + e,
                0,
                0,
                1
              ),
              this
            );
          }
          scale(t, e) {
            const n = this.elements;
            return (
              (n[0] *= t),
              (n[3] *= t),
              (n[6] *= t),
              (n[1] *= e),
              (n[4] *= e),
              (n[7] *= e),
              this
            );
          }
          rotate(t) {
            const e = Math.cos(t),
              n = Math.sin(t),
              i = this.elements,
              r = i[0],
              o = i[3],
              s = i[6],
              a = i[1],
              l = i[4],
              c = i[7];
            return (
              (i[0] = e * r + n * a),
              (i[3] = e * o + n * l),
              (i[6] = e * s + n * c),
              (i[1] = -n * r + e * a),
              (i[4] = -n * o + e * l),
              (i[7] = -n * s + e * c),
              this
            );
          }
          translate(t, e) {
            const n = this.elements;
            return (
              (n[0] += t * n[2]),
              (n[3] += t * n[5]),
              (n[6] += t * n[8]),
              (n[1] += e * n[2]),
              (n[4] += e * n[5]),
              (n[7] += e * n[8]),
              this
            );
          }
          equals(t) {
            const e = this.elements,
              n = t.elements;
            for (let t = 0; t < 9; t++) if (e[t] !== n[t]) return !1;
            return !0;
          }
          fromArray(t, e = 0) {
            for (let n = 0; n < 9; n++) this.elements[n] = t[n + e];
            return this;
          }
          toArray(t = [], e = 0) {
            const n = this.elements;
            return (
              (t[e] = n[0]),
              (t[e + 1] = n[1]),
              (t[e + 2] = n[2]),
              (t[e + 3] = n[3]),
              (t[e + 4] = n[4]),
              (t[e + 5] = n[5]),
              (t[e + 6] = n[6]),
              (t[e + 7] = n[7]),
              (t[e + 8] = n[8]),
              t
            );
          }
          clone() {
            return new this.constructor().fromArray(this.elements);
          }
        }
        let Jn;
        Kn.prototype.isMatrix3 = !0;
        class Zn {
          static getDataURL(t) {
            if (/^data:/i.test(t.src)) return t.src;
            if ("undefined" == typeof HTMLCanvasElement) return t.src;
            let e;
            if (t instanceof HTMLCanvasElement) e = t;
            else {
              void 0 === Jn &&
                (Jn = document.createElementNS(
                  "http://www.w3.org/1999/xhtml",
                  "canvas"
                )),
                (Jn.width = t.width),
                (Jn.height = t.height);
              const n = Jn.getContext("2d");
              t instanceof ImageData
                ? n.putImageData(t, 0, 0)
                : n.drawImage(t, 0, 0, t.width, t.height),
                (e = Jn);
            }
            return e.width > 2048 || e.height > 2048
              ? (console.warn(
                  "THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
                  t
                ),
                e.toDataURL("image/jpeg", 0.6))
              : e.toDataURL("image/png");
          }
        }
        let Qn = 0;
        class ti extends Bn {
          constructor(
            t = ti.DEFAULT_IMAGE,
            e = ti.DEFAULT_MAPPING,
            n = dt,
            i = dt,
            r = xt,
            o = wt,
            s = Ft,
            a = St,
            l = 1,
            c = Ke
          ) {
            super(),
              Object.defineProperty(this, "id", { value: Qn++ }),
              (this.uuid = jn()),
              (this.name = ""),
              (this.image = t),
              (this.mipmaps = []),
              (this.mapping = e),
              (this.wrapS = n),
              (this.wrapT = i),
              (this.magFilter = r),
              (this.minFilter = o),
              (this.anisotropy = l),
              (this.format = s),
              (this.internalFormat = null),
              (this.type = a),
              (this.offset = new $n(0, 0)),
              (this.repeat = new $n(1, 1)),
              (this.center = new $n(0, 0)),
              (this.rotation = 0),
              (this.matrixAutoUpdate = !0),
              (this.matrix = new Kn()),
              (this.generateMipmaps = !0),
              (this.premultiplyAlpha = !1),
              (this.flipY = !0),
              (this.unpackAlignment = 4),
              (this.encoding = c),
              (this.version = 0),
              (this.onUpdate = null),
              (this.isRenderTargetTexture = !1);
          }
          updateMatrix() {
            this.matrix.setUvTransform(
              this.offset.x,
              this.offset.y,
              this.repeat.x,
              this.repeat.y,
              this.rotation,
              this.center.x,
              this.center.y
            );
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            return (
              (this.name = t.name),
              (this.image = t.image),
              (this.mipmaps = t.mipmaps.slice(0)),
              (this.mapping = t.mapping),
              (this.wrapS = t.wrapS),
              (this.wrapT = t.wrapT),
              (this.magFilter = t.magFilter),
              (this.minFilter = t.minFilter),
              (this.anisotropy = t.anisotropy),
              (this.format = t.format),
              (this.internalFormat = t.internalFormat),
              (this.type = t.type),
              this.offset.copy(t.offset),
              this.repeat.copy(t.repeat),
              this.center.copy(t.center),
              (this.rotation = t.rotation),
              (this.matrixAutoUpdate = t.matrixAutoUpdate),
              this.matrix.copy(t.matrix),
              (this.generateMipmaps = t.generateMipmaps),
              (this.premultiplyAlpha = t.premultiplyAlpha),
              (this.flipY = t.flipY),
              (this.unpackAlignment = t.unpackAlignment),
              (this.encoding = t.encoding),
              this
            );
          }
          toJSON(t) {
            const e = void 0 === t || "string" == typeof t;
            if (!e && void 0 !== t.textures[this.uuid])
              return t.textures[this.uuid];
            const n = {
              metadata: {
                version: 4.5,
                type: "Texture",
                generator: "Texture.toJSON",
              },
              uuid: this.uuid,
              name: this.name,
              mapping: this.mapping,
              repeat: [this.repeat.x, this.repeat.y],
              offset: [this.offset.x, this.offset.y],
              center: [this.center.x, this.center.y],
              rotation: this.rotation,
              wrap: [this.wrapS, this.wrapT],
              format: this.format,
              type: this.type,
              encoding: this.encoding,
              minFilter: this.minFilter,
              magFilter: this.magFilter,
              anisotropy: this.anisotropy,
              flipY: this.flipY,
              premultiplyAlpha: this.premultiplyAlpha,
              unpackAlignment: this.unpackAlignment,
            };
            if (void 0 !== this.image) {
              const i = this.image;
              if (
                (void 0 === i.uuid && (i.uuid = jn()),
                !e && void 0 === t.images[i.uuid])
              ) {
                let e;
                if (Array.isArray(i)) {
                  e = [];
                  for (let t = 0, n = i.length; t < n; t++)
                    i[t].isDataTexture
                      ? e.push(ei(i[t].image))
                      : e.push(ei(i[t]));
                } else e = ei(i);
                t.images[i.uuid] = { uuid: i.uuid, url: e };
              }
              n.image = i.uuid;
            }
            return e || (t.textures[this.uuid] = n), n;
          }
          dispose() {
            this.dispatchEvent({ type: "dispose" });
          }
          transformUv(t) {
            if (this.mapping !== rt) return t;
            if ((t.applyMatrix3(this.matrix), t.x < 0 || t.x > 1))
              switch (this.wrapS) {
                case ht:
                  t.x = t.x - Math.floor(t.x);
                  break;
                case dt:
                  t.x = t.x < 0 ? 0 : 1;
                  break;
                case pt:
                  1 === Math.abs(Math.floor(t.x) % 2)
                    ? (t.x = Math.ceil(t.x) - t.x)
                    : (t.x = t.x - Math.floor(t.x));
              }
            if (t.y < 0 || t.y > 1)
              switch (this.wrapT) {
                case ht:
                  t.y = t.y - Math.floor(t.y);
                  break;
                case dt:
                  t.y = t.y < 0 ? 0 : 1;
                  break;
                case pt:
                  1 === Math.abs(Math.floor(t.y) % 2)
                    ? (t.y = Math.ceil(t.y) - t.y)
                    : (t.y = t.y - Math.floor(t.y));
              }
            return this.flipY && (t.y = 1 - t.y), t;
          }
          set needsUpdate(t) {
            !0 === t && this.version++;
          }
        }
        function ei(t) {
          return ("undefined" != typeof HTMLImageElement &&
            t instanceof HTMLImageElement) ||
            ("undefined" != typeof HTMLCanvasElement &&
              t instanceof HTMLCanvasElement) ||
            ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap)
            ? Zn.getDataURL(t)
            : t.data
            ? {
                data: Array.prototype.slice.call(t.data),
                width: t.width,
                height: t.height,
                type: t.data.constructor.name,
              }
            : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
        }
        (ti.DEFAULT_IMAGE = void 0),
          (ti.DEFAULT_MAPPING = rt),
          (ti.prototype.isTexture = !0);
        class ni {
          constructor(t = 0, e = 0, n = 0, i = 1) {
            (this.x = t), (this.y = e), (this.z = n), (this.w = i);
          }
          get width() {
            return this.z;
          }
          set width(t) {
            this.z = t;
          }
          get height() {
            return this.w;
          }
          set height(t) {
            this.w = t;
          }
          set(t, e, n, i) {
            return (this.x = t), (this.y = e), (this.z = n), (this.w = i), this;
          }
          setScalar(t) {
            return (this.x = t), (this.y = t), (this.z = t), (this.w = t), this;
          }
          setX(t) {
            return (this.x = t), this;
          }
          setY(t) {
            return (this.y = t), this;
          }
          setZ(t) {
            return (this.z = t), this;
          }
          setW(t) {
            return (this.w = t), this;
          }
          setComponent(t, e) {
            switch (t) {
              case 0:
                this.x = e;
                break;
              case 1:
                this.y = e;
                break;
              case 2:
                this.z = e;
                break;
              case 3:
                this.w = e;
                break;
              default:
                throw new Error("index is out of range: " + t);
            }
            return this;
          }
          getComponent(t) {
            switch (t) {
              case 0:
                return this.x;
              case 1:
                return this.y;
              case 2:
                return this.z;
              case 3:
                return this.w;
              default:
                throw new Error("index is out of range: " + t);
            }
          }
          clone() {
            return new this.constructor(this.x, this.y, this.z, this.w);
          }
          copy(t) {
            return (
              (this.x = t.x),
              (this.y = t.y),
              (this.z = t.z),
              (this.w = void 0 !== t.w ? t.w : 1),
              this
            );
          }
          add(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
                ),
                this.addVectors(t, e))
              : ((this.x += t.x),
                (this.y += t.y),
                (this.z += t.z),
                (this.w += t.w),
                this);
          }
          addScalar(t) {
            return (
              (this.x += t), (this.y += t), (this.z += t), (this.w += t), this
            );
          }
          addVectors(t, e) {
            return (
              (this.x = t.x + e.x),
              (this.y = t.y + e.y),
              (this.z = t.z + e.z),
              (this.w = t.w + e.w),
              this
            );
          }
          addScaledVector(t, e) {
            return (
              (this.x += t.x * e),
              (this.y += t.y * e),
              (this.z += t.z * e),
              (this.w += t.w * e),
              this
            );
          }
          sub(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
                ),
                this.subVectors(t, e))
              : ((this.x -= t.x),
                (this.y -= t.y),
                (this.z -= t.z),
                (this.w -= t.w),
                this);
          }
          subScalar(t) {
            return (
              (this.x -= t), (this.y -= t), (this.z -= t), (this.w -= t), this
            );
          }
          subVectors(t, e) {
            return (
              (this.x = t.x - e.x),
              (this.y = t.y - e.y),
              (this.z = t.z - e.z),
              (this.w = t.w - e.w),
              this
            );
          }
          multiply(t) {
            return (
              (this.x *= t.x),
              (this.y *= t.y),
              (this.z *= t.z),
              (this.w *= t.w),
              this
            );
          }
          multiplyScalar(t) {
            return (
              (this.x *= t), (this.y *= t), (this.z *= t), (this.w *= t), this
            );
          }
          applyMatrix4(t) {
            const e = this.x,
              n = this.y,
              i = this.z,
              r = this.w,
              o = t.elements;
            return (
              (this.x = o[0] * e + o[4] * n + o[8] * i + o[12] * r),
              (this.y = o[1] * e + o[5] * n + o[9] * i + o[13] * r),
              (this.z = o[2] * e + o[6] * n + o[10] * i + o[14] * r),
              (this.w = o[3] * e + o[7] * n + o[11] * i + o[15] * r),
              this
            );
          }
          divideScalar(t) {
            return this.multiplyScalar(1 / t);
          }
          setAxisAngleFromQuaternion(t) {
            this.w = 2 * Math.acos(t.w);
            const e = Math.sqrt(1 - t.w * t.w);
            return (
              e < 1e-4
                ? ((this.x = 1), (this.y = 0), (this.z = 0))
                : ((this.x = t.x / e), (this.y = t.y / e), (this.z = t.z / e)),
              this
            );
          }
          setAxisAngleFromRotationMatrix(t) {
            let e, n, i, r;
            const o = 0.01,
              s = 0.1,
              a = t.elements,
              l = a[0],
              c = a[4],
              u = a[8],
              h = a[1],
              d = a[5],
              p = a[9],
              f = a[2],
              m = a[6],
              g = a[10];
            if (
              Math.abs(c - h) < o &&
              Math.abs(u - f) < o &&
              Math.abs(p - m) < o
            ) {
              if (
                Math.abs(c + h) < s &&
                Math.abs(u + f) < s &&
                Math.abs(p + m) < s &&
                Math.abs(l + d + g - 3) < s
              )
                return this.set(1, 0, 0, 0), this;
              e = Math.PI;
              const t = (l + 1) / 2,
                a = (d + 1) / 2,
                v = (g + 1) / 2,
                y = (c + h) / 4,
                x = (u + f) / 4,
                _ = (p + m) / 4;
              return (
                t > a && t > v
                  ? t < o
                    ? ((n = 0), (i = 0.707106781), (r = 0.707106781))
                    : ((n = Math.sqrt(t)), (i = y / n), (r = x / n))
                  : a > v
                  ? a < o
                    ? ((n = 0.707106781), (i = 0), (r = 0.707106781))
                    : ((i = Math.sqrt(a)), (n = y / i), (r = _ / i))
                  : v < o
                  ? ((n = 0.707106781), (i = 0.707106781), (r = 0))
                  : ((r = Math.sqrt(v)), (n = x / r), (i = _ / r)),
                this.set(n, i, r, e),
                this
              );
            }
            let v = Math.sqrt(
              (m - p) * (m - p) + (u - f) * (u - f) + (h - c) * (h - c)
            );
            return (
              Math.abs(v) < 0.001 && (v = 1),
              (this.x = (m - p) / v),
              (this.y = (u - f) / v),
              (this.z = (h - c) / v),
              (this.w = Math.acos((l + d + g - 1) / 2)),
              this
            );
          }
          min(t) {
            return (
              (this.x = Math.min(this.x, t.x)),
              (this.y = Math.min(this.y, t.y)),
              (this.z = Math.min(this.z, t.z)),
              (this.w = Math.min(this.w, t.w)),
              this
            );
          }
          max(t) {
            return (
              (this.x = Math.max(this.x, t.x)),
              (this.y = Math.max(this.y, t.y)),
              (this.z = Math.max(this.z, t.z)),
              (this.w = Math.max(this.w, t.w)),
              this
            );
          }
          clamp(t, e) {
            return (
              (this.x = Math.max(t.x, Math.min(e.x, this.x))),
              (this.y = Math.max(t.y, Math.min(e.y, this.y))),
              (this.z = Math.max(t.z, Math.min(e.z, this.z))),
              (this.w = Math.max(t.w, Math.min(e.w, this.w))),
              this
            );
          }
          clampScalar(t, e) {
            return (
              (this.x = Math.max(t, Math.min(e, this.x))),
              (this.y = Math.max(t, Math.min(e, this.y))),
              (this.z = Math.max(t, Math.min(e, this.z))),
              (this.w = Math.max(t, Math.min(e, this.w))),
              this
            );
          }
          clampLength(t, e) {
            const n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(
              Math.max(t, Math.min(e, n))
            );
          }
          floor() {
            return (
              (this.x = Math.floor(this.x)),
              (this.y = Math.floor(this.y)),
              (this.z = Math.floor(this.z)),
              (this.w = Math.floor(this.w)),
              this
            );
          }
          ceil() {
            return (
              (this.x = Math.ceil(this.x)),
              (this.y = Math.ceil(this.y)),
              (this.z = Math.ceil(this.z)),
              (this.w = Math.ceil(this.w)),
              this
            );
          }
          round() {
            return (
              (this.x = Math.round(this.x)),
              (this.y = Math.round(this.y)),
              (this.z = Math.round(this.z)),
              (this.w = Math.round(this.w)),
              this
            );
          }
          roundToZero() {
            return (
              (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
              (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
              (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
              (this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w)),
              this
            );
          }
          negate() {
            return (
              (this.x = -this.x),
              (this.y = -this.y),
              (this.z = -this.z),
              (this.w = -this.w),
              this
            );
          }
          dot(t) {
            return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w;
          }
          lengthSq() {
            return (
              this.x * this.x +
              this.y * this.y +
              this.z * this.z +
              this.w * this.w
            );
          }
          length() {
            return Math.sqrt(
              this.x * this.x +
                this.y * this.y +
                this.z * this.z +
                this.w * this.w
            );
          }
          manhattanLength() {
            return (
              Math.abs(this.x) +
              Math.abs(this.y) +
              Math.abs(this.z) +
              Math.abs(this.w)
            );
          }
          normalize() {
            return this.divideScalar(this.length() || 1);
          }
          setLength(t) {
            return this.normalize().multiplyScalar(t);
          }
          lerp(t, e) {
            return (
              (this.x += (t.x - this.x) * e),
              (this.y += (t.y - this.y) * e),
              (this.z += (t.z - this.z) * e),
              (this.w += (t.w - this.w) * e),
              this
            );
          }
          lerpVectors(t, e, n) {
            return (
              (this.x = t.x + (e.x - t.x) * n),
              (this.y = t.y + (e.y - t.y) * n),
              (this.z = t.z + (e.z - t.z) * n),
              (this.w = t.w + (e.w - t.w) * n),
              this
            );
          }
          equals(t) {
            return (
              t.x === this.x &&
              t.y === this.y &&
              t.z === this.z &&
              t.w === this.w
            );
          }
          fromArray(t, e = 0) {
            return (
              (this.x = t[e]),
              (this.y = t[e + 1]),
              (this.z = t[e + 2]),
              (this.w = t[e + 3]),
              this
            );
          }
          toArray(t = [], e = 0) {
            return (
              (t[e] = this.x),
              (t[e + 1] = this.y),
              (t[e + 2] = this.z),
              (t[e + 3] = this.w),
              t
            );
          }
          fromBufferAttribute(t, e, n) {
            return (
              void 0 !== n &&
                console.warn(
                  "THREE.Vector4: offset has been removed from .fromBufferAttribute()."
                ),
              (this.x = t.getX(e)),
              (this.y = t.getY(e)),
              (this.z = t.getZ(e)),
              (this.w = t.getW(e)),
              this
            );
          }
          random() {
            return (
              (this.x = Math.random()),
              (this.y = Math.random()),
              (this.z = Math.random()),
              (this.w = Math.random()),
              this
            );
          }
        }
        ni.prototype.isVector4 = !0;
        class ii extends Bn {
          constructor(t, e, n = {}) {
            super(),
              (this.width = t),
              (this.height = e),
              (this.depth = 1),
              (this.scissor = new ni(0, 0, t, e)),
              (this.scissorTest = !1),
              (this.viewport = new ni(0, 0, t, e)),
              (this.texture = new ti(
                void 0,
                n.mapping,
                n.wrapS,
                n.wrapT,
                n.magFilter,
                n.minFilter,
                n.format,
                n.type,
                n.anisotropy,
                n.encoding
              )),
              (this.texture.isRenderTargetTexture = !0),
              (this.texture.image = { width: t, height: e, depth: 1 }),
              (this.texture.generateMipmaps =
                void 0 !== n.generateMipmaps && n.generateMipmaps),
              (this.texture.minFilter =
                void 0 !== n.minFilter ? n.minFilter : xt),
              (this.depthBuffer = void 0 === n.depthBuffer || n.depthBuffer),
              (this.stencilBuffer =
                void 0 !== n.stencilBuffer && n.stencilBuffer),
              (this.depthTexture =
                void 0 !== n.depthTexture ? n.depthTexture : null);
          }
          setTexture(t) {
            (t.image = {
              width: this.width,
              height: this.height,
              depth: this.depth,
            }),
              (this.texture = t);
          }
          setSize(t, e, n = 1) {
            (this.width === t && this.height === e && this.depth === n) ||
              ((this.width = t),
              (this.height = e),
              (this.depth = n),
              (this.texture.image.width = t),
              (this.texture.image.height = e),
              (this.texture.image.depth = n),
              this.dispose()),
              this.viewport.set(0, 0, t, e),
              this.scissor.set(0, 0, t, e);
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            return (
              (this.width = t.width),
              (this.height = t.height),
              (this.depth = t.depth),
              this.viewport.copy(t.viewport),
              (this.texture = t.texture.clone()),
              (this.texture.image = { ...this.texture.image }),
              (this.depthBuffer = t.depthBuffer),
              (this.stencilBuffer = t.stencilBuffer),
              (this.depthTexture = t.depthTexture),
              this
            );
          }
          dispose() {
            this.dispatchEvent({ type: "dispose" });
          }
        }
        ii.prototype.isWebGLRenderTarget = !0;
        class ri extends ii {
          constructor(t, e, n) {
            super(t, e);
            const i = this.texture;
            this.texture = [];
            for (let t = 0; t < n; t++) this.texture[t] = i.clone();
          }
          setSize(t, e, n = 1) {
            if (this.width !== t || this.height !== e || this.depth !== n) {
              (this.width = t), (this.height = e), (this.depth = n);
              for (let i = 0, r = this.texture.length; i < r; i++)
                (this.texture[i].image.width = t),
                  (this.texture[i].image.height = e),
                  (this.texture[i].image.depth = n);
              this.dispose();
            }
            return (
              this.viewport.set(0, 0, t, e), this.scissor.set(0, 0, t, e), this
            );
          }
          copy(t) {
            this.dispose(),
              (this.width = t.width),
              (this.height = t.height),
              (this.depth = t.depth),
              this.viewport.set(0, 0, this.width, this.height),
              this.scissor.set(0, 0, this.width, this.height),
              (this.depthBuffer = t.depthBuffer),
              (this.stencilBuffer = t.stencilBuffer),
              (this.depthTexture = t.depthTexture),
              (this.texture.length = 0);
            for (let e = 0, n = t.texture.length; e < n; e++)
              this.texture[e] = t.texture[e].clone();
            return this;
          }
        }
        ri.prototype.isWebGLMultipleRenderTargets = !0;
        class oi extends ii {
          constructor(t, e, n) {
            super(t, e, n), (this.samples = 4);
          }
          copy(t) {
            return super.copy.call(this, t), (this.samples = t.samples), this;
          }
        }
        oi.prototype.isWebGLMultisampleRenderTarget = !0;
        class si {
          constructor(t = 0, e = 0, n = 0, i = 1) {
            (this._x = t), (this._y = e), (this._z = n), (this._w = i);
          }
          static slerp(t, e, n, i) {
            return (
              console.warn(
                "THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."
              ),
              n.slerpQuaternions(t, e, i)
            );
          }
          static slerpFlat(t, e, n, i, r, o, s) {
            let a = n[i + 0],
              l = n[i + 1],
              c = n[i + 2],
              u = n[i + 3];
            const h = r[o + 0],
              d = r[o + 1],
              p = r[o + 2],
              f = r[o + 3];
            if (0 === s)
              return (
                (t[e + 0] = a),
                (t[e + 1] = l),
                (t[e + 2] = c),
                void (t[e + 3] = u)
              );
            if (1 === s)
              return (
                (t[e + 0] = h),
                (t[e + 1] = d),
                (t[e + 2] = p),
                void (t[e + 3] = f)
              );
            if (u !== f || a !== h || l !== d || c !== p) {
              let t = 1 - s;
              const e = a * h + l * d + c * p + u * f,
                n = e >= 0 ? 1 : -1,
                i = 1 - e * e;
              if (i > Number.EPSILON) {
                const r = Math.sqrt(i),
                  o = Math.atan2(r, e * n);
                (t = Math.sin(t * o) / r), (s = Math.sin(s * o) / r);
              }
              const r = s * n;
              if (
                ((a = a * t + h * r),
                (l = l * t + d * r),
                (c = c * t + p * r),
                (u = u * t + f * r),
                t === 1 - s)
              ) {
                const t = 1 / Math.sqrt(a * a + l * l + c * c + u * u);
                (a *= t), (l *= t), (c *= t), (u *= t);
              }
            }
            (t[e] = a), (t[e + 1] = l), (t[e + 2] = c), (t[e + 3] = u);
          }
          static multiplyQuaternionsFlat(t, e, n, i, r, o) {
            const s = n[i],
              a = n[i + 1],
              l = n[i + 2],
              c = n[i + 3],
              u = r[o],
              h = r[o + 1],
              d = r[o + 2],
              p = r[o + 3];
            return (
              (t[e] = s * p + c * u + a * d - l * h),
              (t[e + 1] = a * p + c * h + l * u - s * d),
              (t[e + 2] = l * p + c * d + s * h - a * u),
              (t[e + 3] = c * p - s * u - a * h - l * d),
              t
            );
          }
          get x() {
            return this._x;
          }
          set x(t) {
            (this._x = t), this._onChangeCallback();
          }
          get y() {
            return this._y;
          }
          set y(t) {
            (this._y = t), this._onChangeCallback();
          }
          get z() {
            return this._z;
          }
          set z(t) {
            (this._z = t), this._onChangeCallback();
          }
          get w() {
            return this._w;
          }
          set w(t) {
            (this._w = t), this._onChangeCallback();
          }
          set(t, e, n, i) {
            return (
              (this._x = t),
              (this._y = e),
              (this._z = n),
              (this._w = i),
              this._onChangeCallback(),
              this
            );
          }
          clone() {
            return new this.constructor(this._x, this._y, this._z, this._w);
          }
          copy(t) {
            return (
              (this._x = t.x),
              (this._y = t.y),
              (this._z = t.z),
              (this._w = t.w),
              this._onChangeCallback(),
              this
            );
          }
          setFromEuler(t, e) {
            if (!t || !t.isEuler)
              throw new Error(
                "THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order."
              );
            const n = t._x,
              i = t._y,
              r = t._z,
              o = t._order,
              s = Math.cos,
              a = Math.sin,
              l = s(n / 2),
              c = s(i / 2),
              u = s(r / 2),
              h = a(n / 2),
              d = a(i / 2),
              p = a(r / 2);
            switch (o) {
              case "XYZ":
                (this._x = h * c * u + l * d * p),
                  (this._y = l * d * u - h * c * p),
                  (this._z = l * c * p + h * d * u),
                  (this._w = l * c * u - h * d * p);
                break;
              case "YXZ":
                (this._x = h * c * u + l * d * p),
                  (this._y = l * d * u - h * c * p),
                  (this._z = l * c * p - h * d * u),
                  (this._w = l * c * u + h * d * p);
                break;
              case "ZXY":
                (this._x = h * c * u - l * d * p),
                  (this._y = l * d * u + h * c * p),
                  (this._z = l * c * p + h * d * u),
                  (this._w = l * c * u - h * d * p);
                break;
              case "ZYX":
                (this._x = h * c * u - l * d * p),
                  (this._y = l * d * u + h * c * p),
                  (this._z = l * c * p - h * d * u),
                  (this._w = l * c * u + h * d * p);
                break;
              case "YZX":
                (this._x = h * c * u + l * d * p),
                  (this._y = l * d * u + h * c * p),
                  (this._z = l * c * p - h * d * u),
                  (this._w = l * c * u - h * d * p);
                break;
              case "XZY":
                (this._x = h * c * u - l * d * p),
                  (this._y = l * d * u - h * c * p),
                  (this._z = l * c * p + h * d * u),
                  (this._w = l * c * u + h * d * p);
                break;
              default:
                console.warn(
                  "THREE.Quaternion: .setFromEuler() encountered an unknown order: " +
                    o
                );
            }
            return !1 !== e && this._onChangeCallback(), this;
          }
          setFromAxisAngle(t, e) {
            const n = e / 2,
              i = Math.sin(n);
            return (
              (this._x = t.x * i),
              (this._y = t.y * i),
              (this._z = t.z * i),
              (this._w = Math.cos(n)),
              this._onChangeCallback(),
              this
            );
          }
          setFromRotationMatrix(t) {
            const e = t.elements,
              n = e[0],
              i = e[4],
              r = e[8],
              o = e[1],
              s = e[5],
              a = e[9],
              l = e[2],
              c = e[6],
              u = e[10],
              h = n + s + u;
            if (h > 0) {
              const t = 0.5 / Math.sqrt(h + 1);
              (this._w = 0.25 / t),
                (this._x = (c - a) * t),
                (this._y = (r - l) * t),
                (this._z = (o - i) * t);
            } else if (n > s && n > u) {
              const t = 2 * Math.sqrt(1 + n - s - u);
              (this._w = (c - a) / t),
                (this._x = 0.25 * t),
                (this._y = (i + o) / t),
                (this._z = (r + l) / t);
            } else if (s > u) {
              const t = 2 * Math.sqrt(1 + s - n - u);
              (this._w = (r - l) / t),
                (this._x = (i + o) / t),
                (this._y = 0.25 * t),
                (this._z = (a + c) / t);
            } else {
              const t = 2 * Math.sqrt(1 + u - n - s);
              (this._w = (o - i) / t),
                (this._x = (r + l) / t),
                (this._y = (a + c) / t),
                (this._z = 0.25 * t);
            }
            return this._onChangeCallback(), this;
          }
          setFromUnitVectors(t, e) {
            let n = t.dot(e) + 1;
            return (
              n < Number.EPSILON
                ? ((n = 0),
                  Math.abs(t.x) > Math.abs(t.z)
                    ? ((this._x = -t.y),
                      (this._y = t.x),
                      (this._z = 0),
                      (this._w = n))
                    : ((this._x = 0),
                      (this._y = -t.z),
                      (this._z = t.y),
                      (this._w = n)))
                : ((this._x = t.y * e.z - t.z * e.y),
                  (this._y = t.z * e.x - t.x * e.z),
                  (this._z = t.x * e.y - t.y * e.x),
                  (this._w = n)),
              this.normalize()
            );
          }
          angleTo(t) {
            return 2 * Math.acos(Math.abs(Un(this.dot(t), -1, 1)));
          }
          rotateTowards(t, e) {
            const n = this.angleTo(t);
            if (0 === n) return this;
            const i = Math.min(1, e / n);
            return this.slerp(t, i), this;
          }
          identity() {
            return this.set(0, 0, 0, 1);
          }
          invert() {
            return this.conjugate();
          }
          conjugate() {
            return (
              (this._x *= -1),
              (this._y *= -1),
              (this._z *= -1),
              this._onChangeCallback(),
              this
            );
          }
          dot(t) {
            return (
              this._x * t._x + this._y * t._y + this._z * t._z + this._w * t._w
            );
          }
          lengthSq() {
            return (
              this._x * this._x +
              this._y * this._y +
              this._z * this._z +
              this._w * this._w
            );
          }
          length() {
            return Math.sqrt(
              this._x * this._x +
                this._y * this._y +
                this._z * this._z +
                this._w * this._w
            );
          }
          normalize() {
            let t = this.length();
            return (
              0 === t
                ? ((this._x = 0), (this._y = 0), (this._z = 0), (this._w = 1))
                : ((t = 1 / t),
                  (this._x = this._x * t),
                  (this._y = this._y * t),
                  (this._z = this._z * t),
                  (this._w = this._w * t)),
              this._onChangeCallback(),
              this
            );
          }
          multiply(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."
                ),
                this.multiplyQuaternions(t, e))
              : this.multiplyQuaternions(this, t);
          }
          premultiply(t) {
            return this.multiplyQuaternions(t, this);
          }
          multiplyQuaternions(t, e) {
            const n = t._x,
              i = t._y,
              r = t._z,
              o = t._w,
              s = e._x,
              a = e._y,
              l = e._z,
              c = e._w;
            return (
              (this._x = n * c + o * s + i * l - r * a),
              (this._y = i * c + o * a + r * s - n * l),
              (this._z = r * c + o * l + n * a - i * s),
              (this._w = o * c - n * s - i * a - r * l),
              this._onChangeCallback(),
              this
            );
          }
          slerp(t, e) {
            if (0 === e) return this;
            if (1 === e) return this.copy(t);
            const n = this._x,
              i = this._y,
              r = this._z,
              o = this._w;
            let s = o * t._w + n * t._x + i * t._y + r * t._z;
            if (
              (s < 0
                ? ((this._w = -t._w),
                  (this._x = -t._x),
                  (this._y = -t._y),
                  (this._z = -t._z),
                  (s = -s))
                : this.copy(t),
              s >= 1)
            )
              return (
                (this._w = o), (this._x = n), (this._y = i), (this._z = r), this
              );
            const a = 1 - s * s;
            if (a <= Number.EPSILON) {
              const t = 1 - e;
              return (
                (this._w = t * o + e * this._w),
                (this._x = t * n + e * this._x),
                (this._y = t * i + e * this._y),
                (this._z = t * r + e * this._z),
                this.normalize(),
                this._onChangeCallback(),
                this
              );
            }
            const l = Math.sqrt(a),
              c = Math.atan2(l, s),
              u = Math.sin((1 - e) * c) / l,
              h = Math.sin(e * c) / l;
            return (
              (this._w = o * u + this._w * h),
              (this._x = n * u + this._x * h),
              (this._y = i * u + this._y * h),
              (this._z = r * u + this._z * h),
              this._onChangeCallback(),
              this
            );
          }
          slerpQuaternions(t, e, n) {
            this.copy(t).slerp(e, n);
          }
          equals(t) {
            return (
              t._x === this._x &&
              t._y === this._y &&
              t._z === this._z &&
              t._w === this._w
            );
          }
          fromArray(t, e = 0) {
            return (
              (this._x = t[e]),
              (this._y = t[e + 1]),
              (this._z = t[e + 2]),
              (this._w = t[e + 3]),
              this._onChangeCallback(),
              this
            );
          }
          toArray(t = [], e = 0) {
            return (
              (t[e] = this._x),
              (t[e + 1] = this._y),
              (t[e + 2] = this._z),
              (t[e + 3] = this._w),
              t
            );
          }
          fromBufferAttribute(t, e) {
            return (
              (this._x = t.getX(e)),
              (this._y = t.getY(e)),
              (this._z = t.getZ(e)),
              (this._w = t.getW(e)),
              this
            );
          }
          _onChange(t) {
            return (this._onChangeCallback = t), this;
          }
          _onChangeCallback() {}
        }
        si.prototype.isQuaternion = !0;
        class ai {
          constructor(t = 0, e = 0, n = 0) {
            (this.x = t), (this.y = e), (this.z = n);
          }
          set(t, e, n) {
            return (
              void 0 === n && (n = this.z),
              (this.x = t),
              (this.y = e),
              (this.z = n),
              this
            );
          }
          setScalar(t) {
            return (this.x = t), (this.y = t), (this.z = t), this;
          }
          setX(t) {
            return (this.x = t), this;
          }
          setY(t) {
            return (this.y = t), this;
          }
          setZ(t) {
            return (this.z = t), this;
          }
          setComponent(t, e) {
            switch (t) {
              case 0:
                this.x = e;
                break;
              case 1:
                this.y = e;
                break;
              case 2:
                this.z = e;
                break;
              default:
                throw new Error("index is out of range: " + t);
            }
            return this;
          }
          getComponent(t) {
            switch (t) {
              case 0:
                return this.x;
              case 1:
                return this.y;
              case 2:
                return this.z;
              default:
                throw new Error("index is out of range: " + t);
            }
          }
          clone() {
            return new this.constructor(this.x, this.y, this.z);
          }
          copy(t) {
            return (this.x = t.x), (this.y = t.y), (this.z = t.z), this;
          }
          add(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
                ),
                this.addVectors(t, e))
              : ((this.x += t.x), (this.y += t.y), (this.z += t.z), this);
          }
          addScalar(t) {
            return (this.x += t), (this.y += t), (this.z += t), this;
          }
          addVectors(t, e) {
            return (
              (this.x = t.x + e.x),
              (this.y = t.y + e.y),
              (this.z = t.z + e.z),
              this
            );
          }
          addScaledVector(t, e) {
            return (
              (this.x += t.x * e),
              (this.y += t.y * e),
              (this.z += t.z * e),
              this
            );
          }
          sub(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
                ),
                this.subVectors(t, e))
              : ((this.x -= t.x), (this.y -= t.y), (this.z -= t.z), this);
          }
          subScalar(t) {
            return (this.x -= t), (this.y -= t), (this.z -= t), this;
          }
          subVectors(t, e) {
            return (
              (this.x = t.x - e.x),
              (this.y = t.y - e.y),
              (this.z = t.z - e.z),
              this
            );
          }
          multiply(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."
                ),
                this.multiplyVectors(t, e))
              : ((this.x *= t.x), (this.y *= t.y), (this.z *= t.z), this);
          }
          multiplyScalar(t) {
            return (this.x *= t), (this.y *= t), (this.z *= t), this;
          }
          multiplyVectors(t, e) {
            return (
              (this.x = t.x * e.x),
              (this.y = t.y * e.y),
              (this.z = t.z * e.z),
              this
            );
          }
          applyEuler(t) {
            return (
              (t && t.isEuler) ||
                console.error(
                  "THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."
                ),
              this.applyQuaternion(ci.setFromEuler(t))
            );
          }
          applyAxisAngle(t, e) {
            return this.applyQuaternion(ci.setFromAxisAngle(t, e));
          }
          applyMatrix3(t) {
            const e = this.x,
              n = this.y,
              i = this.z,
              r = t.elements;
            return (
              (this.x = r[0] * e + r[3] * n + r[6] * i),
              (this.y = r[1] * e + r[4] * n + r[7] * i),
              (this.z = r[2] * e + r[5] * n + r[8] * i),
              this
            );
          }
          applyNormalMatrix(t) {
            return this.applyMatrix3(t).normalize();
          }
          applyMatrix4(t) {
            const e = this.x,
              n = this.y,
              i = this.z,
              r = t.elements,
              o = 1 / (r[3] * e + r[7] * n + r[11] * i + r[15]);
            return (
              (this.x = (r[0] * e + r[4] * n + r[8] * i + r[12]) * o),
              (this.y = (r[1] * e + r[5] * n + r[9] * i + r[13]) * o),
              (this.z = (r[2] * e + r[6] * n + r[10] * i + r[14]) * o),
              this
            );
          }
          applyQuaternion(t) {
            const e = this.x,
              n = this.y,
              i = this.z,
              r = t.x,
              o = t.y,
              s = t.z,
              a = t.w,
              l = a * e + o * i - s * n,
              c = a * n + s * e - r * i,
              u = a * i + r * n - o * e,
              h = -r * e - o * n - s * i;
            return (
              (this.x = l * a + h * -r + c * -s - u * -o),
              (this.y = c * a + h * -o + u * -r - l * -s),
              (this.z = u * a + h * -s + l * -o - c * -r),
              this
            );
          }
          project(t) {
            return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(
              t.projectionMatrix
            );
          }
          unproject(t) {
            return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(
              t.matrixWorld
            );
          }
          transformDirection(t) {
            const e = this.x,
              n = this.y,
              i = this.z,
              r = t.elements;
            return (
              (this.x = r[0] * e + r[4] * n + r[8] * i),
              (this.y = r[1] * e + r[5] * n + r[9] * i),
              (this.z = r[2] * e + r[6] * n + r[10] * i),
              this.normalize()
            );
          }
          divide(t) {
            return (this.x /= t.x), (this.y /= t.y), (this.z /= t.z), this;
          }
          divideScalar(t) {
            return this.multiplyScalar(1 / t);
          }
          min(t) {
            return (
              (this.x = Math.min(this.x, t.x)),
              (this.y = Math.min(this.y, t.y)),
              (this.z = Math.min(this.z, t.z)),
              this
            );
          }
          max(t) {
            return (
              (this.x = Math.max(this.x, t.x)),
              (this.y = Math.max(this.y, t.y)),
              (this.z = Math.max(this.z, t.z)),
              this
            );
          }
          clamp(t, e) {
            return (
              (this.x = Math.max(t.x, Math.min(e.x, this.x))),
              (this.y = Math.max(t.y, Math.min(e.y, this.y))),
              (this.z = Math.max(t.z, Math.min(e.z, this.z))),
              this
            );
          }
          clampScalar(t, e) {
            return (
              (this.x = Math.max(t, Math.min(e, this.x))),
              (this.y = Math.max(t, Math.min(e, this.y))),
              (this.z = Math.max(t, Math.min(e, this.z))),
              this
            );
          }
          clampLength(t, e) {
            const n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(
              Math.max(t, Math.min(e, n))
            );
          }
          floor() {
            return (
              (this.x = Math.floor(this.x)),
              (this.y = Math.floor(this.y)),
              (this.z = Math.floor(this.z)),
              this
            );
          }
          ceil() {
            return (
              (this.x = Math.ceil(this.x)),
              (this.y = Math.ceil(this.y)),
              (this.z = Math.ceil(this.z)),
              this
            );
          }
          round() {
            return (
              (this.x = Math.round(this.x)),
              (this.y = Math.round(this.y)),
              (this.z = Math.round(this.z)),
              this
            );
          }
          roundToZero() {
            return (
              (this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
              (this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
              (this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
              this
            );
          }
          negate() {
            return (
              (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this
            );
          }
          dot(t) {
            return this.x * t.x + this.y * t.y + this.z * t.z;
          }
          lengthSq() {
            return this.x * this.x + this.y * this.y + this.z * this.z;
          }
          length() {
            return Math.sqrt(
              this.x * this.x + this.y * this.y + this.z * this.z
            );
          }
          manhattanLength() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
          }
          normalize() {
            return this.divideScalar(this.length() || 1);
          }
          setLength(t) {
            return this.normalize().multiplyScalar(t);
          }
          lerp(t, e) {
            return (
              (this.x += (t.x - this.x) * e),
              (this.y += (t.y - this.y) * e),
              (this.z += (t.z - this.z) * e),
              this
            );
          }
          lerpVectors(t, e, n) {
            return (
              (this.x = t.x + (e.x - t.x) * n),
              (this.y = t.y + (e.y - t.y) * n),
              (this.z = t.z + (e.z - t.z) * n),
              this
            );
          }
          cross(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."
                ),
                this.crossVectors(t, e))
              : this.crossVectors(this, t);
          }
          crossVectors(t, e) {
            const n = t.x,
              i = t.y,
              r = t.z,
              o = e.x,
              s = e.y,
              a = e.z;
            return (
              (this.x = i * a - r * s),
              (this.y = r * o - n * a),
              (this.z = n * s - i * o),
              this
            );
          }
          projectOnVector(t) {
            const e = t.lengthSq();
            if (0 === e) return this.set(0, 0, 0);
            const n = t.dot(this) / e;
            return this.copy(t).multiplyScalar(n);
          }
          projectOnPlane(t) {
            return li.copy(this).projectOnVector(t), this.sub(li);
          }
          reflect(t) {
            return this.sub(li.copy(t).multiplyScalar(2 * this.dot(t)));
          }
          angleTo(t) {
            const e = Math.sqrt(this.lengthSq() * t.lengthSq());
            if (0 === e) return Math.PI / 2;
            const n = this.dot(t) / e;
            return Math.acos(Un(n, -1, 1));
          }
          distanceTo(t) {
            return Math.sqrt(this.distanceToSquared(t));
          }
          distanceToSquared(t) {
            const e = this.x - t.x,
              n = this.y - t.y,
              i = this.z - t.z;
            return e * e + n * n + i * i;
          }
          manhattanDistanceTo(t) {
            return (
              Math.abs(this.x - t.x) +
              Math.abs(this.y - t.y) +
              Math.abs(this.z - t.z)
            );
          }
          setFromSpherical(t) {
            return this.setFromSphericalCoords(t.radius, t.phi, t.theta);
          }
          setFromSphericalCoords(t, e, n) {
            const i = Math.sin(e) * t;
            return (
              (this.x = i * Math.sin(n)),
              (this.y = Math.cos(e) * t),
              (this.z = i * Math.cos(n)),
              this
            );
          }
          setFromCylindrical(t) {
            return this.setFromCylindricalCoords(t.radius, t.theta, t.y);
          }
          setFromCylindricalCoords(t, e, n) {
            return (
              (this.x = t * Math.sin(e)),
              (this.y = n),
              (this.z = t * Math.cos(e)),
              this
            );
          }
          setFromMatrixPosition(t) {
            const e = t.elements;
            return (this.x = e[12]), (this.y = e[13]), (this.z = e[14]), this;
          }
          setFromMatrixScale(t) {
            const e = this.setFromMatrixColumn(t, 0).length(),
              n = this.setFromMatrixColumn(t, 1).length(),
              i = this.setFromMatrixColumn(t, 2).length();
            return (this.x = e), (this.y = n), (this.z = i), this;
          }
          setFromMatrixColumn(t, e) {
            return this.fromArray(t.elements, 4 * e);
          }
          setFromMatrix3Column(t, e) {
            return this.fromArray(t.elements, 3 * e);
          }
          equals(t) {
            return t.x === this.x && t.y === this.y && t.z === this.z;
          }
          fromArray(t, e = 0) {
            return (
              (this.x = t[e]), (this.y = t[e + 1]), (this.z = t[e + 2]), this
            );
          }
          toArray(t = [], e = 0) {
            return (t[e] = this.x), (t[e + 1] = this.y), (t[e + 2] = this.z), t;
          }
          fromBufferAttribute(t, e, n) {
            return (
              void 0 !== n &&
                console.warn(
                  "THREE.Vector3: offset has been removed from .fromBufferAttribute()."
                ),
              (this.x = t.getX(e)),
              (this.y = t.getY(e)),
              (this.z = t.getZ(e)),
              this
            );
          }
          random() {
            return (
              (this.x = Math.random()),
              (this.y = Math.random()),
              (this.z = Math.random()),
              this
            );
          }
        }
        ai.prototype.isVector3 = !0;
        const li = new ai(),
          ci = new si();
        class ui {
          constructor(
            t = new ai(1 / 0, 1 / 0, 1 / 0),
            e = new ai(-1 / 0, -1 / 0, -1 / 0)
          ) {
            (this.min = t), (this.max = e);
          }
          set(t, e) {
            return this.min.copy(t), this.max.copy(e), this;
          }
          setFromArray(t) {
            let e = 1 / 0,
              n = 1 / 0,
              i = 1 / 0,
              r = -1 / 0,
              o = -1 / 0,
              s = -1 / 0;
            for (let a = 0, l = t.length; a < l; a += 3) {
              const l = t[a],
                c = t[a + 1],
                u = t[a + 2];
              l < e && (e = l),
                c < n && (n = c),
                u < i && (i = u),
                l > r && (r = l),
                c > o && (o = c),
                u > s && (s = u);
            }
            return this.min.set(e, n, i), this.max.set(r, o, s), this;
          }
          setFromBufferAttribute(t) {
            let e = 1 / 0,
              n = 1 / 0,
              i = 1 / 0,
              r = -1 / 0,
              o = -1 / 0,
              s = -1 / 0;
            for (let a = 0, l = t.count; a < l; a++) {
              const l = t.getX(a),
                c = t.getY(a),
                u = t.getZ(a);
              l < e && (e = l),
                c < n && (n = c),
                u < i && (i = u),
                l > r && (r = l),
                c > o && (o = c),
                u > s && (s = u);
            }
            return this.min.set(e, n, i), this.max.set(r, o, s), this;
          }
          setFromPoints(t) {
            this.makeEmpty();
            for (let e = 0, n = t.length; e < n; e++) this.expandByPoint(t[e]);
            return this;
          }
          setFromCenterAndSize(t, e) {
            const n = di.copy(e).multiplyScalar(0.5);
            return this.min.copy(t).sub(n), this.max.copy(t).add(n), this;
          }
          setFromObject(t) {
            return this.makeEmpty(), this.expandByObject(t);
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            return this.min.copy(t.min), this.max.copy(t.max), this;
          }
          makeEmpty() {
            return (
              (this.min.x = this.min.y = this.min.z = 1 / 0),
              (this.max.x = this.max.y = this.max.z = -1 / 0),
              this
            );
          }
          isEmpty() {
            return (
              this.max.x < this.min.x ||
              this.max.y < this.min.y ||
              this.max.z < this.min.z
            );
          }
          getCenter(t) {
            return this.isEmpty()
              ? t.set(0, 0, 0)
              : t.addVectors(this.min, this.max).multiplyScalar(0.5);
          }
          getSize(t) {
            return this.isEmpty()
              ? t.set(0, 0, 0)
              : t.subVectors(this.max, this.min);
          }
          expandByPoint(t) {
            return this.min.min(t), this.max.max(t), this;
          }
          expandByVector(t) {
            return this.min.sub(t), this.max.add(t), this;
          }
          expandByScalar(t) {
            return this.min.addScalar(-t), this.max.addScalar(t), this;
          }
          expandByObject(t) {
            t.updateWorldMatrix(!1, !1);
            const e = t.geometry;
            void 0 !== e &&
              (null === e.boundingBox && e.computeBoundingBox(),
              pi.copy(e.boundingBox),
              pi.applyMatrix4(t.matrixWorld),
              this.union(pi));
            const n = t.children;
            for (let t = 0, e = n.length; t < e; t++) this.expandByObject(n[t]);
            return this;
          }
          containsPoint(t) {
            return !(
              t.x < this.min.x ||
              t.x > this.max.x ||
              t.y < this.min.y ||
              t.y > this.max.y ||
              t.z < this.min.z ||
              t.z > this.max.z
            );
          }
          containsBox(t) {
            return (
              this.min.x <= t.min.x &&
              t.max.x <= this.max.x &&
              this.min.y <= t.min.y &&
              t.max.y <= this.max.y &&
              this.min.z <= t.min.z &&
              t.max.z <= this.max.z
            );
          }
          getParameter(t, e) {
            return e.set(
              (t.x - this.min.x) / (this.max.x - this.min.x),
              (t.y - this.min.y) / (this.max.y - this.min.y),
              (t.z - this.min.z) / (this.max.z - this.min.z)
            );
          }
          intersectsBox(t) {
            return !(
              t.max.x < this.min.x ||
              t.min.x > this.max.x ||
              t.max.y < this.min.y ||
              t.min.y > this.max.y ||
              t.max.z < this.min.z ||
              t.min.z > this.max.z
            );
          }
          intersectsSphere(t) {
            return (
              this.clampPoint(t.center, di),
              di.distanceToSquared(t.center) <= t.radius * t.radius
            );
          }
          intersectsPlane(t) {
            let e, n;
            return (
              t.normal.x > 0
                ? ((e = t.normal.x * this.min.x), (n = t.normal.x * this.max.x))
                : ((e = t.normal.x * this.max.x),
                  (n = t.normal.x * this.min.x)),
              t.normal.y > 0
                ? ((e += t.normal.y * this.min.y),
                  (n += t.normal.y * this.max.y))
                : ((e += t.normal.y * this.max.y),
                  (n += t.normal.y * this.min.y)),
              t.normal.z > 0
                ? ((e += t.normal.z * this.min.z),
                  (n += t.normal.z * this.max.z))
                : ((e += t.normal.z * this.max.z),
                  (n += t.normal.z * this.min.z)),
              e <= -t.constant && n >= -t.constant
            );
          }
          intersectsTriangle(t) {
            if (this.isEmpty()) return !1;
            this.getCenter(_i),
              bi.subVectors(this.max, _i),
              fi.subVectors(t.a, _i),
              mi.subVectors(t.b, _i),
              gi.subVectors(t.c, _i),
              vi.subVectors(mi, fi),
              yi.subVectors(gi, mi),
              xi.subVectors(fi, gi);
            let e = [
              0,
              -vi.z,
              vi.y,
              0,
              -yi.z,
              yi.y,
              0,
              -xi.z,
              xi.y,
              vi.z,
              0,
              -vi.x,
              yi.z,
              0,
              -yi.x,
              xi.z,
              0,
              -xi.x,
              -vi.y,
              vi.x,
              0,
              -yi.y,
              yi.x,
              0,
              -xi.y,
              xi.x,
              0,
            ];
            return (
              !!Si(e, fi, mi, gi, bi) &&
              ((e = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
              !!Si(e, fi, mi, gi, bi) &&
                (wi.crossVectors(vi, yi),
                (e = [wi.x, wi.y, wi.z]),
                Si(e, fi, mi, gi, bi)))
            );
          }
          clampPoint(t, e) {
            return e.copy(t).clamp(this.min, this.max);
          }
          distanceToPoint(t) {
            return di.copy(t).clamp(this.min, this.max).sub(t).length();
          }
          getBoundingSphere(t) {
            return (
              this.getCenter(t.center),
              (t.radius = 0.5 * this.getSize(di).length()),
              t
            );
          }
          intersect(t) {
            return (
              this.min.max(t.min),
              this.max.min(t.max),
              this.isEmpty() && this.makeEmpty(),
              this
            );
          }
          union(t) {
            return this.min.min(t.min), this.max.max(t.max), this;
          }
          applyMatrix4(t) {
            return (
              this.isEmpty() ||
                (hi[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t),
                hi[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t),
                hi[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t),
                hi[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t),
                hi[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t),
                hi[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t),
                hi[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t),
                hi[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t),
                this.setFromPoints(hi)),
              this
            );
          }
          translate(t) {
            return this.min.add(t), this.max.add(t), this;
          }
          equals(t) {
            return t.min.equals(this.min) && t.max.equals(this.max);
          }
        }
        ui.prototype.isBox3 = !0;
        const hi = [
            new ai(),
            new ai(),
            new ai(),
            new ai(),
            new ai(),
            new ai(),
            new ai(),
            new ai(),
          ],
          di = new ai(),
          pi = new ui(),
          fi = new ai(),
          mi = new ai(),
          gi = new ai(),
          vi = new ai(),
          yi = new ai(),
          xi = new ai(),
          _i = new ai(),
          bi = new ai(),
          wi = new ai(),
          Mi = new ai();
        function Si(t, e, n, i, r) {
          for (let o = 0, s = t.length - 3; o <= s; o += 3) {
            Mi.fromArray(t, o);
            const s =
                r.x * Math.abs(Mi.x) +
                r.y * Math.abs(Mi.y) +
                r.z * Math.abs(Mi.z),
              a = e.dot(Mi),
              l = n.dot(Mi),
              c = i.dot(Mi);
            if (Math.max(-Math.max(a, l, c), Math.min(a, l, c)) > s) return !1;
          }
          return !0;
        }
        const Ei = new ui(),
          Ti = new ai(),
          Ai = new ai(),
          Ci = new ai();
        class Li {
          constructor(t = new ai(), e = -1) {
            (this.center = t), (this.radius = e);
          }
          set(t, e) {
            return this.center.copy(t), (this.radius = e), this;
          }
          setFromPoints(t, e) {
            const n = this.center;
            void 0 !== e ? n.copy(e) : Ei.setFromPoints(t).getCenter(n);
            let i = 0;
            for (let e = 0, r = t.length; e < r; e++)
              i = Math.max(i, n.distanceToSquared(t[e]));
            return (this.radius = Math.sqrt(i)), this;
          }
          copy(t) {
            return this.center.copy(t.center), (this.radius = t.radius), this;
          }
          isEmpty() {
            return this.radius < 0;
          }
          makeEmpty() {
            return this.center.set(0, 0, 0), (this.radius = -1), this;
          }
          containsPoint(t) {
            return (
              t.distanceToSquared(this.center) <= this.radius * this.radius
            );
          }
          distanceToPoint(t) {
            return t.distanceTo(this.center) - this.radius;
          }
          intersectsSphere(t) {
            const e = this.radius + t.radius;
            return t.center.distanceToSquared(this.center) <= e * e;
          }
          intersectsBox(t) {
            return t.intersectsSphere(this);
          }
          intersectsPlane(t) {
            return Math.abs(t.distanceToPoint(this.center)) <= this.radius;
          }
          clampPoint(t, e) {
            const n = this.center.distanceToSquared(t);
            return (
              e.copy(t),
              n > this.radius * this.radius &&
                (e.sub(this.center).normalize(),
                e.multiplyScalar(this.radius).add(this.center)),
              e
            );
          }
          getBoundingBox(t) {
            return this.isEmpty()
              ? (t.makeEmpty(), t)
              : (t.set(this.center, this.center),
                t.expandByScalar(this.radius),
                t);
          }
          applyMatrix4(t) {
            return (
              this.center.applyMatrix4(t),
              (this.radius = this.radius * t.getMaxScaleOnAxis()),
              this
            );
          }
          translate(t) {
            return this.center.add(t), this;
          }
          expandByPoint(t) {
            Ci.subVectors(t, this.center);
            const e = Ci.lengthSq();
            if (e > this.radius * this.radius) {
              const t = Math.sqrt(e),
                n = 0.5 * (t - this.radius);
              this.center.add(Ci.multiplyScalar(n / t)), (this.radius += n);
            }
            return this;
          }
          union(t) {
            return (
              Ai.subVectors(t.center, this.center)
                .normalize()
                .multiplyScalar(t.radius),
              this.expandByPoint(Ti.copy(t.center).add(Ai)),
              this.expandByPoint(Ti.copy(t.center).sub(Ai)),
              this
            );
          }
          equals(t) {
            return t.center.equals(this.center) && t.radius === this.radius;
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        const Ri = new ai(),
          Pi = new ai(),
          Oi = new ai(),
          ki = new ai(),
          Ii = new ai(),
          Di = new ai(),
          Bi = new ai();
        class Ni {
          constructor(t = new ai(), e = new ai(0, 0, -1)) {
            (this.origin = t), (this.direction = e);
          }
          set(t, e) {
            return this.origin.copy(t), this.direction.copy(e), this;
          }
          copy(t) {
            return (
              this.origin.copy(t.origin), this.direction.copy(t.direction), this
            );
          }
          at(t, e) {
            return e.copy(this.direction).multiplyScalar(t).add(this.origin);
          }
          lookAt(t) {
            return this.direction.copy(t).sub(this.origin).normalize(), this;
          }
          recast(t) {
            return this.origin.copy(this.at(t, Ri)), this;
          }
          closestPointToPoint(t, e) {
            e.subVectors(t, this.origin);
            const n = e.dot(this.direction);
            return n < 0
              ? e.copy(this.origin)
              : e.copy(this.direction).multiplyScalar(n).add(this.origin);
          }
          distanceToPoint(t) {
            return Math.sqrt(this.distanceSqToPoint(t));
          }
          distanceSqToPoint(t) {
            const e = Ri.subVectors(t, this.origin).dot(this.direction);
            return e < 0
              ? this.origin.distanceToSquared(t)
              : (Ri.copy(this.direction).multiplyScalar(e).add(this.origin),
                Ri.distanceToSquared(t));
          }
          distanceSqToSegment(t, e, n, i) {
            Pi.copy(t).add(e).multiplyScalar(0.5),
              Oi.copy(e).sub(t).normalize(),
              ki.copy(this.origin).sub(Pi);
            const r = 0.5 * t.distanceTo(e),
              o = -this.direction.dot(Oi),
              s = ki.dot(this.direction),
              a = -ki.dot(Oi),
              l = ki.lengthSq(),
              c = Math.abs(1 - o * o);
            let u, h, d, p;
            if (c > 0)
              if (((u = o * a - s), (h = o * s - a), (p = r * c), u >= 0))
                if (h >= -p)
                  if (h <= p) {
                    const t = 1 / c;
                    (u *= t),
                      (h *= t),
                      (d =
                        u * (u + o * h + 2 * s) + h * (o * u + h + 2 * a) + l);
                  } else
                    (h = r),
                      (u = Math.max(0, -(o * h + s))),
                      (d = -u * u + h * (h + 2 * a) + l);
                else
                  (h = -r),
                    (u = Math.max(0, -(o * h + s))),
                    (d = -u * u + h * (h + 2 * a) + l);
              else
                h <= -p
                  ? ((u = Math.max(0, -(-o * r + s))),
                    (h = u > 0 ? -r : Math.min(Math.max(-r, -a), r)),
                    (d = -u * u + h * (h + 2 * a) + l))
                  : h <= p
                  ? ((u = 0),
                    (h = Math.min(Math.max(-r, -a), r)),
                    (d = h * (h + 2 * a) + l))
                  : ((u = Math.max(0, -(o * r + s))),
                    (h = u > 0 ? r : Math.min(Math.max(-r, -a), r)),
                    (d = -u * u + h * (h + 2 * a) + l));
            else
              (h = o > 0 ? -r : r),
                (u = Math.max(0, -(o * h + s))),
                (d = -u * u + h * (h + 2 * a) + l);
            return (
              n && n.copy(this.direction).multiplyScalar(u).add(this.origin),
              i && i.copy(Oi).multiplyScalar(h).add(Pi),
              d
            );
          }
          intersectSphere(t, e) {
            Ri.subVectors(t.center, this.origin);
            const n = Ri.dot(this.direction),
              i = Ri.dot(Ri) - n * n,
              r = t.radius * t.radius;
            if (i > r) return null;
            const o = Math.sqrt(r - i),
              s = n - o,
              a = n + o;
            return s < 0 && a < 0
              ? null
              : s < 0
              ? this.at(a, e)
              : this.at(s, e);
          }
          intersectsSphere(t) {
            return this.distanceSqToPoint(t.center) <= t.radius * t.radius;
          }
          distanceToPlane(t) {
            const e = t.normal.dot(this.direction);
            if (0 === e) return 0 === t.distanceToPoint(this.origin) ? 0 : null;
            const n = -(this.origin.dot(t.normal) + t.constant) / e;
            return n >= 0 ? n : null;
          }
          intersectPlane(t, e) {
            const n = this.distanceToPlane(t);
            return null === n ? null : this.at(n, e);
          }
          intersectsPlane(t) {
            const e = t.distanceToPoint(this.origin);
            return 0 === e || t.normal.dot(this.direction) * e < 0;
          }
          intersectBox(t, e) {
            let n, i, r, o, s, a;
            const l = 1 / this.direction.x,
              c = 1 / this.direction.y,
              u = 1 / this.direction.z,
              h = this.origin;
            return (
              l >= 0
                ? ((n = (t.min.x - h.x) * l), (i = (t.max.x - h.x) * l))
                : ((n = (t.max.x - h.x) * l), (i = (t.min.x - h.x) * l)),
              c >= 0
                ? ((r = (t.min.y - h.y) * c), (o = (t.max.y - h.y) * c))
                : ((r = (t.max.y - h.y) * c), (o = (t.min.y - h.y) * c)),
              n > o || r > i
                ? null
                : ((r > n || n != n) && (n = r),
                  (o < i || i != i) && (i = o),
                  u >= 0
                    ? ((s = (t.min.z - h.z) * u), (a = (t.max.z - h.z) * u))
                    : ((s = (t.max.z - h.z) * u), (a = (t.min.z - h.z) * u)),
                  n > a || s > i
                    ? null
                    : ((s > n || n != n) && (n = s),
                      (a < i || i != i) && (i = a),
                      i < 0 ? null : this.at(n >= 0 ? n : i, e)))
            );
          }
          intersectsBox(t) {
            return null !== this.intersectBox(t, Ri);
          }
          intersectTriangle(t, e, n, i, r) {
            Ii.subVectors(e, t), Di.subVectors(n, t), Bi.crossVectors(Ii, Di);
            let o,
              s = this.direction.dot(Bi);
            if (s > 0) {
              if (i) return null;
              o = 1;
            } else {
              if (!(s < 0)) return null;
              (o = -1), (s = -s);
            }
            ki.subVectors(this.origin, t);
            const a = o * this.direction.dot(Di.crossVectors(ki, Di));
            if (a < 0) return null;
            const l = o * this.direction.dot(Ii.cross(ki));
            if (l < 0) return null;
            if (a + l > s) return null;
            const c = -o * ki.dot(Bi);
            return c < 0 ? null : this.at(c / s, r);
          }
          applyMatrix4(t) {
            return (
              this.origin.applyMatrix4(t),
              this.direction.transformDirection(t),
              this
            );
          }
          equals(t) {
            return (
              t.origin.equals(this.origin) && t.direction.equals(this.direction)
            );
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        class Fi {
          constructor() {
            (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
              arguments.length > 0 &&
                console.error(
                  "THREE.Matrix4: the constructor no longer reads arguments. use .set() instead."
                );
          }
          set(t, e, n, i, r, o, s, a, l, c, u, h, d, p, f, m) {
            const g = this.elements;
            return (
              (g[0] = t),
              (g[4] = e),
              (g[8] = n),
              (g[12] = i),
              (g[1] = r),
              (g[5] = o),
              (g[9] = s),
              (g[13] = a),
              (g[2] = l),
              (g[6] = c),
              (g[10] = u),
              (g[14] = h),
              (g[3] = d),
              (g[7] = p),
              (g[11] = f),
              (g[15] = m),
              this
            );
          }
          identity() {
            return (
              this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            );
          }
          clone() {
            return new Fi().fromArray(this.elements);
          }
          copy(t) {
            const e = this.elements,
              n = t.elements;
            return (
              (e[0] = n[0]),
              (e[1] = n[1]),
              (e[2] = n[2]),
              (e[3] = n[3]),
              (e[4] = n[4]),
              (e[5] = n[5]),
              (e[6] = n[6]),
              (e[7] = n[7]),
              (e[8] = n[8]),
              (e[9] = n[9]),
              (e[10] = n[10]),
              (e[11] = n[11]),
              (e[12] = n[12]),
              (e[13] = n[13]),
              (e[14] = n[14]),
              (e[15] = n[15]),
              this
            );
          }
          copyPosition(t) {
            const e = this.elements,
              n = t.elements;
            return (e[12] = n[12]), (e[13] = n[13]), (e[14] = n[14]), this;
          }
          setFromMatrix3(t) {
            const e = t.elements;
            return (
              this.set(
                e[0],
                e[3],
                e[6],
                0,
                e[1],
                e[4],
                e[7],
                0,
                e[2],
                e[5],
                e[8],
                0,
                0,
                0,
                0,
                1
              ),
              this
            );
          }
          extractBasis(t, e, n) {
            return (
              t.setFromMatrixColumn(this, 0),
              e.setFromMatrixColumn(this, 1),
              n.setFromMatrixColumn(this, 2),
              this
            );
          }
          makeBasis(t, e, n) {
            return (
              this.set(
                t.x,
                e.x,
                n.x,
                0,
                t.y,
                e.y,
                n.y,
                0,
                t.z,
                e.z,
                n.z,
                0,
                0,
                0,
                0,
                1
              ),
              this
            );
          }
          extractRotation(t) {
            const e = this.elements,
              n = t.elements,
              i = 1 / zi.setFromMatrixColumn(t, 0).length(),
              r = 1 / zi.setFromMatrixColumn(t, 1).length(),
              o = 1 / zi.setFromMatrixColumn(t, 2).length();
            return (
              (e[0] = n[0] * i),
              (e[1] = n[1] * i),
              (e[2] = n[2] * i),
              (e[3] = 0),
              (e[4] = n[4] * r),
              (e[5] = n[5] * r),
              (e[6] = n[6] * r),
              (e[7] = 0),
              (e[8] = n[8] * o),
              (e[9] = n[9] * o),
              (e[10] = n[10] * o),
              (e[11] = 0),
              (e[12] = 0),
              (e[13] = 0),
              (e[14] = 0),
              (e[15] = 1),
              this
            );
          }
          makeRotationFromEuler(t) {
            (t && t.isEuler) ||
              console.error(
                "THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order."
              );
            const e = this.elements,
              n = t.x,
              i = t.y,
              r = t.z,
              o = Math.cos(n),
              s = Math.sin(n),
              a = Math.cos(i),
              l = Math.sin(i),
              c = Math.cos(r),
              u = Math.sin(r);
            if ("XYZ" === t.order) {
              const t = o * c,
                n = o * u,
                i = s * c,
                r = s * u;
              (e[0] = a * c),
                (e[4] = -a * u),
                (e[8] = l),
                (e[1] = n + i * l),
                (e[5] = t - r * l),
                (e[9] = -s * a),
                (e[2] = r - t * l),
                (e[6] = i + n * l),
                (e[10] = o * a);
            } else if ("YXZ" === t.order) {
              const t = a * c,
                n = a * u,
                i = l * c,
                r = l * u;
              (e[0] = t + r * s),
                (e[4] = i * s - n),
                (e[8] = o * l),
                (e[1] = o * u),
                (e[5] = o * c),
                (e[9] = -s),
                (e[2] = n * s - i),
                (e[6] = r + t * s),
                (e[10] = o * a);
            } else if ("ZXY" === t.order) {
              const t = a * c,
                n = a * u,
                i = l * c,
                r = l * u;
              (e[0] = t - r * s),
                (e[4] = -o * u),
                (e[8] = i + n * s),
                (e[1] = n + i * s),
                (e[5] = o * c),
                (e[9] = r - t * s),
                (e[2] = -o * l),
                (e[6] = s),
                (e[10] = o * a);
            } else if ("ZYX" === t.order) {
              const t = o * c,
                n = o * u,
                i = s * c,
                r = s * u;
              (e[0] = a * c),
                (e[4] = i * l - n),
                (e[8] = t * l + r),
                (e[1] = a * u),
                (e[5] = r * l + t),
                (e[9] = n * l - i),
                (e[2] = -l),
                (e[6] = s * a),
                (e[10] = o * a);
            } else if ("YZX" === t.order) {
              const t = o * a,
                n = o * l,
                i = s * a,
                r = s * l;
              (e[0] = a * c),
                (e[4] = r - t * u),
                (e[8] = i * u + n),
                (e[1] = u),
                (e[5] = o * c),
                (e[9] = -s * c),
                (e[2] = -l * c),
                (e[6] = n * u + i),
                (e[10] = t - r * u);
            } else if ("XZY" === t.order) {
              const t = o * a,
                n = o * l,
                i = s * a,
                r = s * l;
              (e[0] = a * c),
                (e[4] = -u),
                (e[8] = l * c),
                (e[1] = t * u + r),
                (e[5] = o * c),
                (e[9] = n * u - i),
                (e[2] = i * u - n),
                (e[6] = s * c),
                (e[10] = r * u + t);
            }
            return (
              (e[3] = 0),
              (e[7] = 0),
              (e[11] = 0),
              (e[12] = 0),
              (e[13] = 0),
              (e[14] = 0),
              (e[15] = 1),
              this
            );
          }
          makeRotationFromQuaternion(t) {
            return this.compose(ji, t, Ui);
          }
          lookAt(t, e, n) {
            const i = this.elements;
            return (
              Wi.subVectors(t, e),
              0 === Wi.lengthSq() && (Wi.z = 1),
              Wi.normalize(),
              Vi.crossVectors(n, Wi),
              0 === Vi.lengthSq() &&
                (1 === Math.abs(n.z) ? (Wi.x += 1e-4) : (Wi.z += 1e-4),
                Wi.normalize(),
                Vi.crossVectors(n, Wi)),
              Vi.normalize(),
              Gi.crossVectors(Wi, Vi),
              (i[0] = Vi.x),
              (i[4] = Gi.x),
              (i[8] = Wi.x),
              (i[1] = Vi.y),
              (i[5] = Gi.y),
              (i[9] = Wi.y),
              (i[2] = Vi.z),
              (i[6] = Gi.z),
              (i[10] = Wi.z),
              this
            );
          }
          multiply(t, e) {
            return void 0 !== e
              ? (console.warn(
                  "THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."
                ),
                this.multiplyMatrices(t, e))
              : this.multiplyMatrices(this, t);
          }
          premultiply(t) {
            return this.multiplyMatrices(t, this);
          }
          multiplyMatrices(t, e) {
            const n = t.elements,
              i = e.elements,
              r = this.elements,
              o = n[0],
              s = n[4],
              a = n[8],
              l = n[12],
              c = n[1],
              u = n[5],
              h = n[9],
              d = n[13],
              p = n[2],
              f = n[6],
              m = n[10],
              g = n[14],
              v = n[3],
              y = n[7],
              x = n[11],
              _ = n[15],
              b = i[0],
              w = i[4],
              M = i[8],
              S = i[12],
              E = i[1],
              T = i[5],
              A = i[9],
              C = i[13],
              L = i[2],
              R = i[6],
              P = i[10],
              O = i[14],
              k = i[3],
              I = i[7],
              D = i[11],
              B = i[15];
            return (
              (r[0] = o * b + s * E + a * L + l * k),
              (r[4] = o * w + s * T + a * R + l * I),
              (r[8] = o * M + s * A + a * P + l * D),
              (r[12] = o * S + s * C + a * O + l * B),
              (r[1] = c * b + u * E + h * L + d * k),
              (r[5] = c * w + u * T + h * R + d * I),
              (r[9] = c * M + u * A + h * P + d * D),
              (r[13] = c * S + u * C + h * O + d * B),
              (r[2] = p * b + f * E + m * L + g * k),
              (r[6] = p * w + f * T + m * R + g * I),
              (r[10] = p * M + f * A + m * P + g * D),
              (r[14] = p * S + f * C + m * O + g * B),
              (r[3] = v * b + y * E + x * L + _ * k),
              (r[7] = v * w + y * T + x * R + _ * I),
              (r[11] = v * M + y * A + x * P + _ * D),
              (r[15] = v * S + y * C + x * O + _ * B),
              this
            );
          }
          multiplyScalar(t) {
            const e = this.elements;
            return (
              (e[0] *= t),
              (e[4] *= t),
              (e[8] *= t),
              (e[12] *= t),
              (e[1] *= t),
              (e[5] *= t),
              (e[9] *= t),
              (e[13] *= t),
              (e[2] *= t),
              (e[6] *= t),
              (e[10] *= t),
              (e[14] *= t),
              (e[3] *= t),
              (e[7] *= t),
              (e[11] *= t),
              (e[15] *= t),
              this
            );
          }
          determinant() {
            const t = this.elements,
              e = t[0],
              n = t[4],
              i = t[8],
              r = t[12],
              o = t[1],
              s = t[5],
              a = t[9],
              l = t[13],
              c = t[2],
              u = t[6],
              h = t[10],
              d = t[14];
            return (
              t[3] *
                (+r * a * u -
                  i * l * u -
                  r * s * h +
                  n * l * h +
                  i * s * d -
                  n * a * d) +
              t[7] *
                (+e * a * d -
                  e * l * h +
                  r * o * h -
                  i * o * d +
                  i * l * c -
                  r * a * c) +
              t[11] *
                (+e * l * u -
                  e * s * d -
                  r * o * u +
                  n * o * d +
                  r * s * c -
                  n * l * c) +
              t[15] *
                (-i * s * c -
                  e * a * u +
                  e * s * h +
                  i * o * u -
                  n * o * h +
                  n * a * c)
            );
          }
          transpose() {
            const t = this.elements;
            let e;
            return (
              (e = t[1]),
              (t[1] = t[4]),
              (t[4] = e),
              (e = t[2]),
              (t[2] = t[8]),
              (t[8] = e),
              (e = t[6]),
              (t[6] = t[9]),
              (t[9] = e),
              (e = t[3]),
              (t[3] = t[12]),
              (t[12] = e),
              (e = t[7]),
              (t[7] = t[13]),
              (t[13] = e),
              (e = t[11]),
              (t[11] = t[14]),
              (t[14] = e),
              this
            );
          }
          setPosition(t, e, n) {
            const i = this.elements;
            return (
              t.isVector3
                ? ((i[12] = t.x), (i[13] = t.y), (i[14] = t.z))
                : ((i[12] = t), (i[13] = e), (i[14] = n)),
              this
            );
          }
          invert() {
            const t = this.elements,
              e = t[0],
              n = t[1],
              i = t[2],
              r = t[3],
              o = t[4],
              s = t[5],
              a = t[6],
              l = t[7],
              c = t[8],
              u = t[9],
              h = t[10],
              d = t[11],
              p = t[12],
              f = t[13],
              m = t[14],
              g = t[15],
              v =
                u * m * l -
                f * h * l +
                f * a * d -
                s * m * d -
                u * a * g +
                s * h * g,
              y =
                p * h * l -
                c * m * l -
                p * a * d +
                o * m * d +
                c * a * g -
                o * h * g,
              x =
                c * f * l -
                p * u * l +
                p * s * d -
                o * f * d -
                c * s * g +
                o * u * g,
              _ =
                p * u * a -
                c * f * a -
                p * s * h +
                o * f * h +
                c * s * m -
                o * u * m,
              b = e * v + n * y + i * x + r * _;
            if (0 === b)
              return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
            const w = 1 / b;
            return (
              (t[0] = v * w),
              (t[1] =
                (f * h * r -
                  u * m * r -
                  f * i * d +
                  n * m * d +
                  u * i * g -
                  n * h * g) *
                w),
              (t[2] =
                (s * m * r -
                  f * a * r +
                  f * i * l -
                  n * m * l -
                  s * i * g +
                  n * a * g) *
                w),
              (t[3] =
                (u * a * r -
                  s * h * r -
                  u * i * l +
                  n * h * l +
                  s * i * d -
                  n * a * d) *
                w),
              (t[4] = y * w),
              (t[5] =
                (c * m * r -
                  p * h * r +
                  p * i * d -
                  e * m * d -
                  c * i * g +
                  e * h * g) *
                w),
              (t[6] =
                (p * a * r -
                  o * m * r -
                  p * i * l +
                  e * m * l +
                  o * i * g -
                  e * a * g) *
                w),
              (t[7] =
                (o * h * r -
                  c * a * r +
                  c * i * l -
                  e * h * l -
                  o * i * d +
                  e * a * d) *
                w),
              (t[8] = x * w),
              (t[9] =
                (p * u * r -
                  c * f * r -
                  p * n * d +
                  e * f * d +
                  c * n * g -
                  e * u * g) *
                w),
              (t[10] =
                (o * f * r -
                  p * s * r +
                  p * n * l -
                  e * f * l -
                  o * n * g +
                  e * s * g) *
                w),
              (t[11] =
                (c * s * r -
                  o * u * r -
                  c * n * l +
                  e * u * l +
                  o * n * d -
                  e * s * d) *
                w),
              (t[12] = _ * w),
              (t[13] =
                (c * f * i -
                  p * u * i +
                  p * n * h -
                  e * f * h -
                  c * n * m +
                  e * u * m) *
                w),
              (t[14] =
                (p * s * i -
                  o * f * i -
                  p * n * a +
                  e * f * a +
                  o * n * m -
                  e * s * m) *
                w),
              (t[15] =
                (o * u * i -
                  c * s * i +
                  c * n * a -
                  e * u * a -
                  o * n * h +
                  e * s * h) *
                w),
              this
            );
          }
          scale(t) {
            const e = this.elements,
              n = t.x,
              i = t.y,
              r = t.z;
            return (
              (e[0] *= n),
              (e[4] *= i),
              (e[8] *= r),
              (e[1] *= n),
              (e[5] *= i),
              (e[9] *= r),
              (e[2] *= n),
              (e[6] *= i),
              (e[10] *= r),
              (e[3] *= n),
              (e[7] *= i),
              (e[11] *= r),
              this
            );
          }
          getMaxScaleOnAxis() {
            const t = this.elements,
              e = t[0] * t[0] + t[1] * t[1] + t[2] * t[2],
              n = t[4] * t[4] + t[5] * t[5] + t[6] * t[6],
              i = t[8] * t[8] + t[9] * t[9] + t[10] * t[10];
            return Math.sqrt(Math.max(e, n, i));
          }
          makeTranslation(t, e, n) {
            return (
              this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, n, 0, 0, 0, 1), this
            );
          }
          makeRotationX(t) {
            const e = Math.cos(t),
              n = Math.sin(t);
            return (
              this.set(1, 0, 0, 0, 0, e, -n, 0, 0, n, e, 0, 0, 0, 0, 1), this
            );
          }
          makeRotationY(t) {
            const e = Math.cos(t),
              n = Math.sin(t);
            return (
              this.set(e, 0, n, 0, 0, 1, 0, 0, -n, 0, e, 0, 0, 0, 0, 1), this
            );
          }
          makeRotationZ(t) {
            const e = Math.cos(t),
              n = Math.sin(t);
            return (
              this.set(e, -n, 0, 0, n, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            );
          }
          makeRotationAxis(t, e) {
            const n = Math.cos(e),
              i = Math.sin(e),
              r = 1 - n,
              o = t.x,
              s = t.y,
              a = t.z,
              l = r * o,
              c = r * s;
            return (
              this.set(
                l * o + n,
                l * s - i * a,
                l * a + i * s,
                0,
                l * s + i * a,
                c * s + n,
                c * a - i * o,
                0,
                l * a - i * s,
                c * a + i * o,
                r * a * a + n,
                0,
                0,
                0,
                0,
                1
              ),
              this
            );
          }
          makeScale(t, e, n) {
            return (
              this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
            );
          }
          makeShear(t, e, n, i, r, o) {
            return (
              this.set(1, n, r, 0, t, 1, o, 0, e, i, 1, 0, 0, 0, 0, 1), this
            );
          }
          compose(t, e, n) {
            const i = this.elements,
              r = e._x,
              o = e._y,
              s = e._z,
              a = e._w,
              l = r + r,
              c = o + o,
              u = s + s,
              h = r * l,
              d = r * c,
              p = r * u,
              f = o * c,
              m = o * u,
              g = s * u,
              v = a * l,
              y = a * c,
              x = a * u,
              _ = n.x,
              b = n.y,
              w = n.z;
            return (
              (i[0] = (1 - (f + g)) * _),
              (i[1] = (d + x) * _),
              (i[2] = (p - y) * _),
              (i[3] = 0),
              (i[4] = (d - x) * b),
              (i[5] = (1 - (h + g)) * b),
              (i[6] = (m + v) * b),
              (i[7] = 0),
              (i[8] = (p + y) * w),
              (i[9] = (m - v) * w),
              (i[10] = (1 - (h + f)) * w),
              (i[11] = 0),
              (i[12] = t.x),
              (i[13] = t.y),
              (i[14] = t.z),
              (i[15] = 1),
              this
            );
          }
          decompose(t, e, n) {
            const i = this.elements;
            let r = zi.set(i[0], i[1], i[2]).length();
            const o = zi.set(i[4], i[5], i[6]).length(),
              s = zi.set(i[8], i[9], i[10]).length();
            this.determinant() < 0 && (r = -r),
              (t.x = i[12]),
              (t.y = i[13]),
              (t.z = i[14]),
              Hi.copy(this);
            const a = 1 / r,
              l = 1 / o,
              c = 1 / s;
            return (
              (Hi.elements[0] *= a),
              (Hi.elements[1] *= a),
              (Hi.elements[2] *= a),
              (Hi.elements[4] *= l),
              (Hi.elements[5] *= l),
              (Hi.elements[6] *= l),
              (Hi.elements[8] *= c),
              (Hi.elements[9] *= c),
              (Hi.elements[10] *= c),
              e.setFromRotationMatrix(Hi),
              (n.x = r),
              (n.y = o),
              (n.z = s),
              this
            );
          }
          makePerspective(t, e, n, i, r, o) {
            void 0 === o &&
              console.warn(
                "THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs."
              );
            const s = this.elements,
              a = (2 * r) / (e - t),
              l = (2 * r) / (n - i),
              c = (e + t) / (e - t),
              u = (n + i) / (n - i),
              h = -(o + r) / (o - r),
              d = (-2 * o * r) / (o - r);
            return (
              (s[0] = a),
              (s[4] = 0),
              (s[8] = c),
              (s[12] = 0),
              (s[1] = 0),
              (s[5] = l),
              (s[9] = u),
              (s[13] = 0),
              (s[2] = 0),
              (s[6] = 0),
              (s[10] = h),
              (s[14] = d),
              (s[3] = 0),
              (s[7] = 0),
              (s[11] = -1),
              (s[15] = 0),
              this
            );
          }
          makeOrthographic(t, e, n, i, r, o) {
            const s = this.elements,
              a = 1 / (e - t),
              l = 1 / (n - i),
              c = 1 / (o - r),
              u = (e + t) * a,
              h = (n + i) * l,
              d = (o + r) * c;
            return (
              (s[0] = 2 * a),
              (s[4] = 0),
              (s[8] = 0),
              (s[12] = -u),
              (s[1] = 0),
              (s[5] = 2 * l),
              (s[9] = 0),
              (s[13] = -h),
              (s[2] = 0),
              (s[6] = 0),
              (s[10] = -2 * c),
              (s[14] = -d),
              (s[3] = 0),
              (s[7] = 0),
              (s[11] = 0),
              (s[15] = 1),
              this
            );
          }
          equals(t) {
            const e = this.elements,
              n = t.elements;
            for (let t = 0; t < 16; t++) if (e[t] !== n[t]) return !1;
            return !0;
          }
          fromArray(t, e = 0) {
            for (let n = 0; n < 16; n++) this.elements[n] = t[n + e];
            return this;
          }
          toArray(t = [], e = 0) {
            const n = this.elements;
            return (
              (t[e] = n[0]),
              (t[e + 1] = n[1]),
              (t[e + 2] = n[2]),
              (t[e + 3] = n[3]),
              (t[e + 4] = n[4]),
              (t[e + 5] = n[5]),
              (t[e + 6] = n[6]),
              (t[e + 7] = n[7]),
              (t[e + 8] = n[8]),
              (t[e + 9] = n[9]),
              (t[e + 10] = n[10]),
              (t[e + 11] = n[11]),
              (t[e + 12] = n[12]),
              (t[e + 13] = n[13]),
              (t[e + 14] = n[14]),
              (t[e + 15] = n[15]),
              t
            );
          }
        }
        Fi.prototype.isMatrix4 = !0;
        const zi = new ai(),
          Hi = new Fi(),
          ji = new ai(0, 0, 0),
          Ui = new ai(1, 1, 1),
          Vi = new ai(),
          Gi = new ai(),
          Wi = new ai(),
          qi = new Fi(),
          Xi = new si();
        class Yi {
          constructor(t = 0, e = 0, n = 0, i = Yi.DefaultOrder) {
            (this._x = t), (this._y = e), (this._z = n), (this._order = i);
          }
          get x() {
            return this._x;
          }
          set x(t) {
            (this._x = t), this._onChangeCallback();
          }
          get y() {
            return this._y;
          }
          set y(t) {
            (this._y = t), this._onChangeCallback();
          }
          get z() {
            return this._z;
          }
          set z(t) {
            (this._z = t), this._onChangeCallback();
          }
          get order() {
            return this._order;
          }
          set order(t) {
            (this._order = t), this._onChangeCallback();
          }
          set(t, e, n, i = this._order) {
            return (
              (this._x = t),
              (this._y = e),
              (this._z = n),
              (this._order = i),
              this._onChangeCallback(),
              this
            );
          }
          clone() {
            return new this.constructor(this._x, this._y, this._z, this._order);
          }
          copy(t) {
            return (
              (this._x = t._x),
              (this._y = t._y),
              (this._z = t._z),
              (this._order = t._order),
              this._onChangeCallback(),
              this
            );
          }
          setFromRotationMatrix(t, e = this._order, n = !0) {
            const i = t.elements,
              r = i[0],
              o = i[4],
              s = i[8],
              a = i[1],
              l = i[5],
              c = i[9],
              u = i[2],
              h = i[6],
              d = i[10];
            switch (e) {
              case "XYZ":
                (this._y = Math.asin(Un(s, -1, 1))),
                  Math.abs(s) < 0.9999999
                    ? ((this._x = Math.atan2(-c, d)),
                      (this._z = Math.atan2(-o, r)))
                    : ((this._x = Math.atan2(h, l)), (this._z = 0));
                break;
              case "YXZ":
                (this._x = Math.asin(-Un(c, -1, 1))),
                  Math.abs(c) < 0.9999999
                    ? ((this._y = Math.atan2(s, d)),
                      (this._z = Math.atan2(a, l)))
                    : ((this._y = Math.atan2(-u, r)), (this._z = 0));
                break;
              case "ZXY":
                (this._x = Math.asin(Un(h, -1, 1))),
                  Math.abs(h) < 0.9999999
                    ? ((this._y = Math.atan2(-u, d)),
                      (this._z = Math.atan2(-o, l)))
                    : ((this._y = 0), (this._z = Math.atan2(a, r)));
                break;
              case "ZYX":
                (this._y = Math.asin(-Un(u, -1, 1))),
                  Math.abs(u) < 0.9999999
                    ? ((this._x = Math.atan2(h, d)),
                      (this._z = Math.atan2(a, r)))
                    : ((this._x = 0), (this._z = Math.atan2(-o, l)));
                break;
              case "YZX":
                (this._z = Math.asin(Un(a, -1, 1))),
                  Math.abs(a) < 0.9999999
                    ? ((this._x = Math.atan2(-c, l)),
                      (this._y = Math.atan2(-u, r)))
                    : ((this._x = 0), (this._y = Math.atan2(s, d)));
                break;
              case "XZY":
                (this._z = Math.asin(-Un(o, -1, 1))),
                  Math.abs(o) < 0.9999999
                    ? ((this._x = Math.atan2(h, l)),
                      (this._y = Math.atan2(s, r)))
                    : ((this._x = Math.atan2(-c, d)), (this._y = 0));
                break;
              default:
                console.warn(
                  "THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " +
                    e
                );
            }
            return (
              (this._order = e), !0 === n && this._onChangeCallback(), this
            );
          }
          setFromQuaternion(t, e, n) {
            return (
              qi.makeRotationFromQuaternion(t),
              this.setFromRotationMatrix(qi, e, n)
            );
          }
          setFromVector3(t, e = this._order) {
            return this.set(t.x, t.y, t.z, e);
          }
          reorder(t) {
            return Xi.setFromEuler(this), this.setFromQuaternion(Xi, t);
          }
          equals(t) {
            return (
              t._x === this._x &&
              t._y === this._y &&
              t._z === this._z &&
              t._order === this._order
            );
          }
          fromArray(t) {
            return (
              (this._x = t[0]),
              (this._y = t[1]),
              (this._z = t[2]),
              void 0 !== t[3] && (this._order = t[3]),
              this._onChangeCallback(),
              this
            );
          }
          toArray(t = [], e = 0) {
            return (
              (t[e] = this._x),
              (t[e + 1] = this._y),
              (t[e + 2] = this._z),
              (t[e + 3] = this._order),
              t
            );
          }
          toVector3(t) {
            return t
              ? t.set(this._x, this._y, this._z)
              : new ai(this._x, this._y, this._z);
          }
          _onChange(t) {
            return (this._onChangeCallback = t), this;
          }
          _onChangeCallback() {}
        }
        (Yi.prototype.isEuler = !0),
          (Yi.DefaultOrder = "XYZ"),
          (Yi.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"]);
        class $i {
          constructor() {
            this.mask = 1;
          }
          set(t) {
            this.mask = (1 << t) | 0;
          }
          enable(t) {
            this.mask |= (1 << t) | 0;
          }
          enableAll() {
            this.mask = -1;
          }
          toggle(t) {
            this.mask ^= (1 << t) | 0;
          }
          disable(t) {
            this.mask &= ~((1 << t) | 0);
          }
          disableAll() {
            this.mask = 0;
          }
          test(t) {
            return 0 != (this.mask & t.mask);
          }
        }
        let Ki = 0;
        const Ji = new ai(),
          Zi = new si(),
          Qi = new Fi(),
          tr = new ai(),
          er = new ai(),
          nr = new ai(),
          ir = new si(),
          rr = new ai(1, 0, 0),
          or = new ai(0, 1, 0),
          sr = new ai(0, 0, 1),
          ar = { type: "added" },
          lr = { type: "removed" };
        class cr extends Bn {
          constructor() {
            super(),
              Object.defineProperty(this, "id", { value: Ki++ }),
              (this.uuid = jn()),
              (this.name = ""),
              (this.type = "Object3D"),
              (this.parent = null),
              (this.children = []),
              (this.up = cr.DefaultUp.clone());
            const t = new ai(),
              e = new Yi(),
              n = new si(),
              i = new ai(1, 1, 1);
            e._onChange(function () {
              n.setFromEuler(e, !1);
            }),
              n._onChange(function () {
                e.setFromQuaternion(n, void 0, !1);
              }),
              Object.defineProperties(this, {
                position: { configurable: !0, enumerable: !0, value: t },
                rotation: { configurable: !0, enumerable: !0, value: e },
                quaternion: { configurable: !0, enumerable: !0, value: n },
                scale: { configurable: !0, enumerable: !0, value: i },
                modelViewMatrix: { value: new Fi() },
                normalMatrix: { value: new Kn() },
              }),
              (this.matrix = new Fi()),
              (this.matrixWorld = new Fi()),
              (this.matrixAutoUpdate = cr.DefaultMatrixAutoUpdate),
              (this.matrixWorldNeedsUpdate = !1),
              (this.layers = new $i()),
              (this.visible = !0),
              (this.castShadow = !1),
              (this.receiveShadow = !1),
              (this.frustumCulled = !0),
              (this.renderOrder = 0),
              (this.animations = []),
              (this.userData = {});
          }
          onBeforeRender() {}
          onAfterRender() {}
          applyMatrix4(t) {
            this.matrixAutoUpdate && this.updateMatrix(),
              this.matrix.premultiply(t),
              this.matrix.decompose(this.position, this.quaternion, this.scale);
          }
          applyQuaternion(t) {
            return this.quaternion.premultiply(t), this;
          }
          setRotationFromAxisAngle(t, e) {
            this.quaternion.setFromAxisAngle(t, e);
          }
          setRotationFromEuler(t) {
            this.quaternion.setFromEuler(t, !0);
          }
          setRotationFromMatrix(t) {
            this.quaternion.setFromRotationMatrix(t);
          }
          setRotationFromQuaternion(t) {
            this.quaternion.copy(t);
          }
          rotateOnAxis(t, e) {
            return (
              Zi.setFromAxisAngle(t, e), this.quaternion.multiply(Zi), this
            );
          }
          rotateOnWorldAxis(t, e) {
            return (
              Zi.setFromAxisAngle(t, e), this.quaternion.premultiply(Zi), this
            );
          }
          rotateX(t) {
            return this.rotateOnAxis(rr, t);
          }
          rotateY(t) {
            return this.rotateOnAxis(or, t);
          }
          rotateZ(t) {
            return this.rotateOnAxis(sr, t);
          }
          translateOnAxis(t, e) {
            return (
              Ji.copy(t).applyQuaternion(this.quaternion),
              this.position.add(Ji.multiplyScalar(e)),
              this
            );
          }
          translateX(t) {
            return this.translateOnAxis(rr, t);
          }
          translateY(t) {
            return this.translateOnAxis(or, t);
          }
          translateZ(t) {
            return this.translateOnAxis(sr, t);
          }
          localToWorld(t) {
            return t.applyMatrix4(this.matrixWorld);
          }
          worldToLocal(t) {
            return t.applyMatrix4(Qi.copy(this.matrixWorld).invert());
          }
          lookAt(t, e, n) {
            t.isVector3 ? tr.copy(t) : tr.set(t, e, n);
            const i = this.parent;
            this.updateWorldMatrix(!0, !1),
              er.setFromMatrixPosition(this.matrixWorld),
              this.isCamera || this.isLight
                ? Qi.lookAt(er, tr, this.up)
                : Qi.lookAt(tr, er, this.up),
              this.quaternion.setFromRotationMatrix(Qi),
              i &&
                (Qi.extractRotation(i.matrixWorld),
                Zi.setFromRotationMatrix(Qi),
                this.quaternion.premultiply(Zi.invert()));
          }
          add(t) {
            if (arguments.length > 1) {
              for (let t = 0; t < arguments.length; t++) this.add(arguments[t]);
              return this;
            }
            return t === this
              ? (console.error(
                  "THREE.Object3D.add: object can't be added as a child of itself.",
                  t
                ),
                this)
              : (t && t.isObject3D
                  ? (null !== t.parent && t.parent.remove(t),
                    (t.parent = this),
                    this.children.push(t),
                    t.dispatchEvent(ar))
                  : console.error(
                      "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                      t
                    ),
                this);
          }
          remove(t) {
            if (arguments.length > 1) {
              for (let t = 0; t < arguments.length; t++)
                this.remove(arguments[t]);
              return this;
            }
            const e = this.children.indexOf(t);
            return (
              -1 !== e &&
                ((t.parent = null),
                this.children.splice(e, 1),
                t.dispatchEvent(lr)),
              this
            );
          }
          removeFromParent() {
            const t = this.parent;
            return null !== t && t.remove(this), this;
          }
          clear() {
            for (let t = 0; t < this.children.length; t++) {
              const e = this.children[t];
              (e.parent = null), e.dispatchEvent(lr);
            }
            return (this.children.length = 0), this;
          }
          attach(t) {
            return (
              this.updateWorldMatrix(!0, !1),
              Qi.copy(this.matrixWorld).invert(),
              null !== t.parent &&
                (t.parent.updateWorldMatrix(!0, !1),
                Qi.multiply(t.parent.matrixWorld)),
              t.applyMatrix4(Qi),
              this.add(t),
              t.updateWorldMatrix(!1, !0),
              this
            );
          }
          getObjectById(t) {
            return this.getObjectByProperty("id", t);
          }
          getObjectByName(t) {
            return this.getObjectByProperty("name", t);
          }
          getObjectByProperty(t, e) {
            if (this[t] === e) return this;
            for (let n = 0, i = this.children.length; n < i; n++) {
              const i = this.children[n].getObjectByProperty(t, e);
              if (void 0 !== i) return i;
            }
          }
          getWorldPosition(t) {
            return (
              this.updateWorldMatrix(!0, !1),
              t.setFromMatrixPosition(this.matrixWorld)
            );
          }
          getWorldQuaternion(t) {
            return (
              this.updateWorldMatrix(!0, !1),
              this.matrixWorld.decompose(er, t, nr),
              t
            );
          }
          getWorldScale(t) {
            return (
              this.updateWorldMatrix(!0, !1),
              this.matrixWorld.decompose(er, ir, t),
              t
            );
          }
          getWorldDirection(t) {
            this.updateWorldMatrix(!0, !1);
            const e = this.matrixWorld.elements;
            return t.set(e[8], e[9], e[10]).normalize();
          }
          raycast() {}
          traverse(t) {
            t(this);
            const e = this.children;
            for (let n = 0, i = e.length; n < i; n++) e[n].traverse(t);
          }
          traverseVisible(t) {
            if (!1 === this.visible) return;
            t(this);
            const e = this.children;
            for (let n = 0, i = e.length; n < i; n++) e[n].traverseVisible(t);
          }
          traverseAncestors(t) {
            const e = this.parent;
            null !== e && (t(e), e.traverseAncestors(t));
          }
          updateMatrix() {
            this.matrix.compose(this.position, this.quaternion, this.scale),
              (this.matrixWorldNeedsUpdate = !0);
          }
          updateMatrixWorld(t) {
            this.matrixAutoUpdate && this.updateMatrix(),
              (this.matrixWorldNeedsUpdate || t) &&
                (null === this.parent
                  ? this.matrixWorld.copy(this.matrix)
                  : this.matrixWorld.multiplyMatrices(
                      this.parent.matrixWorld,
                      this.matrix
                    ),
                (this.matrixWorldNeedsUpdate = !1),
                (t = !0));
            const e = this.children;
            for (let n = 0, i = e.length; n < i; n++) e[n].updateMatrixWorld(t);
          }
          updateWorldMatrix(t, e) {
            const n = this.parent;
            if (
              (!0 === t && null !== n && n.updateWorldMatrix(!0, !1),
              this.matrixAutoUpdate && this.updateMatrix(),
              null === this.parent
                ? this.matrixWorld.copy(this.matrix)
                : this.matrixWorld.multiplyMatrices(
                    this.parent.matrixWorld,
                    this.matrix
                  ),
              !0 === e)
            ) {
              const t = this.children;
              for (let e = 0, n = t.length; e < n; e++)
                t[e].updateWorldMatrix(!1, !0);
            }
          }
          toJSON(t) {
            const e = void 0 === t || "string" == typeof t,
              n = {};
            e &&
              ((t = {
                geometries: {},
                materials: {},
                textures: {},
                images: {},
                shapes: {},
                skeletons: {},
                animations: {},
              }),
              (n.metadata = {
                version: 4.5,
                type: "Object",
                generator: "Object3D.toJSON",
              }));
            const i = {};
            function r(e, n) {
              return void 0 === e[n.uuid] && (e[n.uuid] = n.toJSON(t)), n.uuid;
            }
            if (
              ((i.uuid = this.uuid),
              (i.type = this.type),
              "" !== this.name && (i.name = this.name),
              !0 === this.castShadow && (i.castShadow = !0),
              !0 === this.receiveShadow && (i.receiveShadow = !0),
              !1 === this.visible && (i.visible = !1),
              !1 === this.frustumCulled && (i.frustumCulled = !1),
              0 !== this.renderOrder && (i.renderOrder = this.renderOrder),
              "{}" !== JSON.stringify(this.userData) &&
                (i.userData = this.userData),
              (i.layers = this.layers.mask),
              (i.matrix = this.matrix.toArray()),
              !1 === this.matrixAutoUpdate && (i.matrixAutoUpdate = !1),
              this.isInstancedMesh &&
                ((i.type = "InstancedMesh"),
                (i.count = this.count),
                (i.instanceMatrix = this.instanceMatrix.toJSON()),
                null !== this.instanceColor &&
                  (i.instanceColor = this.instanceColor.toJSON())),
              this.isScene)
            )
              this.background &&
                (this.background.isColor
                  ? (i.background = this.background.toJSON())
                  : this.background.isTexture &&
                    (i.background = this.background.toJSON(t).uuid)),
                this.environment &&
                  this.environment.isTexture &&
                  (i.environment = this.environment.toJSON(t).uuid);
            else if (this.isMesh || this.isLine || this.isPoints) {
              i.geometry = r(t.geometries, this.geometry);
              const e = this.geometry.parameters;
              if (void 0 !== e && void 0 !== e.shapes) {
                const n = e.shapes;
                if (Array.isArray(n))
                  for (let e = 0, i = n.length; e < i; e++) {
                    const i = n[e];
                    r(t.shapes, i);
                  }
                else r(t.shapes, n);
              }
            }
            if (
              (this.isSkinnedMesh &&
                ((i.bindMode = this.bindMode),
                (i.bindMatrix = this.bindMatrix.toArray()),
                void 0 !== this.skeleton &&
                  (r(t.skeletons, this.skeleton),
                  (i.skeleton = this.skeleton.uuid))),
              void 0 !== this.material)
            )
              if (Array.isArray(this.material)) {
                const e = [];
                for (let n = 0, i = this.material.length; n < i; n++)
                  e.push(r(t.materials, this.material[n]));
                i.material = e;
              } else i.material = r(t.materials, this.material);
            if (this.children.length > 0) {
              i.children = [];
              for (let e = 0; e < this.children.length; e++)
                i.children.push(this.children[e].toJSON(t).object);
            }
            if (this.animations.length > 0) {
              i.animations = [];
              for (let e = 0; e < this.animations.length; e++) {
                const n = this.animations[e];
                i.animations.push(r(t.animations, n));
              }
            }
            if (e) {
              const e = o(t.geometries),
                i = o(t.materials),
                r = o(t.textures),
                s = o(t.images),
                a = o(t.shapes),
                l = o(t.skeletons),
                c = o(t.animations);
              e.length > 0 && (n.geometries = e),
                i.length > 0 && (n.materials = i),
                r.length > 0 && (n.textures = r),
                s.length > 0 && (n.images = s),
                a.length > 0 && (n.shapes = a),
                l.length > 0 && (n.skeletons = l),
                c.length > 0 && (n.animations = c);
            }
            return (n.object = i), n;
            function o(t) {
              const e = [];
              for (const n in t) {
                const i = t[n];
                delete i.metadata, e.push(i);
              }
              return e;
            }
          }
          clone(t) {
            return new this.constructor().copy(this, t);
          }
          copy(t, e = !0) {
            if (
              ((this.name = t.name),
              this.up.copy(t.up),
              this.position.copy(t.position),
              (this.rotation.order = t.rotation.order),
              this.quaternion.copy(t.quaternion),
              this.scale.copy(t.scale),
              this.matrix.copy(t.matrix),
              this.matrixWorld.copy(t.matrixWorld),
              (this.matrixAutoUpdate = t.matrixAutoUpdate),
              (this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate),
              (this.layers.mask = t.layers.mask),
              (this.visible = t.visible),
              (this.castShadow = t.castShadow),
              (this.receiveShadow = t.receiveShadow),
              (this.frustumCulled = t.frustumCulled),
              (this.renderOrder = t.renderOrder),
              (this.userData = JSON.parse(JSON.stringify(t.userData))),
              !0 === e)
            )
              for (let e = 0; e < t.children.length; e++) {
                const n = t.children[e];
                this.add(n.clone());
              }
            return this;
          }
        }
        (cr.DefaultUp = new ai(0, 1, 0)),
          (cr.DefaultMatrixAutoUpdate = !0),
          (cr.prototype.isObject3D = !0);
        const ur = new ai(),
          hr = new ai(),
          dr = new ai(),
          pr = new ai(),
          fr = new ai(),
          mr = new ai(),
          gr = new ai(),
          vr = new ai(),
          yr = new ai(),
          xr = new ai();
        class _r {
          constructor(t = new ai(), e = new ai(), n = new ai()) {
            (this.a = t), (this.b = e), (this.c = n);
          }
          static getNormal(t, e, n, i) {
            i.subVectors(n, e), ur.subVectors(t, e), i.cross(ur);
            const r = i.lengthSq();
            return r > 0 ? i.multiplyScalar(1 / Math.sqrt(r)) : i.set(0, 0, 0);
          }
          static getBarycoord(t, e, n, i, r) {
            ur.subVectors(i, e), hr.subVectors(n, e), dr.subVectors(t, e);
            const o = ur.dot(ur),
              s = ur.dot(hr),
              a = ur.dot(dr),
              l = hr.dot(hr),
              c = hr.dot(dr),
              u = o * l - s * s;
            if (0 === u) return r.set(-2, -1, -1);
            const h = 1 / u,
              d = (l * a - s * c) * h,
              p = (o * c - s * a) * h;
            return r.set(1 - d - p, p, d);
          }
          static containsPoint(t, e, n, i) {
            return (
              this.getBarycoord(t, e, n, i, pr),
              pr.x >= 0 && pr.y >= 0 && pr.x + pr.y <= 1
            );
          }
          static getUV(t, e, n, i, r, o, s, a) {
            return (
              this.getBarycoord(t, e, n, i, pr),
              a.set(0, 0),
              a.addScaledVector(r, pr.x),
              a.addScaledVector(o, pr.y),
              a.addScaledVector(s, pr.z),
              a
            );
          }
          static isFrontFacing(t, e, n, i) {
            return (
              ur.subVectors(n, e), hr.subVectors(t, e), ur.cross(hr).dot(i) < 0
            );
          }
          set(t, e, n) {
            return this.a.copy(t), this.b.copy(e), this.c.copy(n), this;
          }
          setFromPointsAndIndices(t, e, n, i) {
            return (
              this.a.copy(t[e]), this.b.copy(t[n]), this.c.copy(t[i]), this
            );
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            return this.a.copy(t.a), this.b.copy(t.b), this.c.copy(t.c), this;
          }
          getArea() {
            return (
              ur.subVectors(this.c, this.b),
              hr.subVectors(this.a, this.b),
              0.5 * ur.cross(hr).length()
            );
          }
          getMidpoint(t) {
            return t
              .addVectors(this.a, this.b)
              .add(this.c)
              .multiplyScalar(1 / 3);
          }
          getNormal(t) {
            return _r.getNormal(this.a, this.b, this.c, t);
          }
          getPlane(t) {
            return t.setFromCoplanarPoints(this.a, this.b, this.c);
          }
          getBarycoord(t, e) {
            return _r.getBarycoord(t, this.a, this.b, this.c, e);
          }
          getUV(t, e, n, i, r) {
            return _r.getUV(t, this.a, this.b, this.c, e, n, i, r);
          }
          containsPoint(t) {
            return _r.containsPoint(t, this.a, this.b, this.c);
          }
          isFrontFacing(t) {
            return _r.isFrontFacing(this.a, this.b, this.c, t);
          }
          intersectsBox(t) {
            return t.intersectsTriangle(this);
          }
          closestPointToPoint(t, e) {
            const n = this.a,
              i = this.b,
              r = this.c;
            let o, s;
            fr.subVectors(i, n), mr.subVectors(r, n), vr.subVectors(t, n);
            const a = fr.dot(vr),
              l = mr.dot(vr);
            if (a <= 0 && l <= 0) return e.copy(n);
            yr.subVectors(t, i);
            const c = fr.dot(yr),
              u = mr.dot(yr);
            if (c >= 0 && u <= c) return e.copy(i);
            const h = a * u - c * l;
            if (h <= 0 && a >= 0 && c <= 0)
              return (o = a / (a - c)), e.copy(n).addScaledVector(fr, o);
            xr.subVectors(t, r);
            const d = fr.dot(xr),
              p = mr.dot(xr);
            if (p >= 0 && d <= p) return e.copy(r);
            const f = d * l - a * p;
            if (f <= 0 && l >= 0 && p <= 0)
              return (s = l / (l - p)), e.copy(n).addScaledVector(mr, s);
            const m = c * p - d * u;
            if (m <= 0 && u - c >= 0 && d - p >= 0)
              return (
                gr.subVectors(r, i),
                (s = (u - c) / (u - c + (d - p))),
                e.copy(i).addScaledVector(gr, s)
              );
            const g = 1 / (m + f + h);
            return (
              (o = f * g),
              (s = h * g),
              e.copy(n).addScaledVector(fr, o).addScaledVector(mr, s)
            );
          }
          equals(t) {
            return (
              t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c)
            );
          }
        }
        let br = 0;
        class wr extends Bn {
          constructor() {
            super(),
              Object.defineProperty(this, "id", { value: br++ }),
              (this.uuid = jn()),
              (this.name = ""),
              (this.type = "Material"),
              (this.fog = !0),
              (this.blending = _),
              (this.side = f),
              (this.vertexColors = !1),
              (this.opacity = 1),
              (this.transparent = !1),
              (this.blendSrc = I),
              (this.blendDst = D),
              (this.blendEquation = E),
              (this.blendSrcAlpha = null),
              (this.blendDstAlpha = null),
              (this.blendEquationAlpha = null),
              (this.depthFunc = G),
              (this.depthTest = !0),
              (this.depthWrite = !0),
              (this.stencilWriteMask = 255),
              (this.stencilFunc = Sn),
              (this.stencilRef = 0),
              (this.stencilFuncMask = 255),
              (this.stencilFail = un),
              (this.stencilZFail = un),
              (this.stencilZPass = un),
              (this.stencilWrite = !1),
              (this.clippingPlanes = null),
              (this.clipIntersection = !1),
              (this.clipShadows = !1),
              (this.shadowSide = null),
              (this.colorWrite = !0),
              (this.precision = null),
              (this.polygonOffset = !1),
              (this.polygonOffsetFactor = 0),
              (this.polygonOffsetUnits = 0),
              (this.dithering = !1),
              (this.alphaTest = 0),
              (this.alphaToCoverage = !1),
              (this.premultipliedAlpha = !1),
              (this.visible = !0),
              (this.toneMapped = !0),
              (this.userData = {}),
              (this.version = 0);
          }
          onBuild() {}
          onBeforeCompile() {}
          customProgramCacheKey() {
            return this.onBeforeCompile.toString();
          }
          setValues(t) {
            if (void 0 !== t)
              for (const e in t) {
                const n = t[e];
                if (void 0 === n) {
                  console.warn(
                    "THREE.Material: '" + e + "' parameter is undefined."
                  );
                  continue;
                }
                if ("shading" === e) {
                  console.warn(
                    "THREE." +
                      this.type +
                      ": .shading has been removed. Use the boolean .flatShading instead."
                  ),
                    (this.flatShading = n === v);
                  continue;
                }
                const i = this[e];
                void 0 !== i
                  ? i && i.isColor
                    ? i.set(n)
                    : i && i.isVector3 && n && n.isVector3
                    ? i.copy(n)
                    : (this[e] = n)
                  : console.warn(
                      "THREE." +
                        this.type +
                        ": '" +
                        e +
                        "' is not a property of this material."
                    );
              }
          }
          toJSON(t) {
            const e = void 0 === t || "string" == typeof t;
            e && (t = { textures: {}, images: {} });
            const n = {
              metadata: {
                version: 4.5,
                type: "Material",
                generator: "Material.toJSON",
              },
            };
            function i(t) {
              const e = [];
              for (const n in t) {
                const i = t[n];
                delete i.metadata, e.push(i);
              }
              return e;
            }
            if (
              ((n.uuid = this.uuid),
              (n.type = this.type),
              "" !== this.name && (n.name = this.name),
              this.color &&
                this.color.isColor &&
                (n.color = this.color.getHex()),
              void 0 !== this.roughness && (n.roughness = this.roughness),
              void 0 !== this.metalness && (n.metalness = this.metalness),
              this.sheen &&
                this.sheen.isColor &&
                (n.sheen = this.sheen.getHex()),
              this.emissive &&
                this.emissive.isColor &&
                (n.emissive = this.emissive.getHex()),
              this.emissiveIntensity &&
                1 !== this.emissiveIntensity &&
                (n.emissiveIntensity = this.emissiveIntensity),
              this.specular &&
                this.specular.isColor &&
                (n.specular = this.specular.getHex()),
              void 0 !== this.specularIntensity &&
                (n.specularIntensity = this.specularIntensity),
              this.specularTint &&
                this.specularTint.isColor &&
                (n.specularTint = this.specularTint.getHex()),
              void 0 !== this.shininess && (n.shininess = this.shininess),
              void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat),
              void 0 !== this.clearcoatRoughness &&
                (n.clearcoatRoughness = this.clearcoatRoughness),
              this.clearcoatMap &&
                this.clearcoatMap.isTexture &&
                (n.clearcoatMap = this.clearcoatMap.toJSON(t).uuid),
              this.clearcoatRoughnessMap &&
                this.clearcoatRoughnessMap.isTexture &&
                (n.clearcoatRoughnessMap =
                  this.clearcoatRoughnessMap.toJSON(t).uuid),
              this.clearcoatNormalMap &&
                this.clearcoatNormalMap.isTexture &&
                ((n.clearcoatNormalMap =
                  this.clearcoatNormalMap.toJSON(t).uuid),
                (n.clearcoatNormalScale = this.clearcoatNormalScale.toArray())),
              this.map &&
                this.map.isTexture &&
                (n.map = this.map.toJSON(t).uuid),
              this.matcap &&
                this.matcap.isTexture &&
                (n.matcap = this.matcap.toJSON(t).uuid),
              this.alphaMap &&
                this.alphaMap.isTexture &&
                (n.alphaMap = this.alphaMap.toJSON(t).uuid),
              this.lightMap &&
                this.lightMap.isTexture &&
                ((n.lightMap = this.lightMap.toJSON(t).uuid),
                (n.lightMapIntensity = this.lightMapIntensity)),
              this.aoMap &&
                this.aoMap.isTexture &&
                ((n.aoMap = this.aoMap.toJSON(t).uuid),
                (n.aoMapIntensity = this.aoMapIntensity)),
              this.bumpMap &&
                this.bumpMap.isTexture &&
                ((n.bumpMap = this.bumpMap.toJSON(t).uuid),
                (n.bumpScale = this.bumpScale)),
              this.normalMap &&
                this.normalMap.isTexture &&
                ((n.normalMap = this.normalMap.toJSON(t).uuid),
                (n.normalMapType = this.normalMapType),
                (n.normalScale = this.normalScale.toArray())),
              this.displacementMap &&
                this.displacementMap.isTexture &&
                ((n.displacementMap = this.displacementMap.toJSON(t).uuid),
                (n.displacementScale = this.displacementScale),
                (n.displacementBias = this.displacementBias)),
              this.roughnessMap &&
                this.roughnessMap.isTexture &&
                (n.roughnessMap = this.roughnessMap.toJSON(t).uuid),
              this.metalnessMap &&
                this.metalnessMap.isTexture &&
                (n.metalnessMap = this.metalnessMap.toJSON(t).uuid),
              this.emissiveMap &&
                this.emissiveMap.isTexture &&
                (n.emissiveMap = this.emissiveMap.toJSON(t).uuid),
              this.specularMap &&
                this.specularMap.isTexture &&
                (n.specularMap = this.specularMap.toJSON(t).uuid),
              this.specularIntensityMap &&
                this.specularIntensityMap.isTexture &&
                (n.specularIntensityMap =
                  this.specularIntensityMap.toJSON(t).uuid),
              this.specularTintMap &&
                this.specularTintMap.isTexture &&
                (n.specularTintMap = this.specularTintMap.toJSON(t).uuid),
              this.envMap &&
                this.envMap.isTexture &&
                ((n.envMap = this.envMap.toJSON(t).uuid),
                void 0 !== this.combine && (n.combine = this.combine)),
              void 0 !== this.envMapIntensity &&
                (n.envMapIntensity = this.envMapIntensity),
              void 0 !== this.reflectivity &&
                (n.reflectivity = this.reflectivity),
              void 0 !== this.refractionRatio &&
                (n.refractionRatio = this.refractionRatio),
              this.gradientMap &&
                this.gradientMap.isTexture &&
                (n.gradientMap = this.gradientMap.toJSON(t).uuid),
              void 0 !== this.transmission &&
                (n.transmission = this.transmission),
              this.transmissionMap &&
                this.transmissionMap.isTexture &&
                (n.transmissionMap = this.transmissionMap.toJSON(t).uuid),
              void 0 !== this.thickness && (n.thickness = this.thickness),
              this.thicknessMap &&
                this.thicknessMap.isTexture &&
                (n.thicknessMap = this.thicknessMap.toJSON(t).uuid),
              void 0 !== this.attenuationDistance &&
                (n.attenuationDistance = this.attenuationDistance),
              void 0 !== this.attenuationTint &&
                (n.attenuationTint = this.attenuationTint.getHex()),
              void 0 !== this.size && (n.size = this.size),
              null !== this.shadowSide && (n.shadowSide = this.shadowSide),
              void 0 !== this.sizeAttenuation &&
                (n.sizeAttenuation = this.sizeAttenuation),
              this.blending !== _ && (n.blending = this.blending),
              this.side !== f && (n.side = this.side),
              this.vertexColors && (n.vertexColors = !0),
              this.opacity < 1 && (n.opacity = this.opacity),
              !0 === this.transparent && (n.transparent = this.transparent),
              (n.depthFunc = this.depthFunc),
              (n.depthTest = this.depthTest),
              (n.depthWrite = this.depthWrite),
              (n.colorWrite = this.colorWrite),
              (n.stencilWrite = this.stencilWrite),
              (n.stencilWriteMask = this.stencilWriteMask),
              (n.stencilFunc = this.stencilFunc),
              (n.stencilRef = this.stencilRef),
              (n.stencilFuncMask = this.stencilFuncMask),
              (n.stencilFail = this.stencilFail),
              (n.stencilZFail = this.stencilZFail),
              (n.stencilZPass = this.stencilZPass),
              this.rotation &&
                0 !== this.rotation &&
                (n.rotation = this.rotation),
              !0 === this.polygonOffset && (n.polygonOffset = !0),
              0 !== this.polygonOffsetFactor &&
                (n.polygonOffsetFactor = this.polygonOffsetFactor),
              0 !== this.polygonOffsetUnits &&
                (n.polygonOffsetUnits = this.polygonOffsetUnits),
              this.linewidth &&
                1 !== this.linewidth &&
                (n.linewidth = this.linewidth),
              void 0 !== this.dashSize && (n.dashSize = this.dashSize),
              void 0 !== this.gapSize && (n.gapSize = this.gapSize),
              void 0 !== this.scale && (n.scale = this.scale),
              !0 === this.dithering && (n.dithering = !0),
              this.alphaTest > 0 && (n.alphaTest = this.alphaTest),
              !0 === this.alphaToCoverage &&
                (n.alphaToCoverage = this.alphaToCoverage),
              !0 === this.premultipliedAlpha &&
                (n.premultipliedAlpha = this.premultipliedAlpha),
              !0 === this.wireframe && (n.wireframe = this.wireframe),
              this.wireframeLinewidth > 1 &&
                (n.wireframeLinewidth = this.wireframeLinewidth),
              "round" !== this.wireframeLinecap &&
                (n.wireframeLinecap = this.wireframeLinecap),
              "round" !== this.wireframeLinejoin &&
                (n.wireframeLinejoin = this.wireframeLinejoin),
              !0 === this.flatShading && (n.flatShading = this.flatShading),
              !1 === this.visible && (n.visible = !1),
              !1 === this.toneMapped && (n.toneMapped = !1),
              "{}" !== JSON.stringify(this.userData) &&
                (n.userData = this.userData),
              e)
            ) {
              const e = i(t.textures),
                r = i(t.images);
              e.length > 0 && (n.textures = e), r.length > 0 && (n.images = r);
            }
            return n;
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            (this.name = t.name),
              (this.fog = t.fog),
              (this.blending = t.blending),
              (this.side = t.side),
              (this.vertexColors = t.vertexColors),
              (this.opacity = t.opacity),
              (this.transparent = t.transparent),
              (this.blendSrc = t.blendSrc),
              (this.blendDst = t.blendDst),
              (this.blendEquation = t.blendEquation),
              (this.blendSrcAlpha = t.blendSrcAlpha),
              (this.blendDstAlpha = t.blendDstAlpha),
              (this.blendEquationAlpha = t.blendEquationAlpha),
              (this.depthFunc = t.depthFunc),
              (this.depthTest = t.depthTest),
              (this.depthWrite = t.depthWrite),
              (this.stencilWriteMask = t.stencilWriteMask),
              (this.stencilFunc = t.stencilFunc),
              (this.stencilRef = t.stencilRef),
              (this.stencilFuncMask = t.stencilFuncMask),
              (this.stencilFail = t.stencilFail),
              (this.stencilZFail = t.stencilZFail),
              (this.stencilZPass = t.stencilZPass),
              (this.stencilWrite = t.stencilWrite);
            const e = t.clippingPlanes;
            let n = null;
            if (null !== e) {
              const t = e.length;
              n = new Array(t);
              for (let i = 0; i !== t; ++i) n[i] = e[i].clone();
            }
            return (
              (this.clippingPlanes = n),
              (this.clipIntersection = t.clipIntersection),
              (this.clipShadows = t.clipShadows),
              (this.shadowSide = t.shadowSide),
              (this.colorWrite = t.colorWrite),
              (this.precision = t.precision),
              (this.polygonOffset = t.polygonOffset),
              (this.polygonOffsetFactor = t.polygonOffsetFactor),
              (this.polygonOffsetUnits = t.polygonOffsetUnits),
              (this.dithering = t.dithering),
              (this.alphaTest = t.alphaTest),
              (this.alphaToCoverage = t.alphaToCoverage),
              (this.premultipliedAlpha = t.premultipliedAlpha),
              (this.visible = t.visible),
              (this.toneMapped = t.toneMapped),
              (this.userData = JSON.parse(JSON.stringify(t.userData))),
              this
            );
          }
          dispose() {
            this.dispatchEvent({ type: "dispose" });
          }
          set needsUpdate(t) {
            !0 === t && this.version++;
          }
        }
        wr.prototype.isMaterial = !0;
        const Mr = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            rebeccapurple: 6697881,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074,
          },
          Sr = { h: 0, s: 0, l: 0 },
          Er = { h: 0, s: 0, l: 0 };
        function Tr(t, e, n) {
          return (
            n < 0 && (n += 1),
            n > 1 && (n -= 1),
            n < 1 / 6
              ? t + 6 * (e - t) * n
              : n < 0.5
              ? e
              : n < 2 / 3
              ? t + 6 * (e - t) * (2 / 3 - n)
              : t
          );
        }
        function Ar(t) {
          return t < 0.04045
            ? 0.0773993808 * t
            : Math.pow(0.9478672986 * t + 0.0521327014, 2.4);
        }
        function Cr(t) {
          return t < 0.0031308
            ? 12.92 * t
            : 1.055 * Math.pow(t, 0.41666) - 0.055;
        }
        class Lr {
          constructor(t, e, n) {
            return void 0 === e && void 0 === n
              ? this.set(t)
              : this.setRGB(t, e, n);
          }
          set(t) {
            return (
              t && t.isColor
                ? this.copy(t)
                : "number" == typeof t
                ? this.setHex(t)
                : "string" == typeof t && this.setStyle(t),
              this
            );
          }
          setScalar(t) {
            return (this.r = t), (this.g = t), (this.b = t), this;
          }
          setHex(t) {
            return (
              (t = Math.floor(t)),
              (this.r = ((t >> 16) & 255) / 255),
              (this.g = ((t >> 8) & 255) / 255),
              (this.b = (255 & t) / 255),
              this
            );
          }
          setRGB(t, e, n) {
            return (this.r = t), (this.g = e), (this.b = n), this;
          }
          setHSL(t, e, n) {
            if (((t = Vn(t, 1)), (e = Un(e, 0, 1)), (n = Un(n, 0, 1)), 0 === e))
              this.r = this.g = this.b = n;
            else {
              const i = n <= 0.5 ? n * (1 + e) : n + e - n * e,
                r = 2 * n - i;
              (this.r = Tr(r, i, t + 1 / 3)),
                (this.g = Tr(r, i, t)),
                (this.b = Tr(r, i, t - 1 / 3));
            }
            return this;
          }
          setStyle(t) {
            function e(e) {
              void 0 !== e &&
                parseFloat(e) < 1 &&
                console.warn(
                  "THREE.Color: Alpha component of " + t + " will be ignored."
                );
            }
            let n;
            if ((n = /^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t))) {
              let t;
              const i = n[1],
                r = n[2];
              switch (i) {
                case "rgb":
                case "rgba":
                  if (
                    (t =
                      /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                        r
                      ))
                  )
                    return (
                      (this.r = Math.min(255, parseInt(t[1], 10)) / 255),
                      (this.g = Math.min(255, parseInt(t[2], 10)) / 255),
                      (this.b = Math.min(255, parseInt(t[3], 10)) / 255),
                      e(t[4]),
                      this
                    );
                  if (
                    (t =
                      /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                        r
                      ))
                  )
                    return (
                      (this.r = Math.min(100, parseInt(t[1], 10)) / 100),
                      (this.g = Math.min(100, parseInt(t[2], 10)) / 100),
                      (this.b = Math.min(100, parseInt(t[3], 10)) / 100),
                      e(t[4]),
                      this
                    );
                  break;
                case "hsl":
                case "hsla":
                  if (
                    (t =
                      /^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                        r
                      ))
                  ) {
                    const n = parseFloat(t[1]) / 360,
                      i = parseInt(t[2], 10) / 100,
                      r = parseInt(t[3], 10) / 100;
                    return e(t[4]), this.setHSL(n, i, r);
                  }
              }
            } else if ((n = /^\#([A-Fa-f\d]+)$/.exec(t))) {
              const t = n[1],
                e = t.length;
              if (3 === e)
                return (
                  (this.r = parseInt(t.charAt(0) + t.charAt(0), 16) / 255),
                  (this.g = parseInt(t.charAt(1) + t.charAt(1), 16) / 255),
                  (this.b = parseInt(t.charAt(2) + t.charAt(2), 16) / 255),
                  this
                );
              if (6 === e)
                return (
                  (this.r = parseInt(t.charAt(0) + t.charAt(1), 16) / 255),
                  (this.g = parseInt(t.charAt(2) + t.charAt(3), 16) / 255),
                  (this.b = parseInt(t.charAt(4) + t.charAt(5), 16) / 255),
                  this
                );
            }
            return t && t.length > 0 ? this.setColorName(t) : this;
          }
          setColorName(t) {
            const e = Mr[t.toLowerCase()];
            return (
              void 0 !== e
                ? this.setHex(e)
                : console.warn("THREE.Color: Unknown color " + t),
              this
            );
          }
          clone() {
            return new this.constructor(this.r, this.g, this.b);
          }
          copy(t) {
            return (this.r = t.r), (this.g = t.g), (this.b = t.b), this;
          }
          copyGammaToLinear(t, e = 2) {
            return (
              (this.r = Math.pow(t.r, e)),
              (this.g = Math.pow(t.g, e)),
              (this.b = Math.pow(t.b, e)),
              this
            );
          }
          copyLinearToGamma(t, e = 2) {
            const n = e > 0 ? 1 / e : 1;
            return (
              (this.r = Math.pow(t.r, n)),
              (this.g = Math.pow(t.g, n)),
              (this.b = Math.pow(t.b, n)),
              this
            );
          }
          convertGammaToLinear(t) {
            return this.copyGammaToLinear(this, t), this;
          }
          convertLinearToGamma(t) {
            return this.copyLinearToGamma(this, t), this;
          }
          copySRGBToLinear(t) {
            return (
              (this.r = Ar(t.r)), (this.g = Ar(t.g)), (this.b = Ar(t.b)), this
            );
          }
          copyLinearToSRGB(t) {
            return (
              (this.r = Cr(t.r)), (this.g = Cr(t.g)), (this.b = Cr(t.b)), this
            );
          }
          convertSRGBToLinear() {
            return this.copySRGBToLinear(this), this;
          }
          convertLinearToSRGB() {
            return this.copyLinearToSRGB(this), this;
          }
          getHex() {
            return (
              ((255 * this.r) << 16) ^
              ((255 * this.g) << 8) ^
              ((255 * this.b) << 0)
            );
          }
          getHexString() {
            return ("000000" + this.getHex().toString(16)).slice(-6);
          }
          getHSL(t) {
            const e = this.r,
              n = this.g,
              i = this.b,
              r = Math.max(e, n, i),
              o = Math.min(e, n, i);
            let s, a;
            const l = (o + r) / 2;
            if (o === r) (s = 0), (a = 0);
            else {
              const t = r - o;
              switch (((a = l <= 0.5 ? t / (r + o) : t / (2 - r - o)), r)) {
                case e:
                  s = (n - i) / t + (n < i ? 6 : 0);
                  break;
                case n:
                  s = (i - e) / t + 2;
                  break;
                case i:
                  s = (e - n) / t + 4;
              }
              s /= 6;
            }
            return (t.h = s), (t.s = a), (t.l = l), t;
          }
          getStyle() {
            return (
              "rgb(" +
              ((255 * this.r) | 0) +
              "," +
              ((255 * this.g) | 0) +
              "," +
              ((255 * this.b) | 0) +
              ")"
            );
          }
          offsetHSL(t, e, n) {
            return (
              this.getHSL(Sr),
              (Sr.h += t),
              (Sr.s += e),
              (Sr.l += n),
              this.setHSL(Sr.h, Sr.s, Sr.l),
              this
            );
          }
          add(t) {
            return (this.r += t.r), (this.g += t.g), (this.b += t.b), this;
          }
          addColors(t, e) {
            return (
              (this.r = t.r + e.r),
              (this.g = t.g + e.g),
              (this.b = t.b + e.b),
              this
            );
          }
          addScalar(t) {
            return (this.r += t), (this.g += t), (this.b += t), this;
          }
          sub(t) {
            return (
              (this.r = Math.max(0, this.r - t.r)),
              (this.g = Math.max(0, this.g - t.g)),
              (this.b = Math.max(0, this.b - t.b)),
              this
            );
          }
          multiply(t) {
            return (this.r *= t.r), (this.g *= t.g), (this.b *= t.b), this;
          }
          multiplyScalar(t) {
            return (this.r *= t), (this.g *= t), (this.b *= t), this;
          }
          lerp(t, e) {
            return (
              (this.r += (t.r - this.r) * e),
              (this.g += (t.g - this.g) * e),
              (this.b += (t.b - this.b) * e),
              this
            );
          }
          lerpColors(t, e, n) {
            return (
              (this.r = t.r + (e.r - t.r) * n),
              (this.g = t.g + (e.g - t.g) * n),
              (this.b = t.b + (e.b - t.b) * n),
              this
            );
          }
          lerpHSL(t, e) {
            this.getHSL(Sr), t.getHSL(Er);
            const n = Gn(Sr.h, Er.h, e),
              i = Gn(Sr.s, Er.s, e),
              r = Gn(Sr.l, Er.l, e);
            return this.setHSL(n, i, r), this;
          }
          equals(t) {
            return t.r === this.r && t.g === this.g && t.b === this.b;
          }
          fromArray(t, e = 0) {
            return (
              (this.r = t[e]), (this.g = t[e + 1]), (this.b = t[e + 2]), this
            );
          }
          toArray(t = [], e = 0) {
            return (t[e] = this.r), (t[e + 1] = this.g), (t[e + 2] = this.b), t;
          }
          fromBufferAttribute(t, e) {
            return (
              (this.r = t.getX(e)),
              (this.g = t.getY(e)),
              (this.b = t.getZ(e)),
              !0 === t.normalized &&
                ((this.r /= 255), (this.g /= 255), (this.b /= 255)),
              this
            );
          }
          toJSON() {
            return this.getHex();
          }
        }
        (Lr.NAMES = Mr),
          (Lr.prototype.isColor = !0),
          (Lr.prototype.r = 1),
          (Lr.prototype.g = 1),
          (Lr.prototype.b = 1);
        class Rr extends wr {
          constructor(t) {
            super(),
              (this.type = "MeshBasicMaterial"),
              (this.color = new Lr(16777215)),
              (this.map = null),
              (this.lightMap = null),
              (this.lightMapIntensity = 1),
              (this.aoMap = null),
              (this.aoMapIntensity = 1),
              (this.specularMap = null),
              (this.alphaMap = null),
              (this.envMap = null),
              (this.combine = $),
              (this.reflectivity = 1),
              (this.refractionRatio = 0.98),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.wireframeLinecap = "round"),
              (this.wireframeLinejoin = "round"),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.map = t.map),
              (this.lightMap = t.lightMap),
              (this.lightMapIntensity = t.lightMapIntensity),
              (this.aoMap = t.aoMap),
              (this.aoMapIntensity = t.aoMapIntensity),
              (this.specularMap = t.specularMap),
              (this.alphaMap = t.alphaMap),
              (this.envMap = t.envMap),
              (this.combine = t.combine),
              (this.reflectivity = t.reflectivity),
              (this.refractionRatio = t.refractionRatio),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.wireframeLinecap = t.wireframeLinecap),
              (this.wireframeLinejoin = t.wireframeLinejoin),
              this
            );
          }
        }
        Rr.prototype.isMeshBasicMaterial = !0;
        const Pr = new ai(),
          Or = new $n();
        class kr {
          constructor(t, e, n) {
            if (Array.isArray(t))
              throw new TypeError(
                "THREE.BufferAttribute: array should be a Typed Array."
              );
            (this.name = ""),
              (this.array = t),
              (this.itemSize = e),
              (this.count = void 0 !== t ? t.length / e : 0),
              (this.normalized = !0 === n),
              (this.usage = En),
              (this.updateRange = { offset: 0, count: -1 }),
              (this.version = 0);
          }
          onUploadCallback() {}
          set needsUpdate(t) {
            !0 === t && this.version++;
          }
          setUsage(t) {
            return (this.usage = t), this;
          }
          copy(t) {
            return (
              (this.name = t.name),
              (this.array = new t.array.constructor(t.array)),
              (this.itemSize = t.itemSize),
              (this.count = t.count),
              (this.normalized = t.normalized),
              (this.usage = t.usage),
              this
            );
          }
          copyAt(t, e, n) {
            (t *= this.itemSize), (n *= e.itemSize);
            for (let i = 0, r = this.itemSize; i < r; i++)
              this.array[t + i] = e.array[n + i];
            return this;
          }
          copyArray(t) {
            return this.array.set(t), this;
          }
          copyColorsArray(t) {
            const e = this.array;
            let n = 0;
            for (let i = 0, r = t.length; i < r; i++) {
              let r = t[i];
              void 0 === r &&
                (console.warn(
                  "THREE.BufferAttribute.copyColorsArray(): color is undefined",
                  i
                ),
                (r = new Lr())),
                (e[n++] = r.r),
                (e[n++] = r.g),
                (e[n++] = r.b);
            }
            return this;
          }
          copyVector2sArray(t) {
            const e = this.array;
            let n = 0;
            for (let i = 0, r = t.length; i < r; i++) {
              let r = t[i];
              void 0 === r &&
                (console.warn(
                  "THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
                  i
                ),
                (r = new $n())),
                (e[n++] = r.x),
                (e[n++] = r.y);
            }
            return this;
          }
          copyVector3sArray(t) {
            const e = this.array;
            let n = 0;
            for (let i = 0, r = t.length; i < r; i++) {
              let r = t[i];
              void 0 === r &&
                (console.warn(
                  "THREE.BufferAttribute.copyVector3sArray(): vector is undefined",
                  i
                ),
                (r = new ai())),
                (e[n++] = r.x),
                (e[n++] = r.y),
                (e[n++] = r.z);
            }
            return this;
          }
          copyVector4sArray(t) {
            const e = this.array;
            let n = 0;
            for (let i = 0, r = t.length; i < r; i++) {
              let r = t[i];
              void 0 === r &&
                (console.warn(
                  "THREE.BufferAttribute.copyVector4sArray(): vector is undefined",
                  i
                ),
                (r = new ni())),
                (e[n++] = r.x),
                (e[n++] = r.y),
                (e[n++] = r.z),
                (e[n++] = r.w);
            }
            return this;
          }
          applyMatrix3(t) {
            if (2 === this.itemSize)
              for (let e = 0, n = this.count; e < n; e++)
                Or.fromBufferAttribute(this, e),
                  Or.applyMatrix3(t),
                  this.setXY(e, Or.x, Or.y);
            else if (3 === this.itemSize)
              for (let e = 0, n = this.count; e < n; e++)
                Pr.fromBufferAttribute(this, e),
                  Pr.applyMatrix3(t),
                  this.setXYZ(e, Pr.x, Pr.y, Pr.z);
            return this;
          }
          applyMatrix4(t) {
            for (let e = 0, n = this.count; e < n; e++)
              (Pr.x = this.getX(e)),
                (Pr.y = this.getY(e)),
                (Pr.z = this.getZ(e)),
                Pr.applyMatrix4(t),
                this.setXYZ(e, Pr.x, Pr.y, Pr.z);
            return this;
          }
          applyNormalMatrix(t) {
            for (let e = 0, n = this.count; e < n; e++)
              (Pr.x = this.getX(e)),
                (Pr.y = this.getY(e)),
                (Pr.z = this.getZ(e)),
                Pr.applyNormalMatrix(t),
                this.setXYZ(e, Pr.x, Pr.y, Pr.z);
            return this;
          }
          transformDirection(t) {
            for (let e = 0, n = this.count; e < n; e++)
              (Pr.x = this.getX(e)),
                (Pr.y = this.getY(e)),
                (Pr.z = this.getZ(e)),
                Pr.transformDirection(t),
                this.setXYZ(e, Pr.x, Pr.y, Pr.z);
            return this;
          }
          set(t, e = 0) {
            return this.array.set(t, e), this;
          }
          getX(t) {
            return this.array[t * this.itemSize];
          }
          setX(t, e) {
            return (this.array[t * this.itemSize] = e), this;
          }
          getY(t) {
            return this.array[t * this.itemSize + 1];
          }
          setY(t, e) {
            return (this.array[t * this.itemSize + 1] = e), this;
          }
          getZ(t) {
            return this.array[t * this.itemSize + 2];
          }
          setZ(t, e) {
            return (this.array[t * this.itemSize + 2] = e), this;
          }
          getW(t) {
            return this.array[t * this.itemSize + 3];
          }
          setW(t, e) {
            return (this.array[t * this.itemSize + 3] = e), this;
          }
          setXY(t, e, n) {
            return (
              (t *= this.itemSize),
              (this.array[t + 0] = e),
              (this.array[t + 1] = n),
              this
            );
          }
          setXYZ(t, e, n, i) {
            return (
              (t *= this.itemSize),
              (this.array[t + 0] = e),
              (this.array[t + 1] = n),
              (this.array[t + 2] = i),
              this
            );
          }
          setXYZW(t, e, n, i, r) {
            return (
              (t *= this.itemSize),
              (this.array[t + 0] = e),
              (this.array[t + 1] = n),
              (this.array[t + 2] = i),
              (this.array[t + 3] = r),
              this
            );
          }
          onUpload(t) {
            return (this.onUploadCallback = t), this;
          }
          clone() {
            return new this.constructor(this.array, this.itemSize).copy(this);
          }
          toJSON() {
            const t = {
              itemSize: this.itemSize,
              type: this.array.constructor.name,
              array: Array.prototype.slice.call(this.array),
              normalized: this.normalized,
            };
            return (
              "" !== this.name && (t.name = this.name),
              this.usage !== En && (t.usage = this.usage),
              (0 === this.updateRange.offset &&
                -1 === this.updateRange.count) ||
                (t.updateRange = this.updateRange),
              t
            );
          }
        }
        kr.prototype.isBufferAttribute = !0;
        class Ir extends kr {
          constructor(t, e, n) {
            super(new Int8Array(t), e, n);
          }
        }
        class Dr extends kr {
          constructor(t, e, n) {
            super(new Uint8Array(t), e, n);
          }
        }
        class Br extends kr {
          constructor(t, e, n) {
            super(new Uint8ClampedArray(t), e, n);
          }
        }
        class Nr extends kr {
          constructor(t, e, n) {
            super(new Int16Array(t), e, n);
          }
        }
        class Fr extends kr {
          constructor(t, e, n) {
            super(new Uint16Array(t), e, n);
          }
        }
        class zr extends kr {
          constructor(t, e, n) {
            super(new Int32Array(t), e, n);
          }
        }
        class Hr extends kr {
          constructor(t, e, n) {
            super(new Uint32Array(t), e, n);
          }
        }
        class jr extends kr {
          constructor(t, e, n) {
            super(new Uint16Array(t), e, n);
          }
        }
        jr.prototype.isFloat16BufferAttribute = !0;
        class Ur extends kr {
          constructor(t, e, n) {
            super(new Float32Array(t), e, n);
          }
        }
        class Vr extends kr {
          constructor(t, e, n) {
            super(new Float64Array(t), e, n);
          }
        }
        function Gr(t) {
          if (0 === t.length) return -1 / 0;
          let e = t[0];
          for (let n = 1, i = t.length; n < i; ++n) t[n] > e && (e = t[n]);
          return e;
        }
        const Wr = {
          Int8Array,
          Uint8Array,
          Uint8ClampedArray,
          Int16Array,
          Uint16Array,
          Int32Array,
          Uint32Array,
          Float32Array,
          Float64Array,
        };
        function qr(t, e) {
          return new Wr[t](e);
        }
        let Xr = 0;
        const Yr = new Fi(),
          $r = new cr(),
          Kr = new ai(),
          Jr = new ui(),
          Zr = new ui(),
          Qr = new ai();
        class to extends Bn {
          constructor() {
            super(),
              Object.defineProperty(this, "id", { value: Xr++ }),
              (this.uuid = jn()),
              (this.name = ""),
              (this.type = "BufferGeometry"),
              (this.index = null),
              (this.attributes = {}),
              (this.morphAttributes = {}),
              (this.morphTargetsRelative = !1),
              (this.groups = []),
              (this.boundingBox = null),
              (this.boundingSphere = null),
              (this.drawRange = { start: 0, count: 1 / 0 }),
              (this.userData = {});
          }
          getIndex() {
            return this.index;
          }
          setIndex(t) {
            return (
              Array.isArray(t)
                ? (this.index = new (Gr(t) > 65535 ? Hr : Fr)(t, 1))
                : (this.index = t),
              this
            );
          }
          getAttribute(t) {
            return this.attributes[t];
          }
          setAttribute(t, e) {
            return (this.attributes[t] = e), this;
          }
          deleteAttribute(t) {
            return delete this.attributes[t], this;
          }
          hasAttribute(t) {
            return void 0 !== this.attributes[t];
          }
          addGroup(t, e, n = 0) {
            this.groups.push({ start: t, count: e, materialIndex: n });
          }
          clearGroups() {
            this.groups = [];
          }
          setDrawRange(t, e) {
            (this.drawRange.start = t), (this.drawRange.count = e);
          }
          applyMatrix4(t) {
            const e = this.attributes.position;
            void 0 !== e && (e.applyMatrix4(t), (e.needsUpdate = !0));
            const n = this.attributes.normal;
            if (void 0 !== n) {
              const e = new Kn().getNormalMatrix(t);
              n.applyNormalMatrix(e), (n.needsUpdate = !0);
            }
            const i = this.attributes.tangent;
            return (
              void 0 !== i && (i.transformDirection(t), (i.needsUpdate = !0)),
              null !== this.boundingBox && this.computeBoundingBox(),
              null !== this.boundingSphere && this.computeBoundingSphere(),
              this
            );
          }
          applyQuaternion(t) {
            return (
              Yr.makeRotationFromQuaternion(t), this.applyMatrix4(Yr), this
            );
          }
          rotateX(t) {
            return Yr.makeRotationX(t), this.applyMatrix4(Yr), this;
          }
          rotateY(t) {
            return Yr.makeRotationY(t), this.applyMatrix4(Yr), this;
          }
          rotateZ(t) {
            return Yr.makeRotationZ(t), this.applyMatrix4(Yr), this;
          }
          translate(t, e, n) {
            return Yr.makeTranslation(t, e, n), this.applyMatrix4(Yr), this;
          }
          scale(t, e, n) {
            return Yr.makeScale(t, e, n), this.applyMatrix4(Yr), this;
          }
          lookAt(t) {
            return (
              $r.lookAt(t),
              $r.updateMatrix(),
              this.applyMatrix4($r.matrix),
              this
            );
          }
          center() {
            return (
              this.computeBoundingBox(),
              this.boundingBox.getCenter(Kr).negate(),
              this.translate(Kr.x, Kr.y, Kr.z),
              this
            );
          }
          setFromPoints(t) {
            const e = [];
            for (let n = 0, i = t.length; n < i; n++) {
              const i = t[n];
              e.push(i.x, i.y, i.z || 0);
            }
            return this.setAttribute("position", new Ur(e, 3)), this;
          }
          computeBoundingBox() {
            null === this.boundingBox && (this.boundingBox = new ui());
            const t = this.attributes.position,
              e = this.morphAttributes.position;
            if (t && t.isGLBufferAttribute)
              return (
                console.error(
                  'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
                  this
                ),
                void this.boundingBox.set(
                  new ai(-1 / 0, -1 / 0, -1 / 0),
                  new ai(1 / 0, 1 / 0, 1 / 0)
                )
              );
            if (void 0 !== t) {
              if ((this.boundingBox.setFromBufferAttribute(t), e))
                for (let t = 0, n = e.length; t < n; t++) {
                  const n = e[t];
                  Jr.setFromBufferAttribute(n),
                    this.morphTargetsRelative
                      ? (Qr.addVectors(this.boundingBox.min, Jr.min),
                        this.boundingBox.expandByPoint(Qr),
                        Qr.addVectors(this.boundingBox.max, Jr.max),
                        this.boundingBox.expandByPoint(Qr))
                      : (this.boundingBox.expandByPoint(Jr.min),
                        this.boundingBox.expandByPoint(Jr.max));
                }
            } else this.boundingBox.makeEmpty();
            (isNaN(this.boundingBox.min.x) ||
              isNaN(this.boundingBox.min.y) ||
              isNaN(this.boundingBox.min.z)) &&
              console.error(
                'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
                this
              );
          }
          computeBoundingSphere() {
            null === this.boundingSphere && (this.boundingSphere = new Li());
            const t = this.attributes.position,
              e = this.morphAttributes.position;
            if (t && t.isGLBufferAttribute)
              return (
                console.error(
                  'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
                  this
                ),
                void this.boundingSphere.set(new ai(), 1 / 0)
              );
            if (t) {
              const n = this.boundingSphere.center;
              if ((Jr.setFromBufferAttribute(t), e))
                for (let t = 0, n = e.length; t < n; t++) {
                  const n = e[t];
                  Zr.setFromBufferAttribute(n),
                    this.morphTargetsRelative
                      ? (Qr.addVectors(Jr.min, Zr.min),
                        Jr.expandByPoint(Qr),
                        Qr.addVectors(Jr.max, Zr.max),
                        Jr.expandByPoint(Qr))
                      : (Jr.expandByPoint(Zr.min), Jr.expandByPoint(Zr.max));
                }
              Jr.getCenter(n);
              let i = 0;
              for (let e = 0, r = t.count; e < r; e++)
                Qr.fromBufferAttribute(t, e),
                  (i = Math.max(i, n.distanceToSquared(Qr)));
              if (e)
                for (let r = 0, o = e.length; r < o; r++) {
                  const o = e[r],
                    s = this.morphTargetsRelative;
                  for (let e = 0, r = o.count; e < r; e++)
                    Qr.fromBufferAttribute(o, e),
                      s && (Kr.fromBufferAttribute(t, e), Qr.add(Kr)),
                      (i = Math.max(i, n.distanceToSquared(Qr)));
                }
              (this.boundingSphere.radius = Math.sqrt(i)),
                isNaN(this.boundingSphere.radius) &&
                  console.error(
                    'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                    this
                  );
            }
          }
          computeFaceNormals() {}
          computeTangents() {
            const t = this.index,
              e = this.attributes;
            if (
              null === t ||
              void 0 === e.position ||
              void 0 === e.normal ||
              void 0 === e.uv
            )
              return void console.error(
                "THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)"
              );
            const n = t.array,
              i = e.position.array,
              r = e.normal.array,
              o = e.uv.array,
              s = i.length / 3;
            void 0 === e.tangent &&
              this.setAttribute("tangent", new kr(new Float32Array(4 * s), 4));
            const a = e.tangent.array,
              l = [],
              c = [];
            for (let t = 0; t < s; t++) (l[t] = new ai()), (c[t] = new ai());
            const u = new ai(),
              h = new ai(),
              d = new ai(),
              p = new $n(),
              f = new $n(),
              m = new $n(),
              g = new ai(),
              v = new ai();
            function y(t, e, n) {
              u.fromArray(i, 3 * t),
                h.fromArray(i, 3 * e),
                d.fromArray(i, 3 * n),
                p.fromArray(o, 2 * t),
                f.fromArray(o, 2 * e),
                m.fromArray(o, 2 * n),
                h.sub(u),
                d.sub(u),
                f.sub(p),
                m.sub(p);
              const r = 1 / (f.x * m.y - m.x * f.y);
              isFinite(r) &&
                (g
                  .copy(h)
                  .multiplyScalar(m.y)
                  .addScaledVector(d, -f.y)
                  .multiplyScalar(r),
                v
                  .copy(d)
                  .multiplyScalar(f.x)
                  .addScaledVector(h, -m.x)
                  .multiplyScalar(r),
                l[t].add(g),
                l[e].add(g),
                l[n].add(g),
                c[t].add(v),
                c[e].add(v),
                c[n].add(v));
            }
            let x = this.groups;
            0 === x.length && (x = [{ start: 0, count: n.length }]);
            for (let t = 0, e = x.length; t < e; ++t) {
              const e = x[t],
                i = e.start;
              for (let t = i, r = i + e.count; t < r; t += 3)
                y(n[t + 0], n[t + 1], n[t + 2]);
            }
            const _ = new ai(),
              b = new ai(),
              w = new ai(),
              M = new ai();
            function S(t) {
              w.fromArray(r, 3 * t), M.copy(w);
              const e = l[t];
              _.copy(e),
                _.sub(w.multiplyScalar(w.dot(e))).normalize(),
                b.crossVectors(M, e);
              const n = b.dot(c[t]) < 0 ? -1 : 1;
              (a[4 * t] = _.x),
                (a[4 * t + 1] = _.y),
                (a[4 * t + 2] = _.z),
                (a[4 * t + 3] = n);
            }
            for (let t = 0, e = x.length; t < e; ++t) {
              const e = x[t],
                i = e.start;
              for (let t = i, r = i + e.count; t < r; t += 3)
                S(n[t + 0]), S(n[t + 1]), S(n[t + 2]);
            }
          }
          computeVertexNormals() {
            const t = this.index,
              e = this.getAttribute("position");
            if (void 0 !== e) {
              let n = this.getAttribute("normal");
              if (void 0 === n)
                (n = new kr(new Float32Array(3 * e.count), 3)),
                  this.setAttribute("normal", n);
              else
                for (let t = 0, e = n.count; t < e; t++) n.setXYZ(t, 0, 0, 0);
              const i = new ai(),
                r = new ai(),
                o = new ai(),
                s = new ai(),
                a = new ai(),
                l = new ai(),
                c = new ai(),
                u = new ai();
              if (t)
                for (let h = 0, d = t.count; h < d; h += 3) {
                  const d = t.getX(h + 0),
                    p = t.getX(h + 1),
                    f = t.getX(h + 2);
                  i.fromBufferAttribute(e, d),
                    r.fromBufferAttribute(e, p),
                    o.fromBufferAttribute(e, f),
                    c.subVectors(o, r),
                    u.subVectors(i, r),
                    c.cross(u),
                    s.fromBufferAttribute(n, d),
                    a.fromBufferAttribute(n, p),
                    l.fromBufferAttribute(n, f),
                    s.add(c),
                    a.add(c),
                    l.add(c),
                    n.setXYZ(d, s.x, s.y, s.z),
                    n.setXYZ(p, a.x, a.y, a.z),
                    n.setXYZ(f, l.x, l.y, l.z);
                }
              else
                for (let t = 0, s = e.count; t < s; t += 3)
                  i.fromBufferAttribute(e, t + 0),
                    r.fromBufferAttribute(e, t + 1),
                    o.fromBufferAttribute(e, t + 2),
                    c.subVectors(o, r),
                    u.subVectors(i, r),
                    c.cross(u),
                    n.setXYZ(t + 0, c.x, c.y, c.z),
                    n.setXYZ(t + 1, c.x, c.y, c.z),
                    n.setXYZ(t + 2, c.x, c.y, c.z);
              this.normalizeNormals(), (n.needsUpdate = !0);
            }
          }
          merge(t, e) {
            if (!t || !t.isBufferGeometry)
              return void console.error(
                "THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
                t
              );
            void 0 === e &&
              ((e = 0),
              console.warn(
                "THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."
              ));
            const n = this.attributes;
            for (const i in n) {
              if (void 0 === t.attributes[i]) continue;
              const r = n[i].array,
                o = t.attributes[i],
                s = o.array,
                a = o.itemSize * e,
                l = Math.min(s.length, r.length - a);
              for (let t = 0, e = a; t < l; t++, e++) r[e] = s[t];
            }
            return this;
          }
          normalizeNormals() {
            const t = this.attributes.normal;
            for (let e = 0, n = t.count; e < n; e++)
              Qr.fromBufferAttribute(t, e),
                Qr.normalize(),
                t.setXYZ(e, Qr.x, Qr.y, Qr.z);
          }
          toNonIndexed() {
            function t(t, e) {
              const n = t.array,
                i = t.itemSize,
                r = t.normalized,
                o = new n.constructor(e.length * i);
              let s = 0,
                a = 0;
              for (let r = 0, l = e.length; r < l; r++) {
                s = t.isInterleavedBufferAttribute
                  ? e[r] * t.data.stride + t.offset
                  : e[r] * i;
                for (let t = 0; t < i; t++) o[a++] = n[s++];
              }
              return new kr(o, i, r);
            }
            if (null === this.index)
              return (
                console.warn(
                  "THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."
                ),
                this
              );
            const e = new to(),
              n = this.index.array,
              i = this.attributes;
            for (const r in i) {
              const o = t(i[r], n);
              e.setAttribute(r, o);
            }
            const r = this.morphAttributes;
            for (const i in r) {
              const o = [],
                s = r[i];
              for (let e = 0, i = s.length; e < i; e++) {
                const i = t(s[e], n);
                o.push(i);
              }
              e.morphAttributes[i] = o;
            }
            e.morphTargetsRelative = this.morphTargetsRelative;
            const o = this.groups;
            for (let t = 0, n = o.length; t < n; t++) {
              const n = o[t];
              e.addGroup(n.start, n.count, n.materialIndex);
            }
            return e;
          }
          toJSON() {
            const t = {
              metadata: {
                version: 4.5,
                type: "BufferGeometry",
                generator: "BufferGeometry.toJSON",
              },
            };
            if (
              ((t.uuid = this.uuid),
              (t.type = this.type),
              "" !== this.name && (t.name = this.name),
              Object.keys(this.userData).length > 0 &&
                (t.userData = this.userData),
              void 0 !== this.parameters)
            ) {
              const e = this.parameters;
              for (const n in e) void 0 !== e[n] && (t[n] = e[n]);
              return t;
            }
            t.data = { attributes: {} };
            const e = this.index;
            null !== e &&
              (t.data.index = {
                type: e.array.constructor.name,
                array: Array.prototype.slice.call(e.array),
              });
            const n = this.attributes;
            for (const e in n) {
              const i = n[e];
              t.data.attributes[e] = i.toJSON(t.data);
            }
            const i = {};
            let r = !1;
            for (const e in this.morphAttributes) {
              const n = this.morphAttributes[e],
                o = [];
              for (let e = 0, i = n.length; e < i; e++) {
                const i = n[e];
                o.push(i.toJSON(t.data));
              }
              o.length > 0 && ((i[e] = o), (r = !0));
            }
            r &&
              ((t.data.morphAttributes = i),
              (t.data.morphTargetsRelative = this.morphTargetsRelative));
            const o = this.groups;
            o.length > 0 && (t.data.groups = JSON.parse(JSON.stringify(o)));
            const s = this.boundingSphere;
            return (
              null !== s &&
                (t.data.boundingSphere = {
                  center: s.center.toArray(),
                  radius: s.radius,
                }),
              t
            );
          }
          clone() {
            return new to().copy(this);
          }
          copy(t) {
            (this.index = null),
              (this.attributes = {}),
              (this.morphAttributes = {}),
              (this.groups = []),
              (this.boundingBox = null),
              (this.boundingSphere = null);
            const e = {};
            this.name = t.name;
            const n = t.index;
            null !== n && this.setIndex(n.clone(e));
            const i = t.attributes;
            for (const t in i) {
              const n = i[t];
              this.setAttribute(t, n.clone(e));
            }
            const r = t.morphAttributes;
            for (const t in r) {
              const n = [],
                i = r[t];
              for (let t = 0, r = i.length; t < r; t++) n.push(i[t].clone(e));
              this.morphAttributes[t] = n;
            }
            this.morphTargetsRelative = t.morphTargetsRelative;
            const o = t.groups;
            for (let t = 0, e = o.length; t < e; t++) {
              const e = o[t];
              this.addGroup(e.start, e.count, e.materialIndex);
            }
            const s = t.boundingBox;
            null !== s && (this.boundingBox = s.clone());
            const a = t.boundingSphere;
            return (
              null !== a && (this.boundingSphere = a.clone()),
              (this.drawRange.start = t.drawRange.start),
              (this.drawRange.count = t.drawRange.count),
              (this.userData = t.userData),
              this
            );
          }
          dispose() {
            this.dispatchEvent({ type: "dispose" });
          }
        }
        to.prototype.isBufferGeometry = !0;
        const eo = new Fi(),
          no = new Ni(),
          io = new Li(),
          ro = new ai(),
          oo = new ai(),
          so = new ai(),
          ao = new ai(),
          lo = new ai(),
          co = new ai(),
          uo = new ai(),
          ho = new ai(),
          po = new ai(),
          fo = new $n(),
          mo = new $n(),
          go = new $n(),
          vo = new ai(),
          yo = new ai();
        class xo extends cr {
          constructor(t = new to(), e = new Rr()) {
            super(),
              (this.type = "Mesh"),
              (this.geometry = t),
              (this.material = e),
              this.updateMorphTargets();
          }
          copy(t) {
            return (
              super.copy(t),
              void 0 !== t.morphTargetInfluences &&
                (this.morphTargetInfluences = t.morphTargetInfluences.slice()),
              void 0 !== t.morphTargetDictionary &&
                (this.morphTargetDictionary = Object.assign(
                  {},
                  t.morphTargetDictionary
                )),
              (this.material = t.material),
              (this.geometry = t.geometry),
              this
            );
          }
          updateMorphTargets() {
            const t = this.geometry;
            if (t.isBufferGeometry) {
              const e = t.morphAttributes,
                n = Object.keys(e);
              if (n.length > 0) {
                const t = e[n[0]];
                if (void 0 !== t) {
                  (this.morphTargetInfluences = []),
                    (this.morphTargetDictionary = {});
                  for (let e = 0, n = t.length; e < n; e++) {
                    const n = t[e].name || String(e);
                    this.morphTargetInfluences.push(0),
                      (this.morphTargetDictionary[n] = e);
                  }
                }
              }
            } else {
              const e = t.morphTargets;
              void 0 !== e &&
                e.length > 0 &&
                console.error(
                  "THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                );
            }
          }
          raycast(t, e) {
            const n = this.geometry,
              i = this.material,
              r = this.matrixWorld;
            if (void 0 === i) return;
            if (
              (null === n.boundingSphere && n.computeBoundingSphere(),
              io.copy(n.boundingSphere),
              io.applyMatrix4(r),
              !1 === t.ray.intersectsSphere(io))
            )
              return;
            if (
              (eo.copy(r).invert(),
              no.copy(t.ray).applyMatrix4(eo),
              null !== n.boundingBox && !1 === no.intersectsBox(n.boundingBox))
            )
              return;
            let o;
            if (n.isBufferGeometry) {
              const r = n.index,
                s = n.attributes.position,
                a = n.morphAttributes.position,
                l = n.morphTargetsRelative,
                c = n.attributes.uv,
                u = n.attributes.uv2,
                h = n.groups,
                d = n.drawRange;
              if (null !== r)
                if (Array.isArray(i))
                  for (let n = 0, p = h.length; n < p; n++) {
                    const p = h[n],
                      f = i[p.materialIndex];
                    for (
                      let n = Math.max(p.start, d.start),
                        i = Math.min(p.start + p.count, d.start + d.count);
                      n < i;
                      n += 3
                    ) {
                      const i = r.getX(n),
                        h = r.getX(n + 1),
                        d = r.getX(n + 2);
                      (o = _o(this, f, t, no, s, a, l, c, u, i, h, d)),
                        o &&
                          ((o.faceIndex = Math.floor(n / 3)),
                          (o.face.materialIndex = p.materialIndex),
                          e.push(o));
                    }
                  }
                else
                  for (
                    let n = Math.max(0, d.start),
                      h = Math.min(r.count, d.start + d.count);
                    n < h;
                    n += 3
                  ) {
                    const h = r.getX(n),
                      d = r.getX(n + 1),
                      p = r.getX(n + 2);
                    (o = _o(this, i, t, no, s, a, l, c, u, h, d, p)),
                      o && ((o.faceIndex = Math.floor(n / 3)), e.push(o));
                  }
              else if (void 0 !== s)
                if (Array.isArray(i))
                  for (let n = 0, r = h.length; n < r; n++) {
                    const r = h[n],
                      p = i[r.materialIndex];
                    for (
                      let n = Math.max(r.start, d.start),
                        i = Math.min(r.start + r.count, d.start + d.count);
                      n < i;
                      n += 3
                    )
                      (o = _o(this, p, t, no, s, a, l, c, u, n, n + 1, n + 2)),
                        o &&
                          ((o.faceIndex = Math.floor(n / 3)),
                          (o.face.materialIndex = r.materialIndex),
                          e.push(o));
                  }
                else
                  for (
                    let n = Math.max(0, d.start),
                      r = Math.min(s.count, d.start + d.count);
                    n < r;
                    n += 3
                  )
                    (o = _o(this, i, t, no, s, a, l, c, u, n, n + 1, n + 2)),
                      o && ((o.faceIndex = Math.floor(n / 3)), e.push(o));
            } else
              n.isGeometry &&
                console.error(
                  "THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                );
          }
        }
        function _o(t, e, n, i, r, o, s, a, l, c, u, h) {
          ro.fromBufferAttribute(r, c),
            oo.fromBufferAttribute(r, u),
            so.fromBufferAttribute(r, h);
          const d = t.morphTargetInfluences;
          if (o && d) {
            uo.set(0, 0, 0), ho.set(0, 0, 0), po.set(0, 0, 0);
            for (let t = 0, e = o.length; t < e; t++) {
              const e = d[t],
                n = o[t];
              0 !== e &&
                (ao.fromBufferAttribute(n, c),
                lo.fromBufferAttribute(n, u),
                co.fromBufferAttribute(n, h),
                s
                  ? (uo.addScaledVector(ao, e),
                    ho.addScaledVector(lo, e),
                    po.addScaledVector(co, e))
                  : (uo.addScaledVector(ao.sub(ro), e),
                    ho.addScaledVector(lo.sub(oo), e),
                    po.addScaledVector(co.sub(so), e)));
            }
            ro.add(uo), oo.add(ho), so.add(po);
          }
          t.isSkinnedMesh &&
            (t.boneTransform(c, ro),
            t.boneTransform(u, oo),
            t.boneTransform(h, so));
          const p = (function (t, e, n, i, r, o, s, a) {
            let l;
            if (
              ((l =
                e.side === m
                  ? i.intersectTriangle(s, o, r, !0, a)
                  : i.intersectTriangle(r, o, s, e.side !== g, a)),
              null === l)
            )
              return null;
            yo.copy(a), yo.applyMatrix4(t.matrixWorld);
            const c = n.ray.origin.distanceTo(yo);
            return c < n.near || c > n.far
              ? null
              : { distance: c, point: yo.clone(), object: t };
          })(t, e, n, i, ro, oo, so, vo);
          if (p) {
            a &&
              (fo.fromBufferAttribute(a, c),
              mo.fromBufferAttribute(a, u),
              go.fromBufferAttribute(a, h),
              (p.uv = _r.getUV(vo, ro, oo, so, fo, mo, go, new $n()))),
              l &&
                (fo.fromBufferAttribute(l, c),
                mo.fromBufferAttribute(l, u),
                go.fromBufferAttribute(l, h),
                (p.uv2 = _r.getUV(vo, ro, oo, so, fo, mo, go, new $n())));
            const t = { a: c, b: u, c: h, normal: new ai(), materialIndex: 0 };
            _r.getNormal(ro, oo, so, t.normal), (p.face = t);
          }
          return p;
        }
        xo.prototype.isMesh = !0;
        class bo extends to {
          constructor(t = 1, e = 1, n = 1, i = 1, r = 1, o = 1) {
            super(),
              (this.type = "BoxGeometry"),
              (this.parameters = {
                width: t,
                height: e,
                depth: n,
                widthSegments: i,
                heightSegments: r,
                depthSegments: o,
              });
            const s = this;
            (i = Math.floor(i)), (r = Math.floor(r)), (o = Math.floor(o));
            const a = [],
              l = [],
              c = [],
              u = [];
            let h = 0,
              d = 0;
            function p(t, e, n, i, r, o, p, f, m, g, v) {
              const y = o / m,
                x = p / g,
                _ = o / 2,
                b = p / 2,
                w = f / 2,
                M = m + 1,
                S = g + 1;
              let E = 0,
                T = 0;
              const A = new ai();
              for (let o = 0; o < S; o++) {
                const s = o * x - b;
                for (let a = 0; a < M; a++) {
                  const h = a * y - _;
                  (A[t] = h * i),
                    (A[e] = s * r),
                    (A[n] = w),
                    l.push(A.x, A.y, A.z),
                    (A[t] = 0),
                    (A[e] = 0),
                    (A[n] = f > 0 ? 1 : -1),
                    c.push(A.x, A.y, A.z),
                    u.push(a / m),
                    u.push(1 - o / g),
                    (E += 1);
                }
              }
              for (let t = 0; t < g; t++)
                for (let e = 0; e < m; e++) {
                  const n = h + e + M * t,
                    i = h + e + M * (t + 1),
                    r = h + (e + 1) + M * (t + 1),
                    o = h + (e + 1) + M * t;
                  a.push(n, i, o), a.push(i, r, o), (T += 6);
                }
              s.addGroup(d, T, v), (d += T), (h += E);
            }
            p("z", "y", "x", -1, -1, n, e, t, o, r, 0),
              p("z", "y", "x", 1, -1, n, e, -t, o, r, 1),
              p("x", "z", "y", 1, 1, t, n, e, i, o, 2),
              p("x", "z", "y", 1, -1, t, n, -e, i, o, 3),
              p("x", "y", "z", 1, -1, t, e, n, i, r, 4),
              p("x", "y", "z", -1, -1, t, e, -n, i, r, 5),
              this.setIndex(a),
              this.setAttribute("position", new Ur(l, 3)),
              this.setAttribute("normal", new Ur(c, 3)),
              this.setAttribute("uv", new Ur(u, 2));
          }
          static fromJSON(t) {
            return new bo(
              t.width,
              t.height,
              t.depth,
              t.widthSegments,
              t.heightSegments,
              t.depthSegments
            );
          }
        }
        function wo(t) {
          const e = {};
          for (const n in t) {
            e[n] = {};
            for (const i in t[n]) {
              const r = t[n][i];
              r &&
              (r.isColor ||
                r.isMatrix3 ||
                r.isMatrix4 ||
                r.isVector2 ||
                r.isVector3 ||
                r.isVector4 ||
                r.isTexture ||
                r.isQuaternion)
                ? (e[n][i] = r.clone())
                : Array.isArray(r)
                ? (e[n][i] = r.slice())
                : (e[n][i] = r);
            }
          }
          return e;
        }
        function Mo(t) {
          const e = {};
          for (let n = 0; n < t.length; n++) {
            const i = wo(t[n]);
            for (const t in i) e[t] = i[t];
          }
          return e;
        }
        const So = { clone: wo, merge: Mo };
        class Eo extends wr {
          constructor(t) {
            super(),
              (this.type = "ShaderMaterial"),
              (this.defines = {}),
              (this.uniforms = {}),
              (this.vertexShader =
                "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),
              (this.fragmentShader =
                "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}"),
              (this.linewidth = 1),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.fog = !1),
              (this.lights = !1),
              (this.clipping = !1),
              (this.extensions = {
                derivatives: !1,
                fragDepth: !1,
                drawBuffers: !1,
                shaderTextureLOD: !1,
              }),
              (this.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv2: [0, 0],
              }),
              (this.index0AttributeName = void 0),
              (this.uniformsNeedUpdate = !1),
              (this.glslVersion = null),
              void 0 !== t &&
                (void 0 !== t.attributes &&
                  console.error(
                    "THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."
                  ),
                this.setValues(t));
          }
          copy(t) {
            return (
              super.copy(t),
              (this.fragmentShader = t.fragmentShader),
              (this.vertexShader = t.vertexShader),
              (this.uniforms = wo(t.uniforms)),
              (this.defines = Object.assign({}, t.defines)),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.lights = t.lights),
              (this.clipping = t.clipping),
              (this.extensions = Object.assign({}, t.extensions)),
              (this.glslVersion = t.glslVersion),
              this
            );
          }
          toJSON(t) {
            const e = super.toJSON(t);
            (e.glslVersion = this.glslVersion), (e.uniforms = {});
            for (const n in this.uniforms) {
              const i = this.uniforms[n].value;
              i && i.isTexture
                ? (e.uniforms[n] = { type: "t", value: i.toJSON(t).uuid })
                : i && i.isColor
                ? (e.uniforms[n] = { type: "c", value: i.getHex() })
                : i && i.isVector2
                ? (e.uniforms[n] = { type: "v2", value: i.toArray() })
                : i && i.isVector3
                ? (e.uniforms[n] = { type: "v3", value: i.toArray() })
                : i && i.isVector4
                ? (e.uniforms[n] = { type: "v4", value: i.toArray() })
                : i && i.isMatrix3
                ? (e.uniforms[n] = { type: "m3", value: i.toArray() })
                : i && i.isMatrix4
                ? (e.uniforms[n] = { type: "m4", value: i.toArray() })
                : (e.uniforms[n] = { value: i });
            }
            Object.keys(this.defines).length > 0 && (e.defines = this.defines),
              (e.vertexShader = this.vertexShader),
              (e.fragmentShader = this.fragmentShader);
            const n = {};
            for (const t in this.extensions)
              !0 === this.extensions[t] && (n[t] = !0);
            return Object.keys(n).length > 0 && (e.extensions = n), e;
          }
        }
        Eo.prototype.isShaderMaterial = !0;
        class To extends cr {
          constructor() {
            super(),
              (this.type = "Camera"),
              (this.matrixWorldInverse = new Fi()),
              (this.projectionMatrix = new Fi()),
              (this.projectionMatrixInverse = new Fi());
          }
          copy(t, e) {
            return (
              super.copy(t, e),
              this.matrixWorldInverse.copy(t.matrixWorldInverse),
              this.projectionMatrix.copy(t.projectionMatrix),
              this.projectionMatrixInverse.copy(t.projectionMatrixInverse),
              this
            );
          }
          getWorldDirection(t) {
            this.updateWorldMatrix(!0, !1);
            const e = this.matrixWorld.elements;
            return t.set(-e[8], -e[9], -e[10]).normalize();
          }
          updateMatrixWorld(t) {
            super.updateMatrixWorld(t),
              this.matrixWorldInverse.copy(this.matrixWorld).invert();
          }
          updateWorldMatrix(t, e) {
            super.updateWorldMatrix(t, e),
              this.matrixWorldInverse.copy(this.matrixWorld).invert();
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        To.prototype.isCamera = !0;
        class Ao extends To {
          constructor(t = 50, e = 1, n = 0.1, i = 2e3) {
            super(),
              (this.type = "PerspectiveCamera"),
              (this.fov = t),
              (this.zoom = 1),
              (this.near = n),
              (this.far = i),
              (this.focus = 10),
              (this.aspect = e),
              (this.view = null),
              (this.filmGauge = 35),
              (this.filmOffset = 0),
              this.updateProjectionMatrix();
          }
          copy(t, e) {
            return (
              super.copy(t, e),
              (this.fov = t.fov),
              (this.zoom = t.zoom),
              (this.near = t.near),
              (this.far = t.far),
              (this.focus = t.focus),
              (this.aspect = t.aspect),
              (this.view = null === t.view ? null : Object.assign({}, t.view)),
              (this.filmGauge = t.filmGauge),
              (this.filmOffset = t.filmOffset),
              this
            );
          }
          setFocalLength(t) {
            const e = (0.5 * this.getFilmHeight()) / t;
            (this.fov = 2 * Hn * Math.atan(e)), this.updateProjectionMatrix();
          }
          getFocalLength() {
            const t = Math.tan(0.5 * zn * this.fov);
            return (0.5 * this.getFilmHeight()) / t;
          }
          getEffectiveFOV() {
            return (
              2 * Hn * Math.atan(Math.tan(0.5 * zn * this.fov) / this.zoom)
            );
          }
          getFilmWidth() {
            return this.filmGauge * Math.min(this.aspect, 1);
          }
          getFilmHeight() {
            return this.filmGauge / Math.max(this.aspect, 1);
          }
          setViewOffset(t, e, n, i, r, o) {
            (this.aspect = t / e),
              null === this.view &&
                (this.view = {
                  enabled: !0,
                  fullWidth: 1,
                  fullHeight: 1,
                  offsetX: 0,
                  offsetY: 0,
                  width: 1,
                  height: 1,
                }),
              (this.view.enabled = !0),
              (this.view.fullWidth = t),
              (this.view.fullHeight = e),
              (this.view.offsetX = n),
              (this.view.offsetY = i),
              (this.view.width = r),
              (this.view.height = o),
              this.updateProjectionMatrix();
          }
          clearViewOffset() {
            null !== this.view && (this.view.enabled = !1),
              this.updateProjectionMatrix();
          }
          updateProjectionMatrix() {
            const t = this.near;
            let e = (t * Math.tan(0.5 * zn * this.fov)) / this.zoom,
              n = 2 * e,
              i = this.aspect * n,
              r = -0.5 * i;
            const o = this.view;
            if (null !== this.view && this.view.enabled) {
              const t = o.fullWidth,
                s = o.fullHeight;
              (r += (o.offsetX * i) / t),
                (e -= (o.offsetY * n) / s),
                (i *= o.width / t),
                (n *= o.height / s);
            }
            const s = this.filmOffset;
            0 !== s && (r += (t * s) / this.getFilmWidth()),
              this.projectionMatrix.makePerspective(
                r,
                r + i,
                e,
                e - n,
                t,
                this.far
              ),
              this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return (
              (e.object.fov = this.fov),
              (e.object.zoom = this.zoom),
              (e.object.near = this.near),
              (e.object.far = this.far),
              (e.object.focus = this.focus),
              (e.object.aspect = this.aspect),
              null !== this.view &&
                (e.object.view = Object.assign({}, this.view)),
              (e.object.filmGauge = this.filmGauge),
              (e.object.filmOffset = this.filmOffset),
              e
            );
          }
        }
        Ao.prototype.isPerspectiveCamera = !0;
        const Co = 90;
        class Lo extends cr {
          constructor(t, e, n) {
            if (
              (super(),
              (this.type = "CubeCamera"),
              !0 !== n.isWebGLCubeRenderTarget)
            )
              return void console.error(
                "THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."
              );
            this.renderTarget = n;
            const i = new Ao(Co, 1, t, e);
            (i.layers = this.layers),
              i.up.set(0, -1, 0),
              i.lookAt(new ai(1, 0, 0)),
              this.add(i);
            const r = new Ao(Co, 1, t, e);
            (r.layers = this.layers),
              r.up.set(0, -1, 0),
              r.lookAt(new ai(-1, 0, 0)),
              this.add(r);
            const o = new Ao(Co, 1, t, e);
            (o.layers = this.layers),
              o.up.set(0, 0, 1),
              o.lookAt(new ai(0, 1, 0)),
              this.add(o);
            const s = new Ao(Co, 1, t, e);
            (s.layers = this.layers),
              s.up.set(0, 0, -1),
              s.lookAt(new ai(0, -1, 0)),
              this.add(s);
            const a = new Ao(Co, 1, t, e);
            (a.layers = this.layers),
              a.up.set(0, -1, 0),
              a.lookAt(new ai(0, 0, 1)),
              this.add(a);
            const l = new Ao(Co, 1, t, e);
            (l.layers = this.layers),
              l.up.set(0, -1, 0),
              l.lookAt(new ai(0, 0, -1)),
              this.add(l);
          }
          update(t, e) {
            null === this.parent && this.updateMatrixWorld();
            const n = this.renderTarget,
              [i, r, o, s, a, l] = this.children,
              c = t.xr.enabled,
              u = t.getRenderTarget();
            t.xr.enabled = !1;
            const h = n.texture.generateMipmaps;
            (n.texture.generateMipmaps = !1),
              t.setRenderTarget(n, 0),
              t.render(e, i),
              t.setRenderTarget(n, 1),
              t.render(e, r),
              t.setRenderTarget(n, 2),
              t.render(e, o),
              t.setRenderTarget(n, 3),
              t.render(e, s),
              t.setRenderTarget(n, 4),
              t.render(e, a),
              (n.texture.generateMipmaps = h),
              t.setRenderTarget(n, 5),
              t.render(e, l),
              t.setRenderTarget(u),
              (t.xr.enabled = c);
          }
        }
        class Ro extends ti {
          constructor(t, e, n, i, r, o, s, a, l, c) {
            super(
              (t = void 0 !== t ? t : []),
              (e = void 0 !== e ? e : ot),
              n,
              i,
              r,
              o,
              (s = void 0 !== s ? s : Nt),
              a,
              l,
              c
            ),
              (this.flipY = !1);
          }
          get images() {
            return this.image;
          }
          set images(t) {
            this.image = t;
          }
        }
        Ro.prototype.isCubeTexture = !0;
        class Po extends ii {
          constructor(t, e, n) {
            Number.isInteger(e) &&
              (console.warn(
                "THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"
              ),
              (e = n)),
              super(t, t, e),
              (e = e || {}),
              (this.texture = new Ro(
                void 0,
                e.mapping,
                e.wrapS,
                e.wrapT,
                e.magFilter,
                e.minFilter,
                e.format,
                e.type,
                e.anisotropy,
                e.encoding
              )),
              (this.texture.isRenderTargetTexture = !0),
              (this.texture.generateMipmaps =
                void 0 !== e.generateMipmaps && e.generateMipmaps),
              (this.texture.minFilter =
                void 0 !== e.minFilter ? e.minFilter : xt),
              (this.texture._needsFlipEnvMap = !1);
          }
          fromEquirectangularTexture(t, e) {
            (this.texture.type = e.type),
              (this.texture.format = Ft),
              (this.texture.encoding = e.encoding),
              (this.texture.generateMipmaps = e.generateMipmaps),
              (this.texture.minFilter = e.minFilter),
              (this.texture.magFilter = e.magFilter);
            const n = { tEquirect: { value: null } },
              i =
                "\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",
              r =
                "\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",
              o = new bo(5, 5, 5),
              s = new Eo({
                name: "CubemapFromEquirect",
                uniforms: wo(n),
                vertexShader: i,
                fragmentShader: r,
                side: m,
                blending: x,
              });
            s.uniforms.tEquirect.value = e;
            const a = new xo(o, s),
              l = e.minFilter;
            return (
              e.minFilter === wt && (e.minFilter = xt),
              new Lo(1, 10, this).update(t, a),
              (e.minFilter = l),
              a.geometry.dispose(),
              a.material.dispose(),
              this
            );
          }
          clear(t, e, n, i) {
            const r = t.getRenderTarget();
            for (let r = 0; r < 6; r++)
              t.setRenderTarget(this, r), t.clear(e, n, i);
            t.setRenderTarget(r);
          }
        }
        Po.prototype.isWebGLCubeRenderTarget = !0;
        const Oo = new ai(),
          ko = new ai(),
          Io = new Kn();
        class Do {
          constructor(t = new ai(1, 0, 0), e = 0) {
            (this.normal = t), (this.constant = e);
          }
          set(t, e) {
            return this.normal.copy(t), (this.constant = e), this;
          }
          setComponents(t, e, n, i) {
            return this.normal.set(t, e, n), (this.constant = i), this;
          }
          setFromNormalAndCoplanarPoint(t, e) {
            return (
              this.normal.copy(t), (this.constant = -e.dot(this.normal)), this
            );
          }
          setFromCoplanarPoints(t, e, n) {
            const i = Oo.subVectors(n, e)
              .cross(ko.subVectors(t, e))
              .normalize();
            return this.setFromNormalAndCoplanarPoint(i, t), this;
          }
          copy(t) {
            return (
              this.normal.copy(t.normal), (this.constant = t.constant), this
            );
          }
          normalize() {
            const t = 1 / this.normal.length();
            return this.normal.multiplyScalar(t), (this.constant *= t), this;
          }
          negate() {
            return (this.constant *= -1), this.normal.negate(), this;
          }
          distanceToPoint(t) {
            return this.normal.dot(t) + this.constant;
          }
          distanceToSphere(t) {
            return this.distanceToPoint(t.center) - t.radius;
          }
          projectPoint(t, e) {
            return e
              .copy(this.normal)
              .multiplyScalar(-this.distanceToPoint(t))
              .add(t);
          }
          intersectLine(t, e) {
            const n = t.delta(Oo),
              i = this.normal.dot(n);
            if (0 === i)
              return 0 === this.distanceToPoint(t.start)
                ? e.copy(t.start)
                : null;
            const r = -(t.start.dot(this.normal) + this.constant) / i;
            return r < 0 || r > 1
              ? null
              : e.copy(n).multiplyScalar(r).add(t.start);
          }
          intersectsLine(t) {
            const e = this.distanceToPoint(t.start),
              n = this.distanceToPoint(t.end);
            return (e < 0 && n > 0) || (n < 0 && e > 0);
          }
          intersectsBox(t) {
            return t.intersectsPlane(this);
          }
          intersectsSphere(t) {
            return t.intersectsPlane(this);
          }
          coplanarPoint(t) {
            return t.copy(this.normal).multiplyScalar(-this.constant);
          }
          applyMatrix4(t, e) {
            const n = e || Io.getNormalMatrix(t),
              i = this.coplanarPoint(Oo).applyMatrix4(t),
              r = this.normal.applyMatrix3(n).normalize();
            return (this.constant = -i.dot(r)), this;
          }
          translate(t) {
            return (this.constant -= t.dot(this.normal)), this;
          }
          equals(t) {
            return t.normal.equals(this.normal) && t.constant === this.constant;
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        Do.prototype.isPlane = !0;
        const Bo = new Li(),
          No = new ai();
        class Fo {
          constructor(
            t = new Do(),
            e = new Do(),
            n = new Do(),
            i = new Do(),
            r = new Do(),
            o = new Do()
          ) {
            this.planes = [t, e, n, i, r, o];
          }
          set(t, e, n, i, r, o) {
            const s = this.planes;
            return (
              s[0].copy(t),
              s[1].copy(e),
              s[2].copy(n),
              s[3].copy(i),
              s[4].copy(r),
              s[5].copy(o),
              this
            );
          }
          copy(t) {
            const e = this.planes;
            for (let n = 0; n < 6; n++) e[n].copy(t.planes[n]);
            return this;
          }
          setFromProjectionMatrix(t) {
            const e = this.planes,
              n = t.elements,
              i = n[0],
              r = n[1],
              o = n[2],
              s = n[3],
              a = n[4],
              l = n[5],
              c = n[6],
              u = n[7],
              h = n[8],
              d = n[9],
              p = n[10],
              f = n[11],
              m = n[12],
              g = n[13],
              v = n[14],
              y = n[15];
            return (
              e[0].setComponents(s - i, u - a, f - h, y - m).normalize(),
              e[1].setComponents(s + i, u + a, f + h, y + m).normalize(),
              e[2].setComponents(s + r, u + l, f + d, y + g).normalize(),
              e[3].setComponents(s - r, u - l, f - d, y - g).normalize(),
              e[4].setComponents(s - o, u - c, f - p, y - v).normalize(),
              e[5].setComponents(s + o, u + c, f + p, y + v).normalize(),
              this
            );
          }
          intersectsObject(t) {
            const e = t.geometry;
            return (
              null === e.boundingSphere && e.computeBoundingSphere(),
              Bo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),
              this.intersectsSphere(Bo)
            );
          }
          intersectsSprite(t) {
            return (
              Bo.center.set(0, 0, 0),
              (Bo.radius = 0.7071067811865476),
              Bo.applyMatrix4(t.matrixWorld),
              this.intersectsSphere(Bo)
            );
          }
          intersectsSphere(t) {
            const e = this.planes,
              n = t.center,
              i = -t.radius;
            for (let t = 0; t < 6; t++)
              if (e[t].distanceToPoint(n) < i) return !1;
            return !0;
          }
          intersectsBox(t) {
            const e = this.planes;
            for (let n = 0; n < 6; n++) {
              const i = e[n];
              if (
                ((No.x = i.normal.x > 0 ? t.max.x : t.min.x),
                (No.y = i.normal.y > 0 ? t.max.y : t.min.y),
                (No.z = i.normal.z > 0 ? t.max.z : t.min.z),
                i.distanceToPoint(No) < 0)
              )
                return !1;
            }
            return !0;
          }
          containsPoint(t) {
            const e = this.planes;
            for (let n = 0; n < 6; n++)
              if (e[n].distanceToPoint(t) < 0) return !1;
            return !0;
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        function zo() {
          let t = null,
            e = !1,
            n = null,
            i = null;
          function r(e, o) {
            n(e, o), (i = t.requestAnimationFrame(r));
          }
          return {
            start: function () {
              !0 !== e &&
                null !== n &&
                ((i = t.requestAnimationFrame(r)), (e = !0));
            },
            stop: function () {
              t.cancelAnimationFrame(i), (e = !1);
            },
            setAnimationLoop: function (t) {
              n = t;
            },
            setContext: function (e) {
              t = e;
            },
          };
        }
        function Ho(t, e) {
          const n = e.isWebGL2,
            i = new WeakMap();
          return {
            get: function (t) {
              return t.isInterleavedBufferAttribute && (t = t.data), i.get(t);
            },
            remove: function (e) {
              e.isInterleavedBufferAttribute && (e = e.data);
              const n = i.get(e);
              n && (t.deleteBuffer(n.buffer), i.delete(e));
            },
            update: function (e, r) {
              if (e.isGLBufferAttribute) {
                const t = i.get(e);
                return void (
                  (!t || t.version < e.version) &&
                  i.set(e, {
                    buffer: e.buffer,
                    type: e.type,
                    bytesPerElement: e.elementSize,
                    version: e.version,
                  })
                );
              }
              e.isInterleavedBufferAttribute && (e = e.data);
              const o = i.get(e);
              void 0 === o
                ? i.set(
                    e,
                    (function (e, i) {
                      const r = e.array,
                        o = e.usage,
                        s = t.createBuffer();
                      t.bindBuffer(i, s),
                        t.bufferData(i, r, o),
                        e.onUploadCallback();
                      let a = 5126;
                      return (
                        r instanceof Float32Array
                          ? (a = 5126)
                          : r instanceof Float64Array
                          ? console.warn(
                              "THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."
                            )
                          : r instanceof Uint16Array
                          ? e.isFloat16BufferAttribute
                            ? n
                              ? (a = 5131)
                              : console.warn(
                                  "THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."
                                )
                            : (a = 5123)
                          : r instanceof Int16Array
                          ? (a = 5122)
                          : r instanceof Uint32Array
                          ? (a = 5125)
                          : r instanceof Int32Array
                          ? (a = 5124)
                          : r instanceof Int8Array
                          ? (a = 5120)
                          : (r instanceof Uint8Array ||
                              r instanceof Uint8ClampedArray) &&
                            (a = 5121),
                        {
                          buffer: s,
                          type: a,
                          bytesPerElement: r.BYTES_PER_ELEMENT,
                          version: e.version,
                        }
                      );
                    })(e, r)
                  )
                : o.version < e.version &&
                  ((function (e, i, r) {
                    const o = i.array,
                      s = i.updateRange;
                    t.bindBuffer(r, e),
                      -1 === s.count
                        ? t.bufferSubData(r, 0, o)
                        : (n
                            ? t.bufferSubData(
                                r,
                                s.offset * o.BYTES_PER_ELEMENT,
                                o,
                                s.offset,
                                s.count
                              )
                            : t.bufferSubData(
                                r,
                                s.offset * o.BYTES_PER_ELEMENT,
                                o.subarray(s.offset, s.offset + s.count)
                              ),
                          (s.count = -1));
                  })(o.buffer, e, r),
                  (o.version = e.version));
            },
          };
        }
        class jo extends to {
          constructor(t = 1, e = 1, n = 1, i = 1) {
            super(),
              (this.type = "PlaneGeometry"),
              (this.parameters = {
                width: t,
                height: e,
                widthSegments: n,
                heightSegments: i,
              });
            const r = t / 2,
              o = e / 2,
              s = Math.floor(n),
              a = Math.floor(i),
              l = s + 1,
              c = a + 1,
              u = t / s,
              h = e / a,
              d = [],
              p = [],
              f = [],
              m = [];
            for (let t = 0; t < c; t++) {
              const e = t * h - o;
              for (let n = 0; n < l; n++) {
                const i = n * u - r;
                p.push(i, -e, 0),
                  f.push(0, 0, 1),
                  m.push(n / s),
                  m.push(1 - t / a);
              }
            }
            for (let t = 0; t < a; t++)
              for (let e = 0; e < s; e++) {
                const n = e + l * t,
                  i = e + l * (t + 1),
                  r = e + 1 + l * (t + 1),
                  o = e + 1 + l * t;
                d.push(n, i, o), d.push(i, r, o);
              }
            this.setIndex(d),
              this.setAttribute("position", new Ur(p, 3)),
              this.setAttribute("normal", new Ur(f, 3)),
              this.setAttribute("uv", new Ur(m, 2));
          }
          static fromJSON(t) {
            return new jo(t.width, t.height, t.widthSegments, t.heightSegments);
          }
        }
        const Uo = {
            alphamap_fragment:
              "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",
            alphamap_pars_fragment:
              "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
            alphatest_fragment:
              "#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",
            aomap_fragment:
              "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
            aomap_pars_fragment:
              "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
            begin_vertex: "vec3 transformed = vec3( position );",
            beginnormal_vertex:
              "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",
            bsdfs:
              "vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( f90 - f0 ) * fresnel + f0;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
            bumpmap_pars_fragment:
              "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
            clipping_planes_fragment:
              "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
            clipping_planes_pars_fragment:
              "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",
            clipping_planes_pars_vertex:
              "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",
            clipping_planes_vertex:
              "#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",
            color_fragment:
              "#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",
            color_pars_fragment:
              "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",
            color_pars_vertex:
              "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
            color_vertex:
              "#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",
            common:
              "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
            cube_uv_reflection_fragment:
              "#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
            defaultnormal_vertex:
              "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
            displacementmap_pars_vertex:
              "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",
            displacementmap_vertex:
              "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",
            emissivemap_fragment:
              "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
            emissivemap_pars_fragment:
              "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",
            encodings_fragment:
              "gl_FragColor = linearToOutputTexel( gl_FragColor );",
            encodings_pars_fragment:
              "\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
            envmap_fragment:
              "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
            envmap_common_pars_fragment:
              "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",
            envmap_pars_fragment:
              "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
            envmap_pars_vertex:
              "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",
            envmap_physical_pars_fragment:
              "#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
            envmap_vertex:
              "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
            fog_vertex: "#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",
            fog_pars_vertex:
              "#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",
            fog_fragment:
              "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",
            fog_pars_fragment:
              "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
            gradientmap_pars_fragment:
              "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",
            lightmap_fragment:
              "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
            lightmap_pars_fragment:
              "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",
            lights_lambert_vertex:
              "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
            lights_pars_begin:
              "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
            lights_toon_fragment:
              "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",
            lights_toon_pars_fragment:
              "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
            lights_phong_fragment:
              "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
            lights_phong_pars_fragment:
              "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
            lights_physical_fragment:
              "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\t#ifdef SPECULAR\n\t\tvec3 specularIntensityFactor = vec3( specularIntensity );\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );\n\t#else\n\t\tvec3 specularIntensityFactor = vec3( 1.0 );\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularColorF90 = vec3( 1.0 );\n\t#endif\n\tmaterial.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularColorF90 = vec3( 1.0 );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
            lights_physical_pars_fragment:
              "struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\tvec3 specularColorF90;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
            lights_fragment_begin:
              "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
            lights_fragment_maps:
              "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
            lights_fragment_end:
              "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",
            logdepthbuf_fragment:
              "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
            logdepthbuf_pars_fragment:
              "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
            logdepthbuf_pars_vertex:
              "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",
            logdepthbuf_vertex:
              "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
            map_fragment:
              "#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",
            map_pars_fragment:
              "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
            map_particle_fragment:
              "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
            map_particle_pars_fragment:
              "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
            metalnessmap_fragment:
              "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
            metalnessmap_pars_fragment:
              "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
            morphnormal_vertex:
              "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",
            morphtarget_pars_vertex:
              "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
            morphtarget_vertex:
              "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
            normal_fragment_begin:
              "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
            normal_fragment_maps:
              "#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
            normalmap_pars_fragment:
              "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
            clearcoat_normal_fragment_begin:
              "#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",
            clearcoat_normal_fragment_maps:
              "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
            clearcoat_pars_fragment:
              "#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
            packing:
              "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
            premultiplied_alpha_fragment:
              "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",
            project_vertex:
              "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",
            dithering_fragment:
              "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",
            dithering_pars_fragment:
              "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
            roughnessmap_fragment:
              "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",
            roughnessmap_pars_fragment:
              "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
            shadowmap_pars_fragment:
              "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
            shadowmap_pars_vertex:
              "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
            shadowmap_vertex:
              "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
            shadowmask_pars_fragment:
              "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
            skinbase_vertex:
              "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
            skinning_pars_vertex:
              "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
            skinning_vertex:
              "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",
            skinnormal_vertex:
              "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
            specularmap_fragment:
              "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",
            specularmap_pars_fragment:
              "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",
            tonemapping_fragment:
              "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",
            tonemapping_pars_fragment:
              "#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
            transmission_fragment:
              "#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",
            transmission_pars_fragment:
              "#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",
            uv_pars_fragment:
              "#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",
            uv_pars_vertex:
              "#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",
            uv_vertex:
              "#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
            uv2_pars_fragment:
              "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",
            uv2_pars_vertex:
              "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
            uv2_vertex:
              "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",
            worldpos_vertex:
              "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
            background_frag:
              "uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
            background_vert:
              "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
            cube_frag:
              "#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
            cube_vert:
              "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
            depth_frag:
              "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
            depth_vert:
              "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
            distanceRGBA_frag:
              "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
            distanceRGBA_vert:
              "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
            equirect_frag:
              "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
            equirect_vert:
              "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
            linedashed_frag:
              "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
            linedashed_vert:
              "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
            meshbasic_frag:
              "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshbasic_vert:
              "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
            meshlambert_frag:
              "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshlambert_vert:
              "#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            meshmatcap_frag:
              "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshmatcap_vert:
              "#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
            meshtoon_frag:
              "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshtoon_vert:
              "#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            meshphong_frag:
              "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshphong_vert:
              "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            meshphysical_frag:
              "#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshphysical_vert:
              "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",
            normal_frag:
              "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
            normal_vert:
              "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
            points_frag:
              "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
            points_vert:
              "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
            shadow_frag:
              "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
            shadow_vert:
              "#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            sprite_frag:
              "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
            sprite_vert:
              "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
          },
          Vo = {
            common: {
              diffuse: { value: new Lr(16777215) },
              opacity: { value: 1 },
              map: { value: null },
              uvTransform: { value: new Kn() },
              uv2Transform: { value: new Kn() },
              alphaMap: { value: null },
            },
            specularmap: { specularMap: { value: null } },
            envmap: {
              envMap: { value: null },
              flipEnvMap: { value: -1 },
              reflectivity: { value: 1 },
              refractionRatio: { value: 0.98 },
              maxMipLevel: { value: 0 },
            },
            aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } },
            lightmap: {
              lightMap: { value: null },
              lightMapIntensity: { value: 1 },
            },
            emissivemap: { emissiveMap: { value: null } },
            bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } },
            normalmap: {
              normalMap: { value: null },
              normalScale: { value: new $n(1, 1) },
            },
            displacementmap: {
              displacementMap: { value: null },
              displacementScale: { value: 1 },
              displacementBias: { value: 0 },
            },
            roughnessmap: { roughnessMap: { value: null } },
            metalnessmap: { metalnessMap: { value: null } },
            gradientmap: { gradientMap: { value: null } },
            fog: {
              fogDensity: { value: 25e-5 },
              fogNear: { value: 1 },
              fogFar: { value: 2e3 },
              fogColor: { value: new Lr(16777215) },
            },
            lights: {
              ambientLightColor: { value: [] },
              lightProbe: { value: [] },
              directionalLights: {
                value: [],
                properties: { direction: {}, color: {} },
              },
              directionalLightShadows: {
                value: [],
                properties: {
                  shadowBias: {},
                  shadowNormalBias: {},
                  shadowRadius: {},
                  shadowMapSize: {},
                },
              },
              directionalShadowMap: { value: [] },
              directionalShadowMatrix: { value: [] },
              spotLights: {
                value: [],
                properties: {
                  color: {},
                  position: {},
                  direction: {},
                  distance: {},
                  coneCos: {},
                  penumbraCos: {},
                  decay: {},
                },
              },
              spotLightShadows: {
                value: [],
                properties: {
                  shadowBias: {},
                  shadowNormalBias: {},
                  shadowRadius: {},
                  shadowMapSize: {},
                },
              },
              spotShadowMap: { value: [] },
              spotShadowMatrix: { value: [] },
              pointLights: {
                value: [],
                properties: {
                  color: {},
                  position: {},
                  decay: {},
                  distance: {},
                },
              },
              pointLightShadows: {
                value: [],
                properties: {
                  shadowBias: {},
                  shadowNormalBias: {},
                  shadowRadius: {},
                  shadowMapSize: {},
                  shadowCameraNear: {},
                  shadowCameraFar: {},
                },
              },
              pointShadowMap: { value: [] },
              pointShadowMatrix: { value: [] },
              hemisphereLights: {
                value: [],
                properties: { direction: {}, skyColor: {}, groundColor: {} },
              },
              rectAreaLights: {
                value: [],
                properties: { color: {}, position: {}, width: {}, height: {} },
              },
              ltc_1: { value: null },
              ltc_2: { value: null },
            },
            points: {
              diffuse: { value: new Lr(16777215) },
              opacity: { value: 1 },
              size: { value: 1 },
              scale: { value: 1 },
              map: { value: null },
              alphaMap: { value: null },
              uvTransform: { value: new Kn() },
            },
            sprite: {
              diffuse: { value: new Lr(16777215) },
              opacity: { value: 1 },
              center: { value: new $n(0.5, 0.5) },
              rotation: { value: 0 },
              map: { value: null },
              alphaMap: { value: null },
              uvTransform: { value: new Kn() },
            },
          },
          Go = {
            basic: {
              uniforms: Mo([
                Vo.common,
                Vo.specularmap,
                Vo.envmap,
                Vo.aomap,
                Vo.lightmap,
                Vo.fog,
              ]),
              vertexShader: Uo.meshbasic_vert,
              fragmentShader: Uo.meshbasic_frag,
            },
            lambert: {
              uniforms: Mo([
                Vo.common,
                Vo.specularmap,
                Vo.envmap,
                Vo.aomap,
                Vo.lightmap,
                Vo.emissivemap,
                Vo.fog,
                Vo.lights,
                { emissive: { value: new Lr(0) } },
              ]),
              vertexShader: Uo.meshlambert_vert,
              fragmentShader: Uo.meshlambert_frag,
            },
            phong: {
              uniforms: Mo([
                Vo.common,
                Vo.specularmap,
                Vo.envmap,
                Vo.aomap,
                Vo.lightmap,
                Vo.emissivemap,
                Vo.bumpmap,
                Vo.normalmap,
                Vo.displacementmap,
                Vo.fog,
                Vo.lights,
                {
                  emissive: { value: new Lr(0) },
                  specular: { value: new Lr(1118481) },
                  shininess: { value: 30 },
                },
              ]),
              vertexShader: Uo.meshphong_vert,
              fragmentShader: Uo.meshphong_frag,
            },
            standard: {
              uniforms: Mo([
                Vo.common,
                Vo.envmap,
                Vo.aomap,
                Vo.lightmap,
                Vo.emissivemap,
                Vo.bumpmap,
                Vo.normalmap,
                Vo.displacementmap,
                Vo.roughnessmap,
                Vo.metalnessmap,
                Vo.fog,
                Vo.lights,
                {
                  emissive: { value: new Lr(0) },
                  roughness: { value: 1 },
                  metalness: { value: 0 },
                  envMapIntensity: { value: 1 },
                },
              ]),
              vertexShader: Uo.meshphysical_vert,
              fragmentShader: Uo.meshphysical_frag,
            },
            toon: {
              uniforms: Mo([
                Vo.common,
                Vo.aomap,
                Vo.lightmap,
                Vo.emissivemap,
                Vo.bumpmap,
                Vo.normalmap,
                Vo.displacementmap,
                Vo.gradientmap,
                Vo.fog,
                Vo.lights,
                { emissive: { value: new Lr(0) } },
              ]),
              vertexShader: Uo.meshtoon_vert,
              fragmentShader: Uo.meshtoon_frag,
            },
            matcap: {
              uniforms: Mo([
                Vo.common,
                Vo.bumpmap,
                Vo.normalmap,
                Vo.displacementmap,
                Vo.fog,
                { matcap: { value: null } },
              ]),
              vertexShader: Uo.meshmatcap_vert,
              fragmentShader: Uo.meshmatcap_frag,
            },
            points: {
              uniforms: Mo([Vo.points, Vo.fog]),
              vertexShader: Uo.points_vert,
              fragmentShader: Uo.points_frag,
            },
            dashed: {
              uniforms: Mo([
                Vo.common,
                Vo.fog,
                {
                  scale: { value: 1 },
                  dashSize: { value: 1 },
                  totalSize: { value: 2 },
                },
              ]),
              vertexShader: Uo.linedashed_vert,
              fragmentShader: Uo.linedashed_frag,
            },
            depth: {
              uniforms: Mo([Vo.common, Vo.displacementmap]),
              vertexShader: Uo.depth_vert,
              fragmentShader: Uo.depth_frag,
            },
            normal: {
              uniforms: Mo([
                Vo.common,
                Vo.bumpmap,
                Vo.normalmap,
                Vo.displacementmap,
                { opacity: { value: 1 } },
              ]),
              vertexShader: Uo.normal_vert,
              fragmentShader: Uo.normal_frag,
            },
            sprite: {
              uniforms: Mo([Vo.sprite, Vo.fog]),
              vertexShader: Uo.sprite_vert,
              fragmentShader: Uo.sprite_frag,
            },
            background: {
              uniforms: {
                uvTransform: { value: new Kn() },
                t2D: { value: null },
              },
              vertexShader: Uo.background_vert,
              fragmentShader: Uo.background_frag,
            },
            cube: {
              uniforms: Mo([Vo.envmap, { opacity: { value: 1 } }]),
              vertexShader: Uo.cube_vert,
              fragmentShader: Uo.cube_frag,
            },
            equirect: {
              uniforms: { tEquirect: { value: null } },
              vertexShader: Uo.equirect_vert,
              fragmentShader: Uo.equirect_frag,
            },
            distanceRGBA: {
              uniforms: Mo([
                Vo.common,
                Vo.displacementmap,
                {
                  referencePosition: { value: new ai() },
                  nearDistance: { value: 1 },
                  farDistance: { value: 1e3 },
                },
              ]),
              vertexShader: Uo.distanceRGBA_vert,
              fragmentShader: Uo.distanceRGBA_frag,
            },
            shadow: {
              uniforms: Mo([
                Vo.lights,
                Vo.fog,
                { color: { value: new Lr(0) }, opacity: { value: 1 } },
              ]),
              vertexShader: Uo.shadow_vert,
              fragmentShader: Uo.shadow_frag,
            },
          };
        function Wo(t, e, n, i, r) {
          const o = new Lr(0);
          let s,
            a,
            l = 0,
            c = null,
            u = 0,
            h = null;
          function d(t, e) {
            n.buffers.color.setClear(t.r, t.g, t.b, e, r);
          }
          return {
            getClearColor: function () {
              return o;
            },
            setClearColor: function (t, e = 1) {
              o.set(t), (l = e), d(o, l);
            },
            getClearAlpha: function () {
              return l;
            },
            setClearAlpha: function (t) {
              (l = t), d(o, l);
            },
            render: function (n, r) {
              let p = !1,
                g = !0 === r.isScene ? r.background : null;
              g && g.isTexture && (g = e.get(g));
              const v = t.xr,
                y = v.getSession && v.getSession();
              y && "additive" === y.environmentBlendMode && (g = null),
                null === g ? d(o, l) : g && g.isColor && (d(g, 1), (p = !0)),
                (t.autoClear || p) &&
                  t.clear(
                    t.autoClearColor,
                    t.autoClearDepth,
                    t.autoClearStencil
                  ),
                g && (g.isCubeTexture || g.mapping === ct)
                  ? (void 0 === a &&
                      ((a = new xo(
                        new bo(1, 1, 1),
                        new Eo({
                          name: "BackgroundCubeMaterial",
                          uniforms: wo(Go.cube.uniforms),
                          vertexShader: Go.cube.vertexShader,
                          fragmentShader: Go.cube.fragmentShader,
                          side: m,
                          depthTest: !1,
                          depthWrite: !1,
                          fog: !1,
                        })
                      )),
                      a.geometry.deleteAttribute("normal"),
                      a.geometry.deleteAttribute("uv"),
                      (a.onBeforeRender = function (t, e, n) {
                        this.matrixWorld.copyPosition(n.matrixWorld);
                      }),
                      Object.defineProperty(a.material, "envMap", {
                        get: function () {
                          return this.uniforms.envMap.value;
                        },
                      }),
                      i.update(a)),
                    (a.material.uniforms.envMap.value = g),
                    (a.material.uniforms.flipEnvMap.value =
                      g.isCubeTexture && !1 === g.isRenderTargetTexture
                        ? -1
                        : 1),
                    (c === g && u === g.version && h === t.toneMapping) ||
                      ((a.material.needsUpdate = !0),
                      (c = g),
                      (u = g.version),
                      (h = t.toneMapping)),
                    n.unshift(a, a.geometry, a.material, 0, 0, null))
                  : g &&
                    g.isTexture &&
                    (void 0 === s &&
                      ((s = new xo(
                        new jo(2, 2),
                        new Eo({
                          name: "BackgroundMaterial",
                          uniforms: wo(Go.background.uniforms),
                          vertexShader: Go.background.vertexShader,
                          fragmentShader: Go.background.fragmentShader,
                          side: f,
                          depthTest: !1,
                          depthWrite: !1,
                          fog: !1,
                        })
                      )),
                      s.geometry.deleteAttribute("normal"),
                      Object.defineProperty(s.material, "map", {
                        get: function () {
                          return this.uniforms.t2D.value;
                        },
                      }),
                      i.update(s)),
                    (s.material.uniforms.t2D.value = g),
                    !0 === g.matrixAutoUpdate && g.updateMatrix(),
                    s.material.uniforms.uvTransform.value.copy(g.matrix),
                    (c === g && u === g.version && h === t.toneMapping) ||
                      ((s.material.needsUpdate = !0),
                      (c = g),
                      (u = g.version),
                      (h = t.toneMapping)),
                    n.unshift(s, s.geometry, s.material, 0, 0, null));
            },
          };
        }
        function qo(t, e, n, i) {
          const r = t.getParameter(34921),
            o = i.isWebGL2 ? null : e.get("OES_vertex_array_object"),
            s = i.isWebGL2 || null !== o,
            a = {},
            l = d(null);
          let c = l;
          function u(e) {
            return i.isWebGL2 ? t.bindVertexArray(e) : o.bindVertexArrayOES(e);
          }
          function h(e) {
            return i.isWebGL2
              ? t.deleteVertexArray(e)
              : o.deleteVertexArrayOES(e);
          }
          function d(t) {
            const e = [],
              n = [],
              i = [];
            for (let t = 0; t < r; t++) (e[t] = 0), (n[t] = 0), (i[t] = 0);
            return {
              geometry: null,
              program: null,
              wireframe: !1,
              newAttributes: e,
              enabledAttributes: n,
              attributeDivisors: i,
              object: t,
              attributes: {},
              index: null,
            };
          }
          function p() {
            const t = c.newAttributes;
            for (let e = 0, n = t.length; e < n; e++) t[e] = 0;
          }
          function f(t) {
            m(t, 0);
          }
          function m(n, r) {
            const o = c.newAttributes,
              s = c.enabledAttributes,
              a = c.attributeDivisors;
            (o[n] = 1),
              0 === s[n] && (t.enableVertexAttribArray(n), (s[n] = 1)),
              a[n] !== r &&
                ((i.isWebGL2 ? t : e.get("ANGLE_instanced_arrays"))[
                  i.isWebGL2
                    ? "vertexAttribDivisor"
                    : "vertexAttribDivisorANGLE"
                ](n, r),
                (a[n] = r));
          }
          function g() {
            const e = c.newAttributes,
              n = c.enabledAttributes;
            for (let i = 0, r = n.length; i < r; i++)
              n[i] !== e[i] && (t.disableVertexAttribArray(i), (n[i] = 0));
          }
          function v(e, n, r, o, s, a) {
            !0 !== i.isWebGL2 || (5124 !== r && 5125 !== r)
              ? t.vertexAttribPointer(e, n, r, o, s, a)
              : t.vertexAttribIPointer(e, n, r, s, a);
          }
          function y() {
            x(), c !== l && ((c = l), u(c.object));
          }
          function x() {
            (l.geometry = null), (l.program = null), (l.wireframe = !1);
          }
          return {
            setup: function (r, l, h, y, x) {
              let _ = !1;
              if (s) {
                const e = (function (e, n, r) {
                  const s = !0 === r.wireframe;
                  let l = a[e.id];
                  void 0 === l && ((l = {}), (a[e.id] = l));
                  let c = l[n.id];
                  void 0 === c && ((c = {}), (l[n.id] = c));
                  let u = c[s];
                  return (
                    void 0 === u &&
                      ((u = d(
                        i.isWebGL2
                          ? t.createVertexArray()
                          : o.createVertexArrayOES()
                      )),
                      (c[s] = u)),
                    u
                  );
                })(y, h, l);
                c !== e && ((c = e), u(c.object)),
                  (_ = (function (t, e) {
                    const n = c.attributes,
                      i = t.attributes;
                    let r = 0;
                    for (const t in i) {
                      const e = n[t],
                        o = i[t];
                      if (void 0 === e) return !0;
                      if (e.attribute !== o) return !0;
                      if (e.data !== o.data) return !0;
                      r++;
                    }
                    return c.attributesNum !== r || c.index !== e;
                  })(y, x)),
                  _ &&
                    (function (t, e) {
                      const n = {},
                        i = t.attributes;
                      let r = 0;
                      for (const t in i) {
                        const e = i[t],
                          o = {};
                        (o.attribute = e),
                          e.data && (o.data = e.data),
                          (n[t] = o),
                          r++;
                      }
                      (c.attributes = n), (c.attributesNum = r), (c.index = e);
                    })(y, x);
              } else {
                const t = !0 === l.wireframe;
                (c.geometry === y.id &&
                  c.program === h.id &&
                  c.wireframe === t) ||
                  ((c.geometry = y.id),
                  (c.program = h.id),
                  (c.wireframe = t),
                  (_ = !0));
              }
              !0 === r.isInstancedMesh && (_ = !0),
                null !== x && n.update(x, 34963),
                _ &&
                  ((function (r, o, s, a) {
                    if (
                      !1 === i.isWebGL2 &&
                      (r.isInstancedMesh || a.isInstancedBufferGeometry) &&
                      null === e.get("ANGLE_instanced_arrays")
                    )
                      return;
                    p();
                    const l = a.attributes,
                      c = s.getAttributes(),
                      u = o.defaultAttributeValues;
                    for (const e in c) {
                      const i = c[e];
                      if (i >= 0) {
                        const o = l[e];
                        if (void 0 !== o) {
                          const e = o.normalized,
                            r = o.itemSize,
                            s = n.get(o);
                          if (void 0 === s) continue;
                          const l = s.buffer,
                            c = s.type,
                            u = s.bytesPerElement;
                          if (o.isInterleavedBufferAttribute) {
                            const n = o.data,
                              s = n.stride,
                              h = o.offset;
                            n && n.isInstancedInterleavedBuffer
                              ? (m(i, n.meshPerAttribute),
                                void 0 === a._maxInstanceCount &&
                                  (a._maxInstanceCount =
                                    n.meshPerAttribute * n.count))
                              : f(i),
                              t.bindBuffer(34962, l),
                              v(i, r, c, e, s * u, h * u);
                          } else
                            o.isInstancedBufferAttribute
                              ? (m(i, o.meshPerAttribute),
                                void 0 === a._maxInstanceCount &&
                                  (a._maxInstanceCount =
                                    o.meshPerAttribute * o.count))
                              : f(i),
                              t.bindBuffer(34962, l),
                              v(i, r, c, e, 0, 0);
                        } else if ("instanceMatrix" === e) {
                          const e = n.get(r.instanceMatrix);
                          if (void 0 === e) continue;
                          const o = e.buffer,
                            s = e.type;
                          m(i + 0, 1),
                            m(i + 1, 1),
                            m(i + 2, 1),
                            m(i + 3, 1),
                            t.bindBuffer(34962, o),
                            t.vertexAttribPointer(i + 0, 4, s, !1, 64, 0),
                            t.vertexAttribPointer(i + 1, 4, s, !1, 64, 16),
                            t.vertexAttribPointer(i + 2, 4, s, !1, 64, 32),
                            t.vertexAttribPointer(i + 3, 4, s, !1, 64, 48);
                        } else if ("instanceColor" === e) {
                          const e = n.get(r.instanceColor);
                          if (void 0 === e) continue;
                          const o = e.buffer,
                            s = e.type;
                          m(i, 1),
                            t.bindBuffer(34962, o),
                            t.vertexAttribPointer(i, 3, s, !1, 12, 0);
                        } else if (void 0 !== u) {
                          const n = u[e];
                          if (void 0 !== n)
                            switch (n.length) {
                              case 2:
                                t.vertexAttrib2fv(i, n);
                                break;
                              case 3:
                                t.vertexAttrib3fv(i, n);
                                break;
                              case 4:
                                t.vertexAttrib4fv(i, n);
                                break;
                              default:
                                t.vertexAttrib1fv(i, n);
                            }
                        }
                      }
                    }
                    g();
                  })(r, l, h, y),
                  null !== x && t.bindBuffer(34963, n.get(x).buffer));
            },
            reset: y,
            resetDefaultState: x,
            dispose: function () {
              y();
              for (const t in a) {
                const e = a[t];
                for (const t in e) {
                  const n = e[t];
                  for (const t in n) h(n[t].object), delete n[t];
                  delete e[t];
                }
                delete a[t];
              }
            },
            releaseStatesOfGeometry: function (t) {
              if (void 0 === a[t.id]) return;
              const e = a[t.id];
              for (const t in e) {
                const n = e[t];
                for (const t in n) h(n[t].object), delete n[t];
                delete e[t];
              }
              delete a[t.id];
            },
            releaseStatesOfProgram: function (t) {
              for (const e in a) {
                const n = a[e];
                if (void 0 === n[t.id]) continue;
                const i = n[t.id];
                for (const t in i) h(i[t].object), delete i[t];
                delete n[t.id];
              }
            },
            initAttributes: p,
            enableAttribute: f,
            disableUnusedAttributes: g,
          };
        }
        function Xo(t, e, n, i) {
          const r = i.isWebGL2;
          let o;
          (this.setMode = function (t) {
            o = t;
          }),
            (this.render = function (e, i) {
              t.drawArrays(o, e, i), n.update(i, o, 1);
            }),
            (this.renderInstances = function (i, s, a) {
              if (0 === a) return;
              let l, c;
              if (r) (l = t), (c = "drawArraysInstanced");
              else if (
                ((l = e.get("ANGLE_instanced_arrays")),
                (c = "drawArraysInstancedANGLE"),
                null === l)
              )
                return void console.error(
                  "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                );
              l[c](o, i, s, a), n.update(s, o, a);
            });
        }
        function Yo(t, e, n) {
          let i;
          function r(e) {
            if ("highp" === e) {
              if (
                t.getShaderPrecisionFormat(35633, 36338).precision > 0 &&
                t.getShaderPrecisionFormat(35632, 36338).precision > 0
              )
                return "highp";
              e = "mediump";
            }
            return "mediump" === e &&
              t.getShaderPrecisionFormat(35633, 36337).precision > 0 &&
              t.getShaderPrecisionFormat(35632, 36337).precision > 0
              ? "mediump"
              : "lowp";
          }
          const o =
            ("undefined" != typeof WebGL2RenderingContext &&
              t instanceof WebGL2RenderingContext) ||
            ("undefined" != typeof WebGL2ComputeRenderingContext &&
              t instanceof WebGL2ComputeRenderingContext);
          let s = void 0 !== n.precision ? n.precision : "highp";
          const a = r(s);
          a !== s &&
            (console.warn(
              "THREE.WebGLRenderer:",
              s,
              "not supported, using",
              a,
              "instead."
            ),
            (s = a));
          const l = o || e.has("WEBGL_draw_buffers"),
            c = !0 === n.logarithmicDepthBuffer,
            u = t.getParameter(34930),
            h = t.getParameter(35660),
            d = t.getParameter(3379),
            p = t.getParameter(34076),
            f = t.getParameter(34921),
            m = t.getParameter(36347),
            g = t.getParameter(36348),
            v = t.getParameter(36349),
            y = h > 0,
            x = o || e.has("OES_texture_float");
          return {
            isWebGL2: o,
            drawBuffers: l,
            getMaxAnisotropy: function () {
              if (void 0 !== i) return i;
              if (!0 === e.has("EXT_texture_filter_anisotropic")) {
                const n = e.get("EXT_texture_filter_anisotropic");
                i = t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
              } else i = 0;
              return i;
            },
            getMaxPrecision: r,
            precision: s,
            logarithmicDepthBuffer: c,
            maxTextures: u,
            maxVertexTextures: h,
            maxTextureSize: d,
            maxCubemapSize: p,
            maxAttributes: f,
            maxVertexUniforms: m,
            maxVaryings: g,
            maxFragmentUniforms: v,
            vertexTextures: y,
            floatFragmentTextures: x,
            floatVertexTextures: y && x,
            maxSamples: o ? t.getParameter(36183) : 0,
          };
        }
        function $o(t) {
          const e = this;
          let n = null,
            i = 0,
            r = !1,
            o = !1;
          const s = new Do(),
            a = new Kn(),
            l = { value: null, needsUpdate: !1 };
          function c() {
            l.value !== n && ((l.value = n), (l.needsUpdate = i > 0)),
              (e.numPlanes = i),
              (e.numIntersection = 0);
          }
          function u(t, n, i, r) {
            const o = null !== t ? t.length : 0;
            let c = null;
            if (0 !== o) {
              if (((c = l.value), !0 !== r || null === c)) {
                const e = i + 4 * o,
                  r = n.matrixWorldInverse;
                a.getNormalMatrix(r),
                  (null === c || c.length < e) && (c = new Float32Array(e));
                for (let e = 0, n = i; e !== o; ++e, n += 4)
                  s.copy(t[e]).applyMatrix4(r, a),
                    s.normal.toArray(c, n),
                    (c[n + 3] = s.constant);
              }
              (l.value = c), (l.needsUpdate = !0);
            }
            return (e.numPlanes = o), (e.numIntersection = 0), c;
          }
          (this.uniform = l),
            (this.numPlanes = 0),
            (this.numIntersection = 0),
            (this.init = function (t, e, o) {
              const s = 0 !== t.length || e || 0 !== i || r;
              return (r = e), (n = u(t, o, 0)), (i = t.length), s;
            }),
            (this.beginShadows = function () {
              (o = !0), u(null);
            }),
            (this.endShadows = function () {
              (o = !1), c();
            }),
            (this.setState = function (e, s, a) {
              const h = e.clippingPlanes,
                d = e.clipIntersection,
                p = e.clipShadows,
                f = t.get(e);
              if (!r || null === h || 0 === h.length || (o && !p))
                o ? u(null) : c();
              else {
                const t = o ? 0 : i,
                  e = 4 * t;
                let r = f.clippingState || null;
                (l.value = r), (r = u(h, s, e, a));
                for (let t = 0; t !== e; ++t) r[t] = n[t];
                (f.clippingState = r),
                  (this.numIntersection = d ? this.numPlanes : 0),
                  (this.numPlanes += t);
              }
            });
        }
        function Ko(t) {
          let e = new WeakMap();
          function n(t, e) {
            return (
              e === at ? (t.mapping = ot) : e === lt && (t.mapping = st), t
            );
          }
          function i(t) {
            const n = t.target;
            n.removeEventListener("dispose", i);
            const r = e.get(n);
            void 0 !== r && (e.delete(n), r.dispose());
          }
          return {
            get: function (r) {
              if (r && r.isTexture && !1 === r.isRenderTargetTexture) {
                const o = r.mapping;
                if (o === at || o === lt) {
                  if (e.has(r)) return n(e.get(r).texture, r.mapping);
                  {
                    const o = r.image;
                    if (o && o.height > 0) {
                      const s = t.getRenderTarget(),
                        a = new Po(o.height / 2);
                      return (
                        a.fromEquirectangularTexture(t, r),
                        e.set(r, a),
                        t.setRenderTarget(s),
                        r.addEventListener("dispose", i),
                        n(a.texture, r.mapping)
                      );
                    }
                    return null;
                  }
                }
              }
              return r;
            },
            dispose: function () {
              e = new WeakMap();
            },
          };
        }
        Go.physical = {
          uniforms: Mo([
            Go.standard.uniforms,
            {
              clearcoat: { value: 0 },
              clearcoatMap: { value: null },
              clearcoatRoughness: { value: 0 },
              clearcoatRoughnessMap: { value: null },
              clearcoatNormalScale: { value: new $n(1, 1) },
              clearcoatNormalMap: { value: null },
              sheen: { value: new Lr(0) },
              transmission: { value: 0 },
              transmissionMap: { value: null },
              transmissionSamplerSize: { value: new $n() },
              transmissionSamplerMap: { value: null },
              thickness: { value: 0 },
              thicknessMap: { value: null },
              attenuationDistance: { value: 0 },
              attenuationTint: { value: new Lr(0) },
              specularIntensity: { value: 0 },
              specularIntensityMap: { value: null },
              specularTint: { value: new Lr(1, 1, 1) },
              specularTintMap: { value: null },
            },
          ]),
          vertexShader: Uo.meshphysical_vert,
          fragmentShader: Uo.meshphysical_frag,
        };
        class Jo extends To {
          constructor(t = -1, e = 1, n = 1, i = -1, r = 0.1, o = 2e3) {
            super(),
              (this.type = "OrthographicCamera"),
              (this.zoom = 1),
              (this.view = null),
              (this.left = t),
              (this.right = e),
              (this.top = n),
              (this.bottom = i),
              (this.near = r),
              (this.far = o),
              this.updateProjectionMatrix();
          }
          copy(t, e) {
            return (
              super.copy(t, e),
              (this.left = t.left),
              (this.right = t.right),
              (this.top = t.top),
              (this.bottom = t.bottom),
              (this.near = t.near),
              (this.far = t.far),
              (this.zoom = t.zoom),
              (this.view = null === t.view ? null : Object.assign({}, t.view)),
              this
            );
          }
          setViewOffset(t, e, n, i, r, o) {
            null === this.view &&
              (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1,
              }),
              (this.view.enabled = !0),
              (this.view.fullWidth = t),
              (this.view.fullHeight = e),
              (this.view.offsetX = n),
              (this.view.offsetY = i),
              (this.view.width = r),
              (this.view.height = o),
              this.updateProjectionMatrix();
          }
          clearViewOffset() {
            null !== this.view && (this.view.enabled = !1),
              this.updateProjectionMatrix();
          }
          updateProjectionMatrix() {
            const t = (this.right - this.left) / (2 * this.zoom),
              e = (this.top - this.bottom) / (2 * this.zoom),
              n = (this.right + this.left) / 2,
              i = (this.top + this.bottom) / 2;
            let r = n - t,
              o = n + t,
              s = i + e,
              a = i - e;
            if (null !== this.view && this.view.enabled) {
              const t =
                  (this.right - this.left) / this.view.fullWidth / this.zoom,
                e = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
              (r += t * this.view.offsetX),
                (o = r + t * this.view.width),
                (s -= e * this.view.offsetY),
                (a = s - e * this.view.height);
            }
            this.projectionMatrix.makeOrthographic(
              r,
              o,
              s,
              a,
              this.near,
              this.far
            ),
              this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return (
              (e.object.zoom = this.zoom),
              (e.object.left = this.left),
              (e.object.right = this.right),
              (e.object.top = this.top),
              (e.object.bottom = this.bottom),
              (e.object.near = this.near),
              (e.object.far = this.far),
              null !== this.view &&
                (e.object.view = Object.assign({}, this.view)),
              e
            );
          }
        }
        Jo.prototype.isOrthographicCamera = !0;
        class Zo extends Eo {
          constructor(t) {
            super(t), (this.type = "RawShaderMaterial");
          }
        }
        Zo.prototype.isRawShaderMaterial = !0;
        const Qo = Math.pow(2, 8),
          ts = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
          es = 5 + ts.length,
          ns = {
            [Ke]: 0,
            [Je]: 1,
            [Qe]: 2,
            [en]: 3,
            [nn]: 4,
            [rn]: 5,
            [Ze]: 6,
          },
          is = new Rr({ side: m, depthWrite: !1, depthTest: !1 }),
          rs = new xo(new bo(), is),
          os = new Jo(),
          { _lodPlanes: ss, _sizeLods: as, _sigmas: ls } = vs(),
          cs = new Lr();
        let us = null;
        const hs = (1 + Math.sqrt(5)) / 2,
          ds = 1 / hs,
          ps = [
            new ai(1, 1, 1),
            new ai(-1, 1, 1),
            new ai(1, 1, -1),
            new ai(-1, 1, -1),
            new ai(0, hs, ds),
            new ai(0, hs, -ds),
            new ai(ds, 0, hs),
            new ai(-ds, 0, hs),
            new ai(hs, ds, 0),
            new ai(-hs, ds, 0),
          ];
        function fs(t) {
          const e = Math.max(t.r, t.g, t.b),
            n = Math.min(Math.max(Math.ceil(Math.log2(e)), -128), 127);
          return t.multiplyScalar(Math.pow(2, -n)), (n + 128) / 255;
        }
        class ms {
          constructor(t) {
            (this._renderer = t),
              (this._pingPongRenderTarget = null),
              (this._blurMaterial = (function (t) {
                const e = new Float32Array(20),
                  n = new ai(0, 1, 0);
                return new Zo({
                  name: "SphericalGaussianBlur",
                  defines: { n: 20 },
                  uniforms: {
                    envMap: { value: null },
                    samples: { value: 1 },
                    weights: { value: e },
                    latitudinal: { value: !1 },
                    dTheta: { value: 0 },
                    mipInt: { value: 0 },
                    poleAxis: { value: n },
                    inputEncoding: { value: ns[Ke] },
                    outputEncoding: { value: ns[Ke] },
                  },
                  vertexShader:
                    "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                  fragmentShader:
                    "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
                  blending: x,
                  depthTest: !1,
                  depthWrite: !1,
                });
              })()),
              (this._equirectShader = null),
              (this._cubemapShader = null),
              this._compileMaterial(this._blurMaterial);
          }
          fromScene(t, e = 0, n = 0.1, i = 100) {
            us = this._renderer.getRenderTarget();
            const r = this._allocateTargets();
            return (
              this._sceneToCubeUV(t, n, i, r),
              e > 0 && this._blur(r, 0, 0, e),
              this._applyPMREM(r),
              this._cleanup(r),
              r
            );
          }
          fromEquirectangular(t) {
            return this._fromTexture(t);
          }
          fromCubemap(t) {
            return this._fromTexture(t);
          }
          compileCubemapShader() {
            null === this._cubemapShader &&
              ((this._cubemapShader = bs()),
              this._compileMaterial(this._cubemapShader));
          }
          compileEquirectangularShader() {
            null === this._equirectShader &&
              ((this._equirectShader = _s()),
              this._compileMaterial(this._equirectShader));
          }
          dispose() {
            this._blurMaterial.dispose(),
              null !== this._cubemapShader && this._cubemapShader.dispose(),
              null !== this._equirectShader && this._equirectShader.dispose();
            for (let t = 0; t < ss.length; t++) ss[t].dispose();
          }
          _cleanup(t) {
            this._pingPongRenderTarget.dispose(),
              this._renderer.setRenderTarget(us),
              (t.scissorTest = !1),
              xs(t, 0, 0, t.width, t.height);
          }
          _fromTexture(t) {
            us = this._renderer.getRenderTarget();
            const e = this._allocateTargets(t);
            return (
              this._textureToCubeUV(t, e),
              this._applyPMREM(e),
              this._cleanup(e),
              e
            );
          }
          _allocateTargets(t) {
            const e = {
                magFilter: ft,
                minFilter: ft,
                generateMipmaps: !1,
                type: St,
                format: jt,
                encoding: gs(t) ? t.encoding : Qe,
                depthBuffer: !1,
              },
              n = ys(e);
            return (
              (n.depthBuffer = !t), (this._pingPongRenderTarget = ys(e)), n
            );
          }
          _compileMaterial(t) {
            const e = new xo(ss[0], t);
            this._renderer.compile(e, os);
          }
          _sceneToCubeUV(t, e, n, i) {
            const r = new Ao(90, 1, e, n),
              o = [1, -1, 1, 1, 1, 1],
              s = [1, 1, 1, -1, -1, -1],
              a = this._renderer,
              l = a.autoClear,
              c = a.outputEncoding,
              u = a.toneMapping;
            a.getClearColor(cs),
              (a.toneMapping = Z),
              (a.outputEncoding = Ke),
              (a.autoClear = !1);
            let h = !1;
            const d = t.background;
            if (d) {
              if (d.isColor) {
                is.color.copy(d).convertSRGBToLinear(), (t.background = null);
                const e = fs(is.color);
                (is.opacity = e), (h = !0);
              }
            } else {
              is.color.copy(cs).convertSRGBToLinear();
              const t = fs(is.color);
              (is.opacity = t), (h = !0);
            }
            for (let e = 0; e < 6; e++) {
              const n = e % 3;
              0 == n
                ? (r.up.set(0, o[e], 0), r.lookAt(s[e], 0, 0))
                : 1 == n
                ? (r.up.set(0, 0, o[e]), r.lookAt(0, s[e], 0))
                : (r.up.set(0, o[e], 0), r.lookAt(0, 0, s[e])),
                xs(i, n * Qo, e > 2 ? Qo : 0, Qo, Qo),
                a.setRenderTarget(i),
                h && a.render(rs, r),
                a.render(t, r);
            }
            (a.toneMapping = u), (a.outputEncoding = c), (a.autoClear = l);
          }
          _textureToCubeUV(t, e) {
            const n = this._renderer;
            t.isCubeTexture
              ? null == this._cubemapShader && (this._cubemapShader = bs())
              : null == this._equirectShader && (this._equirectShader = _s());
            const i = t.isCubeTexture
                ? this._cubemapShader
                : this._equirectShader,
              r = new xo(ss[0], i),
              o = i.uniforms;
            (o.envMap.value = t),
              t.isCubeTexture ||
                o.texelSize.value.set(1 / t.image.width, 1 / t.image.height),
              (o.inputEncoding.value = ns[t.encoding]),
              (o.outputEncoding.value = ns[e.texture.encoding]),
              xs(e, 0, 0, 3 * Qo, 2 * Qo),
              n.setRenderTarget(e),
              n.render(r, os);
          }
          _applyPMREM(t) {
            const e = this._renderer,
              n = e.autoClear;
            e.autoClear = !1;
            for (let e = 1; e < es; e++) {
              const n = Math.sqrt(ls[e] * ls[e] - ls[e - 1] * ls[e - 1]),
                i = ps[(e - 1) % ps.length];
              this._blur(t, e - 1, e, n, i);
            }
            e.autoClear = n;
          }
          _blur(t, e, n, i, r) {
            const o = this._pingPongRenderTarget;
            this._halfBlur(t, o, e, n, i, "latitudinal", r),
              this._halfBlur(o, t, n, n, i, "longitudinal", r);
          }
          _halfBlur(t, e, n, i, r, o, s) {
            const a = this._renderer,
              l = this._blurMaterial;
            "latitudinal" !== o &&
              "longitudinal" !== o &&
              console.error(
                "blur direction must be either latitudinal or longitudinal!"
              );
            const c = new xo(ss[i], l),
              u = l.uniforms,
              h = as[n] - 1,
              d = isFinite(r) ? Math.PI / (2 * h) : (2 * Math.PI) / 39,
              p = r / d,
              f = isFinite(r) ? 1 + Math.floor(3 * p) : 20;
            f > 20 &&
              console.warn(
                `sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`
              );
            const m = [];
            let g = 0;
            for (let t = 0; t < 20; ++t) {
              const e = t / p,
                n = Math.exp((-e * e) / 2);
              m.push(n), 0 == t ? (g += n) : t < f && (g += 2 * n);
            }
            for (let t = 0; t < m.length; t++) m[t] = m[t] / g;
            (u.envMap.value = t.texture),
              (u.samples.value = f),
              (u.weights.value = m),
              (u.latitudinal.value = "latitudinal" === o),
              s && (u.poleAxis.value = s),
              (u.dTheta.value = d),
              (u.mipInt.value = 8 - n),
              (u.inputEncoding.value = ns[t.texture.encoding]),
              (u.outputEncoding.value = ns[t.texture.encoding]);
            const v = as[i];
            xs(
              e,
              3 * Math.max(0, Qo - 2 * v),
              (0 === i ? 0 : 2 * Qo) + 2 * v * (i > 4 ? i - 8 + 4 : 0),
              3 * v,
              2 * v
            ),
              a.setRenderTarget(e),
              a.render(c, os);
          }
        }
        function gs(t) {
          return (
            void 0 !== t &&
            t.type === St &&
            (t.encoding === Ke || t.encoding === Je || t.encoding === Ze)
          );
        }
        function vs() {
          const t = [],
            e = [],
            n = [];
          let i = 8;
          for (let r = 0; r < es; r++) {
            const o = Math.pow(2, i);
            e.push(o);
            let s = 1 / o;
            r > 4 ? (s = ts[r - 8 + 4 - 1]) : 0 == r && (s = 0), n.push(s);
            const a = 1 / (o - 1),
              l = -a / 2,
              c = 1 + a / 2,
              u = [l, l, c, l, c, c, l, l, c, c, l, c],
              h = 6,
              d = 6,
              p = 3,
              f = 2,
              m = 1,
              g = new Float32Array(p * d * h),
              v = new Float32Array(f * d * h),
              y = new Float32Array(m * d * h);
            for (let t = 0; t < h; t++) {
              const e = ((t % 3) * 2) / 3 - 1,
                n = t > 2 ? 0 : -1,
                i = [
                  e,
                  n,
                  0,
                  e + 2 / 3,
                  n,
                  0,
                  e + 2 / 3,
                  n + 1,
                  0,
                  e,
                  n,
                  0,
                  e + 2 / 3,
                  n + 1,
                  0,
                  e,
                  n + 1,
                  0,
                ];
              g.set(i, p * d * t), v.set(u, f * d * t);
              const r = [t, t, t, t, t, t];
              y.set(r, m * d * t);
            }
            const x = new to();
            x.setAttribute("position", new kr(g, p)),
              x.setAttribute("uv", new kr(v, f)),
              x.setAttribute("faceIndex", new kr(y, m)),
              t.push(x),
              i > 4 && i--;
          }
          return { _lodPlanes: t, _sizeLods: e, _sigmas: n };
        }
        function ys(t) {
          const e = new ii(3 * Qo, 3 * Qo, t);
          return (
            (e.texture.mapping = ct),
            (e.texture.name = "PMREM.cubeUv"),
            (e.scissorTest = !0),
            e
          );
        }
        function xs(t, e, n, i, r) {
          t.viewport.set(e, n, i, r), t.scissor.set(e, n, i, r);
        }
        function _s() {
          const t = new $n(1, 1);
          return new Zo({
            name: "EquirectangularToCubeUV",
            uniforms: {
              envMap: { value: null },
              texelSize: { value: t },
              inputEncoding: { value: ns[Ke] },
              outputEncoding: { value: ns[Ke] },
            },
            vertexShader:
              "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
            fragmentShader:
              "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
            blending: x,
            depthTest: !1,
            depthWrite: !1,
          });
        }
        function bs() {
          return new Zo({
            name: "CubemapToCubeUV",
            uniforms: {
              envMap: { value: null },
              inputEncoding: { value: ns[Ke] },
              outputEncoding: { value: ns[Ke] },
            },
            vertexShader:
              "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
            fragmentShader:
              "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
            blending: x,
            depthTest: !1,
            depthWrite: !1,
          });
        }
        function ws(t) {
          let e = new WeakMap(),
            n = null;
          function i(t) {
            const n = t.target;
            n.removeEventListener("dispose", i);
            const r = e.get(n);
            void 0 !== r && (r.delete(n), r.dispose());
          }
          return {
            get: function (r) {
              if (r && r.isTexture && !1 === r.isRenderTargetTexture) {
                const o = r.mapping,
                  s = o === at || o === lt,
                  a = o === ot || o === st;
                if (s || a) {
                  if (e.has(r)) return e.get(r).texture;
                  {
                    const o = r.image;
                    if (
                      (s && o && o.height > 0) ||
                      (a &&
                        o &&
                        (function (t) {
                          let e = 0;
                          for (let n = 0; n < 6; n++) void 0 !== t[n] && e++;
                          return 6 === e;
                        })(o))
                    ) {
                      const o = t.getRenderTarget();
                      null === n && (n = new ms(t));
                      const a = s ? n.fromEquirectangular(r) : n.fromCubemap(r);
                      return (
                        e.set(r, a),
                        t.setRenderTarget(o),
                        r.addEventListener("dispose", i),
                        a.texture
                      );
                    }
                    return null;
                  }
                }
              }
              return r;
            },
            dispose: function () {
              (e = new WeakMap()), null !== n && (n.dispose(), (n = null));
            },
          };
        }
        function Ms(t) {
          const e = {};
          function n(n) {
            if (void 0 !== e[n]) return e[n];
            let i;
            switch (n) {
              case "WEBGL_depth_texture":
                i =
                  t.getExtension("WEBGL_depth_texture") ||
                  t.getExtension("MOZ_WEBGL_depth_texture") ||
                  t.getExtension("WEBKIT_WEBGL_depth_texture");
                break;
              case "EXT_texture_filter_anisotropic":
                i =
                  t.getExtension("EXT_texture_filter_anisotropic") ||
                  t.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                  t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                break;
              case "WEBGL_compressed_texture_s3tc":
                i =
                  t.getExtension("WEBGL_compressed_texture_s3tc") ||
                  t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                  t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                break;
              case "WEBGL_compressed_texture_pvrtc":
                i =
                  t.getExtension("WEBGL_compressed_texture_pvrtc") ||
                  t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                break;
              default:
                i = t.getExtension(n);
            }
            return (e[n] = i), i;
          }
          return {
            has: function (t) {
              return null !== n(t);
            },
            init: function (t) {
              t.isWebGL2
                ? n("EXT_color_buffer_float")
                : (n("WEBGL_depth_texture"),
                  n("OES_texture_float"),
                  n("OES_texture_half_float"),
                  n("OES_texture_half_float_linear"),
                  n("OES_standard_derivatives"),
                  n("OES_element_index_uint"),
                  n("OES_vertex_array_object"),
                  n("ANGLE_instanced_arrays")),
                n("OES_texture_float_linear"),
                n("EXT_color_buffer_half_float");
            },
            get: function (t) {
              const e = n(t);
              return (
                null === e &&
                  console.warn(
                    "THREE.WebGLRenderer: " + t + " extension not supported."
                  ),
                e
              );
            },
          };
        }
        function Ss(t, e, n, i) {
          const r = {},
            o = new WeakMap();
          function s(t) {
            const a = t.target;
            null !== a.index && e.remove(a.index);
            for (const t in a.attributes) e.remove(a.attributes[t]);
            a.removeEventListener("dispose", s), delete r[a.id];
            const l = o.get(a);
            l && (e.remove(l), o.delete(a)),
              i.releaseStatesOfGeometry(a),
              !0 === a.isInstancedBufferGeometry && delete a._maxInstanceCount,
              n.memory.geometries--;
          }
          function a(t) {
            const n = [],
              i = t.index,
              r = t.attributes.position;
            let s = 0;
            if (null !== i) {
              const t = i.array;
              s = i.version;
              for (let e = 0, i = t.length; e < i; e += 3) {
                const i = t[e + 0],
                  r = t[e + 1],
                  o = t[e + 2];
                n.push(i, r, r, o, o, i);
              }
            } else {
              const t = r.array;
              s = r.version;
              for (let e = 0, i = t.length / 3 - 1; e < i; e += 3) {
                const t = e + 0,
                  i = e + 1,
                  r = e + 2;
                n.push(t, i, i, r, r, t);
              }
            }
            const a = new (Gr(n) > 65535 ? Hr : Fr)(n, 1);
            a.version = s;
            const l = o.get(t);
            l && e.remove(l), o.set(t, a);
          }
          return {
            get: function (t, e) {
              return (
                !0 === r[e.id] ||
                  (e.addEventListener("dispose", s),
                  (r[e.id] = !0),
                  n.memory.geometries++),
                e
              );
            },
            update: function (t) {
              const n = t.attributes;
              for (const t in n) e.update(n[t], 34962);
              const i = t.morphAttributes;
              for (const t in i) {
                const n = i[t];
                for (let t = 0, i = n.length; t < i; t++) e.update(n[t], 34962);
              }
            },
            getWireframeAttribute: function (t) {
              const e = o.get(t);
              if (e) {
                const n = t.index;
                null !== n && e.version < n.version && a(t);
              } else a(t);
              return o.get(t);
            },
          };
        }
        function Es(t, e, n, i) {
          const r = i.isWebGL2;
          let o, s, a;
          (this.setMode = function (t) {
            o = t;
          }),
            (this.setIndex = function (t) {
              (s = t.type), (a = t.bytesPerElement);
            }),
            (this.render = function (e, i) {
              t.drawElements(o, i, s, e * a), n.update(i, o, 1);
            }),
            (this.renderInstances = function (i, l, c) {
              if (0 === c) return;
              let u, h;
              if (r) (u = t), (h = "drawElementsInstanced");
              else if (
                ((u = e.get("ANGLE_instanced_arrays")),
                (h = "drawElementsInstancedANGLE"),
                null === u)
              )
                return void console.error(
                  "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                );
              u[h](o, l, s, i * a, c), n.update(l, o, c);
            });
        }
        function Ts(t) {
          const e = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
          return {
            memory: { geometries: 0, textures: 0 },
            render: e,
            programs: null,
            autoReset: !0,
            reset: function () {
              e.frame++,
                (e.calls = 0),
                (e.triangles = 0),
                (e.points = 0),
                (e.lines = 0);
            },
            update: function (t, n, i) {
              switch ((e.calls++, n)) {
                case 4:
                  e.triangles += i * (t / 3);
                  break;
                case 1:
                  e.lines += i * (t / 2);
                  break;
                case 3:
                  e.lines += i * (t - 1);
                  break;
                case 2:
                  e.lines += i * t;
                  break;
                case 0:
                  e.points += i * t;
                  break;
                default:
                  console.error("THREE.WebGLInfo: Unknown draw mode:", n);
              }
            },
          };
        }
        function As(t, e) {
          return t[0] - e[0];
        }
        function Cs(t, e) {
          return Math.abs(e[1]) - Math.abs(t[1]);
        }
        function Ls(t) {
          const e = {},
            n = new Float32Array(8),
            i = [];
          for (let t = 0; t < 8; t++) i[t] = [t, 0];
          return {
            update: function (r, o, s, a) {
              const l = r.morphTargetInfluences,
                c = void 0 === l ? 0 : l.length;
              let u = e[o.id];
              if (void 0 === u || u.length !== c) {
                u = [];
                for (let t = 0; t < c; t++) u[t] = [t, 0];
                e[o.id] = u;
              }
              for (let t = 0; t < c; t++) {
                const e = u[t];
                (e[0] = t), (e[1] = l[t]);
              }
              u.sort(Cs);
              for (let t = 0; t < 8; t++)
                t < c && u[t][1]
                  ? ((i[t][0] = u[t][0]), (i[t][1] = u[t][1]))
                  : ((i[t][0] = Number.MAX_SAFE_INTEGER), (i[t][1] = 0));
              i.sort(As);
              const h = o.morphAttributes.position,
                d = o.morphAttributes.normal;
              let p = 0;
              for (let t = 0; t < 8; t++) {
                const e = i[t],
                  r = e[0],
                  s = e[1];
                r !== Number.MAX_SAFE_INTEGER && s
                  ? (h &&
                      o.getAttribute("morphTarget" + t) !== h[r] &&
                      o.setAttribute("morphTarget" + t, h[r]),
                    d &&
                      o.getAttribute("morphNormal" + t) !== d[r] &&
                      o.setAttribute("morphNormal" + t, d[r]),
                    (n[t] = s),
                    (p += s))
                  : (h &&
                      !0 === o.hasAttribute("morphTarget" + t) &&
                      o.deleteAttribute("morphTarget" + t),
                    d &&
                      !0 === o.hasAttribute("morphNormal" + t) &&
                      o.deleteAttribute("morphNormal" + t),
                    (n[t] = 0));
              }
              const f = o.morphTargetsRelative ? 1 : 1 - p;
              a.getUniforms().setValue(t, "morphTargetBaseInfluence", f),
                a.getUniforms().setValue(t, "morphTargetInfluences", n);
            },
          };
        }
        function Rs(t, e, n, i) {
          let r = new WeakMap();
          function o(t) {
            const e = t.target;
            e.removeEventListener("dispose", o),
              n.remove(e.instanceMatrix),
              null !== e.instanceColor && n.remove(e.instanceColor);
          }
          return {
            update: function (t) {
              const s = i.render.frame,
                a = t.geometry,
                l = e.get(t, a);
              return (
                r.get(l) !== s && (e.update(l), r.set(l, s)),
                t.isInstancedMesh &&
                  (!1 === t.hasEventListener("dispose", o) &&
                    t.addEventListener("dispose", o),
                  n.update(t.instanceMatrix, 34962),
                  null !== t.instanceColor && n.update(t.instanceColor, 34962)),
                l
              );
            },
            dispose: function () {
              r = new WeakMap();
            },
          };
        }
        class Ps extends ti {
          constructor(t = null, e = 1, n = 1, i = 1) {
            super(null),
              (this.image = { data: t, width: e, height: n, depth: i }),
              (this.magFilter = ft),
              (this.minFilter = ft),
              (this.wrapR = dt),
              (this.generateMipmaps = !1),
              (this.flipY = !1),
              (this.unpackAlignment = 1),
              (this.needsUpdate = !0);
          }
        }
        Ps.prototype.isDataTexture2DArray = !0;
        class Os extends ti {
          constructor(t = null, e = 1, n = 1, i = 1) {
            super(null),
              (this.image = { data: t, width: e, height: n, depth: i }),
              (this.magFilter = ft),
              (this.minFilter = ft),
              (this.wrapR = dt),
              (this.generateMipmaps = !1),
              (this.flipY = !1),
              (this.unpackAlignment = 1),
              (this.needsUpdate = !0);
          }
        }
        Os.prototype.isDataTexture3D = !0;
        const ks = new ti(),
          Is = new Ps(),
          Ds = new Os(),
          Bs = new Ro(),
          Ns = [],
          Fs = [],
          zs = new Float32Array(16),
          Hs = new Float32Array(9),
          js = new Float32Array(4);
        function Us(t, e, n) {
          const i = t[0];
          if (i <= 0 || i > 0) return t;
          const r = e * n;
          let o = Ns[r];
          if (
            (void 0 === o && ((o = new Float32Array(r)), (Ns[r] = o)), 0 !== e)
          ) {
            i.toArray(o, 0);
            for (let i = 1, r = 0; i !== e; ++i) (r += n), t[i].toArray(o, r);
          }
          return o;
        }
        function Vs(t, e) {
          if (t.length !== e.length) return !1;
          for (let n = 0, i = t.length; n < i; n++)
            if (t[n] !== e[n]) return !1;
          return !0;
        }
        function Gs(t, e) {
          for (let n = 0, i = e.length; n < i; n++) t[n] = e[n];
        }
        function Ws(t, e) {
          let n = Fs[e];
          void 0 === n && ((n = new Int32Array(e)), (Fs[e] = n));
          for (let i = 0; i !== e; ++i) n[i] = t.allocateTextureUnit();
          return n;
        }
        function qs(t, e) {
          const n = this.cache;
          n[0] !== e && (t.uniform1f(this.addr, e), (n[0] = e));
        }
        function Xs(t, e) {
          const n = this.cache;
          if (void 0 !== e.x)
            (n[0] === e.x && n[1] === e.y) ||
              (t.uniform2f(this.addr, e.x, e.y), (n[0] = e.x), (n[1] = e.y));
          else {
            if (Vs(n, e)) return;
            t.uniform2fv(this.addr, e), Gs(n, e);
          }
        }
        function Ys(t, e) {
          const n = this.cache;
          if (void 0 !== e.x)
            (n[0] === e.x && n[1] === e.y && n[2] === e.z) ||
              (t.uniform3f(this.addr, e.x, e.y, e.z),
              (n[0] = e.x),
              (n[1] = e.y),
              (n[2] = e.z));
          else if (void 0 !== e.r)
            (n[0] === e.r && n[1] === e.g && n[2] === e.b) ||
              (t.uniform3f(this.addr, e.r, e.g, e.b),
              (n[0] = e.r),
              (n[1] = e.g),
              (n[2] = e.b));
          else {
            if (Vs(n, e)) return;
            t.uniform3fv(this.addr, e), Gs(n, e);
          }
        }
        function $s(t, e) {
          const n = this.cache;
          if (void 0 !== e.x)
            (n[0] === e.x && n[1] === e.y && n[2] === e.z && n[3] === e.w) ||
              (t.uniform4f(this.addr, e.x, e.y, e.z, e.w),
              (n[0] = e.x),
              (n[1] = e.y),
              (n[2] = e.z),
              (n[3] = e.w));
          else {
            if (Vs(n, e)) return;
            t.uniform4fv(this.addr, e), Gs(n, e);
          }
        }
        function Ks(t, e) {
          const n = this.cache,
            i = e.elements;
          if (void 0 === i) {
            if (Vs(n, e)) return;
            t.uniformMatrix2fv(this.addr, !1, e), Gs(n, e);
          } else {
            if (Vs(n, i)) return;
            js.set(i), t.uniformMatrix2fv(this.addr, !1, js), Gs(n, i);
          }
        }
        function Js(t, e) {
          const n = this.cache,
            i = e.elements;
          if (void 0 === i) {
            if (Vs(n, e)) return;
            t.uniformMatrix3fv(this.addr, !1, e), Gs(n, e);
          } else {
            if (Vs(n, i)) return;
            Hs.set(i), t.uniformMatrix3fv(this.addr, !1, Hs), Gs(n, i);
          }
        }
        function Zs(t, e) {
          const n = this.cache,
            i = e.elements;
          if (void 0 === i) {
            if (Vs(n, e)) return;
            t.uniformMatrix4fv(this.addr, !1, e), Gs(n, e);
          } else {
            if (Vs(n, i)) return;
            zs.set(i), t.uniformMatrix4fv(this.addr, !1, zs), Gs(n, i);
          }
        }
        function Qs(t, e) {
          const n = this.cache;
          n[0] !== e && (t.uniform1i(this.addr, e), (n[0] = e));
        }
        function ta(t, e) {
          const n = this.cache;
          Vs(n, e) || (t.uniform2iv(this.addr, e), Gs(n, e));
        }
        function ea(t, e) {
          const n = this.cache;
          Vs(n, e) || (t.uniform3iv(this.addr, e), Gs(n, e));
        }
        function na(t, e) {
          const n = this.cache;
          Vs(n, e) || (t.uniform4iv(this.addr, e), Gs(n, e));
        }
        function ia(t, e) {
          const n = this.cache;
          n[0] !== e && (t.uniform1ui(this.addr, e), (n[0] = e));
        }
        function ra(t, e) {
          const n = this.cache;
          Vs(n, e) || (t.uniform2uiv(this.addr, e), Gs(n, e));
        }
        function oa(t, e) {
          const n = this.cache;
          Vs(n, e) || (t.uniform3uiv(this.addr, e), Gs(n, e));
        }
        function sa(t, e) {
          const n = this.cache;
          Vs(n, e) || (t.uniform4uiv(this.addr, e), Gs(n, e));
        }
        function aa(t, e, n) {
          const i = this.cache,
            r = n.allocateTextureUnit();
          i[0] !== r && (t.uniform1i(this.addr, r), (i[0] = r)),
            n.safeSetTexture2D(e || ks, r);
        }
        function la(t, e, n) {
          const i = this.cache,
            r = n.allocateTextureUnit();
          i[0] !== r && (t.uniform1i(this.addr, r), (i[0] = r)),
            n.setTexture3D(e || Ds, r);
        }
        function ca(t, e, n) {
          const i = this.cache,
            r = n.allocateTextureUnit();
          i[0] !== r && (t.uniform1i(this.addr, r), (i[0] = r)),
            n.safeSetTextureCube(e || Bs, r);
        }
        function ua(t, e, n) {
          const i = this.cache,
            r = n.allocateTextureUnit();
          i[0] !== r && (t.uniform1i(this.addr, r), (i[0] = r)),
            n.setTexture2DArray(e || Is, r);
        }
        function ha(t, e) {
          t.uniform1fv(this.addr, e);
        }
        function da(t, e) {
          const n = Us(e, this.size, 2);
          t.uniform2fv(this.addr, n);
        }
        function pa(t, e) {
          const n = Us(e, this.size, 3);
          t.uniform3fv(this.addr, n);
        }
        function fa(t, e) {
          const n = Us(e, this.size, 4);
          t.uniform4fv(this.addr, n);
        }
        function ma(t, e) {
          const n = Us(e, this.size, 4);
          t.uniformMatrix2fv(this.addr, !1, n);
        }
        function ga(t, e) {
          const n = Us(e, this.size, 9);
          t.uniformMatrix3fv(this.addr, !1, n);
        }
        function va(t, e) {
          const n = Us(e, this.size, 16);
          t.uniformMatrix4fv(this.addr, !1, n);
        }
        function ya(t, e) {
          t.uniform1iv(this.addr, e);
        }
        function xa(t, e) {
          t.uniform2iv(this.addr, e);
        }
        function _a(t, e) {
          t.uniform3iv(this.addr, e);
        }
        function ba(t, e) {
          t.uniform4iv(this.addr, e);
        }
        function wa(t, e) {
          t.uniform1uiv(this.addr, e);
        }
        function Ma(t, e) {
          t.uniform2uiv(this.addr, e);
        }
        function Sa(t, e) {
          t.uniform3uiv(this.addr, e);
        }
        function Ea(t, e) {
          t.uniform4uiv(this.addr, e);
        }
        function Ta(t, e, n) {
          const i = e.length,
            r = Ws(n, i);
          t.uniform1iv(this.addr, r);
          for (let t = 0; t !== i; ++t) n.safeSetTexture2D(e[t] || ks, r[t]);
        }
        function Aa(t, e, n) {
          const i = e.length,
            r = Ws(n, i);
          t.uniform1iv(this.addr, r);
          for (let t = 0; t !== i; ++t) n.safeSetTextureCube(e[t] || Bs, r[t]);
        }
        function Ca(t, e, n) {
          (this.id = t),
            (this.addr = n),
            (this.cache = []),
            (this.setValue = (function (t) {
              switch (t) {
                case 5126:
                  return qs;
                case 35664:
                  return Xs;
                case 35665:
                  return Ys;
                case 35666:
                  return $s;
                case 35674:
                  return Ks;
                case 35675:
                  return Js;
                case 35676:
                  return Zs;
                case 5124:
                case 35670:
                  return Qs;
                case 35667:
                case 35671:
                  return ta;
                case 35668:
                case 35672:
                  return ea;
                case 35669:
                case 35673:
                  return na;
                case 5125:
                  return ia;
                case 36294:
                  return ra;
                case 36295:
                  return oa;
                case 36296:
                  return sa;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return aa;
                case 35679:
                case 36299:
                case 36307:
                  return la;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return ca;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return ua;
              }
            })(e.type));
        }
        function La(t, e, n) {
          (this.id = t),
            (this.addr = n),
            (this.cache = []),
            (this.size = e.size),
            (this.setValue = (function (t) {
              switch (t) {
                case 5126:
                  return ha;
                case 35664:
                  return da;
                case 35665:
                  return pa;
                case 35666:
                  return fa;
                case 35674:
                  return ma;
                case 35675:
                  return ga;
                case 35676:
                  return va;
                case 5124:
                case 35670:
                  return ya;
                case 35667:
                case 35671:
                  return xa;
                case 35668:
                case 35672:
                  return _a;
                case 35669:
                case 35673:
                  return ba;
                case 5125:
                  return wa;
                case 36294:
                  return Ma;
                case 36295:
                  return Sa;
                case 36296:
                  return Ea;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return Ta;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return Aa;
              }
            })(e.type));
        }
        function Ra(t) {
          (this.id = t), (this.seq = []), (this.map = {});
        }
        (La.prototype.updateCache = function (t) {
          const e = this.cache;
          t instanceof Float32Array &&
            e.length !== t.length &&
            (this.cache = new Float32Array(t.length)),
            Gs(e, t);
        }),
          (Ra.prototype.setValue = function (t, e, n) {
            const i = this.seq;
            for (let r = 0, o = i.length; r !== o; ++r) {
              const o = i[r];
              o.setValue(t, e[o.id], n);
            }
          });
        const Pa = /(\w+)(\])?(\[|\.)?/g;
        function Oa(t, e) {
          t.seq.push(e), (t.map[e.id] = e);
        }
        function ka(t, e, n) {
          const i = t.name,
            r = i.length;
          for (Pa.lastIndex = 0; ; ) {
            const o = Pa.exec(i),
              s = Pa.lastIndex;
            let a = o[1];
            const l = "]" === o[2],
              c = o[3];
            if ((l && (a |= 0), void 0 === c || ("[" === c && s + 2 === r))) {
              Oa(n, void 0 === c ? new Ca(a, t, e) : new La(a, t, e));
              break;
            }
            {
              let t = n.map[a];
              void 0 === t && ((t = new Ra(a)), Oa(n, t)), (n = t);
            }
          }
        }
        function Ia(t, e) {
          (this.seq = []), (this.map = {});
          const n = t.getProgramParameter(e, 35718);
          for (let i = 0; i < n; ++i) {
            const n = t.getActiveUniform(e, i);
            ka(n, t.getUniformLocation(e, n.name), this);
          }
        }
        function Da(t, e, n) {
          const i = t.createShader(e);
          return t.shaderSource(i, n), t.compileShader(i), i;
        }
        (Ia.prototype.setValue = function (t, e, n, i) {
          const r = this.map[e];
          void 0 !== r && r.setValue(t, n, i);
        }),
          (Ia.prototype.setOptional = function (t, e, n) {
            const i = e[n];
            void 0 !== i && this.setValue(t, n, i);
          }),
          (Ia.upload = function (t, e, n, i) {
            for (let r = 0, o = e.length; r !== o; ++r) {
              const o = e[r],
                s = n[o.id];
              !1 !== s.needsUpdate && o.setValue(t, s.value, i);
            }
          }),
          (Ia.seqWithValue = function (t, e) {
            const n = [];
            for (let i = 0, r = t.length; i !== r; ++i) {
              const r = t[i];
              r.id in e && n.push(r);
            }
            return n;
          });
        let Ba = 0;
        function Na(t) {
          switch (t) {
            case Ke:
              return ["Linear", "( value )"];
            case Je:
              return ["sRGB", "( value )"];
            case Qe:
              return ["RGBE", "( value )"];
            case en:
              return ["RGBM", "( value, 7.0 )"];
            case nn:
              return ["RGBM", "( value, 16.0 )"];
            case rn:
              return ["RGBD", "( value, 256.0 )"];
            case Ze:
              return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
            case tn:
              return ["LogLuv", "( value )"];
            default:
              return (
                console.warn("THREE.WebGLProgram: Unsupported encoding:", t),
                ["Linear", "( value )"]
              );
          }
        }
        function Fa(t, e, n) {
          const i = t.getShaderParameter(e, 35713),
            r = t.getShaderInfoLog(e).trim();
          return i && "" === r
            ? ""
            : "THREE.WebGLShader: gl.getShaderInfoLog() " +
                n +
                "\n" +
                r +
                (function (t) {
                  const e = t.split("\n");
                  for (let t = 0; t < e.length; t++) e[t] = t + 1 + ": " + e[t];
                  return e.join("\n");
                })(t.getShaderSource(e));
        }
        function za(t, e) {
          const n = Na(e);
          return (
            "vec4 " +
            t +
            "( vec4 value ) { return " +
            n[0] +
            "ToLinear" +
            n[1] +
            "; }"
          );
        }
        function Ha(t, e) {
          const n = Na(e);
          return (
            "vec4 " +
            t +
            "( vec4 value ) { return LinearTo" +
            n[0] +
            n[1] +
            "; }"
          );
        }
        function ja(t, e) {
          let n;
          switch (e) {
            case Q:
              n = "Linear";
              break;
            case tt:
              n = "Reinhard";
              break;
            case et:
              n = "OptimizedCineon";
              break;
            case nt:
              n = "ACESFilmic";
              break;
            case it:
              n = "Custom";
              break;
            default:
              console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e),
                (n = "Linear");
          }
          return (
            "vec3 " +
            t +
            "( vec3 color ) { return " +
            n +
            "ToneMapping( color ); }"
          );
        }
        function Ua(t) {
          return "" !== t;
        }
        function Va(t, e) {
          return t
            .replace(/NUM_DIR_LIGHTS/g, e.numDirLights)
            .replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights)
            .replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights)
            .replace(/NUM_POINT_LIGHTS/g, e.numPointLights)
            .replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights)
            .replace(/NUM_DIR_LIGHT_SHADOWS/g, e.numDirLightShadows)
            .replace(/NUM_SPOT_LIGHT_SHADOWS/g, e.numSpotLightShadows)
            .replace(/NUM_POINT_LIGHT_SHADOWS/g, e.numPointLightShadows);
        }
        function Ga(t, e) {
          return t
            .replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes)
            .replace(
              /UNION_CLIPPING_PLANES/g,
              e.numClippingPlanes - e.numClipIntersection
            );
        }
        const Wa = /^[ \t]*#include +<([\w\d./]+)>/gm;
        function qa(t) {
          return t.replace(Wa, Xa);
        }
        function Xa(t, e) {
          const n = Uo[e];
          if (void 0 === n)
            throw new Error("Can not resolve #include <" + e + ">");
          return qa(n);
        }
        const Ya =
            /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
          $a =
            /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
        function Ka(t) {
          return t.replace($a, Za).replace(Ya, Ja);
        }
        function Ja(t, e, n, i) {
          return (
            console.warn(
              "WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."
            ),
            Za(0, e, n, i)
          );
        }
        function Za(t, e, n, i) {
          let r = "";
          for (let t = parseInt(e); t < parseInt(n); t++)
            r += i
              .replace(/\[\s*i\s*\]/g, "[ " + t + " ]")
              .replace(/UNROLLED_LOOP_INDEX/g, t);
          return r;
        }
        function Qa(t) {
          let e =
            "precision " +
            t.precision +
            " float;\nprecision " +
            t.precision +
            " int;";
          return (
            "highp" === t.precision
              ? (e += "\n#define HIGH_PRECISION")
              : "mediump" === t.precision
              ? (e += "\n#define MEDIUM_PRECISION")
              : "lowp" === t.precision && (e += "\n#define LOW_PRECISION"),
            e
          );
        }
        function tl(t, e, n, i) {
          const r = t.getContext(),
            o = n.defines;
          let s = n.vertexShader,
            a = n.fragmentShader;
          const l = (function (t) {
              let e = "SHADOWMAP_TYPE_BASIC";
              return (
                t.shadowMapType === h
                  ? (e = "SHADOWMAP_TYPE_PCF")
                  : t.shadowMapType === d
                  ? (e = "SHADOWMAP_TYPE_PCF_SOFT")
                  : t.shadowMapType === p && (e = "SHADOWMAP_TYPE_VSM"),
                e
              );
            })(n),
            c = (function (t) {
              let e = "ENVMAP_TYPE_CUBE";
              if (t.envMap)
                switch (t.envMapMode) {
                  case ot:
                  case st:
                    e = "ENVMAP_TYPE_CUBE";
                    break;
                  case ct:
                  case ut:
                    e = "ENVMAP_TYPE_CUBE_UV";
                }
              return e;
            })(n),
            u = (function (t) {
              let e = "ENVMAP_MODE_REFLECTION";
              if (t.envMap)
                switch (t.envMapMode) {
                  case st:
                  case ut:
                    e = "ENVMAP_MODE_REFRACTION";
                }
              return e;
            })(n),
            f = (function (t) {
              let e = "ENVMAP_BLENDING_NONE";
              if (t.envMap)
                switch (t.combine) {
                  case $:
                    e = "ENVMAP_BLENDING_MULTIPLY";
                    break;
                  case K:
                    e = "ENVMAP_BLENDING_MIX";
                    break;
                  case J:
                    e = "ENVMAP_BLENDING_ADD";
                }
              return e;
            })(n),
            m = t.gammaFactor > 0 ? t.gammaFactor : 1,
            g = n.isWebGL2
              ? ""
              : (function (t) {
                  return [
                    t.extensionDerivatives ||
                    t.envMapCubeUV ||
                    t.bumpMap ||
                    t.tangentSpaceNormalMap ||
                    t.clearcoatNormalMap ||
                    t.flatShading ||
                    "physical" === t.shaderID
                      ? "#extension GL_OES_standard_derivatives : enable"
                      : "",
                    (t.extensionFragDepth || t.logarithmicDepthBuffer) &&
                    t.rendererExtensionFragDepth
                      ? "#extension GL_EXT_frag_depth : enable"
                      : "",
                    t.extensionDrawBuffers && t.rendererExtensionDrawBuffers
                      ? "#extension GL_EXT_draw_buffers : require"
                      : "",
                    (t.extensionShaderTextureLOD ||
                      t.envMap ||
                      t.transmission > 0) &&
                    t.rendererExtensionShaderTextureLod
                      ? "#extension GL_EXT_shader_texture_lod : enable"
                      : "",
                  ]
                    .filter(Ua)
                    .join("\n");
                })(n),
            v = (function (t) {
              const e = [];
              for (const n in t) {
                const i = t[n];
                !1 !== i && e.push("#define " + n + " " + i);
              }
              return e.join("\n");
            })(o),
            y = r.createProgram();
          let x,
            _,
            b = n.glslVersion ? "#version " + n.glslVersion + "\n" : "";
          n.isRawShaderMaterial
            ? ((x = [v].filter(Ua).join("\n")),
              x.length > 0 && (x += "\n"),
              (_ = [g, v].filter(Ua).join("\n")),
              _.length > 0 && (_ += "\n"))
            : ((x = [
                Qa(n),
                "#define SHADER_NAME " + n.shaderName,
                v,
                n.instancing ? "#define USE_INSTANCING" : "",
                n.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
                n.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "",
                "#define GAMMA_FACTOR " + m,
                "#define MAX_BONES " + n.maxBones,
                n.useFog && n.fog ? "#define USE_FOG" : "",
                n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
                n.map ? "#define USE_MAP" : "",
                n.envMap ? "#define USE_ENVMAP" : "",
                n.envMap ? "#define " + u : "",
                n.lightMap ? "#define USE_LIGHTMAP" : "",
                n.aoMap ? "#define USE_AOMAP" : "",
                n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
                n.bumpMap ? "#define USE_BUMPMAP" : "",
                n.normalMap ? "#define USE_NORMALMAP" : "",
                n.normalMap && n.objectSpaceNormalMap
                  ? "#define OBJECTSPACE_NORMALMAP"
                  : "",
                n.normalMap && n.tangentSpaceNormalMap
                  ? "#define TANGENTSPACE_NORMALMAP"
                  : "",
                n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
                n.clearcoatRoughnessMap
                  ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                  : "",
                n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
                n.displacementMap && n.supportsVertexTextures
                  ? "#define USE_DISPLACEMENTMAP"
                  : "",
                n.specularMap ? "#define USE_SPECULARMAP" : "",
                n.specularIntensityMap
                  ? "#define USE_SPECULARINTENSITYMAP"
                  : "",
                n.specularTintMap ? "#define USE_SPECULARTINTMAP" : "",
                n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
                n.metalnessMap ? "#define USE_METALNESSMAP" : "",
                n.alphaMap ? "#define USE_ALPHAMAP" : "",
                n.transmission ? "#define USE_TRANSMISSION" : "",
                n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
                n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
                n.vertexTangents ? "#define USE_TANGENT" : "",
                n.vertexColors ? "#define USE_COLOR" : "",
                n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
                n.vertexUvs ? "#define USE_UV" : "",
                n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "",
                n.flatShading ? "#define FLAT_SHADED" : "",
                n.skinning ? "#define USE_SKINNING" : "",
                n.useVertexTexture ? "#define BONE_TEXTURE" : "",
                n.morphTargets ? "#define USE_MORPHTARGETS" : "",
                n.morphNormals && !1 === n.flatShading
                  ? "#define USE_MORPHNORMALS"
                  : "",
                n.doubleSided ? "#define DOUBLE_SIDED" : "",
                n.flipSided ? "#define FLIP_SIDED" : "",
                n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
                n.shadowMapEnabled ? "#define " + l : "",
                n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
                n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
                n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                  ? "#define USE_LOGDEPTHBUF_EXT"
                  : "",
                "uniform mat4 modelMatrix;",
                "uniform mat4 modelViewMatrix;",
                "uniform mat4 projectionMatrix;",
                "uniform mat4 viewMatrix;",
                "uniform mat3 normalMatrix;",
                "uniform vec3 cameraPosition;",
                "uniform bool isOrthographic;",
                "#ifdef USE_INSTANCING",
                "\tattribute mat4 instanceMatrix;",
                "#endif",
                "#ifdef USE_INSTANCING_COLOR",
                "\tattribute vec3 instanceColor;",
                "#endif",
                "attribute vec3 position;",
                "attribute vec3 normal;",
                "attribute vec2 uv;",
                "#ifdef USE_TANGENT",
                "\tattribute vec4 tangent;",
                "#endif",
                "#if defined( USE_COLOR_ALPHA )",
                "\tattribute vec4 color;",
                "#elif defined( USE_COLOR )",
                "\tattribute vec3 color;",
                "#endif",
                "#ifdef USE_MORPHTARGETS",
                "\tattribute vec3 morphTarget0;",
                "\tattribute vec3 morphTarget1;",
                "\tattribute vec3 morphTarget2;",
                "\tattribute vec3 morphTarget3;",
                "\t#ifdef USE_MORPHNORMALS",
                "\t\tattribute vec3 morphNormal0;",
                "\t\tattribute vec3 morphNormal1;",
                "\t\tattribute vec3 morphNormal2;",
                "\t\tattribute vec3 morphNormal3;",
                "\t#else",
                "\t\tattribute vec3 morphTarget4;",
                "\t\tattribute vec3 morphTarget5;",
                "\t\tattribute vec3 morphTarget6;",
                "\t\tattribute vec3 morphTarget7;",
                "\t#endif",
                "#endif",
                "#ifdef USE_SKINNING",
                "\tattribute vec4 skinIndex;",
                "\tattribute vec4 skinWeight;",
                "#endif",
                "\n",
              ]
                .filter(Ua)
                .join("\n")),
              (_ = [
                g,
                Qa(n),
                "#define SHADER_NAME " + n.shaderName,
                v,
                n.alphaTest
                  ? "#define ALPHATEST " +
                    n.alphaTest +
                    (n.alphaTest % 1 ? "" : ".0")
                  : "",
                "#define GAMMA_FACTOR " + m,
                n.useFog && n.fog ? "#define USE_FOG" : "",
                n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
                n.map ? "#define USE_MAP" : "",
                n.matcap ? "#define USE_MATCAP" : "",
                n.envMap ? "#define USE_ENVMAP" : "",
                n.envMap ? "#define " + c : "",
                n.envMap ? "#define " + u : "",
                n.envMap ? "#define " + f : "",
                n.lightMap ? "#define USE_LIGHTMAP" : "",
                n.aoMap ? "#define USE_AOMAP" : "",
                n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
                n.bumpMap ? "#define USE_BUMPMAP" : "",
                n.normalMap ? "#define USE_NORMALMAP" : "",
                n.normalMap && n.objectSpaceNormalMap
                  ? "#define OBJECTSPACE_NORMALMAP"
                  : "",
                n.normalMap && n.tangentSpaceNormalMap
                  ? "#define TANGENTSPACE_NORMALMAP"
                  : "",
                n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
                n.clearcoatRoughnessMap
                  ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                  : "",
                n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
                n.specularMap ? "#define USE_SPECULARMAP" : "",
                n.specularIntensityMap
                  ? "#define USE_SPECULARINTENSITYMAP"
                  : "",
                n.specularTintMap ? "#define USE_SPECULARTINTMAP" : "",
                n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
                n.metalnessMap ? "#define USE_METALNESSMAP" : "",
                n.alphaMap ? "#define USE_ALPHAMAP" : "",
                n.sheen ? "#define USE_SHEEN" : "",
                n.transmission ? "#define USE_TRANSMISSION" : "",
                n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
                n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
                n.vertexTangents ? "#define USE_TANGENT" : "",
                n.vertexColors || n.instancingColor ? "#define USE_COLOR" : "",
                n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
                n.vertexUvs ? "#define USE_UV" : "",
                n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "",
                n.gradientMap ? "#define USE_GRADIENTMAP" : "",
                n.flatShading ? "#define FLAT_SHADED" : "",
                n.doubleSided ? "#define DOUBLE_SIDED" : "",
                n.flipSided ? "#define FLIP_SIDED" : "",
                n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
                n.shadowMapEnabled ? "#define " + l : "",
                n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
                n.physicallyCorrectLights
                  ? "#define PHYSICALLY_CORRECT_LIGHTS"
                  : "",
                n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
                n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                  ? "#define USE_LOGDEPTHBUF_EXT"
                  : "",
                (n.extensionShaderTextureLOD || n.envMap) &&
                n.rendererExtensionShaderTextureLod
                  ? "#define TEXTURE_LOD_EXT"
                  : "",
                "uniform mat4 viewMatrix;",
                "uniform vec3 cameraPosition;",
                "uniform bool isOrthographic;",
                n.toneMapping !== Z ? "#define TONE_MAPPING" : "",
                n.toneMapping !== Z ? Uo.tonemapping_pars_fragment : "",
                n.toneMapping !== Z ? ja("toneMapping", n.toneMapping) : "",
                n.dithering ? "#define DITHERING" : "",
                Uo.encodings_pars_fragment,
                n.map ? za("mapTexelToLinear", n.mapEncoding) : "",
                n.matcap ? za("matcapTexelToLinear", n.matcapEncoding) : "",
                n.envMap ? za("envMapTexelToLinear", n.envMapEncoding) : "",
                n.emissiveMap
                  ? za("emissiveMapTexelToLinear", n.emissiveMapEncoding)
                  : "",
                n.specularTintMap
                  ? za(
                      "specularTintMapTexelToLinear",
                      n.specularTintMapEncoding
                    )
                  : "",
                n.lightMap
                  ? za("lightMapTexelToLinear", n.lightMapEncoding)
                  : "",
                Ha("linearToOutputTexel", n.outputEncoding),
                n.depthPacking ? "#define DEPTH_PACKING " + n.depthPacking : "",
                "\n",
              ]
                .filter(Ua)
                .join("\n"))),
            (s = qa(s)),
            (s = Va(s, n)),
            (s = Ga(s, n)),
            (a = qa(a)),
            (a = Va(a, n)),
            (a = Ga(a, n)),
            (s = Ka(s)),
            (a = Ka(a)),
            n.isWebGL2 &&
              !0 !== n.isRawShaderMaterial &&
              ((b = "#version 300 es\n"),
              (x =
                [
                  "#define attribute in",
                  "#define varying out",
                  "#define texture2D texture",
                ].join("\n") +
                "\n" +
                x),
              (_ =
                [
                  "#define varying in",
                  n.glslVersion === Dn ? "" : "out highp vec4 pc_fragColor;",
                  n.glslVersion === Dn
                    ? ""
                    : "#define gl_FragColor pc_fragColor",
                  "#define gl_FragDepthEXT gl_FragDepth",
                  "#define texture2D texture",
                  "#define textureCube texture",
                  "#define texture2DProj textureProj",
                  "#define texture2DLodEXT textureLod",
                  "#define texture2DProjLodEXT textureProjLod",
                  "#define textureCubeLodEXT textureLod",
                  "#define texture2DGradEXT textureGrad",
                  "#define texture2DProjGradEXT textureProjGrad",
                  "#define textureCubeGradEXT textureGrad",
                ].join("\n") +
                "\n" +
                _));
          const w = b + _ + a,
            M = Da(r, 35633, b + x + s),
            S = Da(r, 35632, w);
          if (
            (r.attachShader(y, M),
            r.attachShader(y, S),
            void 0 !== n.index0AttributeName
              ? r.bindAttribLocation(y, 0, n.index0AttributeName)
              : !0 === n.morphTargets && r.bindAttribLocation(y, 0, "position"),
            r.linkProgram(y),
            t.debug.checkShaderErrors)
          ) {
            const t = r.getProgramInfoLog(y).trim(),
              e = r.getShaderInfoLog(M).trim(),
              n = r.getShaderInfoLog(S).trim();
            let i = !0,
              o = !0;
            if (!1 === r.getProgramParameter(y, 35714)) {
              i = !1;
              const e = Fa(r, M, "vertex"),
                n = Fa(r, S, "fragment");
              console.error(
                "THREE.WebGLProgram: shader error: ",
                r.getError(),
                "35715",
                r.getProgramParameter(y, 35715),
                "gl.getProgramInfoLog",
                t,
                e,
                n
              );
            } else
              "" !== t
                ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", t)
                : ("" !== e && "" !== n) || (o = !1);
            o &&
              (this.diagnostics = {
                runnable: i,
                programLog: t,
                vertexShader: { log: e, prefix: x },
                fragmentShader: { log: n, prefix: _ },
              });
          }
          let E, T;
          return (
            r.deleteShader(M),
            r.deleteShader(S),
            (this.getUniforms = function () {
              return void 0 === E && (E = new Ia(r, y)), E;
            }),
            (this.getAttributes = function () {
              return (
                void 0 === T &&
                  (T = (function (t, e) {
                    const n = {},
                      i = t.getProgramParameter(e, 35721);
                    for (let r = 0; r < i; r++) {
                      const i = t.getActiveAttrib(e, r).name;
                      n[i] = t.getAttribLocation(e, i);
                    }
                    return n;
                  })(r, y)),
                T
              );
            }),
            (this.destroy = function () {
              i.releaseStatesOfProgram(this),
                r.deleteProgram(y),
                (this.program = void 0);
            }),
            (this.name = n.shaderName),
            (this.id = Ba++),
            (this.cacheKey = e),
            (this.usedTimes = 1),
            (this.program = y),
            (this.vertexShader = M),
            (this.fragmentShader = S),
            this
          );
        }
        function el(t, e, n, i, r, o, s) {
          const a = [],
            l = r.isWebGL2,
            c = r.logarithmicDepthBuffer,
            u = r.floatVertexTextures,
            h = r.maxVertexUniforms,
            d = r.vertexTextures;
          let p = r.precision;
          const f = {
              MeshDepthMaterial: "depth",
              MeshDistanceMaterial: "distanceRGBA",
              MeshNormalMaterial: "normal",
              MeshBasicMaterial: "basic",
              MeshLambertMaterial: "lambert",
              MeshPhongMaterial: "phong",
              MeshToonMaterial: "toon",
              MeshStandardMaterial: "physical",
              MeshPhysicalMaterial: "physical",
              MeshMatcapMaterial: "matcap",
              LineBasicMaterial: "basic",
              LineDashedMaterial: "dashed",
              PointsMaterial: "points",
              ShadowMaterial: "shadow",
              SpriteMaterial: "sprite",
            },
            v = [
              "precision",
              "isWebGL2",
              "supportsVertexTextures",
              "outputEncoding",
              "instancing",
              "instancingColor",
              "map",
              "mapEncoding",
              "matcap",
              "matcapEncoding",
              "envMap",
              "envMapMode",
              "envMapEncoding",
              "envMapCubeUV",
              "lightMap",
              "lightMapEncoding",
              "aoMap",
              "emissiveMap",
              "emissiveMapEncoding",
              "bumpMap",
              "normalMap",
              "objectSpaceNormalMap",
              "tangentSpaceNormalMap",
              "clearcoatMap",
              "clearcoatRoughnessMap",
              "clearcoatNormalMap",
              "displacementMap",
              "specularMap",
              "specularIntensityMap",
              "specularTintMap",
              "specularTintMapEncoding",
              "roughnessMap",
              "metalnessMap",
              "gradientMap",
              "alphaMap",
              "combine",
              "vertexColors",
              "vertexAlphas",
              "vertexTangents",
              "vertexUvs",
              "uvsVertexOnly",
              "fog",
              "useFog",
              "fogExp2",
              "flatShading",
              "sizeAttenuation",
              "logarithmicDepthBuffer",
              "skinning",
              "maxBones",
              "useVertexTexture",
              "morphTargets",
              "morphNormals",
              "premultipliedAlpha",
              "numDirLights",
              "numPointLights",
              "numSpotLights",
              "numHemiLights",
              "numRectAreaLights",
              "numDirLightShadows",
              "numPointLightShadows",
              "numSpotLightShadows",
              "shadowMapEnabled",
              "shadowMapType",
              "toneMapping",
              "physicallyCorrectLights",
              "alphaTest",
              "doubleSided",
              "flipSided",
              "numClippingPlanes",
              "numClipIntersection",
              "depthPacking",
              "dithering",
              "sheen",
              "transmission",
              "transmissionMap",
              "thicknessMap",
            ];
          function y(t) {
            let e;
            return (
              t && t.isTexture
                ? (e = t.encoding)
                : t && t.isWebGLRenderTarget
                ? (console.warn(
                    "THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."
                  ),
                  (e = t.texture.encoding))
                : (e = Ke),
              e
            );
          }
          return {
            getParameters: function (o, a, v, x, _) {
              const b = x.fog,
                w = o.isMeshStandardMaterial ? x.environment : null,
                M = (o.isMeshStandardMaterial ? n : e).get(o.envMap || w),
                S = f[o.type],
                E = _.isSkinnedMesh
                  ? (function (t) {
                      const e = t.skeleton.bones;
                      if (u) return 1024;
                      {
                        const t = h,
                          n = Math.floor((t - 20) / 4),
                          i = Math.min(n, e.length);
                        return i < e.length
                          ? (console.warn(
                              "THREE.WebGLRenderer: Skeleton has " +
                                e.length +
                                " bones. This GPU supports " +
                                i +
                                "."
                            ),
                            0)
                          : i;
                      }
                    })(_)
                  : 0;
              let T, A;
              if (
                (null !== o.precision &&
                  ((p = r.getMaxPrecision(o.precision)),
                  p !== o.precision &&
                    console.warn(
                      "THREE.WebGLProgram.getParameters:",
                      o.precision,
                      "not supported, using",
                      p,
                      "instead."
                    )),
                S)
              ) {
                const t = Go[S];
                (T = t.vertexShader), (A = t.fragmentShader);
              } else (T = o.vertexShader), (A = o.fragmentShader);
              const C = t.getRenderTarget();
              return {
                isWebGL2: l,
                shaderID: S,
                shaderName: o.type,
                vertexShader: T,
                fragmentShader: A,
                defines: o.defines,
                isRawShaderMaterial: !0 === o.isRawShaderMaterial,
                glslVersion: o.glslVersion,
                precision: p,
                instancing: !0 === _.isInstancedMesh,
                instancingColor:
                  !0 === _.isInstancedMesh && null !== _.instanceColor,
                supportsVertexTextures: d,
                outputEncoding: null !== C ? y(C.texture) : t.outputEncoding,
                map: !!o.map,
                mapEncoding: y(o.map),
                matcap: !!o.matcap,
                matcapEncoding: y(o.matcap),
                envMap: !!M,
                envMapMode: M && M.mapping,
                envMapEncoding: y(M),
                envMapCubeUV: !!M && (M.mapping === ct || M.mapping === ut),
                lightMap: !!o.lightMap,
                lightMapEncoding: y(o.lightMap),
                aoMap: !!o.aoMap,
                emissiveMap: !!o.emissiveMap,
                emissiveMapEncoding: y(o.emissiveMap),
                bumpMap: !!o.bumpMap,
                normalMap: !!o.normalMap,
                objectSpaceNormalMap: o.normalMapType === ln,
                tangentSpaceNormalMap: o.normalMapType === an,
                clearcoatMap: !!o.clearcoatMap,
                clearcoatRoughnessMap: !!o.clearcoatRoughnessMap,
                clearcoatNormalMap: !!o.clearcoatNormalMap,
                displacementMap: !!o.displacementMap,
                roughnessMap: !!o.roughnessMap,
                metalnessMap: !!o.metalnessMap,
                specularMap: !!o.specularMap,
                specularIntensityMap: !!o.specularIntensityMap,
                specularTintMap: !!o.specularTintMap,
                specularTintMapEncoding: y(o.specularTintMap),
                alphaMap: !!o.alphaMap,
                gradientMap: !!o.gradientMap,
                sheen: !!o.sheen,
                transmission: !!o.transmission,
                transmissionMap: !!o.transmissionMap,
                thicknessMap: !!o.thicknessMap,
                combine: o.combine,
                vertexTangents:
                  o.normalMap && _.geometry && _.geometry.attributes.tangent,
                vertexColors: o.vertexColors,
                vertexAlphas:
                  !0 === o.vertexColors &&
                  _.geometry &&
                  _.geometry.attributes.color &&
                  4 === _.geometry.attributes.color.itemSize,
                vertexUvs: !!(
                  o.map ||
                  o.bumpMap ||
                  o.normalMap ||
                  o.specularMap ||
                  o.alphaMap ||
                  o.emissiveMap ||
                  o.roughnessMap ||
                  o.metalnessMap ||
                  o.clearcoatMap ||
                  o.clearcoatRoughnessMap ||
                  o.clearcoatNormalMap ||
                  o.displacementMap ||
                  o.transmissionMap ||
                  o.thicknessMap ||
                  o.specularIntensityMap ||
                  o.specularTintMap
                ),
                uvsVertexOnly: !(
                  o.map ||
                  o.bumpMap ||
                  o.normalMap ||
                  o.specularMap ||
                  o.alphaMap ||
                  o.emissiveMap ||
                  o.roughnessMap ||
                  o.metalnessMap ||
                  o.clearcoatNormalMap ||
                  o.transmission ||
                  o.transmissionMap ||
                  o.thicknessMap ||
                  o.specularIntensityMap ||
                  o.specularTintMap ||
                  !o.displacementMap
                ),
                fog: !!b,
                useFog: o.fog,
                fogExp2: b && b.isFogExp2,
                flatShading: !!o.flatShading,
                sizeAttenuation: o.sizeAttenuation,
                logarithmicDepthBuffer: c,
                skinning: !0 === _.isSkinnedMesh && E > 0,
                maxBones: E,
                useVertexTexture: u,
                morphTargets:
                  _.geometry && void 0 !== _.geometry.morphAttributes.position,
                morphNormals:
                  _.geometry && void 0 !== _.geometry.morphAttributes.normal,
                numDirLights: a.directional.length,
                numPointLights: a.point.length,
                numSpotLights: a.spot.length,
                numRectAreaLights: a.rectArea.length,
                numHemiLights: a.hemi.length,
                numDirLightShadows: a.directionalShadowMap.length,
                numPointLightShadows: a.pointShadowMap.length,
                numSpotLightShadows: a.spotShadowMap.length,
                numClippingPlanes: s.numPlanes,
                numClipIntersection: s.numIntersection,
                dithering: o.dithering,
                shadowMapEnabled: t.shadowMap.enabled && v.length > 0,
                shadowMapType: t.shadowMap.type,
                toneMapping: o.toneMapped ? t.toneMapping : Z,
                physicallyCorrectLights: t.physicallyCorrectLights,
                premultipliedAlpha: o.premultipliedAlpha,
                alphaTest: o.alphaTest,
                doubleSided: o.side === g,
                flipSided: o.side === m,
                depthPacking: void 0 !== o.depthPacking && o.depthPacking,
                index0AttributeName: o.index0AttributeName,
                extensionDerivatives: o.extensions && o.extensions.derivatives,
                extensionFragDepth: o.extensions && o.extensions.fragDepth,
                extensionDrawBuffers: o.extensions && o.extensions.drawBuffers,
                extensionShaderTextureLOD:
                  o.extensions && o.extensions.shaderTextureLOD,
                rendererExtensionFragDepth: l || i.has("EXT_frag_depth"),
                rendererExtensionDrawBuffers: l || i.has("WEBGL_draw_buffers"),
                rendererExtensionShaderTextureLod:
                  l || i.has("EXT_shader_texture_lod"),
                customProgramCacheKey: o.customProgramCacheKey(),
              };
            },
            getProgramCacheKey: function (e) {
              const n = [];
              if (
                (e.shaderID
                  ? n.push(e.shaderID)
                  : (n.push(e.fragmentShader), n.push(e.vertexShader)),
                void 0 !== e.defines)
              )
                for (const t in e.defines) n.push(t), n.push(e.defines[t]);
              if (!1 === e.isRawShaderMaterial) {
                for (let t = 0; t < v.length; t++) n.push(e[v[t]]);
                n.push(t.outputEncoding), n.push(t.gammaFactor);
              }
              return n.push(e.customProgramCacheKey), n.join();
            },
            getUniforms: function (t) {
              const e = f[t.type];
              let n;
              if (e) {
                const t = Go[e];
                n = So.clone(t.uniforms);
              } else n = t.uniforms;
              return n;
            },
            acquireProgram: function (e, n) {
              let i;
              for (let t = 0, e = a.length; t < e; t++) {
                const e = a[t];
                if (e.cacheKey === n) {
                  (i = e), ++i.usedTimes;
                  break;
                }
              }
              return void 0 === i && ((i = new tl(t, n, e, o)), a.push(i)), i;
            },
            releaseProgram: function (t) {
              if (0 == --t.usedTimes) {
                const e = a.indexOf(t);
                (a[e] = a[a.length - 1]), a.pop(), t.destroy();
              }
            },
            programs: a,
          };
        }
        function nl() {
          let t = new WeakMap();
          return {
            get: function (e) {
              let n = t.get(e);
              return void 0 === n && ((n = {}), t.set(e, n)), n;
            },
            remove: function (e) {
              t.delete(e);
            },
            update: function (e, n, i) {
              t.get(e)[n] = i;
            },
            dispose: function () {
              t = new WeakMap();
            },
          };
        }
        function il(t, e) {
          return t.groupOrder !== e.groupOrder
            ? t.groupOrder - e.groupOrder
            : t.renderOrder !== e.renderOrder
            ? t.renderOrder - e.renderOrder
            : t.program !== e.program
            ? t.program.id - e.program.id
            : t.material.id !== e.material.id
            ? t.material.id - e.material.id
            : t.z !== e.z
            ? t.z - e.z
            : t.id - e.id;
        }
        function rl(t, e) {
          return t.groupOrder !== e.groupOrder
            ? t.groupOrder - e.groupOrder
            : t.renderOrder !== e.renderOrder
            ? t.renderOrder - e.renderOrder
            : t.z !== e.z
            ? e.z - t.z
            : t.id - e.id;
        }
        function ol(t) {
          const e = [];
          let n = 0;
          const i = [],
            r = [],
            o = [],
            s = { id: -1 };
          function a(i, r, o, a, l, c) {
            let u = e[n];
            const h = t.get(o);
            return (
              void 0 === u
                ? ((u = {
                    id: i.id,
                    object: i,
                    geometry: r,
                    material: o,
                    program: h.program || s,
                    groupOrder: a,
                    renderOrder: i.renderOrder,
                    z: l,
                    group: c,
                  }),
                  (e[n] = u))
                : ((u.id = i.id),
                  (u.object = i),
                  (u.geometry = r),
                  (u.material = o),
                  (u.program = h.program || s),
                  (u.groupOrder = a),
                  (u.renderOrder = i.renderOrder),
                  (u.z = l),
                  (u.group = c)),
              n++,
              u
            );
          }
          return {
            opaque: i,
            transmissive: r,
            transparent: o,
            init: function () {
              (n = 0), (i.length = 0), (r.length = 0), (o.length = 0);
            },
            push: function (t, e, n, s, l, c) {
              const u = a(t, e, n, s, l, c);
              n.transmission > 0
                ? r.push(u)
                : !0 === n.transparent
                ? o.push(u)
                : i.push(u);
            },
            unshift: function (t, e, n, s, l, c) {
              const u = a(t, e, n, s, l, c);
              n.transmission > 0
                ? r.unshift(u)
                : !0 === n.transparent
                ? o.unshift(u)
                : i.unshift(u);
            },
            finish: function () {
              for (let t = n, i = e.length; t < i; t++) {
                const n = e[t];
                if (null === n.id) break;
                (n.id = null),
                  (n.object = null),
                  (n.geometry = null),
                  (n.material = null),
                  (n.program = null),
                  (n.group = null);
              }
            },
            sort: function (t, e) {
              i.length > 1 && i.sort(t || il),
                r.length > 1 && r.sort(e || rl),
                o.length > 1 && o.sort(e || rl);
            },
          };
        }
        function sl(t) {
          let e = new WeakMap();
          return {
            get: function (n, i) {
              let r;
              return (
                !1 === e.has(n)
                  ? ((r = new ol(t)), e.set(n, [r]))
                  : i >= e.get(n).length
                  ? ((r = new ol(t)), e.get(n).push(r))
                  : (r = e.get(n)[i]),
                r
              );
            },
            dispose: function () {
              e = new WeakMap();
            },
          };
        }
        function al() {
          const t = {};
          return {
            get: function (e) {
              if (void 0 !== t[e.id]) return t[e.id];
              let n;
              switch (e.type) {
                case "DirectionalLight":
                  n = { direction: new ai(), color: new Lr() };
                  break;
                case "SpotLight":
                  n = {
                    position: new ai(),
                    direction: new ai(),
                    color: new Lr(),
                    distance: 0,
                    coneCos: 0,
                    penumbraCos: 0,
                    decay: 0,
                  };
                  break;
                case "PointLight":
                  n = {
                    position: new ai(),
                    color: new Lr(),
                    distance: 0,
                    decay: 0,
                  };
                  break;
                case "HemisphereLight":
                  n = {
                    direction: new ai(),
                    skyColor: new Lr(),
                    groundColor: new Lr(),
                  };
                  break;
                case "RectAreaLight":
                  n = {
                    color: new Lr(),
                    position: new ai(),
                    halfWidth: new ai(),
                    halfHeight: new ai(),
                  };
              }
              return (t[e.id] = n), n;
            },
          };
        }
        let ll = 0;
        function cl(t, e) {
          return (e.castShadow ? 1 : 0) - (t.castShadow ? 1 : 0);
        }
        function ul(t, e) {
          const n = new al(),
            i = (function () {
              const t = {};
              return {
                get: function (e) {
                  if (void 0 !== t[e.id]) return t[e.id];
                  let n;
                  switch (e.type) {
                    case "DirectionalLight":
                    case "SpotLight":
                      n = {
                        shadowBias: 0,
                        shadowNormalBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new $n(),
                      };
                      break;
                    case "PointLight":
                      n = {
                        shadowBias: 0,
                        shadowNormalBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new $n(),
                        shadowCameraNear: 1,
                        shadowCameraFar: 1e3,
                      };
                  }
                  return (t[e.id] = n), n;
                },
              };
            })(),
            r = {
              version: 0,
              hash: {
                directionalLength: -1,
                pointLength: -1,
                spotLength: -1,
                rectAreaLength: -1,
                hemiLength: -1,
                numDirectionalShadows: -1,
                numPointShadows: -1,
                numSpotShadows: -1,
              },
              ambient: [0, 0, 0],
              probe: [],
              directional: [],
              directionalShadow: [],
              directionalShadowMap: [],
              directionalShadowMatrix: [],
              spot: [],
              spotShadow: [],
              spotShadowMap: [],
              spotShadowMatrix: [],
              rectArea: [],
              rectAreaLTC1: null,
              rectAreaLTC2: null,
              point: [],
              pointShadow: [],
              pointShadowMap: [],
              pointShadowMatrix: [],
              hemi: [],
            };
          for (let t = 0; t < 9; t++) r.probe.push(new ai());
          const o = new ai(),
            s = new Fi(),
            a = new Fi();
          return {
            setup: function (o) {
              let s = 0,
                a = 0,
                l = 0;
              for (let t = 0; t < 9; t++) r.probe[t].set(0, 0, 0);
              let c = 0,
                u = 0,
                h = 0,
                d = 0,
                p = 0,
                f = 0,
                m = 0,
                g = 0;
              o.sort(cl);
              for (let t = 0, e = o.length; t < e; t++) {
                const e = o[t],
                  v = e.color,
                  y = e.intensity,
                  x = e.distance,
                  _ = e.shadow && e.shadow.map ? e.shadow.map.texture : null;
                if (e.isAmbientLight)
                  (s += v.r * y), (a += v.g * y), (l += v.b * y);
                else if (e.isLightProbe)
                  for (let t = 0; t < 9; t++)
                    r.probe[t].addScaledVector(e.sh.coefficients[t], y);
                else if (e.isDirectionalLight) {
                  const t = n.get(e);
                  if (
                    (t.color.copy(e.color).multiplyScalar(e.intensity),
                    e.castShadow)
                  ) {
                    const t = e.shadow,
                      n = i.get(e);
                    (n.shadowBias = t.bias),
                      (n.shadowNormalBias = t.normalBias),
                      (n.shadowRadius = t.radius),
                      (n.shadowMapSize = t.mapSize),
                      (r.directionalShadow[c] = n),
                      (r.directionalShadowMap[c] = _),
                      (r.directionalShadowMatrix[c] = e.shadow.matrix),
                      f++;
                  }
                  (r.directional[c] = t), c++;
                } else if (e.isSpotLight) {
                  const t = n.get(e);
                  if (
                    (t.position.setFromMatrixPosition(e.matrixWorld),
                    t.color.copy(v).multiplyScalar(y),
                    (t.distance = x),
                    (t.coneCos = Math.cos(e.angle)),
                    (t.penumbraCos = Math.cos(e.angle * (1 - e.penumbra))),
                    (t.decay = e.decay),
                    e.castShadow)
                  ) {
                    const t = e.shadow,
                      n = i.get(e);
                    (n.shadowBias = t.bias),
                      (n.shadowNormalBias = t.normalBias),
                      (n.shadowRadius = t.radius),
                      (n.shadowMapSize = t.mapSize),
                      (r.spotShadow[h] = n),
                      (r.spotShadowMap[h] = _),
                      (r.spotShadowMatrix[h] = e.shadow.matrix),
                      g++;
                  }
                  (r.spot[h] = t), h++;
                } else if (e.isRectAreaLight) {
                  const t = n.get(e);
                  t.color.copy(v).multiplyScalar(y),
                    t.halfWidth.set(0.5 * e.width, 0, 0),
                    t.halfHeight.set(0, 0.5 * e.height, 0),
                    (r.rectArea[d] = t),
                    d++;
                } else if (e.isPointLight) {
                  const t = n.get(e);
                  if (
                    (t.color.copy(e.color).multiplyScalar(e.intensity),
                    (t.distance = e.distance),
                    (t.decay = e.decay),
                    e.castShadow)
                  ) {
                    const t = e.shadow,
                      n = i.get(e);
                    (n.shadowBias = t.bias),
                      (n.shadowNormalBias = t.normalBias),
                      (n.shadowRadius = t.radius),
                      (n.shadowMapSize = t.mapSize),
                      (n.shadowCameraNear = t.camera.near),
                      (n.shadowCameraFar = t.camera.far),
                      (r.pointShadow[u] = n),
                      (r.pointShadowMap[u] = _),
                      (r.pointShadowMatrix[u] = e.shadow.matrix),
                      m++;
                  }
                  (r.point[u] = t), u++;
                } else if (e.isHemisphereLight) {
                  const t = n.get(e);
                  t.skyColor.copy(e.color).multiplyScalar(y),
                    t.groundColor.copy(e.groundColor).multiplyScalar(y),
                    (r.hemi[p] = t),
                    p++;
                }
              }
              d > 0 &&
                (e.isWebGL2 || !0 === t.has("OES_texture_float_linear")
                  ? ((r.rectAreaLTC1 = Vo.LTC_FLOAT_1),
                    (r.rectAreaLTC2 = Vo.LTC_FLOAT_2))
                  : !0 === t.has("OES_texture_half_float_linear")
                  ? ((r.rectAreaLTC1 = Vo.LTC_HALF_1),
                    (r.rectAreaLTC2 = Vo.LTC_HALF_2))
                  : console.error(
                      "THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."
                    )),
                (r.ambient[0] = s),
                (r.ambient[1] = a),
                (r.ambient[2] = l);
              const v = r.hash;
              (v.directionalLength === c &&
                v.pointLength === u &&
                v.spotLength === h &&
                v.rectAreaLength === d &&
                v.hemiLength === p &&
                v.numDirectionalShadows === f &&
                v.numPointShadows === m &&
                v.numSpotShadows === g) ||
                ((r.directional.length = c),
                (r.spot.length = h),
                (r.rectArea.length = d),
                (r.point.length = u),
                (r.hemi.length = p),
                (r.directionalShadow.length = f),
                (r.directionalShadowMap.length = f),
                (r.pointShadow.length = m),
                (r.pointShadowMap.length = m),
                (r.spotShadow.length = g),
                (r.spotShadowMap.length = g),
                (r.directionalShadowMatrix.length = f),
                (r.pointShadowMatrix.length = m),
                (r.spotShadowMatrix.length = g),
                (v.directionalLength = c),
                (v.pointLength = u),
                (v.spotLength = h),
                (v.rectAreaLength = d),
                (v.hemiLength = p),
                (v.numDirectionalShadows = f),
                (v.numPointShadows = m),
                (v.numSpotShadows = g),
                (r.version = ll++));
            },
            setupView: function (t, e) {
              let n = 0,
                i = 0,
                l = 0,
                c = 0,
                u = 0;
              const h = e.matrixWorldInverse;
              for (let e = 0, d = t.length; e < d; e++) {
                const d = t[e];
                if (d.isDirectionalLight) {
                  const t = r.directional[n];
                  t.direction.setFromMatrixPosition(d.matrixWorld),
                    o.setFromMatrixPosition(d.target.matrixWorld),
                    t.direction.sub(o),
                    t.direction.transformDirection(h),
                    n++;
                } else if (d.isSpotLight) {
                  const t = r.spot[l];
                  t.position.setFromMatrixPosition(d.matrixWorld),
                    t.position.applyMatrix4(h),
                    t.direction.setFromMatrixPosition(d.matrixWorld),
                    o.setFromMatrixPosition(d.target.matrixWorld),
                    t.direction.sub(o),
                    t.direction.transformDirection(h),
                    l++;
                } else if (d.isRectAreaLight) {
                  const t = r.rectArea[c];
                  t.position.setFromMatrixPosition(d.matrixWorld),
                    t.position.applyMatrix4(h),
                    a.identity(),
                    s.copy(d.matrixWorld),
                    s.premultiply(h),
                    a.extractRotation(s),
                    t.halfWidth.set(0.5 * d.width, 0, 0),
                    t.halfHeight.set(0, 0.5 * d.height, 0),
                    t.halfWidth.applyMatrix4(a),
                    t.halfHeight.applyMatrix4(a),
                    c++;
                } else if (d.isPointLight) {
                  const t = r.point[i];
                  t.position.setFromMatrixPosition(d.matrixWorld),
                    t.position.applyMatrix4(h),
                    i++;
                } else if (d.isHemisphereLight) {
                  const t = r.hemi[u];
                  t.direction.setFromMatrixPosition(d.matrixWorld),
                    t.direction.transformDirection(h),
                    t.direction.normalize(),
                    u++;
                }
              }
            },
            state: r,
          };
        }
        function hl(t, e) {
          const n = new ul(t, e),
            i = [],
            r = [];
          return {
            init: function () {
              (i.length = 0), (r.length = 0);
            },
            state: { lightsArray: i, shadowsArray: r, lights: n },
            setupLights: function () {
              n.setup(i);
            },
            setupLightsView: function (t) {
              n.setupView(i, t);
            },
            pushLight: function (t) {
              i.push(t);
            },
            pushShadow: function (t) {
              r.push(t);
            },
          };
        }
        function dl(t, e) {
          let n = new WeakMap();
          return {
            get: function (i, r = 0) {
              let o;
              return (
                !1 === n.has(i)
                  ? ((o = new hl(t, e)), n.set(i, [o]))
                  : r >= n.get(i).length
                  ? ((o = new hl(t, e)), n.get(i).push(o))
                  : (o = n.get(i)[r]),
                o
              );
            },
            dispose: function () {
              n = new WeakMap();
            },
          };
        }
        class pl extends wr {
          constructor(t) {
            super(),
              (this.type = "MeshDepthMaterial"),
              (this.depthPacking = on),
              (this.map = null),
              (this.alphaMap = null),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.fog = !1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.depthPacking = t.depthPacking),
              (this.map = t.map),
              (this.alphaMap = t.alphaMap),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              this
            );
          }
        }
        pl.prototype.isMeshDepthMaterial = !0;
        class fl extends wr {
          constructor(t) {
            super(),
              (this.type = "MeshDistanceMaterial"),
              (this.referencePosition = new ai()),
              (this.nearDistance = 1),
              (this.farDistance = 1e3),
              (this.map = null),
              (this.alphaMap = null),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.fog = !1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.referencePosition.copy(t.referencePosition),
              (this.nearDistance = t.nearDistance),
              (this.farDistance = t.farDistance),
              (this.map = t.map),
              (this.alphaMap = t.alphaMap),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              this
            );
          }
        }
        function ml(t, e, n) {
          let i = new Fo();
          const r = new $n(),
            o = new $n(),
            s = new ni(),
            a = new pl({ depthPacking: sn }),
            l = new fl(),
            c = {},
            u = n.maxTextureSize,
            d = { 0: m, 1: f, 2: g },
            v = new Eo({
              defines: { SAMPLE_RATE: 2 / 8, HALF_SAMPLE_RATE: 1 / 8 },
              uniforms: {
                shadow_pass: { value: null },
                resolution: { value: new $n() },
                radius: { value: 4 },
              },
              vertexShader:
                "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",
              fragmentShader:
                "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",
            }),
            y = v.clone();
          y.defines.HORIZONTAL_PASS = 1;
          const _ = new to();
          _.setAttribute(
            "position",
            new kr(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3)
          );
          const b = new xo(_, v),
            w = this;
          function M(n, i) {
            const r = e.update(b);
            (v.uniforms.shadow_pass.value = n.map.texture),
              (v.uniforms.resolution.value = n.mapSize),
              (v.uniforms.radius.value = n.radius),
              t.setRenderTarget(n.mapPass),
              t.clear(),
              t.renderBufferDirect(i, null, r, v, b, null),
              (y.uniforms.shadow_pass.value = n.mapPass.texture),
              (y.uniforms.resolution.value = n.mapSize),
              (y.uniforms.radius.value = n.radius),
              t.setRenderTarget(n.map),
              t.clear(),
              t.renderBufferDirect(i, null, r, y, b, null);
          }
          function S(e, n, i, r, o, s, u) {
            let h = null;
            const f =
              !0 === r.isPointLight
                ? e.customDistanceMaterial
                : e.customDepthMaterial;
            if (
              ((h = void 0 !== f ? f : !0 === r.isPointLight ? l : a),
              t.localClippingEnabled &&
                !0 === i.clipShadows &&
                0 !== i.clippingPlanes.length)
            ) {
              const t = h.uuid,
                e = i.uuid;
              let n = c[t];
              void 0 === n && ((n = {}), (c[t] = n));
              let r = n[e];
              void 0 === r && ((r = h.clone()), (n[e] = r)), (h = r);
            }
            return (
              (h.visible = i.visible),
              (h.wireframe = i.wireframe),
              (h.side =
                u === p
                  ? null !== i.shadowSide
                    ? i.shadowSide
                    : i.side
                  : null !== i.shadowSide
                  ? i.shadowSide
                  : d[i.side]),
              (h.clipShadows = i.clipShadows),
              (h.clippingPlanes = i.clippingPlanes),
              (h.clipIntersection = i.clipIntersection),
              (h.wireframeLinewidth = i.wireframeLinewidth),
              (h.linewidth = i.linewidth),
              !0 === r.isPointLight &&
                !0 === h.isMeshDistanceMaterial &&
                (h.referencePosition.setFromMatrixPosition(r.matrixWorld),
                (h.nearDistance = o),
                (h.farDistance = s)),
              h
            );
          }
          function E(n, r, o, s, a) {
            if (!1 === n.visible) return;
            if (
              n.layers.test(r.layers) &&
              (n.isMesh || n.isLine || n.isPoints) &&
              (n.castShadow || (n.receiveShadow && a === p)) &&
              (!n.frustumCulled || i.intersectsObject(n))
            ) {
              n.modelViewMatrix.multiplyMatrices(
                o.matrixWorldInverse,
                n.matrixWorld
              );
              const i = e.update(n),
                r = n.material;
              if (Array.isArray(r)) {
                const e = i.groups;
                for (let l = 0, c = e.length; l < c; l++) {
                  const c = e[l],
                    u = r[c.materialIndex];
                  if (u && u.visible) {
                    const e = S(n, 0, u, s, o.near, o.far, a);
                    t.renderBufferDirect(o, null, i, e, n, c);
                  }
                }
              } else if (r.visible) {
                const e = S(n, 0, r, s, o.near, o.far, a);
                t.renderBufferDirect(o, null, i, e, n, null);
              }
            }
            const l = n.children;
            for (let t = 0, e = l.length; t < e; t++) E(l[t], r, o, s, a);
          }
          (this.enabled = !1),
            (this.autoUpdate = !0),
            (this.needsUpdate = !1),
            (this.type = h),
            (this.render = function (e, n, a) {
              if (!1 === w.enabled) return;
              if (!1 === w.autoUpdate && !1 === w.needsUpdate) return;
              if (0 === e.length) return;
              const l = t.getRenderTarget(),
                c = t.getActiveCubeFace(),
                h = t.getActiveMipmapLevel(),
                d = t.state;
              d.setBlending(x),
                d.buffers.color.setClear(1, 1, 1, 1),
                d.buffers.depth.setTest(!0),
                d.setScissorTest(!1);
              for (let l = 0, c = e.length; l < c; l++) {
                const c = e[l],
                  h = c.shadow;
                if (void 0 === h) {
                  console.warn("THREE.WebGLShadowMap:", c, "has no shadow.");
                  continue;
                }
                if (!1 === h.autoUpdate && !1 === h.needsUpdate) continue;
                r.copy(h.mapSize);
                const f = h.getFrameExtents();
                if (
                  (r.multiply(f),
                  o.copy(h.mapSize),
                  (r.x > u || r.y > u) &&
                    (r.x > u &&
                      ((o.x = Math.floor(u / f.x)),
                      (r.x = o.x * f.x),
                      (h.mapSize.x = o.x)),
                    r.y > u &&
                      ((o.y = Math.floor(u / f.y)),
                      (r.y = o.y * f.y),
                      (h.mapSize.y = o.y))),
                  null === h.map && !h.isPointLightShadow && this.type === p)
                ) {
                  const t = { minFilter: xt, magFilter: xt, format: Ft };
                  (h.map = new ii(r.x, r.y, t)),
                    (h.map.texture.name = c.name + ".shadowMap"),
                    (h.mapPass = new ii(r.x, r.y, t)),
                    h.camera.updateProjectionMatrix();
                }
                if (null === h.map) {
                  const t = { minFilter: ft, magFilter: ft, format: Ft };
                  (h.map = new ii(r.x, r.y, t)),
                    (h.map.texture.name = c.name + ".shadowMap"),
                    h.camera.updateProjectionMatrix();
                }
                t.setRenderTarget(h.map), t.clear();
                const m = h.getViewportCount();
                for (let t = 0; t < m; t++) {
                  const e = h.getViewport(t);
                  s.set(o.x * e.x, o.y * e.y, o.x * e.z, o.y * e.w),
                    d.viewport(s),
                    h.updateMatrices(c, t),
                    (i = h.getFrustum()),
                    E(n, a, h.camera, c, this.type);
                }
                h.isPointLightShadow || this.type !== p || M(h, a),
                  (h.needsUpdate = !1);
              }
              (w.needsUpdate = !1), t.setRenderTarget(l, c, h);
            });
        }
        function gl(t, e, n) {
          const i = n.isWebGL2,
            r = new (function () {
              let e = !1;
              const n = new ni();
              let i = null;
              const r = new ni(0, 0, 0, 0);
              return {
                setMask: function (n) {
                  i === n || e || (t.colorMask(n, n, n, n), (i = n));
                },
                setLocked: function (t) {
                  e = t;
                },
                setClear: function (e, i, o, s, a) {
                  !0 === a && ((e *= s), (i *= s), (o *= s)),
                    n.set(e, i, o, s),
                    !1 === r.equals(n) && (t.clearColor(e, i, o, s), r.copy(n));
                },
                reset: function () {
                  (e = !1), (i = null), r.set(-1, 0, 0, 0);
                },
              };
            })(),
            o = new (function () {
              let e = !1,
                n = null,
                i = null,
                r = null;
              return {
                setTest: function (t) {
                  t ? yt(2929) : xt(2929);
                },
                setMask: function (i) {
                  n === i || e || (t.depthMask(i), (n = i));
                },
                setFunc: function (e) {
                  if (i !== e) {
                    if (e)
                      switch (e) {
                        case j:
                          t.depthFunc(512);
                          break;
                        case U:
                          t.depthFunc(519);
                          break;
                        case V:
                          t.depthFunc(513);
                          break;
                        case G:
                          t.depthFunc(515);
                          break;
                        case W:
                          t.depthFunc(514);
                          break;
                        case q:
                          t.depthFunc(518);
                          break;
                        case X:
                          t.depthFunc(516);
                          break;
                        case Y:
                          t.depthFunc(517);
                          break;
                        default:
                          t.depthFunc(515);
                      }
                    else t.depthFunc(515);
                    i = e;
                  }
                },
                setLocked: function (t) {
                  e = t;
                },
                setClear: function (e) {
                  r !== e && (t.clearDepth(e), (r = e));
                },
                reset: function () {
                  (e = !1), (n = null), (i = null), (r = null);
                },
              };
            })(),
            c = new (function () {
              let e = !1,
                n = null,
                i = null,
                r = null,
                o = null,
                s = null,
                a = null,
                l = null,
                c = null;
              return {
                setTest: function (t) {
                  e || (t ? yt(2960) : xt(2960));
                },
                setMask: function (i) {
                  n === i || e || (t.stencilMask(i), (n = i));
                },
                setFunc: function (e, n, s) {
                  (i === e && r === n && o === s) ||
                    (t.stencilFunc(e, n, s), (i = e), (r = n), (o = s));
                },
                setOp: function (e, n, i) {
                  (s === e && a === n && l === i) ||
                    (t.stencilOp(e, n, i), (s = e), (a = n), (l = i));
                },
                setLocked: function (t) {
                  e = t;
                },
                setClear: function (e) {
                  c !== e && (t.clearStencil(e), (c = e));
                },
                reset: function () {
                  (e = !1),
                    (n = null),
                    (i = null),
                    (r = null),
                    (o = null),
                    (s = null),
                    (a = null),
                    (l = null),
                    (c = null);
                },
              };
            })();
          let u = {},
            h = null,
            d = {},
            p = null,
            f = !1,
            v = null,
            y = null,
            $ = null,
            K = null,
            J = null,
            Z = null,
            Q = null,
            tt = !1,
            et = null,
            nt = null,
            it = null,
            rt = null,
            ot = null;
          const st = t.getParameter(35661);
          let at = !1,
            lt = 0;
          const ct = t.getParameter(7938);
          -1 !== ct.indexOf("WebGL")
            ? ((lt = parseFloat(/^WebGL (\d)/.exec(ct)[1])), (at = lt >= 1))
            : -1 !== ct.indexOf("OpenGL ES") &&
              ((lt = parseFloat(/^OpenGL ES (\d)/.exec(ct)[1])),
              (at = lt >= 2));
          let ut = null,
            ht = {};
          const dt = t.getParameter(3088),
            pt = t.getParameter(2978),
            ft = new ni().fromArray(dt),
            mt = new ni().fromArray(pt);
          function gt(e, n, i) {
            const r = new Uint8Array(4),
              o = t.createTexture();
            t.bindTexture(e, o),
              t.texParameteri(e, 10241, 9728),
              t.texParameteri(e, 10240, 9728);
            for (let e = 0; e < i; e++)
              t.texImage2D(n + e, 0, 6408, 1, 1, 0, 6408, 5121, r);
            return o;
          }
          const vt = {};
          function yt(e) {
            !0 !== u[e] && (t.enable(e), (u[e] = !0));
          }
          function xt(e) {
            !1 !== u[e] && (t.disable(e), (u[e] = !1));
          }
          (vt[3553] = gt(3553, 3553, 1)),
            (vt[34067] = gt(34067, 34069, 6)),
            r.setClear(0, 0, 0, 1),
            o.setClear(1),
            c.setClear(0),
            yt(2929),
            o.setFunc(G),
            Mt(!1),
            St(a),
            yt(2884),
            wt(x);
          const _t = { [E]: 32774, [T]: 32778, [A]: 32779 };
          if (i) (_t[C] = 32775), (_t[L] = 32776);
          else {
            const t = e.get("EXT_blend_minmax");
            null !== t && ((_t[C] = t.MIN_EXT), (_t[L] = t.MAX_EXT));
          }
          const bt = {
            [R]: 0,
            [P]: 1,
            [O]: 768,
            [I]: 770,
            [H]: 776,
            [F]: 774,
            [B]: 772,
            [k]: 769,
            [D]: 771,
            [z]: 775,
            [N]: 773,
          };
          function wt(e, n, i, r, o, s, a, l) {
            if (e !== x) {
              if ((!1 === f && (yt(3042), (f = !0)), e === S))
                (o = o || n),
                  (s = s || i),
                  (a = a || r),
                  (n === y && o === J) ||
                    (t.blendEquationSeparate(_t[n], _t[o]), (y = n), (J = o)),
                  (i === $ && r === K && s === Z && a === Q) ||
                    (t.blendFuncSeparate(bt[i], bt[r], bt[s], bt[a]),
                    ($ = i),
                    (K = r),
                    (Z = s),
                    (Q = a)),
                  (v = e),
                  (tt = null);
              else if (e !== v || l !== tt) {
                if (
                  ((y === E && J === E) ||
                    (t.blendEquation(32774), (y = E), (J = E)),
                  l)
                )
                  switch (e) {
                    case _:
                      t.blendFuncSeparate(1, 771, 1, 771);
                      break;
                    case b:
                      t.blendFunc(1, 1);
                      break;
                    case w:
                      t.blendFuncSeparate(0, 0, 769, 771);
                      break;
                    case M:
                      t.blendFuncSeparate(0, 768, 0, 770);
                      break;
                    default:
                      console.error("THREE.WebGLState: Invalid blending: ", e);
                  }
                else
                  switch (e) {
                    case _:
                      t.blendFuncSeparate(770, 771, 1, 771);
                      break;
                    case b:
                      t.blendFunc(770, 1);
                      break;
                    case w:
                      t.blendFunc(0, 769);
                      break;
                    case M:
                      t.blendFunc(0, 768);
                      break;
                    default:
                      console.error("THREE.WebGLState: Invalid blending: ", e);
                  }
                ($ = null),
                  (K = null),
                  (Z = null),
                  (Q = null),
                  (v = e),
                  (tt = l);
              }
            } else !0 === f && (xt(3042), (f = !1));
          }
          function Mt(e) {
            et !== e && (e ? t.frontFace(2304) : t.frontFace(2305), (et = e));
          }
          function St(e) {
            e !== s
              ? (yt(2884),
                e !== nt &&
                  (e === a
                    ? t.cullFace(1029)
                    : e === l
                    ? t.cullFace(1028)
                    : t.cullFace(1032)))
              : xt(2884),
              (nt = e);
          }
          function Et(e, n, i) {
            e
              ? (yt(32823),
                (rt === n && ot === i) ||
                  (t.polygonOffset(n, i), (rt = n), (ot = i)))
              : xt(32823);
          }
          function Tt(e) {
            void 0 === e && (e = 33984 + st - 1),
              ut !== e && (t.activeTexture(e), (ut = e));
          }
          return {
            buffers: { color: r, depth: o, stencil: c },
            enable: yt,
            disable: xt,
            bindFramebuffer: function (e, n) {
              return (
                null === n && null !== h && (n = h),
                d[e] !== n &&
                  (t.bindFramebuffer(e, n),
                  (d[e] = n),
                  i &&
                    (36009 === e && (d[36160] = n),
                    36160 === e && (d[36009] = n)),
                  !0)
              );
            },
            bindXRFramebuffer: function (e) {
              e !== h && (t.bindFramebuffer(36160, e), (h = e));
            },
            useProgram: function (e) {
              return p !== e && (t.useProgram(e), (p = e), !0);
            },
            setBlending: wt,
            setMaterial: function (t, e) {
              t.side === g ? xt(2884) : yt(2884);
              let n = t.side === m;
              e && (n = !n),
                Mt(n),
                t.blending === _ && !1 === t.transparent
                  ? wt(x)
                  : wt(
                      t.blending,
                      t.blendEquation,
                      t.blendSrc,
                      t.blendDst,
                      t.blendEquationAlpha,
                      t.blendSrcAlpha,
                      t.blendDstAlpha,
                      t.premultipliedAlpha
                    ),
                o.setFunc(t.depthFunc),
                o.setTest(t.depthTest),
                o.setMask(t.depthWrite),
                r.setMask(t.colorWrite);
              const i = t.stencilWrite;
              c.setTest(i),
                i &&
                  (c.setMask(t.stencilWriteMask),
                  c.setFunc(t.stencilFunc, t.stencilRef, t.stencilFuncMask),
                  c.setOp(t.stencilFail, t.stencilZFail, t.stencilZPass)),
                Et(
                  t.polygonOffset,
                  t.polygonOffsetFactor,
                  t.polygonOffsetUnits
                ),
                !0 === t.alphaToCoverage ? yt(32926) : xt(32926);
            },
            setFlipSided: Mt,
            setCullFace: St,
            setLineWidth: function (e) {
              e !== it && (at && t.lineWidth(e), (it = e));
            },
            setPolygonOffset: Et,
            setScissorTest: function (t) {
              t ? yt(3089) : xt(3089);
            },
            activeTexture: Tt,
            bindTexture: function (e, n) {
              null === ut && Tt();
              let i = ht[ut];
              void 0 === i &&
                ((i = { type: void 0, texture: void 0 }), (ht[ut] = i)),
                (i.type === e && i.texture === n) ||
                  (t.bindTexture(e, n || vt[e]), (i.type = e), (i.texture = n));
            },
            unbindTexture: function () {
              const e = ht[ut];
              void 0 !== e &&
                void 0 !== e.type &&
                (t.bindTexture(e.type, null),
                (e.type = void 0),
                (e.texture = void 0));
            },
            compressedTexImage2D: function () {
              try {
                t.compressedTexImage2D.apply(t, arguments);
              } catch (t) {
                console.error("THREE.WebGLState:", t);
              }
            },
            texImage2D: function () {
              try {
                t.texImage2D.apply(t, arguments);
              } catch (t) {
                console.error("THREE.WebGLState:", t);
              }
            },
            texImage3D: function () {
              try {
                t.texImage3D.apply(t, arguments);
              } catch (t) {
                console.error("THREE.WebGLState:", t);
              }
            },
            scissor: function (e) {
              !1 === ft.equals(e) &&
                (t.scissor(e.x, e.y, e.z, e.w), ft.copy(e));
            },
            viewport: function (e) {
              !1 === mt.equals(e) &&
                (t.viewport(e.x, e.y, e.z, e.w), mt.copy(e));
            },
            reset: function () {
              t.disable(3042),
                t.disable(2884),
                t.disable(2929),
                t.disable(32823),
                t.disable(3089),
                t.disable(2960),
                t.disable(32926),
                t.blendEquation(32774),
                t.blendFunc(1, 0),
                t.blendFuncSeparate(1, 0, 1, 0),
                t.colorMask(!0, !0, !0, !0),
                t.clearColor(0, 0, 0, 0),
                t.depthMask(!0),
                t.depthFunc(513),
                t.clearDepth(1),
                t.stencilMask(4294967295),
                t.stencilFunc(519, 0, 4294967295),
                t.stencilOp(7680, 7680, 7680),
                t.clearStencil(0),
                t.cullFace(1029),
                t.frontFace(2305),
                t.polygonOffset(0, 0),
                t.activeTexture(33984),
                t.bindFramebuffer(36160, null),
                !0 === i &&
                  (t.bindFramebuffer(36009, null),
                  t.bindFramebuffer(36008, null)),
                t.useProgram(null),
                t.lineWidth(1),
                t.scissor(0, 0, t.canvas.width, t.canvas.height),
                t.viewport(0, 0, t.canvas.width, t.canvas.height),
                (u = {}),
                (ut = null),
                (ht = {}),
                (h = null),
                (d = {}),
                (p = null),
                (f = !1),
                (v = null),
                (y = null),
                ($ = null),
                (K = null),
                (J = null),
                (Z = null),
                (Q = null),
                (tt = !1),
                (et = null),
                (nt = null),
                (it = null),
                (rt = null),
                (ot = null),
                ft.set(0, 0, t.canvas.width, t.canvas.height),
                mt.set(0, 0, t.canvas.width, t.canvas.height),
                r.reset(),
                o.reset(),
                c.reset();
            },
          };
        }
        function vl(t, e, n, i, r, o, s) {
          const a = r.isWebGL2,
            l = r.maxTextures,
            c = r.maxCubemapSize,
            u = r.maxTextureSize,
            h = r.maxSamples,
            d = new WeakMap();
          let p,
            f = !1;
          try {
            f =
              "undefined" != typeof OffscreenCanvas &&
              null !== new OffscreenCanvas(1, 1).getContext("2d");
          } catch (t) {}
          function m(t, e) {
            return f
              ? new OffscreenCanvas(t, e)
              : document.createElementNS(
                  "http://www.w3.org/1999/xhtml",
                  "canvas"
                );
          }
          function g(t, e, n, i) {
            let r = 1;
            if (
              ((t.width > i || t.height > i) &&
                (r = i / Math.max(t.width, t.height)),
              r < 1 || !0 === e)
            ) {
              if (
                ("undefined" != typeof HTMLImageElement &&
                  t instanceof HTMLImageElement) ||
                ("undefined" != typeof HTMLCanvasElement &&
                  t instanceof HTMLCanvasElement) ||
                ("undefined" != typeof ImageBitmap && t instanceof ImageBitmap)
              ) {
                const i = e ? Xn : Math.floor,
                  o = i(r * t.width),
                  s = i(r * t.height);
                void 0 === p && (p = m(o, s));
                const a = n ? m(o, s) : p;
                return (
                  (a.width = o),
                  (a.height = s),
                  a.getContext("2d").drawImage(t, 0, 0, o, s),
                  console.warn(
                    "THREE.WebGLRenderer: Texture has been resized from (" +
                      t.width +
                      "x" +
                      t.height +
                      ") to (" +
                      o +
                      "x" +
                      s +
                      ")."
                  ),
                  a
                );
              }
              return (
                "data" in t &&
                  console.warn(
                    "THREE.WebGLRenderer: Image in DataTexture is too big (" +
                      t.width +
                      "x" +
                      t.height +
                      ")."
                  ),
                t
              );
            }
            return t;
          }
          function v(t) {
            return Wn(t.width) && Wn(t.height);
          }
          function y(t, e) {
            return (
              t.generateMipmaps && e && t.minFilter !== ft && t.minFilter !== xt
            );
          }
          function x(e, n, r, o, s = 1) {
            t.generateMipmap(e),
              (i.get(n).__maxMipLevel = Math.log2(Math.max(r, o, s)));
          }
          function _(n, i, r) {
            if (!1 === a) return i;
            if (null !== n) {
              if (void 0 !== t[n]) return t[n];
              console.warn(
                "THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
                  n +
                  "'"
              );
            }
            let o = i;
            return (
              6403 === i &&
                (5126 === r && (o = 33326),
                5131 === r && (o = 33325),
                5121 === r && (o = 33321)),
              6407 === i &&
                (5126 === r && (o = 34837),
                5131 === r && (o = 34843),
                5121 === r && (o = 32849)),
              6408 === i &&
                (5126 === r && (o = 34836),
                5131 === r && (o = 34842),
                5121 === r && (o = 32856)),
              (33325 !== o && 33326 !== o && 34842 !== o && 34836 !== o) ||
                e.get("EXT_color_buffer_float"),
              o
            );
          }
          function b(t) {
            return t === ft || t === mt || t === vt ? 9728 : 9729;
          }
          function w(e) {
            const n = e.target;
            n.removeEventListener("dispose", w),
              (function (e) {
                const n = i.get(e);
                void 0 !== n.__webglInit &&
                  (t.deleteTexture(n.__webglTexture), i.remove(e));
              })(n),
              n.isVideoTexture && d.delete(n),
              s.memory.textures--;
          }
          function M(e) {
            const n = e.target;
            n.removeEventListener("dispose", M),
              (function (e) {
                const n = e.texture,
                  r = i.get(e),
                  o = i.get(n);
                if (e) {
                  if (
                    (void 0 !== o.__webglTexture &&
                      (t.deleteTexture(o.__webglTexture), s.memory.textures--),
                    e.depthTexture && e.depthTexture.dispose(),
                    e.isWebGLCubeRenderTarget)
                  )
                    for (let e = 0; e < 6; e++)
                      t.deleteFramebuffer(r.__webglFramebuffer[e]),
                        r.__webglDepthbuffer &&
                          t.deleteRenderbuffer(r.__webglDepthbuffer[e]);
                  else
                    t.deleteFramebuffer(r.__webglFramebuffer),
                      r.__webglDepthbuffer &&
                        t.deleteRenderbuffer(r.__webglDepthbuffer),
                      r.__webglMultisampledFramebuffer &&
                        t.deleteFramebuffer(r.__webglMultisampledFramebuffer),
                      r.__webglColorRenderbuffer &&
                        t.deleteRenderbuffer(r.__webglColorRenderbuffer),
                      r.__webglDepthRenderbuffer &&
                        t.deleteRenderbuffer(r.__webglDepthRenderbuffer);
                  if (e.isWebGLMultipleRenderTargets)
                    for (let e = 0, r = n.length; e < r; e++) {
                      const r = i.get(n[e]);
                      r.__webglTexture &&
                        (t.deleteTexture(r.__webglTexture),
                        s.memory.textures--),
                        i.remove(n[e]);
                    }
                  i.remove(n), i.remove(e);
                }
              })(n);
          }
          let S = 0;
          function E(t, e) {
            const r = i.get(t);
            if (
              (t.isVideoTexture &&
                (function (t) {
                  const e = s.render.frame;
                  d.get(t) !== e && (d.set(t, e), t.update());
                })(t),
              t.version > 0 && r.__version !== t.version)
            ) {
              const n = t.image;
              if (void 0 === n)
                console.warn(
                  "THREE.WebGLRenderer: Texture marked for update but image is undefined"
                );
              else {
                if (!1 !== n.complete) return void P(r, t, e);
                console.warn(
                  "THREE.WebGLRenderer: Texture marked for update but image is incomplete"
                );
              }
            }
            n.activeTexture(33984 + e), n.bindTexture(3553, r.__webglTexture);
          }
          function T(e, r) {
            const s = i.get(e);
            e.version > 0 && s.__version !== e.version
              ? (function (e, i, r) {
                  if (6 !== i.image.length) return;
                  R(e, i),
                    n.activeTexture(33984 + r),
                    n.bindTexture(34067, e.__webglTexture),
                    t.pixelStorei(37440, i.flipY),
                    t.pixelStorei(37441, i.premultiplyAlpha),
                    t.pixelStorei(3317, i.unpackAlignment),
                    t.pixelStorei(37443, 0);
                  const s =
                      i &&
                      (i.isCompressedTexture || i.image[0].isCompressedTexture),
                    l = i.image[0] && i.image[0].isDataTexture,
                    u = [];
                  for (let t = 0; t < 6; t++)
                    u[t] =
                      s || l
                        ? l
                          ? i.image[t].image
                          : i.image[t]
                        : g(i.image[t], !1, !0, c);
                  const h = u[0],
                    d = v(h) || a,
                    p = o.convert(i.format),
                    f = o.convert(i.type),
                    m = _(i.internalFormat, p, f);
                  let b;
                  if ((L(34067, i, d), s)) {
                    for (let t = 0; t < 6; t++) {
                      b = u[t].mipmaps;
                      for (let e = 0; e < b.length; e++) {
                        const r = b[e];
                        i.format !== Ft && i.format !== Nt
                          ? null !== p
                            ? n.compressedTexImage2D(
                                34069 + t,
                                e,
                                m,
                                r.width,
                                r.height,
                                0,
                                r.data
                              )
                            : console.warn(
                                "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"
                              )
                          : n.texImage2D(
                              34069 + t,
                              e,
                              m,
                              r.width,
                              r.height,
                              0,
                              p,
                              f,
                              r.data
                            );
                      }
                    }
                    e.__maxMipLevel = b.length - 1;
                  } else {
                    b = i.mipmaps;
                    for (let t = 0; t < 6; t++)
                      if (l) {
                        n.texImage2D(
                          34069 + t,
                          0,
                          m,
                          u[t].width,
                          u[t].height,
                          0,
                          p,
                          f,
                          u[t].data
                        );
                        for (let e = 0; e < b.length; e++) {
                          const i = b[e].image[t].image;
                          n.texImage2D(
                            34069 + t,
                            e + 1,
                            m,
                            i.width,
                            i.height,
                            0,
                            p,
                            f,
                            i.data
                          );
                        }
                      } else {
                        n.texImage2D(34069 + t, 0, m, p, f, u[t]);
                        for (let e = 0; e < b.length; e++) {
                          const i = b[e];
                          n.texImage2D(34069 + t, e + 1, m, p, f, i.image[t]);
                        }
                      }
                    e.__maxMipLevel = b.length;
                  }
                  y(i, d) && x(34067, i, h.width, h.height),
                    (e.__version = i.version),
                    i.onUpdate && i.onUpdate(i);
                })(s, e, r)
              : (n.activeTexture(33984 + r),
                n.bindTexture(34067, s.__webglTexture));
          }
          const A = { [ht]: 10497, [dt]: 33071, [pt]: 33648 },
            C = {
              [ft]: 9728,
              [mt]: 9984,
              [vt]: 9986,
              [xt]: 9729,
              [_t]: 9985,
              [wt]: 9987,
            };
          function L(n, o, s) {
            if (
              (s
                ? (t.texParameteri(n, 10242, A[o.wrapS]),
                  t.texParameteri(n, 10243, A[o.wrapT]),
                  (32879 !== n && 35866 !== n) ||
                    t.texParameteri(n, 32882, A[o.wrapR]),
                  t.texParameteri(n, 10240, C[o.magFilter]),
                  t.texParameteri(n, 10241, C[o.minFilter]))
                : (t.texParameteri(n, 10242, 33071),
                  t.texParameteri(n, 10243, 33071),
                  (32879 !== n && 35866 !== n) ||
                    t.texParameteri(n, 32882, 33071),
                  (o.wrapS === dt && o.wrapT === dt) ||
                    console.warn(
                      "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."
                    ),
                  t.texParameteri(n, 10240, b(o.magFilter)),
                  t.texParameteri(n, 10241, b(o.minFilter)),
                  o.minFilter !== ft &&
                    o.minFilter !== xt &&
                    console.warn(
                      "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."
                    )),
              !0 === e.has("EXT_texture_filter_anisotropic"))
            ) {
              const s = e.get("EXT_texture_filter_anisotropic");
              if (o.type === Rt && !1 === e.has("OES_texture_float_linear"))
                return;
              if (
                !1 === a &&
                o.type === Pt &&
                !1 === e.has("OES_texture_half_float_linear")
              )
                return;
              (o.anisotropy > 1 || i.get(o).__currentAnisotropy) &&
                (t.texParameterf(
                  n,
                  s.TEXTURE_MAX_ANISOTROPY_EXT,
                  Math.min(o.anisotropy, r.getMaxAnisotropy())
                ),
                (i.get(o).__currentAnisotropy = o.anisotropy));
            }
          }
          function R(e, n) {
            void 0 === e.__webglInit &&
              ((e.__webglInit = !0),
              n.addEventListener("dispose", w),
              (e.__webglTexture = t.createTexture()),
              s.memory.textures++);
          }
          function P(e, i, r) {
            let s = 3553;
            i.isDataTexture2DArray && (s = 35866),
              i.isDataTexture3D && (s = 32879),
              R(e, i),
              n.activeTexture(33984 + r),
              n.bindTexture(s, e.__webglTexture),
              t.pixelStorei(37440, i.flipY),
              t.pixelStorei(37441, i.premultiplyAlpha),
              t.pixelStorei(3317, i.unpackAlignment),
              t.pixelStorei(37443, 0);
            const l =
                (function (t) {
                  return (
                    !a &&
                    (t.wrapS !== dt ||
                      t.wrapT !== dt ||
                      (t.minFilter !== ft && t.minFilter !== xt))
                  );
                })(i) && !1 === v(i.image),
              c = g(i.image, l, !1, u),
              h = v(c) || a,
              d = o.convert(i.format);
            let p,
              f = o.convert(i.type),
              m = _(i.internalFormat, d, f);
            L(s, i, h);
            const b = i.mipmaps;
            if (i.isDepthTexture)
              (m = 6402),
                a
                  ? (m =
                      i.type === Rt
                        ? 36012
                        : i.type === Lt
                        ? 33190
                        : i.type === Dt
                        ? 35056
                        : 33189)
                  : i.type === Rt &&
                    console.error(
                      "WebGLRenderer: Floating point depth texture requires WebGL2."
                    ),
                i.format === Ut &&
                  6402 === m &&
                  i.type !== At &&
                  i.type !== Lt &&
                  (console.warn(
                    "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."
                  ),
                  (i.type = At),
                  (f = o.convert(i.type))),
                i.format === Vt &&
                  6402 === m &&
                  ((m = 34041),
                  i.type !== Dt &&
                    (console.warn(
                      "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."
                    ),
                    (i.type = Dt),
                    (f = o.convert(i.type)))),
                n.texImage2D(3553, 0, m, c.width, c.height, 0, d, f, null);
            else if (i.isDataTexture)
              if (b.length > 0 && h) {
                for (let t = 0, e = b.length; t < e; t++)
                  (p = b[t]),
                    n.texImage2D(
                      3553,
                      t,
                      m,
                      p.width,
                      p.height,
                      0,
                      d,
                      f,
                      p.data
                    );
                (i.generateMipmaps = !1), (e.__maxMipLevel = b.length - 1);
              } else
                n.texImage2D(3553, 0, m, c.width, c.height, 0, d, f, c.data),
                  (e.__maxMipLevel = 0);
            else if (i.isCompressedTexture) {
              for (let t = 0, e = b.length; t < e; t++)
                (p = b[t]),
                  i.format !== Ft && i.format !== Nt
                    ? null !== d
                      ? n.compressedTexImage2D(
                          3553,
                          t,
                          m,
                          p.width,
                          p.height,
                          0,
                          p.data
                        )
                      : console.warn(
                          "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                        )
                    : n.texImage2D(
                        3553,
                        t,
                        m,
                        p.width,
                        p.height,
                        0,
                        d,
                        f,
                        p.data
                      );
              e.__maxMipLevel = b.length - 1;
            } else if (i.isDataTexture2DArray)
              n.texImage3D(
                35866,
                0,
                m,
                c.width,
                c.height,
                c.depth,
                0,
                d,
                f,
                c.data
              ),
                (e.__maxMipLevel = 0);
            else if (i.isDataTexture3D)
              n.texImage3D(
                32879,
                0,
                m,
                c.width,
                c.height,
                c.depth,
                0,
                d,
                f,
                c.data
              ),
                (e.__maxMipLevel = 0);
            else if (b.length > 0 && h) {
              for (let t = 0, e = b.length; t < e; t++)
                (p = b[t]), n.texImage2D(3553, t, m, d, f, p);
              (i.generateMipmaps = !1), (e.__maxMipLevel = b.length - 1);
            } else n.texImage2D(3553, 0, m, d, f, c), (e.__maxMipLevel = 0);
            y(i, h) && x(s, i, c.width, c.height),
              (e.__version = i.version),
              i.onUpdate && i.onUpdate(i);
          }
          function O(e, r, s, a, l) {
            const c = o.convert(s.format),
              u = o.convert(s.type),
              h = _(s.internalFormat, c, u);
            32879 === l || 35866 === l
              ? n.texImage3D(l, 0, h, r.width, r.height, r.depth, 0, c, u, null)
              : n.texImage2D(l, 0, h, r.width, r.height, 0, c, u, null),
              n.bindFramebuffer(36160, e),
              t.framebufferTexture2D(36160, a, l, i.get(s).__webglTexture, 0),
              n.bindFramebuffer(36160, null);
          }
          function k(e, n, i) {
            if (
              (t.bindRenderbuffer(36161, e), n.depthBuffer && !n.stencilBuffer)
            ) {
              let r = 33189;
              if (i) {
                const e = n.depthTexture;
                e &&
                  e.isDepthTexture &&
                  (e.type === Rt ? (r = 36012) : e.type === Lt && (r = 33190));
                const i = I(n);
                t.renderbufferStorageMultisample(
                  36161,
                  i,
                  r,
                  n.width,
                  n.height
                );
              } else t.renderbufferStorage(36161, r, n.width, n.height);
              t.framebufferRenderbuffer(36160, 36096, 36161, e);
            } else if (n.depthBuffer && n.stencilBuffer) {
              if (i) {
                const e = I(n);
                t.renderbufferStorageMultisample(
                  36161,
                  e,
                  35056,
                  n.width,
                  n.height
                );
              } else t.renderbufferStorage(36161, 34041, n.width, n.height);
              t.framebufferRenderbuffer(36160, 33306, 36161, e);
            } else {
              const e =
                  !0 === n.isWebGLMultipleRenderTargets
                    ? n.texture[0]
                    : n.texture,
                r = o.convert(e.format),
                s = o.convert(e.type),
                a = _(e.internalFormat, r, s);
              if (i) {
                const e = I(n);
                t.renderbufferStorageMultisample(
                  36161,
                  e,
                  a,
                  n.width,
                  n.height
                );
              } else t.renderbufferStorage(36161, a, n.width, n.height);
            }
            t.bindRenderbuffer(36161, null);
          }
          function I(t) {
            return a && t.isWebGLMultisampleRenderTarget
              ? Math.min(h, t.samples)
              : 0;
          }
          let D = !1,
            B = !1;
          (this.allocateTextureUnit = function () {
            const t = S;
            return (
              t >= l &&
                console.warn(
                  "THREE.WebGLTextures: Trying to use " +
                    t +
                    " texture units while this GPU supports only " +
                    l
                ),
              (S += 1),
              t
            );
          }),
            (this.resetTextureUnits = function () {
              S = 0;
            }),
            (this.setTexture2D = E),
            (this.setTexture2DArray = function (t, e) {
              const r = i.get(t);
              t.version > 0 && r.__version !== t.version
                ? P(r, t, e)
                : (n.activeTexture(33984 + e),
                  n.bindTexture(35866, r.__webglTexture));
            }),
            (this.setTexture3D = function (t, e) {
              const r = i.get(t);
              t.version > 0 && r.__version !== t.version
                ? P(r, t, e)
                : (n.activeTexture(33984 + e),
                  n.bindTexture(32879, r.__webglTexture));
            }),
            (this.setTextureCube = T),
            (this.setupRenderTarget = function (e) {
              const l = e.texture,
                c = i.get(e),
                u = i.get(l);
              e.addEventListener("dispose", M),
                !0 !== e.isWebGLMultipleRenderTargets &&
                  ((u.__webglTexture = t.createTexture()),
                  (u.__version = l.version),
                  s.memory.textures++);
              const h = !0 === e.isWebGLCubeRenderTarget,
                d = !0 === e.isWebGLMultipleRenderTargets,
                p = !0 === e.isWebGLMultisampleRenderTarget,
                f = l.isDataTexture3D || l.isDataTexture2DArray,
                m = v(e) || a;
              if (
                (!a ||
                  l.format !== Nt ||
                  (l.type !== Rt && l.type !== Pt) ||
                  ((l.format = Ft),
                  console.warn(
                    "THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."
                  )),
                h)
              ) {
                c.__webglFramebuffer = [];
                for (let e = 0; e < 6; e++)
                  c.__webglFramebuffer[e] = t.createFramebuffer();
              } else if (((c.__webglFramebuffer = t.createFramebuffer()), d))
                if (r.drawBuffers) {
                  const n = e.texture;
                  for (let e = 0, r = n.length; e < r; e++) {
                    const r = i.get(n[e]);
                    void 0 === r.__webglTexture &&
                      ((r.__webglTexture = t.createTexture()),
                      s.memory.textures++);
                  }
                } else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension."
                  );
              else if (p)
                if (a) {
                  (c.__webglMultisampledFramebuffer = t.createFramebuffer()),
                    (c.__webglColorRenderbuffer = t.createRenderbuffer()),
                    t.bindRenderbuffer(36161, c.__webglColorRenderbuffer);
                  const i = o.convert(l.format),
                    r = o.convert(l.type),
                    s = _(l.internalFormat, i, r),
                    a = I(e);
                  t.renderbufferStorageMultisample(
                    36161,
                    a,
                    s,
                    e.width,
                    e.height
                  ),
                    n.bindFramebuffer(36160, c.__webglMultisampledFramebuffer),
                    t.framebufferRenderbuffer(
                      36160,
                      36064,
                      36161,
                      c.__webglColorRenderbuffer
                    ),
                    t.bindRenderbuffer(36161, null),
                    e.depthBuffer &&
                      ((c.__webglDepthRenderbuffer = t.createRenderbuffer()),
                      k(c.__webglDepthRenderbuffer, e, !0)),
                    n.bindFramebuffer(36160, null);
                } else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."
                  );
              if (h) {
                n.bindTexture(34067, u.__webglTexture), L(34067, l, m);
                for (let t = 0; t < 6; t++)
                  O(c.__webglFramebuffer[t], e, l, 36064, 34069 + t);
                y(l, m) && x(34067, l, e.width, e.height),
                  n.bindTexture(34067, null);
              } else if (d) {
                const t = e.texture;
                for (let r = 0, o = t.length; r < o; r++) {
                  const o = t[r],
                    s = i.get(o);
                  n.bindTexture(3553, s.__webglTexture),
                    L(3553, o, m),
                    O(c.__webglFramebuffer, e, o, 36064 + r, 3553),
                    y(o, m) && x(3553, o, e.width, e.height);
                }
                n.bindTexture(3553, null);
              } else {
                let t = 3553;
                f &&
                  (a
                    ? (t = l.isDataTexture3D ? 32879 : 35866)
                    : console.warn(
                        "THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2."
                      )),
                  n.bindTexture(t, u.__webglTexture),
                  L(t, l, m),
                  O(c.__webglFramebuffer, e, l, 36064, t),
                  y(l, m) && x(t, l, e.width, e.height, e.depth),
                  n.bindTexture(t, null);
              }
              e.depthBuffer &&
                (function (e) {
                  const r = i.get(e),
                    o = !0 === e.isWebGLCubeRenderTarget;
                  if (e.depthTexture) {
                    if (o)
                      throw new Error(
                        "target.depthTexture not supported in Cube render targets"
                      );
                    !(function (e, r) {
                      if (r && r.isWebGLCubeRenderTarget)
                        throw new Error(
                          "Depth Texture with cube render targets is not supported"
                        );
                      if (
                        (n.bindFramebuffer(36160, e),
                        !r.depthTexture || !r.depthTexture.isDepthTexture)
                      )
                        throw new Error(
                          "renderTarget.depthTexture must be an instance of THREE.DepthTexture"
                        );
                      (i.get(r.depthTexture).__webglTexture &&
                        r.depthTexture.image.width === r.width &&
                        r.depthTexture.image.height === r.height) ||
                        ((r.depthTexture.image.width = r.width),
                        (r.depthTexture.image.height = r.height),
                        (r.depthTexture.needsUpdate = !0)),
                        E(r.depthTexture, 0);
                      const o = i.get(r.depthTexture).__webglTexture;
                      if (r.depthTexture.format === Ut)
                        t.framebufferTexture2D(36160, 36096, 3553, o, 0);
                      else {
                        if (r.depthTexture.format !== Vt)
                          throw new Error("Unknown depthTexture format");
                        t.framebufferTexture2D(36160, 33306, 3553, o, 0);
                      }
                    })(r.__webglFramebuffer, e);
                  } else if (o) {
                    r.__webglDepthbuffer = [];
                    for (let i = 0; i < 6; i++)
                      n.bindFramebuffer(36160, r.__webglFramebuffer[i]),
                        (r.__webglDepthbuffer[i] = t.createRenderbuffer()),
                        k(r.__webglDepthbuffer[i], e, !1);
                  } else
                    n.bindFramebuffer(36160, r.__webglFramebuffer),
                      (r.__webglDepthbuffer = t.createRenderbuffer()),
                      k(r.__webglDepthbuffer, e, !1);
                  n.bindFramebuffer(36160, null);
                })(e);
            }),
            (this.updateRenderTargetMipmap = function (t) {
              const e = v(t) || a,
                r =
                  !0 === t.isWebGLMultipleRenderTargets
                    ? t.texture
                    : [t.texture];
              for (let o = 0, s = r.length; o < s; o++) {
                const s = r[o];
                if (y(s, e)) {
                  const e = t.isWebGLCubeRenderTarget ? 34067 : 3553,
                    r = i.get(s).__webglTexture;
                  n.bindTexture(e, r),
                    x(e, s, t.width, t.height),
                    n.bindTexture(e, null);
                }
              }
            }),
            (this.updateMultisampleRenderTarget = function (e) {
              if (e.isWebGLMultisampleRenderTarget)
                if (a) {
                  const r = e.width,
                    o = e.height;
                  let s = 16384;
                  e.depthBuffer && (s |= 256), e.stencilBuffer && (s |= 1024);
                  const a = i.get(e);
                  n.bindFramebuffer(36008, a.__webglMultisampledFramebuffer),
                    n.bindFramebuffer(36009, a.__webglFramebuffer),
                    t.blitFramebuffer(0, 0, r, o, 0, 0, r, o, s, 9728),
                    n.bindFramebuffer(36008, null),
                    n.bindFramebuffer(36009, a.__webglMultisampledFramebuffer);
                } else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."
                  );
            }),
            (this.safeSetTexture2D = function (t, e) {
              t &&
                t.isWebGLRenderTarget &&
                (!1 === D &&
                  (console.warn(
                    "THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."
                  ),
                  (D = !0)),
                (t = t.texture)),
                E(t, e);
            }),
            (this.safeSetTextureCube = function (t, e) {
              t &&
                t.isWebGLCubeRenderTarget &&
                (!1 === B &&
                  (console.warn(
                    "THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."
                  ),
                  (B = !0)),
                (t = t.texture)),
                T(t, e);
            });
        }
        function yl(t, e, n) {
          const i = n.isWebGL2;
          return {
            convert: function (t) {
              let n;
              if (t === St) return 5121;
              if (t === Ot) return 32819;
              if (t === kt) return 32820;
              if (t === It) return 33635;
              if (t === Et) return 5120;
              if (t === Tt) return 5122;
              if (t === At) return 5123;
              if (t === Ct) return 5124;
              if (t === Lt) return 5125;
              if (t === Rt) return 5126;
              if (t === Pt)
                return i
                  ? 5131
                  : ((n = e.get("OES_texture_half_float")),
                    null !== n ? n.HALF_FLOAT_OES : null);
              if (t === Bt) return 6406;
              if (t === Nt) return 6407;
              if (t === Ft) return 6408;
              if (t === zt) return 6409;
              if (t === Ht) return 6410;
              if (t === Ut) return 6402;
              if (t === Vt) return 34041;
              if (t === Gt) return 6403;
              if (t === Wt) return 36244;
              if (t === qt) return 33319;
              if (t === Xt) return 33320;
              if (t === Yt) return 36248;
              if (t === $t) return 36249;
              if (t === Kt || t === Jt || t === Zt || t === Qt) {
                if (((n = e.get("WEBGL_compressed_texture_s3tc")), null === n))
                  return null;
                if (t === Kt) return n.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (t === Jt) return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (t === Zt) return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (t === Qt) return n.COMPRESSED_RGBA_S3TC_DXT5_EXT;
              }
              if (t === te || t === ee || t === ne || t === ie) {
                if (((n = e.get("WEBGL_compressed_texture_pvrtc")), null === n))
                  return null;
                if (t === te) return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (t === ee) return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (t === ne) return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (t === ie) return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
              }
              if (t === re)
                return (
                  (n = e.get("WEBGL_compressed_texture_etc1")),
                  null !== n ? n.COMPRESSED_RGB_ETC1_WEBGL : null
                );
              if (
                (t === oe || t === se) &&
                ((n = e.get("WEBGL_compressed_texture_etc")), null !== n)
              ) {
                if (t === oe) return n.COMPRESSED_RGB8_ETC2;
                if (t === se) return n.COMPRESSED_RGBA8_ETC2_EAC;
              }
              return t === ae ||
                t === le ||
                t === ce ||
                t === ue ||
                t === he ||
                t === de ||
                t === pe ||
                t === fe ||
                t === me ||
                t === ge ||
                t === ve ||
                t === ye ||
                t === xe ||
                t === _e ||
                t === we ||
                t === Me ||
                t === Se ||
                t === Ee ||
                t === Te ||
                t === Ae ||
                t === Ce ||
                t === Le ||
                t === Re ||
                t === Pe ||
                t === Oe ||
                t === ke ||
                t === Ie ||
                t === De
                ? ((n = e.get("WEBGL_compressed_texture_astc")),
                  null !== n ? t : null)
                : t === be
                ? ((n = e.get("EXT_texture_compression_bptc")),
                  null !== n ? t : null)
                : t === Dt
                ? i
                  ? 34042
                  : ((n = e.get("WEBGL_depth_texture")),
                    null !== n ? n.UNSIGNED_INT_24_8_WEBGL : null)
                : void 0;
            },
          };
        }
        fl.prototype.isMeshDistanceMaterial = !0;
        class xl extends Ao {
          constructor(t = []) {
            super(), (this.cameras = t);
          }
        }
        xl.prototype.isArrayCamera = !0;
        class _l extends cr {
          constructor() {
            super(), (this.type = "Group");
          }
        }
        _l.prototype.isGroup = !0;
        const bl = { type: "move" };
        class wl {
          constructor() {
            (this._targetRay = null), (this._grip = null), (this._hand = null);
          }
          getHandSpace() {
            return (
              null === this._hand &&
                ((this._hand = new _l()),
                (this._hand.matrixAutoUpdate = !1),
                (this._hand.visible = !1),
                (this._hand.joints = {}),
                (this._hand.inputState = { pinching: !1 })),
              this._hand
            );
          }
          getTargetRaySpace() {
            return (
              null === this._targetRay &&
                ((this._targetRay = new _l()),
                (this._targetRay.matrixAutoUpdate = !1),
                (this._targetRay.visible = !1),
                (this._targetRay.hasLinearVelocity = !1),
                (this._targetRay.linearVelocity = new ai()),
                (this._targetRay.hasAngularVelocity = !1),
                (this._targetRay.angularVelocity = new ai())),
              this._targetRay
            );
          }
          getGripSpace() {
            return (
              null === this._grip &&
                ((this._grip = new _l()),
                (this._grip.matrixAutoUpdate = !1),
                (this._grip.visible = !1),
                (this._grip.hasLinearVelocity = !1),
                (this._grip.linearVelocity = new ai()),
                (this._grip.hasAngularVelocity = !1),
                (this._grip.angularVelocity = new ai())),
              this._grip
            );
          }
          dispatchEvent(t) {
            return (
              null !== this._targetRay && this._targetRay.dispatchEvent(t),
              null !== this._grip && this._grip.dispatchEvent(t),
              null !== this._hand && this._hand.dispatchEvent(t),
              this
            );
          }
          disconnect(t) {
            return (
              this.dispatchEvent({ type: "disconnected", data: t }),
              null !== this._targetRay && (this._targetRay.visible = !1),
              null !== this._grip && (this._grip.visible = !1),
              null !== this._hand && (this._hand.visible = !1),
              this
            );
          }
          update(t, e, n) {
            let i = null,
              r = null,
              o = null;
            const s = this._targetRay,
              a = this._grip,
              l = this._hand;
            if (t && "visible-blurred" !== e.session.visibilityState)
              if (
                (null !== s &&
                  ((i = e.getPose(t.targetRaySpace, n)),
                  null !== i &&
                    (s.matrix.fromArray(i.transform.matrix),
                    s.matrix.decompose(s.position, s.rotation, s.scale),
                    i.linearVelocity
                      ? ((s.hasLinearVelocity = !0),
                        s.linearVelocity.copy(i.linearVelocity))
                      : (s.hasLinearVelocity = !1),
                    i.angularVelocity
                      ? ((s.hasAngularVelocity = !0),
                        s.angularVelocity.copy(i.angularVelocity))
                      : (s.hasAngularVelocity = !1),
                    this.dispatchEvent(bl))),
                l && t.hand)
              ) {
                o = !0;
                for (const i of t.hand.values()) {
                  const t = e.getJointPose(i, n);
                  if (void 0 === l.joints[i.jointName]) {
                    const t = new _l();
                    (t.matrixAutoUpdate = !1),
                      (t.visible = !1),
                      (l.joints[i.jointName] = t),
                      l.add(t);
                  }
                  const r = l.joints[i.jointName];
                  null !== t &&
                    (r.matrix.fromArray(t.transform.matrix),
                    r.matrix.decompose(r.position, r.rotation, r.scale),
                    (r.jointRadius = t.radius)),
                    (r.visible = null !== t);
                }
                const i = l.joints["index-finger-tip"],
                  r = l.joints["thumb-tip"],
                  s = i.position.distanceTo(r.position),
                  a = 0.02,
                  c = 0.005;
                l.inputState.pinching && s > a + c
                  ? ((l.inputState.pinching = !1),
                    this.dispatchEvent({
                      type: "pinchend",
                      handedness: t.handedness,
                      target: this,
                    }))
                  : !l.inputState.pinching &&
                    s <= a - c &&
                    ((l.inputState.pinching = !0),
                    this.dispatchEvent({
                      type: "pinchstart",
                      handedness: t.handedness,
                      target: this,
                    }));
              } else
                null !== a &&
                  t.gripSpace &&
                  ((r = e.getPose(t.gripSpace, n)),
                  null !== r &&
                    (a.matrix.fromArray(r.transform.matrix),
                    a.matrix.decompose(a.position, a.rotation, a.scale),
                    r.linearVelocity
                      ? ((a.hasLinearVelocity = !0),
                        a.linearVelocity.copy(r.linearVelocity))
                      : (a.hasLinearVelocity = !1),
                    r.angularVelocity
                      ? ((a.hasAngularVelocity = !0),
                        a.angularVelocity.copy(r.angularVelocity))
                      : (a.hasAngularVelocity = !1)));
            return (
              null !== s && (s.visible = null !== i),
              null !== a && (a.visible = null !== r),
              null !== l && (l.visible = null !== o),
              this
            );
          }
        }
        class Ml extends Bn {
          constructor(t, e) {
            super();
            const n = this,
              i = t.state;
            let r = null,
              o = 1,
              s = null,
              a = "local-floor",
              l = null,
              c = null,
              u = null,
              h = null,
              d = null;
            const p = [],
              f = new Map(),
              m = new Ao();
            m.layers.enable(1), (m.viewport = new ni());
            const g = new Ao();
            g.layers.enable(2), (g.viewport = new ni());
            const v = [m, g],
              y = new xl();
            y.layers.enable(1), y.layers.enable(2);
            let x = null,
              _ = null;
            function b(t) {
              const e = f.get(t.inputSource);
              e && e.dispatchEvent({ type: t.type, data: t.inputSource });
            }
            function w() {
              f.forEach(function (t, e) {
                t.disconnect(e);
              }),
                f.clear(),
                (x = null),
                (_ = null),
                i.bindXRFramebuffer(null),
                t.setRenderTarget(t.getRenderTarget()),
                C.stop(),
                (n.isPresenting = !1),
                n.dispatchEvent({ type: "sessionend" });
            }
            function M(t) {
              const e = r.inputSources;
              for (let t = 0; t < p.length; t++) f.set(e[t], p[t]);
              for (let e = 0; e < t.removed.length; e++) {
                const n = t.removed[e],
                  i = f.get(n);
                i &&
                  (i.dispatchEvent({ type: "disconnected", data: n }),
                  f.delete(n));
              }
              for (let e = 0; e < t.added.length; e++) {
                const n = t.added[e],
                  i = f.get(n);
                i && i.dispatchEvent({ type: "connected", data: n });
              }
            }
            (this.cameraAutoUpdate = !0),
              (this.enabled = !1),
              (this.isPresenting = !1),
              (this.getController = function (t) {
                let e = p[t];
                return (
                  void 0 === e && ((e = new wl()), (p[t] = e)),
                  e.getTargetRaySpace()
                );
              }),
              (this.getControllerGrip = function (t) {
                let e = p[t];
                return (
                  void 0 === e && ((e = new wl()), (p[t] = e)), e.getGripSpace()
                );
              }),
              (this.getHand = function (t) {
                let e = p[t];
                return (
                  void 0 === e && ((e = new wl()), (p[t] = e)), e.getHandSpace()
                );
              }),
              (this.setFramebufferScaleFactor = function (t) {
                (o = t),
                  !0 === n.isPresenting &&
                    console.warn(
                      "THREE.WebXRManager: Cannot change framebuffer scale while presenting."
                    );
              }),
              (this.setReferenceSpaceType = function (t) {
                (a = t),
                  !0 === n.isPresenting &&
                    console.warn(
                      "THREE.WebXRManager: Cannot change reference space type while presenting."
                    );
              }),
              (this.getReferenceSpace = function () {
                return s;
              }),
              (this.getSession = function () {
                return r;
              }),
              (this.setSession = async function (t) {
                if (((r = t), null !== r)) {
                  r.addEventListener("select", b),
                    r.addEventListener("selectstart", b),
                    r.addEventListener("selectend", b),
                    r.addEventListener("squeeze", b),
                    r.addEventListener("squeezestart", b),
                    r.addEventListener("squeezeend", b),
                    r.addEventListener("end", w),
                    r.addEventListener("inputsourceschange", M);
                  const t = e.getContextAttributes();
                  if (
                    (!0 !== t.xrCompatible && (await e.makeXRCompatible()),
                    void 0 === r.renderState.layers)
                  ) {
                    const n = {
                      antialias: t.antialias,
                      alpha: t.alpha,
                      depth: t.depth,
                      stencil: t.stencil,
                      framebufferScaleFactor: o,
                    };
                    (d = new XRWebGLLayer(r, e, n)),
                      r.updateRenderState({ baseLayer: d });
                  } else {
                    let n = 0;
                    if (t.antialias) {
                      const n = {
                        antialias: !0,
                        alpha: t.alpha,
                        depth: t.depth,
                        stencil: t.stencil,
                        framebufferScaleFactor: o,
                      };
                      (d = new XRWebGLLayer(r, e, n)),
                        r.updateRenderState({ layers: [d] });
                    } else {
                      t.depth && (n = t.stencil ? 34041 : 6402);
                      const i = {
                        colorFormat: t.alpha ? 6408 : 6407,
                        depthFormat: n,
                        scaleFactor: o,
                      };
                      (c = new XRWebGLBinding(r, e)),
                        (h = c.createProjectionLayer(i)),
                        (u = e.createFramebuffer()),
                        r.updateRenderState({ layers: [h] });
                    }
                  }
                  (s = await r.requestReferenceSpace(a)),
                    C.setContext(r),
                    C.start(),
                    (n.isPresenting = !0),
                    n.dispatchEvent({ type: "sessionstart" });
                }
              });
            const S = new ai(),
              E = new ai();
            function T(t, e) {
              null === e
                ? t.matrixWorld.copy(t.matrix)
                : t.matrixWorld.multiplyMatrices(e.matrixWorld, t.matrix),
                t.matrixWorldInverse.copy(t.matrixWorld).invert();
            }
            (this.updateCamera = function (t) {
              if (null === r) return;
              (y.near = g.near = m.near = t.near),
                (y.far = g.far = m.far = t.far),
                (x === y.near && _ === y.far) ||
                  (r.updateRenderState({ depthNear: y.near, depthFar: y.far }),
                  (x = y.near),
                  (_ = y.far));
              const e = t.parent,
                n = y.cameras;
              T(y, e);
              for (let t = 0; t < n.length; t++) T(n[t], e);
              y.matrixWorld.decompose(y.position, y.quaternion, y.scale),
                t.position.copy(y.position),
                t.quaternion.copy(y.quaternion),
                t.scale.copy(y.scale),
                t.matrix.copy(y.matrix),
                t.matrixWorld.copy(y.matrixWorld);
              const i = t.children;
              for (let t = 0, e = i.length; t < e; t++)
                i[t].updateMatrixWorld(!0);
              2 === n.length
                ? (function (t, e, n) {
                    S.setFromMatrixPosition(e.matrixWorld),
                      E.setFromMatrixPosition(n.matrixWorld);
                    const i = S.distanceTo(E),
                      r = e.projectionMatrix.elements,
                      o = n.projectionMatrix.elements,
                      s = r[14] / (r[10] - 1),
                      a = r[14] / (r[10] + 1),
                      l = (r[9] + 1) / r[5],
                      c = (r[9] - 1) / r[5],
                      u = (r[8] - 1) / r[0],
                      h = (o[8] + 1) / o[0],
                      d = s * u,
                      p = s * h,
                      f = i / (-u + h),
                      m = f * -u;
                    e.matrixWorld.decompose(t.position, t.quaternion, t.scale),
                      t.translateX(m),
                      t.translateZ(f),
                      t.matrixWorld.compose(t.position, t.quaternion, t.scale),
                      t.matrixWorldInverse.copy(t.matrixWorld).invert();
                    const g = s + f,
                      v = a + f,
                      y = d - m,
                      x = p + (i - m),
                      _ = ((l * a) / v) * g,
                      b = ((c * a) / v) * g;
                    t.projectionMatrix.makePerspective(y, x, _, b, g, v);
                  })(y, m, g)
                : y.projectionMatrix.copy(m.projectionMatrix);
            }),
              (this.getCamera = function () {
                return y;
              }),
              (this.getFoveation = function () {
                return null !== h
                  ? h.fixedFoveation
                  : null !== d
                  ? d.fixedFoveation
                  : void 0;
              }),
              (this.setFoveation = function (t) {
                null !== h && (h.fixedFoveation = t),
                  null !== d &&
                    void 0 !== d.fixedFoveation &&
                    (d.fixedFoveation = t);
              });
            let A = null;
            const C = new zo();
            C.setAnimationLoop(function (t, n) {
              if (((l = n.getViewerPose(s)), null !== l)) {
                const t = l.views;
                null !== d && i.bindXRFramebuffer(d.framebuffer);
                let n = !1;
                t.length !== y.cameras.length &&
                  ((y.cameras.length = 0), (n = !0));
                for (let r = 0; r < t.length; r++) {
                  const o = t[r];
                  let s = null;
                  if (null !== d) s = d.getViewport(o);
                  else {
                    const t = c.getViewSubImage(h, o);
                    i.bindXRFramebuffer(u),
                      void 0 !== t.depthStencilTexture &&
                        e.framebufferTexture2D(
                          36160,
                          36096,
                          3553,
                          t.depthStencilTexture,
                          0
                        ),
                      e.framebufferTexture2D(
                        36160,
                        36064,
                        3553,
                        t.colorTexture,
                        0
                      ),
                      (s = t.viewport);
                  }
                  const a = v[r];
                  a.matrix.fromArray(o.transform.matrix),
                    a.projectionMatrix.fromArray(o.projectionMatrix),
                    a.viewport.set(s.x, s.y, s.width, s.height),
                    0 === r && y.matrix.copy(a.matrix),
                    !0 === n && y.cameras.push(a);
                }
              }
              const o = r.inputSources;
              for (let t = 0; t < p.length; t++) {
                const e = p[t],
                  i = o[t];
                e.update(i, n, s);
              }
              A && A(t, n);
            }),
              (this.setAnimationLoop = function (t) {
                A = t;
              }),
              (this.dispose = function () {});
          }
        }
        function Sl(t) {
          function e(e, n) {
            (e.opacity.value = n.opacity),
              n.color && e.diffuse.value.copy(n.color),
              n.emissive &&
                e.emissive.value
                  .copy(n.emissive)
                  .multiplyScalar(n.emissiveIntensity),
              n.map && (e.map.value = n.map),
              n.alphaMap && (e.alphaMap.value = n.alphaMap),
              n.specularMap && (e.specularMap.value = n.specularMap);
            const i = t.get(n).envMap;
            if (i) {
              (e.envMap.value = i),
                (e.flipEnvMap.value =
                  i.isCubeTexture && !1 === i.isRenderTargetTexture ? -1 : 1),
                (e.reflectivity.value = n.reflectivity),
                (e.refractionRatio.value = n.refractionRatio);
              const r = t.get(i).__maxMipLevel;
              void 0 !== r && (e.maxMipLevel.value = r);
            }
            let r, o;
            n.lightMap &&
              ((e.lightMap.value = n.lightMap),
              (e.lightMapIntensity.value = n.lightMapIntensity)),
              n.aoMap &&
                ((e.aoMap.value = n.aoMap),
                (e.aoMapIntensity.value = n.aoMapIntensity)),
              n.map
                ? (r = n.map)
                : n.specularMap
                ? (r = n.specularMap)
                : n.displacementMap
                ? (r = n.displacementMap)
                : n.normalMap
                ? (r = n.normalMap)
                : n.bumpMap
                ? (r = n.bumpMap)
                : n.roughnessMap
                ? (r = n.roughnessMap)
                : n.metalnessMap
                ? (r = n.metalnessMap)
                : n.alphaMap
                ? (r = n.alphaMap)
                : n.emissiveMap
                ? (r = n.emissiveMap)
                : n.clearcoatMap
                ? (r = n.clearcoatMap)
                : n.clearcoatNormalMap
                ? (r = n.clearcoatNormalMap)
                : n.clearcoatRoughnessMap
                ? (r = n.clearcoatRoughnessMap)
                : n.specularIntensityMap
                ? (r = n.specularIntensityMap)
                : n.specularTintMap && (r = n.specularTintMap),
              void 0 !== r &&
                (r.isWebGLRenderTarget && (r = r.texture),
                !0 === r.matrixAutoUpdate && r.updateMatrix(),
                e.uvTransform.value.copy(r.matrix)),
              n.aoMap ? (o = n.aoMap) : n.lightMap && (o = n.lightMap),
              void 0 !== o &&
                (o.isWebGLRenderTarget && (o = o.texture),
                !0 === o.matrixAutoUpdate && o.updateMatrix(),
                e.uv2Transform.value.copy(o.matrix));
          }
          function n(e, n) {
            (e.roughness.value = n.roughness),
              (e.metalness.value = n.metalness),
              n.roughnessMap && (e.roughnessMap.value = n.roughnessMap),
              n.metalnessMap && (e.metalnessMap.value = n.metalnessMap),
              n.emissiveMap && (e.emissiveMap.value = n.emissiveMap),
              n.bumpMap &&
                ((e.bumpMap.value = n.bumpMap),
                (e.bumpScale.value = n.bumpScale),
                n.side === m && (e.bumpScale.value *= -1)),
              n.normalMap &&
                ((e.normalMap.value = n.normalMap),
                e.normalScale.value.copy(n.normalScale),
                n.side === m && e.normalScale.value.negate()),
              n.displacementMap &&
                ((e.displacementMap.value = n.displacementMap),
                (e.displacementScale.value = n.displacementScale),
                (e.displacementBias.value = n.displacementBias)),
              t.get(n).envMap && (e.envMapIntensity.value = n.envMapIntensity);
          }
          return {
            refreshFogUniforms: function (t, e) {
              t.fogColor.value.copy(e.color),
                e.isFog
                  ? ((t.fogNear.value = e.near), (t.fogFar.value = e.far))
                  : e.isFogExp2 && (t.fogDensity.value = e.density);
            },
            refreshMaterialUniforms: function (t, i, r, o, s) {
              i.isMeshBasicMaterial
                ? e(t, i)
                : i.isMeshLambertMaterial
                ? (e(t, i),
                  (function (t, e) {
                    e.emissiveMap && (t.emissiveMap.value = e.emissiveMap);
                  })(t, i))
                : i.isMeshToonMaterial
                ? (e(t, i),
                  (function (t, e) {
                    e.gradientMap && (t.gradientMap.value = e.gradientMap),
                      e.emissiveMap && (t.emissiveMap.value = e.emissiveMap),
                      e.bumpMap &&
                        ((t.bumpMap.value = e.bumpMap),
                        (t.bumpScale.value = e.bumpScale),
                        e.side === m && (t.bumpScale.value *= -1)),
                      e.normalMap &&
                        ((t.normalMap.value = e.normalMap),
                        t.normalScale.value.copy(e.normalScale),
                        e.side === m && t.normalScale.value.negate()),
                      e.displacementMap &&
                        ((t.displacementMap.value = e.displacementMap),
                        (t.displacementScale.value = e.displacementScale),
                        (t.displacementBias.value = e.displacementBias));
                  })(t, i))
                : i.isMeshPhongMaterial
                ? (e(t, i),
                  (function (t, e) {
                    t.specular.value.copy(e.specular),
                      (t.shininess.value = Math.max(e.shininess, 1e-4)),
                      e.emissiveMap && (t.emissiveMap.value = e.emissiveMap),
                      e.bumpMap &&
                        ((t.bumpMap.value = e.bumpMap),
                        (t.bumpScale.value = e.bumpScale),
                        e.side === m && (t.bumpScale.value *= -1)),
                      e.normalMap &&
                        ((t.normalMap.value = e.normalMap),
                        t.normalScale.value.copy(e.normalScale),
                        e.side === m && t.normalScale.value.negate()),
                      e.displacementMap &&
                        ((t.displacementMap.value = e.displacementMap),
                        (t.displacementScale.value = e.displacementScale),
                        (t.displacementBias.value = e.displacementBias));
                  })(t, i))
                : i.isMeshStandardMaterial
                ? (e(t, i),
                  i.isMeshPhysicalMaterial
                    ? (function (t, e, i) {
                        n(t, e),
                          (t.reflectivity.value = e.reflectivity),
                          (t.clearcoat.value = e.clearcoat),
                          (t.clearcoatRoughness.value = e.clearcoatRoughness),
                          e.sheen && t.sheen.value.copy(e.sheen),
                          e.clearcoatMap &&
                            (t.clearcoatMap.value = e.clearcoatMap),
                          e.clearcoatRoughnessMap &&
                            (t.clearcoatRoughnessMap.value =
                              e.clearcoatRoughnessMap),
                          e.clearcoatNormalMap &&
                            (t.clearcoatNormalScale.value.copy(
                              e.clearcoatNormalScale
                            ),
                            (t.clearcoatNormalMap.value = e.clearcoatNormalMap),
                            e.side === m &&
                              t.clearcoatNormalScale.value.negate()),
                          (t.transmission.value = e.transmission),
                          e.transmissionMap &&
                            (t.transmissionMap.value = e.transmissionMap),
                          e.transmission > 0 &&
                            ((t.transmissionSamplerMap.value = i.texture),
                            t.transmissionSamplerSize.value.set(
                              i.width,
                              i.height
                            )),
                          (t.thickness.value = e.thickness),
                          e.thicknessMap &&
                            (t.thicknessMap.value = e.thicknessMap),
                          (t.attenuationDistance.value = e.attenuationDistance),
                          t.attenuationTint.value.copy(e.attenuationTint),
                          (t.specularIntensity.value = e.specularIntensity),
                          t.specularTint.value.copy(e.specularTint),
                          e.specularIntensityMap &&
                            (t.specularIntensityMap.value =
                              e.specularIntensityMap),
                          e.specularTintMap &&
                            (t.specularTintMap.value = e.specularTintMap);
                      })(t, i, s)
                    : n(t, i))
                : i.isMeshMatcapMaterial
                ? (e(t, i),
                  (function (t, e) {
                    e.matcap && (t.matcap.value = e.matcap),
                      e.bumpMap &&
                        ((t.bumpMap.value = e.bumpMap),
                        (t.bumpScale.value = e.bumpScale),
                        e.side === m && (t.bumpScale.value *= -1)),
                      e.normalMap &&
                        ((t.normalMap.value = e.normalMap),
                        t.normalScale.value.copy(e.normalScale),
                        e.side === m && t.normalScale.value.negate()),
                      e.displacementMap &&
                        ((t.displacementMap.value = e.displacementMap),
                        (t.displacementScale.value = e.displacementScale),
                        (t.displacementBias.value = e.displacementBias));
                  })(t, i))
                : i.isMeshDepthMaterial
                ? (e(t, i),
                  (function (t, e) {
                    e.displacementMap &&
                      ((t.displacementMap.value = e.displacementMap),
                      (t.displacementScale.value = e.displacementScale),
                      (t.displacementBias.value = e.displacementBias));
                  })(t, i))
                : i.isMeshDistanceMaterial
                ? (e(t, i),
                  (function (t, e) {
                    e.displacementMap &&
                      ((t.displacementMap.value = e.displacementMap),
                      (t.displacementScale.value = e.displacementScale),
                      (t.displacementBias.value = e.displacementBias)),
                      t.referencePosition.value.copy(e.referencePosition),
                      (t.nearDistance.value = e.nearDistance),
                      (t.farDistance.value = e.farDistance);
                  })(t, i))
                : i.isMeshNormalMaterial
                ? (e(t, i),
                  (function (t, e) {
                    e.bumpMap &&
                      ((t.bumpMap.value = e.bumpMap),
                      (t.bumpScale.value = e.bumpScale),
                      e.side === m && (t.bumpScale.value *= -1)),
                      e.normalMap &&
                        ((t.normalMap.value = e.normalMap),
                        t.normalScale.value.copy(e.normalScale),
                        e.side === m && t.normalScale.value.negate()),
                      e.displacementMap &&
                        ((t.displacementMap.value = e.displacementMap),
                        (t.displacementScale.value = e.displacementScale),
                        (t.displacementBias.value = e.displacementBias));
                  })(t, i))
                : i.isLineBasicMaterial
                ? ((function (t, e) {
                    t.diffuse.value.copy(e.color),
                      (t.opacity.value = e.opacity);
                  })(t, i),
                  i.isLineDashedMaterial &&
                    (function (t, e) {
                      (t.dashSize.value = e.dashSize),
                        (t.totalSize.value = e.dashSize + e.gapSize),
                        (t.scale.value = e.scale);
                    })(t, i))
                : i.isPointsMaterial
                ? (function (t, e, n, i) {
                    let r;
                    t.diffuse.value.copy(e.color),
                      (t.opacity.value = e.opacity),
                      (t.size.value = e.size * n),
                      (t.scale.value = 0.5 * i),
                      e.map && (t.map.value = e.map),
                      e.alphaMap && (t.alphaMap.value = e.alphaMap),
                      e.map ? (r = e.map) : e.alphaMap && (r = e.alphaMap),
                      void 0 !== r &&
                        (!0 === r.matrixAutoUpdate && r.updateMatrix(),
                        t.uvTransform.value.copy(r.matrix));
                  })(t, i, r, o)
                : i.isSpriteMaterial
                ? (function (t, e) {
                    let n;
                    t.diffuse.value.copy(e.color),
                      (t.opacity.value = e.opacity),
                      (t.rotation.value = e.rotation),
                      e.map && (t.map.value = e.map),
                      e.alphaMap && (t.alphaMap.value = e.alphaMap),
                      e.map ? (n = e.map) : e.alphaMap && (n = e.alphaMap),
                      void 0 !== n &&
                        (!0 === n.matrixAutoUpdate && n.updateMatrix(),
                        t.uvTransform.value.copy(n.matrix));
                  })(t, i)
                : i.isShadowMaterial
                ? (t.color.value.copy(i.color), (t.opacity.value = i.opacity))
                : i.isShaderMaterial && (i.uniformsNeedUpdate = !1);
            },
          };
        }
        function El(t = {}) {
          const e =
              void 0 !== t.canvas
                ? t.canvas
                : (function () {
                    const t = document.createElementNS(
                      "http://www.w3.org/1999/xhtml",
                      "canvas"
                    );
                    return (
                      (t.className = "three_canvas"),
                      (t.id = "three"),
                      (t.style.display = "block"),
                      t
                    );
                  })(),
            n = void 0 !== t.context ? t.context : null,
            i = void 0 !== t.alpha && t.alpha,
            r = void 0 === t.depth || t.depth,
            o = void 0 === t.stencil || t.stencil,
            s = void 0 !== t.antialias && t.antialias,
            a = void 0 === t.premultipliedAlpha || t.premultipliedAlpha,
            l = void 0 !== t.preserveDrawingBuffer && t.preserveDrawingBuffer,
            c = void 0 !== t.powerPreference ? t.powerPreference : "default",
            u =
              void 0 !== t.failIfMajorPerformanceCaveat &&
              t.failIfMajorPerformanceCaveat;
          let h = null,
            d = null;
          const p = [],
            v = [];
          (this.domElement = e),
            (this.debug = { checkShaderErrors: !0 }),
            (this.autoClear = !0),
            (this.autoClearColor = !0),
            (this.autoClearDepth = !0),
            (this.autoClearStencil = !0),
            (this.sortObjects = !0),
            (this.clippingPlanes = []),
            (this.localClippingEnabled = !1),
            (this.gammaFactor = 2),
            (this.outputEncoding = Ke),
            (this.physicallyCorrectLights = !1),
            (this.toneMapping = Z),
            (this.toneMappingExposure = 1);
          const y = this;
          let x = !1,
            _ = 0,
            b = 0,
            w = null,
            M = -1,
            S = null;
          const E = new ni(),
            T = new ni();
          let A = null,
            C = e.width,
            L = e.height,
            R = 1,
            P = null,
            O = null;
          const k = new ni(0, 0, C, L),
            I = new ni(0, 0, C, L);
          let D = !1;
          const B = [],
            N = new Fo();
          let F = !1,
            z = !1,
            H = null;
          const j = new Fi(),
            U = new ai(),
            V = {
              background: null,
              fog: null,
              environment: null,
              overrideMaterial: null,
              isScene: !0,
            };
          function G() {
            return null === w ? R : 1;
          }
          let W,
            q,
            X,
            Y,
            $,
            K,
            J,
            Q,
            tt,
            et,
            nt,
            it,
            rt,
            ot,
            st,
            at,
            lt,
            ct,
            ut,
            ht,
            pt,
            mt,
            gt,
            vt = n;
          function yt(t, n) {
            for (let i = 0; i < t.length; i++) {
              const r = t[i],
                o = e.getContext(r, n);
              if (null !== o) return o;
            }
            return null;
          }
          try {
            const t = {
              alpha: i,
              depth: r,
              stencil: o,
              antialias: s,
              premultipliedAlpha: a,
              preserveDrawingBuffer: l,
              powerPreference: c,
              failIfMajorPerformanceCaveat: u,
            };
            if (
              (e.addEventListener("webglcontextlost", bt, !1),
              e.addEventListener("webglcontextrestored", Mt, !1),
              null === vt)
            ) {
              const e = ["webgl2", "webgl", "experimental-webgl"];
              if (
                (!0 === y.isWebGL1Renderer && e.shift(),
                (vt = yt(e, t)),
                null === vt)
              )
                throw yt(e)
                  ? new Error(
                      "Error creating WebGL context with your selected attributes."
                    )
                  : new Error("Error creating WebGL context.");
            }
            void 0 === vt.getShaderPrecisionFormat &&
              (vt.getShaderPrecisionFormat = function () {
                return { rangeMin: 1, rangeMax: 1, precision: 1 };
              });
          } catch (t) {
            throw (console.error("THREE.WebGLRenderer: " + t.message), t);
          }
          function xt() {
            (W = new Ms(vt)),
              (q = new Yo(vt, W, t)),
              W.init(q),
              (mt = new yl(vt, W, q)),
              (X = new gl(vt, W, q)),
              (B[0] = 1029),
              (Y = new Ts(vt)),
              ($ = new nl()),
              (K = new vl(vt, W, X, $, q, mt, Y)),
              (J = new Ko(y)),
              (Q = new ws(y)),
              (tt = new Ho(vt, q)),
              (gt = new qo(vt, W, tt, q)),
              (et = new Ss(vt, tt, Y, gt)),
              (nt = new Rs(vt, et, tt, Y)),
              (ut = new Ls(vt)),
              (at = new $o($)),
              (it = new el(y, J, Q, W, q, gt, at)),
              (rt = new Sl($)),
              (ot = new sl($)),
              (st = new dl(W, q)),
              (ct = new Wo(y, J, X, nt, a)),
              (lt = new ml(y, nt, q)),
              (ht = new Xo(vt, W, Y, q)),
              (pt = new Es(vt, W, Y, q)),
              (Y.programs = it.programs),
              (y.capabilities = q),
              (y.extensions = W),
              (y.properties = $),
              (y.renderLists = ot),
              (y.shadowMap = lt),
              (y.state = X),
              (y.info = Y);
          }
          xt();
          const _t = new Ml(y, vt);
          function bt(t) {
            t.preventDefault(),
              console.log("THREE.WebGLRenderer: Context Lost."),
              (x = !0);
          }
          function Mt() {
            console.log("THREE.WebGLRenderer: Context Restored."), (x = !1);
            const t = Y.autoReset,
              e = lt.enabled,
              n = lt.autoUpdate,
              i = lt.needsUpdate,
              r = lt.type;
            xt(),
              (Y.autoReset = t),
              (lt.enabled = e),
              (lt.autoUpdate = n),
              (lt.needsUpdate = i),
              (lt.type = r);
          }
          function Et(t) {
            const e = t.target;
            e.removeEventListener("dispose", Et),
              (function (t) {
                (function (t) {
                  const e = $.get(t).programs;
                  void 0 !== e &&
                    e.forEach(function (t) {
                      it.releaseProgram(t);
                    });
                })(t),
                  $.remove(t);
              })(e);
          }
          (this.xr = _t),
            (this.getContext = function () {
              return vt;
            }),
            (this.getContextAttributes = function () {
              return vt.getContextAttributes();
            }),
            (this.forceContextLoss = function () {
              const t = W.get("WEBGL_lose_context");
              t && t.loseContext();
            }),
            (this.forceContextRestore = function () {
              const t = W.get("WEBGL_lose_context");
              t && t.restoreContext();
            }),
            (this.getPixelRatio = function () {
              return R;
            }),
            (this.setPixelRatio = function (t) {
              void 0 !== t && ((R = t), this.setSize(C, L, !1));
            }),
            (this.getSize = function (t) {
              return t.set(C, L);
            }),
            (this.setSize = function (t, n, i) {
              _t.isPresenting
                ? console.warn(
                    "THREE.WebGLRenderer: Can't change size while VR device is presenting."
                  )
                : ((C = t),
                  (L = n),
                  (e.width = Math.floor(t * R)),
                  (e.height = Math.floor(n * R)),
                  !1 !== i &&
                    ((e.style.width = t + "px"), (e.style.height = n + "px")),
                  this.setViewport(0, 0, t, n));
            }),
            (this.getDrawingBufferSize = function (t) {
              return t.set(C * R, L * R).floor();
            }),
            (this.setDrawingBufferSize = function (t, n, i) {
              (C = t),
                (L = n),
                (R = i),
                (e.width = Math.floor(t * i)),
                (e.height = Math.floor(n * i)),
                this.setViewport(0, 0, t, n);
            }),
            (this.getCurrentViewport = function (t) {
              return t.copy(E);
            }),
            (this.getViewport = function (t) {
              return t.copy(k);
            }),
            (this.setViewport = function (t, e, n, i) {
              t.isVector4 ? k.set(t.x, t.y, t.z, t.w) : k.set(t, e, n, i),
                X.viewport(E.copy(k).multiplyScalar(R).floor());
            }),
            (this.getScissor = function (t) {
              return t.copy(I);
            }),
            (this.setScissor = function (t, e, n, i) {
              t.isVector4 ? I.set(t.x, t.y, t.z, t.w) : I.set(t, e, n, i),
                X.scissor(T.copy(I).multiplyScalar(R).floor());
            }),
            (this.getScissorTest = function () {
              return D;
            }),
            (this.setScissorTest = function (t) {
              X.setScissorTest((D = t));
            }),
            (this.setOpaqueSort = function (t) {
              P = t;
            }),
            (this.setTransparentSort = function (t) {
              O = t;
            }),
            (this.getClearColor = function (t) {
              return t.copy(ct.getClearColor());
            }),
            (this.setClearColor = function () {
              ct.setClearColor.apply(ct, arguments);
            }),
            (this.getClearAlpha = function () {
              return ct.getClearAlpha();
            }),
            (this.setClearAlpha = function () {
              ct.setClearAlpha.apply(ct, arguments);
            }),
            (this.clear = function (t, e, n) {
              let i = 0;
              (void 0 === t || t) && (i |= 16384),
                (void 0 === e || e) && (i |= 256),
                (void 0 === n || n) && (i |= 1024),
                vt.clear(i);
            }),
            (this.clearColor = function () {
              this.clear(!0, !1, !1);
            }),
            (this.clearDepth = function () {
              this.clear(!1, !0, !1);
            }),
            (this.clearStencil = function () {
              this.clear(!1, !1, !0);
            }),
            (this.dispose = function () {
              e.removeEventListener("webglcontextlost", bt, !1),
                e.removeEventListener("webglcontextrestored", Mt, !1),
                ot.dispose(),
                st.dispose(),
                $.dispose(),
                J.dispose(),
                Q.dispose(),
                nt.dispose(),
                gt.dispose(),
                _t.dispose(),
                _t.removeEventListener("sessionstart", At),
                _t.removeEventListener("sessionend", Ct),
                H && (H.dispose(), (H = null)),
                Lt.stop();
            }),
            (this.renderBufferImmediate = function (t, e) {
              gt.initAttributes();
              const n = $.get(t);
              t.hasPositions && !n.position && (n.position = vt.createBuffer()),
                t.hasNormals && !n.normal && (n.normal = vt.createBuffer()),
                t.hasUvs && !n.uv && (n.uv = vt.createBuffer()),
                t.hasColors && !n.color && (n.color = vt.createBuffer());
              const i = e.getAttributes();
              t.hasPositions &&
                (vt.bindBuffer(34962, n.position),
                vt.bufferData(34962, t.positionArray, 35048),
                gt.enableAttribute(i.position),
                vt.vertexAttribPointer(i.position, 3, 5126, !1, 0, 0)),
                t.hasNormals &&
                  (vt.bindBuffer(34962, n.normal),
                  vt.bufferData(34962, t.normalArray, 35048),
                  gt.enableAttribute(i.normal),
                  vt.vertexAttribPointer(i.normal, 3, 5126, !1, 0, 0)),
                t.hasUvs &&
                  (vt.bindBuffer(34962, n.uv),
                  vt.bufferData(34962, t.uvArray, 35048),
                  gt.enableAttribute(i.uv),
                  vt.vertexAttribPointer(i.uv, 2, 5126, !1, 0, 0)),
                t.hasColors &&
                  (vt.bindBuffer(34962, n.color),
                  vt.bufferData(34962, t.colorArray, 35048),
                  gt.enableAttribute(i.color),
                  vt.vertexAttribPointer(i.color, 3, 5126, !1, 0, 0)),
                gt.disableUnusedAttributes(),
                vt.drawArrays(4, 0, t.count),
                (t.count = 0);
            }),
            (this.renderBufferDirect = function (t, e, n, i, r, o) {
              null === e && (e = V);
              const s = r.isMesh && r.matrixWorld.determinant() < 0,
                a = Nt(t, e, i, r);
              X.setMaterial(i, s);
              let l = n.index;
              const c = n.attributes.position;
              if (null === l) {
                if (void 0 === c || 0 === c.count) return;
              } else if (0 === l.count) return;
              let u,
                h = 1;
              !0 === i.wireframe &&
                ((l = et.getWireframeAttribute(n)), (h = 2)),
                (void 0 === n.morphAttributes.position &&
                  void 0 === n.morphAttributes.normal) ||
                  ut.update(r, n, i, a),
                gt.setup(r, i, a, n, l);
              let d = ht;
              null !== l && ((u = tt.get(l)), (d = pt), d.setIndex(u));
              const p = null !== l ? l.count : c.count,
                f = n.drawRange.start * h,
                m = n.drawRange.count * h,
                g = null !== o ? o.start * h : 0,
                v = null !== o ? o.count * h : 1 / 0,
                y = Math.max(f, g),
                x = Math.min(p, f + m, g + v) - 1,
                _ = Math.max(0, x - y + 1);
              if (0 !== _) {
                if (r.isMesh)
                  !0 === i.wireframe
                    ? (X.setLineWidth(i.wireframeLinewidth * G()), d.setMode(1))
                    : d.setMode(4);
                else if (r.isLine) {
                  let t = i.linewidth;
                  void 0 === t && (t = 1),
                    X.setLineWidth(t * G()),
                    r.isLineSegments
                      ? d.setMode(1)
                      : r.isLineLoop
                      ? d.setMode(2)
                      : d.setMode(3);
                } else r.isPoints ? d.setMode(0) : r.isSprite && d.setMode(4);
                if (r.isInstancedMesh) d.renderInstances(y, _, r.count);
                else if (n.isInstancedBufferGeometry) {
                  const t = Math.min(n.instanceCount, n._maxInstanceCount);
                  d.renderInstances(y, _, t);
                } else d.render(y, _);
              }
            }),
            (this.compile = function (t, e) {
              (d = st.get(t)),
                d.init(),
                v.push(d),
                t.traverseVisible(function (t) {
                  t.isLight &&
                    t.layers.test(e.layers) &&
                    (d.pushLight(t), t.castShadow && d.pushShadow(t));
                }),
                d.setupLights(),
                t.traverse(function (e) {
                  const n = e.material;
                  if (n)
                    if (Array.isArray(n))
                      for (let i = 0; i < n.length; i++) Dt(n[i], t, e);
                    else Dt(n, t, e);
                }),
                v.pop(),
                (d = null);
            });
          let Tt = null;
          function At() {
            Lt.stop();
          }
          function Ct() {
            Lt.start();
          }
          const Lt = new zo();
          function Ot(t, e, n, i) {
            if (!1 === t.visible) return;
            if (t.layers.test(e.layers))
              if (t.isGroup) n = t.renderOrder;
              else if (t.isLOD) !0 === t.autoUpdate && t.update(e);
              else if (t.isLight)
                d.pushLight(t), t.castShadow && d.pushShadow(t);
              else if (t.isSprite) {
                if (!t.frustumCulled || N.intersectsSprite(t)) {
                  i && U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);
                  const e = nt.update(t),
                    r = t.material;
                  r.visible && h.push(t, e, r, n, U.z, null);
                }
              } else if (t.isImmediateRenderObject)
                i && U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j),
                  h.push(t, null, t.material, n, U.z, null);
              else if (
                (t.isMesh || t.isLine || t.isPoints) &&
                (t.isSkinnedMesh &&
                  t.skeleton.frame !== Y.render.frame &&
                  (t.skeleton.update(), (t.skeleton.frame = Y.render.frame)),
                !t.frustumCulled || N.intersectsObject(t))
              ) {
                i && U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);
                const e = nt.update(t),
                  r = t.material;
                if (Array.isArray(r)) {
                  const i = e.groups;
                  for (let o = 0, s = i.length; o < s; o++) {
                    const s = i[o],
                      a = r[s.materialIndex];
                    a && a.visible && h.push(t, e, a, n, U.z, s);
                  }
                } else r.visible && h.push(t, e, r, n, U.z, null);
              }
            const r = t.children;
            for (let t = 0, o = r.length; t < o; t++) Ot(r[t], e, n, i);
          }
          function kt(t, e, n) {
            const i = !0 === e.isScene ? e.overrideMaterial : null;
            if (n.isArrayCamera) {
              const r = n.cameras;
              for (let n = 0, o = r.length; n < o; n++) {
                const o = r[n];
                X.viewport(E.copy(o.viewport)), d.setupLightsView(o);
                for (let n = 0, r = t.length; n < r; n++) {
                  const r = t[n],
                    s = r.object,
                    a = r.geometry,
                    l = null === i ? r.material : i,
                    c = r.group;
                  s.layers.test(o.layers) && It(s, e, o, a, l, c);
                }
              }
            } else
              for (let r = 0, o = t.length; r < o; r++) {
                const o = t[r];
                It(
                  o.object,
                  e,
                  n,
                  o.geometry,
                  null === i ? o.material : i,
                  o.group
                );
              }
          }
          function It(t, e, n, i, r, o) {
            if (
              (t.onBeforeRender(y, e, n, i, r, o),
              t.modelViewMatrix.multiplyMatrices(
                n.matrixWorldInverse,
                t.matrixWorld
              ),
              t.normalMatrix.getNormalMatrix(t.modelViewMatrix),
              t.isImmediateRenderObject)
            ) {
              const i = Nt(n, e, r, t);
              X.setMaterial(r),
                gt.reset(),
                (function (t, e) {
                  t.render(function (t) {
                    y.renderBufferImmediate(t, e);
                  });
                })(t, i);
            } else
              !0 === r.transparent && r.side === g
                ? ((r.side = m),
                  (r.needsUpdate = !0),
                  y.renderBufferDirect(n, e, i, r, t, o),
                  (r.side = f),
                  (r.needsUpdate = !0),
                  y.renderBufferDirect(n, e, i, r, t, o),
                  (r.side = g))
                : y.renderBufferDirect(n, e, i, r, t, o);
            t.onAfterRender(y, e, n, i, r, o);
          }
          function Dt(t, e, n) {
            !0 !== e.isScene && (e = V);
            const i = $.get(t),
              r = d.state.lights,
              o = d.state.shadowsArray,
              s = r.state.version,
              a = it.getParameters(t, r.state, o, e, n),
              l = it.getProgramCacheKey(a);
            let c = i.programs;
            (i.environment = t.isMeshStandardMaterial ? e.environment : null),
              (i.fog = e.fog),
              (i.envMap = (t.isMeshStandardMaterial ? Q : J).get(
                t.envMap || i.environment
              )),
              void 0 === c &&
                (t.addEventListener("dispose", Et),
                (c = new Map()),
                (i.programs = c));
            let u = c.get(l);
            if (void 0 !== u) {
              if (i.currentProgram === u && i.lightsStateVersion === s)
                return Bt(t, a), u;
            } else
              (a.uniforms = it.getUniforms(t)),
                t.onBuild(a, y),
                t.onBeforeCompile(a, y),
                (u = it.acquireProgram(a, l)),
                c.set(l, u),
                (i.uniforms = a.uniforms);
            const h = i.uniforms;
            ((t.isShaderMaterial || t.isRawShaderMaterial) &&
              !0 !== t.clipping) ||
              (h.clippingPlanes = at.uniform),
              Bt(t, a),
              (i.needsLights = (function (t) {
                return (
                  t.isMeshLambertMaterial ||
                  t.isMeshToonMaterial ||
                  t.isMeshPhongMaterial ||
                  t.isMeshStandardMaterial ||
                  t.isShadowMaterial ||
                  (t.isShaderMaterial && !0 === t.lights)
                );
              })(t)),
              (i.lightsStateVersion = s),
              i.needsLights &&
                ((h.ambientLightColor.value = r.state.ambient),
                (h.lightProbe.value = r.state.probe),
                (h.directionalLights.value = r.state.directional),
                (h.directionalLightShadows.value = r.state.directionalShadow),
                (h.spotLights.value = r.state.spot),
                (h.spotLightShadows.value = r.state.spotShadow),
                (h.rectAreaLights.value = r.state.rectArea),
                (h.ltc_1.value = r.state.rectAreaLTC1),
                (h.ltc_2.value = r.state.rectAreaLTC2),
                (h.pointLights.value = r.state.point),
                (h.pointLightShadows.value = r.state.pointShadow),
                (h.hemisphereLights.value = r.state.hemi),
                (h.directionalShadowMap.value = r.state.directionalShadowMap),
                (h.directionalShadowMatrix.value =
                  r.state.directionalShadowMatrix),
                (h.spotShadowMap.value = r.state.spotShadowMap),
                (h.spotShadowMatrix.value = r.state.spotShadowMatrix),
                (h.pointShadowMap.value = r.state.pointShadowMap),
                (h.pointShadowMatrix.value = r.state.pointShadowMatrix));
            const p = u.getUniforms(),
              f = Ia.seqWithValue(p.seq, h);
            return (i.currentProgram = u), (i.uniformsList = f), u;
          }
          function Bt(t, e) {
            const n = $.get(t);
            (n.outputEncoding = e.outputEncoding),
              (n.instancing = e.instancing),
              (n.skinning = e.skinning),
              (n.morphTargets = e.morphTargets),
              (n.morphNormals = e.morphNormals),
              (n.numClippingPlanes = e.numClippingPlanes),
              (n.numIntersection = e.numClipIntersection),
              (n.vertexAlphas = e.vertexAlphas),
              (n.vertexTangents = e.vertexTangents);
          }
          function Nt(t, e, n, i) {
            !0 !== e.isScene && (e = V), K.resetTextureUnits();
            const r = e.fog,
              o = n.isMeshStandardMaterial ? e.environment : null,
              s = null === w ? y.outputEncoding : w.texture.encoding,
              a = (n.isMeshStandardMaterial ? Q : J).get(n.envMap || o),
              l =
                !0 === n.vertexColors &&
                i.geometry &&
                i.geometry.attributes.color &&
                4 === i.geometry.attributes.color.itemSize,
              c = i.geometry && i.geometry.attributes.tangent,
              u = i.geometry && i.geometry.morphAttributes.position,
              h = i.geometry && i.geometry.morphAttributes.normal,
              p = $.get(n),
              f = d.state.lights;
            if (!0 === F && (!0 === z || t !== S)) {
              const e = t === S && n.id === M;
              at.setState(n, t, e);
            }
            let m = !1;
            n.version === p.__version
              ? (p.needsLights && p.lightsStateVersion !== f.state.version) ||
                p.outputEncoding !== s ||
                (i.isInstancedMesh && !1 === p.instancing)
                ? (m = !0)
                : i.isInstancedMesh || !0 !== p.instancing
                ? i.isSkinnedMesh && !1 === p.skinning
                  ? (m = !0)
                  : i.isSkinnedMesh || !0 !== p.skinning
                  ? p.envMap !== a || (n.fog && p.fog !== r)
                    ? (m = !0)
                    : void 0 === p.numClippingPlanes ||
                      (p.numClippingPlanes === at.numPlanes &&
                        p.numIntersection === at.numIntersection)
                    ? (p.vertexAlphas !== l ||
                        p.vertexTangents !== c ||
                        p.morphTargets !== u ||
                        p.morphNormals !== h) &&
                      (m = !0)
                    : (m = !0)
                  : (m = !0)
                : (m = !0)
              : ((m = !0), (p.__version = n.version));
            let g = p.currentProgram;
            !0 === m && (g = Dt(n, e, i));
            let v = !1,
              x = !1,
              _ = !1;
            const b = g.getUniforms(),
              E = p.uniforms;
            if (
              (X.useProgram(g.program) && ((v = !0), (x = !0), (_ = !0)),
              n.id !== M && ((M = n.id), (x = !0)),
              v || S !== t)
            ) {
              if (
                (b.setValue(vt, "projectionMatrix", t.projectionMatrix),
                q.logarithmicDepthBuffer &&
                  b.setValue(
                    vt,
                    "logDepthBufFC",
                    2 / (Math.log(t.far + 1) / Math.LN2)
                  ),
                S !== t && ((S = t), (x = !0), (_ = !0)),
                n.isShaderMaterial ||
                  n.isMeshPhongMaterial ||
                  n.isMeshToonMaterial ||
                  n.isMeshStandardMaterial ||
                  n.envMap)
              ) {
                const e = b.map.cameraPosition;
                void 0 !== e &&
                  e.setValue(vt, U.setFromMatrixPosition(t.matrixWorld));
              }
              (n.isMeshPhongMaterial ||
                n.isMeshToonMaterial ||
                n.isMeshLambertMaterial ||
                n.isMeshBasicMaterial ||
                n.isMeshStandardMaterial ||
                n.isShaderMaterial) &&
                b.setValue(vt, "isOrthographic", !0 === t.isOrthographicCamera),
                (n.isMeshPhongMaterial ||
                  n.isMeshToonMaterial ||
                  n.isMeshLambertMaterial ||
                  n.isMeshBasicMaterial ||
                  n.isMeshStandardMaterial ||
                  n.isShaderMaterial ||
                  n.isShadowMaterial ||
                  i.isSkinnedMesh) &&
                  b.setValue(vt, "viewMatrix", t.matrixWorldInverse);
            }
            if (i.isSkinnedMesh) {
              b.setOptional(vt, i, "bindMatrix"),
                b.setOptional(vt, i, "bindMatrixInverse");
              const t = i.skeleton;
              t &&
                (q.floatVertexTextures
                  ? (null === t.boneTexture && t.computeBoneTexture(),
                    b.setValue(vt, "boneTexture", t.boneTexture, K),
                    b.setValue(vt, "boneTextureSize", t.boneTextureSize))
                  : b.setOptional(vt, t, "boneMatrices"));
            }
            var T, A;
            return (
              (x || p.receiveShadow !== i.receiveShadow) &&
                ((p.receiveShadow = i.receiveShadow),
                b.setValue(vt, "receiveShadow", i.receiveShadow)),
              x &&
                (b.setValue(vt, "toneMappingExposure", y.toneMappingExposure),
                p.needsLights &&
                  ((A = _),
                  ((T = E).ambientLightColor.needsUpdate = A),
                  (T.lightProbe.needsUpdate = A),
                  (T.directionalLights.needsUpdate = A),
                  (T.directionalLightShadows.needsUpdate = A),
                  (T.pointLights.needsUpdate = A),
                  (T.pointLightShadows.needsUpdate = A),
                  (T.spotLights.needsUpdate = A),
                  (T.spotLightShadows.needsUpdate = A),
                  (T.rectAreaLights.needsUpdate = A),
                  (T.hemisphereLights.needsUpdate = A)),
                r && n.fog && rt.refreshFogUniforms(E, r),
                rt.refreshMaterialUniforms(E, n, R, L, H),
                Ia.upload(vt, p.uniformsList, E, K)),
              n.isShaderMaterial &&
                !0 === n.uniformsNeedUpdate &&
                (Ia.upload(vt, p.uniformsList, E, K),
                (n.uniformsNeedUpdate = !1)),
              n.isSpriteMaterial && b.setValue(vt, "center", i.center),
              b.setValue(vt, "modelViewMatrix", i.modelViewMatrix),
              b.setValue(vt, "normalMatrix", i.normalMatrix),
              b.setValue(vt, "modelMatrix", i.matrixWorld),
              g
            );
          }
          Lt.setAnimationLoop(function (t) {
            Tt && Tt(t);
          }),
            "undefined" != typeof window && Lt.setContext(window),
            (this.setAnimationLoop = function (t) {
              (Tt = t),
                _t.setAnimationLoop(t),
                null === t ? Lt.stop() : Lt.start();
            }),
            _t.addEventListener("sessionstart", At),
            _t.addEventListener("sessionend", Ct),
            (this.render = function (t, e) {
              if (void 0 !== e && !0 !== e.isCamera)
                return void console.error(
                  "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."
                );
              if (!0 === x) return;
              !0 === t.autoUpdate && t.updateMatrixWorld(),
                null === e.parent && e.updateMatrixWorld(),
                !0 === _t.enabled &&
                  !0 === _t.isPresenting &&
                  (!0 === _t.cameraAutoUpdate && _t.updateCamera(e),
                  (e = _t.getCamera())),
                !0 === t.isScene && t.onBeforeRender(y, t, e, w),
                (d = st.get(t, v.length)),
                d.init(),
                v.push(d),
                j.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
                N.setFromProjectionMatrix(j),
                (z = this.localClippingEnabled),
                (F = at.init(this.clippingPlanes, z, e)),
                (h = ot.get(t, p.length)),
                h.init(),
                p.push(h),
                Ot(t, e, 0, y.sortObjects),
                h.finish(),
                !0 === y.sortObjects && h.sort(P, O),
                !0 === F && at.beginShadows();
              const n = d.state.shadowsArray;
              lt.render(n, t, e),
                d.setupLights(),
                d.setupLightsView(e),
                !0 === F && at.endShadows(),
                !0 === this.info.autoReset && this.info.reset(),
                ct.render(h, t);
              const i = h.opaque,
                r = h.transmissive,
                o = h.transparent;
              i.length > 0 && kt(i, t, e),
                r.length > 0 &&
                  (function (t, e, n, i) {
                    if (null === H) {
                      const t = !0 === s && !0 === q.isWebGL2;
                      H = new (t ? oi : ii)(1024, 1024, {
                        generateMipmaps: !0,
                        type: null !== mt.convert(Pt) ? Pt : St,
                        minFilter: wt,
                        magFilter: ft,
                        wrapS: dt,
                        wrapT: dt,
                      });
                    }
                    const r = y.getRenderTarget();
                    y.setRenderTarget(H), y.clear();
                    const o = y.toneMapping;
                    (y.toneMapping = Z),
                      kt(t, n, i),
                      (y.toneMapping = o),
                      K.updateMultisampleRenderTarget(H),
                      K.updateRenderTargetMipmap(H),
                      y.setRenderTarget(r),
                      kt(e, n, i);
                  })(i, r, t, e),
                o.length > 0 && kt(o, t, e),
                null !== w &&
                  (K.updateMultisampleRenderTarget(w),
                  K.updateRenderTargetMipmap(w)),
                !0 === t.isScene && t.onAfterRender(y, t, e),
                X.buffers.depth.setTest(!0),
                X.buffers.depth.setMask(!0),
                X.buffers.color.setMask(!0),
                X.setPolygonOffset(!1),
                gt.resetDefaultState(),
                (M = -1),
                (S = null),
                v.pop(),
                (d = v.length > 0 ? v[v.length - 1] : null),
                p.pop(),
                (h = p.length > 0 ? p[p.length - 1] : null);
            }),
            (this.getActiveCubeFace = function () {
              return _;
            }),
            (this.getActiveMipmapLevel = function () {
              return b;
            }),
            (this.getRenderTarget = function () {
              return w;
            }),
            (this.setRenderTarget = function (t, e = 0, n = 0) {
              (w = t),
                (_ = e),
                (b = n),
                t &&
                  void 0 === $.get(t).__webglFramebuffer &&
                  K.setupRenderTarget(t);
              let i = null,
                r = !1,
                o = !1;
              if (t) {
                const n = t.texture;
                (n.isDataTexture3D || n.isDataTexture2DArray) && (o = !0);
                const s = $.get(t).__webglFramebuffer;
                t.isWebGLCubeRenderTarget
                  ? ((i = s[e]), (r = !0))
                  : (i = t.isWebGLMultisampleRenderTarget
                      ? $.get(t).__webglMultisampledFramebuffer
                      : s),
                  E.copy(t.viewport),
                  T.copy(t.scissor),
                  (A = t.scissorTest);
              } else
                E.copy(k).multiplyScalar(R).floor(),
                  T.copy(I).multiplyScalar(R).floor(),
                  (A = D);
              if (X.bindFramebuffer(36160, i) && q.drawBuffers) {
                let e = !1;
                if (t)
                  if (t.isWebGLMultipleRenderTargets) {
                    const n = t.texture;
                    if (B.length !== n.length || 36064 !== B[0]) {
                      for (let t = 0, e = n.length; t < e; t++)
                        B[t] = 36064 + t;
                      (B.length = n.length), (e = !0);
                    }
                  } else
                    (1 === B.length && 36064 === B[0]) ||
                      ((B[0] = 36064), (B.length = 1), (e = !0));
                else
                  (1 === B.length && 1029 === B[0]) ||
                    ((B[0] = 1029), (B.length = 1), (e = !0));
                e &&
                  (q.isWebGL2
                    ? vt.drawBuffers(B)
                    : W.get("WEBGL_draw_buffers").drawBuffersWEBGL(B));
              }
              if ((X.viewport(E), X.scissor(T), X.setScissorTest(A), r)) {
                const i = $.get(t.texture);
                vt.framebufferTexture2D(
                  36160,
                  36064,
                  34069 + e,
                  i.__webglTexture,
                  n
                );
              } else if (o) {
                const i = $.get(t.texture),
                  r = e || 0;
                vt.framebufferTextureLayer(
                  36160,
                  36064,
                  i.__webglTexture,
                  n || 0,
                  r
                );
              }
            }),
            (this.readRenderTargetPixels = function (t, e, n, i, r, o, s) {
              if (!t || !t.isWebGLRenderTarget)
                return void console.error(
                  "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."
                );
              let a = $.get(t).__webglFramebuffer;
              if (
                (t.isWebGLCubeRenderTarget && void 0 !== s && (a = a[s]), a)
              ) {
                X.bindFramebuffer(36160, a);
                try {
                  const s = t.texture,
                    a = s.format,
                    l = s.type;
                  if (a !== Ft && mt.convert(a) !== vt.getParameter(35739))
                    return void console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."
                    );
                  const c =
                    l === Pt &&
                    (W.has("EXT_color_buffer_half_float") ||
                      (q.isWebGL2 && W.has("EXT_color_buffer_float")));
                  if (
                    !(
                      l === St ||
                      mt.convert(l) === vt.getParameter(35738) ||
                      (l === Rt &&
                        (q.isWebGL2 ||
                          W.has("OES_texture_float") ||
                          W.has("WEBGL_color_buffer_float"))) ||
                      c
                    )
                  )
                    return void console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."
                    );
                  36053 === vt.checkFramebufferStatus(36160)
                    ? e >= 0 &&
                      e <= t.width - i &&
                      n >= 0 &&
                      n <= t.height - r &&
                      vt.readPixels(e, n, i, r, mt.convert(a), mt.convert(l), o)
                    : console.error(
                        "THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."
                      );
                } finally {
                  const t = null !== w ? $.get(w).__webglFramebuffer : null;
                  X.bindFramebuffer(36160, t);
                }
              }
            }),
            (this.copyFramebufferToTexture = function (t, e, n = 0) {
              const i = Math.pow(2, -n),
                r = Math.floor(e.image.width * i),
                o = Math.floor(e.image.height * i);
              let s = mt.convert(e.format);
              q.isWebGL2 &&
                (6407 === s && (s = 32849), 6408 === s && (s = 32856)),
                K.setTexture2D(e, 0),
                vt.copyTexImage2D(3553, n, s, t.x, t.y, r, o, 0),
                X.unbindTexture();
            }),
            (this.copyTextureToTexture = function (t, e, n, i = 0) {
              const r = e.image.width,
                o = e.image.height,
                s = mt.convert(n.format),
                a = mt.convert(n.type);
              K.setTexture2D(n, 0),
                vt.pixelStorei(37440, n.flipY),
                vt.pixelStorei(37441, n.premultiplyAlpha),
                vt.pixelStorei(3317, n.unpackAlignment),
                e.isDataTexture
                  ? vt.texSubImage2D(
                      3553,
                      i,
                      t.x,
                      t.y,
                      r,
                      o,
                      s,
                      a,
                      e.image.data
                    )
                  : e.isCompressedTexture
                  ? vt.compressedTexSubImage2D(
                      3553,
                      i,
                      t.x,
                      t.y,
                      e.mipmaps[0].width,
                      e.mipmaps[0].height,
                      s,
                      e.mipmaps[0].data
                    )
                  : vt.texSubImage2D(3553, i, t.x, t.y, s, a, e.image),
                0 === i && n.generateMipmaps && vt.generateMipmap(3553),
                X.unbindTexture();
            }),
            (this.copyTextureToTexture3D = function (t, e, n, i, r = 0) {
              if (y.isWebGL1Renderer)
                return void console.warn(
                  "THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2."
                );
              const o = t.max.x - t.min.x + 1,
                s = t.max.y - t.min.y + 1,
                a = t.max.z - t.min.z + 1,
                l = mt.convert(i.format),
                c = mt.convert(i.type);
              let u;
              if (i.isDataTexture3D) K.setTexture3D(i, 0), (u = 32879);
              else {
                if (!i.isDataTexture2DArray)
                  return void console.warn(
                    "THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray."
                  );
                K.setTexture2DArray(i, 0), (u = 35866);
              }
              vt.pixelStorei(37440, i.flipY),
                vt.pixelStorei(37441, i.premultiplyAlpha),
                vt.pixelStorei(3317, i.unpackAlignment);
              const h = vt.getParameter(3314),
                d = vt.getParameter(32878),
                p = vt.getParameter(3316),
                f = vt.getParameter(3315),
                m = vt.getParameter(32877),
                g = n.isCompressedTexture ? n.mipmaps[0] : n.image;
              vt.pixelStorei(3314, g.width),
                vt.pixelStorei(32878, g.height),
                vt.pixelStorei(3316, t.min.x),
                vt.pixelStorei(3315, t.min.y),
                vt.pixelStorei(32877, t.min.z),
                n.isDataTexture || n.isDataTexture3D
                  ? vt.texSubImage3D(u, r, e.x, e.y, e.z, o, s, a, l, c, g.data)
                  : n.isCompressedTexture
                  ? (console.warn(
                      "THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."
                    ),
                    vt.compressedTexSubImage3D(
                      u,
                      r,
                      e.x,
                      e.y,
                      e.z,
                      o,
                      s,
                      a,
                      l,
                      g.data
                    ))
                  : vt.texSubImage3D(u, r, e.x, e.y, e.z, o, s, a, l, c, g),
                vt.pixelStorei(3314, h),
                vt.pixelStorei(32878, d),
                vt.pixelStorei(3316, p),
                vt.pixelStorei(3315, f),
                vt.pixelStorei(32877, m),
                0 === r && i.generateMipmaps && vt.generateMipmap(u),
                X.unbindTexture();
            }),
            (this.initTexture = function (t) {
              K.setTexture2D(t, 0), X.unbindTexture();
            }),
            (this.resetState = function () {
              (_ = 0), (b = 0), (w = null), X.reset(), gt.reset();
            }),
            "undefined" != typeof __THREE_DEVTOOLS__ &&
              __THREE_DEVTOOLS__.dispatchEvent(
                new CustomEvent("observe", { detail: this })
              );
        }
        class Tl extends El {}
        Tl.prototype.isWebGL1Renderer = !0;
        class Al {
          constructor(t, e = 25e-5) {
            (this.name = ""), (this.color = new Lr(t)), (this.density = e);
          }
          clone() {
            return new Al(this.color, this.density);
          }
          toJSON() {
            return {
              type: "FogExp2",
              color: this.color.getHex(),
              density: this.density,
            };
          }
        }
        Al.prototype.isFogExp2 = !0;
        class Cl {
          constructor(t, e = 1, n = 1e3) {
            (this.name = ""),
              (this.color = new Lr(t)),
              (this.near = e),
              (this.far = n);
          }
          clone() {
            return new Cl(this.color, this.near, this.far);
          }
          toJSON() {
            return {
              type: "Fog",
              color: this.color.getHex(),
              near: this.near,
              far: this.far,
            };
          }
        }
        Cl.prototype.isFog = !0;
        class Ll extends cr {
          constructor() {
            super(),
              (this.type = "Scene"),
              (this.background = null),
              (this.environment = null),
              (this.fog = null),
              (this.overrideMaterial = null),
              (this.autoUpdate = !0),
              "undefined" != typeof __THREE_DEVTOOLS__ &&
                __THREE_DEVTOOLS__.dispatchEvent(
                  new CustomEvent("observe", { detail: this })
                );
          }
          copy(t, e) {
            return (
              super.copy(t, e),
              null !== t.background && (this.background = t.background.clone()),
              null !== t.environment &&
                (this.environment = t.environment.clone()),
              null !== t.fog && (this.fog = t.fog.clone()),
              null !== t.overrideMaterial &&
                (this.overrideMaterial = t.overrideMaterial.clone()),
              (this.autoUpdate = t.autoUpdate),
              (this.matrixAutoUpdate = t.matrixAutoUpdate),
              this
            );
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return null !== this.fog && (e.object.fog = this.fog.toJSON()), e;
          }
        }
        Ll.prototype.isScene = !0;
        class Rl {
          constructor(t, e) {
            (this.array = t),
              (this.stride = e),
              (this.count = void 0 !== t ? t.length / e : 0),
              (this.usage = En),
              (this.updateRange = { offset: 0, count: -1 }),
              (this.version = 0),
              (this.uuid = jn());
          }
          onUploadCallback() {}
          set needsUpdate(t) {
            !0 === t && this.version++;
          }
          setUsage(t) {
            return (this.usage = t), this;
          }
          copy(t) {
            return (
              (this.array = new t.array.constructor(t.array)),
              (this.count = t.count),
              (this.stride = t.stride),
              (this.usage = t.usage),
              this
            );
          }
          copyAt(t, e, n) {
            (t *= this.stride), (n *= e.stride);
            for (let i = 0, r = this.stride; i < r; i++)
              this.array[t + i] = e.array[n + i];
            return this;
          }
          set(t, e = 0) {
            return this.array.set(t, e), this;
          }
          clone(t) {
            void 0 === t.arrayBuffers && (t.arrayBuffers = {}),
              void 0 === this.array.buffer._uuid &&
                (this.array.buffer._uuid = jn()),
              void 0 === t.arrayBuffers[this.array.buffer._uuid] &&
                (t.arrayBuffers[this.array.buffer._uuid] =
                  this.array.slice(0).buffer);
            const e = new this.array.constructor(
                t.arrayBuffers[this.array.buffer._uuid]
              ),
              n = new this.constructor(e, this.stride);
            return n.setUsage(this.usage), n;
          }
          onUpload(t) {
            return (this.onUploadCallback = t), this;
          }
          toJSON(t) {
            return (
              void 0 === t.arrayBuffers && (t.arrayBuffers = {}),
              void 0 === this.array.buffer._uuid &&
                (this.array.buffer._uuid = jn()),
              void 0 === t.arrayBuffers[this.array.buffer._uuid] &&
                (t.arrayBuffers[this.array.buffer._uuid] =
                  Array.prototype.slice.call(
                    new Uint32Array(this.array.buffer)
                  )),
              {
                uuid: this.uuid,
                buffer: this.array.buffer._uuid,
                type: this.array.constructor.name,
                stride: this.stride,
              }
            );
          }
        }
        Rl.prototype.isInterleavedBuffer = !0;
        const Pl = new ai();
        class Ol {
          constructor(t, e, n, i = !1) {
            (this.name = ""),
              (this.data = t),
              (this.itemSize = e),
              (this.offset = n),
              (this.normalized = !0 === i);
          }
          get count() {
            return this.data.count;
          }
          get array() {
            return this.data.array;
          }
          set needsUpdate(t) {
            this.data.needsUpdate = t;
          }
          applyMatrix4(t) {
            for (let e = 0, n = this.data.count; e < n; e++)
              (Pl.x = this.getX(e)),
                (Pl.y = this.getY(e)),
                (Pl.z = this.getZ(e)),
                Pl.applyMatrix4(t),
                this.setXYZ(e, Pl.x, Pl.y, Pl.z);
            return this;
          }
          applyNormalMatrix(t) {
            for (let e = 0, n = this.count; e < n; e++)
              (Pl.x = this.getX(e)),
                (Pl.y = this.getY(e)),
                (Pl.z = this.getZ(e)),
                Pl.applyNormalMatrix(t),
                this.setXYZ(e, Pl.x, Pl.y, Pl.z);
            return this;
          }
          transformDirection(t) {
            for (let e = 0, n = this.count; e < n; e++)
              (Pl.x = this.getX(e)),
                (Pl.y = this.getY(e)),
                (Pl.z = this.getZ(e)),
                Pl.transformDirection(t),
                this.setXYZ(e, Pl.x, Pl.y, Pl.z);
            return this;
          }
          setX(t, e) {
            return (
              (this.data.array[t * this.data.stride + this.offset] = e), this
            );
          }
          setY(t, e) {
            return (
              (this.data.array[t * this.data.stride + this.offset + 1] = e),
              this
            );
          }
          setZ(t, e) {
            return (
              (this.data.array[t * this.data.stride + this.offset + 2] = e),
              this
            );
          }
          setW(t, e) {
            return (
              (this.data.array[t * this.data.stride + this.offset + 3] = e),
              this
            );
          }
          getX(t) {
            return this.data.array[t * this.data.stride + this.offset];
          }
          getY(t) {
            return this.data.array[t * this.data.stride + this.offset + 1];
          }
          getZ(t) {
            return this.data.array[t * this.data.stride + this.offset + 2];
          }
          getW(t) {
            return this.data.array[t * this.data.stride + this.offset + 3];
          }
          setXY(t, e, n) {
            return (
              (t = t * this.data.stride + this.offset),
              (this.data.array[t + 0] = e),
              (this.data.array[t + 1] = n),
              this
            );
          }
          setXYZ(t, e, n, i) {
            return (
              (t = t * this.data.stride + this.offset),
              (this.data.array[t + 0] = e),
              (this.data.array[t + 1] = n),
              (this.data.array[t + 2] = i),
              this
            );
          }
          setXYZW(t, e, n, i, r) {
            return (
              (t = t * this.data.stride + this.offset),
              (this.data.array[t + 0] = e),
              (this.data.array[t + 1] = n),
              (this.data.array[t + 2] = i),
              (this.data.array[t + 3] = r),
              this
            );
          }
          clone(t) {
            if (void 0 === t) {
              console.log(
                "THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data."
              );
              const t = [];
              for (let e = 0; e < this.count; e++) {
                const n = e * this.data.stride + this.offset;
                for (let e = 0; e < this.itemSize; e++)
                  t.push(this.data.array[n + e]);
              }
              return new kr(
                new this.array.constructor(t),
                this.itemSize,
                this.normalized
              );
            }
            return (
              void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}),
              void 0 === t.interleavedBuffers[this.data.uuid] &&
                (t.interleavedBuffers[this.data.uuid] = this.data.clone(t)),
              new Ol(
                t.interleavedBuffers[this.data.uuid],
                this.itemSize,
                this.offset,
                this.normalized
              )
            );
          }
          toJSON(t) {
            if (void 0 === t) {
              console.log(
                "THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data."
              );
              const t = [];
              for (let e = 0; e < this.count; e++) {
                const n = e * this.data.stride + this.offset;
                for (let e = 0; e < this.itemSize; e++)
                  t.push(this.data.array[n + e]);
              }
              return {
                itemSize: this.itemSize,
                type: this.array.constructor.name,
                array: t,
                normalized: this.normalized,
              };
            }
            return (
              void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}),
              void 0 === t.interleavedBuffers[this.data.uuid] &&
                (t.interleavedBuffers[this.data.uuid] = this.data.toJSON(t)),
              {
                isInterleavedBufferAttribute: !0,
                itemSize: this.itemSize,
                data: this.data.uuid,
                offset: this.offset,
                normalized: this.normalized,
              }
            );
          }
        }
        Ol.prototype.isInterleavedBufferAttribute = !0;
        class kl extends wr {
          constructor(t) {
            super(),
              (this.type = "SpriteMaterial"),
              (this.color = new Lr(16777215)),
              (this.map = null),
              (this.alphaMap = null),
              (this.rotation = 0),
              (this.sizeAttenuation = !0),
              (this.transparent = !0),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.map = t.map),
              (this.alphaMap = t.alphaMap),
              (this.rotation = t.rotation),
              (this.sizeAttenuation = t.sizeAttenuation),
              this
            );
          }
        }
        let Il;
        kl.prototype.isSpriteMaterial = !0;
        const Dl = new ai(),
          Bl = new ai(),
          Nl = new ai(),
          Fl = new $n(),
          zl = new $n(),
          Hl = new Fi(),
          jl = new ai(),
          Ul = new ai(),
          Vl = new ai(),
          Gl = new $n(),
          Wl = new $n(),
          ql = new $n();
        class Xl extends cr {
          constructor(t) {
            if ((super(), (this.type = "Sprite"), void 0 === Il)) {
              Il = new to();
              const t = new Float32Array([
                  -0.5, -0.5, 0, 0, 0, 0.5, -0.5, 0, 1, 0, 0.5, 0.5, 0, 1, 1,
                  -0.5, 0.5, 0, 0, 1,
                ]),
                e = new Rl(t, 5);
              Il.setIndex([0, 1, 2, 0, 2, 3]),
                Il.setAttribute("position", new Ol(e, 3, 0, !1)),
                Il.setAttribute("uv", new Ol(e, 2, 3, !1));
            }
            (this.geometry = Il),
              (this.material = void 0 !== t ? t : new kl()),
              (this.center = new $n(0.5, 0.5));
          }
          raycast(t, e) {
            null === t.camera &&
              console.error(
                'THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'
              ),
              Bl.setFromMatrixScale(this.matrixWorld),
              Hl.copy(t.camera.matrixWorld),
              this.modelViewMatrix.multiplyMatrices(
                t.camera.matrixWorldInverse,
                this.matrixWorld
              ),
              Nl.setFromMatrixPosition(this.modelViewMatrix),
              t.camera.isPerspectiveCamera &&
                !1 === this.material.sizeAttenuation &&
                Bl.multiplyScalar(-Nl.z);
            const n = this.material.rotation;
            let i, r;
            0 !== n && ((r = Math.cos(n)), (i = Math.sin(n)));
            const o = this.center;
            Yl(jl.set(-0.5, -0.5, 0), Nl, o, Bl, i, r),
              Yl(Ul.set(0.5, -0.5, 0), Nl, o, Bl, i, r),
              Yl(Vl.set(0.5, 0.5, 0), Nl, o, Bl, i, r),
              Gl.set(0, 0),
              Wl.set(1, 0),
              ql.set(1, 1);
            let s = t.ray.intersectTriangle(jl, Ul, Vl, !1, Dl);
            if (
              null === s &&
              (Yl(Ul.set(-0.5, 0.5, 0), Nl, o, Bl, i, r),
              Wl.set(0, 1),
              (s = t.ray.intersectTriangle(jl, Vl, Ul, !1, Dl)),
              null === s)
            )
              return;
            const a = t.ray.origin.distanceTo(Dl);
            a < t.near ||
              a > t.far ||
              e.push({
                distance: a,
                point: Dl.clone(),
                uv: _r.getUV(Dl, jl, Ul, Vl, Gl, Wl, ql, new $n()),
                face: null,
                object: this,
              });
          }
          copy(t) {
            return (
              super.copy(t),
              void 0 !== t.center && this.center.copy(t.center),
              (this.material = t.material),
              this
            );
          }
        }
        function Yl(t, e, n, i, r, o) {
          Fl.subVectors(t, n).addScalar(0.5).multiply(i),
            void 0 !== r
              ? ((zl.x = o * Fl.x - r * Fl.y), (zl.y = r * Fl.x + o * Fl.y))
              : zl.copy(Fl),
            t.copy(e),
            (t.x += zl.x),
            (t.y += zl.y),
            t.applyMatrix4(Hl);
        }
        Xl.prototype.isSprite = !0;
        const $l = new ai(),
          Kl = new ai();
        class Jl extends cr {
          constructor() {
            super(),
              (this._currentLevel = 0),
              (this.type = "LOD"),
              Object.defineProperties(this, {
                levels: { enumerable: !0, value: [] },
                isLOD: { value: !0 },
              }),
              (this.autoUpdate = !0);
          }
          copy(t) {
            super.copy(t, !1);
            const e = t.levels;
            for (let t = 0, n = e.length; t < n; t++) {
              const n = e[t];
              this.addLevel(n.object.clone(), n.distance);
            }
            return (this.autoUpdate = t.autoUpdate), this;
          }
          addLevel(t, e = 0) {
            e = Math.abs(e);
            const n = this.levels;
            let i;
            for (i = 0; i < n.length && !(e < n[i].distance); i++);
            return (
              n.splice(i, 0, { distance: e, object: t }), this.add(t), this
            );
          }
          getCurrentLevel() {
            return this._currentLevel;
          }
          getObjectForDistance(t) {
            const e = this.levels;
            if (e.length > 0) {
              let n, i;
              for (n = 1, i = e.length; n < i && !(t < e[n].distance); n++);
              return e[n - 1].object;
            }
            return null;
          }
          raycast(t, e) {
            if (this.levels.length > 0) {
              $l.setFromMatrixPosition(this.matrixWorld);
              const n = t.ray.origin.distanceTo($l);
              this.getObjectForDistance(n).raycast(t, e);
            }
          }
          update(t) {
            const e = this.levels;
            if (e.length > 1) {
              $l.setFromMatrixPosition(t.matrixWorld),
                Kl.setFromMatrixPosition(this.matrixWorld);
              const n = $l.distanceTo(Kl) / t.zoom;
              let i, r;
              for (
                e[0].object.visible = !0, i = 1, r = e.length;
                i < r && n >= e[i].distance;
                i++
              )
                (e[i - 1].object.visible = !1), (e[i].object.visible = !0);
              for (this._currentLevel = i - 1; i < r; i++)
                e[i].object.visible = !1;
            }
          }
          toJSON(t) {
            const e = super.toJSON(t);
            !1 === this.autoUpdate && (e.object.autoUpdate = !1),
              (e.object.levels = []);
            const n = this.levels;
            for (let t = 0, i = n.length; t < i; t++) {
              const i = n[t];
              e.object.levels.push({
                object: i.object.uuid,
                distance: i.distance,
              });
            }
            return e;
          }
        }
        const Zl = new ai(),
          Ql = new ni(),
          tc = new ni(),
          ec = new ai(),
          nc = new Fi();
        class ic extends xo {
          constructor(t, e) {
            super(t, e),
              (this.type = "SkinnedMesh"),
              (this.bindMode = "attached"),
              (this.bindMatrix = new Fi()),
              (this.bindMatrixInverse = new Fi());
          }
          copy(t) {
            return (
              super.copy(t),
              (this.bindMode = t.bindMode),
              this.bindMatrix.copy(t.bindMatrix),
              this.bindMatrixInverse.copy(t.bindMatrixInverse),
              (this.skeleton = t.skeleton),
              this
            );
          }
          bind(t, e) {
            (this.skeleton = t),
              void 0 === e &&
                (this.updateMatrixWorld(!0),
                this.skeleton.calculateInverses(),
                (e = this.matrixWorld)),
              this.bindMatrix.copy(e),
              this.bindMatrixInverse.copy(e).invert();
          }
          pose() {
            this.skeleton.pose();
          }
          normalizeSkinWeights() {
            const t = new ni(),
              e = this.geometry.attributes.skinWeight;
            for (let n = 0, i = e.count; n < i; n++) {
              (t.x = e.getX(n)),
                (t.y = e.getY(n)),
                (t.z = e.getZ(n)),
                (t.w = e.getW(n));
              const i = 1 / t.manhattanLength();
              i !== 1 / 0 ? t.multiplyScalar(i) : t.set(1, 0, 0, 0),
                e.setXYZW(n, t.x, t.y, t.z, t.w);
            }
          }
          updateMatrixWorld(t) {
            super.updateMatrixWorld(t),
              "attached" === this.bindMode
                ? this.bindMatrixInverse.copy(this.matrixWorld).invert()
                : "detached" === this.bindMode
                ? this.bindMatrixInverse.copy(this.bindMatrix).invert()
                : console.warn(
                    "THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode
                  );
          }
          boneTransform(t, e) {
            const n = this.skeleton,
              i = this.geometry;
            Ql.fromBufferAttribute(i.attributes.skinIndex, t),
              tc.fromBufferAttribute(i.attributes.skinWeight, t),
              Zl.fromBufferAttribute(i.attributes.position, t).applyMatrix4(
                this.bindMatrix
              ),
              e.set(0, 0, 0);
            for (let t = 0; t < 4; t++) {
              const i = tc.getComponent(t);
              if (0 !== i) {
                const r = Ql.getComponent(t);
                nc.multiplyMatrices(n.bones[r].matrixWorld, n.boneInverses[r]),
                  e.addScaledVector(ec.copy(Zl).applyMatrix4(nc), i);
              }
            }
            return e.applyMatrix4(this.bindMatrixInverse);
          }
        }
        ic.prototype.isSkinnedMesh = !0;
        class rc extends cr {
          constructor() {
            super(), (this.type = "Bone");
          }
        }
        rc.prototype.isBone = !0;
        class oc extends ti {
          constructor(
            t = null,
            e = 1,
            n = 1,
            i,
            r,
            o,
            s,
            a,
            l = ft,
            c = ft,
            u,
            h
          ) {
            super(null, o, s, a, l, c, i, r, u, h),
              (this.image = { data: t, width: e, height: n }),
              (this.magFilter = l),
              (this.minFilter = c),
              (this.generateMipmaps = !1),
              (this.flipY = !1),
              (this.unpackAlignment = 1),
              (this.needsUpdate = !0);
          }
        }
        oc.prototype.isDataTexture = !0;
        const sc = new Fi(),
          ac = new Fi();
        class lc {
          constructor(t = [], e = []) {
            (this.uuid = jn()),
              (this.bones = t.slice(0)),
              (this.boneInverses = e),
              (this.boneMatrices = null),
              (this.boneTexture = null),
              (this.boneTextureSize = 0),
              (this.frame = -1),
              this.init();
          }
          init() {
            const t = this.bones,
              e = this.boneInverses;
            if (
              ((this.boneMatrices = new Float32Array(16 * t.length)),
              0 === e.length)
            )
              this.calculateInverses();
            else if (t.length !== e.length) {
              console.warn(
                "THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."
              ),
                (this.boneInverses = []);
              for (let t = 0, e = this.bones.length; t < e; t++)
                this.boneInverses.push(new Fi());
            }
          }
          calculateInverses() {
            this.boneInverses.length = 0;
            for (let t = 0, e = this.bones.length; t < e; t++) {
              const e = new Fi();
              this.bones[t] && e.copy(this.bones[t].matrixWorld).invert(),
                this.boneInverses.push(e);
            }
          }
          pose() {
            for (let t = 0, e = this.bones.length; t < e; t++) {
              const e = this.bones[t];
              e && e.matrixWorld.copy(this.boneInverses[t]).invert();
            }
            for (let t = 0, e = this.bones.length; t < e; t++) {
              const e = this.bones[t];
              e &&
                (e.parent && e.parent.isBone
                  ? (e.matrix.copy(e.parent.matrixWorld).invert(),
                    e.matrix.multiply(e.matrixWorld))
                  : e.matrix.copy(e.matrixWorld),
                e.matrix.decompose(e.position, e.quaternion, e.scale));
            }
          }
          update() {
            const t = this.bones,
              e = this.boneInverses,
              n = this.boneMatrices,
              i = this.boneTexture;
            for (let i = 0, r = t.length; i < r; i++) {
              const r = t[i] ? t[i].matrixWorld : ac;
              sc.multiplyMatrices(r, e[i]), sc.toArray(n, 16 * i);
            }
            null !== i && (i.needsUpdate = !0);
          }
          clone() {
            return new lc(this.bones, this.boneInverses);
          }
          computeBoneTexture() {
            let t = Math.sqrt(4 * this.bones.length);
            (t = qn(t)), (t = Math.max(t, 4));
            const e = new Float32Array(t * t * 4);
            e.set(this.boneMatrices);
            const n = new oc(e, t, t, Ft, Rt);
            return (
              (this.boneMatrices = e),
              (this.boneTexture = n),
              (this.boneTextureSize = t),
              this
            );
          }
          getBoneByName(t) {
            for (let e = 0, n = this.bones.length; e < n; e++) {
              const n = this.bones[e];
              if (n.name === t) return n;
            }
          }
          dispose() {
            null !== this.boneTexture &&
              (this.boneTexture.dispose(), (this.boneTexture = null));
          }
          fromJSON(t, e) {
            this.uuid = t.uuid;
            for (let n = 0, i = t.bones.length; n < i; n++) {
              const i = t.bones[n];
              let r = e[i];
              void 0 === r &&
                (console.warn("THREE.Skeleton: No bone found with UUID:", i),
                (r = new rc())),
                this.bones.push(r),
                this.boneInverses.push(new Fi().fromArray(t.boneInverses[n]));
            }
            return this.init(), this;
          }
          toJSON() {
            const t = {
              metadata: {
                version: 4.5,
                type: "Skeleton",
                generator: "Skeleton.toJSON",
              },
              bones: [],
              boneInverses: [],
            };
            t.uuid = this.uuid;
            const e = this.bones,
              n = this.boneInverses;
            for (let i = 0, r = e.length; i < r; i++) {
              const r = e[i];
              t.bones.push(r.uuid);
              const o = n[i];
              t.boneInverses.push(o.toArray());
            }
            return t;
          }
        }
        const cc = new Fi(),
          uc = new Fi(),
          hc = [],
          dc = new xo();
        class pc extends xo {
          constructor(t, e, n) {
            super(t, e),
              (this.instanceMatrix = new kr(new Float32Array(16 * n), 16)),
              (this.instanceColor = null),
              (this.count = n),
              (this.frustumCulled = !1);
          }
          copy(t) {
            return (
              super.copy(t),
              this.instanceMatrix.copy(t.instanceMatrix),
              null !== t.instanceColor &&
                (this.instanceColor = t.instanceColor.clone()),
              (this.count = t.count),
              this
            );
          }
          getColorAt(t, e) {
            e.fromArray(this.instanceColor.array, 3 * t);
          }
          getMatrixAt(t, e) {
            e.fromArray(this.instanceMatrix.array, 16 * t);
          }
          raycast(t, e) {
            const n = this.matrixWorld,
              i = this.count;
            if (
              ((dc.geometry = this.geometry),
              (dc.material = this.material),
              void 0 !== dc.material)
            )
              for (let r = 0; r < i; r++) {
                this.getMatrixAt(r, cc),
                  uc.multiplyMatrices(n, cc),
                  (dc.matrixWorld = uc),
                  dc.raycast(t, hc);
                for (let t = 0, n = hc.length; t < n; t++) {
                  const n = hc[t];
                  (n.instanceId = r), (n.object = this), e.push(n);
                }
                hc.length = 0;
              }
          }
          setColorAt(t, e) {
            null === this.instanceColor &&
              (this.instanceColor = new kr(
                new Float32Array(3 * this.instanceMatrix.count),
                3
              )),
              e.toArray(this.instanceColor.array, 3 * t);
          }
          setMatrixAt(t, e) {
            e.toArray(this.instanceMatrix.array, 16 * t);
          }
          updateMorphTargets() {}
          dispose() {
            this.dispatchEvent({ type: "dispose" });
          }
        }
        pc.prototype.isInstancedMesh = !0;
        class fc extends wr {
          constructor(t) {
            super(),
              (this.type = "LineBasicMaterial"),
              (this.color = new Lr(16777215)),
              (this.linewidth = 1),
              (this.linecap = "round"),
              (this.linejoin = "round"),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.linewidth = t.linewidth),
              (this.linecap = t.linecap),
              (this.linejoin = t.linejoin),
              this
            );
          }
        }
        fc.prototype.isLineBasicMaterial = !0;
        const mc = new ai(),
          gc = new ai(),
          vc = new Fi(),
          yc = new Ni(),
          xc = new Li();
        class _c extends cr {
          constructor(t = new to(), e = new fc()) {
            super(),
              (this.type = "Line"),
              (this.geometry = t),
              (this.material = e),
              this.updateMorphTargets();
          }
          copy(t) {
            return (
              super.copy(t),
              (this.material = t.material),
              (this.geometry = t.geometry),
              this
            );
          }
          computeLineDistances() {
            const t = this.geometry;
            if (t.isBufferGeometry)
              if (null === t.index) {
                const e = t.attributes.position,
                  n = [0];
                for (let t = 1, i = e.count; t < i; t++)
                  mc.fromBufferAttribute(e, t - 1),
                    gc.fromBufferAttribute(e, t),
                    (n[t] = n[t - 1]),
                    (n[t] += mc.distanceTo(gc));
                t.setAttribute("lineDistance", new Ur(n, 1));
              } else
                console.warn(
                  "THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                );
            else
              t.isGeometry &&
                console.error(
                  "THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                );
            return this;
          }
          raycast(t, e) {
            const n = this.geometry,
              i = this.matrixWorld,
              r = t.params.Line.threshold,
              o = n.drawRange;
            if (
              (null === n.boundingSphere && n.computeBoundingSphere(),
              xc.copy(n.boundingSphere),
              xc.applyMatrix4(i),
              (xc.radius += r),
              !1 === t.ray.intersectsSphere(xc))
            )
              return;
            vc.copy(i).invert(), yc.copy(t.ray).applyMatrix4(vc);
            const s = r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
              a = s * s,
              l = new ai(),
              c = new ai(),
              u = new ai(),
              h = new ai(),
              d = this.isLineSegments ? 2 : 1;
            if (n.isBufferGeometry) {
              const i = n.index,
                r = n.attributes.position;
              if (null !== i)
                for (
                  let n = Math.max(0, o.start),
                    s = Math.min(i.count, o.start + o.count) - 1;
                  n < s;
                  n += d
                ) {
                  const o = i.getX(n),
                    s = i.getX(n + 1);
                  if (
                    (l.fromBufferAttribute(r, o),
                    c.fromBufferAttribute(r, s),
                    yc.distanceSqToSegment(l, c, h, u) > a)
                  )
                    continue;
                  h.applyMatrix4(this.matrixWorld);
                  const d = t.ray.origin.distanceTo(h);
                  d < t.near ||
                    d > t.far ||
                    e.push({
                      distance: d,
                      point: u.clone().applyMatrix4(this.matrixWorld),
                      index: n,
                      face: null,
                      faceIndex: null,
                      object: this,
                    });
                }
              else
                for (
                  let n = Math.max(0, o.start),
                    i = Math.min(r.count, o.start + o.count) - 1;
                  n < i;
                  n += d
                ) {
                  if (
                    (l.fromBufferAttribute(r, n),
                    c.fromBufferAttribute(r, n + 1),
                    yc.distanceSqToSegment(l, c, h, u) > a)
                  )
                    continue;
                  h.applyMatrix4(this.matrixWorld);
                  const i = t.ray.origin.distanceTo(h);
                  i < t.near ||
                    i > t.far ||
                    e.push({
                      distance: i,
                      point: u.clone().applyMatrix4(this.matrixWorld),
                      index: n,
                      face: null,
                      faceIndex: null,
                      object: this,
                    });
                }
            } else
              n.isGeometry &&
                console.error(
                  "THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                );
          }
          updateMorphTargets() {
            const t = this.geometry;
            if (t.isBufferGeometry) {
              const e = t.morphAttributes,
                n = Object.keys(e);
              if (n.length > 0) {
                const t = e[n[0]];
                if (void 0 !== t) {
                  (this.morphTargetInfluences = []),
                    (this.morphTargetDictionary = {});
                  for (let e = 0, n = t.length; e < n; e++) {
                    const n = t[e].name || String(e);
                    this.morphTargetInfluences.push(0),
                      (this.morphTargetDictionary[n] = e);
                  }
                }
              }
            } else {
              const e = t.morphTargets;
              void 0 !== e &&
                e.length > 0 &&
                console.error(
                  "THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead."
                );
            }
          }
        }
        _c.prototype.isLine = !0;
        const bc = new ai(),
          wc = new ai();
        class Mc extends _c {
          constructor(t, e) {
            super(t, e), (this.type = "LineSegments");
          }
          computeLineDistances() {
            const t = this.geometry;
            if (t.isBufferGeometry)
              if (null === t.index) {
                const e = t.attributes.position,
                  n = [];
                for (let t = 0, i = e.count; t < i; t += 2)
                  bc.fromBufferAttribute(e, t),
                    wc.fromBufferAttribute(e, t + 1),
                    (n[t] = 0 === t ? 0 : n[t - 1]),
                    (n[t + 1] = n[t] + bc.distanceTo(wc));
                t.setAttribute("lineDistance", new Ur(n, 1));
              } else
                console.warn(
                  "THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                );
            else
              t.isGeometry &&
                console.error(
                  "THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
                );
            return this;
          }
        }
        Mc.prototype.isLineSegments = !0;
        class Sc extends _c {
          constructor(t, e) {
            super(t, e), (this.type = "LineLoop");
          }
        }
        Sc.prototype.isLineLoop = !0;
        class Ec extends wr {
          constructor(t) {
            super(),
              (this.type = "PointsMaterial"),
              (this.color = new Lr(16777215)),
              (this.map = null),
              (this.alphaMap = null),
              (this.size = 1),
              (this.sizeAttenuation = !0),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.map = t.map),
              (this.alphaMap = t.alphaMap),
              (this.size = t.size),
              (this.sizeAttenuation = t.sizeAttenuation),
              this
            );
          }
        }
        Ec.prototype.isPointsMaterial = !0;
        const Tc = new Fi(),
          Ac = new Ni(),
          Cc = new Li(),
          Lc = new ai();
        class Rc extends cr {
          constructor(t = new to(), e = new Ec()) {
            super(),
              (this.type = "Points"),
              (this.geometry = t),
              (this.material = e),
              this.updateMorphTargets();
          }
          copy(t) {
            return (
              super.copy(t),
              (this.material = t.material),
              (this.geometry = t.geometry),
              this
            );
          }
          raycast(t, e) {
            const n = this.geometry,
              i = this.matrixWorld,
              r = t.params.Points.threshold,
              o = n.drawRange;
            if (
              (null === n.boundingSphere && n.computeBoundingSphere(),
              Cc.copy(n.boundingSphere),
              Cc.applyMatrix4(i),
              (Cc.radius += r),
              !1 === t.ray.intersectsSphere(Cc))
            )
              return;
            Tc.copy(i).invert(), Ac.copy(t.ray).applyMatrix4(Tc);
            const s = r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
              a = s * s;
            if (n.isBufferGeometry) {
              const r = n.index,
                s = n.attributes.position;
              if (null !== r)
                for (
                  let n = Math.max(0, o.start),
                    l = Math.min(r.count, o.start + o.count);
                  n < l;
                  n++
                ) {
                  const o = r.getX(n);
                  Lc.fromBufferAttribute(s, o), Pc(Lc, o, a, i, t, e, this);
                }
              else
                for (
                  let n = Math.max(0, o.start),
                    r = Math.min(s.count, o.start + o.count);
                  n < r;
                  n++
                )
                  Lc.fromBufferAttribute(s, n), Pc(Lc, n, a, i, t, e, this);
            } else
              console.error(
                "THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
              );
          }
          updateMorphTargets() {
            const t = this.geometry;
            if (t.isBufferGeometry) {
              const e = t.morphAttributes,
                n = Object.keys(e);
              if (n.length > 0) {
                const t = e[n[0]];
                if (void 0 !== t) {
                  (this.morphTargetInfluences = []),
                    (this.morphTargetDictionary = {});
                  for (let e = 0, n = t.length; e < n; e++) {
                    const n = t[e].name || String(e);
                    this.morphTargetInfluences.push(0),
                      (this.morphTargetDictionary[n] = e);
                  }
                }
              }
            } else {
              const e = t.morphTargets;
              void 0 !== e &&
                e.length > 0 &&
                console.error(
                  "THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead."
                );
            }
          }
        }
        function Pc(t, e, n, i, r, o, s) {
          const a = Ac.distanceSqToPoint(t);
          if (a < n) {
            const n = new ai();
            Ac.closestPointToPoint(t, n), n.applyMatrix4(i);
            const l = r.ray.origin.distanceTo(n);
            if (l < r.near || l > r.far) return;
            o.push({
              distance: l,
              distanceToRay: Math.sqrt(a),
              point: n,
              index: e,
              face: null,
              object: s,
            });
          }
        }
        Rc.prototype.isPoints = !0;
        class Oc extends ti {
          constructor(t, e, n, i, r, o, s, a, l) {
            super(t, e, n, i, r, o, s, a, l),
              (this.format = void 0 !== s ? s : Nt),
              (this.minFilter = void 0 !== o ? o : xt),
              (this.magFilter = void 0 !== r ? r : xt),
              (this.generateMipmaps = !1);
            const c = this;
            "requestVideoFrameCallback" in t &&
              t.requestVideoFrameCallback(function e() {
                (c.needsUpdate = !0), t.requestVideoFrameCallback(e);
              });
          }
          clone() {
            return new this.constructor(this.image).copy(this);
          }
          update() {
            const t = this.image;
            !1 == "requestVideoFrameCallback" in t &&
              t.readyState >= t.HAVE_CURRENT_DATA &&
              (this.needsUpdate = !0);
          }
        }
        Oc.prototype.isVideoTexture = !0;
        class kc extends ti {
          constructor(t, e, n, i, r, o, s, a, l, c, u, h) {
            super(null, o, s, a, l, c, i, r, u, h),
              (this.image = { width: e, height: n }),
              (this.mipmaps = t),
              (this.flipY = !1),
              (this.generateMipmaps = !1);
          }
        }
        kc.prototype.isCompressedTexture = !0;
        class Ic extends ti {
          constructor(t, e, n, i, r, o, s, a, l) {
            super(t, e, n, i, r, o, s, a, l), (this.needsUpdate = !0);
          }
        }
        Ic.prototype.isCanvasTexture = !0;
        class Dc extends ti {
          constructor(t, e, n, i, r, o, s, a, l, c) {
            if ((c = void 0 !== c ? c : Ut) !== Ut && c !== Vt)
              throw new Error(
                "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"
              );
            void 0 === n && c === Ut && (n = At),
              void 0 === n && c === Vt && (n = Dt),
              super(null, i, r, o, s, a, c, n, l),
              (this.image = { width: t, height: e }),
              (this.magFilter = void 0 !== s ? s : ft),
              (this.minFilter = void 0 !== a ? a : ft),
              (this.flipY = !1),
              (this.generateMipmaps = !1);
          }
        }
        Dc.prototype.isDepthTexture = !0;
        class Bc extends to {
          constructor(t = 1, e = 8, n = 0, i = 2 * Math.PI) {
            super(),
              (this.type = "CircleGeometry"),
              (this.parameters = {
                radius: t,
                segments: e,
                thetaStart: n,
                thetaLength: i,
              }),
              (e = Math.max(3, e));
            const r = [],
              o = [],
              s = [],
              a = [],
              l = new ai(),
              c = new $n();
            o.push(0, 0, 0), s.push(0, 0, 1), a.push(0.5, 0.5);
            for (let r = 0, u = 3; r <= e; r++, u += 3) {
              const h = n + (r / e) * i;
              (l.x = t * Math.cos(h)),
                (l.y = t * Math.sin(h)),
                o.push(l.x, l.y, l.z),
                s.push(0, 0, 1),
                (c.x = (o[u] / t + 1) / 2),
                (c.y = (o[u + 1] / t + 1) / 2),
                a.push(c.x, c.y);
            }
            for (let t = 1; t <= e; t++) r.push(t, t + 1, 0);
            this.setIndex(r),
              this.setAttribute("position", new Ur(o, 3)),
              this.setAttribute("normal", new Ur(s, 3)),
              this.setAttribute("uv", new Ur(a, 2));
          }
          static fromJSON(t) {
            return new Bc(t.radius, t.segments, t.thetaStart, t.thetaLength);
          }
        }
        class Nc extends to {
          constructor(
            t = 1,
            e = 1,
            n = 1,
            i = 8,
            r = 1,
            o = !1,
            s = 0,
            a = 2 * Math.PI
          ) {
            super(),
              (this.type = "CylinderGeometry"),
              (this.parameters = {
                radiusTop: t,
                radiusBottom: e,
                height: n,
                radialSegments: i,
                heightSegments: r,
                openEnded: o,
                thetaStart: s,
                thetaLength: a,
              });
            const l = this;
            (i = Math.floor(i)), (r = Math.floor(r));
            const c = [],
              u = [],
              h = [],
              d = [];
            let p = 0;
            const f = [],
              m = n / 2;
            let g = 0;
            function v(n) {
              const r = p,
                o = new $n(),
                f = new ai();
              let v = 0;
              const y = !0 === n ? t : e,
                x = !0 === n ? 1 : -1;
              for (let t = 1; t <= i; t++)
                u.push(0, m * x, 0), h.push(0, x, 0), d.push(0.5, 0.5), p++;
              const _ = p;
              for (let t = 0; t <= i; t++) {
                const e = (t / i) * a + s,
                  n = Math.cos(e),
                  r = Math.sin(e);
                (f.x = y * r),
                  (f.y = m * x),
                  (f.z = y * n),
                  u.push(f.x, f.y, f.z),
                  h.push(0, x, 0),
                  (o.x = 0.5 * n + 0.5),
                  (o.y = 0.5 * r * x + 0.5),
                  d.push(o.x, o.y),
                  p++;
              }
              for (let t = 0; t < i; t++) {
                const e = r + t,
                  i = _ + t;
                !0 === n ? c.push(i, i + 1, e) : c.push(i + 1, i, e), (v += 3);
              }
              l.addGroup(g, v, !0 === n ? 1 : 2), (g += v);
            }
            !(function () {
              const o = new ai(),
                v = new ai();
              let y = 0;
              const x = (e - t) / n;
              for (let l = 0; l <= r; l++) {
                const c = [],
                  g = l / r,
                  y = g * (e - t) + t;
                for (let t = 0; t <= i; t++) {
                  const e = t / i,
                    r = e * a + s,
                    l = Math.sin(r),
                    f = Math.cos(r);
                  (v.x = y * l),
                    (v.y = -g * n + m),
                    (v.z = y * f),
                    u.push(v.x, v.y, v.z),
                    o.set(l, x, f).normalize(),
                    h.push(o.x, o.y, o.z),
                    d.push(e, 1 - g),
                    c.push(p++);
                }
                f.push(c);
              }
              for (let t = 0; t < i; t++)
                for (let e = 0; e < r; e++) {
                  const n = f[e][t],
                    i = f[e + 1][t],
                    r = f[e + 1][t + 1],
                    o = f[e][t + 1];
                  c.push(n, i, o), c.push(i, r, o), (y += 6);
                }
              l.addGroup(g, y, 0), (g += y);
            })(),
              !1 === o && (t > 0 && v(!0), e > 0 && v(!1)),
              this.setIndex(c),
              this.setAttribute("position", new Ur(u, 3)),
              this.setAttribute("normal", new Ur(h, 3)),
              this.setAttribute("uv", new Ur(d, 2));
          }
          static fromJSON(t) {
            return new Nc(
              t.radiusTop,
              t.radiusBottom,
              t.height,
              t.radialSegments,
              t.heightSegments,
              t.openEnded,
              t.thetaStart,
              t.thetaLength
            );
          }
        }
        class Fc extends Nc {
          constructor(
            t = 1,
            e = 1,
            n = 8,
            i = 1,
            r = !1,
            o = 0,
            s = 2 * Math.PI
          ) {
            super(0, t, e, n, i, r, o, s),
              (this.type = "ConeGeometry"),
              (this.parameters = {
                radius: t,
                height: e,
                radialSegments: n,
                heightSegments: i,
                openEnded: r,
                thetaStart: o,
                thetaLength: s,
              });
          }
          static fromJSON(t) {
            return new Fc(
              t.radius,
              t.height,
              t.radialSegments,
              t.heightSegments,
              t.openEnded,
              t.thetaStart,
              t.thetaLength
            );
          }
        }
        class zc extends to {
          constructor(t, e, n = 1, i = 0) {
            super(),
              (this.type = "PolyhedronGeometry"),
              (this.parameters = {
                vertices: t,
                indices: e,
                radius: n,
                detail: i,
              });
            const r = [],
              o = [];
            function s(t, e, n, i) {
              const r = i + 1,
                o = [];
              for (let i = 0; i <= r; i++) {
                o[i] = [];
                const s = t.clone().lerp(n, i / r),
                  a = e.clone().lerp(n, i / r),
                  l = r - i;
                for (let t = 0; t <= l; t++)
                  o[i][t] = 0 === t && i === r ? s : s.clone().lerp(a, t / l);
              }
              for (let t = 0; t < r; t++)
                for (let e = 0; e < 2 * (r - t) - 1; e++) {
                  const n = Math.floor(e / 2);
                  e % 2 == 0
                    ? (a(o[t][n + 1]), a(o[t + 1][n]), a(o[t][n]))
                    : (a(o[t][n + 1]), a(o[t + 1][n + 1]), a(o[t + 1][n]));
                }
            }
            function a(t) {
              r.push(t.x, t.y, t.z);
            }
            function l(e, n) {
              const i = 3 * e;
              (n.x = t[i + 0]), (n.y = t[i + 1]), (n.z = t[i + 2]);
            }
            function c(t, e, n, i) {
              i < 0 && 1 === t.x && (o[e] = t.x - 1),
                0 === n.x && 0 === n.z && (o[e] = i / 2 / Math.PI + 0.5);
            }
            function u(t) {
              return Math.atan2(t.z, -t.x);
            }
            !(function (t) {
              const n = new ai(),
                i = new ai(),
                r = new ai();
              for (let o = 0; o < e.length; o += 3)
                l(e[o + 0], n), l(e[o + 1], i), l(e[o + 2], r), s(n, i, r, t);
            })(i),
              (function (t) {
                const e = new ai();
                for (let n = 0; n < r.length; n += 3)
                  (e.x = r[n + 0]),
                    (e.y = r[n + 1]),
                    (e.z = r[n + 2]),
                    e.normalize().multiplyScalar(t),
                    (r[n + 0] = e.x),
                    (r[n + 1] = e.y),
                    (r[n + 2] = e.z);
              })(n),
              (function () {
                const t = new ai();
                for (let n = 0; n < r.length; n += 3) {
                  (t.x = r[n + 0]), (t.y = r[n + 1]), (t.z = r[n + 2]);
                  const i = u(t) / 2 / Math.PI + 0.5,
                    s =
                      ((e = t),
                      Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z)) /
                        Math.PI +
                        0.5);
                  o.push(i, 1 - s);
                }
                var e;
                (function () {
                  const t = new ai(),
                    e = new ai(),
                    n = new ai(),
                    i = new ai(),
                    s = new $n(),
                    a = new $n(),
                    l = new $n();
                  for (let h = 0, d = 0; h < r.length; h += 9, d += 6) {
                    t.set(r[h + 0], r[h + 1], r[h + 2]),
                      e.set(r[h + 3], r[h + 4], r[h + 5]),
                      n.set(r[h + 6], r[h + 7], r[h + 8]),
                      s.set(o[d + 0], o[d + 1]),
                      a.set(o[d + 2], o[d + 3]),
                      l.set(o[d + 4], o[d + 5]),
                      i.copy(t).add(e).add(n).divideScalar(3);
                    const p = u(i);
                    c(s, d + 0, t, p), c(a, d + 2, e, p), c(l, d + 4, n, p);
                  }
                })(),
                  (function () {
                    for (let t = 0; t < o.length; t += 6) {
                      const e = o[t + 0],
                        n = o[t + 2],
                        i = o[t + 4],
                        r = Math.max(e, n, i),
                        s = Math.min(e, n, i);
                      r > 0.9 &&
                        s < 0.1 &&
                        (e < 0.2 && (o[t + 0] += 1),
                        n < 0.2 && (o[t + 2] += 1),
                        i < 0.2 && (o[t + 4] += 1));
                    }
                  })();
              })(),
              this.setAttribute("position", new Ur(r, 3)),
              this.setAttribute("normal", new Ur(r.slice(), 3)),
              this.setAttribute("uv", new Ur(o, 2)),
              0 === i ? this.computeVertexNormals() : this.normalizeNormals();
          }
          static fromJSON(t) {
            return new zc(t.vertices, t.indices, t.radius, t.details);
          }
        }
        class Hc extends zc {
          constructor(t = 1, e = 0) {
            const n = (1 + Math.sqrt(5)) / 2,
              i = 1 / n;
            super(
              [
                -1,
                -1,
                -1,
                -1,
                -1,
                1,
                -1,
                1,
                -1,
                -1,
                1,
                1,
                1,
                -1,
                -1,
                1,
                -1,
                1,
                1,
                1,
                -1,
                1,
                1,
                1,
                0,
                -i,
                -n,
                0,
                -i,
                n,
                0,
                i,
                -n,
                0,
                i,
                n,
                -i,
                -n,
                0,
                -i,
                n,
                0,
                i,
                -n,
                0,
                i,
                n,
                0,
                -n,
                0,
                -i,
                n,
                0,
                -i,
                -n,
                0,
                i,
                n,
                0,
                i,
              ],
              [
                3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15,
                17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0,
                12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2,
                16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4,
                14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19,
                5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9,
              ],
              t,
              e
            ),
              (this.type = "DodecahedronGeometry"),
              (this.parameters = { radius: t, detail: e });
          }
          static fromJSON(t) {
            return new Hc(t.radius, t.detail);
          }
        }
        const jc = new ai(),
          Uc = new ai(),
          Vc = new ai(),
          Gc = new _r();
        class Wc extends to {
          constructor(t, e) {
            if (
              (super(),
              (this.type = "EdgesGeometry"),
              (this.parameters = { thresholdAngle: e }),
              (e = void 0 !== e ? e : 1),
              !0 === t.isGeometry)
            )
              return void console.error(
                "THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
              );
            const n = Math.cos(zn * e),
              i = t.getIndex(),
              r = t.getAttribute("position"),
              o = i ? i.count : r.count,
              s = [0, 0, 0],
              a = ["a", "b", "c"],
              l = new Array(3),
              c = {},
              u = [];
            for (let t = 0; t < o; t += 3) {
              i
                ? ((s[0] = i.getX(t)),
                  (s[1] = i.getX(t + 1)),
                  (s[2] = i.getX(t + 2)))
                : ((s[0] = t), (s[1] = t + 1), (s[2] = t + 2));
              const { a: e, b: o, c: h } = Gc;
              if (
                (e.fromBufferAttribute(r, s[0]),
                o.fromBufferAttribute(r, s[1]),
                h.fromBufferAttribute(r, s[2]),
                Gc.getNormal(Vc),
                (l[0] = `${e.x},${e.y},${e.z}`),
                (l[1] = `${o.x},${o.y},${o.z}`),
                (l[2] = `${h.x},${h.y},${h.z}`),
                l[0] !== l[1] && l[1] !== l[2] && l[2] !== l[0])
              )
                for (let t = 0; t < 3; t++) {
                  const e = (t + 1) % 3,
                    i = l[t],
                    r = l[e],
                    o = Gc[a[t]],
                    h = Gc[a[e]],
                    d = `${i}_${r}`,
                    p = `${r}_${i}`;
                  p in c && c[p]
                    ? (Vc.dot(c[p].normal) <= n &&
                        (u.push(o.x, o.y, o.z), u.push(h.x, h.y, h.z)),
                      (c[p] = null))
                    : d in c ||
                      (c[d] = {
                        index0: s[t],
                        index1: s[e],
                        normal: Vc.clone(),
                      });
                }
            }
            for (const t in c)
              if (c[t]) {
                const { index0: e, index1: n } = c[t];
                jc.fromBufferAttribute(r, e),
                  Uc.fromBufferAttribute(r, n),
                  u.push(jc.x, jc.y, jc.z),
                  u.push(Uc.x, Uc.y, Uc.z);
              }
            this.setAttribute("position", new Ur(u, 3));
          }
        }
        class qc {
          constructor() {
            (this.type = "Curve"), (this.arcLengthDivisions = 200);
          }
          getPoint() {
            return (
              console.warn("THREE.Curve: .getPoint() not implemented."), null
            );
          }
          getPointAt(t, e) {
            const n = this.getUtoTmapping(t);
            return this.getPoint(n, e);
          }
          getPoints(t = 5) {
            const e = [];
            for (let n = 0; n <= t; n++) e.push(this.getPoint(n / t));
            return e;
          }
          getSpacedPoints(t = 5) {
            const e = [];
            for (let n = 0; n <= t; n++) e.push(this.getPointAt(n / t));
            return e;
          }
          getLength() {
            const t = this.getLengths();
            return t[t.length - 1];
          }
          getLengths(t = this.arcLengthDivisions) {
            if (
              this.cacheArcLengths &&
              this.cacheArcLengths.length === t + 1 &&
              !this.needsUpdate
            )
              return this.cacheArcLengths;
            this.needsUpdate = !1;
            const e = [];
            let n,
              i = this.getPoint(0),
              r = 0;
            e.push(0);
            for (let o = 1; o <= t; o++)
              (n = this.getPoint(o / t)),
                (r += n.distanceTo(i)),
                e.push(r),
                (i = n);
            return (this.cacheArcLengths = e), e;
          }
          updateArcLengths() {
            (this.needsUpdate = !0), this.getLengths();
          }
          getUtoTmapping(t, e) {
            const n = this.getLengths();
            let i = 0;
            const r = n.length;
            let o;
            o = e || t * n[r - 1];
            let s,
              a = 0,
              l = r - 1;
            for (; a <= l; )
              if (((i = Math.floor(a + (l - a) / 2)), (s = n[i] - o), s < 0))
                a = i + 1;
              else {
                if (!(s > 0)) {
                  l = i;
                  break;
                }
                l = i - 1;
              }
            if (((i = l), n[i] === o)) return i / (r - 1);
            const c = n[i];
            return (i + (o - c) / (n[i + 1] - c)) / (r - 1);
          }
          getTangent(t, e) {
            const n = 1e-4;
            let i = t - n,
              r = t + n;
            i < 0 && (i = 0), r > 1 && (r = 1);
            const o = this.getPoint(i),
              s = this.getPoint(r),
              a = e || (o.isVector2 ? new $n() : new ai());
            return a.copy(s).sub(o).normalize(), a;
          }
          getTangentAt(t, e) {
            const n = this.getUtoTmapping(t);
            return this.getTangent(n, e);
          }
          computeFrenetFrames(t, e) {
            const n = new ai(),
              i = [],
              r = [],
              o = [],
              s = new ai(),
              a = new Fi();
            for (let e = 0; e <= t; e++) {
              const n = e / t;
              (i[e] = this.getTangentAt(n, new ai())), i[e].normalize();
            }
            (r[0] = new ai()), (o[0] = new ai());
            let l = Number.MAX_VALUE;
            const c = Math.abs(i[0].x),
              u = Math.abs(i[0].y),
              h = Math.abs(i[0].z);
            c <= l && ((l = c), n.set(1, 0, 0)),
              u <= l && ((l = u), n.set(0, 1, 0)),
              h <= l && n.set(0, 0, 1),
              s.crossVectors(i[0], n).normalize(),
              r[0].crossVectors(i[0], s),
              o[0].crossVectors(i[0], r[0]);
            for (let e = 1; e <= t; e++) {
              if (
                ((r[e] = r[e - 1].clone()),
                (o[e] = o[e - 1].clone()),
                s.crossVectors(i[e - 1], i[e]),
                s.length() > Number.EPSILON)
              ) {
                s.normalize();
                const t = Math.acos(Un(i[e - 1].dot(i[e]), -1, 1));
                r[e].applyMatrix4(a.makeRotationAxis(s, t));
              }
              o[e].crossVectors(i[e], r[e]);
            }
            if (!0 === e) {
              let e = Math.acos(Un(r[0].dot(r[t]), -1, 1));
              (e /= t), i[0].dot(s.crossVectors(r[0], r[t])) > 0 && (e = -e);
              for (let n = 1; n <= t; n++)
                r[n].applyMatrix4(a.makeRotationAxis(i[n], e * n)),
                  o[n].crossVectors(i[n], r[n]);
            }
            return { tangents: i, normals: r, binormals: o };
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            return (this.arcLengthDivisions = t.arcLengthDivisions), this;
          }
          toJSON() {
            const t = {
              metadata: {
                version: 4.5,
                type: "Curve",
                generator: "Curve.toJSON",
              },
            };
            return (
              (t.arcLengthDivisions = this.arcLengthDivisions),
              (t.type = this.type),
              t
            );
          }
          fromJSON(t) {
            return (this.arcLengthDivisions = t.arcLengthDivisions), this;
          }
        }
        class Xc extends qc {
          constructor(
            t = 0,
            e = 0,
            n = 1,
            i = 1,
            r = 0,
            o = 2 * Math.PI,
            s = !1,
            a = 0
          ) {
            super(),
              (this.type = "EllipseCurve"),
              (this.aX = t),
              (this.aY = e),
              (this.xRadius = n),
              (this.yRadius = i),
              (this.aStartAngle = r),
              (this.aEndAngle = o),
              (this.aClockwise = s),
              (this.aRotation = a);
          }
          getPoint(t, e) {
            const n = e || new $n(),
              i = 2 * Math.PI;
            let r = this.aEndAngle - this.aStartAngle;
            const o = Math.abs(r) < Number.EPSILON;
            for (; r < 0; ) r += i;
            for (; r > i; ) r -= i;
            r < Number.EPSILON && (r = o ? 0 : i),
              !0 !== this.aClockwise || o || (r === i ? (r = -i) : (r -= i));
            const s = this.aStartAngle + t * r;
            let a = this.aX + this.xRadius * Math.cos(s),
              l = this.aY + this.yRadius * Math.sin(s);
            if (0 !== this.aRotation) {
              const t = Math.cos(this.aRotation),
                e = Math.sin(this.aRotation),
                n = a - this.aX,
                i = l - this.aY;
              (a = n * t - i * e + this.aX), (l = n * e + i * t + this.aY);
            }
            return n.set(a, l);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.aX = t.aX),
              (this.aY = t.aY),
              (this.xRadius = t.xRadius),
              (this.yRadius = t.yRadius),
              (this.aStartAngle = t.aStartAngle),
              (this.aEndAngle = t.aEndAngle),
              (this.aClockwise = t.aClockwise),
              (this.aRotation = t.aRotation),
              this
            );
          }
          toJSON() {
            const t = super.toJSON();
            return (
              (t.aX = this.aX),
              (t.aY = this.aY),
              (t.xRadius = this.xRadius),
              (t.yRadius = this.yRadius),
              (t.aStartAngle = this.aStartAngle),
              (t.aEndAngle = this.aEndAngle),
              (t.aClockwise = this.aClockwise),
              (t.aRotation = this.aRotation),
              t
            );
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              (this.aX = t.aX),
              (this.aY = t.aY),
              (this.xRadius = t.xRadius),
              (this.yRadius = t.yRadius),
              (this.aStartAngle = t.aStartAngle),
              (this.aEndAngle = t.aEndAngle),
              (this.aClockwise = t.aClockwise),
              (this.aRotation = t.aRotation),
              this
            );
          }
        }
        Xc.prototype.isEllipseCurve = !0;
        class Yc extends Xc {
          constructor(t, e, n, i, r, o) {
            super(t, e, n, n, i, r, o), (this.type = "ArcCurve");
          }
        }
        function $c() {
          let t = 0,
            e = 0,
            n = 0,
            i = 0;
          function r(r, o, s, a) {
            (t = r),
              (e = s),
              (n = -3 * r + 3 * o - 2 * s - a),
              (i = 2 * r - 2 * o + s + a);
          }
          return {
            initCatmullRom: function (t, e, n, i, o) {
              r(e, n, o * (n - t), o * (i - e));
            },
            initNonuniformCatmullRom: function (t, e, n, i, o, s, a) {
              let l = (e - t) / o - (n - t) / (o + s) + (n - e) / s,
                c = (n - e) / s - (i - e) / (s + a) + (i - n) / a;
              (l *= s), (c *= s), r(e, n, l, c);
            },
            calc: function (r) {
              const o = r * r;
              return t + e * r + n * o + i * (o * r);
            },
          };
        }
        Yc.prototype.isArcCurve = !0;
        const Kc = new ai(),
          Jc = new $c(),
          Zc = new $c(),
          Qc = new $c();
        class tu extends qc {
          constructor(t = [], e = !1, n = "centripetal", i = 0.5) {
            super(),
              (this.type = "CatmullRomCurve3"),
              (this.points = t),
              (this.closed = e),
              (this.curveType = n),
              (this.tension = i);
          }
          getPoint(t, e = new ai()) {
            const n = e,
              i = this.points,
              r = i.length,
              o = (r - (this.closed ? 0 : 1)) * t;
            let s,
              a,
              l = Math.floor(o),
              c = o - l;
            this.closed
              ? (l += l > 0 ? 0 : (Math.floor(Math.abs(l) / r) + 1) * r)
              : 0 === c && l === r - 1 && ((l = r - 2), (c = 1)),
              this.closed || l > 0
                ? (s = i[(l - 1) % r])
                : (Kc.subVectors(i[0], i[1]).add(i[0]), (s = Kc));
            const u = i[l % r],
              h = i[(l + 1) % r];
            if (
              (this.closed || l + 2 < r
                ? (a = i[(l + 2) % r])
                : (Kc.subVectors(i[r - 1], i[r - 2]).add(i[r - 1]), (a = Kc)),
              "centripetal" === this.curveType || "chordal" === this.curveType)
            ) {
              const t = "chordal" === this.curveType ? 0.5 : 0.25;
              let e = Math.pow(s.distanceToSquared(u), t),
                n = Math.pow(u.distanceToSquared(h), t),
                i = Math.pow(h.distanceToSquared(a), t);
              n < 1e-4 && (n = 1),
                e < 1e-4 && (e = n),
                i < 1e-4 && (i = n),
                Jc.initNonuniformCatmullRom(s.x, u.x, h.x, a.x, e, n, i),
                Zc.initNonuniformCatmullRom(s.y, u.y, h.y, a.y, e, n, i),
                Qc.initNonuniformCatmullRom(s.z, u.z, h.z, a.z, e, n, i);
            } else
              "catmullrom" === this.curveType &&
                (Jc.initCatmullRom(s.x, u.x, h.x, a.x, this.tension),
                Zc.initCatmullRom(s.y, u.y, h.y, a.y, this.tension),
                Qc.initCatmullRom(s.z, u.z, h.z, a.z, this.tension));
            return n.set(Jc.calc(c), Zc.calc(c), Qc.calc(c)), n;
          }
          copy(t) {
            super.copy(t), (this.points = []);
            for (let e = 0, n = t.points.length; e < n; e++) {
              const n = t.points[e];
              this.points.push(n.clone());
            }
            return (
              (this.closed = t.closed),
              (this.curveType = t.curveType),
              (this.tension = t.tension),
              this
            );
          }
          toJSON() {
            const t = super.toJSON();
            t.points = [];
            for (let e = 0, n = this.points.length; e < n; e++) {
              const n = this.points[e];
              t.points.push(n.toArray());
            }
            return (
              (t.closed = this.closed),
              (t.curveType = this.curveType),
              (t.tension = this.tension),
              t
            );
          }
          fromJSON(t) {
            super.fromJSON(t), (this.points = []);
            for (let e = 0, n = t.points.length; e < n; e++) {
              const n = t.points[e];
              this.points.push(new ai().fromArray(n));
            }
            return (
              (this.closed = t.closed),
              (this.curveType = t.curveType),
              (this.tension = t.tension),
              this
            );
          }
        }
        function eu(t, e, n, i, r) {
          const o = 0.5 * (i - e),
            s = 0.5 * (r - n),
            a = t * t;
          return (
            (2 * n - 2 * i + o + s) * (t * a) +
            (-3 * n + 3 * i - 2 * o - s) * a +
            o * t +
            n
          );
        }
        function nu(t, e, n, i) {
          return (
            (function (t, e) {
              const n = 1 - t;
              return n * n * e;
            })(t, e) +
            (function (t, e) {
              return 2 * (1 - t) * t * e;
            })(t, n) +
            (function (t, e) {
              return t * t * e;
            })(t, i)
          );
        }
        function iu(t, e, n, i, r) {
          return (
            (function (t, e) {
              const n = 1 - t;
              return n * n * n * e;
            })(t, e) +
            (function (t, e) {
              const n = 1 - t;
              return 3 * n * n * t * e;
            })(t, n) +
            (function (t, e) {
              return 3 * (1 - t) * t * t * e;
            })(t, i) +
            (function (t, e) {
              return t * t * t * e;
            })(t, r)
          );
        }
        tu.prototype.isCatmullRomCurve3 = !0;
        class ru extends qc {
          constructor(t = new $n(), e = new $n(), n = new $n(), i = new $n()) {
            super(),
              (this.type = "CubicBezierCurve"),
              (this.v0 = t),
              (this.v1 = e),
              (this.v2 = n),
              (this.v3 = i);
          }
          getPoint(t, e = new $n()) {
            const n = e,
              i = this.v0,
              r = this.v1,
              o = this.v2,
              s = this.v3;
            return (
              n.set(iu(t, i.x, r.x, o.x, s.x), iu(t, i.y, r.y, o.y, s.y)), n
            );
          }
          copy(t) {
            return (
              super.copy(t),
              this.v0.copy(t.v0),
              this.v1.copy(t.v1),
              this.v2.copy(t.v2),
              this.v3.copy(t.v3),
              this
            );
          }
          toJSON() {
            const t = super.toJSON();
            return (
              (t.v0 = this.v0.toArray()),
              (t.v1 = this.v1.toArray()),
              (t.v2 = this.v2.toArray()),
              (t.v3 = this.v3.toArray()),
              t
            );
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.v0.fromArray(t.v0),
              this.v1.fromArray(t.v1),
              this.v2.fromArray(t.v2),
              this.v3.fromArray(t.v3),
              this
            );
          }
        }
        ru.prototype.isCubicBezierCurve = !0;
        class ou extends qc {
          constructor(t = new ai(), e = new ai(), n = new ai(), i = new ai()) {
            super(),
              (this.type = "CubicBezierCurve3"),
              (this.v0 = t),
              (this.v1 = e),
              (this.v2 = n),
              (this.v3 = i);
          }
          getPoint(t, e = new ai()) {
            const n = e,
              i = this.v0,
              r = this.v1,
              o = this.v2,
              s = this.v3;
            return (
              n.set(
                iu(t, i.x, r.x, o.x, s.x),
                iu(t, i.y, r.y, o.y, s.y),
                iu(t, i.z, r.z, o.z, s.z)
              ),
              n
            );
          }
          copy(t) {
            return (
              super.copy(t),
              this.v0.copy(t.v0),
              this.v1.copy(t.v1),
              this.v2.copy(t.v2),
              this.v3.copy(t.v3),
              this
            );
          }
          toJSON() {
            const t = super.toJSON();
            return (
              (t.v0 = this.v0.toArray()),
              (t.v1 = this.v1.toArray()),
              (t.v2 = this.v2.toArray()),
              (t.v3 = this.v3.toArray()),
              t
            );
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.v0.fromArray(t.v0),
              this.v1.fromArray(t.v1),
              this.v2.fromArray(t.v2),
              this.v3.fromArray(t.v3),
              this
            );
          }
        }
        ou.prototype.isCubicBezierCurve3 = !0;
        class su extends qc {
          constructor(t = new $n(), e = new $n()) {
            super(), (this.type = "LineCurve"), (this.v1 = t), (this.v2 = e);
          }
          getPoint(t, e = new $n()) {
            const n = e;
            return (
              1 === t
                ? n.copy(this.v2)
                : (n.copy(this.v2).sub(this.v1),
                  n.multiplyScalar(t).add(this.v1)),
              n
            );
          }
          getPointAt(t, e) {
            return this.getPoint(t, e);
          }
          getTangent(t, e) {
            const n = e || new $n();
            return n.copy(this.v2).sub(this.v1).normalize(), n;
          }
          copy(t) {
            return super.copy(t), this.v1.copy(t.v1), this.v2.copy(t.v2), this;
          }
          toJSON() {
            const t = super.toJSON();
            return (t.v1 = this.v1.toArray()), (t.v2 = this.v2.toArray()), t;
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.v1.fromArray(t.v1),
              this.v2.fromArray(t.v2),
              this
            );
          }
        }
        su.prototype.isLineCurve = !0;
        class au extends qc {
          constructor(t = new ai(), e = new ai()) {
            super(),
              (this.type = "LineCurve3"),
              (this.isLineCurve3 = !0),
              (this.v1 = t),
              (this.v2 = e);
          }
          getPoint(t, e = new ai()) {
            const n = e;
            return (
              1 === t
                ? n.copy(this.v2)
                : (n.copy(this.v2).sub(this.v1),
                  n.multiplyScalar(t).add(this.v1)),
              n
            );
          }
          getPointAt(t, e) {
            return this.getPoint(t, e);
          }
          copy(t) {
            return super.copy(t), this.v1.copy(t.v1), this.v2.copy(t.v2), this;
          }
          toJSON() {
            const t = super.toJSON();
            return (t.v1 = this.v1.toArray()), (t.v2 = this.v2.toArray()), t;
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.v1.fromArray(t.v1),
              this.v2.fromArray(t.v2),
              this
            );
          }
        }
        class lu extends qc {
          constructor(t = new $n(), e = new $n(), n = new $n()) {
            super(),
              (this.type = "QuadraticBezierCurve"),
              (this.v0 = t),
              (this.v1 = e),
              (this.v2 = n);
          }
          getPoint(t, e = new $n()) {
            const n = e,
              i = this.v0,
              r = this.v1,
              o = this.v2;
            return n.set(nu(t, i.x, r.x, o.x), nu(t, i.y, r.y, o.y)), n;
          }
          copy(t) {
            return (
              super.copy(t),
              this.v0.copy(t.v0),
              this.v1.copy(t.v1),
              this.v2.copy(t.v2),
              this
            );
          }
          toJSON() {
            const t = super.toJSON();
            return (
              (t.v0 = this.v0.toArray()),
              (t.v1 = this.v1.toArray()),
              (t.v2 = this.v2.toArray()),
              t
            );
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.v0.fromArray(t.v0),
              this.v1.fromArray(t.v1),
              this.v2.fromArray(t.v2),
              this
            );
          }
        }
        lu.prototype.isQuadraticBezierCurve = !0;
        class cu extends qc {
          constructor(t = new ai(), e = new ai(), n = new ai()) {
            super(),
              (this.type = "QuadraticBezierCurve3"),
              (this.v0 = t),
              (this.v1 = e),
              (this.v2 = n);
          }
          getPoint(t, e = new ai()) {
            const n = e,
              i = this.v0,
              r = this.v1,
              o = this.v2;
            return (
              n.set(
                nu(t, i.x, r.x, o.x),
                nu(t, i.y, r.y, o.y),
                nu(t, i.z, r.z, o.z)
              ),
              n
            );
          }
          copy(t) {
            return (
              super.copy(t),
              this.v0.copy(t.v0),
              this.v1.copy(t.v1),
              this.v2.copy(t.v2),
              this
            );
          }
          toJSON() {
            const t = super.toJSON();
            return (
              (t.v0 = this.v0.toArray()),
              (t.v1 = this.v1.toArray()),
              (t.v2 = this.v2.toArray()),
              t
            );
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.v0.fromArray(t.v0),
              this.v1.fromArray(t.v1),
              this.v2.fromArray(t.v2),
              this
            );
          }
        }
        cu.prototype.isQuadraticBezierCurve3 = !0;
        class uu extends qc {
          constructor(t = []) {
            super(), (this.type = "SplineCurve"), (this.points = t);
          }
          getPoint(t, e = new $n()) {
            const n = e,
              i = this.points,
              r = (i.length - 1) * t,
              o = Math.floor(r),
              s = r - o,
              a = i[0 === o ? o : o - 1],
              l = i[o],
              c = i[o > i.length - 2 ? i.length - 1 : o + 1],
              u = i[o > i.length - 3 ? i.length - 1 : o + 2];
            return (
              n.set(eu(s, a.x, l.x, c.x, u.x), eu(s, a.y, l.y, c.y, u.y)), n
            );
          }
          copy(t) {
            super.copy(t), (this.points = []);
            for (let e = 0, n = t.points.length; e < n; e++) {
              const n = t.points[e];
              this.points.push(n.clone());
            }
            return this;
          }
          toJSON() {
            const t = super.toJSON();
            t.points = [];
            for (let e = 0, n = this.points.length; e < n; e++) {
              const n = this.points[e];
              t.points.push(n.toArray());
            }
            return t;
          }
          fromJSON(t) {
            super.fromJSON(t), (this.points = []);
            for (let e = 0, n = t.points.length; e < n; e++) {
              const n = t.points[e];
              this.points.push(new $n().fromArray(n));
            }
            return this;
          }
        }
        uu.prototype.isSplineCurve = !0;
        var hu = Object.freeze({
          __proto__: null,
          ArcCurve: Yc,
          CatmullRomCurve3: tu,
          CubicBezierCurve: ru,
          CubicBezierCurve3: ou,
          EllipseCurve: Xc,
          LineCurve: su,
          LineCurve3: au,
          QuadraticBezierCurve: lu,
          QuadraticBezierCurve3: cu,
          SplineCurve: uu,
        });
        function du(t, e, n, i, r) {
          let o, s;
          if (
            r ===
            (function (t, e, n, i) {
              let r = 0;
              for (let o = e, s = n - i; o < n; o += i)
                (r += (t[s] - t[o]) * (t[o + 1] + t[s + 1])), (s = o);
              return r;
            })(t, e, n, i) >
              0
          )
            for (o = e; o < n; o += i) s = ku(o, t[o], t[o + 1], s);
          else for (o = n - i; o >= e; o -= i) s = ku(o, t[o], t[o + 1], s);
          return s && Au(s, s.next) && (Iu(s), (s = s.next)), s;
        }
        function pu(t, e) {
          if (!t) return t;
          e || (e = t);
          let n,
            i = t;
          do {
            if (
              ((n = !1),
              i.steiner || (!Au(i, i.next) && 0 !== Tu(i.prev, i, i.next)))
            )
              i = i.next;
            else {
              if ((Iu(i), (i = e = i.prev), i === i.next)) break;
              n = !0;
            }
          } while (n || i !== e);
          return e;
        }
        function fu(t, e, n, i, r, o, s) {
          if (!t) return;
          !s &&
            o &&
            (function (t, e, n, i) {
              let r = t;
              do {
                null === r.z && (r.z = wu(r.x, r.y, e, n, i)),
                  (r.prevZ = r.prev),
                  (r.nextZ = r.next),
                  (r = r.next);
              } while (r !== t);
              (r.prevZ.nextZ = null),
                (r.prevZ = null),
                (function (t) {
                  let e,
                    n,
                    i,
                    r,
                    o,
                    s,
                    a,
                    l,
                    c = 1;
                  do {
                    for (n = t, t = null, o = null, s = 0; n; ) {
                      for (
                        s++, i = n, a = 0, e = 0;
                        e < c && (a++, (i = i.nextZ), i);
                        e++
                      );
                      for (l = c; a > 0 || (l > 0 && i); )
                        0 !== a && (0 === l || !i || n.z <= i.z)
                          ? ((r = n), (n = n.nextZ), a--)
                          : ((r = i), (i = i.nextZ), l--),
                          o ? (o.nextZ = r) : (t = r),
                          (r.prevZ = o),
                          (o = r);
                      n = i;
                    }
                    (o.nextZ = null), (c *= 2);
                  } while (s > 1);
                })(r);
            })(t, i, r, o);
          let a,
            l,
            c = t;
          for (; t.prev !== t.next; )
            if (((a = t.prev), (l = t.next), o ? gu(t, i, r, o) : mu(t)))
              e.push(a.i / n),
                e.push(t.i / n),
                e.push(l.i / n),
                Iu(t),
                (t = l.next),
                (c = l.next);
            else if ((t = l) === c) {
              s
                ? 1 === s
                  ? fu((t = vu(pu(t), e, n)), e, n, i, r, o, 2)
                  : 2 === s && yu(t, e, n, i, r, o)
                : fu(pu(t), e, n, i, r, o, 1);
              break;
            }
        }
        function mu(t) {
          const e = t.prev,
            n = t,
            i = t.next;
          if (Tu(e, n, i) >= 0) return !1;
          let r = t.next.next;
          for (; r !== t.prev; ) {
            if (
              Su(e.x, e.y, n.x, n.y, i.x, i.y, r.x, r.y) &&
              Tu(r.prev, r, r.next) >= 0
            )
              return !1;
            r = r.next;
          }
          return !0;
        }
        function gu(t, e, n, i) {
          const r = t.prev,
            o = t,
            s = t.next;
          if (Tu(r, o, s) >= 0) return !1;
          const a = r.x < o.x ? (r.x < s.x ? r.x : s.x) : o.x < s.x ? o.x : s.x,
            l = r.y < o.y ? (r.y < s.y ? r.y : s.y) : o.y < s.y ? o.y : s.y,
            c = r.x > o.x ? (r.x > s.x ? r.x : s.x) : o.x > s.x ? o.x : s.x,
            u = r.y > o.y ? (r.y > s.y ? r.y : s.y) : o.y > s.y ? o.y : s.y,
            h = wu(a, l, e, n, i),
            d = wu(c, u, e, n, i);
          let p = t.prevZ,
            f = t.nextZ;
          for (; p && p.z >= h && f && f.z <= d; ) {
            if (
              p !== t.prev &&
              p !== t.next &&
              Su(r.x, r.y, o.x, o.y, s.x, s.y, p.x, p.y) &&
              Tu(p.prev, p, p.next) >= 0
            )
              return !1;
            if (
              ((p = p.prevZ),
              f !== t.prev &&
                f !== t.next &&
                Su(r.x, r.y, o.x, o.y, s.x, s.y, f.x, f.y) &&
                Tu(f.prev, f, f.next) >= 0)
            )
              return !1;
            f = f.nextZ;
          }
          for (; p && p.z >= h; ) {
            if (
              p !== t.prev &&
              p !== t.next &&
              Su(r.x, r.y, o.x, o.y, s.x, s.y, p.x, p.y) &&
              Tu(p.prev, p, p.next) >= 0
            )
              return !1;
            p = p.prevZ;
          }
          for (; f && f.z <= d; ) {
            if (
              f !== t.prev &&
              f !== t.next &&
              Su(r.x, r.y, o.x, o.y, s.x, s.y, f.x, f.y) &&
              Tu(f.prev, f, f.next) >= 0
            )
              return !1;
            f = f.nextZ;
          }
          return !0;
        }
        function vu(t, e, n) {
          let i = t;
          do {
            const r = i.prev,
              o = i.next.next;
            !Au(r, o) &&
              Cu(r, i, i.next, o) &&
              Pu(r, o) &&
              Pu(o, r) &&
              (e.push(r.i / n),
              e.push(i.i / n),
              e.push(o.i / n),
              Iu(i),
              Iu(i.next),
              (i = t = o)),
              (i = i.next);
          } while (i !== t);
          return pu(i);
        }
        function yu(t, e, n, i, r, o) {
          let s = t;
          do {
            let t = s.next.next;
            for (; t !== s.prev; ) {
              if (s.i !== t.i && Eu(s, t)) {
                let a = Ou(s, t);
                return (
                  (s = pu(s, s.next)),
                  (a = pu(a, a.next)),
                  fu(s, e, n, i, r, o),
                  void fu(a, e, n, i, r, o)
                );
              }
              t = t.next;
            }
            s = s.next;
          } while (s !== t);
        }
        function xu(t, e) {
          return t.x - e.x;
        }
        function _u(t, e) {
          if (
            (e = (function (t, e) {
              let n = e;
              const i = t.x,
                r = t.y;
              let o,
                s = -1 / 0;
              do {
                if (r <= n.y && r >= n.next.y && n.next.y !== n.y) {
                  const t =
                    n.x + ((r - n.y) * (n.next.x - n.x)) / (n.next.y - n.y);
                  if (t <= i && t > s) {
                    if (((s = t), t === i)) {
                      if (r === n.y) return n;
                      if (r === n.next.y) return n.next;
                    }
                    o = n.x < n.next.x ? n : n.next;
                  }
                }
                n = n.next;
              } while (n !== e);
              if (!o) return null;
              if (i === s) return o;
              const a = o,
                l = o.x,
                c = o.y;
              let u,
                h = 1 / 0;
              n = o;
              do {
                i >= n.x &&
                  n.x >= l &&
                  i !== n.x &&
                  Su(r < c ? i : s, r, l, c, r < c ? s : i, r, n.x, n.y) &&
                  ((u = Math.abs(r - n.y) / (i - n.x)),
                  Pu(n, t) &&
                    (u < h ||
                      (u === h && (n.x > o.x || (n.x === o.x && bu(o, n))))) &&
                    ((o = n), (h = u))),
                  (n = n.next);
              } while (n !== a);
              return o;
            })(t, e))
          ) {
            const n = Ou(e, t);
            pu(e, e.next), pu(n, n.next);
          }
        }
        function bu(t, e) {
          return Tu(t.prev, t, e.prev) < 0 && Tu(e.next, t, t.next) < 0;
        }
        function wu(t, e, n, i, r) {
          return (
            (t =
              1431655765 &
              ((t =
                858993459 &
                ((t =
                  252645135 &
                  ((t = 16711935 & ((t = 32767 * (t - n) * r) | (t << 8))) |
                    (t << 4))) |
                  (t << 2))) |
                (t << 1))) |
            ((e =
              1431655765 &
              ((e =
                858993459 &
                ((e =
                  252645135 &
                  ((e = 16711935 & ((e = 32767 * (e - i) * r) | (e << 8))) |
                    (e << 4))) |
                  (e << 2))) |
                (e << 1))) <<
              1)
          );
        }
        function Mu(t) {
          let e = t,
            n = t;
          do {
            (e.x < n.x || (e.x === n.x && e.y < n.y)) && (n = e), (e = e.next);
          } while (e !== t);
          return n;
        }
        function Su(t, e, n, i, r, o, s, a) {
          return (
            (r - s) * (e - a) - (t - s) * (o - a) >= 0 &&
            (t - s) * (i - a) - (n - s) * (e - a) >= 0 &&
            (n - s) * (o - a) - (r - s) * (i - a) >= 0
          );
        }
        function Eu(t, e) {
          return (
            t.next.i !== e.i &&
            t.prev.i !== e.i &&
            !(function (t, e) {
              let n = t;
              do {
                if (
                  n.i !== t.i &&
                  n.next.i !== t.i &&
                  n.i !== e.i &&
                  n.next.i !== e.i &&
                  Cu(n, n.next, t, e)
                )
                  return !0;
                n = n.next;
              } while (n !== t);
              return !1;
            })(t, e) &&
            ((Pu(t, e) &&
              Pu(e, t) &&
              (function (t, e) {
                let n = t,
                  i = !1;
                const r = (t.x + e.x) / 2,
                  o = (t.y + e.y) / 2;
                do {
                  n.y > o != n.next.y > o &&
                    n.next.y !== n.y &&
                    r <
                      ((n.next.x - n.x) * (o - n.y)) / (n.next.y - n.y) + n.x &&
                    (i = !i),
                    (n = n.next);
                } while (n !== t);
                return i;
              })(t, e) &&
              (Tu(t.prev, t, e.prev) || Tu(t, e.prev, e))) ||
              (Au(t, e) &&
                Tu(t.prev, t, t.next) > 0 &&
                Tu(e.prev, e, e.next) > 0))
          );
        }
        function Tu(t, e, n) {
          return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y);
        }
        function Au(t, e) {
          return t.x === e.x && t.y === e.y;
        }
        function Cu(t, e, n, i) {
          const r = Ru(Tu(t, e, n)),
            o = Ru(Tu(t, e, i)),
            s = Ru(Tu(n, i, t)),
            a = Ru(Tu(n, i, e));
          return (
            (r !== o && s !== a) ||
            !(0 !== r || !Lu(t, n, e)) ||
            !(0 !== o || !Lu(t, i, e)) ||
            !(0 !== s || !Lu(n, t, i)) ||
            !(0 !== a || !Lu(n, e, i))
          );
        }
        function Lu(t, e, n) {
          return (
            e.x <= Math.max(t.x, n.x) &&
            e.x >= Math.min(t.x, n.x) &&
            e.y <= Math.max(t.y, n.y) &&
            e.y >= Math.min(t.y, n.y)
          );
        }
        function Ru(t) {
          return t > 0 ? 1 : t < 0 ? -1 : 0;
        }
        function Pu(t, e) {
          return Tu(t.prev, t, t.next) < 0
            ? Tu(t, e, t.next) >= 0 && Tu(t, t.prev, e) >= 0
            : Tu(t, e, t.prev) < 0 || Tu(t, t.next, e) < 0;
        }
        function Ou(t, e) {
          const n = new Du(t.i, t.x, t.y),
            i = new Du(e.i, e.x, e.y),
            r = t.next,
            o = e.prev;
          return (
            (t.next = e),
            (e.prev = t),
            (n.next = r),
            (r.prev = n),
            (i.next = n),
            (n.prev = i),
            (o.next = i),
            (i.prev = o),
            i
          );
        }
        function ku(t, e, n, i) {
          const r = new Du(t, e, n);
          return (
            i
              ? ((r.next = i.next),
                (r.prev = i),
                (i.next.prev = r),
                (i.next = r))
              : ((r.prev = r), (r.next = r)),
            r
          );
        }
        function Iu(t) {
          (t.next.prev = t.prev),
            (t.prev.next = t.next),
            t.prevZ && (t.prevZ.nextZ = t.nextZ),
            t.nextZ && (t.nextZ.prevZ = t.prevZ);
        }
        function Du(t, e, n) {
          (this.i = t),
            (this.x = e),
            (this.y = n),
            (this.prev = null),
            (this.next = null),
            (this.z = null),
            (this.prevZ = null),
            (this.nextZ = null),
            (this.steiner = !1);
        }
        class Bu {
          static area(t) {
            const e = t.length;
            let n = 0;
            for (let i = e - 1, r = 0; r < e; i = r++)
              n += t[i].x * t[r].y - t[r].x * t[i].y;
            return 0.5 * n;
          }
          static isClockWise(t) {
            return Bu.area(t) < 0;
          }
          static triangulateShape(t, e) {
            const n = [],
              i = [],
              r = [];
            Nu(t), Fu(n, t);
            let o = t.length;
            e.forEach(Nu);
            for (let t = 0; t < e.length; t++)
              i.push(o), (o += e[t].length), Fu(n, e[t]);
            const s = (function (t, e, n = 2) {
              const i = e && e.length,
                r = i ? e[0] * n : t.length;
              let o = du(t, 0, r, n, !0);
              const s = [];
              if (!o || o.next === o.prev) return s;
              let a, l, c, u, h, d, p;
              if (
                (i &&
                  (o = (function (t, e, n, i) {
                    const r = [];
                    let o, s, a, l, c;
                    for (o = 0, s = e.length; o < s; o++)
                      (a = e[o] * i),
                        (l = o < s - 1 ? e[o + 1] * i : t.length),
                        (c = du(t, a, l, i, !1)),
                        c === c.next && (c.steiner = !0),
                        r.push(Mu(c));
                    for (r.sort(xu), o = 0; o < r.length; o++)
                      _u(r[o], n), (n = pu(n, n.next));
                    return n;
                  })(t, e, o, n)),
                t.length > 80 * n)
              ) {
                (a = c = t[0]), (l = u = t[1]);
                for (let e = n; e < r; e += n)
                  (h = t[e]),
                    (d = t[e + 1]),
                    h < a && (a = h),
                    d < l && (l = d),
                    h > c && (c = h),
                    d > u && (u = d);
                (p = Math.max(c - a, u - l)), (p = 0 !== p ? 1 / p : 0);
              }
              return fu(o, s, n, a, l, p), s;
            })(n, i);
            for (let t = 0; t < s.length; t += 3) r.push(s.slice(t, t + 3));
            return r;
          }
        }
        function Nu(t) {
          const e = t.length;
          e > 2 && t[e - 1].equals(t[0]) && t.pop();
        }
        function Fu(t, e) {
          for (let n = 0; n < e.length; n++) t.push(e[n].x), t.push(e[n].y);
        }
        class zu extends to {
          constructor(t, e) {
            super(),
              (this.type = "ExtrudeGeometry"),
              (this.parameters = { shapes: t, options: e }),
              (t = Array.isArray(t) ? t : [t]);
            const n = this,
              i = [],
              r = [];
            for (let e = 0, n = t.length; e < n; e++) o(t[e]);
            function o(t) {
              const o = [],
                s = void 0 !== e.curveSegments ? e.curveSegments : 12,
                a = void 0 !== e.steps ? e.steps : 1;
              let l = void 0 !== e.depth ? e.depth : 100,
                c = void 0 === e.bevelEnabled || e.bevelEnabled,
                u = void 0 !== e.bevelThickness ? e.bevelThickness : 6,
                h = void 0 !== e.bevelSize ? e.bevelSize : u - 2,
                d = void 0 !== e.bevelOffset ? e.bevelOffset : 0,
                p = void 0 !== e.bevelSegments ? e.bevelSegments : 3;
              const f = e.extrudePath,
                m = void 0 !== e.UVGenerator ? e.UVGenerator : Hu;
              void 0 !== e.amount &&
                (console.warn(
                  "THREE.ExtrudeBufferGeometry: amount has been renamed to depth."
                ),
                (l = e.amount));
              let g,
                v,
                y,
                x,
                _,
                b = !1;
              f &&
                ((g = f.getSpacedPoints(a)),
                (b = !0),
                (c = !1),
                (v = f.computeFrenetFrames(a, !1)),
                (y = new ai()),
                (x = new ai()),
                (_ = new ai())),
                c || ((p = 0), (u = 0), (h = 0), (d = 0));
              const w = t.extractPoints(s);
              let M = w.shape;
              const S = w.holes;
              if (!Bu.isClockWise(M)) {
                M = M.reverse();
                for (let t = 0, e = S.length; t < e; t++) {
                  const e = S[t];
                  Bu.isClockWise(e) && (S[t] = e.reverse());
                }
              }
              const E = Bu.triangulateShape(M, S),
                T = M;
              for (let t = 0, e = S.length; t < e; t++) {
                const e = S[t];
                M = M.concat(e);
              }
              function A(t, e, n) {
                return (
                  e ||
                    console.error("THREE.ExtrudeGeometry: vec does not exist"),
                  e.clone().multiplyScalar(n).add(t)
                );
              }
              const C = M.length,
                L = E.length;
              function R(t, e, n) {
                let i, r, o;
                const s = t.x - e.x,
                  a = t.y - e.y,
                  l = n.x - t.x,
                  c = n.y - t.y,
                  u = s * s + a * a,
                  h = s * c - a * l;
                if (Math.abs(h) > Number.EPSILON) {
                  const h = Math.sqrt(u),
                    d = Math.sqrt(l * l + c * c),
                    p = e.x - a / h,
                    f = e.y + s / h,
                    m =
                      ((n.x - c / d - p) * c - (n.y + l / d - f) * l) /
                      (s * c - a * l);
                  (i = p + s * m - t.x), (r = f + a * m - t.y);
                  const g = i * i + r * r;
                  if (g <= 2) return new $n(i, r);
                  o = Math.sqrt(g / 2);
                } else {
                  let t = !1;
                  s > Number.EPSILON
                    ? l > Number.EPSILON && (t = !0)
                    : s < -Number.EPSILON
                    ? l < -Number.EPSILON && (t = !0)
                    : Math.sign(a) === Math.sign(c) && (t = !0),
                    t
                      ? ((i = -a), (r = s), (o = Math.sqrt(u)))
                      : ((i = s), (r = a), (o = Math.sqrt(u / 2)));
                }
                return new $n(i / o, r / o);
              }
              const P = [];
              for (
                let t = 0, e = T.length, n = e - 1, i = t + 1;
                t < e;
                t++, n++, i++
              )
                n === e && (n = 0),
                  i === e && (i = 0),
                  (P[t] = R(T[t], T[n], T[i]));
              const O = [];
              let k,
                I = P.concat();
              for (let t = 0, e = S.length; t < e; t++) {
                const e = S[t];
                k = [];
                for (
                  let t = 0, n = e.length, i = n - 1, r = t + 1;
                  t < n;
                  t++, i++, r++
                )
                  i === n && (i = 0),
                    r === n && (r = 0),
                    (k[t] = R(e[t], e[i], e[r]));
                O.push(k), (I = I.concat(k));
              }
              for (let t = 0; t < p; t++) {
                const e = t / p,
                  n = u * Math.cos((e * Math.PI) / 2),
                  i = h * Math.sin((e * Math.PI) / 2) + d;
                for (let t = 0, e = T.length; t < e; t++) {
                  const e = A(T[t], P[t], i);
                  N(e.x, e.y, -n);
                }
                for (let t = 0, e = S.length; t < e; t++) {
                  const e = S[t];
                  k = O[t];
                  for (let t = 0, r = e.length; t < r; t++) {
                    const r = A(e[t], k[t], i);
                    N(r.x, r.y, -n);
                  }
                }
              }
              const D = h + d;
              for (let t = 0; t < C; t++) {
                const e = c ? A(M[t], I[t], D) : M[t];
                b
                  ? (x.copy(v.normals[0]).multiplyScalar(e.x),
                    y.copy(v.binormals[0]).multiplyScalar(e.y),
                    _.copy(g[0]).add(x).add(y),
                    N(_.x, _.y, _.z))
                  : N(e.x, e.y, 0);
              }
              for (let t = 1; t <= a; t++)
                for (let e = 0; e < C; e++) {
                  const n = c ? A(M[e], I[e], D) : M[e];
                  b
                    ? (x.copy(v.normals[t]).multiplyScalar(n.x),
                      y.copy(v.binormals[t]).multiplyScalar(n.y),
                      _.copy(g[t]).add(x).add(y),
                      N(_.x, _.y, _.z))
                    : N(n.x, n.y, (l / a) * t);
                }
              for (let t = p - 1; t >= 0; t--) {
                const e = t / p,
                  n = u * Math.cos((e * Math.PI) / 2),
                  i = h * Math.sin((e * Math.PI) / 2) + d;
                for (let t = 0, e = T.length; t < e; t++) {
                  const e = A(T[t], P[t], i);
                  N(e.x, e.y, l + n);
                }
                for (let t = 0, e = S.length; t < e; t++) {
                  const e = S[t];
                  k = O[t];
                  for (let t = 0, r = e.length; t < r; t++) {
                    const r = A(e[t], k[t], i);
                    b
                      ? N(r.x, r.y + g[a - 1].y, g[a - 1].x + n)
                      : N(r.x, r.y, l + n);
                  }
                }
              }
              function B(t, e) {
                let n = t.length;
                for (; --n >= 0; ) {
                  const i = n;
                  let r = n - 1;
                  r < 0 && (r = t.length - 1);
                  for (let t = 0, n = a + 2 * p; t < n; t++) {
                    const n = C * t,
                      o = C * (t + 1);
                    z(e + i + n, e + r + n, e + r + o, e + i + o);
                  }
                }
              }
              function N(t, e, n) {
                o.push(t), o.push(e), o.push(n);
              }
              function F(t, e, r) {
                H(t), H(e), H(r);
                const o = i.length / 3,
                  s = m.generateTopUV(n, i, o - 3, o - 2, o - 1);
                j(s[0]), j(s[1]), j(s[2]);
              }
              function z(t, e, r, o) {
                H(t), H(e), H(o), H(e), H(r), H(o);
                const s = i.length / 3,
                  a = m.generateSideWallUV(n, i, s - 6, s - 3, s - 2, s - 1);
                j(a[0]), j(a[1]), j(a[3]), j(a[1]), j(a[2]), j(a[3]);
              }
              function H(t) {
                i.push(o[3 * t + 0]),
                  i.push(o[3 * t + 1]),
                  i.push(o[3 * t + 2]);
              }
              function j(t) {
                r.push(t.x), r.push(t.y);
              }
              !(function () {
                const t = i.length / 3;
                if (c) {
                  let t = 0,
                    e = C * t;
                  for (let t = 0; t < L; t++) {
                    const n = E[t];
                    F(n[2] + e, n[1] + e, n[0] + e);
                  }
                  (t = a + 2 * p), (e = C * t);
                  for (let t = 0; t < L; t++) {
                    const n = E[t];
                    F(n[0] + e, n[1] + e, n[2] + e);
                  }
                } else {
                  for (let t = 0; t < L; t++) {
                    const e = E[t];
                    F(e[2], e[1], e[0]);
                  }
                  for (let t = 0; t < L; t++) {
                    const e = E[t];
                    F(e[0] + C * a, e[1] + C * a, e[2] + C * a);
                  }
                }
                n.addGroup(t, i.length / 3 - t, 0);
              })(),
                (function () {
                  const t = i.length / 3;
                  let e = 0;
                  B(T, e), (e += T.length);
                  for (let t = 0, n = S.length; t < n; t++) {
                    const n = S[t];
                    B(n, e), (e += n.length);
                  }
                  n.addGroup(t, i.length / 3 - t, 1);
                })();
            }
            this.setAttribute("position", new Ur(i, 3)),
              this.setAttribute("uv", new Ur(r, 2)),
              this.computeVertexNormals();
          }
          toJSON() {
            const t = super.toJSON();
            return (function (t, e, n) {
              if (((n.shapes = []), Array.isArray(t)))
                for (let e = 0, i = t.length; e < i; e++) {
                  const i = t[e];
                  n.shapes.push(i.uuid);
                }
              else n.shapes.push(t.uuid);
              return (
                void 0 !== e.extrudePath &&
                  (n.options.extrudePath = e.extrudePath.toJSON()),
                n
              );
            })(this.parameters.shapes, this.parameters.options, t);
          }
          static fromJSON(t, e) {
            const n = [];
            for (let i = 0, r = t.shapes.length; i < r; i++) {
              const r = e[t.shapes[i]];
              n.push(r);
            }
            const i = t.options.extrudePath;
            return (
              void 0 !== i &&
                (t.options.extrudePath = new hu[i.type]().fromJSON(i)),
              new zu(n, t.options)
            );
          }
        }
        const Hu = {
          generateTopUV: function (t, e, n, i, r) {
            const o = e[3 * n],
              s = e[3 * n + 1],
              a = e[3 * i],
              l = e[3 * i + 1],
              c = e[3 * r],
              u = e[3 * r + 1];
            return [new $n(o, s), new $n(a, l), new $n(c, u)];
          },
          generateSideWallUV: function (t, e, n, i, r, o) {
            const s = e[3 * n],
              a = e[3 * n + 1],
              l = e[3 * n + 2],
              c = e[3 * i],
              u = e[3 * i + 1],
              h = e[3 * i + 2],
              d = e[3 * r],
              p = e[3 * r + 1],
              f = e[3 * r + 2],
              m = e[3 * o],
              g = e[3 * o + 1],
              v = e[3 * o + 2];
            return Math.abs(a - u) < Math.abs(s - c)
              ? [
                  new $n(s, 1 - l),
                  new $n(c, 1 - h),
                  new $n(d, 1 - f),
                  new $n(m, 1 - v),
                ]
              : [
                  new $n(a, 1 - l),
                  new $n(u, 1 - h),
                  new $n(p, 1 - f),
                  new $n(g, 1 - v),
                ];
          },
        };
        class ju extends zc {
          constructor(t = 1, e = 0) {
            const n = (1 + Math.sqrt(5)) / 2;
            super(
              [
                -1,
                n,
                0,
                1,
                n,
                0,
                -1,
                -n,
                0,
                1,
                -n,
                0,
                0,
                -1,
                n,
                0,
                1,
                n,
                0,
                -1,
                -n,
                0,
                1,
                -n,
                n,
                0,
                -1,
                n,
                0,
                1,
                -n,
                0,
                -1,
                -n,
                0,
                1,
              ],
              [
                0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11,
                4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3,
                6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1,
              ],
              t,
              e
            ),
              (this.type = "IcosahedronGeometry"),
              (this.parameters = { radius: t, detail: e });
          }
          static fromJSON(t) {
            return new ju(t.radius, t.detail);
          }
        }
        class Uu extends to {
          constructor(t, e = 12, n = 0, i = 2 * Math.PI) {
            super(),
              (this.type = "LatheGeometry"),
              (this.parameters = {
                points: t,
                segments: e,
                phiStart: n,
                phiLength: i,
              }),
              (e = Math.floor(e)),
              (i = Un(i, 0, 2 * Math.PI));
            const r = [],
              o = [],
              s = [],
              a = 1 / e,
              l = new ai(),
              c = new $n();
            for (let r = 0; r <= e; r++) {
              const u = n + r * a * i,
                h = Math.sin(u),
                d = Math.cos(u);
              for (let n = 0; n <= t.length - 1; n++)
                (l.x = t[n].x * h),
                  (l.y = t[n].y),
                  (l.z = t[n].x * d),
                  o.push(l.x, l.y, l.z),
                  (c.x = r / e),
                  (c.y = n / (t.length - 1)),
                  s.push(c.x, c.y);
            }
            for (let n = 0; n < e; n++)
              for (let e = 0; e < t.length - 1; e++) {
                const i = e + n * t.length,
                  o = i,
                  s = i + t.length,
                  a = i + t.length + 1,
                  l = i + 1;
                r.push(o, s, l), r.push(s, a, l);
              }
            if (
              (this.setIndex(r),
              this.setAttribute("position", new Ur(o, 3)),
              this.setAttribute("uv", new Ur(s, 2)),
              this.computeVertexNormals(),
              i === 2 * Math.PI)
            ) {
              const n = this.attributes.normal.array,
                i = new ai(),
                r = new ai(),
                o = new ai(),
                s = e * t.length * 3;
              for (let e = 0, a = 0; e < t.length; e++, a += 3)
                (i.x = n[a + 0]),
                  (i.y = n[a + 1]),
                  (i.z = n[a + 2]),
                  (r.x = n[s + a + 0]),
                  (r.y = n[s + a + 1]),
                  (r.z = n[s + a + 2]),
                  o.addVectors(i, r).normalize(),
                  (n[a + 0] = n[s + a + 0] = o.x),
                  (n[a + 1] = n[s + a + 1] = o.y),
                  (n[a + 2] = n[s + a + 2] = o.z);
            }
          }
          static fromJSON(t) {
            return new Uu(t.points, t.segments, t.phiStart, t.phiLength);
          }
        }
        class Vu extends zc {
          constructor(t = 1, e = 0) {
            super(
              [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
              [
                0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4,
                1, 4, 2,
              ],
              t,
              e
            ),
              (this.type = "OctahedronGeometry"),
              (this.parameters = { radius: t, detail: e });
          }
          static fromJSON(t) {
            return new Vu(t.radius, t.detail);
          }
        }
        class Gu extends to {
          constructor(t, e, n) {
            super(),
              (this.type = "ParametricGeometry"),
              (this.parameters = { func: t, slices: e, stacks: n });
            const i = [],
              r = [],
              o = [],
              s = [],
              a = 1e-5,
              l = new ai(),
              c = new ai(),
              u = new ai(),
              h = new ai(),
              d = new ai();
            t.length < 3 &&
              console.error(
                "THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter."
              );
            const p = e + 1;
            for (let i = 0; i <= n; i++) {
              const p = i / n;
              for (let n = 0; n <= e; n++) {
                const i = n / e;
                t(i, p, c),
                  r.push(c.x, c.y, c.z),
                  i - a >= 0
                    ? (t(i - a, p, u), h.subVectors(c, u))
                    : (t(i + a, p, u), h.subVectors(u, c)),
                  p - a >= 0
                    ? (t(i, p - a, u), d.subVectors(c, u))
                    : (t(i, p + a, u), d.subVectors(u, c)),
                  l.crossVectors(h, d).normalize(),
                  o.push(l.x, l.y, l.z),
                  s.push(i, p);
              }
            }
            for (let t = 0; t < n; t++)
              for (let n = 0; n < e; n++) {
                const e = t * p + n,
                  r = t * p + n + 1,
                  o = (t + 1) * p + n + 1,
                  s = (t + 1) * p + n;
                i.push(e, r, s), i.push(r, o, s);
              }
            this.setIndex(i),
              this.setAttribute("position", new Ur(r, 3)),
              this.setAttribute("normal", new Ur(o, 3)),
              this.setAttribute("uv", new Ur(s, 2));
          }
        }
        class Wu extends to {
          constructor(t = 0.5, e = 1, n = 8, i = 1, r = 0, o = 2 * Math.PI) {
            super(),
              (this.type = "RingGeometry"),
              (this.parameters = {
                innerRadius: t,
                outerRadius: e,
                thetaSegments: n,
                phiSegments: i,
                thetaStart: r,
                thetaLength: o,
              }),
              (n = Math.max(3, n));
            const s = [],
              a = [],
              l = [],
              c = [];
            let u = t;
            const h = (e - t) / (i = Math.max(1, i)),
              d = new ai(),
              p = new $n();
            for (let t = 0; t <= i; t++) {
              for (let t = 0; t <= n; t++) {
                const i = r + (t / n) * o;
                (d.x = u * Math.cos(i)),
                  (d.y = u * Math.sin(i)),
                  a.push(d.x, d.y, d.z),
                  l.push(0, 0, 1),
                  (p.x = (d.x / e + 1) / 2),
                  (p.y = (d.y / e + 1) / 2),
                  c.push(p.x, p.y);
              }
              u += h;
            }
            for (let t = 0; t < i; t++) {
              const e = t * (n + 1);
              for (let t = 0; t < n; t++) {
                const i = t + e,
                  r = i,
                  o = i + n + 1,
                  a = i + n + 2,
                  l = i + 1;
                s.push(r, o, l), s.push(o, a, l);
              }
            }
            this.setIndex(s),
              this.setAttribute("position", new Ur(a, 3)),
              this.setAttribute("normal", new Ur(l, 3)),
              this.setAttribute("uv", new Ur(c, 2));
          }
          static fromJSON(t) {
            return new Wu(
              t.innerRadius,
              t.outerRadius,
              t.thetaSegments,
              t.phiSegments,
              t.thetaStart,
              t.thetaLength
            );
          }
        }
        class qu extends to {
          constructor(t, e = 12) {
            super(),
              (this.type = "ShapeGeometry"),
              (this.parameters = { shapes: t, curveSegments: e });
            const n = [],
              i = [],
              r = [],
              o = [];
            let s = 0,
              a = 0;
            if (!1 === Array.isArray(t)) l(t);
            else
              for (let e = 0; e < t.length; e++)
                l(t[e]), this.addGroup(s, a, e), (s += a), (a = 0);
            function l(t) {
              const s = i.length / 3,
                l = t.extractPoints(e);
              let c = l.shape;
              const u = l.holes;
              !1 === Bu.isClockWise(c) && (c = c.reverse());
              for (let t = 0, e = u.length; t < e; t++) {
                const e = u[t];
                !0 === Bu.isClockWise(e) && (u[t] = e.reverse());
              }
              const h = Bu.triangulateShape(c, u);
              for (let t = 0, e = u.length; t < e; t++) {
                const e = u[t];
                c = c.concat(e);
              }
              for (let t = 0, e = c.length; t < e; t++) {
                const e = c[t];
                i.push(e.x, e.y, 0), r.push(0, 0, 1), o.push(e.x, e.y);
              }
              for (let t = 0, e = h.length; t < e; t++) {
                const e = h[t],
                  i = e[0] + s,
                  r = e[1] + s,
                  o = e[2] + s;
                n.push(i, r, o), (a += 3);
              }
            }
            this.setIndex(n),
              this.setAttribute("position", new Ur(i, 3)),
              this.setAttribute("normal", new Ur(r, 3)),
              this.setAttribute("uv", new Ur(o, 2));
          }
          toJSON() {
            const t = super.toJSON();
            return (function (t, e) {
              if (((e.shapes = []), Array.isArray(t)))
                for (let n = 0, i = t.length; n < i; n++) {
                  const i = t[n];
                  e.shapes.push(i.uuid);
                }
              else e.shapes.push(t.uuid);
              return e;
            })(this.parameters.shapes, t);
          }
          static fromJSON(t, e) {
            const n = [];
            for (let i = 0, r = t.shapes.length; i < r; i++) {
              const r = e[t.shapes[i]];
              n.push(r);
            }
            return new qu(n, t.curveSegments);
          }
        }
        class Xu extends to {
          constructor(
            t = 1,
            e = 32,
            n = 16,
            i = 0,
            r = 2 * Math.PI,
            o = 0,
            s = Math.PI
          ) {
            super(),
              (this.type = "SphereGeometry"),
              (this.parameters = {
                radius: t,
                widthSegments: e,
                heightSegments: n,
                phiStart: i,
                phiLength: r,
                thetaStart: o,
                thetaLength: s,
              }),
              (e = Math.max(3, Math.floor(e))),
              (n = Math.max(2, Math.floor(n)));
            const a = Math.min(o + s, Math.PI);
            let l = 0;
            const c = [],
              u = new ai(),
              h = new ai(),
              d = [],
              p = [],
              f = [],
              m = [];
            for (let d = 0; d <= n; d++) {
              const g = [],
                v = d / n;
              let y = 0;
              0 == d && 0 == o
                ? (y = 0.5 / e)
                : d == n && a == Math.PI && (y = -0.5 / e);
              for (let n = 0; n <= e; n++) {
                const a = n / e;
                (u.x = -t * Math.cos(i + a * r) * Math.sin(o + v * s)),
                  (u.y = t * Math.cos(o + v * s)),
                  (u.z = t * Math.sin(i + a * r) * Math.sin(o + v * s)),
                  p.push(u.x, u.y, u.z),
                  h.copy(u).normalize(),
                  f.push(h.x, h.y, h.z),
                  m.push(a + y, 1 - v),
                  g.push(l++);
              }
              c.push(g);
            }
            for (let t = 0; t < n; t++)
              for (let i = 0; i < e; i++) {
                const e = c[t][i + 1],
                  r = c[t][i],
                  s = c[t + 1][i],
                  l = c[t + 1][i + 1];
                (0 !== t || o > 0) && d.push(e, r, l),
                  (t !== n - 1 || a < Math.PI) && d.push(r, s, l);
              }
            this.setIndex(d),
              this.setAttribute("position", new Ur(p, 3)),
              this.setAttribute("normal", new Ur(f, 3)),
              this.setAttribute("uv", new Ur(m, 2));
          }
          static fromJSON(t) {
            return new Xu(
              t.radius,
              t.widthSegments,
              t.heightSegments,
              t.phiStart,
              t.phiLength,
              t.thetaStart,
              t.thetaLength
            );
          }
        }
        class Yu extends zc {
          constructor(t = 1, e = 0) {
            super(
              [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
              [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1],
              t,
              e
            ),
              (this.type = "TetrahedronGeometry"),
              (this.parameters = { radius: t, detail: e });
          }
          static fromJSON(t) {
            return new Yu(t.radius, t.detail);
          }
        }
        class $u extends zu {
          constructor(t, e = {}) {
            const n = e.font;
            if (!n || !n.isFont)
              return (
                console.error(
                  "THREE.TextGeometry: font parameter is not an instance of THREE.Font."
                ),
                new to()
              );
            const i = n.generateShapes(t, e.size);
            (e.depth = void 0 !== e.height ? e.height : 50),
              void 0 === e.bevelThickness && (e.bevelThickness = 10),
              void 0 === e.bevelSize && (e.bevelSize = 8),
              void 0 === e.bevelEnabled && (e.bevelEnabled = !1),
              super(i, e),
              (this.type = "TextGeometry");
          }
        }
        class Ku extends to {
          constructor(t = 1, e = 0.4, n = 8, i = 6, r = 2 * Math.PI) {
            super(),
              (this.type = "TorusGeometry"),
              (this.parameters = {
                radius: t,
                tube: e,
                radialSegments: n,
                tubularSegments: i,
                arc: r,
              }),
              (n = Math.floor(n)),
              (i = Math.floor(i));
            const o = [],
              s = [],
              a = [],
              l = [],
              c = new ai(),
              u = new ai(),
              h = new ai();
            for (let o = 0; o <= n; o++)
              for (let d = 0; d <= i; d++) {
                const p = (d / i) * r,
                  f = (o / n) * Math.PI * 2;
                (u.x = (t + e * Math.cos(f)) * Math.cos(p)),
                  (u.y = (t + e * Math.cos(f)) * Math.sin(p)),
                  (u.z = e * Math.sin(f)),
                  s.push(u.x, u.y, u.z),
                  (c.x = t * Math.cos(p)),
                  (c.y = t * Math.sin(p)),
                  h.subVectors(u, c).normalize(),
                  a.push(h.x, h.y, h.z),
                  l.push(d / i),
                  l.push(o / n);
              }
            for (let t = 1; t <= n; t++)
              for (let e = 1; e <= i; e++) {
                const n = (i + 1) * t + e - 1,
                  r = (i + 1) * (t - 1) + e - 1,
                  s = (i + 1) * (t - 1) + e,
                  a = (i + 1) * t + e;
                o.push(n, r, a), o.push(r, s, a);
              }
            this.setIndex(o),
              this.setAttribute("position", new Ur(s, 3)),
              this.setAttribute("normal", new Ur(a, 3)),
              this.setAttribute("uv", new Ur(l, 2));
          }
          static fromJSON(t) {
            return new Ku(
              t.radius,
              t.tube,
              t.radialSegments,
              t.tubularSegments,
              t.arc
            );
          }
        }
        class Ju extends to {
          constructor(t = 1, e = 0.4, n = 64, i = 8, r = 2, o = 3) {
            super(),
              (this.type = "TorusKnotGeometry"),
              (this.parameters = {
                radius: t,
                tube: e,
                tubularSegments: n,
                radialSegments: i,
                p: r,
                q: o,
              }),
              (n = Math.floor(n)),
              (i = Math.floor(i));
            const s = [],
              a = [],
              l = [],
              c = [],
              u = new ai(),
              h = new ai(),
              d = new ai(),
              p = new ai(),
              f = new ai(),
              m = new ai(),
              g = new ai();
            for (let s = 0; s <= n; ++s) {
              const y = (s / n) * r * Math.PI * 2;
              v(y, r, o, t, d),
                v(y + 0.01, r, o, t, p),
                m.subVectors(p, d),
                g.addVectors(p, d),
                f.crossVectors(m, g),
                g.crossVectors(f, m),
                f.normalize(),
                g.normalize();
              for (let t = 0; t <= i; ++t) {
                const r = (t / i) * Math.PI * 2,
                  o = -e * Math.cos(r),
                  p = e * Math.sin(r);
                (u.x = d.x + (o * g.x + p * f.x)),
                  (u.y = d.y + (o * g.y + p * f.y)),
                  (u.z = d.z + (o * g.z + p * f.z)),
                  a.push(u.x, u.y, u.z),
                  h.subVectors(u, d).normalize(),
                  l.push(h.x, h.y, h.z),
                  c.push(s / n),
                  c.push(t / i);
              }
            }
            for (let t = 1; t <= n; t++)
              for (let e = 1; e <= i; e++) {
                const n = (i + 1) * (t - 1) + (e - 1),
                  r = (i + 1) * t + (e - 1),
                  o = (i + 1) * t + e,
                  a = (i + 1) * (t - 1) + e;
                s.push(n, r, a), s.push(r, o, a);
              }
            function v(t, e, n, i, r) {
              const o = Math.cos(t),
                s = Math.sin(t),
                a = (n / e) * t,
                l = Math.cos(a);
              (r.x = i * (2 + l) * 0.5 * o),
                (r.y = i * (2 + l) * s * 0.5),
                (r.z = i * Math.sin(a) * 0.5);
            }
            this.setIndex(s),
              this.setAttribute("position", new Ur(a, 3)),
              this.setAttribute("normal", new Ur(l, 3)),
              this.setAttribute("uv", new Ur(c, 2));
          }
          static fromJSON(t) {
            return new Ju(
              t.radius,
              t.tube,
              t.tubularSegments,
              t.radialSegments,
              t.p,
              t.q
            );
          }
        }
        class Zu extends to {
          constructor(t, e = 64, n = 1, i = 8, r = !1) {
            super(),
              (this.type = "TubeGeometry"),
              (this.parameters = {
                path: t,
                tubularSegments: e,
                radius: n,
                radialSegments: i,
                closed: r,
              });
            const o = t.computeFrenetFrames(e, r);
            (this.tangents = o.tangents),
              (this.normals = o.normals),
              (this.binormals = o.binormals);
            const s = new ai(),
              a = new ai(),
              l = new $n();
            let c = new ai();
            const u = [],
              h = [],
              d = [],
              p = [];
            function f(r) {
              c = t.getPointAt(r / e, c);
              const l = o.normals[r],
                d = o.binormals[r];
              for (let t = 0; t <= i; t++) {
                const e = (t / i) * Math.PI * 2,
                  r = Math.sin(e),
                  o = -Math.cos(e);
                (a.x = o * l.x + r * d.x),
                  (a.y = o * l.y + r * d.y),
                  (a.z = o * l.z + r * d.z),
                  a.normalize(),
                  h.push(a.x, a.y, a.z),
                  (s.x = c.x + n * a.x),
                  (s.y = c.y + n * a.y),
                  (s.z = c.z + n * a.z),
                  u.push(s.x, s.y, s.z);
              }
            }
            !(function () {
              for (let t = 0; t < e; t++) f(t);
              f(!1 === r ? e : 0),
                (function () {
                  for (let t = 0; t <= e; t++)
                    for (let n = 0; n <= i; n++)
                      (l.x = t / e), (l.y = n / i), d.push(l.x, l.y);
                })(),
                (function () {
                  for (let t = 1; t <= e; t++)
                    for (let e = 1; e <= i; e++) {
                      const n = (i + 1) * (t - 1) + (e - 1),
                        r = (i + 1) * t + (e - 1),
                        o = (i + 1) * t + e,
                        s = (i + 1) * (t - 1) + e;
                      p.push(n, r, s), p.push(r, o, s);
                    }
                })();
            })(),
              this.setIndex(p),
              this.setAttribute("position", new Ur(u, 3)),
              this.setAttribute("normal", new Ur(h, 3)),
              this.setAttribute("uv", new Ur(d, 2));
          }
          toJSON() {
            const t = super.toJSON();
            return (t.path = this.parameters.path.toJSON()), t;
          }
          static fromJSON(t) {
            return new Zu(
              new hu[t.path.type]().fromJSON(t.path),
              t.tubularSegments,
              t.radius,
              t.radialSegments,
              t.closed
            );
          }
        }
        class Qu extends to {
          constructor(t) {
            if (
              (super(), (this.type = "WireframeGeometry"), !0 === t.isGeometry)
            )
              return void console.error(
                "THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."
              );
            const e = [],
              n = new Set(),
              i = new ai(),
              r = new ai();
            if (null !== t.index) {
              const o = t.attributes.position,
                s = t.index;
              let a = t.groups;
              0 === a.length &&
                (a = [{ start: 0, count: s.count, materialIndex: 0 }]);
              for (let t = 0, l = a.length; t < l; ++t) {
                const l = a[t],
                  c = l.start;
                for (let t = c, a = c + l.count; t < a; t += 3)
                  for (let a = 0; a < 3; a++) {
                    const l = s.getX(t + a),
                      c = s.getX(t + ((a + 1) % 3));
                    i.fromBufferAttribute(o, l),
                      r.fromBufferAttribute(o, c),
                      !0 === th(i, r, n) &&
                        (e.push(i.x, i.y, i.z), e.push(r.x, r.y, r.z));
                  }
              }
            } else {
              const o = t.attributes.position;
              for (let t = 0, s = o.count / 3; t < s; t++)
                for (let s = 0; s < 3; s++) {
                  const a = 3 * t + s,
                    l = 3 * t + ((s + 1) % 3);
                  i.fromBufferAttribute(o, a),
                    r.fromBufferAttribute(o, l),
                    !0 === th(i, r, n) &&
                      (e.push(i.x, i.y, i.z), e.push(r.x, r.y, r.z));
                }
            }
            this.setAttribute("position", new Ur(e, 3));
          }
        }
        function th(t, e, n) {
          const i = `${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,
            r = `${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;
          return !0 !== n.has(i) && !0 !== n.has(r) && (n.add(i, r), !0);
        }
        var eh = Object.freeze({
          __proto__: null,
          BoxGeometry: bo,
          BoxBufferGeometry: bo,
          CircleGeometry: Bc,
          CircleBufferGeometry: Bc,
          ConeGeometry: Fc,
          ConeBufferGeometry: Fc,
          CylinderGeometry: Nc,
          CylinderBufferGeometry: Nc,
          DodecahedronGeometry: Hc,
          DodecahedronBufferGeometry: Hc,
          EdgesGeometry: Wc,
          ExtrudeGeometry: zu,
          ExtrudeBufferGeometry: zu,
          IcosahedronGeometry: ju,
          IcosahedronBufferGeometry: ju,
          LatheGeometry: Uu,
          LatheBufferGeometry: Uu,
          OctahedronGeometry: Vu,
          OctahedronBufferGeometry: Vu,
          ParametricGeometry: Gu,
          ParametricBufferGeometry: Gu,
          PlaneGeometry: jo,
          PlaneBufferGeometry: jo,
          PolyhedronGeometry: zc,
          PolyhedronBufferGeometry: zc,
          RingGeometry: Wu,
          RingBufferGeometry: Wu,
          ShapeGeometry: qu,
          ShapeBufferGeometry: qu,
          SphereGeometry: Xu,
          SphereBufferGeometry: Xu,
          TetrahedronGeometry: Yu,
          TetrahedronBufferGeometry: Yu,
          TextGeometry: $u,
          TextBufferGeometry: $u,
          TorusGeometry: Ku,
          TorusBufferGeometry: Ku,
          TorusKnotGeometry: Ju,
          TorusKnotBufferGeometry: Ju,
          TubeGeometry: Zu,
          TubeBufferGeometry: Zu,
          WireframeGeometry: Qu,
        });
        class nh extends wr {
          constructor(t) {
            super(),
              (this.type = "ShadowMaterial"),
              (this.color = new Lr(0)),
              (this.transparent = !0),
              this.setValues(t);
          }
          copy(t) {
            return super.copy(t), this.color.copy(t.color), this;
          }
        }
        nh.prototype.isShadowMaterial = !0;
        class ih extends wr {
          constructor(t) {
            super(),
              (this.defines = { STANDARD: "" }),
              (this.type = "MeshStandardMaterial"),
              (this.color = new Lr(16777215)),
              (this.roughness = 1),
              (this.metalness = 0),
              (this.map = null),
              (this.lightMap = null),
              (this.lightMapIntensity = 1),
              (this.aoMap = null),
              (this.aoMapIntensity = 1),
              (this.emissive = new Lr(0)),
              (this.emissiveIntensity = 1),
              (this.emissiveMap = null),
              (this.bumpMap = null),
              (this.bumpScale = 1),
              (this.normalMap = null),
              (this.normalMapType = an),
              (this.normalScale = new $n(1, 1)),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.roughnessMap = null),
              (this.metalnessMap = null),
              (this.alphaMap = null),
              (this.envMap = null),
              (this.envMapIntensity = 1),
              (this.refractionRatio = 0.98),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.wireframeLinecap = "round"),
              (this.wireframeLinejoin = "round"),
              (this.flatShading = !1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.defines = { STANDARD: "" }),
              this.color.copy(t.color),
              (this.roughness = t.roughness),
              (this.metalness = t.metalness),
              (this.map = t.map),
              (this.lightMap = t.lightMap),
              (this.lightMapIntensity = t.lightMapIntensity),
              (this.aoMap = t.aoMap),
              (this.aoMapIntensity = t.aoMapIntensity),
              this.emissive.copy(t.emissive),
              (this.emissiveMap = t.emissiveMap),
              (this.emissiveIntensity = t.emissiveIntensity),
              (this.bumpMap = t.bumpMap),
              (this.bumpScale = t.bumpScale),
              (this.normalMap = t.normalMap),
              (this.normalMapType = t.normalMapType),
              this.normalScale.copy(t.normalScale),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              (this.roughnessMap = t.roughnessMap),
              (this.metalnessMap = t.metalnessMap),
              (this.alphaMap = t.alphaMap),
              (this.envMap = t.envMap),
              (this.envMapIntensity = t.envMapIntensity),
              (this.refractionRatio = t.refractionRatio),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.wireframeLinecap = t.wireframeLinecap),
              (this.wireframeLinejoin = t.wireframeLinejoin),
              (this.flatShading = t.flatShading),
              this
            );
          }
        }
        ih.prototype.isMeshStandardMaterial = !0;
        class rh extends ih {
          constructor(t) {
            super(),
              (this.defines = { STANDARD: "", PHYSICAL: "" }),
              (this.type = "MeshPhysicalMaterial"),
              (this.clearcoat = 0),
              (this.clearcoatMap = null),
              (this.clearcoatRoughness = 0),
              (this.clearcoatRoughnessMap = null),
              (this.clearcoatNormalScale = new $n(1, 1)),
              (this.clearcoatNormalMap = null),
              (this.reflectivity = 0.5),
              Object.defineProperty(this, "ior", {
                get: function () {
                  return (
                    (1 + 0.4 * this.reflectivity) /
                    (1 - 0.4 * this.reflectivity)
                  );
                },
                set: function (t) {
                  this.reflectivity = Un((2.5 * (t - 1)) / (t + 1), 0, 1);
                },
              }),
              (this.sheen = null),
              (this.transmission = 0),
              (this.transmissionMap = null),
              (this.thickness = 0.01),
              (this.thicknessMap = null),
              (this.attenuationDistance = 0),
              (this.attenuationTint = new Lr(1, 1, 1)),
              (this.specularIntensity = 1),
              (this.specularIntensityMap = null),
              (this.specularTint = new Lr(1, 1, 1)),
              (this.specularTintMap = null),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.defines = { STANDARD: "", PHYSICAL: "" }),
              (this.clearcoat = t.clearcoat),
              (this.clearcoatMap = t.clearcoatMap),
              (this.clearcoatRoughness = t.clearcoatRoughness),
              (this.clearcoatRoughnessMap = t.clearcoatRoughnessMap),
              (this.clearcoatNormalMap = t.clearcoatNormalMap),
              this.clearcoatNormalScale.copy(t.clearcoatNormalScale),
              (this.reflectivity = t.reflectivity),
              t.sheen
                ? (this.sheen = (this.sheen || new Lr()).copy(t.sheen))
                : (this.sheen = null),
              (this.transmission = t.transmission),
              (this.transmissionMap = t.transmissionMap),
              (this.thickness = t.thickness),
              (this.thicknessMap = t.thicknessMap),
              (this.attenuationDistance = t.attenuationDistance),
              this.attenuationTint.copy(t.attenuationTint),
              (this.specularIntensity = t.specularIntensity),
              (this.specularIntensityMap = t.specularIntensityMap),
              this.specularTint.copy(t.specularTint),
              (this.specularTintMap = t.specularTintMap),
              this
            );
          }
        }
        rh.prototype.isMeshPhysicalMaterial = !0;
        class oh extends wr {
          constructor(t) {
            super(),
              (this.type = "MeshPhongMaterial"),
              (this.color = new Lr(16777215)),
              (this.specular = new Lr(1118481)),
              (this.shininess = 30),
              (this.map = null),
              (this.lightMap = null),
              (this.lightMapIntensity = 1),
              (this.aoMap = null),
              (this.aoMapIntensity = 1),
              (this.emissive = new Lr(0)),
              (this.emissiveIntensity = 1),
              (this.emissiveMap = null),
              (this.bumpMap = null),
              (this.bumpScale = 1),
              (this.normalMap = null),
              (this.normalMapType = an),
              (this.normalScale = new $n(1, 1)),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.specularMap = null),
              (this.alphaMap = null),
              (this.envMap = null),
              (this.combine = $),
              (this.reflectivity = 1),
              (this.refractionRatio = 0.98),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.wireframeLinecap = "round"),
              (this.wireframeLinejoin = "round"),
              (this.flatShading = !1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              this.specular.copy(t.specular),
              (this.shininess = t.shininess),
              (this.map = t.map),
              (this.lightMap = t.lightMap),
              (this.lightMapIntensity = t.lightMapIntensity),
              (this.aoMap = t.aoMap),
              (this.aoMapIntensity = t.aoMapIntensity),
              this.emissive.copy(t.emissive),
              (this.emissiveMap = t.emissiveMap),
              (this.emissiveIntensity = t.emissiveIntensity),
              (this.bumpMap = t.bumpMap),
              (this.bumpScale = t.bumpScale),
              (this.normalMap = t.normalMap),
              (this.normalMapType = t.normalMapType),
              this.normalScale.copy(t.normalScale),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              (this.specularMap = t.specularMap),
              (this.alphaMap = t.alphaMap),
              (this.envMap = t.envMap),
              (this.combine = t.combine),
              (this.reflectivity = t.reflectivity),
              (this.refractionRatio = t.refractionRatio),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.wireframeLinecap = t.wireframeLinecap),
              (this.wireframeLinejoin = t.wireframeLinejoin),
              (this.flatShading = t.flatShading),
              this
            );
          }
        }
        oh.prototype.isMeshPhongMaterial = !0;
        class sh extends wr {
          constructor(t) {
            super(),
              (this.defines = { TOON: "" }),
              (this.type = "MeshToonMaterial"),
              (this.color = new Lr(16777215)),
              (this.map = null),
              (this.gradientMap = null),
              (this.lightMap = null),
              (this.lightMapIntensity = 1),
              (this.aoMap = null),
              (this.aoMapIntensity = 1),
              (this.emissive = new Lr(0)),
              (this.emissiveIntensity = 1),
              (this.emissiveMap = null),
              (this.bumpMap = null),
              (this.bumpScale = 1),
              (this.normalMap = null),
              (this.normalMapType = an),
              (this.normalScale = new $n(1, 1)),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.alphaMap = null),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.wireframeLinecap = "round"),
              (this.wireframeLinejoin = "round"),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.map = t.map),
              (this.gradientMap = t.gradientMap),
              (this.lightMap = t.lightMap),
              (this.lightMapIntensity = t.lightMapIntensity),
              (this.aoMap = t.aoMap),
              (this.aoMapIntensity = t.aoMapIntensity),
              this.emissive.copy(t.emissive),
              (this.emissiveMap = t.emissiveMap),
              (this.emissiveIntensity = t.emissiveIntensity),
              (this.bumpMap = t.bumpMap),
              (this.bumpScale = t.bumpScale),
              (this.normalMap = t.normalMap),
              (this.normalMapType = t.normalMapType),
              this.normalScale.copy(t.normalScale),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              (this.alphaMap = t.alphaMap),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.wireframeLinecap = t.wireframeLinecap),
              (this.wireframeLinejoin = t.wireframeLinejoin),
              this
            );
          }
        }
        sh.prototype.isMeshToonMaterial = !0;
        class ah extends wr {
          constructor(t) {
            super(),
              (this.type = "MeshNormalMaterial"),
              (this.bumpMap = null),
              (this.bumpScale = 1),
              (this.normalMap = null),
              (this.normalMapType = an),
              (this.normalScale = new $n(1, 1)),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.fog = !1),
              (this.flatShading = !1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.bumpMap = t.bumpMap),
              (this.bumpScale = t.bumpScale),
              (this.normalMap = t.normalMap),
              (this.normalMapType = t.normalMapType),
              this.normalScale.copy(t.normalScale),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.flatShading = t.flatShading),
              this
            );
          }
        }
        ah.prototype.isMeshNormalMaterial = !0;
        class lh extends wr {
          constructor(t) {
            super(),
              (this.type = "MeshLambertMaterial"),
              (this.color = new Lr(16777215)),
              (this.map = null),
              (this.lightMap = null),
              (this.lightMapIntensity = 1),
              (this.aoMap = null),
              (this.aoMapIntensity = 1),
              (this.emissive = new Lr(0)),
              (this.emissiveIntensity = 1),
              (this.emissiveMap = null),
              (this.specularMap = null),
              (this.alphaMap = null),
              (this.envMap = null),
              (this.combine = $),
              (this.reflectivity = 1),
              (this.refractionRatio = 0.98),
              (this.wireframe = !1),
              (this.wireframeLinewidth = 1),
              (this.wireframeLinecap = "round"),
              (this.wireframeLinejoin = "round"),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.map = t.map),
              (this.lightMap = t.lightMap),
              (this.lightMapIntensity = t.lightMapIntensity),
              (this.aoMap = t.aoMap),
              (this.aoMapIntensity = t.aoMapIntensity),
              this.emissive.copy(t.emissive),
              (this.emissiveMap = t.emissiveMap),
              (this.emissiveIntensity = t.emissiveIntensity),
              (this.specularMap = t.specularMap),
              (this.alphaMap = t.alphaMap),
              (this.envMap = t.envMap),
              (this.combine = t.combine),
              (this.reflectivity = t.reflectivity),
              (this.refractionRatio = t.refractionRatio),
              (this.wireframe = t.wireframe),
              (this.wireframeLinewidth = t.wireframeLinewidth),
              (this.wireframeLinecap = t.wireframeLinecap),
              (this.wireframeLinejoin = t.wireframeLinejoin),
              this
            );
          }
        }
        lh.prototype.isMeshLambertMaterial = !0;
        class ch extends wr {
          constructor(t) {
            super(),
              (this.defines = { MATCAP: "" }),
              (this.type = "MeshMatcapMaterial"),
              (this.color = new Lr(16777215)),
              (this.matcap = null),
              (this.map = null),
              (this.bumpMap = null),
              (this.bumpScale = 1),
              (this.normalMap = null),
              (this.normalMapType = an),
              (this.normalScale = new $n(1, 1)),
              (this.displacementMap = null),
              (this.displacementScale = 1),
              (this.displacementBias = 0),
              (this.alphaMap = null),
              (this.flatShading = !1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.defines = { MATCAP: "" }),
              this.color.copy(t.color),
              (this.matcap = t.matcap),
              (this.map = t.map),
              (this.bumpMap = t.bumpMap),
              (this.bumpScale = t.bumpScale),
              (this.normalMap = t.normalMap),
              (this.normalMapType = t.normalMapType),
              this.normalScale.copy(t.normalScale),
              (this.displacementMap = t.displacementMap),
              (this.displacementScale = t.displacementScale),
              (this.displacementBias = t.displacementBias),
              (this.alphaMap = t.alphaMap),
              (this.flatShading = t.flatShading),
              this
            );
          }
        }
        ch.prototype.isMeshMatcapMaterial = !0;
        class uh extends fc {
          constructor(t) {
            super(),
              (this.type = "LineDashedMaterial"),
              (this.scale = 1),
              (this.dashSize = 3),
              (this.gapSize = 1),
              this.setValues(t);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.scale = t.scale),
              (this.dashSize = t.dashSize),
              (this.gapSize = t.gapSize),
              this
            );
          }
        }
        uh.prototype.isLineDashedMaterial = !0;
        var hh = Object.freeze({
          __proto__: null,
          ShadowMaterial: nh,
          SpriteMaterial: kl,
          RawShaderMaterial: Zo,
          ShaderMaterial: Eo,
          PointsMaterial: Ec,
          MeshPhysicalMaterial: rh,
          MeshStandardMaterial: ih,
          MeshPhongMaterial: oh,
          MeshToonMaterial: sh,
          MeshNormalMaterial: ah,
          MeshLambertMaterial: lh,
          MeshDepthMaterial: pl,
          MeshDistanceMaterial: fl,
          MeshBasicMaterial: Rr,
          MeshMatcapMaterial: ch,
          LineDashedMaterial: uh,
          LineBasicMaterial: fc,
          Material: wr,
        });
        const dh = {
          arraySlice: function (t, e, n) {
            return dh.isTypedArray(t)
              ? new t.constructor(t.subarray(e, void 0 !== n ? n : t.length))
              : t.slice(e, n);
          },
          convertArray: function (t, e, n) {
            return !t || (!n && t.constructor === e)
              ? t
              : "number" == typeof e.BYTES_PER_ELEMENT
              ? new e(t)
              : Array.prototype.slice.call(t);
          },
          isTypedArray: function (t) {
            return ArrayBuffer.isView(t) && !(t instanceof DataView);
          },
          getKeyframeOrder: function (t) {
            const e = t.length,
              n = new Array(e);
            for (let t = 0; t !== e; ++t) n[t] = t;
            return (
              n.sort(function (e, n) {
                return t[e] - t[n];
              }),
              n
            );
          },
          sortedArray: function (t, e, n) {
            const i = t.length,
              r = new t.constructor(i);
            for (let o = 0, s = 0; s !== i; ++o) {
              const i = n[o] * e;
              for (let n = 0; n !== e; ++n) r[s++] = t[i + n];
            }
            return r;
          },
          flattenJSON: function (t, e, n, i) {
            let r = 1,
              o = t[0];
            for (; void 0 !== o && void 0 === o[i]; ) o = t[r++];
            if (void 0 === o) return;
            let s = o[i];
            if (void 0 !== s)
              if (Array.isArray(s))
                do {
                  (s = o[i]),
                    void 0 !== s && (e.push(o.time), n.push.apply(n, s)),
                    (o = t[r++]);
                } while (void 0 !== o);
              else if (void 0 !== s.toArray)
                do {
                  (s = o[i]),
                    void 0 !== s && (e.push(o.time), s.toArray(n, n.length)),
                    (o = t[r++]);
                } while (void 0 !== o);
              else
                do {
                  (s = o[i]),
                    void 0 !== s && (e.push(o.time), n.push(s)),
                    (o = t[r++]);
                } while (void 0 !== o);
          },
          subclip: function (t, e, n, i, r = 30) {
            const o = t.clone();
            o.name = e;
            const s = [];
            for (let t = 0; t < o.tracks.length; ++t) {
              const e = o.tracks[t],
                a = e.getValueSize(),
                l = [],
                c = [];
              for (let t = 0; t < e.times.length; ++t) {
                const o = e.times[t] * r;
                if (!(o < n || o >= i)) {
                  l.push(e.times[t]);
                  for (let n = 0; n < a; ++n) c.push(e.values[t * a + n]);
                }
              }
              0 !== l.length &&
                ((e.times = dh.convertArray(l, e.times.constructor)),
                (e.values = dh.convertArray(c, e.values.constructor)),
                s.push(e));
            }
            o.tracks = s;
            let a = 1 / 0;
            for (let t = 0; t < o.tracks.length; ++t)
              a > o.tracks[t].times[0] && (a = o.tracks[t].times[0]);
            for (let t = 0; t < o.tracks.length; ++t) o.tracks[t].shift(-1 * a);
            return o.resetDuration(), o;
          },
          makeClipAdditive: function (t, e = 0, n = t, i = 30) {
            i <= 0 && (i = 30);
            const r = n.tracks.length,
              o = e / i;
            for (let e = 0; e < r; ++e) {
              const i = n.tracks[e],
                r = i.ValueTypeName;
              if ("bool" === r || "string" === r) continue;
              const s = t.tracks.find(function (t) {
                return t.name === i.name && t.ValueTypeName === r;
              });
              if (void 0 === s) continue;
              let a = 0;
              const l = i.getValueSize();
              i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline &&
                (a = l / 3);
              let c = 0;
              const u = s.getValueSize();
              s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline &&
                (c = u / 3);
              const h = i.times.length - 1;
              let d;
              if (o <= i.times[0]) {
                const t = a,
                  e = l - a;
                d = dh.arraySlice(i.values, t, e);
              } else if (o >= i.times[h]) {
                const t = h * l + a,
                  e = t + l - a;
                d = dh.arraySlice(i.values, t, e);
              } else {
                const t = i.createInterpolant(),
                  e = a,
                  n = l - a;
                t.evaluate(o), (d = dh.arraySlice(t.resultBuffer, e, n));
              }
              "quaternion" === r &&
                new si().fromArray(d).normalize().conjugate().toArray(d);
              const p = s.times.length;
              for (let t = 0; t < p; ++t) {
                const e = t * u + c;
                if ("quaternion" === r)
                  si.multiplyQuaternionsFlat(s.values, e, d, 0, s.values, e);
                else {
                  const t = u - 2 * c;
                  for (let n = 0; n < t; ++n) s.values[e + n] -= d[n];
                }
              }
            }
            return (t.blendMode = qe), t;
          },
        };
        class ph {
          constructor(t, e, n, i) {
            (this.parameterPositions = t),
              (this._cachedIndex = 0),
              (this.resultBuffer = void 0 !== i ? i : new e.constructor(n)),
              (this.sampleValues = e),
              (this.valueSize = n),
              (this.settings = null),
              (this.DefaultSettings_ = {});
          }
          evaluate(t) {
            const e = this.parameterPositions;
            let n = this._cachedIndex,
              i = e[n],
              r = e[n - 1];
            t: {
              e: {
                let o;
                n: {
                  i: if (!(t < i)) {
                    for (let o = n + 2; ; ) {
                      if (void 0 === i) {
                        if (t < r) break i;
                        return (
                          (n = e.length),
                          (this._cachedIndex = n),
                          this.afterEnd_(n - 1, t, r)
                        );
                      }
                      if (n === o) break;
                      if (((r = i), (i = e[++n]), t < i)) break e;
                    }
                    o = e.length;
                    break n;
                  }
                  if (t >= r) break t;
                  {
                    const s = e[1];
                    t < s && ((n = 2), (r = s));
                    for (let o = n - 2; ; ) {
                      if (void 0 === r)
                        return (
                          (this._cachedIndex = 0), this.beforeStart_(0, t, i)
                        );
                      if (n === o) break;
                      if (((i = r), (r = e[--n - 1]), t >= r)) break e;
                    }
                    (o = n), (n = 0);
                  }
                }
                for (; n < o; ) {
                  const i = (n + o) >>> 1;
                  t < e[i] ? (o = i) : (n = i + 1);
                }
                if (((i = e[n]), (r = e[n - 1]), void 0 === r))
                  return (this._cachedIndex = 0), this.beforeStart_(0, t, i);
                if (void 0 === i)
                  return (
                    (n = e.length),
                    (this._cachedIndex = n),
                    this.afterEnd_(n - 1, r, t)
                  );
              }
              (this._cachedIndex = n), this.intervalChanged_(n, r, i);
            }
            return this.interpolate_(n, r, t, i);
          }
          getSettings_() {
            return this.settings || this.DefaultSettings_;
          }
          copySampleValue_(t) {
            const e = this.resultBuffer,
              n = this.sampleValues,
              i = this.valueSize,
              r = t * i;
            for (let t = 0; t !== i; ++t) e[t] = n[r + t];
            return e;
          }
          interpolate_() {
            throw new Error("call to abstract method");
          }
          intervalChanged_() {}
        }
        (ph.prototype.beforeStart_ = ph.prototype.copySampleValue_),
          (ph.prototype.afterEnd_ = ph.prototype.copySampleValue_);
        class fh extends ph {
          constructor(t, e, n, i) {
            super(t, e, n, i),
              (this._weightPrev = -0),
              (this._offsetPrev = -0),
              (this._weightNext = -0),
              (this._offsetNext = -0),
              (this.DefaultSettings_ = { endingStart: Ue, endingEnd: Ue });
          }
          intervalChanged_(t, e, n) {
            const i = this.parameterPositions;
            let r = t - 2,
              o = t + 1,
              s = i[r],
              a = i[o];
            if (void 0 === s)
              switch (this.getSettings_().endingStart) {
                case Ve:
                  (r = t), (s = 2 * e - n);
                  break;
                case Ge:
                  (r = i.length - 2), (s = e + i[r] - i[r + 1]);
                  break;
                default:
                  (r = t), (s = n);
              }
            if (void 0 === a)
              switch (this.getSettings_().endingEnd) {
                case Ve:
                  (o = t), (a = 2 * n - e);
                  break;
                case Ge:
                  (o = 1), (a = n + i[1] - i[0]);
                  break;
                default:
                  (o = t - 1), (a = e);
              }
            const l = 0.5 * (n - e),
              c = this.valueSize;
            (this._weightPrev = l / (e - s)),
              (this._weightNext = l / (a - n)),
              (this._offsetPrev = r * c),
              (this._offsetNext = o * c);
          }
          interpolate_(t, e, n, i) {
            const r = this.resultBuffer,
              o = this.sampleValues,
              s = this.valueSize,
              a = t * s,
              l = a - s,
              c = this._offsetPrev,
              u = this._offsetNext,
              h = this._weightPrev,
              d = this._weightNext,
              p = (n - e) / (i - e),
              f = p * p,
              m = f * p,
              g = -h * m + 2 * h * f - h * p,
              v = (1 + h) * m + (-1.5 - 2 * h) * f + (-0.5 + h) * p + 1,
              y = (-1 - d) * m + (1.5 + d) * f + 0.5 * p,
              x = d * m - d * f;
            for (let t = 0; t !== s; ++t)
              r[t] = g * o[c + t] + v * o[l + t] + y * o[a + t] + x * o[u + t];
            return r;
          }
        }
        class mh extends ph {
          constructor(t, e, n, i) {
            super(t, e, n, i);
          }
          interpolate_(t, e, n, i) {
            const r = this.resultBuffer,
              o = this.sampleValues,
              s = this.valueSize,
              a = t * s,
              l = a - s,
              c = (n - e) / (i - e),
              u = 1 - c;
            for (let t = 0; t !== s; ++t) r[t] = o[l + t] * u + o[a + t] * c;
            return r;
          }
        }
        class gh extends ph {
          constructor(t, e, n, i) {
            super(t, e, n, i);
          }
          interpolate_(t) {
            return this.copySampleValue_(t - 1);
          }
        }
        class vh {
          constructor(t, e, n, i) {
            if (void 0 === t)
              throw new Error("THREE.KeyframeTrack: track name is undefined");
            if (void 0 === e || 0 === e.length)
              throw new Error(
                "THREE.KeyframeTrack: no keyframes in track named " + t
              );
            (this.name = t),
              (this.times = dh.convertArray(e, this.TimeBufferType)),
              (this.values = dh.convertArray(n, this.ValueBufferType)),
              this.setInterpolation(i || this.DefaultInterpolation);
          }
          static toJSON(t) {
            const e = t.constructor;
            let n;
            if (e.toJSON !== this.toJSON) n = e.toJSON(t);
            else {
              n = {
                name: t.name,
                times: dh.convertArray(t.times, Array),
                values: dh.convertArray(t.values, Array),
              };
              const e = t.getInterpolation();
              e !== t.DefaultInterpolation && (n.interpolation = e);
            }
            return (n.type = t.ValueTypeName), n;
          }
          InterpolantFactoryMethodDiscrete(t) {
            return new gh(this.times, this.values, this.getValueSize(), t);
          }
          InterpolantFactoryMethodLinear(t) {
            return new mh(this.times, this.values, this.getValueSize(), t);
          }
          InterpolantFactoryMethodSmooth(t) {
            return new fh(this.times, this.values, this.getValueSize(), t);
          }
          setInterpolation(t) {
            let e;
            switch (t) {
              case ze:
                e = this.InterpolantFactoryMethodDiscrete;
                break;
              case He:
                e = this.InterpolantFactoryMethodLinear;
                break;
              case je:
                e = this.InterpolantFactoryMethodSmooth;
            }
            if (void 0 === e) {
              const e =
                "unsupported interpolation for " +
                this.ValueTypeName +
                " keyframe track named " +
                this.name;
              if (void 0 === this.createInterpolant) {
                if (t === this.DefaultInterpolation) throw new Error(e);
                this.setInterpolation(this.DefaultInterpolation);
              }
              return console.warn("THREE.KeyframeTrack:", e), this;
            }
            return (this.createInterpolant = e), this;
          }
          getInterpolation() {
            switch (this.createInterpolant) {
              case this.InterpolantFactoryMethodDiscrete:
                return ze;
              case this.InterpolantFactoryMethodLinear:
                return He;
              case this.InterpolantFactoryMethodSmooth:
                return je;
            }
          }
          getValueSize() {
            return this.values.length / this.times.length;
          }
          shift(t) {
            if (0 !== t) {
              const e = this.times;
              for (let n = 0, i = e.length; n !== i; ++n) e[n] += t;
            }
            return this;
          }
          scale(t) {
            if (1 !== t) {
              const e = this.times;
              for (let n = 0, i = e.length; n !== i; ++n) e[n] *= t;
            }
            return this;
          }
          trim(t, e) {
            const n = this.times,
              i = n.length;
            let r = 0,
              o = i - 1;
            for (; r !== i && n[r] < t; ) ++r;
            for (; -1 !== o && n[o] > e; ) --o;
            if ((++o, 0 !== r || o !== i)) {
              r >= o && ((o = Math.max(o, 1)), (r = o - 1));
              const t = this.getValueSize();
              (this.times = dh.arraySlice(n, r, o)),
                (this.values = dh.arraySlice(this.values, r * t, o * t));
            }
            return this;
          }
          validate() {
            let t = !0;
            const e = this.getValueSize();
            e - Math.floor(e) != 0 &&
              (console.error(
                "THREE.KeyframeTrack: Invalid value size in track.",
                this
              ),
              (t = !1));
            const n = this.times,
              i = this.values,
              r = n.length;
            0 === r &&
              (console.error("THREE.KeyframeTrack: Track is empty.", this),
              (t = !1));
            let o = null;
            for (let e = 0; e !== r; e++) {
              const i = n[e];
              if ("number" == typeof i && isNaN(i)) {
                console.error(
                  "THREE.KeyframeTrack: Time is not a valid number.",
                  this,
                  e,
                  i
                ),
                  (t = !1);
                break;
              }
              if (null !== o && o > i) {
                console.error(
                  "THREE.KeyframeTrack: Out of order keys.",
                  this,
                  e,
                  i,
                  o
                ),
                  (t = !1);
                break;
              }
              o = i;
            }
            if (void 0 !== i && dh.isTypedArray(i))
              for (let e = 0, n = i.length; e !== n; ++e) {
                const n = i[e];
                if (isNaN(n)) {
                  console.error(
                    "THREE.KeyframeTrack: Value is not a valid number.",
                    this,
                    e,
                    n
                  ),
                    (t = !1);
                  break;
                }
              }
            return t;
          }
          optimize() {
            const t = dh.arraySlice(this.times),
              e = dh.arraySlice(this.values),
              n = this.getValueSize(),
              i = this.getInterpolation() === je,
              r = t.length - 1;
            let o = 1;
            for (let s = 1; s < r; ++s) {
              let r = !1;
              const a = t[s];
              if (a !== t[s + 1] && (1 !== s || a !== t[0]))
                if (i) r = !0;
                else {
                  const t = s * n,
                    i = t - n,
                    o = t + n;
                  for (let s = 0; s !== n; ++s) {
                    const n = e[t + s];
                    if (n !== e[i + s] || n !== e[o + s]) {
                      r = !0;
                      break;
                    }
                  }
                }
              if (r) {
                if (s !== o) {
                  t[o] = t[s];
                  const i = s * n,
                    r = o * n;
                  for (let t = 0; t !== n; ++t) e[r + t] = e[i + t];
                }
                ++o;
              }
            }
            if (r > 0) {
              t[o] = t[r];
              for (let t = r * n, i = o * n, s = 0; s !== n; ++s)
                e[i + s] = e[t + s];
              ++o;
            }
            return (
              o !== t.length
                ? ((this.times = dh.arraySlice(t, 0, o)),
                  (this.values = dh.arraySlice(e, 0, o * n)))
                : ((this.times = t), (this.values = e)),
              this
            );
          }
          clone() {
            const t = dh.arraySlice(this.times, 0),
              e = dh.arraySlice(this.values, 0),
              n = new (0, this.constructor)(this.name, t, e);
            return (n.createInterpolant = this.createInterpolant), n;
          }
        }
        (vh.prototype.TimeBufferType = Float32Array),
          (vh.prototype.ValueBufferType = Float32Array),
          (vh.prototype.DefaultInterpolation = He);
        class yh extends vh {}
        (yh.prototype.ValueTypeName = "bool"),
          (yh.prototype.ValueBufferType = Array),
          (yh.prototype.DefaultInterpolation = ze),
          (yh.prototype.InterpolantFactoryMethodLinear = void 0),
          (yh.prototype.InterpolantFactoryMethodSmooth = void 0);
        class xh extends vh {}
        xh.prototype.ValueTypeName = "color";
        class _h extends vh {}
        _h.prototype.ValueTypeName = "number";
        class bh extends ph {
          constructor(t, e, n, i) {
            super(t, e, n, i);
          }
          interpolate_(t, e, n, i) {
            const r = this.resultBuffer,
              o = this.sampleValues,
              s = this.valueSize,
              a = (n - e) / (i - e);
            let l = t * s;
            for (let t = l + s; l !== t; l += 4)
              si.slerpFlat(r, 0, o, l - s, o, l, a);
            return r;
          }
        }
        class wh extends vh {
          InterpolantFactoryMethodLinear(t) {
            return new bh(this.times, this.values, this.getValueSize(), t);
          }
        }
        (wh.prototype.ValueTypeName = "quaternion"),
          (wh.prototype.DefaultInterpolation = He),
          (wh.prototype.InterpolantFactoryMethodSmooth = void 0);
        class Mh extends vh {}
        (Mh.prototype.ValueTypeName = "string"),
          (Mh.prototype.ValueBufferType = Array),
          (Mh.prototype.DefaultInterpolation = ze),
          (Mh.prototype.InterpolantFactoryMethodLinear = void 0),
          (Mh.prototype.InterpolantFactoryMethodSmooth = void 0);
        class Sh extends vh {}
        Sh.prototype.ValueTypeName = "vector";
        class Eh {
          constructor(t, e = -1, n, i = We) {
            (this.name = t),
              (this.tracks = n),
              (this.duration = e),
              (this.blendMode = i),
              (this.uuid = jn()),
              this.duration < 0 && this.resetDuration();
          }
          static parse(t) {
            const e = [],
              n = t.tracks,
              i = 1 / (t.fps || 1);
            for (let t = 0, r = n.length; t !== r; ++t)
              e.push(Th(n[t]).scale(i));
            const r = new this(t.name, t.duration, e, t.blendMode);
            return (r.uuid = t.uuid), r;
          }
          static toJSON(t) {
            const e = [],
              n = t.tracks,
              i = {
                name: t.name,
                duration: t.duration,
                tracks: e,
                uuid: t.uuid,
                blendMode: t.blendMode,
              };
            for (let t = 0, i = n.length; t !== i; ++t) e.push(vh.toJSON(n[t]));
            return i;
          }
          static CreateFromMorphTargetSequence(t, e, n, i) {
            const r = e.length,
              o = [];
            for (let t = 0; t < r; t++) {
              let s = [],
                a = [];
              s.push((t + r - 1) % r, t, (t + 1) % r), a.push(0, 1, 0);
              const l = dh.getKeyframeOrder(s);
              (s = dh.sortedArray(s, 1, l)),
                (a = dh.sortedArray(a, 1, l)),
                i || 0 !== s[0] || (s.push(r), a.push(a[0])),
                o.push(
                  new _h(
                    ".morphTargetInfluences[" + e[t].name + "]",
                    s,
                    a
                  ).scale(1 / n)
                );
            }
            return new this(t, -1, o);
          }
          static findByName(t, e) {
            let n = t;
            if (!Array.isArray(t)) {
              const e = t;
              n = (e.geometry && e.geometry.animations) || e.animations;
            }
            for (let t = 0; t < n.length; t++) if (n[t].name === e) return n[t];
            return null;
          }
          static CreateClipsFromMorphTargetSequences(t, e, n) {
            const i = {},
              r = /^([\w-]*?)([\d]+)$/;
            for (let e = 0, n = t.length; e < n; e++) {
              const n = t[e],
                o = n.name.match(r);
              if (o && o.length > 1) {
                const t = o[1];
                let e = i[t];
                e || (i[t] = e = []), e.push(n);
              }
            }
            const o = [];
            for (const t in i)
              o.push(this.CreateFromMorphTargetSequence(t, i[t], e, n));
            return o;
          }
          static parseAnimation(t, e) {
            if (!t)
              return (
                console.error(
                  "THREE.AnimationClip: No animation in JSONLoader data."
                ),
                null
              );
            const n = function (t, e, n, i, r) {
                if (0 !== n.length) {
                  const o = [],
                    s = [];
                  dh.flattenJSON(n, o, s, i),
                    0 !== o.length && r.push(new t(e, o, s));
                }
              },
              i = [],
              r = t.name || "default",
              o = t.fps || 30,
              s = t.blendMode;
            let a = t.length || -1;
            const l = t.hierarchy || [];
            for (let t = 0; t < l.length; t++) {
              const r = l[t].keys;
              if (r && 0 !== r.length)
                if (r[0].morphTargets) {
                  const t = {};
                  let e;
                  for (e = 0; e < r.length; e++)
                    if (r[e].morphTargets)
                      for (let n = 0; n < r[e].morphTargets.length; n++)
                        t[r[e].morphTargets[n]] = -1;
                  for (const n in t) {
                    const t = [],
                      o = [];
                    for (let i = 0; i !== r[e].morphTargets.length; ++i) {
                      const i = r[e];
                      t.push(i.time), o.push(i.morphTarget === n ? 1 : 0);
                    }
                    i.push(new _h(".morphTargetInfluence[" + n + "]", t, o));
                  }
                  a = t.length * (o || 1);
                } else {
                  const o = ".bones[" + e[t].name + "]";
                  n(Sh, o + ".position", r, "pos", i),
                    n(wh, o + ".quaternion", r, "rot", i),
                    n(Sh, o + ".scale", r, "scl", i);
                }
            }
            return 0 === i.length ? null : new this(r, a, i, s);
          }
          resetDuration() {
            let t = 0;
            for (let e = 0, n = this.tracks.length; e !== n; ++e) {
              const n = this.tracks[e];
              t = Math.max(t, n.times[n.times.length - 1]);
            }
            return (this.duration = t), this;
          }
          trim() {
            for (let t = 0; t < this.tracks.length; t++)
              this.tracks[t].trim(0, this.duration);
            return this;
          }
          validate() {
            let t = !0;
            for (let e = 0; e < this.tracks.length; e++)
              t = t && this.tracks[e].validate();
            return t;
          }
          optimize() {
            for (let t = 0; t < this.tracks.length; t++)
              this.tracks[t].optimize();
            return this;
          }
          clone() {
            const t = [];
            for (let e = 0; e < this.tracks.length; e++)
              t.push(this.tracks[e].clone());
            return new this.constructor(
              this.name,
              this.duration,
              t,
              this.blendMode
            );
          }
          toJSON() {
            return this.constructor.toJSON(this);
          }
        }
        function Th(t) {
          if (void 0 === t.type)
            throw new Error(
              "THREE.KeyframeTrack: track type undefined, can not parse"
            );
          const e = (function (t) {
            switch (t.toLowerCase()) {
              case "scalar":
              case "double":
              case "float":
              case "number":
              case "integer":
                return _h;
              case "vector":
              case "vector2":
              case "vector3":
              case "vector4":
                return Sh;
              case "color":
                return xh;
              case "quaternion":
                return wh;
              case "bool":
              case "boolean":
                return yh;
              case "string":
                return Mh;
            }
            throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + t);
          })(t.type);
          if (void 0 === t.times) {
            const e = [],
              n = [];
            dh.flattenJSON(t.keys, e, n, "value"),
              (t.times = e),
              (t.values = n);
          }
          return void 0 !== e.parse
            ? e.parse(t)
            : new e(t.name, t.times, t.values, t.interpolation);
        }
        const Ah = {
          enabled: !1,
          files: {},
          add: function (t, e) {
            !1 !== this.enabled && (this.files[t] = e);
          },
          get: function (t) {
            if (!1 !== this.enabled) return this.files[t];
          },
          remove: function (t) {
            delete this.files[t];
          },
          clear: function () {
            this.files = {};
          },
        };
        class Ch {
          constructor(t, e, n) {
            const i = this;
            let r,
              o = !1,
              s = 0,
              a = 0;
            const l = [];
            (this.onStart = void 0),
              (this.onLoad = t),
              (this.onProgress = e),
              (this.onError = n),
              (this.itemStart = function (t) {
                a++,
                  !1 === o && void 0 !== i.onStart && i.onStart(t, s, a),
                  (o = !0);
              }),
              (this.itemEnd = function (t) {
                s++,
                  void 0 !== i.onProgress && i.onProgress(t, s, a),
                  s === a && ((o = !1), void 0 !== i.onLoad && i.onLoad());
              }),
              (this.itemError = function (t) {
                void 0 !== i.onError && i.onError(t);
              }),
              (this.resolveURL = function (t) {
                return r ? r(t) : t;
              }),
              (this.setURLModifier = function (t) {
                return (r = t), this;
              }),
              (this.addHandler = function (t, e) {
                return l.push(t, e), this;
              }),
              (this.removeHandler = function (t) {
                const e = l.indexOf(t);
                return -1 !== e && l.splice(e, 2), this;
              }),
              (this.getHandler = function (t) {
                for (let e = 0, n = l.length; e < n; e += 2) {
                  const n = l[e],
                    i = l[e + 1];
                  if ((n.global && (n.lastIndex = 0), n.test(t))) return i;
                }
                return null;
              });
          }
        }
        const Lh = new Ch();
        class Rh {
          constructor(t) {
            (this.manager = void 0 !== t ? t : Lh),
              (this.crossOrigin = "anonymous"),
              (this.withCredentials = !1),
              (this.path = ""),
              (this.resourcePath = ""),
              (this.requestHeader = {});
          }
          load() {}
          loadAsync(t, e) {
            const n = this;
            return new Promise(function (i, r) {
              n.load(t, i, e, r);
            });
          }
          parse() {}
          setCrossOrigin(t) {
            return (this.crossOrigin = t), this;
          }
          setWithCredentials(t) {
            return (this.withCredentials = t), this;
          }
          setPath(t) {
            return (this.path = t), this;
          }
          setResourcePath(t) {
            return (this.resourcePath = t), this;
          }
          setRequestHeader(t) {
            return (this.requestHeader = t), this;
          }
        }
        const Ph = {};
        class Oh extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            void 0 === t && (t = ""),
              void 0 !== this.path && (t = this.path + t),
              (t = this.manager.resolveURL(t));
            const r = this,
              o = Ah.get(t);
            if (void 0 !== o)
              return (
                r.manager.itemStart(t),
                setTimeout(function () {
                  e && e(o), r.manager.itemEnd(t);
                }, 0),
                o
              );
            if (void 0 !== Ph[t])
              return void Ph[t].push({ onLoad: e, onProgress: n, onError: i });
            const s = t.match(/^data:(.*?)(;base64)?,(.*)$/);
            let a;
            if (s) {
              const n = s[1],
                o = !!s[2];
              let a = s[3];
              (a = decodeURIComponent(a)), o && (a = atob(a));
              try {
                let i;
                const o = (this.responseType || "").toLowerCase();
                switch (o) {
                  case "arraybuffer":
                  case "blob":
                    const t = new Uint8Array(a.length);
                    for (let e = 0; e < a.length; e++) t[e] = a.charCodeAt(e);
                    i =
                      "blob" === o
                        ? new Blob([t.buffer], { type: n })
                        : t.buffer;
                    break;
                  case "document":
                    const e = new DOMParser();
                    i = e.parseFromString(a, n);
                    break;
                  case "json":
                    i = JSON.parse(a);
                    break;
                  default:
                    i = a;
                }
                setTimeout(function () {
                  e && e(i), r.manager.itemEnd(t);
                }, 0);
              } catch (e) {
                setTimeout(function () {
                  i && i(e), r.manager.itemError(t), r.manager.itemEnd(t);
                }, 0);
              }
            } else {
              (Ph[t] = []),
                Ph[t].push({ onLoad: e, onProgress: n, onError: i }),
                (a = new XMLHttpRequest()),
                a.open("GET", t, !0),
                a.addEventListener(
                  "load",
                  function (e) {
                    const n = this.response,
                      i = Ph[t];
                    if (
                      (delete Ph[t], 200 === this.status || 0 === this.status)
                    ) {
                      0 === this.status &&
                        console.warn(
                          "THREE.FileLoader: HTTP Status 0 received."
                        ),
                        Ah.add(t, n);
                      for (let t = 0, e = i.length; t < e; t++) {
                        const e = i[t];
                        e.onLoad && e.onLoad(n);
                      }
                      r.manager.itemEnd(t);
                    } else {
                      for (let t = 0, n = i.length; t < n; t++) {
                        const n = i[t];
                        n.onError && n.onError(e);
                      }
                      r.manager.itemError(t), r.manager.itemEnd(t);
                    }
                  },
                  !1
                ),
                a.addEventListener(
                  "progress",
                  function (e) {
                    const n = Ph[t];
                    for (let t = 0, i = n.length; t < i; t++) {
                      const i = n[t];
                      i.onProgress && i.onProgress(e);
                    }
                  },
                  !1
                ),
                a.addEventListener(
                  "error",
                  function (e) {
                    const n = Ph[t];
                    delete Ph[t];
                    for (let t = 0, i = n.length; t < i; t++) {
                      const i = n[t];
                      i.onError && i.onError(e);
                    }
                    r.manager.itemError(t), r.manager.itemEnd(t);
                  },
                  !1
                ),
                a.addEventListener(
                  "abort",
                  function (e) {
                    const n = Ph[t];
                    delete Ph[t];
                    for (let t = 0, i = n.length; t < i; t++) {
                      const i = n[t];
                      i.onError && i.onError(e);
                    }
                    r.manager.itemError(t), r.manager.itemEnd(t);
                  },
                  !1
                ),
                void 0 !== this.responseType &&
                  (a.responseType = this.responseType),
                void 0 !== this.withCredentials &&
                  (a.withCredentials = this.withCredentials),
                a.overrideMimeType &&
                  a.overrideMimeType(
                    void 0 !== this.mimeType ? this.mimeType : "text/plain"
                  );
              for (const t in this.requestHeader)
                a.setRequestHeader(t, this.requestHeader[t]);
              a.send(null);
            }
            return r.manager.itemStart(t), a;
          }
          setResponseType(t) {
            return (this.responseType = t), this;
          }
          setMimeType(t) {
            return (this.mimeType = t), this;
          }
        }
        class kh extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = new Oh(this.manager);
            o.setPath(this.path),
              o.setRequestHeader(this.requestHeader),
              o.setWithCredentials(this.withCredentials),
              o.load(
                t,
                function (n) {
                  try {
                    e(r.parse(JSON.parse(n)));
                  } catch (e) {
                    i ? i(e) : console.error(e), r.manager.itemError(t);
                  }
                },
                n,
                i
              );
          }
          parse(t) {
            const e = [];
            for (let n = 0; n < t.length; n++) {
              const i = Eh.parse(t[n]);
              e.push(i);
            }
            return e;
          }
        }
        class Ih extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = [],
              s = new kc(),
              a = new Oh(this.manager);
            a.setPath(this.path),
              a.setResponseType("arraybuffer"),
              a.setRequestHeader(this.requestHeader),
              a.setWithCredentials(r.withCredentials);
            let l = 0;
            function c(c) {
              a.load(
                t[c],
                function (t) {
                  const n = r.parse(t, !0);
                  (o[c] = {
                    width: n.width,
                    height: n.height,
                    format: n.format,
                    mipmaps: n.mipmaps,
                  }),
                    (l += 1),
                    6 === l &&
                      (1 === n.mipmapCount && (s.minFilter = xt),
                      (s.image = o),
                      (s.format = n.format),
                      (s.needsUpdate = !0),
                      e && e(s));
                },
                n,
                i
              );
            }
            if (Array.isArray(t))
              for (let e = 0, n = t.length; e < n; ++e) c(e);
            else
              a.load(
                t,
                function (t) {
                  const n = r.parse(t, !0);
                  if (n.isCubemap) {
                    const t = n.mipmaps.length / n.mipmapCount;
                    for (let e = 0; e < t; e++) {
                      o[e] = { mipmaps: [] };
                      for (let t = 0; t < n.mipmapCount; t++)
                        o[e].mipmaps.push(n.mipmaps[e * n.mipmapCount + t]),
                          (o[e].format = n.format),
                          (o[e].width = n.width),
                          (o[e].height = n.height);
                    }
                    s.image = o;
                  } else
                    (s.image.width = n.width),
                      (s.image.height = n.height),
                      (s.mipmaps = n.mipmaps);
                  1 === n.mipmapCount && (s.minFilter = xt),
                    (s.format = n.format),
                    (s.needsUpdate = !0),
                    e && e(s);
                },
                n,
                i
              );
            return s;
          }
        }
        class Dh extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            void 0 !== this.path && (t = this.path + t),
              (t = this.manager.resolveURL(t));
            const r = this,
              o = Ah.get(t);
            if (void 0 !== o)
              return (
                r.manager.itemStart(t),
                setTimeout(function () {
                  e && e(o), r.manager.itemEnd(t);
                }, 0),
                o
              );
            const s = document.createElementNS(
              "http://www.w3.org/1999/xhtml",
              "img"
            );
            function a() {
              s.removeEventListener("load", a, !1),
                s.removeEventListener("error", l, !1),
                Ah.add(t, this),
                e && e(this),
                r.manager.itemEnd(t);
            }
            function l(e) {
              s.removeEventListener("load", a, !1),
                s.removeEventListener("error", l, !1),
                i && i(e),
                r.manager.itemError(t),
                r.manager.itemEnd(t);
            }
            return (
              s.addEventListener("load", a, !1),
              s.addEventListener("error", l, !1),
              "data:" !== t.substr(0, 5) &&
                void 0 !== this.crossOrigin &&
                (s.crossOrigin = this.crossOrigin),
              r.manager.itemStart(t),
              (s.src = t),
              s
            );
          }
        }
        class Bh extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = new Ro(),
              o = new Dh(this.manager);
            o.setCrossOrigin(this.crossOrigin), o.setPath(this.path);
            let s = 0;
            function a(n) {
              o.load(
                t[n],
                function (t) {
                  (r.images[n] = t),
                    s++,
                    6 === s && ((r.needsUpdate = !0), e && e(r));
                },
                void 0,
                i
              );
            }
            for (let e = 0; e < t.length; ++e) a(e);
            return r;
          }
        }
        class Nh extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = new oc(),
              s = new Oh(this.manager);
            return (
              s.setResponseType("arraybuffer"),
              s.setRequestHeader(this.requestHeader),
              s.setPath(this.path),
              s.setWithCredentials(r.withCredentials),
              s.load(
                t,
                function (t) {
                  const n = r.parse(t);
                  n &&
                    (void 0 !== n.image
                      ? (o.image = n.image)
                      : void 0 !== n.data &&
                        ((o.image.width = n.width),
                        (o.image.height = n.height),
                        (o.image.data = n.data)),
                    (o.wrapS = void 0 !== n.wrapS ? n.wrapS : dt),
                    (o.wrapT = void 0 !== n.wrapT ? n.wrapT : dt),
                    (o.magFilter = void 0 !== n.magFilter ? n.magFilter : xt),
                    (o.minFilter = void 0 !== n.minFilter ? n.minFilter : xt),
                    (o.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1),
                    void 0 !== n.encoding && (o.encoding = n.encoding),
                    void 0 !== n.flipY && (o.flipY = n.flipY),
                    void 0 !== n.format && (o.format = n.format),
                    void 0 !== n.type && (o.type = n.type),
                    void 0 !== n.mipmaps &&
                      ((o.mipmaps = n.mipmaps), (o.minFilter = wt)),
                    1 === n.mipmapCount && (o.minFilter = xt),
                    void 0 !== n.generateMipmaps &&
                      (o.generateMipmaps = n.generateMipmaps),
                    (o.needsUpdate = !0),
                    e && e(o, n));
                },
                n,
                i
              ),
              o
            );
          }
        }
        class Fh extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = new ti(),
              o = new Dh(this.manager);
            return (
              o.setCrossOrigin(this.crossOrigin),
              o.setPath(this.path),
              o.load(
                t,
                function (n) {
                  r.image = n;
                  const i =
                    t.search(/\.jpe?g($|\?)/i) > 0 ||
                    0 === t.search(/^data\:image\/jpeg/);
                  (r.format = i ? Nt : Ft),
                    (r.needsUpdate = !0),
                    void 0 !== e && e(r);
                },
                n,
                i
              ),
              r
            );
          }
        }
        class zh extends qc {
          constructor() {
            super(),
              (this.type = "CurvePath"),
              (this.curves = []),
              (this.autoClose = !1);
          }
          add(t) {
            this.curves.push(t);
          }
          closePath() {
            const t = this.curves[0].getPoint(0),
              e = this.curves[this.curves.length - 1].getPoint(1);
            t.equals(e) || this.curves.push(new su(e, t));
          }
          getPoint(t) {
            const e = t * this.getLength(),
              n = this.getCurveLengths();
            let i = 0;
            for (; i < n.length; ) {
              if (n[i] >= e) {
                const t = n[i] - e,
                  r = this.curves[i],
                  o = r.getLength(),
                  s = 0 === o ? 0 : 1 - t / o;
                return r.getPointAt(s);
              }
              i++;
            }
            return null;
          }
          getLength() {
            const t = this.getCurveLengths();
            return t[t.length - 1];
          }
          updateArcLengths() {
            (this.needsUpdate = !0),
              (this.cacheLengths = null),
              this.getCurveLengths();
          }
          getCurveLengths() {
            if (
              this.cacheLengths &&
              this.cacheLengths.length === this.curves.length
            )
              return this.cacheLengths;
            const t = [];
            let e = 0;
            for (let n = 0, i = this.curves.length; n < i; n++)
              (e += this.curves[n].getLength()), t.push(e);
            return (this.cacheLengths = t), t;
          }
          getSpacedPoints(t = 40) {
            const e = [];
            for (let n = 0; n <= t; n++) e.push(this.getPoint(n / t));
            return this.autoClose && e.push(e[0]), e;
          }
          getPoints(t = 12) {
            const e = [];
            let n;
            for (let i = 0, r = this.curves; i < r.length; i++) {
              const o = r[i],
                s =
                  o && o.isEllipseCurve
                    ? 2 * t
                    : o && (o.isLineCurve || o.isLineCurve3)
                    ? 1
                    : o && o.isSplineCurve
                    ? t * o.points.length
                    : t,
                a = o.getPoints(s);
              for (let t = 0; t < a.length; t++) {
                const i = a[t];
                (n && n.equals(i)) || (e.push(i), (n = i));
              }
            }
            return (
              this.autoClose &&
                e.length > 1 &&
                !e[e.length - 1].equals(e[0]) &&
                e.push(e[0]),
              e
            );
          }
          copy(t) {
            super.copy(t), (this.curves = []);
            for (let e = 0, n = t.curves.length; e < n; e++) {
              const n = t.curves[e];
              this.curves.push(n.clone());
            }
            return (this.autoClose = t.autoClose), this;
          }
          toJSON() {
            const t = super.toJSON();
            (t.autoClose = this.autoClose), (t.curves = []);
            for (let e = 0, n = this.curves.length; e < n; e++) {
              const n = this.curves[e];
              t.curves.push(n.toJSON());
            }
            return t;
          }
          fromJSON(t) {
            super.fromJSON(t),
              (this.autoClose = t.autoClose),
              (this.curves = []);
            for (let e = 0, n = t.curves.length; e < n; e++) {
              const n = t.curves[e];
              this.curves.push(new hu[n.type]().fromJSON(n));
            }
            return this;
          }
        }
        class Hh extends zh {
          constructor(t) {
            super(),
              (this.type = "Path"),
              (this.currentPoint = new $n()),
              t && this.setFromPoints(t);
          }
          setFromPoints(t) {
            this.moveTo(t[0].x, t[0].y);
            for (let e = 1, n = t.length; e < n; e++)
              this.lineTo(t[e].x, t[e].y);
            return this;
          }
          moveTo(t, e) {
            return this.currentPoint.set(t, e), this;
          }
          lineTo(t, e) {
            const n = new su(this.currentPoint.clone(), new $n(t, e));
            return this.curves.push(n), this.currentPoint.set(t, e), this;
          }
          quadraticCurveTo(t, e, n, i) {
            const r = new lu(
              this.currentPoint.clone(),
              new $n(t, e),
              new $n(n, i)
            );
            return this.curves.push(r), this.currentPoint.set(n, i), this;
          }
          bezierCurveTo(t, e, n, i, r, o) {
            const s = new ru(
              this.currentPoint.clone(),
              new $n(t, e),
              new $n(n, i),
              new $n(r, o)
            );
            return this.curves.push(s), this.currentPoint.set(r, o), this;
          }
          splineThru(t) {
            const e = [this.currentPoint.clone()].concat(t),
              n = new uu(e);
            return (
              this.curves.push(n), this.currentPoint.copy(t[t.length - 1]), this
            );
          }
          arc(t, e, n, i, r, o) {
            const s = this.currentPoint.x,
              a = this.currentPoint.y;
            return this.absarc(t + s, e + a, n, i, r, o), this;
          }
          absarc(t, e, n, i, r, o) {
            return this.absellipse(t, e, n, n, i, r, o), this;
          }
          ellipse(t, e, n, i, r, o, s, a) {
            const l = this.currentPoint.x,
              c = this.currentPoint.y;
            return this.absellipse(t + l, e + c, n, i, r, o, s, a), this;
          }
          absellipse(t, e, n, i, r, o, s, a) {
            const l = new Xc(t, e, n, i, r, o, s, a);
            if (this.curves.length > 0) {
              const t = l.getPoint(0);
              t.equals(this.currentPoint) || this.lineTo(t.x, t.y);
            }
            this.curves.push(l);
            const c = l.getPoint(1);
            return this.currentPoint.copy(c), this;
          }
          copy(t) {
            return super.copy(t), this.currentPoint.copy(t.currentPoint), this;
          }
          toJSON() {
            const t = super.toJSON();
            return (t.currentPoint = this.currentPoint.toArray()), t;
          }
          fromJSON(t) {
            return (
              super.fromJSON(t),
              this.currentPoint.fromArray(t.currentPoint),
              this
            );
          }
        }
        class jh extends Hh {
          constructor(t) {
            super(t),
              (this.uuid = jn()),
              (this.type = "Shape"),
              (this.holes = []);
          }
          getPointsHoles(t) {
            const e = [];
            for (let n = 0, i = this.holes.length; n < i; n++)
              e[n] = this.holes[n].getPoints(t);
            return e;
          }
          extractPoints(t) {
            return { shape: this.getPoints(t), holes: this.getPointsHoles(t) };
          }
          copy(t) {
            super.copy(t), (this.holes = []);
            for (let e = 0, n = t.holes.length; e < n; e++) {
              const n = t.holes[e];
              this.holes.push(n.clone());
            }
            return this;
          }
          toJSON() {
            const t = super.toJSON();
            (t.uuid = this.uuid), (t.holes = []);
            for (let e = 0, n = this.holes.length; e < n; e++) {
              const n = this.holes[e];
              t.holes.push(n.toJSON());
            }
            return t;
          }
          fromJSON(t) {
            super.fromJSON(t), (this.uuid = t.uuid), (this.holes = []);
            for (let e = 0, n = t.holes.length; e < n; e++) {
              const n = t.holes[e];
              this.holes.push(new Hh().fromJSON(n));
            }
            return this;
          }
        }
        class Uh extends cr {
          constructor(t, e = 1) {
            super(),
              (this.type = "Light"),
              (this.color = new Lr(t)),
              (this.intensity = e);
          }
          dispose() {}
          copy(t) {
            return (
              super.copy(t),
              this.color.copy(t.color),
              (this.intensity = t.intensity),
              this
            );
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return (
              (e.object.color = this.color.getHex()),
              (e.object.intensity = this.intensity),
              void 0 !== this.groundColor &&
                (e.object.groundColor = this.groundColor.getHex()),
              void 0 !== this.distance && (e.object.distance = this.distance),
              void 0 !== this.angle && (e.object.angle = this.angle),
              void 0 !== this.decay && (e.object.decay = this.decay),
              void 0 !== this.penumbra && (e.object.penumbra = this.penumbra),
              void 0 !== this.shadow &&
                (e.object.shadow = this.shadow.toJSON()),
              e
            );
          }
        }
        Uh.prototype.isLight = !0;
        class Vh extends Uh {
          constructor(t, e, n) {
            super(t, n),
              (this.type = "HemisphereLight"),
              this.position.copy(cr.DefaultUp),
              this.updateMatrix(),
              (this.groundColor = new Lr(e));
          }
          copy(t) {
            return (
              Uh.prototype.copy.call(this, t),
              this.groundColor.copy(t.groundColor),
              this
            );
          }
        }
        Vh.prototype.isHemisphereLight = !0;
        const Gh = new Fi(),
          Wh = new ai(),
          qh = new ai();
        class Xh {
          constructor(t) {
            (this.camera = t),
              (this.bias = 0),
              (this.normalBias = 0),
              (this.radius = 1),
              (this.mapSize = new $n(512, 512)),
              (this.map = null),
              (this.mapPass = null),
              (this.matrix = new Fi()),
              (this.autoUpdate = !0),
              (this.needsUpdate = !1),
              (this._frustum = new Fo()),
              (this._frameExtents = new $n(1, 1)),
              (this._viewportCount = 1),
              (this._viewports = [new ni(0, 0, 1, 1)]);
          }
          getViewportCount() {
            return this._viewportCount;
          }
          getFrustum() {
            return this._frustum;
          }
          updateMatrices(t) {
            const e = this.camera,
              n = this.matrix;
            Wh.setFromMatrixPosition(t.matrixWorld),
              e.position.copy(Wh),
              qh.setFromMatrixPosition(t.target.matrixWorld),
              e.lookAt(qh),
              e.updateMatrixWorld(),
              Gh.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
              this._frustum.setFromProjectionMatrix(Gh),
              n.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1),
              n.multiply(e.projectionMatrix),
              n.multiply(e.matrixWorldInverse);
          }
          getViewport(t) {
            return this._viewports[t];
          }
          getFrameExtents() {
            return this._frameExtents;
          }
          dispose() {
            this.map && this.map.dispose(),
              this.mapPass && this.mapPass.dispose();
          }
          copy(t) {
            return (
              (this.camera = t.camera.clone()),
              (this.bias = t.bias),
              (this.radius = t.radius),
              this.mapSize.copy(t.mapSize),
              this
            );
          }
          clone() {
            return new this.constructor().copy(this);
          }
          toJSON() {
            const t = {};
            return (
              0 !== this.bias && (t.bias = this.bias),
              0 !== this.normalBias && (t.normalBias = this.normalBias),
              1 !== this.radius && (t.radius = this.radius),
              (512 === this.mapSize.x && 512 === this.mapSize.y) ||
                (t.mapSize = this.mapSize.toArray()),
              (t.camera = this.camera.toJSON(!1).object),
              delete t.camera.matrix,
              t
            );
          }
        }
        class Yh extends Xh {
          constructor() {
            super(new Ao(50, 1, 0.5, 500)), (this.focus = 1);
          }
          updateMatrices(t) {
            const e = this.camera,
              n = 2 * Hn * t.angle * this.focus,
              i = this.mapSize.width / this.mapSize.height,
              r = t.distance || e.far;
            (n === e.fov && i === e.aspect && r === e.far) ||
              ((e.fov = n),
              (e.aspect = i),
              (e.far = r),
              e.updateProjectionMatrix()),
              super.updateMatrices(t);
          }
          copy(t) {
            return super.copy(t), (this.focus = t.focus), this;
          }
        }
        Yh.prototype.isSpotLightShadow = !0;
        class $h extends Uh {
          constructor(t, e, n = 0, i = Math.PI / 3, r = 0, o = 1) {
            super(t, e),
              (this.type = "SpotLight"),
              this.position.copy(cr.DefaultUp),
              this.updateMatrix(),
              (this.target = new cr()),
              (this.distance = n),
              (this.angle = i),
              (this.penumbra = r),
              (this.decay = o),
              (this.shadow = new Yh());
          }
          get power() {
            return this.intensity * Math.PI;
          }
          set power(t) {
            this.intensity = t / Math.PI;
          }
          dispose() {
            this.shadow.dispose();
          }
          copy(t) {
            return (
              super.copy(t),
              (this.distance = t.distance),
              (this.angle = t.angle),
              (this.penumbra = t.penumbra),
              (this.decay = t.decay),
              (this.target = t.target.clone()),
              (this.shadow = t.shadow.clone()),
              this
            );
          }
        }
        $h.prototype.isSpotLight = !0;
        const Kh = new Fi(),
          Jh = new ai(),
          Zh = new ai();
        class Qh extends Xh {
          constructor() {
            super(new Ao(90, 1, 0.5, 500)),
              (this._frameExtents = new $n(4, 2)),
              (this._viewportCount = 6),
              (this._viewports = [
                new ni(2, 1, 1, 1),
                new ni(0, 1, 1, 1),
                new ni(3, 1, 1, 1),
                new ni(1, 1, 1, 1),
                new ni(3, 0, 1, 1),
                new ni(1, 0, 1, 1),
              ]),
              (this._cubeDirections = [
                new ai(1, 0, 0),
                new ai(-1, 0, 0),
                new ai(0, 0, 1),
                new ai(0, 0, -1),
                new ai(0, 1, 0),
                new ai(0, -1, 0),
              ]),
              (this._cubeUps = [
                new ai(0, 1, 0),
                new ai(0, 1, 0),
                new ai(0, 1, 0),
                new ai(0, 1, 0),
                new ai(0, 0, 1),
                new ai(0, 0, -1),
              ]);
          }
          updateMatrices(t, e = 0) {
            const n = this.camera,
              i = this.matrix,
              r = t.distance || n.far;
            r !== n.far && ((n.far = r), n.updateProjectionMatrix()),
              Jh.setFromMatrixPosition(t.matrixWorld),
              n.position.copy(Jh),
              Zh.copy(n.position),
              Zh.add(this._cubeDirections[e]),
              n.up.copy(this._cubeUps[e]),
              n.lookAt(Zh),
              n.updateMatrixWorld(),
              i.makeTranslation(-Jh.x, -Jh.y, -Jh.z),
              Kh.multiplyMatrices(n.projectionMatrix, n.matrixWorldInverse),
              this._frustum.setFromProjectionMatrix(Kh);
          }
        }
        Qh.prototype.isPointLightShadow = !0;
        class td extends Uh {
          constructor(t, e, n = 0, i = 1) {
            super(t, e),
              (this.type = "PointLight"),
              (this.distance = n),
              (this.decay = i),
              (this.shadow = new Qh());
          }
          get power() {
            return 4 * this.intensity * Math.PI;
          }
          set power(t) {
            this.intensity = t / (4 * Math.PI);
          }
          dispose() {
            this.shadow.dispose();
          }
          copy(t) {
            return (
              super.copy(t),
              (this.distance = t.distance),
              (this.decay = t.decay),
              (this.shadow = t.shadow.clone()),
              this
            );
          }
        }
        td.prototype.isPointLight = !0;
        class ed extends Xh {
          constructor() {
            super(new Jo(-5, 5, 5, -5, 0.5, 500));
          }
        }
        ed.prototype.isDirectionalLightShadow = !0;
        class nd extends Uh {
          constructor(t, e) {
            super(t, e),
              (this.type = "DirectionalLight"),
              this.position.copy(cr.DefaultUp),
              this.updateMatrix(),
              (this.target = new cr()),
              (this.shadow = new ed());
          }
          dispose() {
            this.shadow.dispose();
          }
          copy(t) {
            return (
              super.copy(t),
              (this.target = t.target.clone()),
              (this.shadow = t.shadow.clone()),
              this
            );
          }
        }
        nd.prototype.isDirectionalLight = !0;
        class id extends Uh {
          constructor(t, e) {
            super(t, e), (this.type = "AmbientLight");
          }
        }
        id.prototype.isAmbientLight = !0;
        class rd extends Uh {
          constructor(t, e, n = 10, i = 10) {
            super(t, e),
              (this.type = "RectAreaLight"),
              (this.width = n),
              (this.height = i);
          }
          copy(t) {
            return (
              super.copy(t),
              (this.width = t.width),
              (this.height = t.height),
              this
            );
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return (
              (e.object.width = this.width), (e.object.height = this.height), e
            );
          }
        }
        rd.prototype.isRectAreaLight = !0;
        class od {
          constructor() {
            this.coefficients = [];
            for (let t = 0; t < 9; t++) this.coefficients.push(new ai());
          }
          set(t) {
            for (let e = 0; e < 9; e++) this.coefficients[e].copy(t[e]);
            return this;
          }
          zero() {
            for (let t = 0; t < 9; t++) this.coefficients[t].set(0, 0, 0);
            return this;
          }
          getAt(t, e) {
            const n = t.x,
              i = t.y,
              r = t.z,
              o = this.coefficients;
            return (
              e.copy(o[0]).multiplyScalar(0.282095),
              e.addScaledVector(o[1], 0.488603 * i),
              e.addScaledVector(o[2], 0.488603 * r),
              e.addScaledVector(o[3], 0.488603 * n),
              e.addScaledVector(o[4], n * i * 1.092548),
              e.addScaledVector(o[5], i * r * 1.092548),
              e.addScaledVector(o[6], 0.315392 * (3 * r * r - 1)),
              e.addScaledVector(o[7], n * r * 1.092548),
              e.addScaledVector(o[8], 0.546274 * (n * n - i * i)),
              e
            );
          }
          getIrradianceAt(t, e) {
            const n = t.x,
              i = t.y,
              r = t.z,
              o = this.coefficients;
            return (
              e.copy(o[0]).multiplyScalar(0.886227),
              e.addScaledVector(o[1], 1.023328 * i),
              e.addScaledVector(o[2], 1.023328 * r),
              e.addScaledVector(o[3], 1.023328 * n),
              e.addScaledVector(o[4], 0.858086 * n * i),
              e.addScaledVector(o[5], 0.858086 * i * r),
              e.addScaledVector(o[6], 0.743125 * r * r - 0.247708),
              e.addScaledVector(o[7], 0.858086 * n * r),
              e.addScaledVector(o[8], 0.429043 * (n * n - i * i)),
              e
            );
          }
          add(t) {
            for (let e = 0; e < 9; e++)
              this.coefficients[e].add(t.coefficients[e]);
            return this;
          }
          addScaledSH(t, e) {
            for (let n = 0; n < 9; n++)
              this.coefficients[n].addScaledVector(t.coefficients[n], e);
            return this;
          }
          scale(t) {
            for (let e = 0; e < 9; e++) this.coefficients[e].multiplyScalar(t);
            return this;
          }
          lerp(t, e) {
            for (let n = 0; n < 9; n++)
              this.coefficients[n].lerp(t.coefficients[n], e);
            return this;
          }
          equals(t) {
            for (let e = 0; e < 9; e++)
              if (!this.coefficients[e].equals(t.coefficients[e])) return !1;
            return !0;
          }
          copy(t) {
            return this.set(t.coefficients);
          }
          clone() {
            return new this.constructor().copy(this);
          }
          fromArray(t, e = 0) {
            const n = this.coefficients;
            for (let i = 0; i < 9; i++) n[i].fromArray(t, e + 3 * i);
            return this;
          }
          toArray(t = [], e = 0) {
            const n = this.coefficients;
            for (let i = 0; i < 9; i++) n[i].toArray(t, e + 3 * i);
            return t;
          }
          static getBasisAt(t, e) {
            const n = t.x,
              i = t.y,
              r = t.z;
            (e[0] = 0.282095),
              (e[1] = 0.488603 * i),
              (e[2] = 0.488603 * r),
              (e[3] = 0.488603 * n),
              (e[4] = 1.092548 * n * i),
              (e[5] = 1.092548 * i * r),
              (e[6] = 0.315392 * (3 * r * r - 1)),
              (e[7] = 1.092548 * n * r),
              (e[8] = 0.546274 * (n * n - i * i));
          }
        }
        od.prototype.isSphericalHarmonics3 = !0;
        class sd extends Uh {
          constructor(t = new od(), e = 1) {
            super(void 0, e), (this.sh = t);
          }
          copy(t) {
            return super.copy(t), this.sh.copy(t.sh), this;
          }
          fromJSON(t) {
            return (
              (this.intensity = t.intensity), this.sh.fromArray(t.sh), this
            );
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return (e.object.sh = this.sh.toArray()), e;
          }
        }
        sd.prototype.isLightProbe = !0;
        class ad extends Rh {
          constructor(t) {
            super(t), (this.textures = {});
          }
          load(t, e, n, i) {
            const r = this,
              o = new Oh(r.manager);
            o.setPath(r.path),
              o.setRequestHeader(r.requestHeader),
              o.setWithCredentials(r.withCredentials),
              o.load(
                t,
                function (n) {
                  try {
                    e(r.parse(JSON.parse(n)));
                  } catch (e) {
                    i ? i(e) : console.error(e), r.manager.itemError(t);
                  }
                },
                n,
                i
              );
          }
          parse(t) {
            const e = this.textures;
            function n(t) {
              return (
                void 0 === e[t] &&
                  console.warn("THREE.MaterialLoader: Undefined texture", t),
                e[t]
              );
            }
            const i = new hh[t.type]();
            if (
              (void 0 !== t.uuid && (i.uuid = t.uuid),
              void 0 !== t.name && (i.name = t.name),
              void 0 !== t.color &&
                void 0 !== i.color &&
                i.color.setHex(t.color),
              void 0 !== t.roughness && (i.roughness = t.roughness),
              void 0 !== t.metalness && (i.metalness = t.metalness),
              void 0 !== t.sheen && (i.sheen = new Lr().setHex(t.sheen)),
              void 0 !== t.emissive &&
                void 0 !== i.emissive &&
                i.emissive.setHex(t.emissive),
              void 0 !== t.specular &&
                void 0 !== i.specular &&
                i.specular.setHex(t.specular),
              void 0 !== t.specularIntensity &&
                (i.specularIntensity = t.specularIntensity),
              void 0 !== t.specularTint &&
                void 0 !== i.specularTint &&
                i.specularTint.setHex(t.specularTint),
              void 0 !== t.shininess && (i.shininess = t.shininess),
              void 0 !== t.clearcoat && (i.clearcoat = t.clearcoat),
              void 0 !== t.clearcoatRoughness &&
                (i.clearcoatRoughness = t.clearcoatRoughness),
              void 0 !== t.transmission && (i.transmission = t.transmission),
              void 0 !== t.thickness && (i.thickness = t.thickness),
              void 0 !== t.attenuationDistance &&
                (i.attenuationDistance = t.attenuationDistance),
              void 0 !== t.attenuationTint &&
                void 0 !== i.attenuationTint &&
                i.attenuationTint.setHex(t.attenuationTint),
              void 0 !== t.fog && (i.fog = t.fog),
              void 0 !== t.flatShading && (i.flatShading = t.flatShading),
              void 0 !== t.blending && (i.blending = t.blending),
              void 0 !== t.combine && (i.combine = t.combine),
              void 0 !== t.side && (i.side = t.side),
              void 0 !== t.shadowSide && (i.shadowSide = t.shadowSide),
              void 0 !== t.opacity && (i.opacity = t.opacity),
              void 0 !== t.transparent && (i.transparent = t.transparent),
              void 0 !== t.alphaTest && (i.alphaTest = t.alphaTest),
              void 0 !== t.depthTest && (i.depthTest = t.depthTest),
              void 0 !== t.depthWrite && (i.depthWrite = t.depthWrite),
              void 0 !== t.colorWrite && (i.colorWrite = t.colorWrite),
              void 0 !== t.stencilWrite && (i.stencilWrite = t.stencilWrite),
              void 0 !== t.stencilWriteMask &&
                (i.stencilWriteMask = t.stencilWriteMask),
              void 0 !== t.stencilFunc && (i.stencilFunc = t.stencilFunc),
              void 0 !== t.stencilRef && (i.stencilRef = t.stencilRef),
              void 0 !== t.stencilFuncMask &&
                (i.stencilFuncMask = t.stencilFuncMask),
              void 0 !== t.stencilFail && (i.stencilFail = t.stencilFail),
              void 0 !== t.stencilZFail && (i.stencilZFail = t.stencilZFail),
              void 0 !== t.stencilZPass && (i.stencilZPass = t.stencilZPass),
              void 0 !== t.wireframe && (i.wireframe = t.wireframe),
              void 0 !== t.wireframeLinewidth &&
                (i.wireframeLinewidth = t.wireframeLinewidth),
              void 0 !== t.wireframeLinecap &&
                (i.wireframeLinecap = t.wireframeLinecap),
              void 0 !== t.wireframeLinejoin &&
                (i.wireframeLinejoin = t.wireframeLinejoin),
              void 0 !== t.rotation && (i.rotation = t.rotation),
              1 !== t.linewidth && (i.linewidth = t.linewidth),
              void 0 !== t.dashSize && (i.dashSize = t.dashSize),
              void 0 !== t.gapSize && (i.gapSize = t.gapSize),
              void 0 !== t.scale && (i.scale = t.scale),
              void 0 !== t.polygonOffset && (i.polygonOffset = t.polygonOffset),
              void 0 !== t.polygonOffsetFactor &&
                (i.polygonOffsetFactor = t.polygonOffsetFactor),
              void 0 !== t.polygonOffsetUnits &&
                (i.polygonOffsetUnits = t.polygonOffsetUnits),
              void 0 !== t.dithering && (i.dithering = t.dithering),
              void 0 !== t.alphaToCoverage &&
                (i.alphaToCoverage = t.alphaToCoverage),
              void 0 !== t.premultipliedAlpha &&
                (i.premultipliedAlpha = t.premultipliedAlpha),
              void 0 !== t.visible && (i.visible = t.visible),
              void 0 !== t.toneMapped && (i.toneMapped = t.toneMapped),
              void 0 !== t.userData && (i.userData = t.userData),
              void 0 !== t.vertexColors &&
                ("number" == typeof t.vertexColors
                  ? (i.vertexColors = t.vertexColors > 0)
                  : (i.vertexColors = t.vertexColors)),
              void 0 !== t.uniforms)
            )
              for (const e in t.uniforms) {
                const r = t.uniforms[e];
                switch (((i.uniforms[e] = {}), r.type)) {
                  case "t":
                    i.uniforms[e].value = n(r.value);
                    break;
                  case "c":
                    i.uniforms[e].value = new Lr().setHex(r.value);
                    break;
                  case "v2":
                    i.uniforms[e].value = new $n().fromArray(r.value);
                    break;
                  case "v3":
                    i.uniforms[e].value = new ai().fromArray(r.value);
                    break;
                  case "v4":
                    i.uniforms[e].value = new ni().fromArray(r.value);
                    break;
                  case "m3":
                    i.uniforms[e].value = new Kn().fromArray(r.value);
                    break;
                  case "m4":
                    i.uniforms[e].value = new Fi().fromArray(r.value);
                    break;
                  default:
                    i.uniforms[e].value = r.value;
                }
              }
            if (
              (void 0 !== t.defines && (i.defines = t.defines),
              void 0 !== t.vertexShader && (i.vertexShader = t.vertexShader),
              void 0 !== t.fragmentShader &&
                (i.fragmentShader = t.fragmentShader),
              void 0 !== t.extensions)
            )
              for (const e in t.extensions) i.extensions[e] = t.extensions[e];
            if (
              (void 0 !== t.shading && (i.flatShading = 1 === t.shading),
              void 0 !== t.size && (i.size = t.size),
              void 0 !== t.sizeAttenuation &&
                (i.sizeAttenuation = t.sizeAttenuation),
              void 0 !== t.map && (i.map = n(t.map)),
              void 0 !== t.matcap && (i.matcap = n(t.matcap)),
              void 0 !== t.alphaMap && (i.alphaMap = n(t.alphaMap)),
              void 0 !== t.bumpMap && (i.bumpMap = n(t.bumpMap)),
              void 0 !== t.bumpScale && (i.bumpScale = t.bumpScale),
              void 0 !== t.normalMap && (i.normalMap = n(t.normalMap)),
              void 0 !== t.normalMapType && (i.normalMapType = t.normalMapType),
              void 0 !== t.normalScale)
            ) {
              let e = t.normalScale;
              !1 === Array.isArray(e) && (e = [e, e]),
                (i.normalScale = new $n().fromArray(e));
            }
            return (
              void 0 !== t.displacementMap &&
                (i.displacementMap = n(t.displacementMap)),
              void 0 !== t.displacementScale &&
                (i.displacementScale = t.displacementScale),
              void 0 !== t.displacementBias &&
                (i.displacementBias = t.displacementBias),
              void 0 !== t.roughnessMap && (i.roughnessMap = n(t.roughnessMap)),
              void 0 !== t.metalnessMap && (i.metalnessMap = n(t.metalnessMap)),
              void 0 !== t.emissiveMap && (i.emissiveMap = n(t.emissiveMap)),
              void 0 !== t.emissiveIntensity &&
                (i.emissiveIntensity = t.emissiveIntensity),
              void 0 !== t.specularMap && (i.specularMap = n(t.specularMap)),
              void 0 !== t.specularIntensityMap &&
                (i.specularIntensityMap = n(t.specularIntensityMap)),
              void 0 !== t.specularTintMap &&
                (i.specularTintMap = n(t.specularTintMap)),
              void 0 !== t.envMap && (i.envMap = n(t.envMap)),
              void 0 !== t.envMapIntensity &&
                (i.envMapIntensity = t.envMapIntensity),
              void 0 !== t.reflectivity && (i.reflectivity = t.reflectivity),
              void 0 !== t.refractionRatio &&
                (i.refractionRatio = t.refractionRatio),
              void 0 !== t.lightMap && (i.lightMap = n(t.lightMap)),
              void 0 !== t.lightMapIntensity &&
                (i.lightMapIntensity = t.lightMapIntensity),
              void 0 !== t.aoMap && (i.aoMap = n(t.aoMap)),
              void 0 !== t.aoMapIntensity &&
                (i.aoMapIntensity = t.aoMapIntensity),
              void 0 !== t.gradientMap && (i.gradientMap = n(t.gradientMap)),
              void 0 !== t.clearcoatMap && (i.clearcoatMap = n(t.clearcoatMap)),
              void 0 !== t.clearcoatRoughnessMap &&
                (i.clearcoatRoughnessMap = n(t.clearcoatRoughnessMap)),
              void 0 !== t.clearcoatNormalMap &&
                (i.clearcoatNormalMap = n(t.clearcoatNormalMap)),
              void 0 !== t.clearcoatNormalScale &&
                (i.clearcoatNormalScale = new $n().fromArray(
                  t.clearcoatNormalScale
                )),
              void 0 !== t.transmissionMap &&
                (i.transmissionMap = n(t.transmissionMap)),
              void 0 !== t.thicknessMap && (i.thicknessMap = n(t.thicknessMap)),
              i
            );
          }
          setTextures(t) {
            return (this.textures = t), this;
          }
        }
        class ld {
          static decodeText(t) {
            if ("undefined" != typeof TextDecoder)
              return new TextDecoder().decode(t);
            let e = "";
            for (let n = 0, i = t.length; n < i; n++)
              e += String.fromCharCode(t[n]);
            try {
              return decodeURIComponent(escape(e));
            } catch (t) {
              return e;
            }
          }
          static extractUrlBase(t) {
            const e = t.lastIndexOf("/");
            return -1 === e ? "./" : t.substr(0, e + 1);
          }
        }
        class cd extends to {
          constructor() {
            super(),
              (this.type = "InstancedBufferGeometry"),
              (this.instanceCount = 1 / 0);
          }
          copy(t) {
            return super.copy(t), (this.instanceCount = t.instanceCount), this;
          }
          clone() {
            return new this.constructor().copy(this);
          }
          toJSON() {
            const t = super.toJSON(this);
            return (
              (t.instanceCount = this.instanceCount),
              (t.isInstancedBufferGeometry = !0),
              t
            );
          }
        }
        cd.prototype.isInstancedBufferGeometry = !0;
        class ud extends kr {
          constructor(t, e, n, i = 1) {
            "number" == typeof n &&
              ((i = n),
              (n = !1),
              console.error(
                "THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."
              )),
              super(t, e, n),
              (this.meshPerAttribute = i);
          }
          copy(t) {
            return (
              super.copy(t), (this.meshPerAttribute = t.meshPerAttribute), this
            );
          }
          toJSON() {
            const t = super.toJSON();
            return (
              (t.meshPerAttribute = this.meshPerAttribute),
              (t.isInstancedBufferAttribute = !0),
              t
            );
          }
        }
        ud.prototype.isInstancedBufferAttribute = !0;
        class hd extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = new Oh(r.manager);
            o.setPath(r.path),
              o.setRequestHeader(r.requestHeader),
              o.setWithCredentials(r.withCredentials),
              o.load(
                t,
                function (n) {
                  try {
                    e(r.parse(JSON.parse(n)));
                  } catch (e) {
                    i ? i(e) : console.error(e), r.manager.itemError(t);
                  }
                },
                n,
                i
              );
          }
          parse(t) {
            const e = {},
              n = {};
            function i(t, i) {
              if (void 0 !== e[i]) return e[i];
              const r = t.interleavedBuffers[i],
                o = (function (t, e) {
                  if (void 0 !== n[e]) return n[e];
                  const i = t.arrayBuffers[e],
                    r = new Uint32Array(i).buffer;
                  return (n[e] = r), r;
                })(t, r.buffer),
                s = qr(r.type, o),
                a = new Rl(s, r.stride);
              return (a.uuid = r.uuid), (e[i] = a), a;
            }
            const r = t.isInstancedBufferGeometry ? new cd() : new to(),
              o = t.data.index;
            if (void 0 !== o) {
              const t = qr(o.type, o.array);
              r.setIndex(new kr(t, 1));
            }
            const s = t.data.attributes;
            for (const e in s) {
              const n = s[e];
              let o;
              if (n.isInterleavedBufferAttribute) {
                const e = i(t.data, n.data);
                o = new Ol(e, n.itemSize, n.offset, n.normalized);
              } else {
                const t = qr(n.type, n.array);
                o = new (n.isInstancedBufferAttribute ? ud : kr)(
                  t,
                  n.itemSize,
                  n.normalized
                );
              }
              void 0 !== n.name && (o.name = n.name),
                void 0 !== n.usage && o.setUsage(n.usage),
                void 0 !== n.updateRange &&
                  ((o.updateRange.offset = n.updateRange.offset),
                  (o.updateRange.count = n.updateRange.count)),
                r.setAttribute(e, o);
            }
            const a = t.data.morphAttributes;
            if (a)
              for (const e in a) {
                const n = a[e],
                  o = [];
                for (let e = 0, r = n.length; e < r; e++) {
                  const r = n[e];
                  let s;
                  if (r.isInterleavedBufferAttribute) {
                    const e = i(t.data, r.data);
                    s = new Ol(e, r.itemSize, r.offset, r.normalized);
                  } else {
                    const t = qr(r.type, r.array);
                    s = new kr(t, r.itemSize, r.normalized);
                  }
                  void 0 !== r.name && (s.name = r.name), o.push(s);
                }
                r.morphAttributes[e] = o;
              }
            t.data.morphTargetsRelative && (r.morphTargetsRelative = !0);
            const l = t.data.groups || t.data.drawcalls || t.data.offsets;
            if (void 0 !== l)
              for (let t = 0, e = l.length; t !== e; ++t) {
                const e = l[t];
                r.addGroup(e.start, e.count, e.materialIndex);
              }
            const c = t.data.boundingSphere;
            if (void 0 !== c) {
              const t = new ai();
              void 0 !== c.center && t.fromArray(c.center),
                (r.boundingSphere = new Li(t, c.radius));
            }
            return (
              t.name && (r.name = t.name),
              t.userData && (r.userData = t.userData),
              r
            );
          }
        }
        class dd extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = "" === this.path ? ld.extractUrlBase(t) : this.path;
            this.resourcePath = this.resourcePath || o;
            const s = new Oh(this.manager);
            s.setPath(this.path),
              s.setRequestHeader(this.requestHeader),
              s.setWithCredentials(this.withCredentials),
              s.load(
                t,
                function (n) {
                  let o = null;
                  try {
                    o = JSON.parse(n);
                  } catch (e) {
                    return (
                      void 0 !== i && i(e),
                      void console.error(
                        "THREE:ObjectLoader: Can't parse " + t + ".",
                        e.message
                      )
                    );
                  }
                  const s = o.metadata;
                  void 0 !== s &&
                  void 0 !== s.type &&
                  "geometry" !== s.type.toLowerCase()
                    ? r.parse(o, e)
                    : console.error("THREE.ObjectLoader: Can't load " + t);
                },
                n,
                i
              );
          }
          async loadAsync(t, e) {
            const n = "" === this.path ? ld.extractUrlBase(t) : this.path;
            this.resourcePath = this.resourcePath || n;
            const i = new Oh(this.manager);
            i.setPath(this.path),
              i.setRequestHeader(this.requestHeader),
              i.setWithCredentials(this.withCredentials);
            const r = await i.loadAsync(t, e),
              o = JSON.parse(r),
              s = o.metadata;
            if (
              void 0 === s ||
              void 0 === s.type ||
              "geometry" === s.type.toLowerCase()
            )
              throw new Error("THREE.ObjectLoader: Can't load " + t);
            return await this.parseAsync(o);
          }
          parse(t, e) {
            const n = this.parseAnimations(t.animations),
              i = this.parseShapes(t.shapes),
              r = this.parseGeometries(t.geometries, i),
              o = this.parseImages(t.images, function () {
                void 0 !== e && e(l);
              }),
              s = this.parseTextures(t.textures, o),
              a = this.parseMaterials(t.materials, s),
              l = this.parseObject(t.object, r, a, s, n),
              c = this.parseSkeletons(t.skeletons, l);
            if ((this.bindSkeletons(l, c), void 0 !== e)) {
              let t = !1;
              for (const e in o)
                if (o[e] instanceof HTMLImageElement) {
                  t = !0;
                  break;
                }
              !1 === t && e(l);
            }
            return l;
          }
          async parseAsync(t) {
            const e = this.parseAnimations(t.animations),
              n = this.parseShapes(t.shapes),
              i = this.parseGeometries(t.geometries, n),
              r = await this.parseImagesAsync(t.images),
              o = this.parseTextures(t.textures, r),
              s = this.parseMaterials(t.materials, o),
              a = this.parseObject(t.object, i, s, o, e),
              l = this.parseSkeletons(t.skeletons, a);
            return this.bindSkeletons(a, l), a;
          }
          parseShapes(t) {
            const e = {};
            if (void 0 !== t)
              for (let n = 0, i = t.length; n < i; n++) {
                const i = new jh().fromJSON(t[n]);
                e[i.uuid] = i;
              }
            return e;
          }
          parseSkeletons(t, e) {
            const n = {},
              i = {};
            if (
              (e.traverse(function (t) {
                t.isBone && (i[t.uuid] = t);
              }),
              void 0 !== t)
            )
              for (let e = 0, r = t.length; e < r; e++) {
                const r = new lc().fromJSON(t[e], i);
                n[r.uuid] = r;
              }
            return n;
          }
          parseGeometries(t, e) {
            const n = {};
            if (void 0 !== t) {
              const i = new hd();
              for (let r = 0, o = t.length; r < o; r++) {
                let o;
                const s = t[r];
                switch (s.type) {
                  case "BufferGeometry":
                  case "InstancedBufferGeometry":
                    o = i.parse(s);
                    break;
                  case "Geometry":
                    console.error(
                      "THREE.ObjectLoader: The legacy Geometry type is no longer supported."
                    );
                    break;
                  default:
                    s.type in eh
                      ? (o = eh[s.type].fromJSON(s, e))
                      : console.warn(
                          `THREE.ObjectLoader: Unsupported geometry type "${s.type}"`
                        );
                }
                (o.uuid = s.uuid),
                  void 0 !== s.name && (o.name = s.name),
                  !0 === o.isBufferGeometry &&
                    void 0 !== s.userData &&
                    (o.userData = s.userData),
                  (n[s.uuid] = o);
              }
            }
            return n;
          }
          parseMaterials(t, e) {
            const n = {},
              i = {};
            if (void 0 !== t) {
              const r = new ad();
              r.setTextures(e);
              for (let e = 0, o = t.length; e < o; e++) {
                const o = t[e];
                if ("MultiMaterial" === o.type) {
                  const t = [];
                  for (let e = 0; e < o.materials.length; e++) {
                    const i = o.materials[e];
                    void 0 === n[i.uuid] && (n[i.uuid] = r.parse(i)),
                      t.push(n[i.uuid]);
                  }
                  i[o.uuid] = t;
                } else
                  void 0 === n[o.uuid] && (n[o.uuid] = r.parse(o)),
                    (i[o.uuid] = n[o.uuid]);
              }
            }
            return i;
          }
          parseAnimations(t) {
            const e = {};
            if (void 0 !== t)
              for (let n = 0; n < t.length; n++) {
                const i = t[n],
                  r = Eh.parse(i);
                e[r.uuid] = r;
              }
            return e;
          }
          parseImages(t, e) {
            const n = this,
              i = {};
            let r;
            function o(t) {
              if ("string" == typeof t) {
                const e = t;
                return (function (t) {
                  return (
                    n.manager.itemStart(t),
                    r.load(
                      t,
                      function () {
                        n.manager.itemEnd(t);
                      },
                      void 0,
                      function () {
                        n.manager.itemError(t), n.manager.itemEnd(t);
                      }
                    )
                  );
                })(
                  /^(\/\/)|([a-z]+:(\/\/)?)/i.test(e) ? e : n.resourcePath + e
                );
              }
              return t.data
                ? { data: qr(t.type, t.data), width: t.width, height: t.height }
                : null;
            }
            if (void 0 !== t && t.length > 0) {
              const n = new Ch(e);
              (r = new Dh(n)), r.setCrossOrigin(this.crossOrigin);
              for (let e = 0, n = t.length; e < n; e++) {
                const n = t[e],
                  r = n.url;
                if (Array.isArray(r)) {
                  i[n.uuid] = [];
                  for (let t = 0, e = r.length; t < e; t++) {
                    const e = o(r[t]);
                    null !== e &&
                      (e instanceof HTMLImageElement
                        ? i[n.uuid].push(e)
                        : i[n.uuid].push(new oc(e.data, e.width, e.height)));
                  }
                } else {
                  const t = o(n.url);
                  null !== t && (i[n.uuid] = t);
                }
              }
            }
            return i;
          }
          async parseImagesAsync(t) {
            const e = this,
              n = {};
            let i;
            async function r(t) {
              if ("string" == typeof t) {
                const n = t,
                  r = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)
                    ? n
                    : e.resourcePath + n;
                return await i.loadAsync(r);
              }
              return t.data
                ? { data: qr(t.type, t.data), width: t.width, height: t.height }
                : null;
            }
            if (void 0 !== t && t.length > 0) {
              (i = new Dh(this.manager)), i.setCrossOrigin(this.crossOrigin);
              for (let e = 0, i = t.length; e < i; e++) {
                const i = t[e],
                  o = i.url;
                if (Array.isArray(o)) {
                  n[i.uuid] = [];
                  for (let t = 0, e = o.length; t < e; t++) {
                    const e = o[t],
                      s = await r(e);
                    null !== s &&
                      (s instanceof HTMLImageElement
                        ? n[i.uuid].push(s)
                        : n[i.uuid].push(new oc(s.data, s.width, s.height)));
                  }
                } else {
                  const t = await r(i.url);
                  null !== t && (n[i.uuid] = t);
                }
              }
            }
            return n;
          }
          parseTextures(t, e) {
            function n(t, e) {
              return "number" == typeof t
                ? t
                : (console.warn(
                    "THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
                    t
                  ),
                  e[t]);
            }
            const i = {};
            if (void 0 !== t)
              for (let r = 0, o = t.length; r < o; r++) {
                const o = t[r];
                let s;
                void 0 === o.image &&
                  console.warn(
                    'THREE.ObjectLoader: No "image" specified for',
                    o.uuid
                  ),
                  void 0 === e[o.image] &&
                    console.warn(
                      "THREE.ObjectLoader: Undefined image",
                      o.image
                    );
                const a = e[o.image];
                Array.isArray(a)
                  ? ((s = new Ro(a)), 6 === a.length && (s.needsUpdate = !0))
                  : ((s =
                      a && a.data
                        ? new oc(a.data, a.width, a.height)
                        : new ti(a)),
                    a && (s.needsUpdate = !0)),
                  (s.uuid = o.uuid),
                  void 0 !== o.name && (s.name = o.name),
                  void 0 !== o.mapping && (s.mapping = n(o.mapping, pd)),
                  void 0 !== o.offset && s.offset.fromArray(o.offset),
                  void 0 !== o.repeat && s.repeat.fromArray(o.repeat),
                  void 0 !== o.center && s.center.fromArray(o.center),
                  void 0 !== o.rotation && (s.rotation = o.rotation),
                  void 0 !== o.wrap &&
                    ((s.wrapS = n(o.wrap[0], fd)),
                    (s.wrapT = n(o.wrap[1], fd))),
                  void 0 !== o.format && (s.format = o.format),
                  void 0 !== o.type && (s.type = o.type),
                  void 0 !== o.encoding && (s.encoding = o.encoding),
                  void 0 !== o.minFilter && (s.minFilter = n(o.minFilter, md)),
                  void 0 !== o.magFilter && (s.magFilter = n(o.magFilter, md)),
                  void 0 !== o.anisotropy && (s.anisotropy = o.anisotropy),
                  void 0 !== o.flipY && (s.flipY = o.flipY),
                  void 0 !== o.premultiplyAlpha &&
                    (s.premultiplyAlpha = o.premultiplyAlpha),
                  void 0 !== o.unpackAlignment &&
                    (s.unpackAlignment = o.unpackAlignment),
                  (i[o.uuid] = s);
              }
            return i;
          }
          parseObject(t, e, n, i, r) {
            let o, s, a;
            function l(t) {
              return (
                void 0 === e[t] &&
                  console.warn("THREE.ObjectLoader: Undefined geometry", t),
                e[t]
              );
            }
            function c(t) {
              if (void 0 !== t) {
                if (Array.isArray(t)) {
                  const e = [];
                  for (let i = 0, r = t.length; i < r; i++) {
                    const r = t[i];
                    void 0 === n[r] &&
                      console.warn("THREE.ObjectLoader: Undefined material", r),
                      e.push(n[r]);
                  }
                  return e;
                }
                return (
                  void 0 === n[t] &&
                    console.warn("THREE.ObjectLoader: Undefined material", t),
                  n[t]
                );
              }
            }
            function u(t) {
              return (
                void 0 === i[t] &&
                  console.warn("THREE.ObjectLoader: Undefined texture", t),
                i[t]
              );
            }
            switch (t.type) {
              case "Scene":
                (o = new Ll()),
                  void 0 !== t.background &&
                    (Number.isInteger(t.background)
                      ? (o.background = new Lr(t.background))
                      : (o.background = u(t.background))),
                  void 0 !== t.environment &&
                    (o.environment = u(t.environment)),
                  void 0 !== t.fog &&
                    ("Fog" === t.fog.type
                      ? (o.fog = new Cl(t.fog.color, t.fog.near, t.fog.far))
                      : "FogExp2" === t.fog.type &&
                        (o.fog = new Al(t.fog.color, t.fog.density)));
                break;
              case "PerspectiveCamera":
                (o = new Ao(t.fov, t.aspect, t.near, t.far)),
                  void 0 !== t.focus && (o.focus = t.focus),
                  void 0 !== t.zoom && (o.zoom = t.zoom),
                  void 0 !== t.filmGauge && (o.filmGauge = t.filmGauge),
                  void 0 !== t.filmOffset && (o.filmOffset = t.filmOffset),
                  void 0 !== t.view && (o.view = Object.assign({}, t.view));
                break;
              case "OrthographicCamera":
                (o = new Jo(t.left, t.right, t.top, t.bottom, t.near, t.far)),
                  void 0 !== t.zoom && (o.zoom = t.zoom),
                  void 0 !== t.view && (o.view = Object.assign({}, t.view));
                break;
              case "AmbientLight":
                o = new id(t.color, t.intensity);
                break;
              case "DirectionalLight":
                o = new nd(t.color, t.intensity);
                break;
              case "PointLight":
                o = new td(t.color, t.intensity, t.distance, t.decay);
                break;
              case "RectAreaLight":
                o = new rd(t.color, t.intensity, t.width, t.height);
                break;
              case "SpotLight":
                o = new $h(
                  t.color,
                  t.intensity,
                  t.distance,
                  t.angle,
                  t.penumbra,
                  t.decay
                );
                break;
              case "HemisphereLight":
                o = new Vh(t.color, t.groundColor, t.intensity);
                break;
              case "LightProbe":
                o = new sd().fromJSON(t);
                break;
              case "SkinnedMesh":
                (s = l(t.geometry)),
                  (a = c(t.material)),
                  (o = new ic(s, a)),
                  void 0 !== t.bindMode && (o.bindMode = t.bindMode),
                  void 0 !== t.bindMatrix &&
                    o.bindMatrix.fromArray(t.bindMatrix),
                  void 0 !== t.skeleton && (o.skeleton = t.skeleton);
                break;
              case "Mesh":
                (s = l(t.geometry)), (a = c(t.material)), (o = new xo(s, a));
                break;
              case "InstancedMesh":
                (s = l(t.geometry)), (a = c(t.material));
                const e = t.count,
                  n = t.instanceMatrix,
                  i = t.instanceColor;
                (o = new pc(s, a, e)),
                  (o.instanceMatrix = new kr(new Float32Array(n.array), 16)),
                  void 0 !== i &&
                    (o.instanceColor = new kr(
                      new Float32Array(i.array),
                      i.itemSize
                    ));
                break;
              case "LOD":
                o = new Jl();
                break;
              case "Line":
                o = new _c(l(t.geometry), c(t.material));
                break;
              case "LineLoop":
                o = new Sc(l(t.geometry), c(t.material));
                break;
              case "LineSegments":
                o = new Mc(l(t.geometry), c(t.material));
                break;
              case "PointCloud":
              case "Points":
                o = new Rc(l(t.geometry), c(t.material));
                break;
              case "Sprite":
                o = new Xl(c(t.material));
                break;
              case "Group":
                o = new _l();
                break;
              case "Bone":
                o = new rc();
                break;
              default:
                o = new cr();
            }
            if (
              ((o.uuid = t.uuid),
              void 0 !== t.name && (o.name = t.name),
              void 0 !== t.matrix
                ? (o.matrix.fromArray(t.matrix),
                  void 0 !== t.matrixAutoUpdate &&
                    (o.matrixAutoUpdate = t.matrixAutoUpdate),
                  o.matrixAutoUpdate &&
                    o.matrix.decompose(o.position, o.quaternion, o.scale))
                : (void 0 !== t.position && o.position.fromArray(t.position),
                  void 0 !== t.rotation && o.rotation.fromArray(t.rotation),
                  void 0 !== t.quaternion &&
                    o.quaternion.fromArray(t.quaternion),
                  void 0 !== t.scale && o.scale.fromArray(t.scale)),
              void 0 !== t.castShadow && (o.castShadow = t.castShadow),
              void 0 !== t.receiveShadow && (o.receiveShadow = t.receiveShadow),
              t.shadow &&
                (void 0 !== t.shadow.bias && (o.shadow.bias = t.shadow.bias),
                void 0 !== t.shadow.normalBias &&
                  (o.shadow.normalBias = t.shadow.normalBias),
                void 0 !== t.shadow.radius &&
                  (o.shadow.radius = t.shadow.radius),
                void 0 !== t.shadow.mapSize &&
                  o.shadow.mapSize.fromArray(t.shadow.mapSize),
                void 0 !== t.shadow.camera &&
                  (o.shadow.camera = this.parseObject(t.shadow.camera))),
              void 0 !== t.visible && (o.visible = t.visible),
              void 0 !== t.frustumCulled && (o.frustumCulled = t.frustumCulled),
              void 0 !== t.renderOrder && (o.renderOrder = t.renderOrder),
              void 0 !== t.userData && (o.userData = t.userData),
              void 0 !== t.layers && (o.layers.mask = t.layers),
              void 0 !== t.children)
            ) {
              const s = t.children;
              for (let t = 0; t < s.length; t++)
                o.add(this.parseObject(s[t], e, n, i, r));
            }
            if (void 0 !== t.animations) {
              const e = t.animations;
              for (let t = 0; t < e.length; t++) {
                const n = e[t];
                o.animations.push(r[n]);
              }
            }
            if ("LOD" === t.type) {
              void 0 !== t.autoUpdate && (o.autoUpdate = t.autoUpdate);
              const e = t.levels;
              for (let t = 0; t < e.length; t++) {
                const n = e[t],
                  i = o.getObjectByProperty("uuid", n.object);
                void 0 !== i && o.addLevel(i, n.distance);
              }
            }
            return o;
          }
          bindSkeletons(t, e) {
            0 !== Object.keys(e).length &&
              t.traverse(function (t) {
                if (!0 === t.isSkinnedMesh && void 0 !== t.skeleton) {
                  const n = e[t.skeleton];
                  void 0 === n
                    ? console.warn(
                        "THREE.ObjectLoader: No skeleton found with UUID:",
                        t.skeleton
                      )
                    : t.bind(n, t.bindMatrix);
                }
              });
          }
          setTexturePath(t) {
            return (
              console.warn(
                "THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."
              ),
              this.setResourcePath(t)
            );
          }
        }
        const pd = {
            UVMapping: rt,
            CubeReflectionMapping: ot,
            CubeRefractionMapping: st,
            EquirectangularReflectionMapping: at,
            EquirectangularRefractionMapping: lt,
            CubeUVReflectionMapping: ct,
            CubeUVRefractionMapping: ut,
          },
          fd = {
            RepeatWrapping: ht,
            ClampToEdgeWrapping: dt,
            MirroredRepeatWrapping: pt,
          },
          md = {
            NearestFilter: ft,
            NearestMipmapNearestFilter: mt,
            NearestMipmapLinearFilter: vt,
            LinearFilter: xt,
            LinearMipmapNearestFilter: _t,
            LinearMipmapLinearFilter: wt,
          };
        class gd extends Rh {
          constructor(t) {
            super(t),
              "undefined" == typeof createImageBitmap &&
                console.warn(
                  "THREE.ImageBitmapLoader: createImageBitmap() not supported."
                ),
              "undefined" == typeof fetch &&
                console.warn("THREE.ImageBitmapLoader: fetch() not supported."),
              (this.options = { premultiplyAlpha: "none" });
          }
          setOptions(t) {
            return (this.options = t), this;
          }
          load(t, e, n, i) {
            void 0 === t && (t = ""),
              void 0 !== this.path && (t = this.path + t),
              (t = this.manager.resolveURL(t));
            const r = this,
              o = Ah.get(t);
            if (void 0 !== o)
              return (
                r.manager.itemStart(t),
                setTimeout(function () {
                  e && e(o), r.manager.itemEnd(t);
                }, 0),
                o
              );
            const s = {};
            (s.credentials =
              "anonymous" === this.crossOrigin ? "same-origin" : "include"),
              (s.headers = this.requestHeader),
              fetch(t, s)
                .then(function (t) {
                  return t.blob();
                })
                .then(function (t) {
                  return createImageBitmap(
                    t,
                    Object.assign(r.options, { colorSpaceConversion: "none" })
                  );
                })
                .then(function (n) {
                  Ah.add(t, n), e && e(n), r.manager.itemEnd(t);
                })
                .catch(function (e) {
                  i && i(e), r.manager.itemError(t), r.manager.itemEnd(t);
                }),
              r.manager.itemStart(t);
          }
        }
        gd.prototype.isImageBitmapLoader = !0;
        class vd {
          constructor() {
            (this.type = "ShapePath"),
              (this.color = new Lr()),
              (this.subPaths = []),
              (this.currentPath = null);
          }
          moveTo(t, e) {
            return (
              (this.currentPath = new Hh()),
              this.subPaths.push(this.currentPath),
              this.currentPath.moveTo(t, e),
              this
            );
          }
          lineTo(t, e) {
            return this.currentPath.lineTo(t, e), this;
          }
          quadraticCurveTo(t, e, n, i) {
            return this.currentPath.quadraticCurveTo(t, e, n, i), this;
          }
          bezierCurveTo(t, e, n, i, r, o) {
            return this.currentPath.bezierCurveTo(t, e, n, i, r, o), this;
          }
          splineThru(t) {
            return this.currentPath.splineThru(t), this;
          }
          toShapes(t, e) {
            function n(t) {
              const e = [];
              for (let n = 0, i = t.length; n < i; n++) {
                const i = t[n],
                  r = new jh();
                (r.curves = i.curves), e.push(r);
              }
              return e;
            }
            function i(t, e) {
              const n = e.length;
              let i = !1;
              for (let r = n - 1, o = 0; o < n; r = o++) {
                let n = e[r],
                  s = e[o],
                  a = s.x - n.x,
                  l = s.y - n.y;
                if (Math.abs(l) > Number.EPSILON) {
                  if (
                    (l < 0 && ((n = e[o]), (a = -a), (s = e[r]), (l = -l)),
                    t.y < n.y || t.y > s.y)
                  )
                    continue;
                  if (t.y === n.y) {
                    if (t.x === n.x) return !0;
                  } else {
                    const e = l * (t.x - n.x) - a * (t.y - n.y);
                    if (0 === e) return !0;
                    if (e < 0) continue;
                    i = !i;
                  }
                } else {
                  if (t.y !== n.y) continue;
                  if ((s.x <= t.x && t.x <= n.x) || (n.x <= t.x && t.x <= s.x))
                    return !0;
                }
              }
              return i;
            }
            const r = Bu.isClockWise,
              o = this.subPaths;
            if (0 === o.length) return [];
            if (!0 === e) return n(o);
            let s, a, l;
            const c = [];
            if (1 === o.length)
              return (
                (a = o[0]), (l = new jh()), (l.curves = a.curves), c.push(l), c
              );
            let u = !r(o[0].getPoints());
            u = t ? !u : u;
            const h = [],
              d = [];
            let p,
              f,
              m = [],
              g = 0;
            (d[g] = void 0), (m[g] = []);
            for (let e = 0, n = o.length; e < n; e++)
              (a = o[e]),
                (p = a.getPoints()),
                (s = r(p)),
                (s = t ? !s : s),
                s
                  ? (!u && d[g] && g++,
                    (d[g] = { s: new jh(), p }),
                    (d[g].s.curves = a.curves),
                    u && g++,
                    (m[g] = []))
                  : m[g].push({ h: a, p: p[0] });
            if (!d[0]) return n(o);
            if (d.length > 1) {
              let t = !1;
              const e = [];
              for (let t = 0, e = d.length; t < e; t++) h[t] = [];
              for (let n = 0, r = d.length; n < r; n++) {
                const r = m[n];
                for (let o = 0; o < r.length; o++) {
                  const s = r[o];
                  let a = !0;
                  for (let r = 0; r < d.length; r++)
                    i(s.p, d[r].p) &&
                      (n !== r && e.push({ froms: n, tos: r, hole: o }),
                      a ? ((a = !1), h[r].push(s)) : (t = !0));
                  a && h[n].push(s);
                }
              }
              e.length > 0 && (t || (m = h));
            }
            for (let t = 0, e = d.length; t < e; t++) {
              (l = d[t].s), c.push(l), (f = m[t]);
              for (let t = 0, e = f.length; t < e; t++) l.holes.push(f[t].h);
            }
            return c;
          }
        }
        class yd {
          constructor(t) {
            (this.type = "Font"), (this.data = t);
          }
          generateShapes(t, e = 100) {
            const n = [],
              i = (function (t, e, n) {
                const i = Array.from(t),
                  r = e / n.resolution,
                  o =
                    (n.boundingBox.yMax -
                      n.boundingBox.yMin +
                      n.underlineThickness) *
                    r,
                  s = [];
                let a = 0,
                  l = 0;
                for (let t = 0; t < i.length; t++) {
                  const e = i[t];
                  if ("\n" === e) (a = 0), (l -= o);
                  else {
                    const t = xd(e, r, a, l, n);
                    (a += t.offsetX), s.push(t.path);
                  }
                }
                return s;
              })(t, e, this.data);
            for (let t = 0, e = i.length; t < e; t++)
              Array.prototype.push.apply(n, i[t].toShapes());
            return n;
          }
        }
        function xd(t, e, n, i, r) {
          const o = r.glyphs[t] || r.glyphs["?"];
          if (!o)
            return void console.error(
              'THREE.Font: character "' +
                t +
                '" does not exists in font family ' +
                r.familyName +
                "."
            );
          const s = new vd();
          let a, l, c, u, h, d, p, f;
          if (o.o) {
            const t = o._cachedOutline || (o._cachedOutline = o.o.split(" "));
            for (let r = 0, o = t.length; r < o; )
              switch (t[r++]) {
                case "m":
                  (a = t[r++] * e + n), (l = t[r++] * e + i), s.moveTo(a, l);
                  break;
                case "l":
                  (a = t[r++] * e + n), (l = t[r++] * e + i), s.lineTo(a, l);
                  break;
                case "q":
                  (c = t[r++] * e + n),
                    (u = t[r++] * e + i),
                    (h = t[r++] * e + n),
                    (d = t[r++] * e + i),
                    s.quadraticCurveTo(h, d, c, u);
                  break;
                case "b":
                  (c = t[r++] * e + n),
                    (u = t[r++] * e + i),
                    (h = t[r++] * e + n),
                    (d = t[r++] * e + i),
                    (p = t[r++] * e + n),
                    (f = t[r++] * e + i),
                    s.bezierCurveTo(h, d, p, f, c, u);
              }
          }
          return { offsetX: o.ha * e, path: s };
        }
        yd.prototype.isFont = !0;
        class _d extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = new Oh(this.manager);
            o.setPath(this.path),
              o.setRequestHeader(this.requestHeader),
              o.setWithCredentials(r.withCredentials),
              o.load(
                t,
                function (t) {
                  let n;
                  try {
                    n = JSON.parse(t);
                  } catch (e) {
                    console.warn(
                      "THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."
                    ),
                      (n = JSON.parse(t.substring(65, t.length - 2)));
                  }
                  const i = r.parse(n);
                  e && e(i);
                },
                n,
                i
              );
          }
          parse(t) {
            return new yd(t);
          }
        }
        let bd;
        const wd = {
          getContext: function () {
            return (
              void 0 === bd &&
                (bd = new (window.AudioContext || window.webkitAudioContext)()),
              bd
            );
          },
          setContext: function (t) {
            bd = t;
          },
        };
        class Md extends Rh {
          constructor(t) {
            super(t);
          }
          load(t, e, n, i) {
            const r = this,
              o = new Oh(this.manager);
            o.setResponseType("arraybuffer"),
              o.setPath(this.path),
              o.setRequestHeader(this.requestHeader),
              o.setWithCredentials(this.withCredentials),
              o.load(
                t,
                function (n) {
                  try {
                    const t = n.slice(0);
                    wd.getContext().decodeAudioData(t, function (t) {
                      e(t);
                    });
                  } catch (e) {
                    i ? i(e) : console.error(e), r.manager.itemError(t);
                  }
                },
                n,
                i
              );
          }
        }
        class Sd extends sd {
          constructor(t, e, n = 1) {
            super(void 0, n);
            const i = new Lr().set(t),
              r = new Lr().set(e),
              o = new ai(i.r, i.g, i.b),
              s = new ai(r.r, r.g, r.b),
              a = Math.sqrt(Math.PI),
              l = a * Math.sqrt(0.75);
            this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),
              this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l);
          }
        }
        Sd.prototype.isHemisphereLightProbe = !0;
        class Ed extends sd {
          constructor(t, e = 1) {
            super(void 0, e);
            const n = new Lr().set(t);
            this.sh.coefficients[0]
              .set(n.r, n.g, n.b)
              .multiplyScalar(2 * Math.sqrt(Math.PI));
          }
        }
        Ed.prototype.isAmbientLightProbe = !0;
        const Td = new Fi(),
          Ad = new Fi();
        class Cd {
          constructor() {
            (this.type = "StereoCamera"),
              (this.aspect = 1),
              (this.eyeSep = 0.064),
              (this.cameraL = new Ao()),
              this.cameraL.layers.enable(1),
              (this.cameraL.matrixAutoUpdate = !1),
              (this.cameraR = new Ao()),
              this.cameraR.layers.enable(2),
              (this.cameraR.matrixAutoUpdate = !1),
              (this._cache = {
                focus: null,
                fov: null,
                aspect: null,
                near: null,
                far: null,
                zoom: null,
                eyeSep: null,
              });
          }
          update(t) {
            const e = this._cache;
            if (
              e.focus !== t.focus ||
              e.fov !== t.fov ||
              e.aspect !== t.aspect * this.aspect ||
              e.near !== t.near ||
              e.far !== t.far ||
              e.zoom !== t.zoom ||
              e.eyeSep !== this.eyeSep
            ) {
              (e.focus = t.focus),
                (e.fov = t.fov),
                (e.aspect = t.aspect * this.aspect),
                (e.near = t.near),
                (e.far = t.far),
                (e.zoom = t.zoom),
                (e.eyeSep = this.eyeSep);
              const n = t.projectionMatrix.clone(),
                i = e.eyeSep / 2,
                r = (i * e.near) / e.focus,
                o = (e.near * Math.tan(zn * e.fov * 0.5)) / e.zoom;
              let s, a;
              (Ad.elements[12] = -i),
                (Td.elements[12] = i),
                (s = -o * e.aspect + r),
                (a = o * e.aspect + r),
                (n.elements[0] = (2 * e.near) / (a - s)),
                (n.elements[8] = (a + s) / (a - s)),
                this.cameraL.projectionMatrix.copy(n),
                (s = -o * e.aspect - r),
                (a = o * e.aspect - r),
                (n.elements[0] = (2 * e.near) / (a - s)),
                (n.elements[8] = (a + s) / (a - s)),
                this.cameraR.projectionMatrix.copy(n);
            }
            this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Ad),
              this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Td);
          }
        }
        class Ld {
          constructor(t = !0) {
            (this.autoStart = t),
              (this.startTime = 0),
              (this.oldTime = 0),
              (this.elapsedTime = 0),
              (this.running = !1);
          }
          start() {
            (this.startTime = Rd()),
              (this.oldTime = this.startTime),
              (this.elapsedTime = 0),
              (this.running = !0);
          }
          stop() {
            this.getElapsedTime(), (this.running = !1), (this.autoStart = !1);
          }
          getElapsedTime() {
            return this.getDelta(), this.elapsedTime;
          }
          getDelta() {
            let t = 0;
            if (this.autoStart && !this.running) return this.start(), 0;
            if (this.running) {
              const e = Rd();
              (t = (e - this.oldTime) / 1e3),
                (this.oldTime = e),
                (this.elapsedTime += t);
            }
            return t;
          }
        }
        function Rd() {
          return ("undefined" == typeof performance ? Date : performance).now();
        }
        const Pd = new ai(),
          Od = new si(),
          kd = new ai(),
          Id = new ai();
        class Dd extends cr {
          constructor() {
            super(),
              (this.type = "AudioListener"),
              (this.context = wd.getContext()),
              (this.gain = this.context.createGain()),
              this.gain.connect(this.context.destination),
              (this.filter = null),
              (this.timeDelta = 0),
              (this._clock = new Ld());
          }
          getInput() {
            return this.gain;
          }
          removeFilter() {
            return (
              null !== this.filter &&
                (this.gain.disconnect(this.filter),
                this.filter.disconnect(this.context.destination),
                this.gain.connect(this.context.destination),
                (this.filter = null)),
              this
            );
          }
          getFilter() {
            return this.filter;
          }
          setFilter(t) {
            return (
              null !== this.filter
                ? (this.gain.disconnect(this.filter),
                  this.filter.disconnect(this.context.destination))
                : this.gain.disconnect(this.context.destination),
              (this.filter = t),
              this.gain.connect(this.filter),
              this.filter.connect(this.context.destination),
              this
            );
          }
          getMasterVolume() {
            return this.gain.gain.value;
          }
          setMasterVolume(t) {
            return (
              this.gain.gain.setTargetAtTime(t, this.context.currentTime, 0.01),
              this
            );
          }
          updateMatrixWorld(t) {
            super.updateMatrixWorld(t);
            const e = this.context.listener,
              n = this.up;
            if (
              ((this.timeDelta = this._clock.getDelta()),
              this.matrixWorld.decompose(Pd, Od, kd),
              Id.set(0, 0, -1).applyQuaternion(Od),
              e.positionX)
            ) {
              const t = this.context.currentTime + this.timeDelta;
              e.positionX.linearRampToValueAtTime(Pd.x, t),
                e.positionY.linearRampToValueAtTime(Pd.y, t),
                e.positionZ.linearRampToValueAtTime(Pd.z, t),
                e.forwardX.linearRampToValueAtTime(Id.x, t),
                e.forwardY.linearRampToValueAtTime(Id.y, t),
                e.forwardZ.linearRampToValueAtTime(Id.z, t),
                e.upX.linearRampToValueAtTime(n.x, t),
                e.upY.linearRampToValueAtTime(n.y, t),
                e.upZ.linearRampToValueAtTime(n.z, t);
            } else
              e.setPosition(Pd.x, Pd.y, Pd.z),
                e.setOrientation(Id.x, Id.y, Id.z, n.x, n.y, n.z);
          }
        }
        class Bd extends cr {
          constructor(t) {
            super(),
              (this.type = "Audio"),
              (this.listener = t),
              (this.context = t.context),
              (this.gain = this.context.createGain()),
              this.gain.connect(t.getInput()),
              (this.autoplay = !1),
              (this.buffer = null),
              (this.detune = 0),
              (this.loop = !1),
              (this.loopStart = 0),
              (this.loopEnd = 0),
              (this.offset = 0),
              (this.duration = void 0),
              (this.playbackRate = 1),
              (this.isPlaying = !1),
              (this.hasPlaybackControl = !0),
              (this.source = null),
              (this.sourceType = "empty"),
              (this._startedAt = 0),
              (this._progress = 0),
              (this._connected = !1),
              (this.filters = []);
          }
          getOutput() {
            return this.gain;
          }
          setNodeSource(t) {
            return (
              (this.hasPlaybackControl = !1),
              (this.sourceType = "audioNode"),
              (this.source = t),
              this.connect(),
              this
            );
          }
          setMediaElementSource(t) {
            return (
              (this.hasPlaybackControl = !1),
              (this.sourceType = "mediaNode"),
              (this.source = this.context.createMediaElementSource(t)),
              this.connect(),
              this
            );
          }
          setMediaStreamSource(t) {
            return (
              (this.hasPlaybackControl = !1),
              (this.sourceType = "mediaStreamNode"),
              (this.source = this.context.createMediaStreamSource(t)),
              this.connect(),
              this
            );
          }
          setBuffer(t) {
            return (
              (this.buffer = t),
              (this.sourceType = "buffer"),
              this.autoplay && this.play(),
              this
            );
          }
          play(t = 0) {
            if (!0 === this.isPlaying)
              return void console.warn(
                "THREE.Audio: Audio is already playing."
              );
            if (!1 === this.hasPlaybackControl)
              return void console.warn(
                "THREE.Audio: this Audio has no playback control."
              );
            this._startedAt = this.context.currentTime + t;
            const e = this.context.createBufferSource();
            return (
              (e.buffer = this.buffer),
              (e.loop = this.loop),
              (e.loopStart = this.loopStart),
              (e.loopEnd = this.loopEnd),
              (e.onended = this.onEnded.bind(this)),
              e.start(
                this._startedAt,
                this._progress + this.offset,
                this.duration
              ),
              (this.isPlaying = !0),
              (this.source = e),
              this.setDetune(this.detune),
              this.setPlaybackRate(this.playbackRate),
              this.connect()
            );
          }
          pause() {
            if (!1 !== this.hasPlaybackControl)
              return (
                !0 === this.isPlaying &&
                  ((this._progress +=
                    Math.max(this.context.currentTime - this._startedAt, 0) *
                    this.playbackRate),
                  !0 === this.loop &&
                    (this._progress =
                      this._progress % (this.duration || this.buffer.duration)),
                  this.source.stop(),
                  (this.source.onended = null),
                  (this.isPlaying = !1)),
                this
              );
            console.warn("THREE.Audio: this Audio has no playback control.");
          }
          stop() {
            if (!1 !== this.hasPlaybackControl)
              return (
                (this._progress = 0),
                this.source.stop(),
                (this.source.onended = null),
                (this.isPlaying = !1),
                this
              );
            console.warn("THREE.Audio: this Audio has no playback control.");
          }
          connect() {
            if (this.filters.length > 0) {
              this.source.connect(this.filters[0]);
              for (let t = 1, e = this.filters.length; t < e; t++)
                this.filters[t - 1].connect(this.filters[t]);
              this.filters[this.filters.length - 1].connect(this.getOutput());
            } else this.source.connect(this.getOutput());
            return (this._connected = !0), this;
          }
          disconnect() {
            if (this.filters.length > 0) {
              this.source.disconnect(this.filters[0]);
              for (let t = 1, e = this.filters.length; t < e; t++)
                this.filters[t - 1].disconnect(this.filters[t]);
              this.filters[this.filters.length - 1].disconnect(
                this.getOutput()
              );
            } else this.source.disconnect(this.getOutput());
            return (this._connected = !1), this;
          }
          getFilters() {
            return this.filters;
          }
          setFilters(t) {
            return (
              t || (t = []),
              !0 === this._connected
                ? (this.disconnect(),
                  (this.filters = t.slice()),
                  this.connect())
                : (this.filters = t.slice()),
              this
            );
          }
          setDetune(t) {
            if (((this.detune = t), void 0 !== this.source.detune))
              return (
                !0 === this.isPlaying &&
                  this.source.detune.setTargetAtTime(
                    this.detune,
                    this.context.currentTime,
                    0.01
                  ),
                this
              );
          }
          getDetune() {
            return this.detune;
          }
          getFilter() {
            return this.getFilters()[0];
          }
          setFilter(t) {
            return this.setFilters(t ? [t] : []);
          }
          setPlaybackRate(t) {
            if (!1 !== this.hasPlaybackControl)
              return (
                (this.playbackRate = t),
                !0 === this.isPlaying &&
                  this.source.playbackRate.setTargetAtTime(
                    this.playbackRate,
                    this.context.currentTime,
                    0.01
                  ),
                this
              );
            console.warn("THREE.Audio: this Audio has no playback control.");
          }
          getPlaybackRate() {
            return this.playbackRate;
          }
          onEnded() {
            this.isPlaying = !1;
          }
          getLoop() {
            return !1 === this.hasPlaybackControl
              ? (console.warn(
                  "THREE.Audio: this Audio has no playback control."
                ),
                !1)
              : this.loop;
          }
          setLoop(t) {
            if (!1 !== this.hasPlaybackControl)
              return (
                (this.loop = t),
                !0 === this.isPlaying && (this.source.loop = this.loop),
                this
              );
            console.warn("THREE.Audio: this Audio has no playback control.");
          }
          setLoopStart(t) {
            return (this.loopStart = t), this;
          }
          setLoopEnd(t) {
            return (this.loopEnd = t), this;
          }
          getVolume() {
            return this.gain.gain.value;
          }
          setVolume(t) {
            return (
              this.gain.gain.setTargetAtTime(t, this.context.currentTime, 0.01),
              this
            );
          }
        }
        const Nd = new ai(),
          Fd = new si(),
          zd = new ai(),
          Hd = new ai();
        class jd extends Bd {
          constructor(t) {
            super(t),
              (this.panner = this.context.createPanner()),
              (this.panner.panningModel = "HRTF"),
              this.panner.connect(this.gain);
          }
          getOutput() {
            return this.panner;
          }
          getRefDistance() {
            return this.panner.refDistance;
          }
          setRefDistance(t) {
            return (this.panner.refDistance = t), this;
          }
          getRolloffFactor() {
            return this.panner.rolloffFactor;
          }
          setRolloffFactor(t) {
            return (this.panner.rolloffFactor = t), this;
          }
          getDistanceModel() {
            return this.panner.distanceModel;
          }
          setDistanceModel(t) {
            return (this.panner.distanceModel = t), this;
          }
          getMaxDistance() {
            return this.panner.maxDistance;
          }
          setMaxDistance(t) {
            return (this.panner.maxDistance = t), this;
          }
          setDirectionalCone(t, e, n) {
            return (
              (this.panner.coneInnerAngle = t),
              (this.panner.coneOuterAngle = e),
              (this.panner.coneOuterGain = n),
              this
            );
          }
          updateMatrixWorld(t) {
            if (
              (super.updateMatrixWorld(t),
              !0 === this.hasPlaybackControl && !1 === this.isPlaying)
            )
              return;
            this.matrixWorld.decompose(Nd, Fd, zd),
              Hd.set(0, 0, 1).applyQuaternion(Fd);
            const e = this.panner;
            if (e.positionX) {
              const t = this.context.currentTime + this.listener.timeDelta;
              e.positionX.linearRampToValueAtTime(Nd.x, t),
                e.positionY.linearRampToValueAtTime(Nd.y, t),
                e.positionZ.linearRampToValueAtTime(Nd.z, t),
                e.orientationX.linearRampToValueAtTime(Hd.x, t),
                e.orientationY.linearRampToValueAtTime(Hd.y, t),
                e.orientationZ.linearRampToValueAtTime(Hd.z, t);
            } else
              e.setPosition(Nd.x, Nd.y, Nd.z),
                e.setOrientation(Hd.x, Hd.y, Hd.z);
          }
        }
        class Ud {
          constructor(t, e = 2048) {
            (this.analyser = t.context.createAnalyser()),
              (this.analyser.fftSize = e),
              (this.data = new Uint8Array(this.analyser.frequencyBinCount)),
              t.getOutput().connect(this.analyser);
          }
          getFrequencyData() {
            return this.analyser.getByteFrequencyData(this.data), this.data;
          }
          getAverageFrequency() {
            let t = 0;
            const e = this.getFrequencyData();
            for (let n = 0; n < e.length; n++) t += e[n];
            return t / e.length;
          }
        }
        class Vd {
          constructor(t, e, n) {
            let i, r, o;
            switch (((this.binding = t), (this.valueSize = n), e)) {
              case "quaternion":
                (i = this._slerp),
                  (r = this._slerpAdditive),
                  (o = this._setAdditiveIdentityQuaternion),
                  (this.buffer = new Float64Array(6 * n)),
                  (this._workIndex = 5);
                break;
              case "string":
              case "bool":
                (i = this._select),
                  (r = this._select),
                  (o = this._setAdditiveIdentityOther),
                  (this.buffer = new Array(5 * n));
                break;
              default:
                (i = this._lerp),
                  (r = this._lerpAdditive),
                  (o = this._setAdditiveIdentityNumeric),
                  (this.buffer = new Float64Array(5 * n));
            }
            (this._mixBufferRegion = i),
              (this._mixBufferRegionAdditive = r),
              (this._setIdentity = o),
              (this._origIndex = 3),
              (this._addIndex = 4),
              (this.cumulativeWeight = 0),
              (this.cumulativeWeightAdditive = 0),
              (this.useCount = 0),
              (this.referenceCount = 0);
          }
          accumulate(t, e) {
            const n = this.buffer,
              i = this.valueSize,
              r = t * i + i;
            let o = this.cumulativeWeight;
            if (0 === o) {
              for (let t = 0; t !== i; ++t) n[r + t] = n[t];
              o = e;
            } else {
              o += e;
              const t = e / o;
              this._mixBufferRegion(n, r, 0, t, i);
            }
            this.cumulativeWeight = o;
          }
          accumulateAdditive(t) {
            const e = this.buffer,
              n = this.valueSize,
              i = n * this._addIndex;
            0 === this.cumulativeWeightAdditive && this._setIdentity(),
              this._mixBufferRegionAdditive(e, i, 0, t, n),
              (this.cumulativeWeightAdditive += t);
          }
          apply(t) {
            const e = this.valueSize,
              n = this.buffer,
              i = t * e + e,
              r = this.cumulativeWeight,
              o = this.cumulativeWeightAdditive,
              s = this.binding;
            if (
              ((this.cumulativeWeight = 0),
              (this.cumulativeWeightAdditive = 0),
              r < 1)
            ) {
              const t = e * this._origIndex;
              this._mixBufferRegion(n, i, t, 1 - r, e);
            }
            o > 0 &&
              this._mixBufferRegionAdditive(n, i, this._addIndex * e, 1, e);
            for (let t = e, r = e + e; t !== r; ++t)
              if (n[t] !== n[t + e]) {
                s.setValue(n, i);
                break;
              }
          }
          saveOriginalState() {
            const t = this.binding,
              e = this.buffer,
              n = this.valueSize,
              i = n * this._origIndex;
            t.getValue(e, i);
            for (let t = n, r = i; t !== r; ++t) e[t] = e[i + (t % n)];
            this._setIdentity(),
              (this.cumulativeWeight = 0),
              (this.cumulativeWeightAdditive = 0);
          }
          restoreOriginalState() {
            const t = 3 * this.valueSize;
            this.binding.setValue(this.buffer, t);
          }
          _setAdditiveIdentityNumeric() {
            const t = this._addIndex * this.valueSize,
              e = t + this.valueSize;
            for (let n = t; n < e; n++) this.buffer[n] = 0;
          }
          _setAdditiveIdentityQuaternion() {
            this._setAdditiveIdentityNumeric(),
              (this.buffer[this._addIndex * this.valueSize + 3] = 1);
          }
          _setAdditiveIdentityOther() {
            const t = this._origIndex * this.valueSize,
              e = this._addIndex * this.valueSize;
            for (let n = 0; n < this.valueSize; n++)
              this.buffer[e + n] = this.buffer[t + n];
          }
          _select(t, e, n, i, r) {
            if (i >= 0.5) for (let i = 0; i !== r; ++i) t[e + i] = t[n + i];
          }
          _slerp(t, e, n, i) {
            si.slerpFlat(t, e, t, e, t, n, i);
          }
          _slerpAdditive(t, e, n, i, r) {
            const o = this._workIndex * r;
            si.multiplyQuaternionsFlat(t, o, t, e, t, n),
              si.slerpFlat(t, e, t, e, t, o, i);
          }
          _lerp(t, e, n, i, r) {
            const o = 1 - i;
            for (let s = 0; s !== r; ++s) {
              const r = e + s;
              t[r] = t[r] * o + t[n + s] * i;
            }
          }
          _lerpAdditive(t, e, n, i, r) {
            for (let o = 0; o !== r; ++o) {
              const r = e + o;
              t[r] = t[r] + t[n + o] * i;
            }
          }
        }
        const Gd = new RegExp("[\\[\\]\\.:\\/]", "g"),
          Wd = "[^\\[\\]\\.:\\/]",
          qd = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]",
          Xd = /((?:WC+[\/:])*)/.source.replace("WC", Wd),
          Yd = /(WCOD+)?/.source.replace("WCOD", qd),
          $d = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Wd),
          Kd = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Wd),
          Jd = new RegExp("^" + Xd + Yd + $d + Kd + "$"),
          Zd = ["material", "materials", "bones"];
        class Qd {
          constructor(t, e, n) {
            (this.path = e),
              (this.parsedPath = n || Qd.parseTrackName(e)),
              (this.node = Qd.findNode(t, this.parsedPath.nodeName) || t),
              (this.rootNode = t),
              (this.getValue = this._getValue_unbound),
              (this.setValue = this._setValue_unbound);
          }
          static create(t, e, n) {
            return t && t.isAnimationObjectGroup
              ? new Qd.Composite(t, e, n)
              : new Qd(t, e, n);
          }
          static sanitizeNodeName(t) {
            return t.replace(/\s/g, "_").replace(Gd, "");
          }
          static parseTrackName(t) {
            const e = Jd.exec(t);
            if (!e)
              throw new Error("PropertyBinding: Cannot parse trackName: " + t);
            const n = {
                nodeName: e[2],
                objectName: e[3],
                objectIndex: e[4],
                propertyName: e[5],
                propertyIndex: e[6],
              },
              i = n.nodeName && n.nodeName.lastIndexOf(".");
            if (void 0 !== i && -1 !== i) {
              const t = n.nodeName.substring(i + 1);
              -1 !== Zd.indexOf(t) &&
                ((n.nodeName = n.nodeName.substring(0, i)), (n.objectName = t));
            }
            if (null === n.propertyName || 0 === n.propertyName.length)
              throw new Error(
                "PropertyBinding: can not parse propertyName from trackName: " +
                  t
              );
            return n;
          }
          static findNode(t, e) {
            if (
              !e ||
              "" === e ||
              "." === e ||
              -1 === e ||
              e === t.name ||
              e === t.uuid
            )
              return t;
            if (t.skeleton) {
              const n = t.skeleton.getBoneByName(e);
              if (void 0 !== n) return n;
            }
            if (t.children) {
              const n = function (t) {
                  for (let i = 0; i < t.length; i++) {
                    const r = t[i];
                    if (r.name === e || r.uuid === e) return r;
                    const o = n(r.children);
                    if (o) return o;
                  }
                  return null;
                },
                i = n(t.children);
              if (i) return i;
            }
            return null;
          }
          _getValue_unavailable() {}
          _setValue_unavailable() {}
          _getValue_direct(t, e) {
            t[e] = this.node[this.propertyName];
          }
          _getValue_array(t, e) {
            const n = this.resolvedProperty;
            for (let i = 0, r = n.length; i !== r; ++i) t[e++] = n[i];
          }
          _getValue_arrayElement(t, e) {
            t[e] = this.resolvedProperty[this.propertyIndex];
          }
          _getValue_toArray(t, e) {
            this.resolvedProperty.toArray(t, e);
          }
          _setValue_direct(t, e) {
            this.targetObject[this.propertyName] = t[e];
          }
          _setValue_direct_setNeedsUpdate(t, e) {
            (this.targetObject[this.propertyName] = t[e]),
              (this.targetObject.needsUpdate = !0);
          }
          _setValue_direct_setMatrixWorldNeedsUpdate(t, e) {
            (this.targetObject[this.propertyName] = t[e]),
              (this.targetObject.matrixWorldNeedsUpdate = !0);
          }
          _setValue_array(t, e) {
            const n = this.resolvedProperty;
            for (let i = 0, r = n.length; i !== r; ++i) n[i] = t[e++];
          }
          _setValue_array_setNeedsUpdate(t, e) {
            const n = this.resolvedProperty;
            for (let i = 0, r = n.length; i !== r; ++i) n[i] = t[e++];
            this.targetObject.needsUpdate = !0;
          }
          _setValue_array_setMatrixWorldNeedsUpdate(t, e) {
            const n = this.resolvedProperty;
            for (let i = 0, r = n.length; i !== r; ++i) n[i] = t[e++];
            this.targetObject.matrixWorldNeedsUpdate = !0;
          }
          _setValue_arrayElement(t, e) {
            this.resolvedProperty[this.propertyIndex] = t[e];
          }
          _setValue_arrayElement_setNeedsUpdate(t, e) {
            (this.resolvedProperty[this.propertyIndex] = t[e]),
              (this.targetObject.needsUpdate = !0);
          }
          _setValue_arrayElement_setMatrixWorldNeedsUpdate(t, e) {
            (this.resolvedProperty[this.propertyIndex] = t[e]),
              (this.targetObject.matrixWorldNeedsUpdate = !0);
          }
          _setValue_fromArray(t, e) {
            this.resolvedProperty.fromArray(t, e);
          }
          _setValue_fromArray_setNeedsUpdate(t, e) {
            this.resolvedProperty.fromArray(t, e),
              (this.targetObject.needsUpdate = !0);
          }
          _setValue_fromArray_setMatrixWorldNeedsUpdate(t, e) {
            this.resolvedProperty.fromArray(t, e),
              (this.targetObject.matrixWorldNeedsUpdate = !0);
          }
          _getValue_unbound(t, e) {
            this.bind(), this.getValue(t, e);
          }
          _setValue_unbound(t, e) {
            this.bind(), this.setValue(t, e);
          }
          bind() {
            let t = this.node;
            const e = this.parsedPath,
              n = e.objectName,
              i = e.propertyName;
            let r = e.propertyIndex;
            if (
              (t ||
                ((t = Qd.findNode(this.rootNode, e.nodeName) || this.rootNode),
                (this.node = t)),
              (this.getValue = this._getValue_unavailable),
              (this.setValue = this._setValue_unavailable),
              !t)
            )
              return void console.error(
                "THREE.PropertyBinding: Trying to update node for track: " +
                  this.path +
                  " but it wasn't found."
              );
            if (n) {
              let i = e.objectIndex;
              switch (n) {
                case "materials":
                  if (!t.material)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                      this
                    );
                  if (!t.material.materials)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
                      this
                    );
                  t = t.material.materials;
                  break;
                case "bones":
                  if (!t.skeleton)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
                      this
                    );
                  t = t.skeleton.bones;
                  for (let e = 0; e < t.length; e++)
                    if (t[e].name === i) {
                      i = e;
                      break;
                    }
                  break;
                default:
                  if (void 0 === t[n])
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to objectName of node undefined.",
                      this
                    );
                  t = t[n];
              }
              if (void 0 !== i) {
                if (void 0 === t[i])
                  return void console.error(
                    "THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
                    this,
                    t
                  );
                t = t[i];
              }
            }
            const o = t[i];
            if (void 0 === o) {
              const n = e.nodeName;
              return void console.error(
                "THREE.PropertyBinding: Trying to update property for track: " +
                  n +
                  "." +
                  i +
                  " but it wasn't found.",
                t
              );
            }
            let s = this.Versioning.None;
            (this.targetObject = t),
              void 0 !== t.needsUpdate
                ? (s = this.Versioning.NeedsUpdate)
                : void 0 !== t.matrixWorldNeedsUpdate &&
                  (s = this.Versioning.MatrixWorldNeedsUpdate);
            let a = this.BindingType.Direct;
            if (void 0 !== r) {
              if ("morphTargetInfluences" === i) {
                if (!t.geometry)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
                    this
                  );
                if (!t.geometry.isBufferGeometry)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",
                    this
                  );
                if (!t.geometry.morphAttributes)
                  return void console.error(
                    "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
                    this
                  );
                void 0 !== t.morphTargetDictionary[r] &&
                  (r = t.morphTargetDictionary[r]);
              }
              (a = this.BindingType.ArrayElement),
                (this.resolvedProperty = o),
                (this.propertyIndex = r);
            } else
              void 0 !== o.fromArray && void 0 !== o.toArray
                ? ((a = this.BindingType.HasFromToArray),
                  (this.resolvedProperty = o))
                : Array.isArray(o)
                ? ((a = this.BindingType.EntireArray),
                  (this.resolvedProperty = o))
                : (this.propertyName = i);
            (this.getValue = this.GetterByBindingType[a]),
              (this.setValue = this.SetterByBindingTypeAndVersioning[a][s]);
          }
          unbind() {
            (this.node = null),
              (this.getValue = this._getValue_unbound),
              (this.setValue = this._setValue_unbound);
          }
        }
        (Qd.Composite = class {
          constructor(t, e, n) {
            const i = n || Qd.parseTrackName(e);
            (this._targetGroup = t), (this._bindings = t.subscribe_(e, i));
          }
          getValue(t, e) {
            this.bind();
            const n = this._targetGroup.nCachedObjects_,
              i = this._bindings[n];
            void 0 !== i && i.getValue(t, e);
          }
          setValue(t, e) {
            const n = this._bindings;
            for (
              let i = this._targetGroup.nCachedObjects_, r = n.length;
              i !== r;
              ++i
            )
              n[i].setValue(t, e);
          }
          bind() {
            const t = this._bindings;
            for (
              let e = this._targetGroup.nCachedObjects_, n = t.length;
              e !== n;
              ++e
            )
              t[e].bind();
          }
          unbind() {
            const t = this._bindings;
            for (
              let e = this._targetGroup.nCachedObjects_, n = t.length;
              e !== n;
              ++e
            )
              t[e].unbind();
          }
        }),
          (Qd.prototype.BindingType = {
            Direct: 0,
            EntireArray: 1,
            ArrayElement: 2,
            HasFromToArray: 3,
          }),
          (Qd.prototype.Versioning = {
            None: 0,
            NeedsUpdate: 1,
            MatrixWorldNeedsUpdate: 2,
          }),
          (Qd.prototype.GetterByBindingType = [
            Qd.prototype._getValue_direct,
            Qd.prototype._getValue_array,
            Qd.prototype._getValue_arrayElement,
            Qd.prototype._getValue_toArray,
          ]),
          (Qd.prototype.SetterByBindingTypeAndVersioning = [
            [
              Qd.prototype._setValue_direct,
              Qd.prototype._setValue_direct_setNeedsUpdate,
              Qd.prototype._setValue_direct_setMatrixWorldNeedsUpdate,
            ],
            [
              Qd.prototype._setValue_array,
              Qd.prototype._setValue_array_setNeedsUpdate,
              Qd.prototype._setValue_array_setMatrixWorldNeedsUpdate,
            ],
            [
              Qd.prototype._setValue_arrayElement,
              Qd.prototype._setValue_arrayElement_setNeedsUpdate,
              Qd.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,
            ],
            [
              Qd.prototype._setValue_fromArray,
              Qd.prototype._setValue_fromArray_setNeedsUpdate,
              Qd.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,
            ],
          ]);
        class tp {
          constructor() {
            (this.uuid = jn()),
              (this._objects = Array.prototype.slice.call(arguments)),
              (this.nCachedObjects_ = 0);
            const t = {};
            this._indicesByUUID = t;
            for (let e = 0, n = arguments.length; e !== n; ++e)
              t[arguments[e].uuid] = e;
            (this._paths = []),
              (this._parsedPaths = []),
              (this._bindings = []),
              (this._bindingsIndicesByPath = {});
            const e = this;
            this.stats = {
              objects: {
                get total() {
                  return e._objects.length;
                },
                get inUse() {
                  return this.total - e.nCachedObjects_;
                },
              },
              get bindingsPerObject() {
                return e._bindings.length;
              },
            };
          }
          add() {
            const t = this._objects,
              e = this._indicesByUUID,
              n = this._paths,
              i = this._parsedPaths,
              r = this._bindings,
              o = r.length;
            let s,
              a = t.length,
              l = this.nCachedObjects_;
            for (let c = 0, u = arguments.length; c !== u; ++c) {
              const u = arguments[c],
                h = u.uuid;
              let d = e[h];
              if (void 0 === d) {
                (d = a++), (e[h] = d), t.push(u);
                for (let t = 0, e = o; t !== e; ++t)
                  r[t].push(new Qd(u, n[t], i[t]));
              } else if (d < l) {
                s = t[d];
                const a = --l,
                  c = t[a];
                (e[c.uuid] = d), (t[d] = c), (e[h] = a), (t[a] = u);
                for (let t = 0, e = o; t !== e; ++t) {
                  const e = r[t],
                    o = e[a];
                  let s = e[d];
                  (e[d] = o),
                    void 0 === s && (s = new Qd(u, n[t], i[t])),
                    (e[a] = s);
                }
              } else
                t[d] !== s &&
                  console.error(
                    "THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes."
                  );
            }
            this.nCachedObjects_ = l;
          }
          remove() {
            const t = this._objects,
              e = this._indicesByUUID,
              n = this._bindings,
              i = n.length;
            let r = this.nCachedObjects_;
            for (let o = 0, s = arguments.length; o !== s; ++o) {
              const s = arguments[o],
                a = s.uuid,
                l = e[a];
              if (void 0 !== l && l >= r) {
                const o = r++,
                  c = t[o];
                (e[c.uuid] = l), (t[l] = c), (e[a] = o), (t[o] = s);
                for (let t = 0, e = i; t !== e; ++t) {
                  const e = n[t],
                    i = e[o],
                    r = e[l];
                  (e[l] = i), (e[o] = r);
                }
              }
            }
            this.nCachedObjects_ = r;
          }
          uncache() {
            const t = this._objects,
              e = this._indicesByUUID,
              n = this._bindings,
              i = n.length;
            let r = this.nCachedObjects_,
              o = t.length;
            for (let s = 0, a = arguments.length; s !== a; ++s) {
              const a = arguments[s].uuid,
                l = e[a];
              if (void 0 !== l)
                if ((delete e[a], l < r)) {
                  const s = --r,
                    a = t[s],
                    c = --o,
                    u = t[c];
                  (e[a.uuid] = l),
                    (t[l] = a),
                    (e[u.uuid] = s),
                    (t[s] = u),
                    t.pop();
                  for (let t = 0, e = i; t !== e; ++t) {
                    const e = n[t],
                      i = e[s],
                      r = e[c];
                    (e[l] = i), (e[s] = r), e.pop();
                  }
                } else {
                  const r = --o,
                    s = t[r];
                  r > 0 && (e[s.uuid] = l), (t[l] = s), t.pop();
                  for (let t = 0, e = i; t !== e; ++t) {
                    const e = n[t];
                    (e[l] = e[r]), e.pop();
                  }
                }
            }
            this.nCachedObjects_ = r;
          }
          subscribe_(t, e) {
            const n = this._bindingsIndicesByPath;
            let i = n[t];
            const r = this._bindings;
            if (void 0 !== i) return r[i];
            const o = this._paths,
              s = this._parsedPaths,
              a = this._objects,
              l = a.length,
              c = this.nCachedObjects_,
              u = new Array(l);
            (i = r.length), (n[t] = i), o.push(t), s.push(e), r.push(u);
            for (let n = c, i = a.length; n !== i; ++n) {
              const i = a[n];
              u[n] = new Qd(i, t, e);
            }
            return u;
          }
          unsubscribe_(t) {
            const e = this._bindingsIndicesByPath,
              n = e[t];
            if (void 0 !== n) {
              const i = this._paths,
                r = this._parsedPaths,
                o = this._bindings,
                s = o.length - 1,
                a = o[s];
              (e[t[s]] = n),
                (o[n] = a),
                o.pop(),
                (r[n] = r[s]),
                r.pop(),
                (i[n] = i[s]),
                i.pop();
            }
          }
        }
        tp.prototype.isAnimationObjectGroup = !0;
        class ep {
          constructor(t, e, n = null, i = e.blendMode) {
            (this._mixer = t),
              (this._clip = e),
              (this._localRoot = n),
              (this.blendMode = i);
            const r = e.tracks,
              o = r.length,
              s = new Array(o),
              a = { endingStart: Ue, endingEnd: Ue };
            for (let t = 0; t !== o; ++t) {
              const e = r[t].createInterpolant(null);
              (s[t] = e), (e.settings = a);
            }
            (this._interpolantSettings = a),
              (this._interpolants = s),
              (this._propertyBindings = new Array(o)),
              (this._cacheIndex = null),
              (this._byClipCacheIndex = null),
              (this._timeScaleInterpolant = null),
              (this._weightInterpolant = null),
              (this.loop = Ne),
              (this._loopCount = -1),
              (this._startTime = null),
              (this.time = 0),
              (this.timeScale = 1),
              (this._effectiveTimeScale = 1),
              (this.weight = 1),
              (this._effectiveWeight = 1),
              (this.repetitions = 1 / 0),
              (this.paused = !1),
              (this.enabled = !0),
              (this.clampWhenFinished = !1),
              (this.zeroSlopeAtStart = !0),
              (this.zeroSlopeAtEnd = !0);
          }
          play() {
            return this._mixer._activateAction(this), this;
          }
          stop() {
            return this._mixer._deactivateAction(this), this.reset();
          }
          reset() {
            return (
              (this.paused = !1),
              (this.enabled = !0),
              (this.time = 0),
              (this._loopCount = -1),
              (this._startTime = null),
              this.stopFading().stopWarping()
            );
          }
          isRunning() {
            return (
              this.enabled &&
              !this.paused &&
              0 !== this.timeScale &&
              null === this._startTime &&
              this._mixer._isActiveAction(this)
            );
          }
          isScheduled() {
            return this._mixer._isActiveAction(this);
          }
          startAt(t) {
            return (this._startTime = t), this;
          }
          setLoop(t, e) {
            return (this.loop = t), (this.repetitions = e), this;
          }
          setEffectiveWeight(t) {
            return (
              (this.weight = t),
              (this._effectiveWeight = this.enabled ? t : 0),
              this.stopFading()
            );
          }
          getEffectiveWeight() {
            return this._effectiveWeight;
          }
          fadeIn(t) {
            return this._scheduleFading(t, 0, 1);
          }
          fadeOut(t) {
            return this._scheduleFading(t, 1, 0);
          }
          crossFadeFrom(t, e, n) {
            if ((t.fadeOut(e), this.fadeIn(e), n)) {
              const n = this._clip.duration,
                i = t._clip.duration,
                r = i / n,
                o = n / i;
              t.warp(1, r, e), this.warp(o, 1, e);
            }
            return this;
          }
          crossFadeTo(t, e, n) {
            return t.crossFadeFrom(this, e, n);
          }
          stopFading() {
            const t = this._weightInterpolant;
            return (
              null !== t &&
                ((this._weightInterpolant = null),
                this._mixer._takeBackControlInterpolant(t)),
              this
            );
          }
          setEffectiveTimeScale(t) {
            return (
              (this.timeScale = t),
              (this._effectiveTimeScale = this.paused ? 0 : t),
              this.stopWarping()
            );
          }
          getEffectiveTimeScale() {
            return this._effectiveTimeScale;
          }
          setDuration(t) {
            return (
              (this.timeScale = this._clip.duration / t), this.stopWarping()
            );
          }
          syncWith(t) {
            return (
              (this.time = t.time),
              (this.timeScale = t.timeScale),
              this.stopWarping()
            );
          }
          halt(t) {
            return this.warp(this._effectiveTimeScale, 0, t);
          }
          warp(t, e, n) {
            const i = this._mixer,
              r = i.time,
              o = this.timeScale;
            let s = this._timeScaleInterpolant;
            null === s &&
              ((s = i._lendControlInterpolant()),
              (this._timeScaleInterpolant = s));
            const a = s.parameterPositions,
              l = s.sampleValues;
            return (
              (a[0] = r), (a[1] = r + n), (l[0] = t / o), (l[1] = e / o), this
            );
          }
          stopWarping() {
            const t = this._timeScaleInterpolant;
            return (
              null !== t &&
                ((this._timeScaleInterpolant = null),
                this._mixer._takeBackControlInterpolant(t)),
              this
            );
          }
          getMixer() {
            return this._mixer;
          }
          getClip() {
            return this._clip;
          }
          getRoot() {
            return this._localRoot || this._mixer._root;
          }
          _update(t, e, n, i) {
            if (!this.enabled) return void this._updateWeight(t);
            const r = this._startTime;
            if (null !== r) {
              const i = (t - r) * n;
              if (i < 0 || 0 === n) return;
              (this._startTime = null), (e = n * i);
            }
            e *= this._updateTimeScale(t);
            const o = this._updateTime(e),
              s = this._updateWeight(t);
            if (s > 0) {
              const t = this._interpolants,
                e = this._propertyBindings;
              switch (this.blendMode) {
                case qe:
                  for (let n = 0, i = t.length; n !== i; ++n)
                    t[n].evaluate(o), e[n].accumulateAdditive(s);
                  break;
                case We:
                default:
                  for (let n = 0, r = t.length; n !== r; ++n)
                    t[n].evaluate(o), e[n].accumulate(i, s);
              }
            }
          }
          _updateWeight(t) {
            let e = 0;
            if (this.enabled) {
              e = this.weight;
              const n = this._weightInterpolant;
              if (null !== n) {
                const i = n.evaluate(t)[0];
                (e *= i),
                  t > n.parameterPositions[1] &&
                    (this.stopFading(), 0 === i && (this.enabled = !1));
              }
            }
            return (this._effectiveWeight = e), e;
          }
          _updateTimeScale(t) {
            let e = 0;
            if (!this.paused) {
              e = this.timeScale;
              const n = this._timeScaleInterpolant;
              null !== n &&
                ((e *= n.evaluate(t)[0]),
                t > n.parameterPositions[1] &&
                  (this.stopWarping(),
                  0 === e ? (this.paused = !0) : (this.timeScale = e)));
            }
            return (this._effectiveTimeScale = e), e;
          }
          _updateTime(t) {
            const e = this._clip.duration,
              n = this.loop;
            let i = this.time + t,
              r = this._loopCount;
            const o = n === Fe;
            if (0 === t) return -1 === r ? i : o && 1 == (1 & r) ? e - i : i;
            if (n === Be) {
              -1 === r && ((this._loopCount = 0), this._setEndings(!0, !0, !1));
              t: {
                if (i >= e) i = e;
                else {
                  if (!(i < 0)) {
                    this.time = i;
                    break t;
                  }
                  i = 0;
                }
                this.clampWhenFinished
                  ? (this.paused = !0)
                  : (this.enabled = !1),
                  (this.time = i),
                  this._mixer.dispatchEvent({
                    type: "finished",
                    action: this,
                    direction: t < 0 ? -1 : 1,
                  });
              }
            } else {
              if (
                (-1 === r &&
                  (t >= 0
                    ? ((r = 0), this._setEndings(!0, 0 === this.repetitions, o))
                    : this._setEndings(0 === this.repetitions, !0, o)),
                i >= e || i < 0)
              ) {
                const n = Math.floor(i / e);
                (i -= e * n), (r += Math.abs(n));
                const s = this.repetitions - r;
                if (s <= 0)
                  this.clampWhenFinished
                    ? (this.paused = !0)
                    : (this.enabled = !1),
                    (i = t > 0 ? e : 0),
                    (this.time = i),
                    this._mixer.dispatchEvent({
                      type: "finished",
                      action: this,
                      direction: t > 0 ? 1 : -1,
                    });
                else {
                  if (1 === s) {
                    const e = t < 0;
                    this._setEndings(e, !e, o);
                  } else this._setEndings(!1, !1, o);
                  (this._loopCount = r),
                    (this.time = i),
                    this._mixer.dispatchEvent({
                      type: "loop",
                      action: this,
                      loopDelta: n,
                    });
                }
              } else this.time = i;
              if (o && 1 == (1 & r)) return e - i;
            }
            return i;
          }
          _setEndings(t, e, n) {
            const i = this._interpolantSettings;
            n
              ? ((i.endingStart = Ve), (i.endingEnd = Ve))
              : ((i.endingStart = t ? (this.zeroSlopeAtStart ? Ve : Ue) : Ge),
                (i.endingEnd = e ? (this.zeroSlopeAtEnd ? Ve : Ue) : Ge));
          }
          _scheduleFading(t, e, n) {
            const i = this._mixer,
              r = i.time;
            let o = this._weightInterpolant;
            null === o &&
              ((o = i._lendControlInterpolant()),
              (this._weightInterpolant = o));
            const s = o.parameterPositions,
              a = o.sampleValues;
            return (s[0] = r), (a[0] = e), (s[1] = r + t), (a[1] = n), this;
          }
        }
        class np extends Bn {
          constructor(t) {
            super(),
              (this._root = t),
              this._initMemoryManager(),
              (this._accuIndex = 0),
              (this.time = 0),
              (this.timeScale = 1);
          }
          _bindAction(t, e) {
            const n = t._localRoot || this._root,
              i = t._clip.tracks,
              r = i.length,
              o = t._propertyBindings,
              s = t._interpolants,
              a = n.uuid,
              l = this._bindingsByRootAndName;
            let c = l[a];
            void 0 === c && ((c = {}), (l[a] = c));
            for (let t = 0; t !== r; ++t) {
              const r = i[t],
                l = r.name;
              let u = c[l];
              if (void 0 !== u) o[t] = u;
              else {
                if (((u = o[t]), void 0 !== u)) {
                  null === u._cacheIndex &&
                    (++u.referenceCount, this._addInactiveBinding(u, a, l));
                  continue;
                }
                const i = e && e._propertyBindings[t].binding.parsedPath;
                (u = new Vd(
                  Qd.create(n, l, i),
                  r.ValueTypeName,
                  r.getValueSize()
                )),
                  ++u.referenceCount,
                  this._addInactiveBinding(u, a, l),
                  (o[t] = u);
              }
              s[t].resultBuffer = u.buffer;
            }
          }
          _activateAction(t) {
            if (!this._isActiveAction(t)) {
              if (null === t._cacheIndex) {
                const e = (t._localRoot || this._root).uuid,
                  n = t._clip.uuid,
                  i = this._actionsByClip[n];
                this._bindAction(t, i && i.knownActions[0]),
                  this._addInactiveAction(t, n, e);
              }
              const e = t._propertyBindings;
              for (let t = 0, n = e.length; t !== n; ++t) {
                const n = e[t];
                0 == n.useCount++ &&
                  (this._lendBinding(n), n.saveOriginalState());
              }
              this._lendAction(t);
            }
          }
          _deactivateAction(t) {
            if (this._isActiveAction(t)) {
              const e = t._propertyBindings;
              for (let t = 0, n = e.length; t !== n; ++t) {
                const n = e[t];
                0 == --n.useCount &&
                  (n.restoreOriginalState(), this._takeBackBinding(n));
              }
              this._takeBackAction(t);
            }
          }
          _initMemoryManager() {
            (this._actions = []),
              (this._nActiveActions = 0),
              (this._actionsByClip = {}),
              (this._bindings = []),
              (this._nActiveBindings = 0),
              (this._bindingsByRootAndName = {}),
              (this._controlInterpolants = []),
              (this._nActiveControlInterpolants = 0);
            const t = this;
            this.stats = {
              actions: {
                get total() {
                  return t._actions.length;
                },
                get inUse() {
                  return t._nActiveActions;
                },
              },
              bindings: {
                get total() {
                  return t._bindings.length;
                },
                get inUse() {
                  return t._nActiveBindings;
                },
              },
              controlInterpolants: {
                get total() {
                  return t._controlInterpolants.length;
                },
                get inUse() {
                  return t._nActiveControlInterpolants;
                },
              },
            };
          }
          _isActiveAction(t) {
            const e = t._cacheIndex;
            return null !== e && e < this._nActiveActions;
          }
          _addInactiveAction(t, e, n) {
            const i = this._actions,
              r = this._actionsByClip;
            let o = r[e];
            if (void 0 === o)
              (o = { knownActions: [t], actionByRoot: {} }),
                (t._byClipCacheIndex = 0),
                (r[e] = o);
            else {
              const e = o.knownActions;
              (t._byClipCacheIndex = e.length), e.push(t);
            }
            (t._cacheIndex = i.length), i.push(t), (o.actionByRoot[n] = t);
          }
          _removeInactiveAction(t) {
            const e = this._actions,
              n = e[e.length - 1],
              i = t._cacheIndex;
            (n._cacheIndex = i), (e[i] = n), e.pop(), (t._cacheIndex = null);
            const r = t._clip.uuid,
              o = this._actionsByClip,
              s = o[r],
              a = s.knownActions,
              l = a[a.length - 1],
              c = t._byClipCacheIndex;
            (l._byClipCacheIndex = c),
              (a[c] = l),
              a.pop(),
              (t._byClipCacheIndex = null),
              delete s.actionByRoot[(t._localRoot || this._root).uuid],
              0 === a.length && delete o[r],
              this._removeInactiveBindingsForAction(t);
          }
          _removeInactiveBindingsForAction(t) {
            const e = t._propertyBindings;
            for (let t = 0, n = e.length; t !== n; ++t) {
              const n = e[t];
              0 == --n.referenceCount && this._removeInactiveBinding(n);
            }
          }
          _lendAction(t) {
            const e = this._actions,
              n = t._cacheIndex,
              i = this._nActiveActions++,
              r = e[i];
            (t._cacheIndex = i), (e[i] = t), (r._cacheIndex = n), (e[n] = r);
          }
          _takeBackAction(t) {
            const e = this._actions,
              n = t._cacheIndex,
              i = --this._nActiveActions,
              r = e[i];
            (t._cacheIndex = i), (e[i] = t), (r._cacheIndex = n), (e[n] = r);
          }
          _addInactiveBinding(t, e, n) {
            const i = this._bindingsByRootAndName,
              r = this._bindings;
            let o = i[e];
            void 0 === o && ((o = {}), (i[e] = o)),
              (o[n] = t),
              (t._cacheIndex = r.length),
              r.push(t);
          }
          _removeInactiveBinding(t) {
            const e = this._bindings,
              n = t.binding,
              i = n.rootNode.uuid,
              r = n.path,
              o = this._bindingsByRootAndName,
              s = o[i],
              a = e[e.length - 1],
              l = t._cacheIndex;
            (a._cacheIndex = l),
              (e[l] = a),
              e.pop(),
              delete s[r],
              0 === Object.keys(s).length && delete o[i];
          }
          _lendBinding(t) {
            const e = this._bindings,
              n = t._cacheIndex,
              i = this._nActiveBindings++,
              r = e[i];
            (t._cacheIndex = i), (e[i] = t), (r._cacheIndex = n), (e[n] = r);
          }
          _takeBackBinding(t) {
            const e = this._bindings,
              n = t._cacheIndex,
              i = --this._nActiveBindings,
              r = e[i];
            (t._cacheIndex = i), (e[i] = t), (r._cacheIndex = n), (e[n] = r);
          }
          _lendControlInterpolant() {
            const t = this._controlInterpolants,
              e = this._nActiveControlInterpolants++;
            let n = t[e];
            return (
              void 0 === n &&
                ((n = new mh(
                  new Float32Array(2),
                  new Float32Array(2),
                  1,
                  this._controlInterpolantsResultBuffer
                )),
                (n.__cacheIndex = e),
                (t[e] = n)),
              n
            );
          }
          _takeBackControlInterpolant(t) {
            const e = this._controlInterpolants,
              n = t.__cacheIndex,
              i = --this._nActiveControlInterpolants,
              r = e[i];
            (t.__cacheIndex = i), (e[i] = t), (r.__cacheIndex = n), (e[n] = r);
          }
          clipAction(t, e, n) {
            const i = e || this._root,
              r = i.uuid;
            let o = "string" == typeof t ? Eh.findByName(i, t) : t;
            const s = null !== o ? o.uuid : t,
              a = this._actionsByClip[s];
            let l = null;
            if (
              (void 0 === n && (n = null !== o ? o.blendMode : We),
              void 0 !== a)
            ) {
              const t = a.actionByRoot[r];
              if (void 0 !== t && t.blendMode === n) return t;
              (l = a.knownActions[0]), null === o && (o = l._clip);
            }
            if (null === o) return null;
            const c = new ep(this, o, e, n);
            return this._bindAction(c, l), this._addInactiveAction(c, s, r), c;
          }
          existingAction(t, e) {
            const n = e || this._root,
              i = n.uuid,
              r = "string" == typeof t ? Eh.findByName(n, t) : t,
              o = r ? r.uuid : t,
              s = this._actionsByClip[o];
            return (void 0 !== s && s.actionByRoot[i]) || null;
          }
          stopAllAction() {
            const t = this._actions;
            for (let e = this._nActiveActions - 1; e >= 0; --e) t[e].stop();
            return this;
          }
          update(t) {
            t *= this.timeScale;
            const e = this._actions,
              n = this._nActiveActions,
              i = (this.time += t),
              r = Math.sign(t),
              o = (this._accuIndex ^= 1);
            for (let s = 0; s !== n; ++s) e[s]._update(i, t, r, o);
            const s = this._bindings,
              a = this._nActiveBindings;
            for (let t = 0; t !== a; ++t) s[t].apply(o);
            return this;
          }
          setTime(t) {
            this.time = 0;
            for (let t = 0; t < this._actions.length; t++)
              this._actions[t].time = 0;
            return this.update(t);
          }
          getRoot() {
            return this._root;
          }
          uncacheClip(t) {
            const e = this._actions,
              n = t.uuid,
              i = this._actionsByClip,
              r = i[n];
            if (void 0 !== r) {
              const t = r.knownActions;
              for (let n = 0, i = t.length; n !== i; ++n) {
                const i = t[n];
                this._deactivateAction(i);
                const r = i._cacheIndex,
                  o = e[e.length - 1];
                (i._cacheIndex = null),
                  (i._byClipCacheIndex = null),
                  (o._cacheIndex = r),
                  (e[r] = o),
                  e.pop(),
                  this._removeInactiveBindingsForAction(i);
              }
              delete i[n];
            }
          }
          uncacheRoot(t) {
            const e = t.uuid,
              n = this._actionsByClip;
            for (const t in n) {
              const i = n[t].actionByRoot[e];
              void 0 !== i &&
                (this._deactivateAction(i), this._removeInactiveAction(i));
            }
            const i = this._bindingsByRootAndName[e];
            if (void 0 !== i)
              for (const t in i) {
                const e = i[t];
                e.restoreOriginalState(), this._removeInactiveBinding(e);
              }
          }
          uncacheAction(t, e) {
            const n = this.existingAction(t, e);
            null !== n &&
              (this._deactivateAction(n), this._removeInactiveAction(n));
          }
        }
        np.prototype._controlInterpolantsResultBuffer = new Float32Array(1);
        class ip {
          constructor(t) {
            "string" == typeof t &&
              (console.warn(
                "THREE.Uniform: Type parameter is no longer needed."
              ),
              (t = arguments[1])),
              (this.value = t);
          }
          clone() {
            return new ip(
              void 0 === this.value.clone ? this.value : this.value.clone()
            );
          }
        }
        class rp extends Rl {
          constructor(t, e, n = 1) {
            super(t, e), (this.meshPerAttribute = n);
          }
          copy(t) {
            return (
              super.copy(t), (this.meshPerAttribute = t.meshPerAttribute), this
            );
          }
          clone(t) {
            const e = super.clone(t);
            return (e.meshPerAttribute = this.meshPerAttribute), e;
          }
          toJSON(t) {
            const e = super.toJSON(t);
            return (
              (e.isInstancedInterleavedBuffer = !0),
              (e.meshPerAttribute = this.meshPerAttribute),
              e
            );
          }
        }
        rp.prototype.isInstancedInterleavedBuffer = !0;
        class op {
          constructor(t, e, n, i, r) {
            (this.buffer = t),
              (this.type = e),
              (this.itemSize = n),
              (this.elementSize = i),
              (this.count = r),
              (this.version = 0);
          }
          set needsUpdate(t) {
            !0 === t && this.version++;
          }
          setBuffer(t) {
            return (this.buffer = t), this;
          }
          setType(t, e) {
            return (this.type = t), (this.elementSize = e), this;
          }
          setItemSize(t) {
            return (this.itemSize = t), this;
          }
          setCount(t) {
            return (this.count = t), this;
          }
        }
        op.prototype.isGLBufferAttribute = !0;
        class sp {
          constructor(t, e, n = 0, i = 1 / 0) {
            (this.ray = new Ni(t, e)),
              (this.near = n),
              (this.far = i),
              (this.camera = null),
              (this.layers = new $i()),
              (this.params = {
                Mesh: {},
                Line: { threshold: 1 },
                LOD: {},
                Points: { threshold: 1 },
                Sprite: {},
              });
          }
          set(t, e) {
            this.ray.set(t, e);
          }
          setFromCamera(t, e) {
            e && e.isPerspectiveCamera
              ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld),
                this.ray.direction
                  .set(t.x, t.y, 0.5)
                  .unproject(e)
                  .sub(this.ray.origin)
                  .normalize(),
                (this.camera = e))
              : e && e.isOrthographicCamera
              ? (this.ray.origin
                  .set(t.x, t.y, (e.near + e.far) / (e.near - e.far))
                  .unproject(e),
                this.ray.direction
                  .set(0, 0, -1)
                  .transformDirection(e.matrixWorld),
                (this.camera = e))
              : console.error(
                  "THREE.Raycaster: Unsupported camera type: " + e.type
                );
          }
          intersectObject(t, e = !1, n = []) {
            return lp(t, this, n, e), n.sort(ap), n;
          }
          intersectObjects(t, e = !1, n = []) {
            for (let i = 0, r = t.length; i < r; i++) lp(t[i], this, n, e);
            return n.sort(ap), n;
          }
        }
        function ap(t, e) {
          return t.distance - e.distance;
        }
        function lp(t, e, n, i) {
          if ((t.layers.test(e.layers) && t.raycast(e, n), !0 === i)) {
            const i = t.children;
            for (let t = 0, r = i.length; t < r; t++) lp(i[t], e, n, !0);
          }
        }
        class cp {
          constructor(t = 1, e = 0, n = 0) {
            return (this.radius = t), (this.phi = e), (this.theta = n), this;
          }
          set(t, e, n) {
            return (this.radius = t), (this.phi = e), (this.theta = n), this;
          }
          copy(t) {
            return (
              (this.radius = t.radius),
              (this.phi = t.phi),
              (this.theta = t.theta),
              this
            );
          }
          makeSafe() {
            const t = 1e-6;
            return (
              (this.phi = Math.max(t, Math.min(Math.PI - t, this.phi))), this
            );
          }
          setFromVector3(t) {
            return this.setFromCartesianCoords(t.x, t.y, t.z);
          }
          setFromCartesianCoords(t, e, n) {
            return (
              (this.radius = Math.sqrt(t * t + e * e + n * n)),
              0 === this.radius
                ? ((this.theta = 0), (this.phi = 0))
                : ((this.theta = Math.atan2(t, n)),
                  (this.phi = Math.acos(Un(e / this.radius, -1, 1)))),
              this
            );
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        class up {
          constructor(t = 1, e = 0, n = 0) {
            return (this.radius = t), (this.theta = e), (this.y = n), this;
          }
          set(t, e, n) {
            return (this.radius = t), (this.theta = e), (this.y = n), this;
          }
          copy(t) {
            return (
              (this.radius = t.radius),
              (this.theta = t.theta),
              (this.y = t.y),
              this
            );
          }
          setFromVector3(t) {
            return this.setFromCartesianCoords(t.x, t.y, t.z);
          }
          setFromCartesianCoords(t, e, n) {
            return (
              (this.radius = Math.sqrt(t * t + n * n)),
              (this.theta = Math.atan2(t, n)),
              (this.y = e),
              this
            );
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        const hp = new $n();
        class dp {
          constructor(t = new $n(1 / 0, 1 / 0), e = new $n(-1 / 0, -1 / 0)) {
            (this.min = t), (this.max = e);
          }
          set(t, e) {
            return this.min.copy(t), this.max.copy(e), this;
          }
          setFromPoints(t) {
            this.makeEmpty();
            for (let e = 0, n = t.length; e < n; e++) this.expandByPoint(t[e]);
            return this;
          }
          setFromCenterAndSize(t, e) {
            const n = hp.copy(e).multiplyScalar(0.5);
            return this.min.copy(t).sub(n), this.max.copy(t).add(n), this;
          }
          clone() {
            return new this.constructor().copy(this);
          }
          copy(t) {
            return this.min.copy(t.min), this.max.copy(t.max), this;
          }
          makeEmpty() {
            return (
              (this.min.x = this.min.y = 1 / 0),
              (this.max.x = this.max.y = -1 / 0),
              this
            );
          }
          isEmpty() {
            return this.max.x < this.min.x || this.max.y < this.min.y;
          }
          getCenter(t) {
            return this.isEmpty()
              ? t.set(0, 0)
              : t.addVectors(this.min, this.max).multiplyScalar(0.5);
          }
          getSize(t) {
            return this.isEmpty()
              ? t.set(0, 0)
              : t.subVectors(this.max, this.min);
          }
          expandByPoint(t) {
            return this.min.min(t), this.max.max(t), this;
          }
          expandByVector(t) {
            return this.min.sub(t), this.max.add(t), this;
          }
          expandByScalar(t) {
            return this.min.addScalar(-t), this.max.addScalar(t), this;
          }
          containsPoint(t) {
            return !(
              t.x < this.min.x ||
              t.x > this.max.x ||
              t.y < this.min.y ||
              t.y > this.max.y
            );
          }
          containsBox(t) {
            return (
              this.min.x <= t.min.x &&
              t.max.x <= this.max.x &&
              this.min.y <= t.min.y &&
              t.max.y <= this.max.y
            );
          }
          getParameter(t, e) {
            return e.set(
              (t.x - this.min.x) / (this.max.x - this.min.x),
              (t.y - this.min.y) / (this.max.y - this.min.y)
            );
          }
          intersectsBox(t) {
            return !(
              t.max.x < this.min.x ||
              t.min.x > this.max.x ||
              t.max.y < this.min.y ||
              t.min.y > this.max.y
            );
          }
          clampPoint(t, e) {
            return e.copy(t).clamp(this.min, this.max);
          }
          distanceToPoint(t) {
            return hp.copy(t).clamp(this.min, this.max).sub(t).length();
          }
          intersect(t) {
            return this.min.max(t.min), this.max.min(t.max), this;
          }
          union(t) {
            return this.min.min(t.min), this.max.max(t.max), this;
          }
          translate(t) {
            return this.min.add(t), this.max.add(t), this;
          }
          equals(t) {
            return t.min.equals(this.min) && t.max.equals(this.max);
          }
        }
        dp.prototype.isBox2 = !0;
        const pp = new ai(),
          fp = new ai();
        class mp {
          constructor(t = new ai(), e = new ai()) {
            (this.start = t), (this.end = e);
          }
          set(t, e) {
            return this.start.copy(t), this.end.copy(e), this;
          }
          copy(t) {
            return this.start.copy(t.start), this.end.copy(t.end), this;
          }
          getCenter(t) {
            return t.addVectors(this.start, this.end).multiplyScalar(0.5);
          }
          delta(t) {
            return t.subVectors(this.end, this.start);
          }
          distanceSq() {
            return this.start.distanceToSquared(this.end);
          }
          distance() {
            return this.start.distanceTo(this.end);
          }
          at(t, e) {
            return this.delta(e).multiplyScalar(t).add(this.start);
          }
          closestPointToPointParameter(t, e) {
            pp.subVectors(t, this.start), fp.subVectors(this.end, this.start);
            const n = fp.dot(fp);
            let i = fp.dot(pp) / n;
            return e && (i = Un(i, 0, 1)), i;
          }
          closestPointToPoint(t, e, n) {
            const i = this.closestPointToPointParameter(t, e);
            return this.delta(n).multiplyScalar(i).add(this.start);
          }
          applyMatrix4(t) {
            return this.start.applyMatrix4(t), this.end.applyMatrix4(t), this;
          }
          equals(t) {
            return t.start.equals(this.start) && t.end.equals(this.end);
          }
          clone() {
            return new this.constructor().copy(this);
          }
        }
        class gp extends cr {
          constructor(t) {
            super(),
              (this.material = t),
              (this.render = function () {}),
              (this.hasPositions = !1),
              (this.hasNormals = !1),
              (this.hasColors = !1),
              (this.hasUvs = !1),
              (this.positionArray = null),
              (this.normalArray = null),
              (this.colorArray = null),
              (this.uvArray = null),
              (this.count = 0);
          }
        }
        gp.prototype.isImmediateRenderObject = !0;
        const vp = new ai();
        class yp extends cr {
          constructor(t, e) {
            super(),
              (this.light = t),
              this.light.updateMatrixWorld(),
              (this.matrix = t.matrixWorld),
              (this.matrixAutoUpdate = !1),
              (this.color = e);
            const n = new to(),
              i = [
                0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0,
                0, 1, 1, 0, 0, 0, 0, -1, 1,
              ];
            for (let t = 0, e = 1, n = 32; t < n; t++, e++) {
              const r = (t / n) * Math.PI * 2,
                o = (e / n) * Math.PI * 2;
              i.push(Math.cos(r), Math.sin(r), 1, Math.cos(o), Math.sin(o), 1);
            }
            n.setAttribute("position", new Ur(i, 3));
            const r = new fc({ fog: !1, toneMapped: !1 });
            (this.cone = new Mc(n, r)), this.add(this.cone), this.update();
          }
          dispose() {
            this.cone.geometry.dispose(), this.cone.material.dispose();
          }
          update() {
            this.light.updateMatrixWorld();
            const t = this.light.distance ? this.light.distance : 1e3,
              e = t * Math.tan(this.light.angle);
            this.cone.scale.set(e, e, t),
              vp.setFromMatrixPosition(this.light.target.matrixWorld),
              this.cone.lookAt(vp),
              void 0 !== this.color
                ? this.cone.material.color.set(this.color)
                : this.cone.material.color.copy(this.light.color);
          }
        }
        const xp = new ai(),
          _p = new Fi(),
          bp = new Fi();
        class wp extends Mc {
          constructor(t) {
            const e = Mp(t),
              n = new to(),
              i = [],
              r = [],
              o = new Lr(0, 0, 1),
              s = new Lr(0, 1, 0);
            for (let t = 0; t < e.length; t++) {
              const n = e[t];
              n.parent &&
                n.parent.isBone &&
                (i.push(0, 0, 0),
                i.push(0, 0, 0),
                r.push(o.r, o.g, o.b),
                r.push(s.r, s.g, s.b));
            }
            n.setAttribute("position", new Ur(i, 3)),
              n.setAttribute("color", new Ur(r, 3)),
              super(
                n,
                new fc({
                  vertexColors: !0,
                  depthTest: !1,
                  depthWrite: !1,
                  toneMapped: !1,
                  transparent: !0,
                })
              ),
              (this.type = "SkeletonHelper"),
              (this.isSkeletonHelper = !0),
              (this.root = t),
              (this.bones = e),
              (this.matrix = t.matrixWorld),
              (this.matrixAutoUpdate = !1);
          }
          updateMatrixWorld(t) {
            const e = this.bones,
              n = this.geometry,
              i = n.getAttribute("position");
            bp.copy(this.root.matrixWorld).invert();
            for (let t = 0, n = 0; t < e.length; t++) {
              const r = e[t];
              r.parent &&
                r.parent.isBone &&
                (_p.multiplyMatrices(bp, r.matrixWorld),
                xp.setFromMatrixPosition(_p),
                i.setXYZ(n, xp.x, xp.y, xp.z),
                _p.multiplyMatrices(bp, r.parent.matrixWorld),
                xp.setFromMatrixPosition(_p),
                i.setXYZ(n + 1, xp.x, xp.y, xp.z),
                (n += 2));
            }
            (n.getAttribute("position").needsUpdate = !0),
              super.updateMatrixWorld(t);
          }
        }
        function Mp(t) {
          const e = [];
          t && t.isBone && e.push(t);
          for (let n = 0; n < t.children.length; n++)
            e.push.apply(e, Mp(t.children[n]));
          return e;
        }
        class Sp extends xo {
          constructor(t, e, n) {
            super(
              new Xu(e, 4, 2),
              new Rr({ wireframe: !0, fog: !1, toneMapped: !1 })
            ),
              (this.light = t),
              this.light.updateMatrixWorld(),
              (this.color = n),
              (this.type = "PointLightHelper"),
              (this.matrix = this.light.matrixWorld),
              (this.matrixAutoUpdate = !1),
              this.update();
          }
          dispose() {
            this.geometry.dispose(), this.material.dispose();
          }
          update() {
            void 0 !== this.color
              ? this.material.color.set(this.color)
              : this.material.color.copy(this.light.color);
          }
        }
        const Ep = new ai(),
          Tp = new Lr(),
          Ap = new Lr();
        class Cp extends cr {
          constructor(t, e, n) {
            super(),
              (this.light = t),
              this.light.updateMatrixWorld(),
              (this.matrix = t.matrixWorld),
              (this.matrixAutoUpdate = !1),
              (this.color = n);
            const i = new Vu(e);
            i.rotateY(0.5 * Math.PI),
              (this.material = new Rr({
                wireframe: !0,
                fog: !1,
                toneMapped: !1,
              })),
              void 0 === this.color && (this.material.vertexColors = !0);
            const r = i.getAttribute("position"),
              o = new Float32Array(3 * r.count);
            i.setAttribute("color", new kr(o, 3)),
              this.add(new xo(i, this.material)),
              this.update();
          }
          dispose() {
            this.children[0].geometry.dispose(),
              this.children[0].material.dispose();
          }
          update() {
            const t = this.children[0];
            if (void 0 !== this.color) this.material.color.set(this.color);
            else {
              const e = t.geometry.getAttribute("color");
              Tp.copy(this.light.color), Ap.copy(this.light.groundColor);
              for (let t = 0, n = e.count; t < n; t++) {
                const i = t < n / 2 ? Tp : Ap;
                e.setXYZ(t, i.r, i.g, i.b);
              }
              e.needsUpdate = !0;
            }
            t.lookAt(Ep.setFromMatrixPosition(this.light.matrixWorld).negate());
          }
        }
        class Lp extends Mc {
          constructor(t = 10, e = 10, n = 4473924, i = 8947848) {
            (n = new Lr(n)), (i = new Lr(i));
            const r = e / 2,
              o = t / e,
              s = t / 2,
              a = [],
              l = [];
            for (let t = 0, c = 0, u = -s; t <= e; t++, u += o) {
              a.push(-s, 0, u, s, 0, u), a.push(u, 0, -s, u, 0, s);
              const e = t === r ? n : i;
              e.toArray(l, c),
                (c += 3),
                e.toArray(l, c),
                (c += 3),
                e.toArray(l, c),
                (c += 3),
                e.toArray(l, c),
                (c += 3);
            }
            const c = new to();
            c.setAttribute("position", new Ur(a, 3)),
              c.setAttribute("color", new Ur(l, 3)),
              super(c, new fc({ vertexColors: !0, toneMapped: !1 })),
              (this.type = "GridHelper");
          }
        }
        class Rp extends Mc {
          constructor(t = 10, e = 16, n = 8, i = 64, r = 4473924, o = 8947848) {
            (r = new Lr(r)), (o = new Lr(o));
            const s = [],
              a = [];
            for (let n = 0; n <= e; n++) {
              const i = (n / e) * (2 * Math.PI),
                l = Math.sin(i) * t,
                c = Math.cos(i) * t;
              s.push(0, 0, 0), s.push(l, 0, c);
              const u = 1 & n ? r : o;
              a.push(u.r, u.g, u.b), a.push(u.r, u.g, u.b);
            }
            for (let e = 0; e <= n; e++) {
              const l = 1 & e ? r : o,
                c = t - (t / n) * e;
              for (let t = 0; t < i; t++) {
                let e = (t / i) * (2 * Math.PI),
                  n = Math.sin(e) * c,
                  r = Math.cos(e) * c;
                s.push(n, 0, r),
                  a.push(l.r, l.g, l.b),
                  (e = ((t + 1) / i) * (2 * Math.PI)),
                  (n = Math.sin(e) * c),
                  (r = Math.cos(e) * c),
                  s.push(n, 0, r),
                  a.push(l.r, l.g, l.b);
              }
            }
            const l = new to();
            l.setAttribute("position", new Ur(s, 3)),
              l.setAttribute("color", new Ur(a, 3)),
              super(l, new fc({ vertexColors: !0, toneMapped: !1 })),
              (this.type = "PolarGridHelper");
          }
        }
        const Pp = new ai(),
          Op = new ai(),
          kp = new ai();
        class Ip extends cr {
          constructor(t, e, n) {
            super(),
              (this.light = t),
              this.light.updateMatrixWorld(),
              (this.matrix = t.matrixWorld),
              (this.matrixAutoUpdate = !1),
              (this.color = n),
              void 0 === e && (e = 1);
            let i = new to();
            i.setAttribute(
              "position",
              new Ur([-e, e, 0, e, e, 0, e, -e, 0, -e, -e, 0, -e, e, 0], 3)
            );
            const r = new fc({ fog: !1, toneMapped: !1 });
            (this.lightPlane = new _c(i, r)),
              this.add(this.lightPlane),
              (i = new to()),
              i.setAttribute("position", new Ur([0, 0, 0, 0, 0, 1], 3)),
              (this.targetLine = new _c(i, r)),
              this.add(this.targetLine),
              this.update();
          }
          dispose() {
            this.lightPlane.geometry.dispose(),
              this.lightPlane.material.dispose(),
              this.targetLine.geometry.dispose(),
              this.targetLine.material.dispose();
          }
          update() {
            Pp.setFromMatrixPosition(this.light.matrixWorld),
              Op.setFromMatrixPosition(this.light.target.matrixWorld),
              kp.subVectors(Op, Pp),
              this.lightPlane.lookAt(Op),
              void 0 !== this.color
                ? (this.lightPlane.material.color.set(this.color),
                  this.targetLine.material.color.set(this.color))
                : (this.lightPlane.material.color.copy(this.light.color),
                  this.targetLine.material.color.copy(this.light.color)),
              this.targetLine.lookAt(Op),
              (this.targetLine.scale.z = kp.length());
          }
        }
        const Dp = new ai(),
          Bp = new To();
        class Np extends Mc {
          constructor(t) {
            const e = new to(),
              n = new fc({ color: 16777215, vertexColors: !0, toneMapped: !1 }),
              i = [],
              r = [],
              o = {},
              s = new Lr(16755200),
              a = new Lr(16711680),
              l = new Lr(43775),
              c = new Lr(16777215),
              u = new Lr(3355443);
            function h(t, e, n) {
              d(t, n), d(e, n);
            }
            function d(t, e) {
              i.push(0, 0, 0),
                r.push(e.r, e.g, e.b),
                void 0 === o[t] && (o[t] = []),
                o[t].push(i.length / 3 - 1);
            }
            h("n1", "n2", s),
              h("n2", "n4", s),
              h("n4", "n3", s),
              h("n3", "n1", s),
              h("f1", "f2", s),
              h("f2", "f4", s),
              h("f4", "f3", s),
              h("f3", "f1", s),
              h("n1", "f1", s),
              h("n2", "f2", s),
              h("n3", "f3", s),
              h("n4", "f4", s),
              h("p", "n1", a),
              h("p", "n2", a),
              h("p", "n3", a),
              h("p", "n4", a),
              h("u1", "u2", l),
              h("u2", "u3", l),
              h("u3", "u1", l),
              h("c", "t", c),
              h("p", "c", u),
              h("cn1", "cn2", u),
              h("cn3", "cn4", u),
              h("cf1", "cf2", u),
              h("cf3", "cf4", u),
              e.setAttribute("position", new Ur(i, 3)),
              e.setAttribute("color", new Ur(r, 3)),
              super(e, n),
              (this.type = "CameraHelper"),
              (this.camera = t),
              this.camera.updateProjectionMatrix &&
                this.camera.updateProjectionMatrix(),
              (this.matrix = t.matrixWorld),
              (this.matrixAutoUpdate = !1),
              (this.pointMap = o),
              this.update();
          }
          update() {
            const t = this.geometry,
              e = this.pointMap;
            Bp.projectionMatrixInverse.copy(
              this.camera.projectionMatrixInverse
            ),
              Fp("c", e, t, Bp, 0, 0, -1),
              Fp("t", e, t, Bp, 0, 0, 1),
              Fp("n1", e, t, Bp, -1, -1, -1),
              Fp("n2", e, t, Bp, 1, -1, -1),
              Fp("n3", e, t, Bp, -1, 1, -1),
              Fp("n4", e, t, Bp, 1, 1, -1),
              Fp("f1", e, t, Bp, -1, -1, 1),
              Fp("f2", e, t, Bp, 1, -1, 1),
              Fp("f3", e, t, Bp, -1, 1, 1),
              Fp("f4", e, t, Bp, 1, 1, 1),
              Fp("u1", e, t, Bp, 0.7, 1.1, -1),
              Fp("u2", e, t, Bp, -0.7, 1.1, -1),
              Fp("u3", e, t, Bp, 0, 2, -1),
              Fp("cf1", e, t, Bp, -1, 0, 1),
              Fp("cf2", e, t, Bp, 1, 0, 1),
              Fp("cf3", e, t, Bp, 0, -1, 1),
              Fp("cf4", e, t, Bp, 0, 1, 1),
              Fp("cn1", e, t, Bp, -1, 0, -1),
              Fp("cn2", e, t, Bp, 1, 0, -1),
              Fp("cn3", e, t, Bp, 0, -1, -1),
              Fp("cn4", e, t, Bp, 0, 1, -1),
              (t.getAttribute("position").needsUpdate = !0);
          }
          dispose() {
            this.geometry.dispose(), this.material.dispose();
          }
        }
        function Fp(t, e, n, i, r, o, s) {
          Dp.set(r, o, s).unproject(i);
          const a = e[t];
          if (void 0 !== a) {
            const t = n.getAttribute("position");
            for (let e = 0, n = a.length; e < n; e++)
              t.setXYZ(a[e], Dp.x, Dp.y, Dp.z);
          }
        }
        const zp = new ui();
        class Hp extends Mc {
          constructor(t, e = 16776960) {
            const n = new Uint16Array([
                0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2,
                6, 3, 7,
              ]),
              i = new Float32Array(24),
              r = new to();
            r.setIndex(new kr(n, 1)),
              r.setAttribute("position", new kr(i, 3)),
              super(r, new fc({ color: e, toneMapped: !1 })),
              (this.object = t),
              (this.type = "BoxHelper"),
              (this.matrixAutoUpdate = !1),
              this.update();
          }
          update(t) {
            if (
              (void 0 !== t &&
                console.warn(
                  "THREE.BoxHelper: .update() has no longer arguments."
                ),
              void 0 !== this.object && zp.setFromObject(this.object),
              zp.isEmpty())
            )
              return;
            const e = zp.min,
              n = zp.max,
              i = this.geometry.attributes.position,
              r = i.array;
            (r[0] = n.x),
              (r[1] = n.y),
              (r[2] = n.z),
              (r[3] = e.x),
              (r[4] = n.y),
              (r[5] = n.z),
              (r[6] = e.x),
              (r[7] = e.y),
              (r[8] = n.z),
              (r[9] = n.x),
              (r[10] = e.y),
              (r[11] = n.z),
              (r[12] = n.x),
              (r[13] = n.y),
              (r[14] = e.z),
              (r[15] = e.x),
              (r[16] = n.y),
              (r[17] = e.z),
              (r[18] = e.x),
              (r[19] = e.y),
              (r[20] = e.z),
              (r[21] = n.x),
              (r[22] = e.y),
              (r[23] = e.z),
              (i.needsUpdate = !0),
              this.geometry.computeBoundingSphere();
          }
          setFromObject(t) {
            return (this.object = t), this.update(), this;
          }
          copy(t) {
            return (
              Mc.prototype.copy.call(this, t), (this.object = t.object), this
            );
          }
        }
        class jp extends Mc {
          constructor(t, e = 16776960) {
            const n = new Uint16Array([
                0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2,
                6, 3, 7,
              ]),
              i = new to();
            i.setIndex(new kr(n, 1)),
              i.setAttribute(
                "position",
                new Ur(
                  [
                    1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1,
                    -1, -1, -1, 1, -1, -1,
                  ],
                  3
                )
              ),
              super(i, new fc({ color: e, toneMapped: !1 })),
              (this.box = t),
              (this.type = "Box3Helper"),
              this.geometry.computeBoundingSphere();
          }
          updateMatrixWorld(t) {
            const e = this.box;
            e.isEmpty() ||
              (e.getCenter(this.position),
              e.getSize(this.scale),
              this.scale.multiplyScalar(0.5),
              super.updateMatrixWorld(t));
          }
        }
        class Up extends _c {
          constructor(t, e = 1, n = 16776960) {
            const i = n,
              r = new to();
            r.setAttribute(
              "position",
              new Ur(
                [
                  1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1,
                  1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0,
                ],
                3
              )
            ),
              r.computeBoundingSphere(),
              super(r, new fc({ color: i, toneMapped: !1 })),
              (this.type = "PlaneHelper"),
              (this.plane = t),
              (this.size = e);
            const o = new to();
            o.setAttribute(
              "position",
              new Ur(
                [1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1],
                3
              )
            ),
              o.computeBoundingSphere(),
              this.add(
                new xo(
                  o,
                  new Rr({
                    color: i,
                    opacity: 0.2,
                    transparent: !0,
                    depthWrite: !1,
                    toneMapped: !1,
                  })
                )
              );
          }
          updateMatrixWorld(t) {
            let e = -this.plane.constant;
            Math.abs(e) < 1e-8 && (e = 1e-8),
              this.scale.set(0.5 * this.size, 0.5 * this.size, e),
              (this.children[0].material.side = e < 0 ? m : f),
              this.lookAt(this.plane.normal),
              super.updateMatrixWorld(t);
          }
        }
        const Vp = new ai();
        let Gp, Wp;
        class qp extends cr {
          constructor(
            t = new ai(0, 0, 1),
            e = new ai(0, 0, 0),
            n = 1,
            i = 16776960,
            r = 0.2 * n,
            o = 0.2 * r
          ) {
            super(),
              (this.type = "ArrowHelper"),
              void 0 === Gp &&
                ((Gp = new to()),
                Gp.setAttribute("position", new Ur([0, 0, 0, 0, 1, 0], 3)),
                (Wp = new Nc(0, 0.5, 1, 5, 1)),
                Wp.translate(0, -0.5, 0)),
              this.position.copy(e),
              (this.line = new _c(Gp, new fc({ color: i, toneMapped: !1 }))),
              (this.line.matrixAutoUpdate = !1),
              this.add(this.line),
              (this.cone = new xo(Wp, new Rr({ color: i, toneMapped: !1 }))),
              (this.cone.matrixAutoUpdate = !1),
              this.add(this.cone),
              this.setDirection(t),
              this.setLength(n, r, o);
          }
          setDirection(t) {
            if (t.y > 0.99999) this.quaternion.set(0, 0, 0, 1);
            else if (t.y < -0.99999) this.quaternion.set(1, 0, 0, 0);
            else {
              Vp.set(t.z, 0, -t.x).normalize();
              const e = Math.acos(t.y);
              this.quaternion.setFromAxisAngle(Vp, e);
            }
          }
          setLength(t, e = 0.2 * t, n = 0.2 * e) {
            this.line.scale.set(1, Math.max(1e-4, t - e), 1),
              this.line.updateMatrix(),
              this.cone.scale.set(n, e, n),
              (this.cone.position.y = t),
              this.cone.updateMatrix();
          }
          setColor(t) {
            this.line.material.color.set(t), this.cone.material.color.set(t);
          }
          copy(t) {
            return (
              super.copy(t, !1),
              this.line.copy(t.line),
              this.cone.copy(t.cone),
              this
            );
          }
        }
        class Xp extends Mc {
          constructor(t = 1) {
            const e = [0, 0, 0, t, 0, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 0, t],
              n = new to();
            n.setAttribute("position", new Ur(e, 3)),
              n.setAttribute(
                "color",
                new Ur(
                  [1, 0, 0, 1, 0.6, 0, 0, 1, 0, 0.6, 1, 0, 0, 0, 1, 0, 0.6, 1],
                  3
                )
              ),
              super(n, new fc({ vertexColors: !0, toneMapped: !1 })),
              (this.type = "AxesHelper");
          }
          setColors(t, e, n) {
            const i = new Lr(),
              r = this.geometry.attributes.color.array;
            return (
              i.set(t),
              i.toArray(r, 0),
              i.toArray(r, 3),
              i.set(e),
              i.toArray(r, 6),
              i.toArray(r, 9),
              i.set(n),
              i.toArray(r, 12),
              i.toArray(r, 15),
              (this.geometry.attributes.color.needsUpdate = !0),
              this
            );
          }
          dispose() {
            this.geometry.dispose(), this.material.dispose();
          }
        }
        const Yp = new Float32Array(1),
          $p = new Int32Array(Yp.buffer);
        class Kp {
          static toHalfFloat(t) {
            Yp[0] = t;
            const e = $p[0];
            let n = (e >> 16) & 32768,
              i = (e >> 12) & 2047;
            const r = (e >> 23) & 255;
            return r < 103
              ? n
              : r > 142
              ? ((n |= 31744), (n |= (255 == r ? 0 : 1) && 8388607 & e), n)
              : r < 113
              ? ((i |= 2048),
                (n |= (i >> (114 - r)) + ((i >> (113 - r)) & 1)),
                n)
              : ((n |= ((r - 112) << 10) | (i >> 1)), (n += 1 & i), n);
          }
        }
        const Jp = 0,
          Zp = 1,
          Qp = 0,
          tf = 1,
          ef = 2;
        function nf(t) {
          return (
            console.warn(
              "THREE.MeshFaceMaterial has been removed. Use an Array instead."
            ),
            t
          );
        }
        function rf(t = []) {
          return (
            console.warn(
              "THREE.MultiMaterial has been removed. Use an Array instead."
            ),
            (t.isMultiMaterial = !0),
            (t.materials = t),
            (t.clone = function () {
              return t.slice();
            }),
            t
          );
        }
        function of(t, e) {
          return (
            console.warn("THREE.PointCloud has been renamed to THREE.Points."),
            new Rc(t, e)
          );
        }
        function sf(t) {
          return (
            console.warn("THREE.Particle has been renamed to THREE.Sprite."),
            new Xl(t)
          );
        }
        function af(t, e) {
          return (
            console.warn(
              "THREE.ParticleSystem has been renamed to THREE.Points."
            ),
            new Rc(t, e)
          );
        }
        function lf(t) {
          return (
            console.warn(
              "THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."
            ),
            new Ec(t)
          );
        }
        function cf(t) {
          return (
            console.warn(
              "THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."
            ),
            new Ec(t)
          );
        }
        function uf(t) {
          return (
            console.warn(
              "THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."
            ),
            new Ec(t)
          );
        }
        function hf(t, e, n) {
          return (
            console.warn(
              "THREE.Vertex has been removed. Use THREE.Vector3 instead."
            ),
            new ai(t, e, n)
          );
        }
        function df(t, e) {
          return (
            console.warn(
              "THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."
            ),
            new kr(t, e).setUsage(Tn)
          );
        }
        function pf(t, e) {
          return (
            console.warn(
              "THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."
            ),
            new Ir(t, e)
          );
        }
        function ff(t, e) {
          return (
            console.warn(
              "THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."
            ),
            new Dr(t, e)
          );
        }
        function mf(t, e) {
          return (
            console.warn(
              "THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."
            ),
            new Br(t, e)
          );
        }
        function gf(t, e) {
          return (
            console.warn(
              "THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."
            ),
            new Nr(t, e)
          );
        }
        function vf(t, e) {
          return (
            console.warn(
              "THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."
            ),
            new Fr(t, e)
          );
        }
        function yf(t, e) {
          return (
            console.warn(
              "THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."
            ),
            new zr(t, e)
          );
        }
        function xf(t, e) {
          return (
            console.warn(
              "THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."
            ),
            new Hr(t, e)
          );
        }
        function _f(t, e) {
          return (
            console.warn(
              "THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."
            ),
            new Ur(t, e)
          );
        }
        function bf(t, e) {
          return (
            console.warn(
              "THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."
            ),
            new Vr(t, e)
          );
        }
        function wf(t) {
          return (
            console.warn(
              "THREE.AxisHelper has been renamed to THREE.AxesHelper."
            ),
            new Xp(t)
          );
        }
        function Mf(t, e) {
          return (
            console.warn(
              "THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."
            ),
            new Hp(t, e)
          );
        }
        function Sf(t, e) {
          return (
            console.warn(
              "THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."
            ),
            new Mc(
              new Wc(t.geometry),
              new fc({ color: void 0 !== e ? e : 16777215 })
            )
          );
        }
        function Ef(t, e) {
          return (
            console.warn(
              "THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."
            ),
            new Mc(
              new Qu(t.geometry),
              new fc({ color: void 0 !== e ? e : 16777215 })
            )
          );
        }
        function Tf(t) {
          return (
            console.warn(
              "THREE.XHRLoader has been renamed to THREE.FileLoader."
            ),
            new Oh(t)
          );
        }
        function Af(t) {
          return (
            console.warn(
              "THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."
            ),
            new Nh(t)
          );
        }
        function Cf(t, e, n) {
          return (
            console.warn(
              "THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."
            ),
            new Po(t, n)
          );
        }
        function Lf() {
          console.error("THREE.CanvasRenderer has been removed");
        }
        function Rf() {
          console.error("THREE.JSONLoader has been removed.");
        }
        (qc.create = function (t, e) {
          return (
            console.log("THREE.Curve.create() has been deprecated"),
            (t.prototype = Object.create(qc.prototype)),
            (t.prototype.constructor = t),
            (t.prototype.getPoint = e),
            t
          );
        }),
          (Hh.prototype.fromPoints = function (t) {
            return (
              console.warn(
                "THREE.Path: .fromPoints() has been renamed to .setFromPoints()."
              ),
              this.setFromPoints(t)
            );
          }),
          (Lp.prototype.setColors = function () {
            console.error(
              "THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead."
            );
          }),
          (wp.prototype.update = function () {
            console.error(
              "THREE.SkeletonHelper: update() no longer needs to be called."
            );
          }),
          (Rh.prototype.extractUrlBase = function (t) {
            return (
              console.warn(
                "THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."
              ),
              ld.extractUrlBase(t)
            );
          }),
          (Rh.Handlers = {
            add: function () {
              console.error(
                "THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead."
              );
            },
            get: function () {
              console.error(
                "THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead."
              );
            },
          }),
          (dp.prototype.center = function (t) {
            return (
              console.warn(
                "THREE.Box2: .center() has been renamed to .getCenter()."
              ),
              this.getCenter(t)
            );
          }),
          (dp.prototype.empty = function () {
            return (
              console.warn(
                "THREE.Box2: .empty() has been renamed to .isEmpty()."
              ),
              this.isEmpty()
            );
          }),
          (dp.prototype.isIntersectionBox = function (t) {
            return (
              console.warn(
                "THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."
              ),
              this.intersectsBox(t)
            );
          }),
          (dp.prototype.size = function (t) {
            return (
              console.warn(
                "THREE.Box2: .size() has been renamed to .getSize()."
              ),
              this.getSize(t)
            );
          }),
          (ui.prototype.center = function (t) {
            return (
              console.warn(
                "THREE.Box3: .center() has been renamed to .getCenter()."
              ),
              this.getCenter(t)
            );
          }),
          (ui.prototype.empty = function () {
            return (
              console.warn(
                "THREE.Box3: .empty() has been renamed to .isEmpty()."
              ),
              this.isEmpty()
            );
          }),
          (ui.prototype.isIntersectionBox = function (t) {
            return (
              console.warn(
                "THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."
              ),
              this.intersectsBox(t)
            );
          }),
          (ui.prototype.isIntersectionSphere = function (t) {
            return (
              console.warn(
                "THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."
              ),
              this.intersectsSphere(t)
            );
          }),
          (ui.prototype.size = function (t) {
            return (
              console.warn(
                "THREE.Box3: .size() has been renamed to .getSize()."
              ),
              this.getSize(t)
            );
          }),
          (Li.prototype.empty = function () {
            return (
              console.warn(
                "THREE.Sphere: .empty() has been renamed to .isEmpty()."
              ),
              this.isEmpty()
            );
          }),
          (Fo.prototype.setFromMatrix = function (t) {
            return (
              console.warn(
                "THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."
              ),
              this.setFromProjectionMatrix(t)
            );
          }),
          (mp.prototype.center = function (t) {
            return (
              console.warn(
                "THREE.Line3: .center() has been renamed to .getCenter()."
              ),
              this.getCenter(t)
            );
          }),
          (Kn.prototype.flattenToArrayOffset = function (t, e) {
            return (
              console.warn(
                "THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."
              ),
              this.toArray(t, e)
            );
          }),
          (Kn.prototype.multiplyVector3 = function (t) {
            return (
              console.warn(
                "THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."
              ),
              t.applyMatrix3(this)
            );
          }),
          (Kn.prototype.multiplyVector3Array = function () {
            console.error(
              "THREE.Matrix3: .multiplyVector3Array() has been removed."
            );
          }),
          (Kn.prototype.applyToBufferAttribute = function (t) {
            return (
              console.warn(
                "THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."
              ),
              t.applyMatrix3(this)
            );
          }),
          (Kn.prototype.applyToVector3Array = function () {
            console.error(
              "THREE.Matrix3: .applyToVector3Array() has been removed."
            );
          }),
          (Kn.prototype.getInverse = function (t) {
            return (
              console.warn(
                "THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."
              ),
              this.copy(t).invert()
            );
          }),
          (Fi.prototype.extractPosition = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."
              ),
              this.copyPosition(t)
            );
          }),
          (Fi.prototype.flattenToArrayOffset = function (t, e) {
            return (
              console.warn(
                "THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."
              ),
              this.toArray(t, e)
            );
          }),
          (Fi.prototype.getPosition = function () {
            return (
              console.warn(
                "THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."
              ),
              new ai().setFromMatrixColumn(this, 3)
            );
          }),
          (Fi.prototype.setRotationFromQuaternion = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."
              ),
              this.makeRotationFromQuaternion(t)
            );
          }),
          (Fi.prototype.multiplyToArray = function () {
            console.warn("THREE.Matrix4: .multiplyToArray() has been removed.");
          }),
          (Fi.prototype.multiplyVector3 = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."
              ),
              t.applyMatrix4(this)
            );
          }),
          (Fi.prototype.multiplyVector4 = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."
              ),
              t.applyMatrix4(this)
            );
          }),
          (Fi.prototype.multiplyVector3Array = function () {
            console.error(
              "THREE.Matrix4: .multiplyVector3Array() has been removed."
            );
          }),
          (Fi.prototype.rotateAxis = function (t) {
            console.warn(
              "THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."
            ),
              t.transformDirection(this);
          }),
          (Fi.prototype.crossVector = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."
              ),
              t.applyMatrix4(this)
            );
          }),
          (Fi.prototype.translate = function () {
            console.error("THREE.Matrix4: .translate() has been removed.");
          }),
          (Fi.prototype.rotateX = function () {
            console.error("THREE.Matrix4: .rotateX() has been removed.");
          }),
          (Fi.prototype.rotateY = function () {
            console.error("THREE.Matrix4: .rotateY() has been removed.");
          }),
          (Fi.prototype.rotateZ = function () {
            console.error("THREE.Matrix4: .rotateZ() has been removed.");
          }),
          (Fi.prototype.rotateByAxis = function () {
            console.error("THREE.Matrix4: .rotateByAxis() has been removed.");
          }),
          (Fi.prototype.applyToBufferAttribute = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."
              ),
              t.applyMatrix4(this)
            );
          }),
          (Fi.prototype.applyToVector3Array = function () {
            console.error(
              "THREE.Matrix4: .applyToVector3Array() has been removed."
            );
          }),
          (Fi.prototype.makeFrustum = function (t, e, n, i, r, o) {
            return (
              console.warn(
                "THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."
              ),
              this.makePerspective(t, e, i, n, r, o)
            );
          }),
          (Fi.prototype.getInverse = function (t) {
            return (
              console.warn(
                "THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."
              ),
              this.copy(t).invert()
            );
          }),
          (Do.prototype.isIntersectionLine = function (t) {
            return (
              console.warn(
                "THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."
              ),
              this.intersectsLine(t)
            );
          }),
          (si.prototype.multiplyVector3 = function (t) {
            return (
              console.warn(
                "THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."
              ),
              t.applyQuaternion(this)
            );
          }),
          (si.prototype.inverse = function () {
            return (
              console.warn(
                "THREE.Quaternion: .inverse() has been renamed to invert()."
              ),
              this.invert()
            );
          }),
          (Ni.prototype.isIntersectionBox = function (t) {
            return (
              console.warn(
                "THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."
              ),
              this.intersectsBox(t)
            );
          }),
          (Ni.prototype.isIntersectionPlane = function (t) {
            return (
              console.warn(
                "THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."
              ),
              this.intersectsPlane(t)
            );
          }),
          (Ni.prototype.isIntersectionSphere = function (t) {
            return (
              console.warn(
                "THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."
              ),
              this.intersectsSphere(t)
            );
          }),
          (_r.prototype.area = function () {
            return (
              console.warn(
                "THREE.Triangle: .area() has been renamed to .getArea()."
              ),
              this.getArea()
            );
          }),
          (_r.prototype.barycoordFromPoint = function (t, e) {
            return (
              console.warn(
                "THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."
              ),
              this.getBarycoord(t, e)
            );
          }),
          (_r.prototype.midpoint = function (t) {
            return (
              console.warn(
                "THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."
              ),
              this.getMidpoint(t)
            );
          }),
          (_r.prototypenormal = function (t) {
            return (
              console.warn(
                "THREE.Triangle: .normal() has been renamed to .getNormal()."
              ),
              this.getNormal(t)
            );
          }),
          (_r.prototype.plane = function (t) {
            return (
              console.warn(
                "THREE.Triangle: .plane() has been renamed to .getPlane()."
              ),
              this.getPlane(t)
            );
          }),
          (_r.barycoordFromPoint = function (t, e, n, i, r) {
            return (
              console.warn(
                "THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."
              ),
              _r.getBarycoord(t, e, n, i, r)
            );
          }),
          (_r.normal = function (t, e, n, i) {
            return (
              console.warn(
                "THREE.Triangle: .normal() has been renamed to .getNormal()."
              ),
              _r.getNormal(t, e, n, i)
            );
          }),
          (jh.prototype.extractAllPoints = function (t) {
            return (
              console.warn(
                "THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."
              ),
              this.extractPoints(t)
            );
          }),
          (jh.prototype.extrude = function (t) {
            return (
              console.warn(
                "THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."
              ),
              new zu(this, t)
            );
          }),
          (jh.prototype.makeGeometry = function (t) {
            return (
              console.warn(
                "THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."
              ),
              new qu(this, t)
            );
          }),
          ($n.prototype.fromAttribute = function (t, e, n) {
            return (
              console.warn(
                "THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."
              ),
              this.fromBufferAttribute(t, e, n)
            );
          }),
          ($n.prototype.distanceToManhattan = function (t) {
            return (
              console.warn(
                "THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."
              ),
              this.manhattanDistanceTo(t)
            );
          }),
          ($n.prototype.lengthManhattan = function () {
            return (
              console.warn(
                "THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."
              ),
              this.manhattanLength()
            );
          }),
          (ai.prototype.setEulerFromRotationMatrix = function () {
            console.error(
              "THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead."
            );
          }),
          (ai.prototype.setEulerFromQuaternion = function () {
            console.error(
              "THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead."
            );
          }),
          (ai.prototype.getPositionFromMatrix = function (t) {
            return (
              console.warn(
                "THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."
              ),
              this.setFromMatrixPosition(t)
            );
          }),
          (ai.prototype.getScaleFromMatrix = function (t) {
            return (
              console.warn(
                "THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."
              ),
              this.setFromMatrixScale(t)
            );
          }),
          (ai.prototype.getColumnFromMatrix = function (t, e) {
            return (
              console.warn(
                "THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."
              ),
              this.setFromMatrixColumn(e, t)
            );
          }),
          (ai.prototype.applyProjection = function (t) {
            return (
              console.warn(
                "THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."
              ),
              this.applyMatrix4(t)
            );
          }),
          (ai.prototype.fromAttribute = function (t, e, n) {
            return (
              console.warn(
                "THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."
              ),
              this.fromBufferAttribute(t, e, n)
            );
          }),
          (ai.prototype.distanceToManhattan = function (t) {
            return (
              console.warn(
                "THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."
              ),
              this.manhattanDistanceTo(t)
            );
          }),
          (ai.prototype.lengthManhattan = function () {
            return (
              console.warn(
                "THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."
              ),
              this.manhattanLength()
            );
          }),
          (ni.prototype.fromAttribute = function (t, e, n) {
            return (
              console.warn(
                "THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."
              ),
              this.fromBufferAttribute(t, e, n)
            );
          }),
          (ni.prototype.lengthManhattan = function () {
            return (
              console.warn(
                "THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."
              ),
              this.manhattanLength()
            );
          }),
          (cr.prototype.getChildByName = function (t) {
            return (
              console.warn(
                "THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."
              ),
              this.getObjectByName(t)
            );
          }),
          (cr.prototype.renderDepth = function () {
            console.warn(
              "THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead."
            );
          }),
          (cr.prototype.translate = function (t, e) {
            return (
              console.warn(
                "THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."
              ),
              this.translateOnAxis(e, t)
            );
          }),
          (cr.prototype.getWorldRotation = function () {
            console.error(
              "THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead."
            );
          }),
          (cr.prototype.applyMatrix = function (t) {
            return (
              console.warn(
                "THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."
              ),
              this.applyMatrix4(t)
            );
          }),
          Object.defineProperties(cr.prototype, {
            eulerOrder: {
              get: function () {
                return (
                  console.warn(
                    "THREE.Object3D: .eulerOrder is now .rotation.order."
                  ),
                  this.rotation.order
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.Object3D: .eulerOrder is now .rotation.order."
                ),
                  (this.rotation.order = t);
              },
            },
            useQuaternion: {
              get: function () {
                console.warn(
                  "THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."
                );
              },
              set: function () {
                console.warn(
                  "THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."
                );
              },
            },
          }),
          (xo.prototype.setDrawMode = function () {
            console.error(
              "THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary."
            );
          }),
          Object.defineProperties(xo.prototype, {
            drawMode: {
              get: function () {
                return (
                  console.error(
                    "THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."
                  ),
                  Xe
                );
              },
              set: function () {
                console.error(
                  "THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary."
                );
              },
            },
          }),
          (ic.prototype.initBones = function () {
            console.error("THREE.SkinnedMesh: initBones() has been removed.");
          }),
          (Ao.prototype.setLens = function (t, e) {
            console.warn(
              "THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."
            ),
              void 0 !== e && (this.filmGauge = e),
              this.setFocalLength(t);
          }),
          Object.defineProperties(Uh.prototype, {
            onlyShadow: {
              set: function () {
                console.warn("THREE.Light: .onlyShadow has been removed.");
              },
            },
            shadowCameraFov: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraFov is now .shadow.camera.fov."
                ),
                  (this.shadow.camera.fov = t);
              },
            },
            shadowCameraLeft: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraLeft is now .shadow.camera.left."
                ),
                  (this.shadow.camera.left = t);
              },
            },
            shadowCameraRight: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraRight is now .shadow.camera.right."
                ),
                  (this.shadow.camera.right = t);
              },
            },
            shadowCameraTop: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraTop is now .shadow.camera.top."
                ),
                  (this.shadow.camera.top = t);
              },
            },
            shadowCameraBottom: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."
                ),
                  (this.shadow.camera.bottom = t);
              },
            },
            shadowCameraNear: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraNear is now .shadow.camera.near."
                ),
                  (this.shadow.camera.near = t);
              },
            },
            shadowCameraFar: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowCameraFar is now .shadow.camera.far."
                ),
                  (this.shadow.camera.far = t);
              },
            },
            shadowCameraVisible: {
              set: function () {
                console.warn(
                  "THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead."
                );
              },
            },
            shadowBias: {
              set: function (t) {
                console.warn("THREE.Light: .shadowBias is now .shadow.bias."),
                  (this.shadow.bias = t);
              },
            },
            shadowDarkness: {
              set: function () {
                console.warn("THREE.Light: .shadowDarkness has been removed.");
              },
            },
            shadowMapWidth: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."
                ),
                  (this.shadow.mapSize.width = t);
              },
            },
            shadowMapHeight: {
              set: function (t) {
                console.warn(
                  "THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."
                ),
                  (this.shadow.mapSize.height = t);
              },
            },
          }),
          Object.defineProperties(kr.prototype, {
            length: {
              get: function () {
                return (
                  console.warn(
                    "THREE.BufferAttribute: .length has been deprecated. Use .count instead."
                  ),
                  this.array.length
                );
              },
            },
            dynamic: {
              get: function () {
                return (
                  console.warn(
                    "THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."
                  ),
                  this.usage === Tn
                );
              },
              set: function () {
                console.warn(
                  "THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."
                ),
                  this.setUsage(Tn);
              },
            },
          }),
          (kr.prototype.setDynamic = function (t) {
            return (
              console.warn(
                "THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."
              ),
              this.setUsage(!0 === t ? Tn : En),
              this
            );
          }),
          (kr.prototype.copyIndicesArray = function () {
            console.error(
              "THREE.BufferAttribute: .copyIndicesArray() has been removed."
            );
          }),
          (kr.prototype.setArray = function () {
            console.error(
              "THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers"
            );
          }),
          (to.prototype.addIndex = function (t) {
            console.warn(
              "THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."
            ),
              this.setIndex(t);
          }),
          (to.prototype.addAttribute = function (t, e) {
            return (
              console.warn(
                "THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."
              ),
              (e && e.isBufferAttribute) ||
              (e && e.isInterleavedBufferAttribute)
                ? "index" === t
                  ? (console.warn(
                      "THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."
                    ),
                    this.setIndex(e),
                    this)
                  : this.setAttribute(t, e)
                : (console.warn(
                    "THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."
                  ),
                  this.setAttribute(t, new kr(arguments[1], arguments[2])))
            );
          }),
          (to.prototype.addDrawCall = function (t, e, n) {
            void 0 !== n &&
              console.warn(
                "THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."
              ),
              console.warn(
                "THREE.BufferGeometry: .addDrawCall() is now .addGroup()."
              ),
              this.addGroup(t, e);
          }),
          (to.prototype.clearDrawCalls = function () {
            console.warn(
              "THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."
            ),
              this.clearGroups();
          }),
          (to.prototype.computeOffsets = function () {
            console.warn(
              "THREE.BufferGeometry: .computeOffsets() has been removed."
            );
          }),
          (to.prototype.removeAttribute = function (t) {
            return (
              console.warn(
                "THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."
              ),
              this.deleteAttribute(t)
            );
          }),
          (to.prototype.applyMatrix = function (t) {
            return (
              console.warn(
                "THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."
              ),
              this.applyMatrix4(t)
            );
          }),
          Object.defineProperties(to.prototype, {
            drawcalls: {
              get: function () {
                return (
                  console.error(
                    "THREE.BufferGeometry: .drawcalls has been renamed to .groups."
                  ),
                  this.groups
                );
              },
            },
            offsets: {
              get: function () {
                return (
                  console.warn(
                    "THREE.BufferGeometry: .offsets has been renamed to .groups."
                  ),
                  this.groups
                );
              },
            },
          }),
          (Rl.prototype.setDynamic = function (t) {
            return (
              console.warn(
                "THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."
              ),
              this.setUsage(!0 === t ? Tn : En),
              this
            );
          }),
          (Rl.prototype.setArray = function () {
            console.error(
              "THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers"
            );
          }),
          (zu.prototype.getArrays = function () {
            console.error(
              "THREE.ExtrudeGeometry: .getArrays() has been removed."
            );
          }),
          (zu.prototype.addShapeList = function () {
            console.error(
              "THREE.ExtrudeGeometry: .addShapeList() has been removed."
            );
          }),
          (zu.prototype.addShape = function () {
            console.error(
              "THREE.ExtrudeGeometry: .addShape() has been removed."
            );
          }),
          (Ll.prototype.dispose = function () {
            console.error("THREE.Scene: .dispose() has been removed.");
          }),
          (ip.prototype.onUpdate = function () {
            return (
              console.warn(
                "THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."
              ),
              this
            );
          }),
          Object.defineProperties(wr.prototype, {
            wrapAround: {
              get: function () {
                console.warn("THREE.Material: .wrapAround has been removed.");
              },
              set: function () {
                console.warn("THREE.Material: .wrapAround has been removed.");
              },
            },
            overdraw: {
              get: function () {
                console.warn("THREE.Material: .overdraw has been removed.");
              },
              set: function () {
                console.warn("THREE.Material: .overdraw has been removed.");
              },
            },
            wrapRGB: {
              get: function () {
                return (
                  console.warn("THREE.Material: .wrapRGB has been removed."),
                  new Lr()
                );
              },
            },
            shading: {
              get: function () {
                console.error(
                  "THREE." +
                    this.type +
                    ": .shading has been removed. Use the boolean .flatShading instead."
                );
              },
              set: function (t) {
                console.warn(
                  "THREE." +
                    this.type +
                    ": .shading has been removed. Use the boolean .flatShading instead."
                ),
                  (this.flatShading = t === v);
              },
            },
            stencilMask: {
              get: function () {
                return (
                  console.warn(
                    "THREE." +
                      this.type +
                      ": .stencilMask has been removed. Use .stencilFuncMask instead."
                  ),
                  this.stencilFuncMask
                );
              },
              set: function (t) {
                console.warn(
                  "THREE." +
                    this.type +
                    ": .stencilMask has been removed. Use .stencilFuncMask instead."
                ),
                  (this.stencilFuncMask = t);
              },
            },
            vertexTangents: {
              get: function () {
                console.warn(
                  "THREE." + this.type + ": .vertexTangents has been removed."
                );
              },
              set: function () {
                console.warn(
                  "THREE." + this.type + ": .vertexTangents has been removed."
                );
              },
            },
          }),
          Object.defineProperties(Eo.prototype, {
            derivatives: {
              get: function () {
                return (
                  console.warn(
                    "THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."
                  ),
                  this.extensions.derivatives
                );
              },
              set: function (t) {
                console.warn(
                  "THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."
                ),
                  (this.extensions.derivatives = t);
              },
            },
          }),
          (El.prototype.clearTarget = function (t, e, n, i) {
            console.warn(
              "THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."
            ),
              this.setRenderTarget(t),
              this.clear(e, n, i);
          }),
          (El.prototype.animate = function (t) {
            console.warn(
              "THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."
            ),
              this.setAnimationLoop(t);
          }),
          (El.prototype.getCurrentRenderTarget = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."
              ),
              this.getRenderTarget()
            );
          }),
          (El.prototype.getMaxAnisotropy = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."
              ),
              this.capabilities.getMaxAnisotropy()
            );
          }),
          (El.prototype.getPrecision = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."
              ),
              this.capabilities.precision
            );
          }),
          (El.prototype.resetGLState = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .resetGLState() is now .state.reset()."
              ),
              this.state.reset()
            );
          }),
          (El.prototype.supportsFloatTextures = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."
              ),
              this.extensions.get("OES_texture_float")
            );
          }),
          (El.prototype.supportsHalfFloatTextures = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."
              ),
              this.extensions.get("OES_texture_half_float")
            );
          }),
          (El.prototype.supportsStandardDerivatives = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."
              ),
              this.extensions.get("OES_standard_derivatives")
            );
          }),
          (El.prototype.supportsCompressedTextureS3TC = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."
              ),
              this.extensions.get("WEBGL_compressed_texture_s3tc")
            );
          }),
          (El.prototype.supportsCompressedTexturePVRTC = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."
              ),
              this.extensions.get("WEBGL_compressed_texture_pvrtc")
            );
          }),
          (El.prototype.supportsBlendMinMax = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."
              ),
              this.extensions.get("EXT_blend_minmax")
            );
          }),
          (El.prototype.supportsVertexTextures = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."
              ),
              this.capabilities.vertexTextures
            );
          }),
          (El.prototype.supportsInstancedArrays = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."
              ),
              this.extensions.get("ANGLE_instanced_arrays")
            );
          }),
          (El.prototype.enableScissorTest = function (t) {
            console.warn(
              "THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."
            ),
              this.setScissorTest(t);
          }),
          (El.prototype.initMaterial = function () {
            console.warn(
              "THREE.WebGLRenderer: .initMaterial() has been removed."
            );
          }),
          (El.prototype.addPrePlugin = function () {
            console.warn(
              "THREE.WebGLRenderer: .addPrePlugin() has been removed."
            );
          }),
          (El.prototype.addPostPlugin = function () {
            console.warn(
              "THREE.WebGLRenderer: .addPostPlugin() has been removed."
            );
          }),
          (El.prototype.updateShadowMap = function () {
            console.warn(
              "THREE.WebGLRenderer: .updateShadowMap() has been removed."
            );
          }),
          (El.prototype.setFaceCulling = function () {
            console.warn(
              "THREE.WebGLRenderer: .setFaceCulling() has been removed."
            );
          }),
          (El.prototype.allocTextureUnit = function () {
            console.warn(
              "THREE.WebGLRenderer: .allocTextureUnit() has been removed."
            );
          }),
          (El.prototype.setTexture = function () {
            console.warn(
              "THREE.WebGLRenderer: .setTexture() has been removed."
            );
          }),
          (El.prototype.setTexture2D = function () {
            console.warn(
              "THREE.WebGLRenderer: .setTexture2D() has been removed."
            );
          }),
          (El.prototype.setTextureCube = function () {
            console.warn(
              "THREE.WebGLRenderer: .setTextureCube() has been removed."
            );
          }),
          (El.prototype.getActiveMipMapLevel = function () {
            return (
              console.warn(
                "THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."
              ),
              this.getActiveMipmapLevel()
            );
          }),
          Object.defineProperties(El.prototype, {
            shadowMapEnabled: {
              get: function () {
                return this.shadowMap.enabled;
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."
                ),
                  (this.shadowMap.enabled = t);
              },
            },
            shadowMapType: {
              get: function () {
                return this.shadowMap.type;
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."
                ),
                  (this.shadowMap.type = t);
              },
            },
            shadowMapCullFace: {
              get: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead."
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead."
                );
              },
            },
            context: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."
                  ),
                  this.getContext()
                );
              },
            },
            vr: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .vr has been renamed to .xr"
                  ),
                  this.xr
                );
              },
            },
            gammaInput: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."
                  ),
                  !1
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."
                );
              },
            },
            gammaOutput: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."
                  ),
                  !1
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."
                ),
                  (this.outputEncoding = !0 === t ? Je : Ke);
              },
            },
            toneMappingWhitePoint: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."
                  ),
                  1
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."
                );
              },
            },
          }),
          Object.defineProperties(ml.prototype, {
            cullFace: {
              get: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead."
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead."
                );
              },
            },
            renderReverseSided: {
              get: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead."
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead."
                );
              },
            },
            renderSingleSided: {
              get: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead."
                );
              },
              set: function () {
                console.warn(
                  "THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead."
                );
              },
            },
          }),
          Object.defineProperties(ii.prototype, {
            wrapS: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."
                  ),
                  this.texture.wrapS
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."
                ),
                  (this.texture.wrapS = t);
              },
            },
            wrapT: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."
                  ),
                  this.texture.wrapT
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."
                ),
                  (this.texture.wrapT = t);
              },
            },
            magFilter: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."
                  ),
                  this.texture.magFilter
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."
                ),
                  (this.texture.magFilter = t);
              },
            },
            minFilter: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."
                  ),
                  this.texture.minFilter
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."
                ),
                  (this.texture.minFilter = t);
              },
            },
            anisotropy: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."
                  ),
                  this.texture.anisotropy
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."
                ),
                  (this.texture.anisotropy = t);
              },
            },
            offset: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .offset is now .texture.offset."
                  ),
                  this.texture.offset
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .offset is now .texture.offset."
                ),
                  (this.texture.offset = t);
              },
            },
            repeat: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .repeat is now .texture.repeat."
                  ),
                  this.texture.repeat
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .repeat is now .texture.repeat."
                ),
                  (this.texture.repeat = t);
              },
            },
            format: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .format is now .texture.format."
                  ),
                  this.texture.format
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .format is now .texture.format."
                ),
                  (this.texture.format = t);
              },
            },
            type: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .type is now .texture.type."
                  ),
                  this.texture.type
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .type is now .texture.type."
                ),
                  (this.texture.type = t);
              },
            },
            generateMipmaps: {
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."
                  ),
                  this.texture.generateMipmaps
                );
              },
              set: function (t) {
                console.warn(
                  "THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."
                ),
                  (this.texture.generateMipmaps = t);
              },
            },
          }),
          (Bd.prototype.load = function (t) {
            console.warn(
              "THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead."
            );
            const e = this;
            return (
              new Md().load(t, function (t) {
                e.setBuffer(t);
              }),
              this
            );
          }),
          (Ud.prototype.getData = function () {
            return (
              console.warn(
                "THREE.AudioAnalyser: .getData() is now .getFrequencyData()."
              ),
              this.getFrequencyData()
            );
          }),
          (Lo.prototype.updateCubeMap = function (t, e) {
            return (
              console.warn(
                "THREE.CubeCamera: .updateCubeMap() is now .update()."
              ),
              this.update(t, e)
            );
          }),
          (Lo.prototype.clear = function (t, e, n, i) {
            return (
              console.warn(
                "THREE.CubeCamera: .clear() is now .renderTarget.clear()."
              ),
              this.renderTarget.clear(t, e, n, i)
            );
          }),
          (Zn.crossOrigin = void 0),
          (Zn.loadTexture = function (t, e, n, i) {
            console.warn(
              "THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead."
            );
            const r = new Fh();
            r.setCrossOrigin(this.crossOrigin);
            const o = r.load(t, n, void 0, i);
            return e && (o.mapping = e), o;
          }),
          (Zn.loadTextureCube = function (t, e, n, i) {
            console.warn(
              "THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead."
            );
            const r = new Bh();
            r.setCrossOrigin(this.crossOrigin);
            const o = r.load(t, n, void 0, i);
            return e && (o.mapping = e), o;
          }),
          (Zn.loadCompressedTexture = function () {
            console.error(
              "THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead."
            );
          }),
          (Zn.loadCompressedTextureCube = function () {
            console.error(
              "THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead."
            );
          });
        const Pf = {
          createMultiMaterialObject: function () {
            console.error(
              "THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js"
            );
          },
          detach: function () {
            console.error(
              "THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js"
            );
          },
          attach: function () {
            console.error(
              "THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js"
            );
          },
        };
        function Of() {
          console.error(
            "THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js"
          );
        }
        "undefined" != typeof __THREE_DEVTOOLS__ &&
          __THREE_DEVTOOLS__.dispatchEvent(
            new CustomEvent("register", { detail: { revision: i } })
          ),
          "undefined" != typeof window &&
            (window.__THREE__
              ? console.warn(
                  "WARNING: Multiple instances of Three.js being imported."
                )
              : (window.__THREE__ = i));
      },
    },
    __webpack_module_cache__ = {};
  function __webpack_require__(t) {
    var e = __webpack_module_cache__[t];
    if (void 0 !== e) return e.exports;
    var n = (__webpack_module_cache__[t] = { id: t, loaded: !1, exports: {} });
    return (
      __webpack_modules__[t].call(n.exports, n, n.exports, __webpack_require__),
      (n.loaded = !0),
      n.exports
    );
  }
  (__webpack_require__.n = (t) => {
    var e = t && t.__esModule ? () => t.default : () => t;
    return __webpack_require__.d(e, { a: e }), e;
  }),
    (__webpack_require__.d = (t, e) => {
      for (var n in e)
        __webpack_require__.o(e, n) &&
          !__webpack_require__.o(t, n) &&
          Object.defineProperty(t, n, { enumerable: !0, get: e[n] });
    }),
    (__webpack_require__.o = (t, e) =>
      Object.prototype.hasOwnProperty.call(t, e)),
    (__webpack_require__.r = (t) => {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(t, "__esModule", { value: !0 });
    }),
    (__webpack_require__.nmd = (t) => (
      (t.paths = []), t.children || (t.children = []), t
    ));
  var __webpack_exports__ = {};
  (() => {
    "use strict";
    var _ga_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(31),
      _ga_js__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(
        _ga_js__WEBPACK_IMPORTED_MODULE_0__
      ),
      _GLTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(731),
      _Water_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(128),
      _three_module_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(365),
      _OrbitControls_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(533),
      _dat_gui_module_js__WEBPACK_IMPORTED_MODULE_5__ =
        __webpack_require__(496),
      _PointerLockControls_js__WEBPACK_IMPORTED_MODULE_6__ =
        __webpack_require__(202),
      _stats_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(221),
      _lib_gun_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(684),
      _lib_gun_js__WEBPACK_IMPORTED_MODULE_8___default = __webpack_require__.n(
        _lib_gun_js__WEBPACK_IMPORTED_MODULE_8__
      ),
      _cannon_min_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(873),
      _cannon_min_js__WEBPACK_IMPORTED_MODULE_9___default =
        __webpack_require__.n(_cannon_min_js__WEBPACK_IMPORTED_MODULE_9__),
      _jquery_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(191),
      _jquery_js__WEBPACK_IMPORTED_MODULE_10___default = __webpack_require__.n(
        _jquery_js__WEBPACK_IMPORTED_MODULE_10__
      ),
      _socket_io_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(501),
      _socket_io_js__WEBPACK_IMPORTED_MODULE_11___default =
        __webpack_require__.n(_socket_io_js__WEBPACK_IMPORTED_MODULE_11__);
    const version = " v4.0 M2",
      Wrapper = document.getElementById("Wrapper");
    function uuidv4() {
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
        /[xy]/g,
        function (t) {
          var e = (16 * Math.random()) | 0;
          return ("x" == t ? e : (3 & e) | 8).toString(16);
        }
      );
    }
    let water;
    $(document).ready(function () {
      $(document).on("submit", "form", function () {
        return !1;
      });
    });
    let PlayerHealth = 20;
    const manager =
        new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.LoadingManager(),
      id1 = document.getElementById("id1"),
      uuid = uuidv4(),
      firebaseConfig = {
        apiKey: "AIzaSyCk1yrVh0zTC8BBu-mirrHaqhaMGcg-6Xo",
        authDomain: "duccboxjs-281f7.firebaseapp.com",
        databaseURL: "https://duccboxjs-default-rtdb.firebaseio.com",
        projectId: "duccboxjs",
        storageBucket: "duccboxjs.appspot.com",
        messagingSenderId: "1070773113218",
        appId: "1:1070773113218:web:578d79b68a8e7d1727ff9b",
        measurementId: "G-7WDEN5SZJ6",
      };
    firebase.initializeApp(firebaseConfig), firebase.analytics();
    const auth = firebase.auth();
    var _gaq = _gaq || [];
    function init() {
      let user;
      $(document).ready(function () {
        $(document).on("submit", "form", function () {
          return !1;
        });
      }),
        document
          .getElementById("login-form-box")
          .addEventListener("submit", function (t) {
            t.preventDefault(),
              auth
                .signInWithEmailAndPassword(
                  document.getElementById("email").value,
                  document.getElementById("pass").value
                )
                .then(() => {
                  auth.onAuthStateChanged((t) => {
                    t &&
                      ((user = t),
                      (document.getElementById(
                        "login-status"
                      ).innerHTML = `<h3>Hello ${t.displayName}!</h3> <p>User ID: ${t.uid}</p></br><p>User uuid: ${t.uuID}</p></br> <kbd onclick="document.getElementById('login-box').style.display = 'none'">Exit login form</kbd>`),
                      (myName = user.displayName),
                      (document.getElementById(
                        "username"
                      ).innerHTML = `username: ${myName}`));
                  });
                })
                .catch((t) => {
                  (document.getElementById("login-status").innerHTML =
                    "Error:" + t.message),
                    setTimeout(() => {
                      (document.getElementById("login-status").innerHTML = ""),
                        (document.getElementById("new-login-status").innerHTML =
                          "");
                    }, 4e3);
                });
          }),
        (document.getElementById("Acc").onclick = () => {
          auth
            .createUserWithEmailAndPassword(
              document.getElementById("new-email").value,
              document.getElementById("new-pass").value
            )
            .then(() => {
              auth.onAuthStateChanged((t) => {
                t &&
                  (t.updateProfile({
                    displayName: `${myName}`,
                    uuID: `${uuid}`,
                  }),
                  (document.getElementById(
                    "new-login-status"
                  ).innerHTML = `<h3>Hello ${t.displayName}!</h3> <p>User ID: ${t.uid}</p></br><p>User uuid: ${t.uuID}</p></br> <kbd onclick="document.getElementById('login-box').style.display = 'none'">Exit login form</kbd>`),
                  (myName = t.displayName),
                  (document.getElementById(
                    "username"
                  ).innerHTML = `username: ${myName}`));
              });
            })
            .catch((t) => {
              (document.getElementById("new-login-status").innerHTML =
                "Error:" + t.message),
                setTimeout(() => {
                  (document.getElementById("login-status").innerHTML = ""),
                    (document.getElementById("new-login-status").innerHTML =
                      "");
                }, 4e3);
            });
        });
      const gui = new _dat_gui_module_js__WEBPACK_IMPORTED_MODULE_5__.XS();
      let myName = `Guest${Math.floor(5e3 * Math.random())}`;
      console.log("My Name is " + myName);
      const fonts = ["font-family: px-sans;", "font-family: ms-comic;"],
        randomFont = fonts[Math.floor(Math.random() * fonts.length)];
      "font-family: ms-comic;" == randomFont &&
        (document.getElementById(
          "rev"
        ).innerHTML = `________||DuccBOX.js REV ${version} `),
        "font-family: px-sans;" == randomFont &&
          (document.getElementById(
            "rev"
          ).innerHTML = `______||DuccBOX.js REV ${version} `),
        (document.getElementById("rev").style.cssText = randomFont);
      const FontLoad =
        new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.FontLoader();
      let font;
      if (
        (FontLoad.load(
          "https://DuccBOXsocket.rileythedoggo.repl.co/helvetiker_bold.typeface.json",
          function (t) {
            font = t;
          }
        ),
        !_three_module_js__WEBPACK_IMPORTED_MODULE_3__)
      )
        throw new Error(
          "DuccBOX.error THIS IS A FATAL THREE.JS ERROR PLEASE REPORT THIS TO @I like food#8767"
        );
      if (!_dat_gui_module_js__WEBPACK_IMPORTED_MODULE_5__.XS)
        throw new Error(
          "DuccBOX.error THIS IS A FATAL ERROR PLEASE REPORT THIS TO @I like food#8767"
        );
      console.info(firebase);
      let dev = !1,
        socket;
      if (1 == dev) socket = io();
      else {
        const t = "https://duccboxsocket.rileythedoggo.repl.co";
        socket = io(t);
      }
      socket.emit("client-user-joined", myName);
      const Object3D =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Object3D(),
        mixer =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.AnimationMixer();
      var stats = new _stats_js__WEBPACK_IMPORTED_MODULE_7__.j();
      function ani() {
        stats.begin(), stats.end(), requestAnimationFrame(ani);
      }
      stats.showPanel(0),
        document.body.appendChild(stats.dom),
        requestAnimationFrame(ani);
      const xhttp = new XMLHttpRequest();
      let camera, controls, scene, renderer, loader, skyTexture;
      function helper() {
        scene.add(
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.GridHelper(900, 500)
        ),
          scene.add(
            new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.AxisHelper(2e3)
          );
      }
      console.log(
        "%cDuccBOX is an Open world sandbox made with WebGL/Three.js ",
        "color:blue;font-family:system-ui;font-size:4rem;-webkit-text-stroke: 1px black;font-weight:bold"
      ),
        console.log(
          "%cNote: This is a Milestone 1 alpha build ",
          "color:red;font-family:system-ui;font-size:4rem;-webkit-text-stroke: 1px black;font-weight:bold"
        ),
        console.log(
          "You can find the Source code at [https://github.com/Riley-the-doggo/DuccBOX.js] "
        ),
        console.info(version),
        (scene = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Scene()),
        (camera =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1e3
          )),
        (loader = new _GLTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.E(manager)),
        (renderer =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.WebGLRenderer()),
        renderer.setSize(window.innerWidth, window.innerHeight),
        document.body.appendChild(renderer.domElement);
      const BGloader =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.CubeTextureLoader(),
        bg = loader.load(
          "https://tomo0613.github.io/offroadJS/client/model/skybox.jpg"
        ),
        geometry2 =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.BoxGeometry(
            1,
            1,
            1
          ),
        material2 =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshBasicMaterial({
            color: 65280,
          }),
        cube1 = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(
          geometry2,
          material2
        ),
        astPos = 400 * Math.random();
      let _WORLD_ = {},
        _AIRPLANE_ = {};
      var error;
      loader.load("GLtf/_AIRPLANE_.glb", function (t) {
        scene.add(t.scene),
          t.animations,
          t.scene,
          t.scenes,
          t.cameras,
          t.asset,
          (t.scene.position.y = 30),
          (_AIRPLANE_ = t.scene),
          (function e() {
            requestAnimationFrame(e),
              (t.scene.position.z += 2),
              (t.scene.position.y += 0.5);
          })();
      }),
        loader.load(
          "GLtf/world.glb",
          function (t) {
            scene.add(t.scene),
              t.animations,
              t.scene,
              t.scenes,
              t.cameras,
              t.asset,
              (t.scene.position.y = -1),
              (_WORLD_ = t.scene);
          },
          function (t) {
            (document.getElementById(
              "prog"
            ).innerHTML = `File: World.glb / Loading World:% ${
              (t.loaded / t.total) * 100
            } % loaded`),
              setTimeout(() => {
                $("#prog").hide();
              }, 9e3);
          },
          ((error = skyTexture =
            new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.TextureLoader().load(
              "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR7CgRkVD-wPJQUneeToWgeDWQrXrKVuG8pruN25ryy7APB99k_mWsu-H6_IGf1tQ4_XGk&usqp=CAU"
            )),
          void (document.getElementById(
            "prog"
          ).innerHTML = `File: world.glb ERROR ${error}`))
        ),
        socket.on("event.fun.flood", () => {
          (id1.innerHTML = "<strong>Warning:</strong> Flash flood!"),
            scene.add(water),
            (_WORLD_.position.y = -3),
            setTimeout(() => {
              (_WORLD_.position.y = 0), (id1.innerHTML = "");
            }, 9e3);
        });
      const world = new CANNON.World({ gravity: new CANNON.Vec3(0, 0, -9.82) });
      socket.on("r-u-online", () => {
        socket.emit("client-online-yes");
      }),
        skyTexture ||
          console.error("DuccBOX.THREE.error Failed to load sky-box"),
        (scene.background = skyTexture);
      const astTexture =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.TextureLoader().load(
            "https://as1.ftcdn.net/v2/jpg/02/21/47/92/500_F_221479270_5WgcQKg1sYkwsp7ba2nLh0v2A7CGVqHR.jpg"
          ),
        ast1 = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.SphereGeometry(
            20,
            32,
            20
          ),
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshStandardMaterial(
            { map: astTexture }
          )
        );
      scene.add(ast1),
        (ast1.position.y = 2e3),
        socket.on("io-user-joined", () => {
          const t =
              new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.BoxGeometry(
                3,
                3,
                3
              ),
            e =
              new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshBasicMaterial(
                { color: 65280 }
              ),
            n = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(t, e);
          scene.add(n), (n.position.x = 400 * Math.random());
        });
      const waterGeometry =
        new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.PlaneGeometry(
          3e3,
          3e3
        );
      (water = new _Water_js__WEBPACK_IMPORTED_MODULE_2__.B(waterGeometry, {
        textureWidth: 512,
        textureHeight: 512,
        waterNormals:
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.TextureLoader().load(
            "https://threejs.org/examples/textures/waternormals.jpg",
            function (t) {
              t.wrapS = t.wrapT =
                _three_module_js__WEBPACK_IMPORTED_MODULE_3__.RepeatWrapping;
            }
          ),
        alpha: 1,
        sunDirection:
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Vector3(),
        sunColor: 16777215,
        waterColor: 7695,
        distortionScale: 3.7,
        fog: void 0 !== scene.fog,
      })),
        (water.rotation.x = -Math.PI / 2);
      const Pcontrols =
        new _PointerLockControls_js__WEBPACK_IMPORTED_MODULE_6__.q(
          camera,
          document.body
        );
      function _light() {
        const t =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.DirectionalLight(
            16777215,
            1
          );
        t.position.set(-100, 300, -100),
          (t.castShadow = !0),
          (t.shadow.camera.left = -2e3),
          (t.shadow.camera.right = 2e3),
          (t.shadow.camera.top = 2e3),
          (t.shadow.camera.bottom = -2e3),
          (t.shadow.camera.far = 2e3),
          (t.shadow.mapSize.width = 2048),
          (t.shadow.mapSize.height = 2048),
          scene.add(t);
        const e =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.AmbientLight(
            8421504
          );
        scene.add(e);
      }
      function chat() {
        window.open(
          "../chat.htm",
          "New Tab",
          "height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes",
          () => {
            console.log("chat loaded");
          }
        );
      }
      function authLogin() {
        window.open(
          "../auth.html",
          "New Tab",
          "height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"
        );
      }
      _light(), (camera.rotation.y = -1);
      const geometry10 =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.BoxGeometry(
            3,
            3,
            3
          ),
        material10 =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshBasicMaterial({
            color: 65280,
          }),
        cube10 = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(
          geometry10,
          material10
        );
      function F3() {
        const t = performance.memory;
        (document.getElementById("F3DATE").innerHTML =
          "BUILD ID:[" + version + "]"),
          (document.getElementById("DuccBOX").style.display = "none"),
          (document.getElementById("DuccBOXF3").style.display = "block"),
          (document.getElementById("F3HEAP").innerHTML =
            "js heap limit is:" + t.jsHeapSizeLimit + " Bytes"),
          (function e() {
            requestAnimationFrame(e),
              (document.getElementById("F3RENDER").innerHTML =
                "used js Heap:" + t.usedJSHeapSize / 1048576),
              t.jsHeapSizeLimit;
          })();
      }
      scene.add(cube10),
        (camera.position.y = 0.5),
        window.addEventListener("keydown", function () {
          switch (event.keyCode) {
            case 87:
              cube10.position.x -= 1;
              break;
            case 65:
              cube10.position.z += 1;
              break;
            case 83:
              cube10.position.x += 1;
              break;
            case 69:
              cube10.rotation.y += 0.5;
              break;
            case 68:
              cube10.position.z -= 1;
              break;
            case 82:
              cube10.rotation.y -= 0.5;
              break;
            case 81:
              cube10.rotation.y += 0.5;
              break;
            case 32:
              (cube10.position.y += 2),
                setTimeout(() => {
                  cube10.position.y -= 2;
                }, 200);
          }
        }),
        window.addEventListener("keydown", function () {
          switch (event.keyCode) {
            case 51:
              F3();
              break;
            case 88:
              document.getElementById("Help").style.display = "block";
              break;
            case 76:
              (document.getElementById("login-box").style.display = "block"),
                (document.getElementById("Help").style.display = "none");
          }
        });
      let pLayerH = 20;
      window.addEventListener("keydown", function () {
        switch (event.keyCode) {
          case 52:
            loader.load("GLtf/sword.gltf", function (t) {
              scene.add(t.scene),
                t.animations,
                t.scene,
                t.scenes,
                t.cameras,
                t.asset,
                (t.scene.position.y = 3);
            });
        }
      }),
        1 == PlayerHealth &&
          (console.log("You died with [PlayerHealth] object:" + PlayerHealth),
          socket.emit("duccbox.update.PvP.die", PlayerHealth)),
        socket.on("duccbox.update.PvP.Hit", () => {
          (PlayerHealth -= 1), socket.emit("duccbox.update.PvP.hitP");
        }),
        window.addEventListener("keydown", function () {
          let t = cube10.position.x,
            e = cube10.position.z,
            n = cube10.position.y,
            i = cube10.rotation.y;
          socket.emit("duccbox.update", t, e, n, i);
        }),
        socket.on("io-user-joined", (t) => {
          const e =
              new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.BoxGeometry(
                3,
                3,
                3
              ),
            n =
              new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshBasicMaterial(
                { color: 65280 }
              );
          (PlayerBOX = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(
            e,
            n
          )),
            scene.add(PlayerBOX);
        }),
        socket.on("duccbox.update.remove", () => {}),
        socket.on("duccbox.update.pos", (t, e, n, i) => {
          (PlayerBOX.position.x = t),
            (PlayerBOX.position.z = e),
            (PlayerBOX.position.y = n),
            (PlayerBOX.rotation.y = i);
        }),
        socket.emit("joined");
      const listener =
        new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.AudioListener();
      camera.add(listener);
      const sound = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Audio(
          listener
        ),
        audioLoader =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.AudioLoader();
      audioLoader.load("sound/orbit_jc.ogg", function (t) {
        sound.setBuffer(t),
          sound.setLoop(!0),
          sound.setVolume(0.5),
          sound.play();
      });
      const sunTexture =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.TextureLoader().load(
            "img/2k_sun.jpg"
          ),
        sun = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.SphereGeometry(
            20,
            32,
            20
          ),
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshStandardMaterial(
            { map: sunTexture }
          )
        );
      let free = !1;
      (sun.position.y = 800), scene.add(sun);
      const geometry1 =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.TorusGeometry(
            200,
            1,
            16,
            200
          ),
        material1 =
          new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshStandardMaterial(
            { color: 16737095 }
          ),
        torus1 = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(
          geometry1,
          material1
        );
      function onWindowResize() {
        (camera.aspect = window.innerWidth / window.innerHeight),
          camera.updateProjectionMatrix(),
          renderer.setSize(window.innerWidth, window.innerHeight);
      }
      function freecam1() {
        (free = !0),
          (controls = new _OrbitControls_js__WEBPACK_IMPORTED_MODULE_4__.z(
            camera,
            renderer.domElement
          )),
          controls.update();
      }
      (torus1.position.y = 800),
        scene.add(torus1),
        (ast1.position.z = 200 * Math.random()),
        (ast1.position.x = 200 * Math.random()),
        window.addEventListener("resize", onWindowResize),
        socket.on("app-reload", () => {
          window.location.reload();
        });
      const obj = {
          add: function () {
            helper();
          },
        },
        freecam = {
          add: function () {
            freecam1();
          },
        };
      function mute1() {
        var095 = "UN-mute";
      }
      const Mute = {
        add: function () {
          mute1();
        },
      };
      gui.add(obj, "add").name("helper");
      const obj1 = {
        add: function () {
          chat();
        },
      };
      gui.add(freecam, "add").name("Free-cam");
      const obj12 = {
        add: function () {
          authLogin();
        },
      };
      gui.add(obj12, "add").name("Login"),
        socket.on("oh-no", () => {
          id1.innerHTML = "<strong>W rn ng:</strong>NukE/";
          let t = 1,
            e = 1;
          const n =
              new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.TorusGeometry(
                300,
                10,
                16,
                300
              ),
            i =
              new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.MeshStandardMaterial(
                { color: 16737095 }
              ),
            r = new _three_module_js__WEBPACK_IMPORTED_MODULE_3__.Mesh(n, i);
          !(function n() {
            requestAnimationFrame(n), (t += 0.1), (e += 0.1), scene.add(r);
          })();
        });
      const messages = document.getElementById("messages"),
        form = document.getElementById("form"),
        input = document.getElementById("input");
      let PlayerBOX, MOD;
      if (
        (form.addEventListener("submit", function (t) {
          if ((t.preventDefault(), input.value)) {
            input.value.includes("fuck");
            const t = `web ${myName} ${input.value}`;
            socket.emit("chat message", t), (input.value = "");
          }
        }),
        socket.on("kick", () => {
          throw (
            (socket.emit("client-user-kicked"),
            socket.disconnect(),
            document.getElementsByClassName("three_canvas").remove(),
            (document.getElementById("kicked").innerHTML =
              "You have been kicked!"),
            new Error("Kicked by admin."))
          );
        }),
        socket.on("chat message", function (t) {
          const e = document.createElement("li");
          (e.textContent = t),
            messages.appendChild(e),
            console.log("Chat:" + t),
            window.scrollTo(0, document.body.scrollHeight);
        }),
        -1 == cube10.position.y &&
          ((document.getElementById("eRR").style.display = "block"),
          (cube10.position.y = 0)),
        (cube10.position.y = 0.5),
        30 == cube10.position.y)
      ) {
        document.getElementById("eRR").style.display = "block";
        const t = new Audio("sound/erro.mp3");
        t.play();
      }
      function handleFileSelect() {
        document.getElementById("MOD").addEventListener("change", function () {
          const t = new FileReader();
          (t.onload = function () {
            (MOD = t.result), MOD_SPACE();
          }),
            t.readAsText(this.files[0]);
        });
      }
      function MOD_SPACE(socket, cube10) {
        eval(MOD);
      }
      function Philips_hue_support(t, e, n) {}
      function animate() {
        requestAnimationFrame(animate),
          (document.getElementById(
            "cords"
          ).innerHTML = `x:${cube10.position.x} y:${cube10.position.y} z:${cube10.position.z} look:${cube10.rotation.y}`),
          (document.getElementById(
            "F3CORDS"
          ).innerHTML = `\n    POS_x:${cube10.position.x} \n    POS_y:${cube10.position.y} \n    POS_z:${cube10.position.z} \n    ROT_look:${cube10.rotation.y}\n    `),
          0 == free &&
            ((camera.position.z = cube10.position.z),
            (camera.position.x = cube10.position.x),
            (camera.position.y = cube10.position.y)),
          (document.getElementById("F3WINDOW").innerHTML =
            "Window Width:" +
            window.innerWidth +
            "Window Height:" +
            window.innerHeight),
          (water.material.uniforms.time.value += 0.1 / 3),
          (torus1.rotation.x += 0.007),
          (torus1.rotation.y += 0.007),
          (torus1.rotation.z += 0.007),
          (camera.rotation.y = cube10.rotation.y),
          (torus1.position.z += 0.03),
          (sun.position.z += 0.03),
          (ast1.position.y -= 1),
          renderer.render(scene, camera);
      }
      (document.getElementById("username").innerHTML = `username: ${myName}`),
        document
          .getElementById("MOD")
          .addEventListener("change", handleFileSelect, !1),
        animate();
    }
    function DuccBOX() {
      setTimeout(
        () =>
          new init(
            "DuccBOX.js",
            "startAsINIT",
            console.log("LOADED DUCCBOX.JS [startAsINIT] REV:" + version)
          ),
        200
      );
    }
    _gaq.push(["_setAccount", "G-7WDEN5SZJ6"]), _gaq.push(["_trackPageview"]);
    var __WEBPACK_DEFAULT_EXPORT__ = DuccBOX();
  })();
})();
